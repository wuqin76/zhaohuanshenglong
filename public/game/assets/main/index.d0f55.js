window.__require=function e(t,i,n){function o(a,s){if(!i[a]){if(!t[a]){var l=a.split("/");if(l=l[l.length-1],!t[l]){var d="function"==typeof __require&&__require;if(!s&&d)return d(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){return o(t[a][1][e]||e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({ActionFloat:[function(e,t,i){"use strict";cc._RF.push(t,"8ed29gdfWJPBqgnz+Xsh/f9","ActionFloat");var n,o=i,r=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=(a.ccclass,a.property,function(e){function t(t,i,n,o){var r=e.call(this)||this;return r.initWithDuration(t),r._from=i,r._to=n,r._delta=n-i,r._callback=o,r}return r(t,e),t.prototype.clone=function(){return new t(this.getDuration(),this._from,this._to,this._callback)},t.prototype.update=function(e){e=this._computeEaseTime(e);var t=this._to-this._delta*(1-e);this._callback&&this._callback(t)},t.prototype.reverse=function(){return new t(this.getDuration(),this._to,this._from,this._callback)},t}(cc.ActionInterval));o.default=s,cc.actionFloat=function(e,t,i,n){return new s(e,t,i,n)},cc._RF.pop()},{}],AnimNode:[function(e,t,i){"use strict";cc._RF.push(t,"e3284wLuZFKh46Gwdd+Sdn8","AnimNode");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("mgrCfg"),l=o("mgrDirector"),d=o("Tools"),c=o("LifeCycleMonitor"),u=function(e){function t(t,i){var n=e.call(this)||this;return n.nodeResource=null,n.clipName=null,n.clipSpeed=1,n.loadCompletedCallback=i,n.animData=s.default.get("anim_node_db",t),n.addComponent(c.default),n.onLoad(),n}return a(t,e),t.prototype.onLoad=function(){this._loadResourceNode()},t.prototype._onPreDestroy=function(){if(cc.isValid(this.nodeResource)){var t=this.nodeResource.getComponent(cc.Animation);cc.isValid(t)&&t.stop()}e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype._loadResourceNode=function(){var e=this,t=this.animData;l.default.loadRes(t.prefabFileName,cc.Prefab,function(i,n){if(i)return cc.warn("AnimNode._loadResourceNode error:",i),void(e.loadCompletedCallback&&e.loadCompletedCallback(t.id));if(!cc.isValid(e))return cc.warn("AnimNode._loadResourceNode on loadRes finish, this is invalid!"),void(e.loadCompletedCallback&&e.loadCompletedCallback(t.id));var o=cc.instantiate(n);o.parent=e,e.nodeResource=o,e.play(e.clipName),e.callback&&e.registerEventCallback(e.callback),e.loadCompletedCallback&&e.loadCompletedCallback(t.id)})},t.prototype.reset=function(){if(this.active=!0,this.angle=0,this.setPosition(0,0),this.scaleX=this.animData.scaleX,this.scaleY=this.animData.scaleY,this.opacity=255,this.nodeResource&&cc.isValid(this.nodeResource))for(var e=this.nodeResource.getComponentsInChildren(cc.ParticleSystem),t=0;t<e.length;t++)e[t].resetSystem()},t.prototype.play=function(e){if(this.clipName=e,this.nodeResource&&cc.isValid(this)){var t=this.nodeResource.getComponent(cc.Animation);if(cc.isValid(t)){if(!e){var i=t.getClips();i.length>0?e=i[0].name:cc.warn("AnimNode.play clip not found!",e)}var n=t.play(e);n&&(n.speed=this.clipSpeed)}}},t.prototype.setSpeed=function(e){if(this.clipSpeed=e,this.nodeResource&&cc.isValid(this)){var t=this.nodeResource.getComponent(cc.Animation);if(cc.isValid(t)){var i=this.clipName;if(!i){var n=t.getClips();n.length>0?i=n[0].name:cc.warn("AnimNode.play clip not found!",i)}var o=t.getAnimationState(i);o&&(o.speed=e)}}},t.prototype.registerEventCallback=function(e){if(this.callback=e,this.nodeResource&&cc.isValid(this)){this.unregisterEventCallback(),this.callback=e;var t=this.nodeResource.getComponent(cc.Animation);cc.isValid(t)&&(t.on("play",this.onAnimationPlay,this),t.on("stop",this.onAnimationStop,this),t.on("pause",this.onAnimationPause,this),t.on("resume",this.onAnimationResume,this),t.on("lastframe",this.onAnimationLastframe,this),t.on("finished",this.onAnimationFinished,this))}},t.prototype.unregisterEventCallback=function(){if(this.callback=null,this.nodeResource&&cc.isValid(this)){var e=this.nodeResource.getComponent(cc.Animation);cc.isValid(e)&&(e.off("play",this.onAnimationPlay,this),e.off("stop",this.onAnimationStop,this),e.off("pause",this.onAnimationPause,this),e.off("resume",this.onAnimationResume,this),e.off("lastframe",this.onAnimationLastframe,this),e.off("finished",this.onAnimationFinished,this))}},t.prototype.isLoaded=function(){return cc.isValid(this.nodeResource)},t.prototype._onEvent=function(e,t){if(cc.isValid(this.nodeResource)){var i=this.nodeResource.getComponent(cc.Animation);if(cc.isValid(i)){var n=i.currentClip.name;"function"==typeof this.callback&&this.callback({name:t,clipName:n})}}},t.prototype.onAnimationPlay=function(e){this._onEvent(e,"play")},t.prototype.onAnimationStop=function(e){this._onEvent(e,"stop")},t.prototype.onAnimationPause=function(e){this._onEvent(e,"pause")},t.prototype.onAnimationResume=function(e){this._onEvent(e,"resume")},t.prototype.onAnimationLastframe=function(e){this._onEvent(e,"lastframe")},t.prototype.onAnimationFinished=function(e){this._onEvent(e,"finished")},t.prototype.setColorEx=function(e){this.nodeResource&&cc.isValid(this)&&d.default.setCascadeColor(this,e)},t}(cc.Node);r.default=u,cc._RF.pop()},{}],Base64:[function(e,t,i){"use strict";cc._RF.push(t,"b84der7CppMXapFQITVgKSQ","Base64");var n=i;Object.defineProperty(n,"__esModule",{value:!0});for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=new Uint8Array(256),a=0;a<o.length;a++)r[o.charCodeAt(a)]=a;var s=function(){function e(){}return Object.defineProperty(e,"nativeBase64",{get:function(){return!1},enumerable:!1,configurable:!0}),e.decode=function(e){if(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),this.nativeBase64)return window.atob(e);for(var t,i,n,r,a,s,l=[],d=0;d<e.length;)t=o.indexOf(e.charAt(d++))<<2|(r=o.indexOf(e.charAt(d++)))>>4,i=(15&r)<<4|(a=o.indexOf(e.charAt(d++)))>>2,n=(3&a)<<6|(s=o.indexOf(e.charAt(d++))),l.push(String.fromCharCode(t)),64!==a&&l.push(String.fromCharCode(i)),64!==s&&l.push(String.fromCharCode(n));return l=l.join(""),this._utf8_decode(l)},e.encode=function(e){if(e=this._utf8_encode(e),!this.nativeBase64){for(var t,i,n,r,a,s,l,d=[],c=0;c<e.length;)r=(t=e.charCodeAt(c++))>>2,a=(3&t)<<4|(i=e.charCodeAt(c++))>>4,s=(15&i)<<2|(n=e.charCodeAt(c++))>>6,l=63&n,isNaN(i)?s=l=64:isNaN(n)&&(l=64),d.push(o.charAt(r)),d.push(o.charAt(a)),d.push(o.charAt(s)),d.push(o.charAt(l));return d.join("")}window.btoa(e)},e.encodeArrayBuffer=function(e){var t,i=new Uint8Array(e),n=i.length,r="";for(t=0;t<n;t+=3)r+=o[i[t]>>2],r+=o[(3&i[t])<<4|i[t+1]>>4],r+=o[(15&i[t+1])<<2|i[t+2]>>6],r+=o[63&i[t+2]];return n%3==2?r=r.substring(0,r.length-1)+"=":n%3==1&&(r=r.substring(0,r.length-2)+"=="),r},e.decodeArrayBuffer=function(e){var t,i,n,o,a,s=.75*e.length,l=e.length,d=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),u=new Uint8Array(c);for(t=0;t<l;t+=4)i=r[e.charCodeAt(t)],n=r[e.charCodeAt(t+1)],o=r[e.charCodeAt(t+2)],a=r[e.charCodeAt(t+3)],u[d++]=i<<2|n>>4,u[d++]=(15&n)<<4|o>>2,u[d++]=(3&o)<<6|63&a;return c},e.decodeToUnit32Array=function(t,i){i=i||1;var n,o,r,a=e.decode(t),s=new Uint32Array(a.length/i);for(n=0,r=a.length/i;n<r;n++)for(s[n]=0,o=i-1;o>=0;--o)s[n]+=a.charCodeAt(n*i+o)<<(o<<3);return s},e.removePaddingChars=function(e){return 64==o.indexOf(e.charAt(e.length-1))?e.substring(0,e.length-1):e},e.decodeToUnit8Array=function(e,t){e=this.removePaddingChars(e),e=this.removePaddingChars(e);var i,n,r,a,s,l,d,c=Math.floor(e.length/4*3),u=0,h=0;for(i=t?new Uint8Array(t):new Uint8Array(c),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),u=0;u<c;u+=3)n=o.indexOf(e.charAt(h++))<<2|(s=o.indexOf(e.charAt(h++)))>>4,r=(15&s)<<4|(l=o.indexOf(e.charAt(h++)))>>2,a=(3&l)<<6|(d=o.indexOf(e.charAt(h++))),i[u]=n,64!=l&&(i[u+1]=r),64!=d&&(i[u+2]=a);return i},e.decodeToArrayBuffer=function(e){var t=Math.floor(e.length/4*3),i=new ArrayBuffer(t);return this.decodeToUnit8Array(e,i),i},e._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},e._utf8_decode=function(e){for(var t="",i=0,n=0,o=0,r=0;i<e.length;)(n=e.charCodeAt(i))<128?(t+=String.fromCharCode(n),i++):n>191&&n<224?(o=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&o),i+=2):(o=e.charCodeAt(i+1),r=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&r),i+=3);return t},e}();n.default=s,cc._RF.pop()},{}],CascadeColor:[function(e,t,i){"use strict";cc._RF.push(t,"6b6adtOTYdHdaV5o4AagF1A","CascadeColor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tools"),d=cc._decorator,c=d.ccclass,u=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){this.node.on("child-added",this.updateColor.bind(this)),this.node.on("color-changed",this.updateColor.bind(this)),this.updateColor()},t.prototype.updateColor=function(){var e=this;cc.isValid(this.node)&&l.default.recursionChildren(this.node,function(t){t.color=e.node.color})},s([c],t)}(cc.Component));r.default=u,cc._RF.pop()},{}],CfgParser:[function(e,t,i){"use strict";cc._RF.push(t,"28a48t7aL9M2aeRvb7tTw6M","CfgParser");var n=i,o=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(){function e(){}var t;return t=e,e.parseCfgByJsonObj=function(e,t,i){var n=this.preprocess(e,t);return this.formatDb(e,n,i,t.fields)},e.parseNumber=function(e){var t=parseFloat(e);return isNaN(t)&&(t=null),t},e.parseString=function(e){return e},e.parseArray=function(e){var t=null;try{(t=JSON.parse(e))instanceof Array||(t=null)}catch(e){}return t},e.parseObject=function(e){var t=null;try{(t=JSON.parse(e))instanceof Object||(t=null)}catch(e){}return t},e.parseBoolean=function(e){return"TRUE"==e||"true"==e},e.parseValue=function(e,t){var i=this.PARSE_FUNCTIONS[t];if(!i)return"";var n=i(e);if(null==n){var o=this.PARSE_DEFAULT_VALUE_CREATORS[t]();return e.length>0&&cc.warn("[\u8b66\u544a] CfgParser.parseValue \u89e3\u6790\u9519\u8bef\uff1atype="+t+", srcValue=["+e+"], \u9ed8\u8ba4\u503c=["+o+"]]"),o}return n},e.preprocess=function(e,t){var i=[],n=t.types||[],o=t.fields||[],r=t.values||[];if(!(r.length<=0)){if(n.length!=r[0].length||o.length!=r[0].length)return cc.log("[\u8b66\u544a] CfgParser.preprocessData  "+e+" \u6570\u636e\u957f\u5ea6\u4e0d\u5339\u914d\uff01"),[];for(var a=0;a<r.length;a++){for(var s=r[a],l={},d=0;d<s.length;d++){var c=n[d],u=o[d],h=s[d];l[u]=this.parseValue(h,c)}i.push(l)}return i}cc.log("[\u8b66\u544a] CfgParser.preprocessData "+e+" \u6570\u636e\u4e3a\u7a7a")},e.formatDb=function(e,t,i,n){for(var o=i.split(""),r={},a=0;a<t.length;a++){for(var s=t[a],l=r,d=0;d<o.length-1;d++){var c=l[h=s[n[d]]];c||(c=d==o.length-2&&"a"==o[o.length-1]?[]:{},l[h]=c),l=c}var u=o[o.length-1];if("m"==u){var h;if(null!=l[h=s[n[o.length-1]]]){var p="db";for(d=0;d<o.length;d++)p+="["+s[n[d]]+"]";cc.log("[\u8b66\u544a] CfgParser.formatDb  "+e+" \u5b57\u6bb5\u88ab\u8986\u76d6\uff01",p,l[h])}l[h]=s}else"a"==u&&(l instanceof Array||1==o.length&&(r=l=[]),l instanceof Array?l.push(s):cc.log("[\u8b66\u544a] CfgParser.formatDb  "+e+" a\u6a21\u5f0f\uff0c\u5bb9\u5668\u4e0d\u662f\u6570\u7ec4\uff01"))}return r},e.PARSE_FUNCTIONS={A:t.parseArray,O:t.parseObject,N:t.parseString,S:t.parseString,I:t.parseNumber,F:t.parseNumber,B:t.parseBoolean},e.PARSE_DEFAULT_VALUE_CREATORS={A:function(){return[]},O:function(){return{}},N:function(){return""},S:function(){return""},I:function(){return 0},F:function(){return 0},B:function(){return!1}},o([a],e)}());n.default=s,cc._RF.pop()},{}],ColorEx:[function(e,t){"use strict";cc._RF.push(t,"5a7faseHRpDopu5s3opLfEJ","ColorEx"),cc.Color.prototype.fromHEX=function(e){e=0===e.indexOf("#")?e.substring(1):e;var t=parseInt(e.substr(0,2),16)||0,i=parseInt(e.substr(2,2),16)||0,n=parseInt(e.substr(4,2),16)||0,o=parseInt(e.substr(6,2),16);return isNaN(o)&&(o=255),this._val=(o<<24>>>0)+(n<<16)+(i<<8)+t,this},cc._RF.pop()},{}],ComponentBase:[function(e,t,i){"use strict";cc._RF.push(t,"0a733KhhhBDg5mxvbNOI9fo","ComponentBase");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("MsgHandler"),l=o("Tools"),d=function(e){function t(){var t=e.call(this)||this;return t._msgHander=new s.default,t}return a(t,e),t.prototype.onLoad=function(){this.startProcMsg()},t.prototype.onDestroy=function(){this.stopProcMsg()},t.prototype.registerListeners=function(e){var t=this;l.default.forEachMap(e,function(i,n){e[i]=n.bind(t)}),this._msgHander.registerListeners(e)},t.prototype.startProcMsg=function(){this._msgHander.startProcMsg()},t.prototype.stopProcMsg=function(){this._msgHander.stopProcMsg()},t.prototype.sendMsg=function(e,t){this._msgHander.sendMsg(e,t)},t}(cc.Component);r.default=d,cc._RF.pop()},{}],Const:[function(e,t,i){"use strict";cc._RF.push(t,"c54bf4JLl9PjLK3VwVekJ0m","Const");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.NodeGroup=n.ResourceType=n.FOLLOW_STATE=void 0,function(e){e[e.FOLLOWED=1]="FOLLOWED",e[e.UNFOLLOW=2]="UNFOLLOW"}(n.FOLLOW_STATE||(n.FOLLOW_STATE={})),function(e){e[e.sprite=1]="sprite",e[e.spine=2]="spine",e[e.animNode=3]="animNode",e[e.particle=4]="particle",e[e.dragoneBone=5]="dragoneBone"}(n.ResourceType||(n.ResourceType={})),n.NodeGroup={default:"default",platform:"platform",actor:"actor",collider:"collider"};var o=function(){function e(){}return e.useSdkV5=!1,e.isCompressedSpineJson=!1,e.gameId=152,e.packageVersion="1.0.0",e.sdcardPath="",e.copChannelId="",e.ulsdkVersion="",e.cdkChannelId="",e.GAME_VERSION="unknown",e.ITEM_ID_DIAMONDS=1,e.ITEM_ID_GOLD=2,e.ITEM_ID_EXP=3,e.ITEM_ID_ENERGY=4,e.ITEM_ID_MAX_ENERGY=5,e.ITEM_ID_VIDEO_SHARE_COUNT=9,e.ITEM_ID_SHARE_COUNT=10,e.ITEM_ID_FOLLOW_DOUYIN_COUNT=11,e.ITEM_ID_STAGE_COUNT=13,e.ITEM_ID_RANK_COUNT=14,e.ITEM_ID_CHARM_LIFE_COUNT=15,e.ITEM_ID_APPOINTMENT_COUNT=16,e.ITEM_FLAG_MONEY=1,e.ITEM_FLAG_PART=2,e.GLOBAL_ORDER_TIP_ICON=900,e.GLOBAL_ORDER_DIALOG=1e3,e.GLOBAL_ORDER_TIP=1100,e.GLOBAL_ORDER_NATIVE_BANNER=1200,e.GLOBAL_ORDER_NATIVE_AD=1300,e.GLOBAL_ORDER_CLOSE_PROMPT=1400,e.GLOBAL_ORDER_WARP=1500,e.GLOBAL_ORDER_WARP_SCENE_NODE=1e4,e.GLOBAL_ORDER_MASK=10001,e.RESOLUTION_RANGE={maxWidth:768,minWidth:576,maxHeight:1152,minHeight:1024},e.RESOLUTION_RANGE_ALLOW={maxWidth:768,minWidth:576,maxHeight:1280,minHeight:1024},e.SERVER_HOST="https://rank.ultralisk.cn",e.SERVER_URL_FORMAT="%s/ultralisk/",e.SERVER_APP_ID=53,e.SERVER_COLLECTION_RANK_ID=67,e.SERVER_MATCH_RANK_ID=70,e.RADIAN2EULAR=180/Math.PI,e.FORCE_PATCH_CHANNEL_NAME_KEY="FORCE_PATCH_CHANNEL_NAME_KEY",e.AVATAR_SHADOW_BEGIN_GROUP_INDEX=3,e.VIEW_BANNER_STATUS_NOTHING=0,e.VIEW_BANNER_STATUS_OPEN=1,e.VIEW_BANNER_STATUS_CLOSE=2,e.STAGE_GROUP="room",e.BOUNDS_X=0,e.BOUNDS_Y=1,e.BOUNDS_W=2,e.BOUNDS_H=3,e.ENTITY_TYPE_OBJECT=1,e.ENTITY_TYPE_WIDGET=2,e.ENTITY_TYPE_FOOD=3,e.ENTITY_TYPE_ROLE=4,e.ENTITY_TYPE_WALL=5,e.ENTITY_TYPE_GROUND=6,e.ENTITY_TYPE_GAN=7,e.ENTITY_TYPE_GOU=8,e}();n.default=o,cc._RF.pop()},{}],CryptoJS:[function(e,t,i){"use strict";cc._RF.push(t,"03a08QcZ91JVpuprEp0MeA8","CryptoJS");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoJS=void 0;var o=function(){var e=e||function(e){var t=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),i={},n=i.lib={},o=n.Base={extend:function(e){var i=t(this);return e&&i.mixIn(e),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,o=e.sigBytes;if(this.clamp(),n%4)for(var r=0;r<o;r++){var a=i[r>>>2]>>>24-r%4*8&255;t[n+r>>>2]|=a<<24-(n+r)%4*8}else for(r=0;r<o;r+=4)t[n+r>>>2]=i[r>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,n=[],o=function(t){t=t;var i=987654321,n=4294967295;return function(){var o=((i=36969*(65535&i)+(i>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var s=o(4294967296*(i||e.random()));i=987654071*s(),n.push(4294967296*s()|0)}return new r.init(n,t)}}),a=i.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],o=0;o<i;o++){var r=t[o>>>2]>>>24-o%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new r.init(i,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],o=0;o<i;o++){var r=t[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(r))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new r.init(i,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,o=i.sigBytes,a=this.blockSize,s=o/(4*a),l=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,d=e.min(4*l,o);if(l){for(var c=0;c<l;c+=a)this._doProcessBlock(n,c);var u=n.splice(0,l);i.sigBytes-=d}return new r.init(u,d)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=(n.Hasher=c.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}}),i.algo={});return i}(Math);return function(){var t=e,i=t.lib.WordArray;function n(e,t,n){for(var o=[],r=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2,l=n[e.charCodeAt(a)]>>>6-a%4*2;o[r>>>2]|=(s|l)<<24-r%4*8,r++}return i.create(o,r)}t.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp();for(var o=[],r=0;r<i;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,s=0;s<4&&r+.75*s<i;s++)o.push(n.charAt(a>>>6*(3-s)&63));var l=n.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(e){var t=e.length,i=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var r=0;r<i.length;r++)o[i.charCodeAt(r)]=r}var a=i.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return n(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){var i=e,n=i.lib,o=n.WordArray,r=n.Hasher,a=i.algo,s=[],l=[];(function(){function e(e){for(var i=t.sqrt(e),n=2;n<=i;n++)if(!(e%n))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var n=2,o=0;o<64;)e(n)&&(o<8&&(s[o]=i(t.pow(n,.5))),l[o]=i(t.pow(n,1/3)),o++),n++})();var d=[],c=a.SHA256=r.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],o=i[1],r=i[2],a=i[3],s=i[4],c=i[5],u=i[6],h=i[7],p=0;p<64;p++){if(p<16)d[p]=0|e[t+p];else{var f=d[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,v=d[p-2],_=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;d[p]=g+d[p-7]+_+d[p-16]}var y=n&o^n&r^o&r,m=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),S=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&u)+l[p]+d[p];h=u,u=c,c=s,s=a+S|0,a=r,r=o,o=n,n=S+(m+y)|0}i[0]=i[0]+n|0,i[1]=i[1]+o|0,i[2]=i[2]+r|0,i[3]=i[3]+a|0,i[4]=i[4]+s|0,i[5]=i[5]+c|0,i[6]=i[6]+u|0,i[7]=i[7]+h|0},_doFinalize:function(){var e=this._data,i=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return i[o>>>5]|=128<<24-o%32,i[14+(o+64>>>9<<4)]=t.floor(n/4294967296),i[15+(o+64>>>9<<4)]=n,e.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});i.SHA256=r._createHelper(c),i.HmacSHA256=r._createHmacHelper(c)}(Math),function(){var t=e,i=t.lib,n=i.Base,o=i.WordArray,r=t.x64={};r.Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),r.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],n=0;n<t;n++){var r=e[n];i.push(r.high),i.push(r.low)}return o.create(i,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),i=t.length,o=0;o<i;o++)t[o]=t[o].clone();return e}})}(),function(){var t=e,i=t.lib.Hasher,n=t.x64,o=n.Word,r=n.WordArray,a=t.algo;function s(){return o.create.apply(o,arguments)}var l=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],d=[];(function(){for(var e=0;e<80;e++)d[e]=s()})();var c=a.SHA512=i.extend({_doReset:function(){this._hash=new r.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],o=i[1],r=i[2],a=i[3],s=i[4],c=i[5],u=i[6],h=i[7],p=n.high,f=n.low,g=o.high,v=o.low,_=r.high,y=r.low,m=a.high,S=a.low,b=s.high,C=s.low,I=c.high,F=c.low,R=u.high,w=u.low,L=h.high,T=h.low,x=p,P=f,A=g,E=v,N=_,D=y,k=m,M=S,O=b,B=C,U=I,V=F,G=R,H=w,j=L,W=T,z=0;z<80;z++){var K=d[z];if(z<16)var Y=K.high=0|e[t+2*z],J=K.low=0|e[t+2*z+1];else{var q=d[z-15],X=q.high,Q=q.low,Z=(X>>>1|Q<<31)^(X>>>8|Q<<24)^X>>>7,$=(Q>>>1|X<<31)^(Q>>>8|X<<24)^(Q>>>7|X<<25),ee=d[z-2],te=ee.high,ie=ee.low,ne=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,oe=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),re=d[z-7],ae=re.high,se=re.low,le=d[z-16],de=le.high,ce=le.low;Y=(Y=(Y=Z+ae+((J=$+se)>>>0<$>>>0?1:0))+ne+((J+=oe)>>>0<oe>>>0?1:0))+de+((J+=ce)>>>0<ce>>>0?1:0),K.high=Y,K.low=J}var ue,he=O&U^~O&G,pe=B&V^~B&H,fe=x&A^x&N^A&N,ge=P&E^P&D^E&D,ve=(x>>>28|P<<4)^(x<<30|P>>>2)^(x<<25|P>>>7),_e=(P>>>28|x<<4)^(P<<30|x>>>2)^(P<<25|x>>>7),ye=(O>>>14|B<<18)^(O>>>18|B<<14)^(O<<23|B>>>9),me=(B>>>14|O<<18)^(B>>>18|O<<14)^(B<<23|O>>>9),Se=l[z],be=Se.high,Ce=Se.low,Ie=j+ye+((ue=W+me)>>>0<W>>>0?1:0),Fe=_e+ge;j=G,W=H,G=U,H=V,U=O,V=B,O=k+(Ie=(Ie=(Ie=Ie+he+((ue+=pe)>>>0<pe>>>0?1:0))+be+((ue+=Ce)>>>0<Ce>>>0?1:0))+Y+((ue+=J)>>>0<J>>>0?1:0))+((B=M+ue|0)>>>0<M>>>0?1:0)|0,k=N,M=D,N=A,D=E,A=x,E=P,x=Ie+(ve+fe+(Fe>>>0<_e>>>0?1:0))+((P=ue+Fe|0)>>>0<ue>>>0?1:0)|0}f=n.low=f+P,n.high=p+x+(f>>>0<P>>>0?1:0),v=o.low=v+E,o.high=g+A+(v>>>0<E>>>0?1:0),y=r.low=y+D,r.high=_+N+(y>>>0<D>>>0?1:0),S=a.low=S+M,a.high=m+k+(S>>>0<M>>>0?1:0),C=s.low=C+B,s.high=b+O+(C>>>0<B>>>0?1:0),F=c.low=F+V,c.high=I+U+(F>>>0<V>>>0?1:0),w=u.low=w+H,u.high=R+G+(w>>>0<H>>>0?1:0),T=h.low=T+W,h.high=L+j+(T>>>0<W>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(n+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=i._createHelper(c),t.HmacSHA512=i._createHmacHelper(c)}(),e.lib.Cipher||function(t){var i=e,n=i.lib,o=n.Base,r=n.WordArray,a=n.BufferedBlockAlgorithm,s=i.enc,l=(s.Utf8,s.Base64),d=i.algo.EvpKDF,c=n.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?m:_}return function(t){return{encrypt:function(i,n,o){return e(n).encrypt(t,i,n,o)},decrypt:function(i,n,o){return e(n).decrypt(t,i,n,o)}}}}()}),u=(n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),i.mode={}),h=n.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=u.CBC=function(){var e=h.extend();function i(e,i,n){var o=this._iv;if(o){var r=o;this._iv=t}else r=this._prevBlock;for(var a=0;a<n;a++)e[i+a]^=r[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize;i.call(this,e,t,o),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+o)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,r=e.slice(t,t+o);n.decryptBlock(e,t),i.call(this,e,t,o),this._prevBlock=r}}),e}(),f=(i.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=i-e.sigBytes%i,o=n<<24|n<<16|n<<8|n,a=[],s=0;s<n;s+=4)a.push(o);var l=r.create(a,n);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:p,padding:f}),reset:function(){c.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=i.createEncryptor;else n=i.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==n?this._mode.init(this,t&&t.words):(this._mode=n.call(i,this,t&&t.words),this._mode.__creator=n)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),n.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),v=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var n=r.create([1398893684,1701076831]).concat(i).concat(t);else n=t;return n.toString(l)},parse:function(e){var t=l.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var n=r.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return g.create({ciphertext:t,salt:n})}},_=n.SerializableCipher=o.extend({cfg:o.extend({format:v}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var o=e.createEncryptor(i,n),r=o.finalize(t),a=o.cfg;return g.create({ciphertext:r,key:i,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(i.kdf={}).OpenSSL={execute:function(e,t,i,n){n||(n=r.random(8));var o=d.create({keySize:t+i}).compute(e,n),a=r.create(o.words.slice(t),4*i);return o.sigBytes=4*t,g.create({key:o,iv:a,salt:n})}},m=n.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:y}),encrypt:function(e,t,i,n){var o=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize);n.iv=o.iv;var r=_.encrypt.call(this,e,t,o.key,n);return r.mixIn(o),r},decrypt:function(e,t,i,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var o=n.kdf.execute(i,e.keySize,e.ivSize,t.salt);return n.iv=o.iv,_.decrypt.call(this,e,t,o.key,n)}})}(),function(){var t=e,i=t.lib.BlockCipher,n=t.algo,o=[],r=[],a=[],s=[],l=[],d=[],c=[],u=[],h=[],p=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,n=0;for(t=0;t<256;t++){var f=n^n<<1^n<<2^n<<3^n<<4;f=f>>>8^255&f^99,o[i]=f,r[f]=i;var g=e[i],v=e[g],_=e[v],y=257*e[f]^16843008*f;a[i]=y<<24|y>>>8,s[i]=y<<16|y>>>16,l[i]=y<<8|y>>>24,d[i]=y,y=16843009*_^65537*v^257*g^16843008*i,c[f]=y<<24|y>>>8,u[f]=y<<16|y>>>16,h[f]=y<<8|y>>>24,p[f]=y,i?(i=g^e[e[e[_^g]]],n^=e[e[n]]):i=n=1}})();var f=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=i.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,n=4*((this._nRounds=i+6)+1),r=this._keySchedule=[],a=0;a<n;a++)if(a<i)r[a]=t[a];else{var s=r[a-1];a%i?i>6&&a%i==4&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=o[(s=s<<8|s>>>24)>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=f[a/i|0]<<24),r[a]=r[a-i]^s}for(var l=this._invKeySchedule=[],d=0;d<n;d++)a=n-d,s=d%4?r[a]:r[a-4],l[d]=d<4||a<=4?s:c[o[s>>>24]]^u[o[s>>>16&255]]^h[o[s>>>8&255]]^p[o[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,l,d,o)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,c,u,h,p,r),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,o,r,a,s){for(var l=this._nRounds,d=e[t]^i[0],c=e[t+1]^i[1],u=e[t+2]^i[2],h=e[t+3]^i[3],p=4,f=1;f<l;f++){var g=n[d>>>24]^o[c>>>16&255]^r[u>>>8&255]^a[255&h]^i[p++],v=n[c>>>24]^o[u>>>16&255]^r[h>>>8&255]^a[255&d]^i[p++],_=n[u>>>24]^o[h>>>16&255]^r[d>>>8&255]^a[255&c]^i[p++],y=n[h>>>24]^o[d>>>16&255]^r[c>>>8&255]^a[255&u]^i[p++];d=g,c=v,u=_,h=y}g=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&h])^i[p++],v=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^i[p++],_=(s[u>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^i[p++],y=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^i[p++],e[t]=g,e[t+1]=v,e[t+2]=_,e[t+3]=y},keySize:8});t.AES=i._createHelper(g)}(),e}();n.CryptoJS=o,cc._RF.pop()},{}],CustomTween:[function(e,t,i){"use strict";cc._RF.push(t,"3f4411jlhRMS53U+bpnccrj","CustomTween");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.SplicingImg=r.EffectBlink=void 0;var s=o("mgrDirector"),l=o("Timer"),d=function(){function e(){}return e.easeUpFlutter=function(e,t,i,n){if(void 0===i&&(i=1),void 0===n&&(n=40),e)return e.stopAllActions(),e.opacity=0,e.runAction(cc.spawn(cc.moveTo(i,cc.v2(e.x,e.y+n)).easing(cc.easeSineOut()),cc.sequence(cc.fadeIn(.2*i),cc.delayTime(.5*i),cc.fadeOut(.3*i),cc.callFunc(function(){t&&t()}))))},e.easeUpDownFlutter=function(e,t,i,n){if(void 0===i&&(i=3),void 0===n&&(n=30),e)return e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.moveBy(i/2,cc.v2(0,n)).easing(cc.easeSineIn()),cc.callFunc(function(){t&&t()}),cc.moveBy(i/2,cc.v2(0,-n)).easing(cc.easeSineOut()))))},e.roke=function(e,t,i){if(void 0===t&&(t=1),void 0===i&&(i=1),e){e.stopAllActions();var n=e.runAction(cc.repeatForever(cc.sequence(cc.sequence(cc.rotateBy(.1,5),cc.rotateBy(.2,-10),cc.rotateBy(.1,5)),cc.delayTime(t),cc.callFunc(function(){e.angle=0}))));n&&n.setTag(i)}},e.scalePop=function(e,t){void 0===t&&(t=.25),e&&(e.stopAllActions(),e.scale=0,e.runAction(cc.scaleTo(t,1).easing(cc.easeBackOut())))},e.scaleElastic=function(e,t,i){void 0===t&&(t=.3),void 0===i&&(i=1.2),e&&(e.stopAllActions(),e.runAction(cc.sequence(cc.scaleTo(t/2,i),cc.scaleTo(t/2,1))))},e.rotateForever=function(e,t,i){void 0===t&&(t=6),void 0===i&&(i=360),e&&(e.stopAllActions(),e.runAction(cc.repeatForever(cc.rotateBy(t,i))))},e.scaleForever=function(e,t,i){void 0===t&&(t=.5),void 0===i&&(i=.05),e&&(e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(t,1+i),cc.scaleTo(t,1-i)))))},e.newEffectBlink=function(){return new c},e.wordForWordShow=function(e,t,i){void 0===i&&(i=.1);var n=0;return e.string="",l.default.callLoop(i,function(i){++n>t.length?i.stop():cc.isValid(e.node)&&(e.string=t.substr(0,n))},!0)},e.floatNode=function(e,t,i){void 0===t&&(t=4),void 0===i&&(i=.5),e&&(e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.moveBy(i,t,t),cc.moveBy(2*i,0,2*-t),cc.moveBy(2*i,2*-t,2*t),cc.moveBy(2*i,0,2*-t),cc.moveBy(i,t,t)))))},e.shake=function(e,t){void 0===t&&(t=1.4),e&&(e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(t,1.15,.9).easing(cc.easeInOut(1)),cc.scaleTo(t,.9,1.15).easing(cc.easeInOut(1)),cc.scaleTo(t,1.1,.93).easing(cc.easeInOut(1.2)),cc.scaleTo(t,.93,1.1).easing(cc.easeInOut(1.2)),cc.scaleTo(t,1.05,.96).easing(cc.easeInOut(1.2)),cc.scaleTo(t,.96,1.05).easing(cc.easeInOut(1.2)),cc.scaleTo(t,1.03,.98).easing(cc.easeInOut(1.2)),cc.scaleTo(t,.98,1.03).easing(cc.easeInOut(1.2)),cc.scaleTo(t/2,1,1).easing(cc.easeInOut(1.2))))))},e}();r.default=d;var c=function(e){function t(){var t=e.call(this)||this,i=new cc.Node;i.color=cc.Color.BLACK,t.spriteTop=i.addComponent(cc.Sprite),t.addChild(i);var n=new cc.Node;n.color=cc.Color.BLACK,t.spriteBottom=n.addComponent(cc.Sprite),t.addChild(n);var o=new cc.Node;o.color=cc.Color.BLACK,t.spriteLeft=o.addComponent(cc.Sprite),t.addChild(o);var r=new cc.Node;r.color=cc.Color.BLACK,t.spriteRight=r.addComponent(cc.Sprite),t.addChild(r);var a=new cc.Node;return t.spriteCenter=a.addComponent(cc.Sprite),t.addChild(a),cc.loader.loadResArray(["2d/default/mask_eye","2d/default/singleColor"],cc.SpriteFrame,function(e,i){t.onResLoaded(i),t.bLoaded=!0,t.closingDuration&&t.close(t.closingDuration),t.openingDuration&&t.open(t.openingDuration)}),t}return a(t,e),t.prototype.onResLoaded=function(e){var t=e[1],i=e[0];this.spriteTop.spriteFrame=t,this.spriteBottom.spriteFrame=t,this.spriteLeft.spriteFrame=t,this.spriteRight.spriteFrame=t,this.spriteCenter.spriteFrame=i,this.spriteCenter.node.setContentSize(cc.size(s.default.fullWidth,0)),this.__refreshBlackArea()},t.prototype.__refreshBlackArea=function(){this.spriteTop.node.setContentSize(cc.size(s.default.fullWidth,s.default.fullHeight/2-this.spriteCenter.node.height/2)),this.spriteBottom.node.setContentSize(cc.size(s.default.fullWidth,s.default.fullHeight/2-this.spriteCenter.node.height/2)),this.spriteLeft.node.setContentSize(cc.size(s.default.fullWidth/2-this.spriteCenter.node.width/2,this.spriteCenter.node.height)),this.spriteRight.node.setContentSize(cc.size(s.default.fullWidth/2-this.spriteCenter.node.width/2,this.spriteCenter.node.height)),this.spriteTop.node.anchorY=1,this.spriteTop.node.y=s.default.fullHeight/2,this.spriteBottom.node.anchorY=0,this.spriteBottom.node.y=-s.default.fullHeight/2,this.spriteRight.node.anchorX=1,this.spriteRight.node.x=s.default.fullWidth/2,this.spriteLeft.node.anchorX=0,this.spriteLeft.node.x=-s.default.fullWidth/2},t.prototype.open=function(e,t){var i=this;this.openingDuration=e,this.bLoaded&&(this.spriteCenter.node.stopAllActions(),this.spriteCenter.node.runAction(cc.sequence(ul.actionFloat(e,0,204/338*s.default.fullWidth,function(e){i.spriteCenter.node.height=e,i.__refreshBlackArea()}).easing(cc.easeSineOut()),cc.callFunc(function(){t&&t()}))))},t.prototype.close=function(e,t){var i=this;this.closingDuration=e,this.bLoaded&&(this.spriteCenter.node.stopAllActions(),this.spriteCenter.node.runAction(cc.sequence(ul.actionFloat(e,204/338*s.default.fullWidth,0,function(e){i.spriteCenter.node.height=e,i.__refreshBlackArea()}).easing(cc.easeSineOut()),cc.callFunc(function(){t&&t()}))))},t}(cc.Node);r.EffectBlink=c;var u=function(e){function t(t){var i=e.call(this)||this,n=i.addComponent(cc.Layout);return n.type=cc.Layout.Type.VERTICAL,n.resizeMode=cc.Layout.ResizeMode.CONTAINER,cc.loader.loadResArray(t,cc.SpriteFrame,function(e,t){for(var o=0;o<t.length;o++){var r=t[o],a=new cc.Node,s=a.addComponent(cc.Sprite);i.addChild(a),s.spriteFrame=r,s.node.setContentSize(r.getOriginalSize())}n.updateLayout()}),i}return a(t,e),t}(cc.Node);r.SplicingImg=u,cc._RF.pop()},{}],DebugGrid:[function(e,t,i){"use strict";cc._RF.push(t,"c7ecdP8+WhCTofDa+KbkOrL","DebugGrid");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("LayerColor"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cells={},t.vLines={},t.hLines={},t}return a(t,e),t.prototype.clear=function(){for(var e in this.vLines){var t=this.vLines[e];cc.isValid(t)&&t.destroy()}for(var e in this.vLines={},this.hLines)t=this.hLines[e],cc.isValid(t)&&t.destroy();for(var i in this.hLines={},this.cells)for(var n in this.cells[i]){var o=this.cells[i][n];cc.isValid(o)&&o.destroy()}this.cells={}},t.prototype.fill=function(){var e=this.context.cellSize||10,t=this.context.grid,i=t._calcBounds(),n=i[0],o=i[1],r=i[2],a=i[3],l=r-n+1,d=o-a+1;if(this.context.bLineEnabled){for(var c=n;c<=r+1;c++){var u=this.vLines[c];if(cc.isValid(u)&&u.__grid_height!=d&&(u.destroy(),u=null,this.vLines[c]=null),null==u){var h=void 0;h=0==c?cc.color(255,255,0,63):cc.color(255,255,255,31),(u=new s.default(h)).parent=this,u.setContentSize(1,d*e),u.setAnchorPoint(.5,0),u.setPosition(c*e,a*e),u.__grid_height=d,this.vLines[c]=u}}for(var p=a;p<=o+1;p++)u=this.hLines[p],cc.isValid(u)&&u.__grid_width!=l&&(u.destroy(),u=null,this.hLines[p]=null),null==u&&(h=void 0,h=0==p?cc.color(255,255,0,63):cc.color(255,255,255,31),(u=new s.default(h)).parent=this,u.setContentSize(l*e,1),u.setAnchorPoint(0,.5),u.setPosition(n*e,p*e),u.__grid_width=l,this.hLines[p]=u)}var f=this.context.markedValue,g=this.cells,v=t.rows;for(var _ in v){var y=v[p=parseInt(_)],m=g[p]||[];for(var S in g[p]=m,y){var b=m[c=parseInt(S)];y[c]==f?null==b&&(h=this.context.color,(b=new s.default(this.context.color)).parent=this,b.setContentSize(e,e),b.setPosition(c*e,p*e),b.setAnchorPoint(0,0),m[c]=b):null!=b&&(cc.isValid(b)&&b.destroy(),m[c]=null)}}for(var _ in g)for(var S in m=g[p=parseInt(_)])b=m[c=parseInt(S)],t.getValue(c,p)!=f&&(cc.isValid(b)&&b.destroy(),m[c]=null)},t.prototype.convertToGridSpace=function(e){var t=this.convertToNodeSpaceAR(e),i=this.context.cellSize;return[Math.floor(t.x/i),Math.floor(t.y/i)]},t}(o("ViewBase").default);r.default=l,cc._RF.pop()},{}],DebugMenu:[function(e,t,i){"use strict";cc._RF.push(t,"c2312XTyQZI+6yxGda96ndc","DebugMenu");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("LayerColor"),l=o("Tools"),d=function(e){function t(t,i,n,o){void 0===o&&(o=4);var r=e.call(this)||this,a=i+2*o,d=n*t.length+o*(t.length+1),c=new s.default(cc.color(63,63,63,191));c.parent=r,c.setContentSize(a,d),c.setAnchorPoint(0,1);for(var u=-o,h=function(e){var r=t[e],a=r[0],d=r[1],h=new s.default(cc.color(0,0,0,63));h.parent=c,h.setContentSize(i,n),h.x=o+i/2,h.y=u-e*(o+n)-n/2;var p=new cc.Node;p.parent=h;var f=p.addComponent(cc.Label);f.fontSize=20,f.string=a,f.verticalAlign=cc.Label.VerticalAlign.CENTER,l.default.registerTouchHandler(h,function(e){"began"==e.name?p.color=cc.color(0,255,0):"ended"==e.name&&(p.color=cc.color(255,255,255),d())})},p=0;p<t.length;p++)h(p);return r}return a(t,e),t}(cc.Node);r.default=d,cc._RF.pop()},{}],DebugMouseControlNode:[function(e,t,i){"use strict";cc._RF.push(t,"bfaedijI1JElr+wGeM26gAa","DebugMouseControlNode");var n,o=i,r=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,d=(s.property,cc.Event.EventMouse.BUTTON_RIGHT),c=cc.Event.EventMouse.BUTTON_MIDDLE,u=function(e){function t(){var t=e.call(this)||this;return t.registerEvents(),t}return r(t,e),t.prototype.cleanup=function(){this._listener&&cc.eventManager.removeListener(this._listener)},t.prototype.registerEvents=function(){this.mousePressd={},this.registerMouseListener()},t.prototype.registerMouseListener=function(){var e=this,t=cc.EventListener.create({event:cc.EventListener.MOUSE,onMouseUp:function(t){t.name="up",e.onMouseHandler(t)},onMouseMove:function(t){t.name="move",e.onMouseHandler(t)},onMouseDown:function(t){t.name="down",e.onMouseHandler(t)},onMouseScroll:function(t){t.name="scroll",e.onMouseHandler(t)}});cc.eventManager.addListener(t,this)},t.prototype.onCameraTranslation=function(e,t){this.bPressedCtrl&&(e*=.1,t*=.1);var i=this.x,n=this.y;this.setPosition(i+e,n+t)},t.prototype.onCameraZoom=function(e,t,i){e=cc.misc.clampf(e,-1,1),cc.sys.isBrowser&&(e*=-1),this.bPressedCtrl&&(e*=.1);var n=this.convertToNodeSpaceAR(cc.v2(t,i)),o=this.scale;this.scale=Math.max(.5,o+.5*-e);var r=this.convertToWorldSpaceAR(n),a=this.x,s=this.y;this.setPosition(a+(t-r.x),s+(i-r.y))},t.prototype.onMouseHandler=function(e){var t=e.getButton(),i=e.getLocation(),n=(e.getScrollX(),e.getScrollY());switch(e.name){case"down":this.mousePressd[t]=!0;break;case"move":this.mousePressd[d]&&this.onCameraTranslation(e.getDeltaX(),e.getDeltaY());break;case"up":this.mousePressd[t]=!1,t==c&&(this.setPosition(0,0),this.scale=1);break;case"scroll":this.onCameraZoom(n,i.x,i.y)}},a([l],t)}(cc.Node);o.default=u,cc._RF.pop()},{}],DialogBase:[function(e,t,i){"use strict";cc._RF.push(t,"1142doFnitPdpYq8C742uzP","DialogBase");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("mgrDirector"),l=o("LayerColor"),d=o("Tools"),c=o("ViewBase"),u=o("Const"),h=function(e){function t(i){void 0===i&&(i={});var n=e.call(this,i)||this;n._viewName="",n.bClosing=!1,n.DEFAULT_SHADOW_OPACITY=170,n.bOpenCompleted=!1;var o=i.__viewName||"";return o&&(n._viewName=o,t.CUR_VIEWS[o]=!0),n}return a(t,e),t.hasDialogExists=function(){return this.GLOBAL_DIALOG_COUNT>0},t.isDialogExist=function(){for(var e in this.CUR_VIEWS)if(this.CUR_VIEWS[e])return!0;return!1},t.clearViews=function(){t.CUR_VIEWS={}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),t.GLOBAL_DIALOG_COUNT++;var i=this.getDialogName();i&&(cc.log("----dialog open name=",i),t.GOLBAL_DIALOG_NAME_DICT[i]=Math.max(t.GOLBAL_DIALOG_NAME_DICT[i]||0,0),t.GOLBAL_DIALOG_NAME_DICT[i]+=1),this.sendMsg("MSG_DIALOG_ONLOAD",{viewName:i,dialog:this,customUuid:this.getNodeCustomUuid(),zIndex:this.context.globalDialogzIndex||u.default.GLOBAL_ORDER_DIALOG,bDisableInt:this.context.bDisableInt})},t.prototype.onResourceLoaded=function(){var i=this;e.prototype.onResourceLoaded.call(this),this.opacity=255;var n=this.nodeResource;if(this.context.bImmediately)this.layerShadow&&(this.layerShadow.active=!0),this._onOpenDialogCompleted();else{if(this.layerShadow&&(this.layerShadow.active=!0,this.layerShadow.opacity=0,this.layerShadow.runAction(cc.fadeTo(.3,this.getShadowOpacity())).setTag(t.ACTION_TAG_OPEN)),this.bClosing)return;var o=n.getComponent(cc.Animation);if(!o){o=n.addComponent(cc.Animation);for(var r=[s.default.tryGetRes("2d/animation/defaultDialogOpen",cc.AnimationClip),s.default.tryGetRes("2d/animation/defaultDialogClose",cc.AnimationClip)],a=0;a<r.length;a++)o.addClip(r[a])}if(cc.isValid(o)){var l=o.play("defaultDialogOpen");l.speed=l.duration/.3,o.on("finished",function(){i._onOpenDialogCompleted(),o.targetOff(i)},this),o.setCurrentTime(1/60)}else cc.isValid(n)&&(n.scale=.5,n.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this._onOpenDialogCompleted.bind(this)))).setTag(t.ACTION_TAG_OPEN))}},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),t.GLOBAL_DIALOG_COUNT--,this.bClosing||(this.bClosing=!0,this._isFullscreenDialog()&&s.default.refreshFullscreenViewState(),this.context.fOnDialogClose&&"function"==typeof this.context.fOnDialogClose&&this.context.fOnDialogClose());var i=this.getDialogName();i&&(t.GOLBAL_DIALOG_NAME_DICT[i]=t.GOLBAL_DIALOG_NAME_DICT[i]||0,t.GOLBAL_DIALOG_NAME_DICT[i]=Math.max(0,t.GOLBAL_DIALOG_NAME_DICT[i]-1)),this.sendMsg("MSG_DIALOG_CLOSE",{viewName:i,customUuid:this.getNodeCustomUuid()})},t.prototype._onOpenDialogCompleted=function(){this.onOpenDialogCompleted(),this.bOpenCompleted=!0,this._isFullscreenDialog()&&s.default.refreshFullscreenViewState()},t.prototype.onOpenDialogCompleted=function(){},t.prototype._loadResource=function(){e.prototype._loadResource.call(this)},t.prototype.getDialogName=function(){var e=this._getResourceName();if(e&&""!=e){var t=e.lastIndexOf("/");return e.substring(t+1)}},t.prototype.openDialog=function(e){void 0===e&&(e=!1);var t=s.default.getUIRoot();if(this.isShadowEnabled()){var i=new l.default(cc.color(0,0,0,this.getShadowOpacity()));i.setContentSize(s.default.fullSize.width,s.default.fullSize.height+1),i.zIndex=-1,i.parent=this,i.active=!1,d.default.registerTouchHandler(i,this.onTouchLayerShadow.bind(this),!0),this.layerShadow=i}e=e||this.context.bImmediately,this.context.bImmediately=e,this.opacity=0,this.zIndex=u.default.GLOBAL_ORDER_DIALOG,this.parent=t},t.prototype.closeDialog=function(e){void 0===e&&(e=!1),this.bClosing||(t.CUR_VIEWS[this._viewName]=!1,this.bClosing=!0,this._isFullscreenDialog()&&s.default.refreshFullscreenViewState(),this.closeDialogEx(e))},t.prototype.closeDialogEx=function(e){var i=this;this.context.fOnDialogClose&&"function"==typeof this.context.fOnDialogClose&&this.context.fOnDialogClose(),cc.isValid(this.layerShadow)&&(d.default.unregisterTouchHandler(this.layerShadow),this.layerShadow.stopActionByTag(t.ACTION_TAG_OPEN)),cc.isValid(this.nodeResource)&&this.nodeResource.stopActionByTag(t.ACTION_TAG_OPEN),cc.isValid(this)&&(e?this.destroy():(this.layerShadow&&this.layerShadow.runAction(cc.fadeOut(.2)),cc.isValid(this.nodeResource)?this.nodeResource.runAction(cc.spawn(cc.scaleTo(.2,1.2,0).easing(cc.easeBackIn()),cc.sequence(cc.delayTime(.2*.7),cc.fadeOut(.06).easing(cc.easeOut(2)),cc.callFunc(function(){i.destroy()})))).setTag(t.ACTION_TAG_CLOSE):this.destroy()))},t.prototype.isShadowEnabled=function(){return!0},t.prototype.getShadowOpacity=function(){return this.DEFAULT_SHADOW_OPACITY},t.prototype.isClickShadowClose=function(){return!1},t.prototype.playOpenDialogSound=function(){},t.prototype._isFullscreenDialog=function(){return!1},t.prototype.isFullscreenView=function(){return!!this.bOpenCompleted&&!this.bClosing&&this._isFullscreenDialog()},t.prototype.onTouchLayerShadow=function(e){e.isClick()&&(this.bOpenCompleted?this.isClickShadowClose()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"DialogBase.shadow.click"}),this.closeDialog()):cc.warn("DialogBase.onTouchLayerShadow dialog is opening"))},t.GLOBAL_DIALOG_COUNT=0,t.GOLBAL_DIALOG_NAME_DICT={},t.CUR_VIEWS={},t.ACTION_TAG_OPEN=1,t.ACTION_TAG_CLOSE=2,t}(c.default);r.default=h,cc._RF.pop()},{}],DragonBone:[function(e,t,i){"use strict";cc._RF.push(t,"fa42e58nKVBra+NEYgV9+pJ","DragonBone");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("mgrCfg"),l=o("mgrDirector"),d=o("Tools"),c=o("LifeCycleMonitor"),u=function(e){function t(t,i){var n=e.call(this)||this;return n.nodeResource=null,n.animationName=null,n.clipSpeed=1,n.loadCompletedCallback=i,n.animData=s.default.get("dragon_db",t),n.addComponent(c.default),n.onLoad(),n}return a(t,e),t.prototype.onLoad=function(){this._loadResourceNode()},t.prototype._onPreDestroy=function(){e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype._loadResourceNode=function(){var e=this,t=this.animData;l.default.loadRes(t.prefabFileName,cc.Prefab,function(i,n){if(i)return cc.warn("DragonBone._loadResourceNode error:",i),void(e.loadCompletedCallback&&e.loadCompletedCallback(t.id));if(!cc.isValid(e))return cc.warn("DragonBone._loadResourceNode on loadRes finish, this is invalid!"),void(e.loadCompletedCallback&&e.loadCompletedCallback(t.id));var o=cc.instantiate(n);o.parent=e,e.nodeResource=o,e.play(),e.callback&&e.registerEventCallback(e.callback),e.loadCompletedCallback&&e.loadCompletedCallback(t.id)})},t.prototype.reset=function(){this.active=!0,this.angle=0,this.setPosition(0,0),this.scaleX=this.animData.scaleX,this.scaleY=this.animData.scaleY,this.opacity=255},t.prototype.play=function(e){if(this.animationName=e,this.nodeResource&&cc.isValid(this)){var t=this.nodeResource.getComponent(dragonBones.ArmatureDisplay);if(cc.isValid(t)){if(!e){var i=t.getAnimationNames("Armature");i.length>0?e=i[0]:cc.warn("DragonBone.play clip not found!",e)}var n=t.playAnimation(e,0);n&&(n.speed=this.clipSpeed)}}},t.prototype.setSpeed=function(e){if(this.clipSpeed=e,this.nodeResource&&cc.isValid(this)){var t=this.nodeResource.getComponent(dragonBones.ArmatureDisplay);if(cc.isValid(t)){var i=this.animationName;if(!i){var n=t.getAnimationNames("Armature");n.length>0?i=n[0]:cc.warn("DragonBone.play clip not found!",i)}t.timeScale=e}}},t.prototype.registerEventCallback=function(e){if(this.callback=e,this.nodeResource&&cc.isValid(this)){this.unregisterEventCallback(),this.callback=e;var t=this.nodeResource.getComponent(dragonBones.ArmatureDisplay);t.on(dragonBones.EventObject.START,this.onAnimationPlay,this),t.on(dragonBones.EventObject.LOOP_COMPLETE,this.onAnimationLastframe,this),t.on(dragonBones.EventObject.COMPLETE,this.onAnimationFinished,this)}},t.prototype.unregisterEventCallback=function(){if(this.callback=null,this.nodeResource&&cc.isValid(this)){var e=this.nodeResource.getComponent(dragonBones.ArmatureDisplay);e.off(dragonBones.EventObject.START,this.onAnimationPlay,this),e.off(dragonBones.EventObject.LOOP_COMPLETE,this.onAnimationLastframe,this),e.off(dragonBones.EventObject.COMPLETE,this.onAnimationFinished,this)}},t.prototype.isLoaded=function(){return cc.isValid(this.nodeResource)},t.prototype._onEvent=function(e,t){if(cc.isValid(this.nodeResource)){var i=this.nodeResource.getComponent(dragonBones.ArmatureDisplay).animationName;"function"==typeof this.callback&&this.callback({name:t,animationName:i})}},t.prototype.onAnimationPlay=function(e){this._onEvent(e,"play")},t.prototype.onAnimationLastframe=function(e){this._onEvent(e,"lastframe")},t.prototype.onAnimationFinished=function(e){this._onEvent(e,"finished")},t.prototype.setColorEx=function(e){this.nodeResource&&cc.isValid(this)&&d.default.setCascadeColor(this,e)},t}(cc.Node);r.default=u,cc._RF.pop()},{}],EffectGoneWithWind:[function(e,t,i){"use strict";cc._RF.push(t,"7e414JVE4NPOKWSHB9EVzBa","EffectGoneWithWind");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("mgrDirector"),l=o("Timer"),d=function(e){function t(t){var i=e.call(this,t)||this;return i.__init(),i.__generatePaper(i.__renderTexture()),i}return a(t,e),t.prototype.__init=function(){this.setContentSize(s.default.fullSize),this.root=new cc.Node,this.root.setContentSize(s.default.fullSize),this.root.parent=this,this.root.scaleY=-1,this.paperNodes={}},t.prototype.__renderTexture=function(){var e=s.default.fullSize,t=cc.game._renderContext,i=new cc.RenderTexture;i.initWithSize(e.width,e.height,t.STENCIL_INDEX8);var n=s.default.getCanvas().getChildByName("Main Camera").getComponent(cc.Camera),o=n.targetTexture;return n.targetTexture=i,n.render(),n.targetTexture=o,i},t.prototype.__generatePaper=function(e){for(var t=Math.floor(s.default.fullWidth),i=Math.floor(s.default.fullHeight),n=t/20,o=i/30,r=1;r<=20;r++)for(var a=1;a<=30;a++){var l=new cc.Node;l.setContentSize(cc.size(n,o)),l.parent=this.root,l.setPosition(cc.v2((r-1+.5)*n-t/2,(a-1+.5)*o-i/2));var d=l.addComponent(cc.Sprite),c=(r-1)*n,u=i-a*o;c=Math.min(c,t-n-1),u=Math.min(u,i-o-1);var h=cc.rect((r-1)*n,i-a*o,n,o);d.spriteFrame=new cc.SpriteFrame(e,h),d.spriteFrame.getTexture().setPremultiplyAlpha(!0),this.paperNodes[r]||(this.paperNodes[r]={}),this.paperNodes[r][a]=l}},t.prototype.playStage1=function(){},t.prototype.playStage2=function(e){for(var t=this,i=[],n=20;n>=1;n--)for(var o=1;o<=30;o++){var r=this.paperNodes[n][o];i.push(r)}for(var a=0,s=0;s<i.length;s++)(r=i[s]).runAction(cc.sequence(cc.delayTime(.25*Math.random()),cc.spawn(cc.scaleTo(.3,0),cc.fadeOut(.3)),cc.destroySelf(),cc.callFunc(function(){++a==i.length&&l.default.callLater(.1,function(){t.destroy(),e&&e()},t)})));return this},t}(cc.Node);r.default=d,cc._RF.pop()},{}],EventTouchEx:[function(e,t,i){"use strict";cc._RF.push(t,"c5c052Cml9LpJLJJGhORhUX","EventTouchEx");var n,o=i,r=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,d=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CLICK_RANGE_SQ=400,t.name="",t}return r(t,e),t.prototype.isClick=function(){return!1},t.prototype.isInClickRange=function(){return!1},a([l],t)}(cc.Event.EventTouch));o.default=d,cc.Event.EventTouch.prototype.isClick=function(){if("ended"!=this.name&&"cancelled"!=this.name)return!1;var e=this.getStartLocation(),t=this.getLocation();return e.sub(t).magSqr()<=400},cc.Event.EventTouch.prototype.isInClickRange=function(){var e=this.getStartLocation(),t=this.getLocation();return e.sub(t).magSqr()<=400},cc._RF.pop()},{}],FSMDialogBase:[function(e,t,i){"use strict";cc._RF.push(t,"e5975TXKitDhaiemvyALc7Q","FSMDialogBase");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("FSMObject"),d=o("DialogBase"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){this._fsmObject=new l.default,e.prototype.onLoad.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this._fsmObject&&this._fsmObject.update(t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fsmObject&&this._fsmObject.destroy()},t.prototype.getState=function(){return this._fsmObject.getState()},t.prototype.setNextState=function(e){this._fsmObject.setNextState(e)},t.prototype.removeState=function(e){this._fsmObject.removeState(e)},t.prototype.registerState=function(e,t,i,n){var o=null,r=null,a=null;t&&(o=this[t])&&(o=o.bind(this)),i&&(r=this[i])&&(r=r.bind(this)),n&&(a=this[n])&&(a=a.bind(this)),this._fsmObject.registerState(e,o,r,a)},s([u],t)}(d.default));r.default=h,cc._RF.pop()},{}],FSMObject:[function(e,t,i){"use strict";cc._RF.push(t,"78340ZFwntCqJb7oj6CQ375","FSMObject");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.curState=-1,this.nextState=this.curState,this.stateMap={}}return e.prototype.registerState=function(e,t,i,n){(t||i||n)&&(this.stateMap[e]={enter:t,execute:i,leave:n})},e.prototype.setNextState=function(e){this.nextState=e},e.prototype.update=function(e){var t=this.stateMap[this.curState],i=this.stateMap[this.nextState];this.nextState!=this.curState&&(this.curState=this.nextState,t&&t.leave&&t.leave(),i&&i.enter&&i.enter()),i&&i.execute&&i.execute(e)},e.prototype.getState=function(){return this.curState},e.prototype.getNextState=function(){return this.nextState},e.prototype.destroy=function(){this.stateMap={},this.curState=-1,this.nextState=this.curState},e.prototype.removeState=function(e){this.stateMap[e]=null},e}();n.default=o,cc._RF.pop()},{}],FSMSceneBase:[function(e,t,i){"use strict";cc._RF.push(t,"a2b1eJc0CRLSqpq/jnoMOnx","FSMSceneBase");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("FSMObject"),d=o("SceneBase"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){this._fsmObject=new l.default,e.prototype.onLoad.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this._fsmObject&&this._fsmObject.update(t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fsmObject&&this._fsmObject.destroy()},t.prototype.getState=function(){return this._fsmObject.getState()},t.prototype.setNextState=function(e){this._fsmObject.setNextState(e)},t.prototype.removeState=function(e){this._fsmObject.removeState(e)},t.prototype.registerState=function(e,t,i,n){var o=null,r=null,a=null;t&&(o=this[t])&&(o=o.bind(this)),i&&(r=this[i])&&(r=r.bind(this)),n&&(a=this[n])&&(a=a.bind(this)),this._fsmObject.registerState(e,o,r,a)},s([u],t)}(d.default));r.default=h,cc._RF.pop()},{}],FSMViewBase:[function(e,t,i){"use strict";cc._RF.push(t,"74c3bnyw25K7a47c4PGv4zV","FSMViewBase");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ViewBase"),d=o("FSMObject"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){this._fsmObject=new d.default,e.prototype.onLoad.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this._fsmObject&&this._fsmObject.update(t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fsmObject&&this._fsmObject.destroy()},t.prototype.getState=function(){return this._fsmObject.getState()},t.prototype.setNextState=function(e){this._fsmObject.setNextState(e)},t.prototype.removeState=function(e){this._fsmObject.removeState(e)},t.prototype.registerState=function(e,t,i,n){var o=null,r=null,a=null;t&&(o=this[t])&&(o=o.bind(this)),i&&(r=this[i])&&(r=r.bind(this)),n&&(a=this[n])&&(a=a.bind(this)),this._fsmObject.registerState(e,o,r,a)},s([u],t)}(l.default));r.default=h,cc._RF.pop()},{}],Fish141:[function(e,t,i){"use strict";cc._RF.push(t,"5ed43m24kRF1qPy7h3zfMSS","Fish141");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("Tools"),c=o("FSMViewBase"),u=o("ViewBase"),h=o("mgrCfg"),p=o("mgrGame");(function(e){e[e.init=1]="init",e[e.standby=2]="standby",e[e.run=3]="run"})(l||(l={}));var f=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.AUTO_RUN_MOVE_FPS=80,i.currDirRot=0,i.nextChangeRotTime=0,i.fishId=i.context.fishId||1,i.fishTemplate=h.default.get_from_fish_db(i.fishId),i.haveLongzhu=!1,i.haveSnow=!1,i}return a(t,e),t.prototype._onPreDestroy=function(){e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.update=function(t){if(e.prototype.update.call(this,t),this.nodeRes.scaleX,this.nodeRes&&(this.nodeRes.scaleX=this.currDirRot>=180?this.nodeRes.scaleY:-this.nodeRes.scaleY),this.labelDebug&&(this.labelDebug.string=ul.format("%d st:%d, running:%s",this.fishId,this.getState(),this.bRunning),this.labelDebug.node.angle=-this.angle),this.labelName){var i=d.default.calcPointOnArc(0,0,50,90-this.angle),n=i[0],o=i[1];this.labelName.node.angle=-this.angle,this.labelName.node.x=n,this.labelName.node.y=o}},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeRes=this.context.fCreateFishNode(this.fishId),this.nodeRes.parent=this.nodeResource,this.registerState(l.init,"onEnterInit","onExecuteInit","onLeaveInit"),this.registerState(l.standby,"onEnterStandby","onExecuteStandby","onLeaveStandby"),this.registerState(l.run,"onEnterRun","onExecuteRun","onLeaveRun"),this.setNextState(l.init)},t.prototype.getHitCheckNode=function(){return this.hitCheckNode},t.prototype.bHaveLongZhu=function(){return this.haveLongzhu},t.prototype.bHaveSnow=function(){return this.haveSnow},t.prototype.onEnterInit=function(){if(this.context.rankName){console.log("createRankName",this.context.rankName);var e=new cc.Node;e.parent=this,e.setAnchorPoint(.5,.5),e.position=cc.v2(0,50),e.zIndex=300,e.color=cc.color(44,80,214,255);var t=e.addComponent(cc.Label);t.fontSize=16,t.string=this.context.rankName,t.verticalAlign=cc.Label.VerticalAlign.CENTER,t.horizontalAlign=cc.Label.HorizontalAlign.CENTER,(i=t.addComponent(cc.LabelOutline)).color=cc.color(255,255,255,255),i.width=1,this.labelName=t}var i;this.setNextState(l.standby)},t.prototype.getWorldAABBPoints=function(){if(this.nodeRes)return this.nodeRes.getComponent(cc.BoxCollider).world.aabb},t.prototype.onExecuteInit=function(){},t.prototype.onLeaveInit=function(){},t.prototype.onEnterStandby=function(){this.nodeResource.angle=0},t.prototype.onExecuteStandby=function(){this.bRunning&&this.setNextState(l.run)},t.prototype.onLeaveStandby=function(){},t.prototype.onEnterRun=function(){this.currDirRot=d.default.random(360),this.nextChangeRotTime=d.default.time()+d.default.random(3,10)},t.prototype.onExecuteRun=function(e){if(this.moveFunc&&!p.default.bFishStopRun){if(this.moveFunc(this,this.currDirRot,this.context.autoMoveSpeed||this.AUTO_RUN_MOVE_FPS,e),!this.context.bDisableDisCheckWithPlayer&&this.context.fIsGameRunning&&!this.context.fIsGameRunning()){var t=this.context.playerPos,i=t.x-this.x,n=t.y-this.y;if(Math.sqrt(Math.abs(i*i+n*n))<250){var o=d.default.getAngle(i,n);o=o||0,this.currDirRot=o<0?360+o:o,this.nextChangeRotTime=d.default.time()+5,this.bChangingDisWithPlayer=!0}}d.default.time()>this.nextChangeRotTime&&(this.bChangingDisWithPlayer=!1,this.currDirRot+=d.default.random(100),this.currDirRot=this.currDirRot%360,this.nextChangeRotTime=d.default.time()+d.default.random(3,10))}},t.prototype.onLeaveRun=function(){},t.prototype.setMoveFunc=function(e){this.moveFunc=e},t.prototype.setContextField=function(e,t){this.context[e]=t},t.prototype.getFishId=function(){return this.context.fishId||1},t.prototype.getRidus=function(){return(this.fishTemplate.radius||10)*(this.fishTemplate.scale||1)},t.prototype.starAutoMove=function(){this.bRunning=!0,this.getState()!=l.standby||this.bRunning||this.setNextState(l.run)},t.prototype.stopAutoMove=function(){this.bRunning=!1,this.clearPendant(),this.getState()==l.run&&this.setNextState(l.standby)},t.prototype.createLongZhu=function(){this.haveLongzhu=!0,this.nodeLongzhu&&this.nodeLongzhu.destroy();var e=new cc.Node;e.parent=this,e.zIndex=300,e.scale=this.nodeRes.scaleY,e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2,1.2),cc.scaleTo(.5,1))));var t=new cc.Node;t.parent=e,t.setContentSize(50,50),t.addComponent(cc.Sprite).loadSpriteFrameAndKeepSize("2d/ui/hub/longzhu/art1"),this.nodeLongzhu=e},t.prototype.createSnow=function(){this.haveSnow=!0,this.nodeSnow&&this.nodeSnow.destroy();var e=new cc.Node;e.parent=this,e.zIndex=300,e.scale=this.nodeRes.scaleY;var t=new cc.Node;t.parent=e,t.setContentSize(50,50),t.addComponent(cc.Sprite).loadSpriteFrameAndKeepSize("2d/ui/common/snow_icon"),this.nodeSnow=e},t.prototype.clearPendant=function(){this.haveLongzhu=!1,this.haveSnow=!1,this.nodeLongzhu&&this.nodeLongzhu.destroy(),this.nodeSnow&&this.nodeSnow.destroy()},s([u.default.requireResourceLoaded],t.prototype,"starAutoMove",null),s([u.default.requireResourceLoaded],t.prototype,"stopAutoMove",null),s([u.default.requireResourceLoaded],t.prototype,"createLongZhu",null),s([u.default.requireResourceLoaded],t.prototype,"createSnow",null),t}(c.default);r.default=f,cc._RF.pop()},{}],FishString12:[function(e,t,i){"use strict";cc._RF.push(t,"4305b8qT3FI8qxKdxIZvcc+","FishString12");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("Tools"),c=o("FSMViewBase"),u=o("ViewBase"),h=o("mgrCfg"),p=o("mgrGame"),f=o("mgrPool");(function(e){e[e.init=1]="init",e[e.standby=2]="standby",e[e.run=3]="run"})(l||(l={}));var g=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.AUTO_RUN_MOVE_FPS=80,i.currDirRot=0,i.nextChangeRotTime=0,i.fishId=i.context.fishId||1,i.fishTemplate=h.default.get_from_fish_12_db(i.fishId),i.haveSnow=!1,i}return a(t,e),t.prototype._onPreDestroy=function(){this.dragonBone&&cc.isValid(this.dragonBone)&&(this.dragonBone.removeFromParent(),f.default.put(this.dragonBone),this.dragonBone=null),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.update=function(t){if(e.prototype.update.call(this,t),this.nodeRes.scaleX,this.context.bIgnoreScaleX||this.nodeRes&&(this.nodeRes.scaleX=this.currDirRot>=180?1:-1),this.labelDebug&&(this.labelDebug.string=ul.format("%d st:%d, running:%s",this.fishId,this.getState(),this.bRunning),this.labelDebug.node.angle=-this.angle),this.labelName){var i=d.default.calcPointOnArc(0,0,50,90-this.angle),n=i[0],o=i[1];this.labelName.node.angle=-this.angle,this.labelName.node.x=n,this.labelName.node.y=o}},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeRes=this.context.fCreateFishNode(this.fishId),this.nodeRes.parent=this.nodeResource,this.registerState(l.init,"onEnterInit","onExecuteInit","onLeaveInit"),this.registerState(l.standby,"onEnterStandby","onExecuteStandby","onLeaveStandby"),this.registerState(l.run,"onEnterRun","onExecuteRun","onLeaveRun"),this.setNextState(l.init)},t.prototype.getHitCheckNode=function(){return this.hitCheckNode},t.prototype.bHaveSnow=function(){return this.haveSnow},t.prototype.onEnterInit=function(){this.setNextState(l.standby)},t.prototype.getWorldAABBPoints=function(){var e=this.nodeRes.width,t=this.nodeRes.height,i=0-e/2,n=0-t/2;return[this.convertToWorldSpaceAR(cc.v2(i,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n+t)),this.convertToWorldSpaceAR(cc.v2(i,n+t))]},t.prototype.onExecuteInit=function(){},t.prototype.onLeaveInit=function(){},t.prototype.onEnterStandby=function(){this.nodeResource.angle=0},t.prototype.onExecuteStandby=function(){this.bRunning&&this.setNextState(l.run)},t.prototype.onLeaveStandby=function(){},t.prototype.onEnterRun=function(){this.currDirRot=d.default.random(360),this.nextChangeRotTime=d.default.time()+d.default.random(3,10)},t.prototype.onExecuteRun=function(e){if(this.moveFunc&&!p.default.bFishStopRun){if(this.moveFunc(this,this.currDirRot,this.fishTemplate.autoMoveSpeed||this.AUTO_RUN_MOVE_FPS,e),this.nodeResource.angle=-(this.currDirRot-180),!this.context.bDisableDisCheckWithPlayer&&this.context.fIsGameRunning&&!this.context.fIsGameRunning()){var t=this.context.playerPos,i=t.x-this.x,n=t.y-this.y;if(Math.sqrt(Math.abs(i*i+n*n))<250){var o=d.default.getAngle(i,n);o=o||0,this.currDirRot=o<0?360+o:o,this.nextChangeRotTime=d.default.time()+5,this.bChangingDisWithPlayer=!0}}d.default.time()>this.nextChangeRotTime&&(this.bChangingDisWithPlayer=!1,this.currDirRot+=d.default.random(100),this.currDirRot=this.currDirRot%360,this.nextChangeRotTime=d.default.time()+d.default.random(3,10))}},t.prototype.onLeaveRun=function(){},t.prototype.setMoveFunc=function(e){this.moveFunc=e},t.prototype.setContextField=function(e,t){this.context[e]=t},t.prototype.getFishId=function(){return this.context.fishId||1},t.prototype.getRidus=function(){return(this.fishTemplate.radius||10)*(this.fishTemplate.scale||1)},t.prototype.starAutoMove=function(){this.bRunning=!0,this.getState()!=l.standby||this.bRunning||this.setNextState(l.run)},t.prototype.stopAutoMove=function(){this.bRunning=!1,this.clearPendant(),this.getState()==l.run&&this.setNextState(l.standby)},t.prototype.createSnow=function(){this.haveSnow=!0,this.nodeSnow&&this.nodeSnow.destroy();var e=new cc.Node;e.parent=this,e.zIndex=300,e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2,1.2),cc.scaleTo(.5,1))));var t=new cc.Node;t.parent=e,t.setContentSize(this.fishTemplate.rectW*this.fishTemplate.scale,this.fishTemplate.rectH*this.fishTemplate.scale),t.addComponent(cc.Sprite).loadSpriteFrameAndKeepSize("2d/ui/common/snow_icon"),this.nodeSnow=e},t.prototype.clearPendant=function(){this.haveSnow=!1,this.nodeSnow&&this.nodeSnow.destroy()},s([u.default.requireResourceLoaded],t.prototype,"starAutoMove",null),s([u.default.requireResourceLoaded],t.prototype,"stopAutoMove",null),s([u.default.requireResourceLoaded],t.prototype,"createSnow",null),t}(c.default);r.default=g,cc._RF.pop()},{}],FishString13:[function(e,t,i){"use strict";cc._RF.push(t,"ecc718cMrZCILcDlBYcESM/","FishString13");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("Tools"),c=o("FSMViewBase"),u=o("ViewBase"),h=o("mgrCfg"),p=o("mgrGame"),f=o("mgrPool");(function(e){e[e.init=1]="init",e[e.standby=2]="standby",e[e.run=3]="run"})(l||(l={}));var g=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.AUTO_RUN_MOVE_FPS=80,i.currDirRot=0,i.nextChangeRotTime=0,i.fishId=i.context.fishId||1,i.fishTemplate=h.default.get_from_fish_13_db(i.fishId),i.haveSnow=!1,i}return a(t,e),t.prototype._onPreDestroy=function(){this.dragonBone&&cc.isValid(this.dragonBone)&&(this.dragonBone.removeFromParent(),f.default.put(this.dragonBone),this.dragonBone=null),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.update=function(t){if(e.prototype.update.call(this,t),this.nodeRes.scaleX,this.context.bIgnoreScaleX||this.nodeRes&&(this.nodeRes.scaleX=this.currDirRot>=180?1:-1),this.labelDebug&&(this.labelDebug.string=ul.format("%d st:%d, running:%s",this.fishId,this.getState(),this.bRunning),this.labelDebug.node.angle=-this.angle),this.labelName){var i=d.default.calcPointOnArc(0,0,50,90-this.angle),n=i[0],o=i[1];this.labelName.node.angle=-this.angle,this.labelName.node.x=n,this.labelName.node.y=o}},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeRes=this.context.fCreateFishNode(this.fishId),this.nodeRes.parent=this.nodeResource,this.registerState(l.init,"onEnterInit","onExecuteInit","onLeaveInit"),this.registerState(l.standby,"onEnterStandby","onExecuteStandby","onLeaveStandby"),this.registerState(l.run,"onEnterRun","onExecuteRun","onLeaveRun"),this.setNextState(l.init)},t.prototype.getHitCheckNode=function(){return this.hitCheckNode},t.prototype.bHaveSnow=function(){return this.haveSnow},t.prototype.onEnterInit=function(){this.setNextState(l.standby)},t.prototype.getWorldAABBPoints=function(){var e=this.nodeRes.width,t=this.nodeRes.height,i=0-e/2,n=0-t/2;return[this.convertToWorldSpaceAR(cc.v2(i,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n+t)),this.convertToWorldSpaceAR(cc.v2(i,n+t))]},t.prototype.onExecuteInit=function(){},t.prototype.onLeaveInit=function(){},t.prototype.onEnterStandby=function(){this.nodeResource.angle=0},t.prototype.onExecuteStandby=function(){this.bRunning&&this.setNextState(l.run)},t.prototype.onLeaveStandby=function(){},t.prototype.onEnterRun=function(){this.currDirRot=d.default.random(360),this.nextChangeRotTime=d.default.time()+d.default.random(3,10)},t.prototype.onExecuteRun=function(e){if(this.moveFunc&&!p.default.bFishStopRun){if(this.moveFunc(this,this.currDirRot,this.fishTemplate.autoMoveSpeed||this.AUTO_RUN_MOVE_FPS,e),this.nodeResource.angle=-(this.currDirRot-180),!this.context.bDisableDisCheckWithPlayer&&this.context.fIsGameRunning&&!this.context.fIsGameRunning()){var t=this.context.playerPos,i=t.x-this.x,n=t.y-this.y;if(Math.sqrt(Math.abs(i*i+n*n))<250){var o=d.default.getAngle(i,n);o=o||0,this.currDirRot=o<0?360+o:o,this.nextChangeRotTime=d.default.time()+5,this.bChangingDisWithPlayer=!0}}d.default.time()>this.nextChangeRotTime&&(this.bChangingDisWithPlayer=!1,this.currDirRot+=d.default.random(100),this.currDirRot=this.currDirRot%360,this.nextChangeRotTime=d.default.time()+d.default.random(3,10))}},t.prototype.onLeaveRun=function(){},t.prototype.setMoveFunc=function(e){this.moveFunc=e},t.prototype.setContextField=function(e,t){this.context[e]=t},t.prototype.getFishId=function(){return this.context.fishId||1},t.prototype.getRidus=function(){return(this.fishTemplate.radius||10)*(this.fishTemplate.scale||1)},t.prototype.starAutoMove=function(){this.bRunning=!0,this.getState()!=l.standby||this.bRunning||this.setNextState(l.run)},t.prototype.stopAutoMove=function(){this.bRunning=!1,this.clearPendant(),this.getState()==l.run&&this.setNextState(l.standby)},t.prototype.createSnow=function(){this.haveSnow=!0,this.nodeSnow&&this.nodeSnow.destroy();var e=new cc.Node;e.parent=this,e.zIndex=300,e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2,1.2),cc.scaleTo(.5,1))));var t=new cc.Node;t.parent=e,t.setContentSize(this.fishTemplate.rectW*this.fishTemplate.scale,this.fishTemplate.rectH*this.fishTemplate.scale),t.addComponent(cc.Sprite).loadSpriteFrameAndKeepSize("2d/ui/common/snow_icon"),this.nodeSnow=e},t.prototype.clearPendant=function(){this.haveSnow=!1,this.nodeSnow&&this.nodeSnow.destroy()},s([u.default.requireResourceLoaded],t.prototype,"starAutoMove",null),s([u.default.requireResourceLoaded],t.prototype,"stopAutoMove",null),s([u.default.requireResourceLoaded],t.prototype,"createSnow",null),t}(c.default);r.default=g,cc._RF.pop()},{}],FishString2048:[function(e,t,i){"use strict";cc._RF.push(t,"fc4b7HBEm9Jg4wpTZ3XfbF7","FishString2048");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("Tools"),c=o("FSMViewBase"),u=o("ViewBase"),h=o("mgrGame");(function(e){e[e.init=1]="init",e[e.standby=2]="standby",e[e.run=3]="run"})(l||(l={}));var p=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.AUTO_RUN_MOVE_FPS=80,i.currDirRot=0,i.nextChangeRotTime=0,i.fishId=i.context.fishId||1,i.opFlag=i.context.opFlag||0,i.bPlayer=i.context.bPlayer||!1,i.playerFishIndexWhenAdd=i.context.playerFishIndexWhenAdd,i}return a(t,e),t.prototype.update=function(t){if(e.prototype.update.call(this,t),this.context.bIgnoreScaleX||this.nodeRes&&(this.nodeRes.scaleX=this.currDirRot>=180?1:-1),this.labelDebug&&(this.labelDebug.string=ul.format("%d st:%d, running:%s",this.fishId,this.getState(),this.bRunning),this.labelDebug.node.angle=-this.angle),this.labelName){var i=d.default.calcPointOnArc(0,0,50,90-this.angle),n=i[0],o=i[1];this.labelName.node.angle=-this.angle,this.labelName.node.x=n,this.labelName.node.y=o}},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeRes=this.context.fCreateFishNode(this.fishId),this.nodeRes.parent=this.nodeResource,this.setFishId(this.fishId,this.opFlag),this.registerState(l.init,"onEnterInit","onExecuteInit","onLeaveInit"),this.registerState(l.standby,"onEnterStandby","onExecuteStandby","onLeaveStandby"),this.registerState(l.run,"onEnterRun","onExecuteRun","onLeaveRun"),this.setNextState(l.init)},t.prototype.getHitCheckNode=function(){return this.hitCheckNode},t.prototype.onEnterInit=function(){this.setNextState(l.standby)},t.prototype.getWorldAABBPoints=function(){var e=this.nodeRes.width,t=this.nodeRes.height,i=0-e/2,n=0-t/2;return[this.convertToWorldSpaceAR(cc.v2(i,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n+t)),this.convertToWorldSpaceAR(cc.v2(i,n+t))]},t.prototype.onExecuteInit=function(){},t.prototype.onLeaveInit=function(){},t.prototype.onEnterStandby=function(){this.nodeResource.angle=0},t.prototype.onExecuteStandby=function(){this.bRunning&&this.setNextState(l.run)},t.prototype.onLeaveStandby=function(){},t.prototype.onEnterRun=function(){this.currDirRot=d.default.random(360),this.nextChangeRotTime=d.default.time()+d.default.random(3,10)},t.prototype.onExecuteRun=function(e){if(this.moveFunc&&!h.default.bFishStopRun){if(this.moveFunc(this,this.currDirRot,this.AUTO_RUN_MOVE_FPS,e),this.context.bHouse||this.context.bQiQiang||this.context.bQiQiangLuomu||(this.nodeResource.angle=-(this.currDirRot-180)),!this.context.bDisableDisCheckWithPlayer&&this.context.fIsGameRunning&&!this.context.fIsGameRunning()){var t=this.context.playerPos,i=t.x-this.x,n=t.y-this.y;if(Math.sqrt(Math.abs(i*i+n*n))<250){var o=d.default.getAngle(i,n);o=o||0,this.currDirRot=o<0?360+o:o,this.nextChangeRotTime=d.default.time()+5,this.bChangingDisWithPlayer=!0}}d.default.time()>this.nextChangeRotTime&&(this.bChangingDisWithPlayer=!1,this.currDirRot+=d.default.random(100),this.currDirRot=this.currDirRot%360,this.nextChangeRotTime=d.default.time()+d.default.random(3,10))}},t.prototype.onLeaveRun=function(){},t.prototype.setMoveFunc=function(e){this.moveFunc=e},t.prototype.setContextField=function(e,t){this.context[e]=t},t.prototype.setFishColor=function(e){if(null!=this.nodeRes){var t=this.nodeRes.getComponentInChildren(cc.Label);t.node.color!=e&&(t.node.color=e)}},t.prototype.getFishId=function(){return this.fishId},t.prototype.setFishId=function(e,t){return void 0===t&&(t=0),this.fishId=e,this.opFlag=t,this.nodeRes?(this.context.fAdaptFishText(this.nodeRes,e,t,this.bPlayer),this.context.fAdaptFishScale(this.nodeRes,e,t,this.bPlayer),this.fishId):this.fishId},t.prototype.addFishNumber=function(e){return 0==e?this.fishId:this.setFishId(this.fishId+e)},t.prototype.mulFishNumber=function(e){if(0==e)return this.fishId;var t=Math.floor(this.fishId*e);return this.setFishId(t)},t.prototype.divFishNumber=function(e){if(0==e)return this.fishId;var t=Math.ceil(this.fishId/e);return this.setFishId(t)},t.prototype.starAutoMove=function(){this.bRunning=!0,this.getState()!=l.standby||this.bRunning||this.setNextState(l.run)},t.prototype.stopAutoMove=function(){this.bRunning=!1,this.getState()==l.run&&this.setNextState(l.standby)},s([u.default.requireResourceLoaded],t.prototype,"starAutoMove",null),s([u.default.requireResourceLoaded],t.prototype,"stopAutoMove",null),t}(c.default);r.default=p,cc._RF.pop()},{}],FishString:[function(e,t,i){"use strict";cc._RF.push(t,"db21bZGj+ZKA6VBYdmvGlff","FishString");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("CustomTween"),c=o("Tools"),u=o("FSMViewBase"),h=o("ViewBase"),p=o("mgrCfg"),f=o("mgrGame"),g=o("mgrPool");(function(e){e[e.init=1]="init",e[e.standby=2]="standby",e[e.run=3]="run"})(l||(l={}));var v=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.AUTO_RUN_MOVE_FPS=80,i.currDirRot=0,i.nextChangeRotTime=0,i.fishId=i.context.fishId||1,i.fishTemplate=p.default.get_from_fish_db(i.fishId),i.haveSnow=!1,i}return a(t,e),t.prototype._onPreDestroy=function(){this.dragonBone&&cc.isValid(this.dragonBone)&&(this.dragonBone.removeFromParent(),g.default.put(this.dragonBone),this.dragonBone=null),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.update=function(t){if(e.prototype.update.call(this,t),this.nodeRes.scaleX,this.context.bIgnoreScaleX||this.nodeRes&&(this.nodeRes.scaleX=this.currDirRot>=180?1:-1),this.labelDebug&&(this.labelDebug.string=ul.format("%d st:%d, running:%s",this.fishId,this.getState(),this.bRunning),this.labelDebug.node.angle=-this.angle),this.labelName){var i=c.default.calcPointOnArc(0,0,50,90-this.angle),n=i[0],o=i[1];this.labelName.node.angle=-this.angle,this.labelName.node.x=n,this.labelName.node.y=o}},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeRes=this.context.fCreateFishNode(this.fishId),this.nodeRes.parent=this.nodeResource,(this.context.bQiQiang||this.context.bQiQiangLuomu)&&d.default.roke(this.nodeRes),this.registerState(l.init,"onEnterInit","onExecuteInit","onLeaveInit"),this.registerState(l.standby,"onEnterStandby","onExecuteStandby","onLeaveStandby"),this.registerState(l.run,"onEnterRun","onExecuteRun","onLeaveRun"),this.setNextState(l.init)},t.prototype.getHitCheckNode=function(){return this.hitCheckNode},t.prototype.bHaveSnow=function(){return this.haveSnow},t.prototype.onEnterInit=function(){this.setNextState(l.standby)},t.prototype.getWorldAABBPoints=function(){var e=this.nodeRes.width,t=this.nodeRes.height,i=0-e/2,n=0-t/2;return[this.convertToWorldSpaceAR(cc.v2(i,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n+t)),this.convertToWorldSpaceAR(cc.v2(i,n+t))]},t.prototype.onExecuteInit=function(){},t.prototype.onLeaveInit=function(){},t.prototype.onEnterStandby=function(){this.nodeResource.angle=0},t.prototype.onExecuteStandby=function(){this.bRunning&&this.setNextState(l.run)},t.prototype.onLeaveStandby=function(){},t.prototype.onEnterRun=function(){this.currDirRot=c.default.random(360),this.nextChangeRotTime=c.default.time()+c.default.random(3,10)},t.prototype.onExecuteRun=function(e){if(this.moveFunc&&!f.default.bFishStopRun){if(this.moveFunc(this,this.currDirRot,this.fishTemplate.autoMoveSpeed||this.AUTO_RUN_MOVE_FPS,e),this.context.bHouse||this.context.bQiQiang||this.context.bQiQiangLuomu||(this.nodeResource.angle=-(this.currDirRot-180)),!this.context.bDisableDisCheckWithPlayer&&this.context.fIsGameRunning&&!this.context.fIsGameRunning()){var t=this.context.playerPos,i=t.x-this.x,n=t.y-this.y;if(Math.sqrt(Math.abs(i*i+n*n))<250){var o=c.default.getAngle(i,n);o=o||0,this.currDirRot=o<0?360+o:o,this.nextChangeRotTime=c.default.time()+5,this.bChangingDisWithPlayer=!0}}c.default.time()>this.nextChangeRotTime&&(this.bChangingDisWithPlayer=!1,this.currDirRot+=c.default.random(100),this.currDirRot=this.currDirRot%360,this.nextChangeRotTime=c.default.time()+c.default.random(3,10))}},t.prototype.onLeaveRun=function(){},t.prototype.setMoveFunc=function(e){this.moveFunc=e},t.prototype.setContextField=function(e,t){this.context[e]=t},t.prototype.getFishId=function(){return this.context.fishId||1},t.prototype.getRidus=function(){return(this.fishTemplate.radius||10)*(this.fishTemplate.scale||1)},t.prototype.starAutoMove=function(){this.bRunning=!0,this.getState()!=l.standby||this.bRunning||this.setNextState(l.run)},t.prototype.stopAutoMove=function(){this.bRunning=!1,this.clearPendant(),this.getState()==l.run&&this.setNextState(l.standby)},t.prototype.createSnow=function(){this.haveSnow=!0,this.nodeSnow&&this.nodeSnow.destroy();var e=new cc.Node;e.parent=this,e.zIndex=300,e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2,1.2),cc.scaleTo(.5,1))));var t=new cc.Node;t.parent=e,t.setContentSize(this.fishTemplate.rectW*this.fishTemplate.scale,this.fishTemplate.rectH*this.fishTemplate.scale),t.addComponent(cc.Sprite).loadSpriteFrameAndKeepSize("2d/ui/common/snow_icon"),this.nodeSnow=e},t.prototype.clearPendant=function(){this.haveSnow=!1,this.nodeSnow&&this.nodeSnow.destroy()},s([h.default.requireResourceLoaded],t.prototype,"starAutoMove",null),s([h.default.requireResourceLoaded],t.prototype,"stopAutoMove",null),s([h.default.requireResourceLoaded],t.prototype,"createSnow",null),t}(u.default);r.default=v,cc._RF.pop()},{}],FishXiuxian:[function(e,t,i){"use strict";cc._RF.push(t,"0439fvZJdJMaJFGTbh/tyzn","FishXiuxian");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("Tools"),c=o("FSMViewBase"),u=o("ViewBase"),h=o("mgrCfg"),p=o("mgrGame"),f=o("mgrPool"),g=o("mgrSound"),v=o("vWeapon");(function(e){e[e.init=1]="init",e[e.standby=2]="standby",e[e.run=3]="run"})(l||(l={}));var _=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.AUTO_RUN_MOVE_FPS=80,i.currDirRot=0,i.nextChangeRotTime=0,i.roleFightPower=0,i.weaponFightPower=0,i.weaponId=0,i.totalFightPower=0,i.bPlayer=!1,i.type=0,i.weaponWidth=0,i.fishId=i.context.fishId||1,i.fishTemplate=h.default.get_from_fish_xiuxian_db(i.fishId),i.haveSnow=!1,i}return a(t,e),t.prototype._getPreloadRess=function(){return[{path:"2d/anim_node/009_weapon_skill_eff1/009_weapon_skill_eff1",assetType:cc.Prefab},{path:"2d/anim_node/009_weapon_skill_eff2/009_weapon_skill_eff2",assetType:cc.Prefab},{path:"2d/anim_node/009_weapon_skill_eff3/009_weapon_skill_eff3",assetType:cc.Prefab},{path:"2d/anim_node/009_weapon_skill_eff4/009_weapon_skill_eff4",assetType:cc.Prefab},{path:"2d/anim_node/009_weapon_skill_eff5/009_weapon_skill_eff5",assetType:cc.Prefab}]},t.prototype._onPreDestroy=function(){this.dragonBone&&cc.isValid(this.dragonBone)&&(this.dragonBone.removeFromParent(),f.default.put(this.dragonBone),this.dragonBone=null),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.nodeRes.scaleX,this.context.bIgnoreScaleX||this.nodeRes&&(this.nodeRes.scaleX=this.currDirRot>=180?1:-1),this.labelDebug&&(this.labelDebug.string=ul.format("%d st:%d, running:%s",this.fishId,this.getState(),this.bRunning),this.labelDebug.node.angle=-this.angle)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeRes=this.context.fCreateFishNode(this.fishId),this.nodeRes.parent=this.nodeResource,this.bPlayer=this.context.bPlayer,this.type=this.context.type;var t=h.default.get_from_fish_xiuxian_db(this.context.fishId);this.nodeRes.getChildByName("string"+this.fishId).getComponent(cc.Sprite).loadSpriteFrame(t["mode"+this.type+"Icon"]);var i=this.nodeRes.getChildByName("spriteName");if(i&&i.getComponent(cc.Sprite).loadSpriteFrame(t.nameIcon),this.roleFightPower=t.needFightPower,this.context.bPlayer){this.changeCircleBeansType(),this.nodeRes.getChildByName("labelPower").active=!0,this.refreshFightPower();var n=f.default.get("animNode","009_flash01");n.parent=this.nodeRes,n.scale=this.getStringScale()>1?2*this.getStringScale():1,n.play()}this.weaponWidth=Math.floor(this.nodeRes.getChildByName("nodeWeapons").getChildByName("weapon01").y),this.registerState(l.init,"onEnterInit","onExecuteInit","onLeaveInit"),this.registerState(l.standby,"onEnterStandby","onExecuteStandby","onLeaveStandby"),this.registerState(l.run,"onEnterRun","onExecuteRun","onLeaveRun"),this.setNextState(l.init),this.registerListeners({WEAPON_SKILL_EFF_CLOSE:this.onMsgWeaponSkillEffClose})},t.prototype.getHitCheckNode=function(){return this.hitCheckNode},t.prototype.bHaveSnow=function(){return this.haveSnow},t.prototype.onEnterInit=function(){this.setNextState(l.standby)},t.prototype.getWorldAABBPoints=function(){var e=this.nodeRes.width,t=this.nodeRes.height,i=0-e/2,n=0-t/2;return[this.convertToWorldSpaceAR(cc.v2(i,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n+t)),this.convertToWorldSpaceAR(cc.v2(i,n+t))]},t.prototype.getWorldAABBPointsContainWeapon=function(){var e=this.nodeRes.width+this.weaponWidth,t=this.nodeRes.height+this.weaponWidth,i=0-e/2,n=0-t/2;return[this.convertToWorldSpaceAR(cc.v2(i,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n+t)),this.convertToWorldSpaceAR(cc.v2(i,n+t))]},t.prototype.onExecuteInit=function(){},t.prototype.onLeaveInit=function(){},t.prototype.onEnterStandby=function(){this.nodeResource.angle=0},t.prototype.onExecuteStandby=function(){this.bRunning&&this.setNextState(l.run)},t.prototype.onLeaveStandby=function(){},t.prototype.onEnterRun=function(){this.currDirRot=d.default.random(360),this.nextChangeRotTime=d.default.time()+d.default.random(3,10)},t.prototype.onExecuteRun=function(e){if(this.moveFunc&&!p.default.bFishStopRun){if(this.moveFunc(this,this.currDirRot,this.fishTemplate.autoMoveSpeed||this.AUTO_RUN_MOVE_FPS,e),!this.context.bDisableDisCheckWithPlayer&&this.context.fIsGameRunning&&!this.context.fIsGameRunning()){var t=this.context.playerPos,i=t.x-this.x,n=t.y-this.y;if(Math.sqrt(Math.abs(i*i+n*n))<250){var o=d.default.getAngle(i,n);o=o||0,this.currDirRot=o<0?360+o:o,this.nextChangeRotTime=d.default.time()+5,this.bChangingDisWithPlayer=!0}}d.default.time()>this.nextChangeRotTime&&(this.bChangingDisWithPlayer=!1,this.currDirRot+=d.default.random(100),this.currDirRot=this.currDirRot%360,this.nextChangeRotTime=d.default.time()+d.default.random(3,10))}},t.prototype.onLeaveRun=function(){},t.prototype.setMoveFunc=function(e){this.moveFunc=e},t.prototype.setContextField=function(e,t){this.context[e]=t},t.prototype.getFishId=function(){return this.context.fishId||1},t.prototype.getRidus=function(){return(this.fishTemplate.radius||10)*(this.fishTemplate.scale||1)},t.prototype.starAutoMove=function(){this.bRunning=!0,this.getState()!=l.standby||this.bRunning||this.setNextState(l.run)},t.prototype.stopAutoMove=function(){this.bRunning=!1,this.clearPendant(),this.getState()==l.run&&this.setNextState(l.standby)},t.prototype.createSnow=function(){this.haveSnow=!0,this.nodeSnow&&this.nodeSnow.destroy();var e=new cc.Node;e.parent=this,e.zIndex=300,e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2,1.2),cc.scaleTo(.5,1))));var t=new cc.Node;t.parent=e,t.setContentSize(this.fishTemplate.rectW*this.fishTemplate.scale,this.fishTemplate.rectH*this.fishTemplate.scale),t.addComponent(cc.Sprite).loadSpriteFrameAndKeepSize("2d/ui/common/snow_icon"),this.nodeSnow=e},t.prototype.clearPendant=function(){this.haveSnow=!1,this.nodeSnow&&this.nodeSnow.destroy()},t.prototype.getTotalFightPower=function(){return this.roleFightPower+this.weaponFightPower},t.prototype.setRoleFightPower=function(e){this.roleFightPower=e,this.refreshFightPower()},t.prototype.addRoleFightPower=function(e){e<=0||(this.roleFightPower+=e,this.refreshFightPower())},t.prototype.getRoleFightPower=function(){return this.roleFightPower},t.prototype.addWeaponFightPower=function(e){this.weaponFightPower+=e,this.refreshFightPower()},t.prototype.setWeaponFightPower=function(e){this.weaponFightPower=e,this.refreshFightPower()},t.prototype.getWeaponFightPower=function(){return this.weaponFightPower},t.prototype.setWeaponId=function(e){this.weaponId=e},t.prototype.getWeaponId=function(){return this.weaponId},t.prototype.changeWeapon=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),e){this.weaponId=e;var n=h.default.get_from_xiuxian_weapon_db(e);if(i||this.addWeaponFightPower(n.fightPower),this.refreshFightPower(),this.context.bPlayer){var o=this.nodeRes.getChildByName("nodeWeapons"),r=h.default.get_from_xiuxian_weapon_effect_db(n.weaponEffect);if(o){if(o.active=!0,cc.Tween.stopAllByTarget(this.nodeRes.getChildByName("weaponFazhenBg")),n.bSpecialShow){this.nodeRes.getChildByName("weaponFazhenBg").active=!0;var a=cc.tween(this.nodeRes.getChildByName("weaponFazhenBg"));a.by(2,{angle:-360}),a.repeatForever(),a.start()}else this.nodeRes.getChildByName("weaponFazhenBg").active=!1;for(var s=0;s<3;s++){var l=o.getChildByName("weapon0"+(s+1));l.destroyAllChildren();var d=new v.default({weaponId:e,specialIconIndex:s+1});d.parent=l,n.bVerticle&&(d.rotation=90),f.default.get("particle","85_star_trail_01").parent=d,this.nodeRes.getChildByName("weaponEff").childrenCount>0&&this.nodeRes.getChildByName("weaponEff").destroyAllChildren();var c=f.default.get("animNode",r.skill_eff_id);c.scale=this.context.weaponSkillScale,c.parent=this.nodeRes.getChildByName("weaponEff"),this.nodeRes.getChildByName("weaponEff").active=!0,c.play()}t||g.default.play(105),cc.Tween.stopAllByTarget(o);var u=cc.tween(o);u.by(2,{angle:-360}),u.repeatForever(),u.start()}var p=f.default.get("animNode","41_jiesuan_glow_loop");p.scale=this.nodeRes.getChildByName("string"+this.fishId).scale,p.parent=this.nodeRes}}},t.prototype.refreshFightPower=function(){this.nodeRes.getChildByName("labelPower").getComponent(cc.Label).string=d.default.formatNumToStrWanYi(this.roleFightPower+this.weaponFightPower)},t.prototype.changeCircleBeansType=function(){},t.prototype.getStringScale=function(){return this.nodeRes.getChildByName("string"+this.fishId).scale},t.prototype.onMsgWeaponSkillEffClose=function(){this.nodeRes.getChildByName("weaponEff").childrenCount>0&&(this.nodeRes.getChildByName("weaponEff").destroyAllChildren(),this.nodeRes.getChildByName("weaponEff").active=!1)},s([u.default.requireResourceLoaded],t.prototype,"starAutoMove",null),s([u.default.requireResourceLoaded],t.prototype,"stopAutoMove",null),s([u.default.requireResourceLoaded],t.prototype,"createSnow",null),t}(c.default);r.default=_,cc._RF.pop()},{}],Fish:[function(e,t,i){"use strict";cc._RF.push(t,"6770ezntqJEPosZSH14omhm","Fish");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("Timer"),c=o("Tools"),u=o("FSMViewBase"),h=o("ViewBase"),p=o("mgrCfg"),f=o("mgrFishSkin"),g=o("mgrGame"),v=o("mgrPool");(function(e){e[e.init=1]="init",e[e.standby=2]="standby",e[e.run=3]="run"})(l||(l={}));var _=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.AUTO_RUN_MOVE_FPS=80,i.currDirRot=0,i.nextChangeRotTime=0,i.bIron=!1,i.fishId=i.context.fishId||1,i.fishTemplate=p.default.get_from_fish_db(i.fishId),i.haveLongzhu=!1,i.haveSnow=!1,i.bIron=i.context.bIron,i}return a(t,e),t.prototype._onPreDestroy=function(){this.dragonBone&&cc.isValid(this.dragonBone)&&(this.dragonBone.removeFromParent(),v.default.put(this.dragonBone),this.dragonBone=null),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.update=function(t){if(e.prototype.update.call(this,t),this.labelDebug&&(this.labelDebug.string=ul.format("%d st:%d, running:%s",this.fishId,this.getState(),this.bRunning),this.labelDebug.node.angle=-this.angle),this.labelName){var i=c.default.calcPointOnArc(0,0,50,90-this.angle),n=i[0],o=i[1];this.labelName.node.angle=-this.angle,this.labelName.node.x=n,this.labelName.node.y=o}},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerState(l.init,"onEnterInit","onExecuteInit","onLeaveInit"),this.registerState(l.standby,"onEnterStandby","onExecuteStandby","onLeaveStandby"),this.registerState(l.run,"onEnterRun","onExecuteRun","onLeaveRun"),this.setNextState(l.init)},t.prototype.getHitCheckNode=function(){return this.hitCheckNode},t.prototype.bHaveLongZhu=function(){return this.haveLongzhu},t.prototype.bHaveSnow=function(){return this.haveSnow},t.prototype.onEnterInit=function(){var e=this;if(!this.bIron||this.bIron&&10==this.fishId){var t=new cc.Node("ani_container");t.scale=0,t.angle=180,t.setAnchorPoint(new cc.Vec2(.5,.5)),this.nodeResource.addChild(t),t.setPosition((this.fishTemplate.offsetX||0)*(this.fishTemplate.scale||1),-(this.fishTemplate.offsetY||0)*(this.fishTemplate.scale||1));var i=this.fishTemplate.spineId;this.bIron&&10==this.fishId&&(i="zhishengji",t.setPosition(0,400*(this.fishTemplate.scale||1))),1==this.fishId&&this.context.bPlayer&&(i=f.default.getPlayerInitFishSpineId());var n=v.default.get("spine",i,function(){d.default.callLater(.01,function(){t.scale=e.fishTemplate.scale||1},e)});n.play("mov_1"),t.addChild(n),this.hitCheckNode=t,this.dragonBone=n}if(this.context.rankName){console.log("createRankName",this.context.rankName);var o=new cc.Node;o.parent=this,o.setAnchorPoint(.5,.5),o.position=cc.v2(0,50),o.zIndex=300,o.color=cc.color(44,80,214,255);var r,a=o.addComponent(cc.Label);a.fontSize=16,a.string=this.context.rankName,a.verticalAlign=cc.Label.VerticalAlign.CENTER,a.horizontalAlign=cc.Label.HorizontalAlign.CENTER,(r=a.addComponent(cc.LabelOutline)).color=cc.color(255,255,255,255),r.width=1,this.labelName=a}if(this.bIron&&10!=this.fishId){var s=new cc.Node;s.parent=this;var c=s.addComponent(cc.Sprite);c.loadSpriteFrame(this.fishTemplate.ironIcon);var u=this.fishTemplate.rectH/c.node.height;s.scale=u*this.fishTemplate.scale,s.setPosition(s.x,-u*this.fishTemplate.scale*this.fishTemplate.ironRectY)}this.setNextState(l.standby)},t.prototype.getWorldAABBPoints=function(){var e=this.fishTemplate.rectX*this.fishTemplate.scale,t=-this.fishTemplate.rectY*this.fishTemplate.scale,i=this.fishTemplate.rectW*this.fishTemplate.scale,n=this.fishTemplate.rectH*this.fishTemplate.scale;this.bIron&&10==this.fishId&&(n=2e3*this.fishTemplate.scale);var o=e-i/2,r=t-n/2;return[this.convertToWorldSpaceAR(cc.v2(o,r)),this.convertToWorldSpaceAR(cc.v2(o+i,r)),this.convertToWorldSpaceAR(cc.v2(o+i,r+n)),this.convertToWorldSpaceAR(cc.v2(o,r+n))]},t.prototype.onExecuteInit=function(){},t.prototype.onLeaveInit=function(){},t.prototype.onEnterStandby=function(){this.nodeResource.angle=0},t.prototype.onExecuteStandby=function(){this.bRunning&&this.setNextState(l.run)},t.prototype.onLeaveStandby=function(){},t.prototype.onEnterRun=function(){this.currDirRot=c.default.random(360),this.nextChangeRotTime=c.default.time()+c.default.random(3,10)},t.prototype.onExecuteRun=function(e){if(this.moveFunc&&!g.default.bFishStopRun){if(this.moveFunc(this,this.currDirRot,this.fishTemplate.autoMoveSpeed||this.AUTO_RUN_MOVE_FPS,e),this.nodeResource.angle=-(this.currDirRot-180),!this.context.bDisableDisCheckWithPlayer&&this.context.fIsGameRunning&&!this.context.fIsGameRunning()){var t=this.context.playerPos,i=t.x-this.x,n=t.y-this.y;if(Math.sqrt(Math.abs(i*i+n*n))<250){var o=c.default.getAngle(i,n);o=o||0,this.currDirRot=o<0?360+o:o,this.nextChangeRotTime=c.default.time()+5,this.bChangingDisWithPlayer=!0}}c.default.time()>this.nextChangeRotTime&&(this.bChangingDisWithPlayer=!1,this.currDirRot+=c.default.random(100),this.currDirRot=this.currDirRot%360,this.nextChangeRotTime=c.default.time()+c.default.random(3,10))}},t.prototype.onLeaveRun=function(){},t.prototype.setMoveFunc=function(e){this.moveFunc=e},t.prototype.setContextField=function(e,t){this.context[e]=t},t.prototype.getFishId=function(){return this.context.fishId||1},t.prototype.getRidus=function(){return(this.fishTemplate.radius||10)*(this.fishTemplate.scale||1)},t.prototype.starAutoMove=function(){this.bRunning=!0,this.getState()!=l.standby||this.bRunning||this.setNextState(l.run)},t.prototype.stopAutoMove=function(){this.bRunning=!1,this.clearPendant(),this.getState()==l.run&&this.setNextState(l.standby)},t.prototype.createLongZhu=function(){this.haveLongzhu=!0,this.nodeLongzhu&&this.nodeLongzhu.destroy();var e=new cc.Node;e.parent=this,e.zIndex=300,e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2,1.2),cc.scaleTo(.5,1))));var t=new cc.Node;t.parent=e,t.setContentSize(this.fishTemplate.rectW*this.fishTemplate.scale*.75,this.fishTemplate.rectH*this.fishTemplate.scale*.75),t.addComponent(cc.Sprite).loadSpriteFrameAndKeepSize("2d/ui/hub/longzhu/art1"),this.nodeLongzhu=e},t.prototype.createSnow=function(){this.haveSnow=!0,this.nodeSnow&&this.nodeSnow.destroy();var e=new cc.Node;e.parent=this,e.zIndex=300,e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2,1.2),cc.scaleTo(.5,1))));var t=new cc.Node;t.parent=e,t.setContentSize(this.fishTemplate.rectW*this.fishTemplate.scale,this.fishTemplate.rectH*this.fishTemplate.scale),t.addComponent(cc.Sprite).loadSpriteFrameAndKeepSize("2d/ui/common/snow_icon"),this.nodeSnow=e},t.prototype.clearPendant=function(){this.haveLongzhu=!1,this.haveSnow=!1,this.nodeLongzhu&&this.nodeLongzhu.destroy(),this.nodeSnow&&this.nodeSnow.destroy()},s([h.default.requireResourceLoaded],t.prototype,"starAutoMove",null),s([h.default.requireResourceLoaded],t.prototype,"stopAutoMove",null),s([h.default.requireResourceLoaded],t.prototype,"createLongZhu",null),s([h.default.requireResourceLoaded],t.prototype,"createSnow",null),t}(u.default);r.default=_,cc._RF.pop()},{}],GameBodyMsgBottom:[function(e,t,i){"use strict";cc._RF.push(t,"da79aYaTVNNboQCLF7+nrA4","GameBodyMsgBottom");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("mgrGame"),d=o("ComponentBase"),c=cc._decorator,u=c.ccclass,h=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.msgId=l.GameMsgIds.end,t.count=-1,t._curCount=0,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onBeginContact=function(e,t,i){l.default.isTargetHero(i)&&l.default.isAtBottom(t.node,i.node)&&(-1!=this.count&&this._curCount>=this.count||(this._curCount++,this.sendMsg(l.GameMsgStrs[this.msgId],{selfCollider:t})))},s([h({type:l.GameMsgIds,tooltip:"\u5f00\u59cb\u63a5\u89e6\u65f6\u53d1\u9001\u4e00\u4e2a\u6d88\u606f"})],t.prototype,"msgId",void 0),s([h({type:cc.Integer,tooltip:"\u53d1\u9001\u6b21\u6570 -1\u8868\u793a\u65e0\u9650"})],t.prototype,"count",void 0),s([u],t)}(d.default);r.default=p,cc._RF.pop()},{}],GameBodyMsg:[function(e,t,i){"use strict";cc._RF.push(t,"2311bbLe6NH5pWmOFM/3P2e","GameBodyMsg");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("mgrGame"),d=o("ComponentBase"),c=cc._decorator,u=c.ccclass,h=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.msgId=l.GameMsgIds.end,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onBeginContact=function(e,t,i){l.default.isTargetHero(i)&&this.sendMsg(l.GameMsgStrs[this.msgId],{selfCollider:t})},s([h({type:l.GameMsgIds,tooltip:"\u5f00\u59cb\u63a5\u89e6\u65f6\u53d1\u9001\u4e00\u4e2a\u6d88\u606f"})],t.prototype,"msgId",void 0),s([u],t)}(d.default);r.default=p,cc._RF.pop()},{}],GameCat:[function(e,t,i){"use strict";cc._RF.push(t,"a7c9e360ABHZahjQlyN4TCW","GameCat");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("mgrSdk"),d=o("ComponentBase"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.node.active=1==l.default.getCopNumberValueByKey("b_show_cat")},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},s([c],t)}(d.default);r.default=u,cc._RF.pop()},{}],GameClickBalloon:[function(e,t,i){"use strict";cc._RF.push(t,"e5e2cLjgSlIWJjl5gIYRPed","GameClickBalloon");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tools"),d=o("mgrSound"),c=o("mgrTip"),u=o("ComponentBase"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bSound=!0,t.soundId=107,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),l.default.registerTouchHandler(this.node,this.onTouch.bind(this))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouch=function(e){if(e.isClick()){this.node.active=!1,this.bSound&&d.default.play(this.soundId);var t=l.default.getNodeWorldPosAR(this.node);c.default.playSpineOnce("ui_qiaomen",t.x,t.y+(.5-this.node.anchorY)*this.node.height,1,null,"qiqiu")}},s([f({tooltip:"\u662f\u5426\u6709\u97f3\u6548"})],t.prototype,"bSound",void 0),s([f({tooltip:"\u662f\u5426\u6709\u97f3\u6548"})],t.prototype,"soundId",void 0),s([p],t)}(u.default);r.default=g,cc._RF.pop()},{}],GameClickTimeCount:[function(e,t,i){"use strict";cc._RF.push(t,"3d3f2fJxiVFF4NDfVXxk6sK","GameClickTimeCount");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tools"),d=o("mgrGame"),c=o("mgrSound"),u=o("mgrTip"),h=o("ComponentBase"),p=cc._decorator,f=p.ccclass,g=p.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.limitTime=1.5,t.limitCount=3,t._curClickCount=0,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),l.default.registerTouchHandler(this.node,this.onTouch.bind(this))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouch=function(e){var t=this;if(e.isClick()){c.default.play(106),this._curClickCount<=0?(this._curClickCount++,cc.tween(this.node).delay(this.limitTime).call(function(){t._curClickCount=0}).start()):this._curClickCount++;var i=e.getLocation(),n=null;switch(this._curClickCount){case 1:n="dong1";break;case 2:n="dong2";break;case 3:n="dong3"}n&&u.default.playSpineOnce("ui_qiaomen",i.x,i.y,1,null,n),this._curClickCount>=this.limitCount&&(cc.Tween.stopAllByTarget(this.node),this._curClickCount=0,this.sendMsg(d.GameMsgStrs[d.GameMsgIds.map1]))}},s([g({type:cc.Float,tooltip:"\u9650\u5b9a\u65f6\u95f4\uff0c\u79d2"})],t.prototype,"limitTime",void 0),s([g({type:cc.Integer,tooltip:"\u9650\u5b9a\u6b21\u6570"})],t.prototype,"limitCount",void 0),s([f],t)}(h.default);r.default=v,cc._RF.pop()},{}],GameDoorActor:[function(e,t,i){"use strict";cc._RF.push(t,"041c8ykdZRO2bizzX0AH/WY","GameDoorActor");var n,o,r=e,a=i,s=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(a,"__esModule",{value:!0});var d=r("mgrGame"),c=r("mgrSound"),u=r("ComponentBase"),h=r("GameHero"),p=((n={})[h.ANI.idle]="idle2",n[h.ANI.jump]="jump",n[h.ANI.jump01]="jump01",n[h.ANI.jump02]="jump02",n[h.ANI.jump03]="jump03",n[h.ANI.walk]="walk",n),f=cc._decorator,g=f.ccclass,v=f.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spineRef=null,t.bDoorFollow=!1,t}return s(t,e),t.prototype.onLoad=function(){var t;e.prototype.onLoad.call(this),this.spineRef.setMix(p[h.ANI.jump02],p[h.ANI.idle],.1),this.spineRef.setMix(p[h.ANI.jump02],p[h.ANI.walk],.1),this.spineRef.setAnimation(0,"idle",!0),this.node.on("ani",this.onAni.bind(this),this),this.node.on("scaleX",this.onScaleX.bind(this),this),this.registerListeners(((t={})[d.GameMsgStrs[d.GameMsgIds.end]]=this.onMsgGameEnd,t))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.doFollowHero=function(){this.bDoorFollow=!0,this.spineRef.setAnimation(0,p[h.ANI.walk],!0)},t.prototype.onAni=function(e){if(this.bDoorFollow)for(var t=0;t<e.length;t++){var i=e[t],n=p[i];0==t?(this.spineRef.defaultAnimation=n,this.spineRef.setAnimation(0,n,!0)):this.spineRef.addAnimation(0,n,!0)}},t.prototype.onScaleX=function(e){this.bDoorFollow&&(this.node.scaleX=e)},t.prototype.onMsgGameEnd=function(){this.spineRef.setAnimation(0,"open",!1),this.bDoorFollow=!1,c.default.play(103)},l([v({type:sp.Skeleton,tooltip:"\u76ee\u6807spine"})],t.prototype,"spineRef",void 0),l([g],t)}(u.default);a.default=_,cc._RF.pop()},{}],GameDoorEnd:[function(e,t,i){"use strict";cc._RF.push(t,"cff62e/pOdD6rb9kQvEDU5p","GameDoorEnd");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("mgrGame"),d=o("mgrSound"),c=o("ComponentBase"),u=cc._decorator,h=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bEnd=!1,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){var e;this.spineRef=this.node.getComponent(sp.Skeleton),this.registerListeners(((e={})[l.GameMsgStrs[l.GameMsgIds.end]]=this.onMsgGameEnd,e))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onMsgGameEnd=function(){this.bEnd||(this.bEnd=!0,this.spineRef.setAnimation(0,"open",!1),d.default.play(103))},s([h],t)}(c.default));r.default=p,cc._RF.pop()},{}],GameDragHorizontal:[function(e,t,i){"use strict";cc._RF.push(t,"d7578eReF1GmqDaddVDjPfq","GameDragHorizontal");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tools"),d=o("ComponentBase"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),l.default.registerTouchHandler(this.node,this.onTouch.bind(this))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouch=function(e){if("moved"==e.name){var t=this.node.getPosition(),i=e.getDelta();this.node.x=t.x+i.x}},s([c],t)}(d.default);r.default=u,cc._RF.pop()},{}],GameDrag:[function(e,t,i){"use strict";cc._RF.push(t,"a4dfePRBMhJyZMG+j7QzAvQ","GameDrag");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tools"),d=o("ComponentBase"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),l.default.registerTouchHandler(this.node,this.onTouch.bind(this))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouch=function(e){if("moved"==e.name){var t=this.node.getPosition(),i=e.getDelta();this.node.setPosition(t.add(i))}},s([c],t)}(d.default);r.default=u,cc._RF.pop()},{}],GameGraphics1:[function(e,t,i){"use strict";cc._RF.push(t,"cda4baDAyhB54md/toWmZx2","GameGraphics1");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ComponentBase"),d=cc._decorator,c=d.ccclass,u=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handle=null,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.start=function(){this.handle.moveTo(-30,-60),this.handle.lineTo(30,-60),this.handle.lineTo(30,0),this.handle.lineTo(0,45),this.handle.lineTo(-30,0),this.handle.lineTo(-30,-60),this.handle.stroke(),this.handle.fill()},s([u({type:cc.Graphics,tooltip:"\u753b\u7b14"})],t.prototype,"handle",void 0),s([c],t)}(l.default);r.default=h,cc._RF.pop()},{}],GameHero:[function(e,t,i){"use strict";cc._RF.push(t,"ea793GQ97VBI4vTbUU7OY89","GameHero");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.ANI=void 0;var l,d=o("Tools"),c=o("Const"),u=o("mgrGame"),h=o("mgrPool"),p=o("mgrSound"),f=o("ComponentBase");(function(e){e[e.static=0]="static",e[e.left=1]="left",e[e.right=2]="right"})(l||(l={})),r.ANI={idle:"idle",jump:"jump",jump01:"jump01",jump02:"jump02",jump03:"jump03",walk:"walk"};var g=cc._decorator,v=g.ccclass,_=g.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.jumpSpeed1=550,t.moveSpeed1=200,t.bJumpOne=!0,t.aniNode=null,t._jumpCount=0,t.leftLimit=-1,t.rightLimit=-1,t.bottomLimit=-60,t._horizontalState=l.static,t._bDead=!1,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._body=this.node.getComponent(cc.RigidBody),this.node.destroyAllChildren();var t=h.default.get("spine","chayedan");t.parent=this.node,t.group=c.NodeGroup.actor,this._spine=t,this._spine.x=-2,this._spine.play(r.ANI.idle),this.aniNode&&this.aniNode.emit("ani",[r.ANI.idle],!0),this._spine.trySetMix(r.ANI.jump02,r.ANI.idle,.1),this._spine.trySetMix(r.ANI.jump02,r.ANI.walk,.1)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.update=function(e){switch(e=1/cc.game.getFrameRate(),this._horizontalState){case l.left:this.node.x-=e*this.moveSpeed1;break;case l.right:this.node.x+=e*this.moveSpeed1}var t=d.default.getNodeWorldPosAR(this.node);-1!=this.leftLimit&&t.x<this.leftLimit&&this.sendDeadMsg(),-1!=this.rightLimit&&t.x>this.rightLimit&&this.sendDeadMsg(),-1!=this.bottomLimit&&t.y<this.bottomLimit&&this.sendDeadMsg()},t.prototype.sendDeadMsg=function(){this._bDead||(this._bDead=!0,this.sendMsg(u.GameMsgStrs[u.GameMsgIds.dead]))},t.prototype.setHorizontalZero=function(){var e=this._body.linearVelocity;e.x=0,this._body.linearVelocity=e},t.prototype.tryToPlayWalk=function(){0==this._jumpCount&&this._spine.getCurAnimation()!=r.ANI.walk&&(this._spine.play(r.ANI.walk),this.aniNode&&this.aniNode.emit("ani",[r.ANI.walk],!0))},t.prototype.tryToPlayIdle=function(){0==this._jumpCount&&this._spine.getCurAnimation()!=r.ANI.idle&&(this._spine.play(r.ANI.idle),this.aniNode&&this.aniNode.emit("ani",[r.ANI.idle],!0))},t.prototype.leftBegin=function(){this._spine.scaleX=-1,this.aniNode&&this.aniNode.emit("scaleX",-1),this._spine.x=2,this._horizontalState=l.left,this.setHorizontalZero(),this.tryToPlayWalk()},t.prototype.leftEnd=function(){this._horizontalState==l.left&&(this._horizontalState=l.static,this.tryToPlayIdle())},t.prototype.rightBegin=function(){this._spine.scaleX=1,this.aniNode&&this.aniNode.emit("scaleX",1),this._spine.x=-2,this._horizontalState=l.right,this.setHorizontalZero(),this.tryToPlayWalk()},t.prototype.rightEnd=function(){this._horizontalState==l.right&&(this._horizontalState=l.static,this.tryToPlayIdle())},t.prototype.jump=function(){if(this.bJumpOne&&0==this._jumpCount||!this.bJumpOne){var e=this._body.linearVelocity;e.y=this.jumpSpeed1,this._body.linearVelocity=e,this._jumpCount++,cc.log("\u8df3",this._jumpCount),this._spine.play([r.ANI.jump01,r.ANI.jump02],!0),this.aniNode&&this.aniNode.emit("ani",[r.ANI.jump01,r.ANI.jump02],!0),p.default.play(102)}},t.prototype.onBeginContact=function(e,t,i){this.stantOn(e,t,i)},t.prototype.onPreSolve=function(e,t,i){this.stantOn(e,t,i)},t.prototype.onEndContact=function(e,t,i){i.body.node.group,c.NodeGroup.platform},t.prototype.stantOn=function(e,t,i){i.sensor||t.body.linearVelocity.y<=.001&&this._jumpCount>0&&u.default.isAtBottom(t.node,i.node)&&(cc.log("\u8e29\u5230\u4e1c\u897f\u4e86",i.node.name),this._jumpCount=0,this._horizontalState==l.static?this.tryToPlayIdle():this.tryToPlayWalk())},s([_({tooltip:"\u53ea\u80fd\u8df3\u4e00\u6b21"})],t.prototype,"bJumpOne",void 0),s([_({type:cc.Node,tooltip:"\u8ddf\u968f\u52a8\u4f5c\u8282\u70b9"})],t.prototype,"aniNode",void 0),s([v],t)}(f.default);r.default=y,cc._RF.pop()},{}],GamePassword1:[function(e,t,i){"use strict";cc._RF.push(t,"eb40erRWAxPoKLP2r6AIVVM","GamePassword1");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Const"),d=o("mgrDirector"),c=o("mgrGame"),u=o("mgrSound"),h=o("GamePasswordBase"),p=cc._decorator,f=p.ccclass,g=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.node.getChildByName("spr1").active=!0,this.node.getChildByName("spr2").active=!1},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onBeginContact=function(e,t,i){if(!(this.num>=this.targetNum)&&c.default.isTargetHero(i)&&c.default.isAtBottom(t.node,i.node)){this.num++;var n=t.node,o=n.y+(1-n.anchorY)*n.height,r=n.x+(.5-n.anchorX)*n.width,a=n.parent.convertToWorldSpaceAR(cc.v2(r,o)),s=d.default.createSpriteNode("2d/ui/map/b06");s.group=l.NodeGroup.platform,s.parent=n,s.zIndex=-1,s.setPosition(n.convertToNodeSpaceAR(a)),cc.tween(s).parallel(cc.tween().by(1,{y:80}),cc.tween().delay(.6).to(.4,{opacity:0})).call(function(){s.destroy()}).start(),this.num>=this.targetNum&&(this.node.getChildByName("spr1").active=!1,this.node.getChildByName("spr2").active=!0),u.default.play(108)}},s([f],t)}(h.default));r.default=g,cc._RF.pop()},{}],GamePasswordBase:[function(e,t,i){"use strict";cc._RF.push(t,"9bbfeTmYhRDEZF1dcsUkPYF","GamePasswordBase");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ComponentBase"),d=cc._decorator,c=d.ccclass,u=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetNum=0,t.num=0,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.getTargetNum=function(){return this.targetNum},s([u({type:cc.Integer,tooltip:"\u76ee\u6807\u6570\u5b57"})],t.prototype,"targetNum",void 0),s([c],t)}(l.default);r.default=h,cc._RF.pop()},{}],GamePasswordGroup:[function(e,t,i){"use strict";cc._RF.push(t,"a148cqZzOZJ/LgtebfkfqG/","GamePasswordGroup");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("mgrDirector"),d=o("mgrGame"),c=o("mgrSound"),u=o("mgrTip"),h=o("ComponentBase"),p=o("GamePasswordBase"),f=cc._decorator,g=f.ccclass,v=f.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.passwords=[],t}return a(t,e),t.prototype.onLoad=function(){var t;e.prototype.onLoad.call(this),this.registerListeners(((t={})[d.GameMsgStrs[d.GameMsgIds.passwordBack]]=this.onMsgGamePasswordBack,t[d.GameMsgStrs[d.GameMsgIds.passwordDialog]]=this.onMsgGamePasswordDialog,t))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onMsgGamePasswordDialog=function(){l.default.openDialog("vPasswordDialog",{targetCount:this.passwords.length})},t.prototype.onMsgGamePasswordBack=function(e){for(var t=e.words,i=this.getNums(),n=!0,o=0;o<i.length;o++)i[o]!=t[o]&&(n=!1);n?(u.default.showMsgTip("\u5bc6\u7801\u6b63\u786e"),this.sendMsg(d.GameMsgStrs[d.GameMsgIds.end])):(u.default.showMsgTip("\u5bc6\u7801\u9519\u8bef"),c.default.play(109))},t.prototype.getNums=function(){for(var e=[],t=0;t<this.passwords.length;t++){var i=this.passwords[t];e.push(i.getTargetNum())}return e},s([v([p.default])],t.prototype,"passwords",void 0),s([g],t)}(h.default);r.default=_,cc._RF.pop()},{}],GamePushForward:[function(e,t,i){"use strict";cc._RF.push(t,"e25b81PHytEcJhmGpPwTSPv","GamePushForward");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("mgrGame"),d=o("ComponentBase"),c=o("GameHero"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetColliderTag=0,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onBeginContact=function(e,t,i){this.doTouch(e,t,i)},t.prototype.onPreSolve=function(e,t,i){this.doTouch(e,t,i)},t.prototype.doTouch=function(e,t,i){if(t.tag==this.targetColliderTag&&l.default.isTargetHero(i)){var n=i.node.getComponent(c.default),o=i.node.y,r=t.node.y;o>r-5&&o<r+5&&(i.node.x<t.node.x?t.body.linearVelocity=cc.v2(n.moveSpeed1,0):i.node.x>t.node.x&&(t.body.linearVelocity=cc.v2(-n.moveSpeed1,0)))}},t.prototype.onEndContact=function(e,t,i){t.tag==this.targetColliderTag&&l.default.isTargetHero(i)&&(t.body.linearVelocity=cc.v2(0,0))},s([p({type:cc.Integer,tooltip:"\u53d7\u4f5c\u7528\u7684\u78b0\u649e\u76d2\u5b50tag"})],t.prototype,"targetColliderTag",void 0),s([h],t)}(d.default);r.default=f,cc._RF.pop()},{}],GameRope:[function(e,t,i){"use strict";cc._RF.push(t,"59b16aRe/NFSL9WFTVWpxEy","GameRope");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tools"),d=o("ComponentBase"),c=cc._decorator,u=c.ccclass,h=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ropeNode=null,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.update=function(){var e=this.node.getComponent(cc.RopeJoint),t=e.connectedBody.node,i=l.default.getNodeWorldPosAR(this.node),n=l.default.getNodeWorldPosAR(t);i.x+=e.anchor.x,i.y+=e.anchor.y,n.x+=e.connectedAnchor.x,n.y+=e.connectedAnchor.y;var o=cc.Vec2.distance(i,n);this.ropeNode.height=o;var r=l.default.angle(i.x,i.y,n.x,n.y)+90;this.ropeNode.angle=r-this.node.angle},s([h({type:cc.Node,tooltip:"\u7ef3\u5b50\u8282\u70b9"})],t.prototype,"ropeNode",void 0),s([u],t)}(d.default);r.default=p,cc._RF.pop()},{}],GameWaterMaker1:[function(e,t,i){"use strict";cc._RF.push(t,"eba00wcE4ZAlZbhgq3Q/FkC","GameWaterMaker1");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tools"),d=o("mgrSound"),c=o("ComponentBase"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabRef=null,t.initPos=cc.v2(0,0),t.bOpend=!1,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),l.default.registerTouchHandler(this.node,this.onTouch.bind(this))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouch=function(e){e.isClick()&&this.bOpend&&this.generate()},t.prototype.generate=function(){var e=cc.instantiate(this.prefabRef);e.parent=this.node,e.zIndex=-1,cc.tween(e).set({x:0+this.initPos.x,y:0+this.initPos.y-e.height/2}).parallel(cc.tween().by(.6,{y:-80}),cc.tween().delay(.2).to(.4,{scale:0})).call(function(){e.destroy()}).start(),d.default.play(112)},s([p({type:cc.Prefab,tooltip:"\u9884\u5236"})],t.prototype,"prefabRef",void 0),s([p({tooltip:"\u521d\u59cb\u4f4d\u7f6e"})],t.prototype,"initPos",void 0),s([h],t)}(c.default);r.default=f,cc._RF.pop()},{}],GameWaterMaker:[function(e,t,i){"use strict";cc._RF.push(t,"166fdJIgn9PGrf0LYNagCBs","GameWaterMaker");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tools"),d=o("mgrGame"),c=o("mgrSound"),u=o("ComponentBase"),h=o("GameWater"),p=cc._decorator,f=p.ccclass,g=p.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabRef=null,t.bOpend=!1,t.speed=cc.v2(0,0),t.initPos=cc.v2(0,0),t.targetNodeName="",t.childIndex=0,t._pastTime=0,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),l.default.registerTouchHandler(this.node,this.onTouch.bind(this))},t.prototype.onDestroy=function(){c.default._stopEffect(111),e.prototype.onDestroy.call(this)},t.prototype.onTouch=function(e){e.isClick()&&(this.bOpend=!this.bOpend,this.sendMsg(d.GameMsgStrs[d.GameMsgIds.waterSwitch],{bOpend:this.bOpend}),c.default.play(110),this.bOpend?c.default.play(111):c.default._stopEffect(111))},t.prototype.update=function(e){this.bOpend&&(this._pastTime+=e,this._pastTime>.1&&(this._pastTime=0,this.generate()))},t.prototype.generate=function(){var e=cc.instantiate(this.prefabRef);e.parent=this.node,e.zIndex=this.childIndex,e.x=this.initPos.x+l.default.random(-10,10),e.y=this.initPos.y,e.getComponent(h.default).targetNodeName=this.targetNodeName,e.getComponent(cc.RigidBody).linearVelocity=this.speed,cc.tween(e).set({scale:0}).to(.3,{scale:1}).start()},s([g({type:cc.Prefab,tooltip:"\u9884\u5236"})],t.prototype,"prefabRef",void 0),s([g({tooltip:"\u5f00\u5173"})],t.prototype,"bOpend",void 0),s([g({tooltip:"\u7ed9\u6c34\u521d\u59cb\u901f\u5ea6"})],t.prototype,"speed",void 0),s([g({tooltip:"\u521d\u59cb\u4f4d\u7f6e"})],t.prototype,"initPos",void 0),s([g({tooltip:"\u76ee\u6807\u8282\u70b9\u540d\u5b57\uff0c\u6c34\u78b0\u5230\u5c31\u6d88\u5931\uff0c\u5e76\u89e6\u53d1\u6d88\u606f"})],t.prototype,"targetNodeName",void 0),s([g({type:cc.Integer,tooltip:"\u5b50\u8282\u70b9zindex"})],t.prototype,"childIndex",void 0),s([f],t)}(u.default);r.default=v,cc._RF.pop()},{}],GameWater:[function(e,t,i){"use strict";cc._RF.push(t,"49f10FPm2FNJ7haO3rGbozI","GameWater");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tools"),d=o("mgrDirector"),c=o("mgrGame"),u=o("ComponentBase"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetNodeName="",t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.lateUpdate=function(){var e=l.default.getNodeWorldPosAR(this.node);(e.x>d.default.width||e.x<0||e.y<20)&&this.recycle()},t.prototype.onBeginContact=function(e,t,i){i.node.name==this.targetNodeName&&(e.disabled,this.sendMsg(c.GameMsgStrs[c.GameMsgIds.water]),this.recycle())},t.prototype.recycle=function(){this.node.destroy()},s([p],t)}(u.default));r.default=f,cc._RF.pop()},{}],GoldFish:[function(e,t,i){"use strict";cc._RF.push(t,"e6777kXbQpHDLOpMydsnRT8","GoldFish");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tools"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onResourceLoaded=function(){this.fishId=this.context.fishId,this.nodeRes=this.context.nodeRes,this.moveSpeed=this.context.moveSpeed,this.nodeRes.parent=this;var e=this.nodeRes.width*this.nodeRes.scale/2;this.radius2=e*e},t.prototype.setTargetPos=function(e){this.targetPos=e},t.prototype.update=function(e){var t;if(this.targetPos){var i,n,o=s.default.angle(this.x,this.y,this.targetPos.x,this.targetPos.y);this.angle=o+90,i=(t=s.default.calcPointOnArc(0,0,this.moveSpeed*e,o))[0],n=t[1],this.x+=i,this.y+=n,s.default.distanceSQ(this.x,this.y,this.targetPos.x,this.targetPos.y)<this.radius2&&this.onArrive()}},t.prototype.onArrive=function(){this.context.fOnArrive instanceof Function&&this.context.fOnArrive()},t}(o("ViewBase").default);r.default=l,cc._RF.pop()},{}],Grid:[function(e,t,i){"use strict";cc._RF.push(t,"49660xMR0NC85PQCfMxgi2v","Grid");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,r=(o.ccclass,o.property,function(){function e(){this.rows={}}return e.prototype._calcBounds=function(){var e=1e6,t=-1e6,i=-1e6,n=1e6,o=this.rows;for(var r in o){var a=o[r],s=parseInt(r);for(var l in s<n&&(n=s),i<s&&(i=s),a){var d=parseInt(l);d<e&&(e=d),t<d&&(t=d)}}return e>=1e6&&(e=0,i=-1,t=-1,n=0),[e,i,t,n]},e.prototype.clear=function(){this.rows={}},e.prototype.setValue=function(e,t,i){var n=!1,o=this.rows,r=o[t];return null==r&&(r={},o[t]=r),r[e]!=i&&(n=!0,r[e]=i),n},e.prototype.removeRos=function(e){this.rows[e]=null},e.prototype.getValue=function(e,t){var i=this.rows[t];return null==i?null:i[e]},e.prototype.calcNums=function(e){var t=0,i=this.rows;for(var n in i){var o=i[n];for(var r in o)o[r]==e&&t++}return t},e.prototype.calcCenterPoint=function(){var e=this._calcBounds(),t=e[0],i=e[1];return[(t+e[2])/2,(i+e[3])/2]},e.prototype.mergeGrid=function(e,t){var i=e.rows;for(var n in i){var o=parseInt(n),r=i[o];for(var a in r){var s=parseInt(a),l=r[s];l==t&&this.getValue(s,o)!=t&&this.setValue(s,o,l)}}},e.prototype.debugDump=function(e){var t=this._calcBounds(),i=t[0],n=t[1],o=t[2],r=t[3];if(o<i)cc.log("Grid.debugDump empty!");else{cc.log("bounds",t);for(var a="",s=this.rows,l=n;l>=r;l--){l!=n&&(a+="\n");var d=s[l];if(null!=d)for(var c=i;c<=o;c++)a+=d[c]==e?"1":"0"}cc.log(a)}},e.prototype.serializeToText=function(e){var t="",i=this._calcBounds(),n=i[0],o=i[1],r=i[2],a=i[3];t+=n,t+="|",t+=a,t+="|",t+=r-n+1,t+="|";for(var s=this.rows,l=a;l<=o;l++)for(var d=s[l]||[],c=n;c<=r;c++)t+=d[c]==e?"1":"0";return t},e.prototype.fillBySerializeText=function(e,t){this.clear(),this.rows;var i=e.split("|");if(i.length<4)cc.warn("\u8b66\u544a] Grid.fillBySerializeText text format error!",e);else{var n=parseInt(i[0])||0,o=parseInt(i[1])||0,r=parseInt(i[2])||0,a=i[3],s=Math.floor(a.length/r);if(r*s==a.length)for(var l=0;l<s;l++)for(var d=o+l,c=0;c<r;c++){var u=n+c,h=l*r+c;"1"==a.charAt(h)&&this.setValue(u,d,t)}else cc.warn("\u8b66\u544a] fillBySerializeText format error! size = ",r,s)}},e.prototype.trim=function(t){var i=new e,n=this.rows;for(var o in n){var r=parseInt(o),a=n[r];for(var s in a){var l=parseInt(s),d=a[l];d==t&&i.setValue(l,r,d)}}return i},e.prototype.flip=function(t){var i=new e,n=this.rows;for(var o in n){var r=parseInt(o),a=n[r];for(var s in a){var l=parseInt(s),d=a[l];d==t&&i.setValue(-l-1,r,d)}}return i},e.prototype.calcIntersectionNums=function(e,t){var i=0,n=this.rows,o=e.rows,r=this.rows;for(var a in r){var s=parseInt(a),l=n[s],d=o[s];if(d)for(var c in l){var u=parseInt(c),h=l[u],p=d[u];h==t&&h==p&&i++}}return i},e.prototype.forEach=function(e){var t=this.rows;for(var i in t){var n=parseInt(i),o=t[n];for(var r in o){var a=parseInt(r),s=o[a];null!=s&&e(a,n,s)}}},e.prototype.hSplit=function(t){var i=new e,n=new e;for(var o in this.rows){var r=this.rows[o];for(var a in r){var s=r[a],l=parseInt(a);s==t&&(l<0?i.setValue(l,parseInt(o),s):n.setValue(l,parseInt(o),s))}}return[i,n]},e}());n.default=r,cc._RF.pop()},{}],IPoolManagerCacheableObject:[function(e,t,i){"use strict";cc._RF.push(t,"f7e8cE+m5FBIKVP1uVaqX4s","IPoolManagerCacheableObject");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IReuseLayouter:[function(e,t,i){"use strict";cc._RF.push(t,"b30d6M0rXJDLLQUbIdDTyu1","IReuseLayouter");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ISyncMonitor:[function(e,t,i){"use strict";cc._RF.push(t,"ba2050FxMlDSYZcPPtyumoa","ISyncMonitor");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],LabelEx:[function(e,t){"use strict";cc._RF.push(t,"05041axIy9JsZN36R4C3pix","LabelEx");var i=cc.Label.prototype.start;cc.Label.prototype.start=function(){var e=this;i&&i.call(this),window&&window.tt&&cc.loader.loadRes("em/material/ul-2d-sprite",cc.Material,function(t,i){if(t)cc.log("-----------Error----------LableMaterialSelect");else{var n=e.getComponent(cc.RenderComponent),o=cc.MaterialVariant.create(i,n);n.setMaterial(0,o),cc.log("---------------------LableMaterialSelect")}})},cc._RF.pop()},{}],LayerColor:[function(e,t,i){"use strict";cc._RF.push(t,"9dcecZrzvBF8Z+r3MsJQolH","LayerColor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("mgrDirector"),l=function(e){function t(t){var i=e.call(this)||this,n=new cc.Node;n.parent=i;var o=t.getA();t.setA(255),n.color=t,n.opacity=o,t.setA(o),i.nodeSprite=n;var r=n.addComponent(cc.Sprite);return r.sizeMode=cc.Sprite.SizeMode.CUSTOM,s.default.loadRes("2d/ui/common/singleColor",cc.SpriteFrame,function(e,t){if(!e&&cc.isValid(n)){var i=n.getContentSize();r.spriteFrame=t,n.setContentSize(i)}}),i}return a(t,e),t.prototype.setContentSize=function(t,i){e.prototype.setContentSize.call(this,t,i),this.nodeSprite.setContentSize(t,i)},t.prototype.setAnchorPoint=function(t,i){e.prototype.setAnchorPoint.call(this,t,i),this.nodeSprite.setAnchorPoint(t,i)},t}(cc.Node);r.default=l,cc._RF.pop()},{}],LifeCycleMonitor:[function(e,t,i){"use strict";cc._RF.push(t,"20ed8Gu2q1A3quCZsuyhsNt","LifeCycleMonitor");var n,o=i,r=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,d=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fOnLoad=null,t.fStart=null,t.fUpdate=null,t.fOnDestroy=null,t.fOnEnable=null,t.fOnDisable=null,t}return r(t,e),t.prototype.onLoad=function(){this.fOnLoad&&this.fOnLoad()},t.prototype.start=function(){this.fStart&&this.fStart()},t.prototype.update=function(e){this.fUpdate&&this.fUpdate(e)},t.prototype.onDestroy=function(){this.fOnDestroy&&this.fOnDestroy()},t.prototype.onEnable=function(){this.fOnEnable&&this.fOnEnable()},t.prototype.onDisable=function(){this.fOnDisable&&this.fOnDisable()},t.prototype.setOnLoadCallback=function(e){this.fOnLoad=e},t.prototype.setUpdateCallback=function(e){this.fUpdate=e},t.prototype.setStartCallback=function(e){this.fStart=e},t.prototype.setOnDestroyCallback=function(e){this.fOnDestroy=e},t.prototype.setOnEnableCallback=function(e){this.fOnEnable=e},t.prototype.setOnDisableCallback=function(e){this.fOnDisable=e},a([l],t)}(cc.Component));o.default=d,cc._RF.pop()},{}],LogWrap:[function(e,t,i){"use strict";cc._RF.push(t,"6619byNwxRE4KVEzamvIVcR","LogWrap");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.LogWrap=void 0;var o=function(){function e(){}return e.getDateString=function(){var e=new Date,t=e.getHours().toString(),i="";return i+=(1==t.length?"0"+t:t)+":",i+=(1==(t=e.getMinutes().toString()).length?"0"+t:t)+":",i+=(1==(t=e.getSeconds().toString()).length?"0"+t:t)+":",1==(t=e.getMilliseconds().toString()).length&&(t="00"+t),2==t.length&&(t="0"+t),"["+(i+=t)+"]"},e.stack=function(e){var t=(new Error).stack.split("\n");t.shift();var i=[];t.forEach(function(e){var t,n=(e=e.substring(7)).split(" ");n.length<2?i.push(n[0]):i.push(((t={})[n[0]]=n[1],t))});var n=[];if(e<i.length-1)for(var o in i[e])n.push(o);var r=n[0].split(".");return r[0]+".js->"+r[1]+": "},e.log=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];(console.log||cc.log).call(this,"Log--\x3e%s%s:"+cc.js.formatStr.apply(cc,arguments),e.stack(2),e.getDateString())},e.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];(console.log||cc.log).call(this,"Log--\x3e%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:#00CD00;",e.stack(2),e.getDateString())},e.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];(console.warn||cc.warn).call(this,"Log--\x3e%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:#ee7700;",e.stack(2),e.getDateString())},e.err=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];(console.error||cc.error).call(this,"Log--\x3e%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:red",e.stack(2),e.getDateString())},e}();n.LogWrap=o,cc._RF.pop()},{}],Manager:[function(e,t,i){"use strict";cc._RF.push(t,"bb517iTiWxAha7AbPfnKLLw","Manager");var n=e,o=i,r=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=n("MsgHandler"),s=n("Tools"),l=cc._decorator,d=l.ccclass,c=(l.property,function(){function e(){}var t;return t=e,e.loadAllManagers=function(){for(var e=0;e<this._managerInstances.length;e++){var t=this._managerInstances[e];try{t.onLoad()}catch(e){cc.warn("Manager.loadAllManager has error",e)}}},e.init=function(){t._managerInstances.push(this),this._msgHander=new a.default,this._msgHander.startProcMsg()},e.onLoad=function(){this.registerListeners({MSG_RECORD_RESET:this.loadRecord}),this._bNetworkResponseRegistered||(this._bNetworkResponseRegistered=!0,this.onRegisterNetworkResponseListeners())},e.loadRecord=function(){},e.saveRecord=function(){},e.onRegisterNetworkResponseListeners=function(){},e.registerListeners=function(e){var t=this;s.default.forEachMap(e,function(i,n){e[i]=n.bind(t)}),this._msgHander.registerListeners(e)},e.startProcMsg=function(){this._msgHander.startProcMsg()},e.stopProcMsg=function(){this._msgHander.stopProcMsg()},e.sendMsg=function(e,t){this._msgHander.sendMsg(e,t)},e._managerInstances=[],e._bNetworkResponseRegistered=!1,t=r([d],e)}());o.default=c,cc._RF.pop()},{}],MsgHandler:[function(e,t,i){"use strict";cc._RF.push(t,"0852c+vjjFK2r/FdcXtbrUO","MsgHandler");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Tools"),a=function(){function e(e){this.eventTarget=e||cc.game,this.registeredListeners={},this.startedListeners={},this.bStarted=!1}return e.prototype.registerListeners=function(e){var t=this;r.default.forEachMap(e,function(e,i){null!=t.registeredListeners[e]&&cc.log("[\u8b66\u544a] MsgHandler.registerListeners msg\u91cd\u590d\u6ce8\u518c\uff01 msgName="+e),t.registeredListeners[e]=function(e){try{i(e)}catch(e){cc.warn("MsgHandler.listener has error!",e)}}}),this.bStarted&&this.startProcMsg()},e.prototype.startProcMsg=function(){var e=this;this.bStarted=!0,r.default.forEachMap(this.registeredListeners,function(t){if(!e.startedListeners[t]){var i=e.registeredListeners[t];e.eventTarget.on(t,i,e),e.startedListeners[t]=i}})},e.prototype.stopProcMsg=function(){var e=this;r.default.forEachMap(this.startedListeners,function(t,i){e.eventTarget.off(t,i,e)}),this.bStarted=!1,this.startedListeners={}},e.prototype.sendMsg=function(e,t){try{this.eventTarget.emit(e,t)}catch(e){cc.warn("MsgHandler.sendMsg has exception",e)}},e}();o.default=a,cc._RF.pop()},{}],NetworkAdapterBase:[function(e,t,i){"use strict";cc._RF.push(t,"19f10Ph5gxPjZVUGeVhqU2/","NetworkAdapterBase");var n=e,o=i,r=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NetworkAdapterBase=void 0;var a=n("Tools"),s=n("Timer"),l=cc._decorator,d=l.ccclass,c=(l.property,function(){function e(){}return e.prototype.setReceiveCallback=function(e){return this.fOnReceive=e,this},e.prototype.setFaildCallback=function(e){return this.fOnFaild=e,this},e.prototype.triggerReceiveCallback=function(e){this.fOnReceive&&this.fOnReceive(e)},e.prototype.triggerFaildCallback=function(e){this.fOnFaild&&this.fOnFaild(e)},e.prototype.send=function(e){var t=this;s.default.callLater(.1,function(){if("CMD_1"==e.cmd){var i={cmd:e.cmd,info:"response."+e.info};t.triggerReceiveCallback(i)}else"CMD_2"==e.cmd&&(a.default.random(100)<50?(i={cmd:e.cmd,info:"response."+e.info},t.triggerReceiveCallback(i)):t.triggerFaildCallback("random faild"))})},e.prototype.connect=function(){},e.prototype.disconnect=function(){},e.prototype.update=function(){},r([d],e)}());o.NetworkAdapterBase=c,cc._RF.pop()},{}],NetworkAdapterHttpUlServer:[function(e,t,i){"use strict";cc._RF.push(t,"ba6a3sqZGhIbanIFIQ9RJtc","NetworkAdapterHttpUlServer");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkAdapterHttpUlServer=void 0;var l=o("NetworkAdapterBase"),d=cc._decorator,c=d.ccclass,u=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeout=3,t}return a(t,e),t.prototype.setHost=function(e){this.host=e},t.prototype.setUrlFormat=function(e){this.urlFormat=e},t.prototype.setUlServerArg=function(e,t,i,n){this.signkey=e,this.platform=t,this.appid=i,this.channel=n},t.prototype.setTimeout=function(e){this.timeout=e},t.prototype.send=function(e){var t=JSON.stringify(e);t=encodeURIComponent(t);var i=ul.format("signkey=%s&platform=%s&appid=%s&channel=%s&data=%s",this.signkey,this.platform,this.appid,this.channel,t),n=ul.format(this.urlFormat,this.host);cc.log("send",n,i);var o=cc.loader.getXMLHttpRequest();o.onreadystatechange=this.onReadyStateChange.bind(this),o.onerror=this.onError.bind(this),o.ontimeout=this.onTimeout.bind(this),o.open("POST",n),o.timeout=1e3*this.timeout,this.xhr=o,o.send(i)},t.prototype.onError=function(){cc.log("NetworkAdapterHttpUlServer.onError"),this.triggerFaildCallback("NetworkAdapterHttpUlServer.onError"),this.disconnect()},t.prototype.onTimeout=function(){cc.log("NetworkAdapterHttpUlServer.onTimeout"),this.triggerFaildCallback("NetworkAdapterHttpUlServer.onError"),this.disconnect()},t.prototype.onReadyStateChange=function(){var e=this.xhr;if(e&&4==e.readyState){if(200==e.status){var t=e.response||"",i={str:null},n=void 0;try{n=JSON.parse(t)}catch(e){}n?i=n:i.str=t,this.triggerReceiveCallback(i)}else this.triggerFaildCallback(ul.format("http error: readyState=[%s], status=[%s]",e.readyState,e.status));this.disconnect()}},t.prototype.disconnect=function(){if(this.xhr)try{this.xhr.abort(),this.xhr=null}catch(e){console.log("disconnect error"),this.xhr=null}},s([c],t)}(l.NetworkAdapterBase));r.NetworkAdapterHttpUlServer=u,cc._RF.pop()},{}],NetworkAdapterHttp:[function(e,t,i){"use strict";cc._RF.push(t,"fd376cjprVCg6tz28Mt+EGm","NetworkAdapterHttp");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkAdapterHttp=void 0;var l=o("NetworkAdapterBase"),d=o("Timer"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeout=5e3,t}return a(t,e),t.prototype.setTimeout=function(e){this.timeout=e},t.prototype.send=function(e){var t=e.url;if(t){var i=e.requestType||"GET",n=e.postData||"",o=cc.loader.getXMLHttpRequest();o.onreadystatechange=this.onReadyStateChange.bind(this),o.open(i,t),o.timeout=this.timeout,this.xhr=o,this.startTimeoutTimer(),o.send(n)}else cc.warn("\u8b66\u544a] NetworkAdapterHttp.send url not found!")},t.prototype.onReadyStateChange=function(){var e=this.xhr;if(e&&4==e.readyState){if(200==e.status){var t={response:e.response||""};this.triggerReceiveCallback(t)}else this.triggerFaildCallback(ul.format("http error: readyState=[%s], status=[%s]",e.readyState,e.status));this.stopTimeoutTimer(),this.disconnect()}},t.prototype.disconnect=function(){if(this.xhr)try{this.xhr.abort(),this.xhr=null}catch(e){console.log("disconnect error1"),this.xhr=null}},t.prototype.startTimeoutTimer=function(){var e=this;this.stopTimeoutTimer();var t=new d.default(this.timeout,1,function(){e.stopTimeoutTimer(),e.disconnect()});t.start(),this.timeoutTimer=t},t.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},s([u],t)}(l.NetworkAdapterBase));r.NetworkAdapterHttp=h,cc._RF.pop()},{}],NetworkManager:[function(e,t,i){"use strict";cc._RF.push(t,"33b8bnH9ttOA7UWhgWmkZ7E","NetworkManager");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkManager=void 0;var s=o("NetworkTask"),l=1,d=2,c=3,u=4,h=function(e){function t(t){var i=e.call(this)||this;return i.bAutoDoNextTask=!0,i.currTask=null,i.tasks=[],i.adapter=null,i.adapter=t,t.setReceiveCallback(i.onReceive.bind(i)),t.setFaildCallback(i.onFaild.bind(i)),i.registerState(l,i.onEnterStandby.bind(i),i.onExecuteStandby.bind(i),null),i.registerState(d,i.onEnterRequest.bind(i),i.onExecuteRequest.bind(i),null),i.registerState(c,i.onEnterResponse.bind(i),i.onExecuteResponse.bind(i),null),i.registerState(u,i.onEnterFailed.bind(i),i.onExecuteFailed.bind(i),null),i.setNextState(l),i}return a(t,e),t.prototype.setAutoDoNextTaskEnabled=function(e){this.bAutoDoNextTask=e},t.prototype.update=function(t){e.prototype.update.call(this,t),this.adapter.update(t)},t.prototype.onEnterStandby=function(){},t.prototype.onExecuteStandby=function(){var e=this.tasks;e.length>0&&(this.currTask=e.shift(),this.setNextState(d))},t.prototype.onEnterRequest=function(){var e=this.currTask;e.triggerRequestCallback(),this.adapter.send(e.getRequestData())},t.prototype.onExecuteRequest=function(){},t.prototype.onEnterResponse=function(){var e=this.currTask;e&&e.triggerResponseCallback()},t.prototype.onExecuteResponse=function(){this.bAutoDoNextTask&&this.doNextTask()},t.prototype.onEnterFailed=function(){var e=this.currTask;e&&(e.retryCount++,e.triggerFaildCallback())},t.prototype.onExecuteFailed=function(){this.bAutoDoNextTask&&this.doNextTask()},t.prototype.onReceive=function(e){if(this.getState()==d){var t=this.currTask;t?(t.setResponseData(e),this.setNextState(c)):cc.log("[warn] NetworkManager.onReceive, currTask !found!")}else cc.log("[warn] NetworkManager.onReceive, state is !ST_REQUEST!")},t.prototype.onFaild=function(e){if(this.getState()==d){var t=this.currTask;t?(t.setFaildMsg(e),this.setNextState(u)):cc.log("[warn] NetworkManager.onReceive, currTask !found!")}else cc.log("[warn] NetworkManager.onReceive, state is !ST_REQUEST!")},t.prototype.addTask=function(e,t,i,n,o){if(e){var r=new s.NetworkTask;r.setRequestData(e),r.setOnReceiveCallback(t),r.setOnFaildCallback(i),r.setOnRequestCallback(n),r.setBackgroundEnabled(o),this.tasks.push(r)}else cc.log("[warn] NetworkManager.addTask, requestData is null!")},t.prototype.getCurrentTask=function(){return this.currTask},t.prototype.getTasks=function(){return this.tasks},t.prototype.retryTask=function(e){this.tasks.push(e)},t.prototype.stopAllTasks=function(){this.tasks=[],this.currTask=null,this.adapter.disconnect(),this.setNextState(l)},t.prototype.doNextTask=function(){this.currTask=null,this.setNextState(l)},t}(o("FSMObject").default);r.NetworkManager=h,cc._RF.pop()},{}],NetworkTask:[function(e,t,i){"use strict";cc._RF.push(t,"fef47QyITxJGal2U1lUImfJ","NetworkTask");var n=i,o=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkTask=void 0;var r=cc._decorator,a=r.ccclass,s=(r.property,function(){function e(){this.fOnRequest=null,this.fOnFaild=null,this.fOnReceive=null,this.faildMsg="",this.responseData=null,this.requestData={},this.retryCount=0}return e.prototype.setBackgroundEnabled=function(e){return this.bBackgroundEnabled=e,this},e.prototype.isBackgroundEnabled=function(){return this.bBackgroundEnabled},e.prototype.setRequestData=function(e){return this.requestData=e,this},e.prototype.getRequestData=function(){return this.requestData},e.prototype.setResponseData=function(e){return this.responseData=e,this},e.prototype.getResponseData=function(){return this.responseData},e.prototype.setFaildMsg=function(e){return this.faildMsg=e,this},e.prototype.getFaildMsg=function(){return this.faildMsg},e.prototype.setOnRequestCallback=function(e){return this.fOnRequest=e,this},e.prototype.setOnReceiveCallback=function(e){return this.fOnReceive=e,this},e.prototype.setOnFaildCallback=function(e){return this.fOnFaild=e,this},e.prototype.triggerRequestCallback=function(){this.fOnRequest&&this.fOnRequest(this)},e.prototype.triggerResponseCallback=function(){this.fOnReceive&&this.fOnReceive(this)},e.prototype.triggerFaildCallback=function(){this.fOnFaild&&this.fOnFaild(this)},o([a],e)}());n.NetworkTask=s,cc._RF.pop()},{}],Particle:[function(e,t,i){"use strict";cc._RF.push(t,"a10b8ZLs3ZDqYswx11SLC3c","Particle");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("mgrCfg"),l=o("mgrDirector"),d=function(e){function t(t,i){var n=e.call(this)||this;return n.bLoaded=!1,n.loadCompletedCallback=i,n.particleData=s.default.get("particle_db",t),n._loadParticle(),n}return a(t,e),t.prototype._loadParticle=function(){var e=this,t=this.particleData;l.default.loadRes(t.filename,cc.ParticleAsset,function(i,n){if(i)e.loadCompletedCallback&&e.loadCompletedCallback(t.id);else{if(!cc.isValid(e))return cc.loader.release(n),void(e.loadCompletedCallback&&e.loadCompletedCallback(t.id));var o=e.addComponent(cc.ParticleSystem);o.file=n,""!=t.positionType&&(o.positionType=parseInt(t.positionType)),e.bAutoRemoveOnFinish=t.bPlayOnce,e.bLoaded=!0,e.loadCompletedCallback&&e.loadCompletedCallback(t.id)}})},t.prototype.reset=function(){var e=this.getComponent(cc.ParticleSystem);e&&(e.autoRemoveOnFinish=this.bAutoRemoveOnFinish),e&&e.resetSystem()},t.prototype.setAutoRemoveOnFinish=function(e){this.bAutoRemoveOnFinish=e;var t=this.getComponent(cc.ParticleSystem);t&&(t.autoRemoveOnFinish=this.bAutoRemoveOnFinish)},t.prototype.isLoaded=function(){return this.bLoaded},t}(cc.Node);r.default=d,cc._RF.pop()},{}],PoolManager:[function(e,t,i){"use strict";cc._RF.push(t,"a121cUYpppN0Zm8VXjSKZa4","PoolManager");var n=e,o=i,r=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=n("Tools"),s=cc._decorator,l=s.ccclass,d=(s.property,function(){function e(){this.pools={},this.poolConfigs={}}return e.prototype._getPool=function(e,t){var i=this.pools[e];i||(i={},this.pools[e]=i);var n=i[t];return n||(n=[],i[t]=n),n},e.prototype._safeRelease=function(){},e.prototype.register=function(e,t,i,n,o,r){this.poolConfigs[e]={creator:t,resetter:i,cleanuper:n,destroyer:o,maxCount:r}},e.prototype.get=function(e,t,i){if(!e)return cc.warn("PoolManager.get need a poolId"),void(i&&i(t));var n=this.poolConfigs[e];if(!n)return cc.warn(ul.format("PoolManager.get config not found! poolId = %s",e)),void(i&&i(t));null==t&&(t="__default__");for(var o=this._getPool(e,t),r=0;r<o.length;r++)o[r];var a=o.shift();for(r=0;r<o.length;r++)o[r];a&&a.parent&&(cc.warn("[warn] PoolManager.get, node already has a parent!"),a=null);var s=!1;return a||((a=n.creator(t,i))&&(a.__pool_id=e,a.__pool_key=t),s=!0),a&&(n.resetter&&n.resetter(a),a.__pool_flag_inpool=null),!s&&i&&i(t),a},e.prototype.put=function(e){if(e){var t=e.__pool_id,i=e.__pool_key;if(t)if(i)if(cc.isValid(e)){var n=this.poolConfigs[t];if(n)if(e.__pool_flag_inpool)cc.warn("PoolManager.put obj is already in pool!");else{var o=this._getPool(t,i);o.length<n.maxCount?(n.cleanuper&&n.cleanuper(e),e.__pool_flag_inpool=!0,o.push(e)):(n.destroyer&&n.destroyer(e),this._safeRelease(e))}else cc.warn(ul.format("PoolManager.put config not found! poolId = %s",t))}else cc.warn("PoolManager.put obj not valid.");else cc.warn("PoolManager.put obj.__pool_key not found!")}else cc.warn("PoolManager.put node is nil!")},e.prototype.clean=function(e,t){var i=this;a.default.forEachMap(this.pools,function(n,o){if(!e||e==n){var r=i.poolConfigs[n].destroyer;a.default.forEachMap(o,function(e,n){if(!t||t==e){for(var a=0;a<n.length;a++){var s=n[a];r&&r(s),i._safeRelease(s)}o[e]=null}})}})},e.prototype.contain=function(e,t){if(e&&t&&this.poolConfigs[e]){var i=this._getPool(e,t);if(i&&!(i.length<=0)){var n=i[i.length-1];if(!n||!n.parent)return!0}}},r([l],e)}());o.default=d,cc._RF.pop()},{}],Randomizer:[function(e,t,i){"use strict";cc._RF.push(t,"92d72KdO7hG8YoOt/riTl26","Randomizer");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Tools"),a=function(){function e(e){null==e&&(e=(new Date).getTime()),this.originSeed=e,this.seed=e}return e.prototype.getSeed=function(){return this.seed},e.prototype.getOriginSeed=function(){return this.originSeed},e.prototype.setSeed=function(e){this.originSeed=e,this.seed=e},e.prototype.random=function(e,t){this.seed=(9301*this.seed+49297)%233280;var i=this.seed/233280;return null==e&&null==t?i:null==t?Math.floor(i*e+1):Math.floor(i*(t-e+1)+e)},e.prototype._pureRandomWithoutReturn=function(){this.seed=(9301*this.seed+49297)%233280},e._getStaticRandomizer=function(){return this.staticFixedRandomizer||(this.staticFixedRandomizer=new e),this.staticFixedRandomizer},e.calcFixedRandom=function(e,t,i,n){t<0&&(cc.warn("FixedRandomizer.calcFixedRandom index must >= 0"),t=0);var o=this._getStaticRandomizer();o.setSeed(e);for(var r=0;r<t;r++)o._pureRandomWithoutReturn();return o.random(i,n)},e.calcFixedRandoms=function(e,t,i,n){var o=[],r=this._getStaticRandomizer();r.setSeed(e);for(var a=0;a<t;a++)o.push(r.random(i,n));return o},e._test=function(){cc.log("randomizer(1)");for(var t=new e(1),i=0;i<10;i++)cc.log(i,t.random(100),t.getSeed());cc.log("calcFixedRandoms(1)");var n=e.calcFixedRandoms(1,10,100);for(i=0;i<n.length;i++)cc.log(i,n[i]);for(cc.log("calcFixedRandom(1)"),i=0;i<10;i++)cc.log(i,e.calcFixedRandom(1,i,100));for(cc.log("randomizer(2)"),t=new e(2),i=0;i<10;i++)cc.log(i,t.random(100),t.getSeed());cc.log("\u968f\u673a\u5206\u5e03\u6d4b\u8bd5");var o={};for(t=new e(1),i=0;i<1e3;i++)o[a=t.random(100)]=(o[a]||0)+1;for(cc.log(o),cc.log("\u7cfb\u7edfrandom\u5206\u5e03\u6d4b\u8bd5"),o={},i=0;i<1e3;i++){var a;o[a=r.default.random(100)]=(o[a]||0)+1}cc.log(o)},e.staticFixedRandomizer=null,e}();o.default=a,cc._RF.pop()},{}],ResNode:[function(e,t,i){"use strict";cc._RF.push(t,"62461fkvSpFT5yqsObdz0+A","ResNode");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l,d=o("CascadeColor"),c=o("ViewBase"),u=o("mgrDirector"),h=o("mgrPool");(function(e){e[e.sprite=1]="sprite",e[e.spine=2]="spine",e[e.animNode=3]="animNode",e[e.particle=4]="particle"})(l||(l={}));var p=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.bLoadFaild=!1,i.bPremultiplyAlphaMode=!1,i.context.bBanCascadeColor||i.addComponent(d.default),i}return a(t,e),t.prototype._onPreDestroy=function(){this.unloadRes(),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype._loadResource=function(){},t.prototype._getFromPool=function(e,t){return h.default.get(e,t)},t.prototype._putToPool=function(e){return h.default.put(e)},t.prototype.loadRes=function(){var e=this,t=this.resType,i=this.resId1;if(this.bLoadFaild=!1,this.registerAsyncValue("nodeResource",null),t==l.sprite)u.default.loadRes(i,cc.SpriteFrame,function(n,o){if(n)return cc.error(n.message),e.bLoadFaild=!0,void e.registerAsyncValue("nodeResource",e);if(cc.isValid(e)&&t==e.resType&&i==e.resId1){e.unloadRes();var r=new cc.Node,a=r.addComponent(cc.Sprite);a.spriteFrame=o,e.bPremultiplyAlphaMode&&(a.srcBlendFactor=cc.macro.BlendFactor.ONE,a.dstBlendFactor=cc.macro.BlendFactor.ONE_MINUS_SRC_ALPHA),r.parent=e,r.setAnchorPoint(e.getAnchorPoint()),e.nodeSprite=r,e.registerAsyncValue("nodeResource",e)}});else if(t==l.spine){var n=this._getFromPool("spine",i);if(!n)return this.bLoadFaild=!0,void this.registerAsyncValue("nodeResource",this);n.waitLoadingFinished(function(){if(cc.isValid(e))return cc.isValid(n)?void(t==e.resType&&i==e.resId1&&(e.unloadRes(),n.parent=e,e.spine=n,e._spineMovNames||e._spineEventCallback?e.tryPlaySpineMov(e._spineMovNames,e._spineLoop,e._spineEventCallback):n.play(e.resId2||"mov_1",!0),e.registerAsyncValue("nodeResource",n))):(e.bLoadFaild=!0,void e.registerAsyncValue("nodeResource",e))})}else if(t==l.animNode){if(t!=this.resType||i!=this.resId1)return;this.unloadRes();var o=this._getFromPool("animNode",i);if(!o)return this.bLoadFaild=!0,void this.registerAsyncValue("nodeResource",this);o.parent=this,this.animNode=o,this._animNodeClipName||this._animNodeEventCallback?this.tryPlayAnimClip(this._animNodeClipName,this._animNodeEventCallback):o.play(this.resId2),this.registerAsyncValue("nodeResource",o)}else if(t==l.particle){if(t!=this.resType||i!=this.resId1)return;this.unloadRes();var r=this._getFromPool("particle",i);if(!cc.isValid(r))return this.bLoadFaild=!0,void this.registerAsyncValue("nodeResource",this);r.parent=this,this.particle=r,this.registerAsyncValue("nodeResource",r)}else cc.warn("ResNode.setRes, unknown resType",t),this.registerAsyncValue("nodeResource",this)},t.prototype.unloadRes=function(){if(cc.isValid(this.nodeSprite)){var e=this.nodeSprite.getComponent(cc.Sprite);e&&e.spriteFrame&&(e.spriteFrame,e.spriteFrame=null),this.nodeSprite.destroy()}this.nodeSprite=null,cc.isValid(this.spine)&&(this.spine.removeFromParent(!1),this._putToPool(this.spine)),this.spine=null,cc.isValid(this.animNode)&&(this.animNode.removeFromParent(!1),this._putToPool(this.animNode)),this.animNode=null,cc.isValid(this.particle)&&(this.particle.removeFromParent(!1),this._putToPool(this.particle)),this.particle=null,this.registerAsyncValue("nodeResource",null)},t.prototype.setAnchorPoint=function(t,i){e.prototype.setAnchorPoint.call(this,t,i),cc.isValid(this.nodeSprite)&&this.nodeSprite.setAnchorPoint(t,i)},t.prototype.tryPlaySpineMov=function(e,t,i){cc.isValid(this.spine)?(this.spine.play(e,t),i&&this.spine.registerEventCallback(i),this._spineMovNames=null,this._spineLoop=null,this._spineEventCallback=null):(this._spineMovNames=e,this._spineLoop=t,this._spineEventCallback=i)},t.prototype.tryPlayAnimClip=function(e,t){cc.isValid(this.animNode)?(this.animNode.play(e),t&&this.animNode.registerEventCallback(t),this._animNodeClipName=null,this._animNodeEventCallback=null):(this._animNodeClipName=e,this._animNodeEventCallback=t)},t.prototype.setRes=function(e,t,i){var n,o,r;e instanceof Array?(n=e[0],o=e[1],r=e[2]):(n=e,o=t,r=i),new cc.Node,null!=n&&o||cc.warn("mgrDirector.loadResNode faild! resType=[%s], resId=[%s].",n,o),this.resType=n,this.resId1=o,this.resId2=r,this.loadRes()},t.prototype.clearRes=function(){this.unloadRes(),this.resType=null,this.resId1=null,this.resId2=null},t.prototype.isLoadingFinished=function(){var e=this.nodeResource;return!!e&&(!(e instanceof c.default)||!!cc.isValid(e)&&(e==this||e.isLoadingFinished()))},t.prototype.waitLoadingFinished=function(e){var t=this;this.waitResourceLoaded(function(){var i=t.nodeResource;if(i instanceof c.default){if(i==t)return void e();i.waitLoadingFinished(e)}else e()})},t.prototype.setPremultiplyAlphaModeEnabled=function(e){this.bPremultiplyAlphaMode=e},s([c.default.requireResourceLoaded],t.prototype,"tryPlaySpineMov",null),s([c.default.requireResourceLoaded],t.prototype,"tryPlayAnimClip",null),t}(c.default);r.default=p,cc._RF.pop()},{}],ReuseLayouterHBox:[function(e,t,i){"use strict";cc._RF.push(t,"80ad6lBxMFIz5G/a2oiNaax","ReuseLayouterHBox");var n=i,o=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(){function e(){this.cellSize=cc.size(0,0),this.gap=0,this.pending=0,this.containerHeight=0,this.cellTop=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildHeight(),this},e.prototype.setGap=function(e){return this.gap=e,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerHeight=function(e){return this.containerHeight=e,this.tryBuildHeight(),this},e.prototype.tryBuildHeight=function(){var e=this.cellSize.height,t=this.containerHeight;0!=e&&0!=t&&(this.cellTop=Math.floor((t-e)/2))},e.prototype.getPos=function(e){var t=this.pending+e*(this.cellSize.width+this.gap),i=-this.cellTop;return t+=this.cellSize.width/2,i-=this.cellSize.height/2,cc.v2(t,i)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerHeight(e.height)},e.prototype.getContainerSize=function(e){var t=2*this.pending+this.cellSize.width*e+this.gap*(e-1);return cc.size(t,this.containerHeight)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(-this.pending,0)},e.prototype.isHorizontalScroll=function(){return!0},e.prototype.isVerticalScroll=function(){return!1},o([a],e)}());n.default=s,cc._RF.pop()},{}],ReuseLayouterHGrid:[function(e,t,i){"use strict";cc._RF.push(t,"35f5czwDvtMA6NDCYUSl2jj","ReuseLayouterHGrid");var n=i,o=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(){function e(){this.cellSize=cc.size(0,0),this.rows=0,this.hgap=0,this.vgap=0,this.pending=0,this.containerHeight=0,this.cellTop=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildTop(),this},e.prototype.setRows=function(e){return this.rows=e,this.tryBuildTop(),this},e.prototype.setGap=function(e,t){return this.hgap=e,this.vgap=t,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerHeight=function(e){return this.containerHeight=e,this.tryBuildTop(),this},e.prototype.tryBuildTop=function(){var e=this.rows,t=this.cellSize.height,i=this.containerHeight,n=this.vgap;if(0!=e&&0!=t&&0!=i){var o=e*t+(e-1)*n;this.cellTop=Math.floor((i-o)/2)}},e.prototype.getPos=function(e){var t=Math.floor(e/this.rows),i=e%this.rows,n=this.pending+t*(this.cellSize.width+this.hgap),o=-this.cellTop-i*(this.cellSize.height+this.vgap);return n+=this.cellSize.width/2,o-=this.cellSize.height/2,cc.v2(n,o)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerHeight(e.height)},e.prototype.getContainerSize=function(e){var t=Math.ceil(e/this.rows),i=2*this.pending+this.cellSize.width*t+this.hgap*(t-1);return cc.size(i,this.containerHeight)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(-this.pending,0)},e.prototype.isHorizontalScroll=function(){return!0},e.prototype.isVerticalScroll=function(){return!1},o([a],e)}());n.default=s,cc._RF.pop()},{}],ReuseLayouterVBox:[function(e,t,i){"use strict";cc._RF.push(t,"b1de5hw1QtHOp9XvYtOMMAS","ReuseLayouterVBox");var n=i,o=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(){function e(){this.cellSize=cc.size(0,0),this.gap=0,this.pending=0,this.containerWidth=0,this.cellLeft=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildLeft(),this},e.prototype.setGap=function(e){return this.gap=e,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerWidth=function(e){return this.containerWidth=e,this.tryBuildLeft(),this},e.prototype.tryBuildLeft=function(){var e=this.cellSize.width,t=this.containerWidth;0!=e&&0!=t&&(this.cellLeft=Math.floor((t-e)/2))},e.prototype.getPos=function(e){var t=this.cellLeft,i=-this.pending-e*(this.cellSize.height+this.gap);return t+=this.cellSize.width/2,i-=this.cellSize.height/2,cc.v2(t,i)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerWidth(e.width)},e.prototype.getContainerSize=function(e){var t=2*this.pending+this.cellSize.height*e+this.gap*(e-1);return cc.size(this.containerWidth,t)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(0,-this.pending)},e.prototype.isHorizontalScroll=function(){return!1},e.prototype.isVerticalScroll=function(){return!0},o([a],e)}());n.default=s,cc._RF.pop()},{}],ReuseLayouterVGrid:[function(e,t,i){"use strict";cc._RF.push(t,"103774IVeNDcKnA1XUhN5I/","ReuseLayouterVGrid");var n=i,o=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(){function e(){this.cellSize=cc.size(0,0),this.cols=0,this.hgap=0,this.vgap=0,this.pending=0,this.containerWidth=0,this.cellLeft=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildLeft(),this},e.prototype.setCols=function(e){return this.cols=e,this.tryBuildLeft(),this},e.prototype.setGap=function(e,t){return this.hgap=e,this.vgap=t,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerWidth=function(e){return this.containerWidth=e,this.tryBuildLeft(),this},e.prototype.tryBuildLeft=function(){var e=this.cols,t=this.cellSize.width,i=this.containerWidth,n=this.hgap;if(0!=e&&0!=t&&0!=i){var o=e*t+(e-1)*n;this.cellLeft=Math.floor((i-o)/2)}},e.prototype.getPos=function(e){var t=e%this.cols,i=Math.floor(e/this.cols),n=this.cellLeft+t*(this.cellSize.width+this.hgap),o=-this.pending-i*(this.cellSize.height+this.vgap);return n+=this.cellSize.width/2,o-=this.cellSize.height/2,cc.v2(n,o)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerWidth(e.width)},e.prototype.getContainerSize=function(e){var t=Math.ceil(e/this.cols),i=2*this.pending+this.cellSize.height*t+this.vgap*(t-1);return cc.size(this.containerWidth,i)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(0,-this.pending)},e.prototype.isHorizontalScroll=function(){return!1},e.prototype.isVerticalScroll=function(){return!0},o([a],e)}());n.default=s,cc._RF.pop()},{}],ReuseList:[function(e,t,i){"use strict";cc._RF.push(t,"4aa41F5bWpCm4a0dSfgUa1x","ReuseList");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("LayerColor"),d=o("Timer"),c=o("ViewBase"),u=cc._decorator,h=u.ccclass,p=(u.property,function(e){function t(){var t=e.call(this)||this;return t._CELL_ID=0,t.datas=[],t.cells=[],t.cellPool=[],t.bInit=!1,t.bDebugLineEnabled=!1,t.bClippingEnabled=!0,t.bReuseEnabled=!0,t.bElasticEnabled=!0,t.bTouchScrollEnabled=!0,t.bAsyncSetterEnabled=!1,t.fOnContainerMoved=null,t}return a(t,e),t.prototype.onAsyncTimerSpan=function(){var e=this.asyncSetterTasks;if(null!=e&&e.length>0){var t=e[0];e.splice(0,1);var i=t[0],n=t[1];this.setter(i,n),i.active=!0}},t.prototype.init=function(){var e=this,t=this.layouter,i=this.getContentSize();if(t.setListSize(i),this.bDebugLineEnabled){var n=new l.default(cc.color(255,255,0,63));n.parent=this,n.setContentSize(this.getContentSize()),n.setAnchorPoint(this.getAnchorPoint())}var o=new cc.Node;o.setAnchorPoint(0,1),o.parent=this,this.nodeContainer=o;var r=this.addComponent(cc.ScrollView);r.horizontal=t.isHorizontalScroll(),r.vertical=t.isVerticalScroll(),r.content=o,r.cancelInnerEvents=!1,r.elastic=this.bElasticEnabled;var a=r.onEnable;r.onEnabled=function(){a(),e._tryApplayTouchScrollEnabled()},this._tryApplayTouchScrollEnabled(),this.bClippingEnabled&&this.addComponent(cc.Mask),this.on("scrolling",this.onScrolling,this)},t.prototype.reloadList=function(){if(null!=this.layouter)if(null!=this.creator)if(null!=this.setter){this.bInit||(this.bInit=!0,this.init());var e=this.layouter,t=this.datas,i=(this.cells,this.getContentSize()),n=e.getContainerSize(t.length),o=Math.max(i.width,n.width),r=Math.max(i.height,n.height),a=this.getComponent(cc.ScrollView),s=a.getScrollOffset();this.nodeContainer.setContentSize(o,r),a.scrollToOffset(s);for(var l=0;l<this.cells.length;l++){var d=this.cells[l];this.putCellToPool(d)}this.cells=[],this.onContainerMoved()}else cc.log("[\u9519\u8bef] ReuseList.reloadList setter not found!");else cc.log("[\u9519\u8bef] ReuseList.reloadList creator not found!");else cc.log("[\u9519\u8bef] ReuseList.reloadList layouter not found!")},t.prototype.updateCellState=function(){for(var e=this,t=this.layouter,i=this.nodeContainer,n=this.datas,o=this.cells,r=this.width*this.anchorX,a=this.height*this.anchorY,s=i.x+r,l=i.y+a,d=this.getContentSize(),c=-(l-d.height),u=-l,h=-s,p=-s+d.width,f=t.getCellSize(),g=f.width,v=f.height,_=function(i){if(!e.bReuseEnabled)return!0;var n=t.getPos(i);return u<n.y+v/2&&n.y-v/2<c&&h<n.x+g/2&&n.x-g/2<p},y=[],m=0;m<o.length&&!_(I=(b=o[m]).__data_index);m++)y.push(m);for(var S=y.length-1;S>=0;S--){var b=o[m=y[S]];o.splice(m,1),this.putCellToPool(b)}var C=o[0];if(C)for(var I=C.__data_index-1;I>=0&&_(I);I--){b=this.getCellFromPool(),o.splice(0,0,b);var F=n[I];this._callCellSetter(b,F),b.__data_index=I,b.zIndex=I,b.data=F,b.setPosition(t.getPos(I))}else for(I=0;I<n.length;I++)_(I)&&(b=this.getCellFromPool(),o.push(b),F=n[I],this._callCellSetter(b,F),b.__data_index=I,b.zIndex=I,b.data=F,b.setPosition(t.getPos(I)));for(m=o.length-1;m>=0&&!_(I=(b=o[m]).__data_index);m--)this.putCellToPool(b),o.splice(m,1);var R=o[o.length-1];if(R)for(I=R.__data_index+1;I<n.length;I++)_(I)&&(b=this.getCellFromPool(),o.push(b),F=n[I],this._callCellSetter(b,F),b.__data_index=I,b.zIndex=I,b.data=F,b.setPosition(t.getPos(I)))},t.prototype.getCellFromPool=function(){var e=this.cellPool,t=null;if(e.length>0&&(t=e.splice(0,1)[0]),!t){var i=this.layouter.getCellSize();if(this._CELL_ID++,(t=new c.default).parent=this.nodeContainer,t.setContentSize(i),t.__cell_id=this._CELL_ID,this.creator(t),this.bDebugLineEnabled){var n=new cc.Node;n.setContentSize(i),n.parent=t;var o=n.addComponent(cc.Graphics);o.clear(),o.lineWidth=2,o.strokeColor=cc.color(255,255,0,255),o.rect(0,0,i.width,i.height),o.stroke();var r=new cc.Node;r.parent=t;var a=r.addComponent(cc.Label);a.string=t.__cell_id.toString(),a.fontSize=14,r.setAnchorPoint(0,1),r.setPosition(-i.width/2+2,i.height/2-2),r.color=cc.color(255,255,0,255)}}return t.active=!0,t},t.prototype.putCellToPool=function(e){e.active=!1,this.cellPool.push(e)},t.prototype._calcPercentPos=function(e,t){var i=this.getContentSize(),n=this.nodeContainer.getContentSize(),o=e/(n.width-i.width),r=t/(n.height-i.height);return r=1-r,o=cc.misc.clampf(o,0,1),r=cc.misc.clampf(r,0,1),cc.v2(o,r)},t.prototype._callCellSetter=function(e,t){if(this.bAsyncSetterEnabled){var i=this.asyncSetterTasks;null==i&&(i=[],this.asyncSetterTasks=i),e.active=!1;for(var n=i.length-1;n>=0;n--)i[n][0]==e&&i.splice(n,1);i.push([e,t])}else this.setter(e,t)},t.prototype.setLayouter=function(e){return this.layouter=e,this},t.prototype.setCreator=function(e){return this.creator=e,this},t.prototype.setSetter=function(e){return this.setter=e,this},t.prototype.setDatas=function(e){return this.datas=e,this.reloadList(),this},t.prototype.getDatas=function(){return this.datas},t.prototype.getActiveCellsByFilter=function(e){for(var t=[],i=0;i<this.cells.length;i++){var n=this.cells[i];e(n)&&t.push(n)}return t},t.prototype.setDebugLineEnabled=function(e){return this.bDebugLineEnabled=e,this},t.prototype.setReuseEnabled=function(e){return this.bReuseEnabled=e,this},t.prototype.setClippingEnabled=function(e){return this.bClippingEnabled=e,this},t.prototype.setElasticEnabled=function(e){this.bElasticEnabled=e;var t=this.getComponent(cc.ScrollView);return t&&(t.elastic=e),this},t.prototype.setTouchScrollEnabled=function(e){return this.bTouchScrollEnabled=e,this._tryApplayTouchScrollEnabled(),this},t.prototype.setScroolInertia=function(e){return this.getComponent(cc.ScrollView).inertia=e,this},t.prototype._tryApplayTouchScrollEnabled=function(){var e=this.getComponent(cc.ScrollView);cc.isValid(e)&&(this.bTouchScrollEnabled?e._registerEvent():e._unregisterEvent())},t.prototype.setAsyncSetterEnabled=function(e){return this.bAsyncSetterEnabled=e,e?null==this.asyncTimer&&(cc.log("start Timer"),this.asyncTimer=new d.default(1/60,-1,this.onAsyncTimerSpan.bind(this)),this.asyncTimer.startAndBindToNode(this)):null!=this.asyncTimer&&this.asyncTimer.stop(),this},t.prototype.setOnContainerMoved=function(e){return this.fOnContainerMoved=e,this},t.prototype.getContainerSize=function(){return this.nodeContainer?this.nodeContainer.getContentSize():cc.Size.ZERO},t.prototype.refreshActiveCells=function(){for(var e=this.cells,t=this.datas,i=0;i<e.length;i++){var n=e[i],o=t[n.__data_index];this._callCellSetter(n,o)}},t.prototype.jumpToHead=function(){this.scrollToHead(0,!1)},t.prototype.jumpToTail=function(){this.scrollToTail(0,!1)},t.prototype.jumpToIndex=function(e,t){this.scrollToIndex(e,t,0,!1)},t.prototype.jumpToData=function(e,t){this.scrollToData(e,t,0,!1)},t.prototype.scrollToHead=function(e,t){void 0===e&&(e=.3),void 0===t&&(t=!0);var i=this.getComponent(cc.ScrollView);i.vertical&&i.horizontal?i.scrollToTopLeft(e,t):i.vertical?i.scrollToTop(e,t):i.horizontal&&i.scrollToLeft(e,t),e<=0&&this.onContainerMoved()},t.prototype.scrollToTail=function(e,t){void 0===e&&(e=.3),void 0===t&&(t=!0);var i=this.getComponent(cc.ScrollView);i.vertical&&i.horizontal?i.scrollToBottomRight(e,t):i.vertical?i.scrollToBottom(e,t):i.horizontal&&i.scrollToRight(e,t),e<=0&&this.onContainerMoved()},t.prototype.scrollToIndex=function(e,t,i,n){void 0===t&&(t=cc.v2()),void 0===i&&(i=.3),void 0===n&&(n=!0);var o=this.getComponent(cc.ScrollView),r=this.layouter.getPos(e),a=this.layouter.getCellSize(),s=r.x,l=-r.y,d=this.layouter.getJumpOffset();s+=-a.width/2+d.x,l+=-a.height/2+d.y,s+=t.x||0,l+=t.y||0;var c=this._calcPercentPos(s,l);o.stopAutoScroll(),o.scrollTo(c,i,n),this.onContainerMoved()},t.prototype.scrollToData=function(e,t,i,n){void 0===i&&(i=.3),void 0===n&&(n=!0);var o=this.datas.indexOf(e);o<0||this.scrollToIndex(o,t,i,n)},t.prototype.stopAutoScroll=function(){this.getComponent(cc.ScrollView).stopAutoScroll()},t.prototype.onContainerMoved=function(){this.updateCellState(),this.fOnContainerMoved&&this.fOnContainerMoved(this,this.cells)},t.prototype.onScrolling=function(e){this.onContainerMoved(e)},s([h],t)}(cc.Node));r.default=p,cc._RF.pop()},{}],ReusePageView:[function(e,t,i){"use strict";cc._RF.push(t,"65fdazMNa9BV6Lsa+An3z73","ReusePageView");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ReuseList"),d=o("Tools"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){var t=e.call(this)||this;return t.fOnCellMoved=null,t.indexWhenBegan=0,t.touchBeganTime=0,d.default.registerTouchHandler(t,t.onTouchHandler.bind(t)),t}return a(t,e),t.prototype.onTouchHandler=function(e){if("began"==e.name){var t=this.calcNearestIndex();this.indexWhenBegan=t,this.touchBeganTime=(new Date).getTime()}else if("ended"==e.name||"cancelled"==e.name){t=this.calcNearestIndex();var i=e.getStartLocation(),n=e.getLocation(),o=((new Date).getTime()-this.touchBeganTime)/100,r=(i.x-n.x)/o,a=this.datas.length-1;t>=0&&(t==this.indexWhenBegan&&(r>=50&&t<a?t+=1:r<=-50&&t>0&&(t-=1)),0==t&&0==this.indexWhenBegan&&r<0||t==a&&this.indexWhenBegan==a&&r>0||this.scrollToIndex(t,null,.5,!0))}},t.prototype.calcNearestIndex=function(){for(var e=this.getListCenterInScrollX(),t=Number.POSITIVE_INFINITY,i=-1,n=0;n<this.cells.length;n++){var o=this.cells[n],r=(o.getContentSize(),o.getPosition().x),a=Math.abs(e-r);a<t&&(t=a,i=o.__data_index)}return i},t.prototype.getCellByDataIndex=function(e){for(var t=0;t<this.cells.length;t++){var i=this.cells[t];if(i.__data_index==e)return i}},t.prototype.getListCenterInScrollX=function(){var e=this.getComponent(cc.ScrollView).getScrollOffset();return this.getContentSize().width/2-e.x},t.prototype.onContainerMoved=function(){if(e.prototype.onContainerMoved.call(this),this.fOnCellMoved)for(var t=this.getListCenterInScrollX(),i=0;i<this.cells.length;i++){var n=this.cells[i],o=n.getContentSize(),r=n.getPosition().x,a=Math.abs(t-r),s=d.default.scaleInRange(a,5,o.width,0,Math.PI/2),l=d.default.scaleInRange(Math.sin(s),0,1,1,0);this.fOnCellMoved(n,l,a)}},t.prototype.setOnCellMovedListener=function(e){this.fOnCellMoved=e},s([u],t)}(l.default));r.default=h,cc._RF.pop()},{}],RichTextEx:[function(e,t){"use strict";cc._RF.push(t,"9cfd5WeRAVOPZnFXA7znRkS","RichTextEx"),cc.RichText.prototype.getPureTextLength=function(){for(var e=0,t=this.node.getChildren(),i=0;i<t.length;i++){var n=t[i];if(cc.isValid(n)){var o=n.getComponent(cc.Label);if(o){var r=o.string;null!=n.__origin_string?e+=n.__origin_string.length:e+=r.length}else e++}}return e};var i=cc.RichText.prototype._updateRichText;cc.RichText.prototype._updateRichText=function(){i.apply(this);for(var e=0,t=this.node.getChildren(),n=0;n<t.length;n++){var o=t[n];if(cc.isValid(o)){o.__char_index=e;var r=o.getComponent(cc.Label);if(r){var a=r.string;a==o.__limit_string&&(a=o.__origin_string,r.string=a,o.__limit_string=null),o.__origin_string=a,e+=a.length}else e++}}null!=this._textLimit&&this.setTextLengthLimit(this._textLimit,!0)},cc.RichText.prototype.setTextLengthLimit=function(e,t){if(e=Math.ceil(e),t||e!=this._textLimit){this._textLimit=e;for(var i=this.node.getChildren(),n=0;n<i.length;n++){var o=i[n];if(cc.isValid(o)){var r=o.__char_index;if(null!=r)if(r>=e)o.active=!1;else{o.active=!0;var a=o.getComponent(cc.Label);if(a&&o.__origin_string){var s=e-r;if(s>=o.__origin_string.length)a.string=o.__origin_string,o.__limit_string=o.__origin_string;else{var l=o.__origin_string.substring(0,s);a.string=l,o.__limit_string=l}}}}}}},cc._RF.pop()},{}],SceneBase:[function(e,t,i){"use strict";cc._RF.push(t,"5b505L37y1I6Zz2EV3Ib1Z3","SceneBase");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ViewBase"),d=o("mgrDirector"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshSize(),this.registerListeners({MSG_VIEW_RESIZE:this.onMsgViewResize})},t.prototype.refreshSize=function(){if(cc.isValid(this)){var e=d.default.size;if(this.setContentSize(e),cc.isValid(this.nodeResource)){this.nodeResource.setContentSize(e);for(var t=this.nodeResource.getComponentsInChildren(cc.Widget),i=0;i<t.length;i++)t[i].updateAlignment()}}},t.prototype.onMsgViewResize=function(){this.refreshSize()},t.prototype.isFullscreenView=function(){return!0},s([c],t)}(l.default);r.default=u,cc._RF.pop()},{}],ScleableButton:[function(e,t,i){"use strict";cc._RF.push(t,"d73bdn/VphF27UW9pqVYirD","ScleableButton");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Tools"),d=cc._decorator,c=d.ccclass,u=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fOnTouchCallback=null,t._bFocused=!1,t.isAction=!0,t}var i;return a(t,e),i=t,t.setSoundPlayHandler=function(e){this.soundPlayHandler=e},t.prototype.onLoad=function(){},t.prototype.onEnable=function(){l.default.registerTouchHandler(this.node,this.onTouchHandler.bind(this))},t.prototype.onDisable=function(){l.default.unregisterTouchHandler(this.node)},t.prototype.registerOnTouchCallback=function(e){this.fOnTouchCallback=e},t.prototype.triggerOnTouchCallback=function(e){this.fOnTouchCallback&&this.fOnTouchCallback(e)},t.prototype._doDownAction=function(e,t){if(0!=this.isAction){var i=this.node;i.stopAllActions(),i.runAction(cc.scaleTo(.1,.85*e,.85*t).easing(cc.easeIn(2)))}},t.prototype._doUpAction=function(e,t){if(0!=this.isAction){var i=this.node;i.stopAllActions(),i.runAction(cc.sequence(cc.scaleTo(.1,1.1*e,1.1*t).easing(cc.easeIn(2)),cc.scaleTo(.075,.95*e,.95*t),cc.scaleTo(.03,1*e,1*t)))}},t.prototype._doCancellAction=function(e,t){if(0!=this.isAction){var i=this.node;i.stopAllActions(),i.runAction(cc.sequence(cc.scaleTo(.15,1.05*e,1.05*t).easing(cc.easeQuadraticActionInOut()),cc.scaleTo(.1,1*e,1*t).easing(cc.easeOut(2))))}},t.prototype.setActionEnable=function(e){this.isAction=e},t.prototype.onTouchHandler=function(e){if("began"==e.name)this.touchDownRect=l.default.calcNodeBoundingBoxToWorld(this.node),this._doDownAction(1,1),this._bFocused=!0,"function"==typeof i.soundPlayHandler&&i.soundPlayHandler();else if("moved"==e.name){var t=this.touchDownRect.contains(e.getLocation());this._bFocused?t||(this._bFocused=!1,this._doCancellAction(1,1)):t&&(this._bFocused=!0,this._doDownAction(1,1))}else this._bFocused&&(this._bFocused=!1,this._doUpAction(1,1));this.triggerOnTouchCallback(e)},t.soundPlayHandler=null,i=s([c],t)}(cc.Component));r.default=u,cc._RF.pop()},{}],Spine:[function(e,t,i){"use strict";cc._RF.push(t,"70a27a8rPxBe6fHsejteGfY","Spine");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("mgrCfg"),l=o("mgrDirector"),d=o("Tools"),c=o("Const"),u=o("Timer"),h=function(e){function t(t,i){var n=e.call(this)||this;return n.bLoaded=!1,n.asyncData=null,n.asyncAttach=[],n.asyncMix=[],n.skinName="normal",n.trackTime=0,n.loadCompletedCallback=i,n.spineData=s.default.get("spine_db",t),n.addComponent(sp.Skeleton),n._loadSkeletonData(),n}return a(t,e),t.prototype._loadSkeletonData=function(){var e=this,t=this.spineData;l.default.loadRes(t.jsonFileName,sp.SkeletonData,function(i,n){if(i)return cc.warn("Spine._loadSkeletonData error:",i),void(e.loadCompletedCallback&&e.loadCompletedCallback(e.spineData.id,e));if(e&&cc.isValid(e)){if(c.default.isCompressedSpineJson&&!n.__customDecompress){for(var o in n.skeletonJson)if("skeleton"!=o&&"bones"!=o){var r=n.skeletonJson[o];n.skeletonJson[o]=JSON.parse(d.default.decompress(r)),n._skeletonJson[o]=n.skeletonJson[o]}n.__customDecompress=!0}var a=e.getComponent(sp.Skeleton);a.skeletonData=n,a.defaultSkin=e.skinName,a.premultipliedAlpha=1==t.bPremultipliedAlpha,a._updateSkeletonData(),e.bLoaded=!0,e.asyncData&&e.play(e.asyncData.movNames,e.asyncData.bLoop);for(var s=0;s<e.asyncAttach.length;s++)r=e.asyncAttach[s],a.setAttachment(r[0],r[1]);for(s=0;s<e.asyncMix.length;s++)r=e.asyncMix[s],a.setMix(r[0],r[1],r[2]);e.trySetEntryTime(e.trackTime),e.loadCompletedCallback&&e.loadCompletedCallback(e.spineData.id,e)}else e.loadCompletedCallback&&e.loadCompletedCallback(e.spineData.id,e)})},t.prototype.reset=function(){this.active=!0,this.angle=0,this.setPosition(0,0),this.scaleX=this.spineData.scaleX,this.scaleY=this.spineData.scaleY,this.color=cc.color(255,255,255),this.opacity=255;var e=this.getComponent(sp.Skeleton);e.timeScale=1,e.setToSetupPose()},t.prototype.play=function(e,t){if(e instanceof Array||(e=[e]),null==t&&(t=!0),e.length<=0)cc.warn("Spine.play movName of found!");else if(this.asyncData={movNames:e,bLoop:t},this.bLoaded&&cc.isValid(this)){this.asyncData=null;for(var i=this.spineData,n=this.getComponent(sp.Skeleton),o=0;o<e.length;o++){var r=e[o];i[r]&&(r=i[r]);var a=!!t&&o==e.length-1;0==o?(n.defaultAnimation=r,n.setAnimation(0,r,a)):n.addAnimation(0,r,a)}}},t.prototype.getCurAnimation=function(){return this.bLoaded?this.getComponent(sp.Skeleton).animation:""},t.prototype.setPause=function(e){this.getComponent(sp.Skeleton).timeScale=e?0:1},t.prototype.setTimeScale=function(e){this.getComponent(sp.Skeleton).timeScale=e},t.prototype.registerEventCallback=function(e){var t=this;if(this.unregisterEventCallback(),e){var i=function(i,n){var o=i.animation,r=o?o.name:"unknown",a="unknown";d.default.forEachMap(t.spineData,function(e,t){if(t==r)return a=e,!0});var s={name:n,movName:r,movKey:a,bLoop:i.loop};e(s)},n=this.getComponent(sp.Skeleton);n.setStartListener(function(e){i(e,"start")}),n.setEndListener(function(e){i(e,"end")}),n.setCompleteListener(function(e){i(e,"cpmplete")}),n.setEventListener(function(e){i(e,"event")})}},t.prototype.unregisterEventCallback=function(){var e=this.getComponent(sp.Skeleton);e.setStartListener(function(){}),e.setEndListener(function(){}),e.setCompleteListener(function(){}),e.setEventListener(function(){})},t.prototype.isLoaded=function(){return this.bLoaded},t.prototype.trySetAttachment=function(e,t){this.bLoaded?this.getComponent(sp.Skeleton).setAttachment(e,t):this.asyncAttach.push([e,t])},t.prototype.trySetMix=function(e,t,i){var n=this.spineData,o=n[e]||e,r=n[t]||t;o&&r&&(this.bLoaded?this.getComponent(sp.Skeleton).setMix(o,r,i):this.asyncMix.push([o,r,i]))},t.prototype.trySetSkin=function(e){this.skinName=e,this.bLoaded&&this.getComponent(sp.Skeleton).setSkin(e)},t.prototype.trySetEntryTime=function(){},t.prototype.waitLoadingFinished=function(e){var t=this;this.getComponent(sp.Skeleton)?e&&e():u.default.callLoop(1/60,function(i){if(t.getComponent(sp.Skeleton))return i.stop(),void(e&&e())},this)},t}(cc.Node);r.default=h,cc._RF.pop()},{}],SpriteBasedClippingNode:[function(e,t,i){"use strict";cc._RF.push(t,"3b2ceHkR4BDN5w0zFQ6Kgvv","SpriteBasedClippingNode");var n,o=i,r=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(o,"__esModule",{value:!0});var a=1048576,s=function(e){function t(t,i){var n=e.call(this)||this;n.bInverted=!1,n.renderWidth=t,n.renderHeight=i,n.setContentSize(t,i);var o=new cc.RenderTexture(t,i);n._sgNode.addChild(o),n.renderTexture=o;var r=new cc.Node;r.parent=n,r.x=a,r.y=i/2,n.nodeRender=r;var s=new cc.Node;return s.parent=n,s.x=a,s.y=i/2,n.nodeStencil=s,n}return r(t,e),t.prototype.setInverted=function(){},t.prototype.getRenderNode=function(){return this.nodeRender},t.prototype.getStencilNode=function(){return this.nodeStencil},t.prototype.flush=function(){var e=this.nodeRender,t=this.nodeStencil,i=this.renderTexture;i.clear(0,0,0,0),i.begin(),e.x=this.renderWidth/2,e._sgNode.visit(),e.x=a;for(var n=this.bInverted?770:771,o=t.getComponentsInChildren(cc.Sprite),r=0;r<o.length;r++){var s=o[r];s.srcBlendFactor=0,s.dstBlendFactor=n}t.x=this.renderWidth/2,t._sgNode.visit(),t.x=a,i.end()},t}(cc.Node);o.default=s,cc._RF.pop()},{}],SpriteEx:[function(e,t,i){"use strict";cc._RF.push(t,"2ebb8PW5WZNko0gGOLpZht+","SpriteEx");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("mgrDirector");cc.Sprite.prototype.loadSpriteFrame=function(e,t){var i=this;r.default.loadRes(e,cc.SpriteFrame,function(e,n){if(e)return cc.warn(e.message),void(t&&t());cc.isValid(i)?(n instanceof cc.Texture2D&&(n=new cc.SpriteFrame(n)),i.spriteFrame=n,t&&t()):t&&t()},this)},cc.Sprite.prototype.loadSpriteFrameAndKeepSize=function(e){var t=this,i=this.node;i?r.default.loadRes(e,cc.SpriteFrame,function(e,n){if(e)cc.warn(e.message);else if(cc.isValid(t)){t.__origin_width||(t.__origin_width=i.width*i.scaleX,t.__origin_height=i.height*i.scaleY);var o=t.__origin_width,r=t.__origin_height;n instanceof cc.Texture2D&&(n=new cc.SpriteFrame(n)),t.spriteFrame=n,i.scale=Math.min(o/i.width,r/i.height)}},this):cc.warn("SpriteEx.loadSpriteFrameAndKeepSize node not found!")},cc.Sprite.prototype.setSpriteFrameAndKeepSize=function(e){var t=this.node;if(t){if(cc.isValid(e)){this.__origin_width||(this.__origin_width=t.width*t.scaleX,this.__origin_height=t.height*t.scaleY);var i=this.__origin_width,n=this.__origin_height;this.spriteFrame=e,t.scale=Math.min(i/t.width,n/t.height)}}else cc.warn("SpriteEx.setSpriteFrameAndKeepSize node not found!")},cc._RF.pop()},{}],SyncMonitor:[function(e,t,i){"use strict";cc._RF.push(t,"387601MzPJFFYIdb/bMl4pd","SyncMonitor");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,r=(o.ccclass,o.property,function(){function e(e){this.allListeners={},this.container=e||this}return e.prototype._getListeners=function(e){var t=this.allListeners[e];return null==t&&(t=[],this.allListeners[e]=t),t},e.prototype._addListener=function(e,t){var i=this._getListeners(e);i.indexOf(t)>=0||i.push(t)},e.prototype._removeListener=function(e,t){var i=this._getListeners(e),n=i.indexOf(t);n>=0&&i.splice(n,1)},e.prototype._triggerListener=function(e,t){for(var i=this._getListeners(e),n=[],o=0;o<i.length;o++)n.push(i[o]);for(o=0;o<n.length;o++)(0,n[o])(t)},e.prototype.registerAsyncValue=function(e,t){this.container[e]=t,this._triggerListener(e,t)},e.prototype.unregisterAsyncValue=function(e){return this.registerAsyncValue(e,null)},e.prototype.getCurrentAsyncValue=function(e){return this.container[e]},e.prototype.monitorAsyncValue=function(e,t,i){var n=this;if(i instanceof Function)if(t instanceof Function){var o,r=t,a=this.container[e];r(a)?i(a):(o=function(t){r(t)&&(n._removeListener(e,o),i(t))},this._addListener(e,o))}else{var s;(a=this.container[e])==t?i(a):(s=function(o){o==t&&(n._removeListener(e,s),i(o))},this._addListener(e,s))}else cc.warn("SyncMonitor.monitorAsyncValue callback not function!")},e.prototype.monitorAsyncValueExists=function(e,t){this.monitorAsyncValue(e,function(e){return null!=e},t)},e.prototype.monitorAsyncValueValid=function(e,t){this.monitorAsyncValue(e,function(e){return cc.isValid(e)},t)},e}());n.default=r,cc._RF.pop()},{}],TaskManager:[function(e,t,i){"use strict";cc._RF.push(t,"cd31cpHtdBFo6r+3wLYGxYW","TaskManager");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e){this.taskList=[],this.curProgress=0,this.totalProgress=0,this.progressUpdateCallback=e}return e.prototype.push=function(e){!(e=ul.clone(e))||e.length<=0||(this.totalProgress+=e.length,this.taskList.push(e))},e.prototype.start=function(e){this.executeFinishCallback=e,this.__goNext()},e.prototype.__goNext=function(){var e=this;if(this.taskList.length>0)for(var t=this.taskList.shift(),i=0,n=0;n<t.length;n++)(0,t[n])(function(){i++,e.curProgress++,e.progressUpdateCallback instanceof Function&&e.progressUpdateCallback(e.curProgress,e.totalProgress),i==t.length&&e.__goNext()});else this.executeFinishCallback instanceof Function&&this.executeFinishCallback()},e}();n.default=o,cc._RF.pop()},{}],TestAnimNode:[function(e,t,i){"use strict";cc._RF.push(t,"f627cotooNCU61V4ITZRD/h","TestAnimNode");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("SceneBase"),d=o("DebugMenu"),c=o("mgrDirector"),u=o("DebugMouseControlNode"),h=o("LayerColor"),p=o("mgrPool"),f=o("ReuseList"),g=o("Tools"),v=o("ReuseLayouterVBox"),_=o("mgrCfg"),y=o("mgrTip"),m=cc._decorator,S=m.ccclass,b=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTitle=null,t.layoutBg=null,t.layoutList=null,t.selectedAnimId=null,t}return a(t,e),t.prototype._getResourceName=function(){return"_devtest/TestAnimNode"},t.prototype._getResourceBindingConfig=function(){return{CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_layoutList:[cc.Layout]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this,t=new d.default([["dispose",function(){e.animNode&&(e.animNode.removeFromParent(),p.default.put(e.animNode),e.animNode=null)}],["playOnce",function(){e.selectedAnimId&&y.default.playAnimNodeOnce(e.selectedAnimId,g.default.random(c.default.width),g.default.random(c.default.height))}]],250,50,4);t.parent=this,t.x=this.width/2+10-310,t.y=this.height/2-60;var i=new f.default;i.parent=this.layoutList.node,i.setLayouter((new v.default).setCellSize(292,50).setGap(4).setPending(4)),i.setCreator(function(t){var i=new h.default(cc.color(0,0,0,63));i.parent=t,i.setContentSize(t.getContentSize()),t.layerBg=i;var n=new cc.Node;n.parent=t;var o=n.addComponent(cc.Label);o.fontSize=18,o.verticalAlign=cc.Label.VerticalAlign.CENTER,t.label=o,g.default.registerTouchHandler(t,function(t){var i=t.target;"ended"==t.name&&e.onSelectAnimId(i.data.id)})}),i.setSetter(function(t,i){cc.color(255,255,255),t.label.node.color=i.id==e.selectedAnimId?cc.color(127,255,127):cc.color(255,255,255),t.label.string=ul.format("%s-%s",i.id,i.name)}),i.setContentSize(this.layoutList.node.getContentSize());var n=[];_.default.forDb("anim_node_db",function(e,t){n.push(t)}),i.setDatas(n),this.reuseList=i;var o=new u.default;o.parent=this,o.setPosition(0,-c.default.height/4),this.nodeRoot=o;var r=new h.default(cc.color(255,0,0,255));r.parent=o,r.zIndex=2,r.setContentSize(4,4)},t.prototype.onSelectAnimId=function(e){this.selectedAnimId=e,this.reuseList.refreshActiveCells();var t=_.default.get("anim_node_db",e);this.labelTitle.string=ul.format("%s-%s",t.id,t.name),this.animNode&&(this.animNode.removeFromParent(),p.default.put(this.animNode),this.animNode=null);var i=p.default.get("animNode",e);i.parent=this.nodeRoot,i.play(),this.animNode=i,i.registerEventCallback(function(e){cc.log("onAnimEvent",e)})},s([S],t)}(l.default));r.default=b,cc._RF.pop()},{}],TestParticle:[function(e,t,i){"use strict";cc._RF.push(t,"17c9drHzM1GMq/2dDe3oY9Y","TestParticle");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("SceneBase"),d=o("DebugMenu"),c=o("ReuseList"),u=o("LayerColor"),h=o("Tools"),p=o("mgrCfg"),f=o("DebugMouseControlNode"),g=o("mgrDirector"),v=o("mgrPool"),_=o("mgrTip"),y=o("Timer"),m=o("ReuseLayouterVGrid"),S=cc._decorator,b=S.ccclass,C=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTitle=null,t.layoutBg=null,t.layoutList=null,t.nodeContent=null,t.nodeFrontBalck=null,t.selectedParticleId=null,t}return a(t,e),t.prototype._getResourceName=function(){return"_devtest/TestParticle"},t.prototype._getResourceBindingConfig=function(){return{CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_layoutList:[cc.Layout],CC_nodeContent:[cc.Node],CC_nodeFrontBalck:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(g.default.size),this.setContentSize(g.default.size),cc.log("mgrDirector.size",g.default.size),y.default.callLater(1,this.buildUi.bind(this))},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this,t=new d.default([["resetZoom",function(){e.nodeUIRoot.setPosition(0,0),e.nodeUIRoot.scale=1}],["dispose",function(){e.particle&&(e.particle.removeFromParent(),v.default.put(e.particle),e.particle=null)}],["playOnce",function(){e.selectedParticleId&&_.default.playParticleOnce(e.selectedParticleId,h.default.random(g.default.width),h.default.random(g.default.height))}],["show/hide b",function(){e.nodeFrontBalck.active=!e.nodeFrontBalck.active}],["\u8bfb\u53d6\u6570\u636e",function(){if(e.selectedParticleId){ul.dump(jsb);var t=p.default.get("particle_db",e.selectedParticleId),i=cc.url.raw(ul.format("resources/%s.plist",t.filename));cc.loader.load(i,function(e,t){cc.log("particle:"),cc.log(i),cc.log(t)})}}]],250,50,4);t.parent=this,t.x=this.width/2-260,t.y=this.height/2-60;var i=new c.default;i.parent=this.nodeContent,i.setLayouter((new m.default).setCellSize(292,292).setGap(4,4).setCols(6).setPending(4)),i.setCreator(function(t){var i=new u.default(cc.color(0,0,0,63));i.parent=t,i.setContentSize(t.getContentSize()),t.layerBg=i;var n=new cc.Node;n.parent=t;var o=n.addComponent(cc.Label);o.fontSize=18,o.verticalAlign=cc.Label.VerticalAlign.CENTER,t.label=o;var r=new cc.Node;r.zIndex=-1,r.setContentSize(300,300),r.parent=t,t.nodeContent=r,h.default.registerTouchHandler(t,function(t){var i=t.target;if("ended"==t.name){if(h.default.pDistance(t.getStartLocation(),t.getLocation())>=20)return;e.onSelectParticleId(i.data.id)}})}),i.setSetter(function(t,i){cc.color(255,255,255),t.label.node.color=i.id==e.selectedParticleId?cc.color(127,255,127):cc.color(255,255,255),t.label.string=ul.format("%s-%s",i.id,i.name);var n=t.nodeContent;if(!n.__pId||n.__pId!=i.id){n.particle&&(n.particle.removeFromParent(),v.default.put(n.particle),n.particle=null);var o=v.default.get("particle",i.id);o.parent=n,n.particle=o,n.__pId=i.id}}),i.setContentSize(g.default.size);var n=[];p.default.forDb("particle_db",function(e,t){n.push(t)}),i.setDatas(n),this.reuseList=i;var o=new f.default;o.parent=this,o.setPosition(0,-g.default.height/4),this.nodeUIRoot=o;var r=new u.default(cc.color(255,0,0,255));r.parent=o,r.zIndex=2,r.setContentSize(4,4)},t.prototype.onSelectParticleId=function(e){this.selectedParticleId=e,this.reuseList.refreshActiveCells();var t=p.default.get("particle_db",e);this.labelTitle.string=ul.format("%s-%s",t.id,t.name),this.particle&&(this.particle.removeFromParent(),v.default.put(this.particle),this.particle=null);var i=v.default.get("particle",e);i.parent=this.nodeUIRoot,i.getComponent(cc.ParticleSystem),t.bPlayOnce||(this.particle=i)},s([b],t)}(l.default));r.default=C,cc._RF.pop()},{}],TestSound:[function(e,t,i){"use strict";cc._RF.push(t,"d733a3pO81OjIfHWXw8G5wW","TestSound");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("SceneBase"),d=o("ReuseList"),c=o("ReuseLayouterVBox"),u=o("LayerColor"),h=o("mgrCfg"),p=o("Tools"),f=o("DebugMenu"),g=o("mgrTip"),v=o("mgrSound"),_=cc._decorator,y=_.ccclass,m=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layoutBg=null,t.layoutList=null,t.sliderEffect=null,t.sliderMusic=null,t}return a(t,e),t.prototype._getResourceName=function(){return"_devtest/TestSound"},t.prototype._getResourceBindingConfig=function(){return{CC_layoutBg:{varname:"layoutBg",vartype:cc.Layout},CC_layoutList:{varname:"layoutList",vartype:cc.Layout},CC_sliderEffect:{varname:"sliderEffect",vartype:cc.Slider},CC_sliderMusic:{varname:"sliderMusic",vartype:cc.Slider}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this,t=new d.default;t.parent=this.layoutList.node,t.setLayouter((new c.default).setCellSize(292,50).setGap(4).setPending(4)),t.setCreator(function(t){var i=new u.default(cc.color(0,0,0,255));i.parent=t,i.setContentSize(t.getContentSize()),t.layerBg=i;var n=new cc.Node;n.parent=t;var o=n.addComponent(cc.Label);o.fontSize=18,o.verticalAlign=cc.Label.VerticalAlign.CENTER,t.label=o,p.default.registerTouchHandler(t,function(i){i.isClick()&&e.onSelectSound(t.data.id)})}),t.setSetter(function(t,i){cc.log("setter",t,i),t.label.string=ul.format("%d[%d]-%s",i.id,i.type,i.name),t.label.node.color=e.selectedSoundId==i.id?cc.color(0,255,0):cc.color(255,255,255)}),t.setContentSize(this.layoutList.node.getContentSize());var i=[];h.default.forDb("sound_db",function(e,t){i.push(t)}),t.setDatas(i);var n=new f.default([["\u64ad\u653e",function(){var t=e.selectedSoundId;t?v.default.play(t):g.default.showMsgTip("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u58f0\u97f3")}],["\u505c\u6b62",function(){v.default.stopAll()}]],250,50,4);n.parent=this,n.x=320+-this.width/2,n.y=this.height/2-60,this.sliderMusic.node.on("slide",this.onSlideSliderMusic.bind(this)),this.sliderEffect.node.on("slide",this.onSlideSliderEffect.bind(this)),this.sliderMusic.progress=v.default.getMusicVolmue(),this.sliderEffect.progress=v.default.getEffectVolume(),this.reuseList=t},t.prototype.onSelectSound=function(e){this.selectedSoundId=e,this.reuseList.refreshActiveCells()},t.prototype.onSlideSliderMusic=function(e){var t=e.target.getComponent(cc.Slider);cc.log("onSlideSliderMusic",t.progress),v.default.setMusicVomue(t.progress)},t.prototype.onSlideSliderEffect=function(e){var t=e.target.getComponent(cc.Slider);cc.log("onSlideSliderEffect",t.progress),v.default.setEffectVolume(t.progress)},s([y],t)}(l.default));r.default=m,cc._RF.pop()},{}],TestSpine:[function(e,t,i){"use strict";cc._RF.push(t,"02675tmB6ZNX64B/UQe880b","TestSpine");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("SceneBase"),c=o("DebugMenu"),u=o("ReuseList"),h=o("ReuseLayouterVBox"),p=o("LayerColor"),f=o("Tools"),g=o("mgrCfg"),v=o("DebugMouseControlNode"),_=o("mgrDirector"),y=o("mgrPool"),m=o("mgrTip"),S=cc._decorator,b=S.ccclass,C=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonRecord=null,t.labelArrRecordTime=null,t.labelProgressPlay=null,t.labelProgressTimeScale=null,t.labelTime=null,t.labelTitle=null,t.layoutBg=null,t.layoutList=null,t.sliderPlay=null,t.sliderTimeScale=null,t.selectedSpineId=null,t.time=0,t.updateTime=0,t.recordTimes=[],t.timeScale=1,t}return a(t,e),t.prototype._getResourceName=function(){return"_devtest/TestSpine"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonRecord:[l.default,"onTouchButtonRecord"],CC_labelArrRecordTime:[cc.Label],CC_labelProgressPlay:[cc.Label],CC_labelProgressTimeScale:[cc.Label],CC_labelTime:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_layoutList:[cc.Layout],CC_sliderPlay:[cc.Slider],CC_sliderTimeScale:[cc.Slider]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.time=f.default.time(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onSystemKeyDown,this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.updateTime+=t)},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onSystemKeyDown,this),e.prototype.onDestroy.call(this),this.spine&&(this.spine.removeFromParent(),y.default.put(this.spine),this.spine=null)},t.prototype.buildUi=function(){var e=this,t=new c.default([["dispose",function(){e.spine&&(e.spine.removeFromParent(),y.default.put(e.spine),e.spine=null)}],["mov_1",function(){e.spine&&(e.spine.play("mov_1",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["mov_2",function(){e.spine&&(e.spine.play("mov_2",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["mov_3",function(){e.spine&&(e.spine.play("mov_3",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["mov_4",function(){e.spine&&(e.spine.play("mov_4",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["mov_5",function(){e.spine&&(e.spine.play("mov_5",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["mov_6",function(){e.spine&&(e.spine.play("mov_6",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["mov_7",function(){e.spine&&(e.spine.play("mov_7",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["mov_8",function(){e.spine&&(e.spine.play("mov_8",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["mov_9",function(){e.spine&&(e.spine.play("mov_9",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["mov_10",function(){e.spine&&(e.spine.play("mov_10",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["mov_11",function(){e.spine&&(e.spine.play("mov_11",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["mov_12",function(){e.spine&&(e.spine.play("mov_12",e.spine.spineData._bDebugLoop),e.clickRightItem())}],["playOnce",function(){e.selectedSpineId&&m.default.playSpineOnce(e.selectedSpineId,f.default.random(_.default.width),f.default.random(_.default.height))}]],250,50,4);t.parent=this,t.x=this.width/2-260,t.y=this.height/2-60;var i=new u.default;i.parent=this.layoutList.node,i.setLayouter((new h.default).setCellSize(292,50).setGap(4).setPending(4)),i.setCreator(function(t){var i=new p.default(cc.color(0,0,0,63));i.parent=t,i.setContentSize(t.getContentSize()),t.layerBg=i;var n=new cc.Node;n.parent=t;var o=n.addComponent(cc.Label);o.fontSize=18,o.verticalAlign=cc.Label.VerticalAlign.CENTER,t.label=o,f.default.registerTouchHandler(t,function(t){var i=t.target;"ended"==t.name&&e.onSelectSpineId(i.data.id)})}),i.setSetter(function(t,i){cc.color(255,255,255),t.label.node.color=i.id==e.selectedSpineId?cc.color(127,255,127):cc.color(255,255,255),t.label.string=ul.format("%s-%s",i.id,i.name)}),i.setContentSize(this.layoutList.node.getContentSize());var n=[];g.default.forDb("spine_db",function(e,t){n.push(t)}),i.setDatas(n),this.reuseList=i;var o=new v.default;o.parent=this,o.setPosition(0,-_.default.height/4),this.nodeRoot=o;var r=new p.default(cc.color(255,0,0,255));r.parent=o,r.zIndex=2,r.setContentSize(4,4),this.sliderPlay.node.on("slide",this.onSliderPlay.bind(this)),this.sliderTimeScale.node.on("slide",this.onSliderTimeScale.bind(this))},t.prototype.onSelectSpineId=function(e){var t=this;this.selectedSpineId=e,this.reuseList.refreshActiveCells();var i=g.default.get("spine_db",e);this.labelTitle.string=ul.format("%s-%s",i.id,i.name),this.spine&&(this.spine.removeFromParent(),y.default.put(this.spine),this.spine=null);var n=y.default.get("spine",e);n.parent=this.nodeRoot,n.setTimeScale(this.timeScale),this.spine=n,n.registerEventCallback(function(e){cc.log("onSpineEvent",e),"cpmplete"==e.name&&(cc.log("used time ",f.default.time()-t.time),t.time=f.default.time(),t.updateTime=0)})},t.prototype.clickRightItem=function(){this.time=f.default.time(),this.updateTime=0,this.recordTimes.length=0,this.refreshRecordTime(),this.labelTime.string=this.spine.getComponent(sp.Skeleton)._state.getCurrent(0).animation.duration},t.prototype.refreshRecordTime=function(){for(var e="",t=0;t<this.recordTimes.length;t++)e+=this.recordTimes[t].toFixed(2)+"\n";this.labelArrRecordTime.string=e},t.prototype.onSystemKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.space:var t=this.spine.getComponent(sp.Skeleton)._state.getCurrent(0).animation.duration;this.recordTimes.push(this.sliderPlay.progress*t),this.refreshRecordTime()}},t.prototype.onTouchButtonRecord=function(e){if(e.isClick()){var t=this.spine.getComponent(sp.Skeleton)._state.getCurrent(0).animation.duration;this.recordTimes.push(this.sliderPlay.progress*t),this.refreshRecordTime()}},t.prototype.onSliderPlay=function(){var e=this.sliderPlay.progress;if(this.labelProgressPlay.string="palyProgress: "+e.toFixed(2),this.spine){var t=this.spine.getComponent(sp.Skeleton).getCurrent(0);if(t){var i=t.animation;t.trackTime=i.duration*e}}},t.prototype.onSliderTimeScale=function(){var e=this.sliderTimeScale.progress;this.labelProgressTimeScale.string="timescale: "+e.toFixed(2),this.timeScale=e,this.spine&&this.spine.setTimeScale(this.timeScale)},s([b],t)}(d.default));r.default=C,cc._RF.pop()},{}],Timer:[function(e,t,i){"use strict";cc._RF.push(t,"f3111ePoeBAwIQ8CGVyY16w","Timer");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t,i){this._repeatCount=-1,this._span=1,this._callback=null,this._intervalId=null,this._count=0,this._span=e,this._repeatCount=t,this._callback=i}return e.callLater=function(t,i,n){var o=new e(t,1,i);return n?o.startAndBindToNode(n):o.start(),o},e.callLoop=function(t,i,n){var o=new e(t,-1,i);if(1==n){var r=n;o.start(r)}else n instanceof cc.Node?o.startAndBindToNode(n):o.start();return o},e.prototype._onSpan=function(){if(this._count++,this._callback)try{this._callback(this)}catch(e){cc.warn("\u8b66\u544a] Timer._onSpan callback has error",e)}this._repeatCount>=0&&this._count>=this._repeatCount&&this.stop()},e.prototype.isRunning=function(){return null!=this._intervalId},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){return this._span},enumerable:!1,configurable:!0}),e.prototype.startAndBindToNode=function(e){var t=this,i=new cc.Node,n=i.addComponent(cc.Component);return 0==n._isOnLoadCalled?n.onLoad=function(){t.start(!0)}:this.start(!0),n.onDestroy=function(){t.stop()},i.parent=e,this._bindingNode=i,this},e.prototype.start=function(e){return void 0===e&&(e=!1),this.stop(),this._callback?(!e&&this._repeatCount<0&&(cc.warn("\u8b66\u544a] Timer.start, this timer will never stop!"),cc.warn("\u8b66\u544a]     please use startAndBindToNode"),cc.warn("\u8b66\u544a]     or your can stop timer in callback. use e:stop()")),this._count=0,this._intervalId=setInterval(this._onSpan.bind(this),1e3*this.span),this):(cc.warn("\u8b66\u544a] Timer.start callback\u672a\u8bbe\u7f6e\uff01"),this)},e.prototype.stop=function(){return null!=this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this},e}();n.default=o,cc._RF.pop()},{}],Tools:[function(e,t,i){"use strict";cc._RF.push(t,"ddcc2p3lQhKBYTlLASMxtxW","Tools");var n=e,o=i,r=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=n("Const"),s=n("pako"),l=n("Timer"),d=cc._decorator,c=d.ccclass,u=(d.property,function(){function e(){}var t;return t=e,e.time=function(){return null!=this._debugTime?this._debugTime:(new Date).getTime()/1e3},e._setDebugTime=function(e){this._debugTime=e},e.isOneDay=function(e,t){var i=new Date(1e3*e),n=new Date(1e3*t);return i.getFullYear()==n.getFullYear()&&i.getMonth()==n.getMonth()&&i.getDate()==n.getDate()},e.isZero=function(e){return!e&&!isNaN(e)&&"number"==typeof e&&0==e},e.isOneMonth=function(e,t){var i=new Date(1e3*e),n=new Date(1e3*t);return i.getFullYear()==n.getFullYear()&&i.getMonth()==n.getMonth()},e.isOneWeek=function(e,t){var i=new Date(1e3*e),n=i.getDay();0==n&&(n=7);var o=e-(86400*(n-1)+3600*i.getHours()+60*i.getMinutes()+i.getSeconds());return t>=o&&t<=o+604800},e.distanceSQ=function(e,t,i,n){i||(i=0),n||(n=0);var o=i-e,r=n-t;return o*o+r*r},e.pDistance=function(e,i){return t.distance(e.x,e.y,i.x,i.y)},e.pDistanceSQ=function(e,i){return t.distanceSQ(e.x,e.y,i.x,i.y)},e.registerTouchHandler=function(e,t,i){void 0===i&&(i=!1);var n=e;n&&t&&(n.on(cc.Node.EventType.TOUCH_START,function(e){var i=e.getID()||0;return e.name="began",e.stopPropagation(),n.__touch_id=i,t(e),!0}),n.on(cc.Node.EventType.TOUCH_MOVE,function(e){e.getID(),e.name="moved",t(e)}),n.on(cc.Node.EventType.TOUCH_END,function(e){e.getID(),e.name="ended",n.__touch_id=null,t(e)}),n.on(cc.Node.EventType.TOUCH_CANCEL,function(e){e.getID(),e.name="cancelled",n.__touch_id=null,t(e)}),n._delaySort instanceof Function&&n._delaySort())},e.unregisterTouchHandler=function(e){e.off(cc.Node.EventType.TOUCH_START,null),e.off(cc.Node.EventType.TOUCH_MOVE,null),e.off(cc.Node.EventType.TOUCH_END,null),e.off(cc.Node.EventType.TOUCH_CANCEL,null)},e.getObjSize=function(e){if(!e)return 0;if(Array.isArray(e))return e.length;var i=0;return t.forEachMap(e,function(){i++}),i},e.getTableCount=function(e){if(!e)return 0;if(e instanceof Array)return e.length;var t=0;for(var i in e)t++;return t},e.random=function(e,t){return null==e&&null==t?Math.random():null==t?Math.floor(Math.random()*e+1):Math.floor(Math.random()*(t-e+1)+e)},e.scaleInRange=function(e,t,i,n,o){return t<i?(e<t&&(e=t),e>i&&(e=i)):(e<i&&(e=i),e>t&&(e=t)),(e-t)/(i-t)*(o-n)+n},e.isWorldLocaInNode=function(e,i,n){var o=t.calcNodeBoundingBoxToWorld(e);return null!=n&&(o.x-=n,o.y-=n,o.width+=2*n,o.height+=2*n),o.contains(i)},e.isWorldLocaInNodeAR=function(e,t,i){var n=e.getContentSize(),o=cc.rect(0,0,n.width,n.height);return null!=i&&(o.x-=i,o.y-=i,o.width+=2*i,o.height+=2*i),o.contains(t)},e.calcRecursiveScale=function(e){var t=1;do{t*=e.scaleX,e=e.parent}while(null!=e);return t},e.calcWheelTarget=function(e,t){for(var i=0,n=0;n<e.length;n++){var o=e[n],r=parseInt(o[t]);if(isNaN(r))return cc.warn(ul.format("Tools.calcWheelTarget weight field not found! key=[%s]",t)),null;i+=r}var a=this.random(i);for(n=0;n<e.length;n++){if(o=e[n],a<=(r=parseInt(o[t])))return o;a-=r}return null},e.sortArrayByField=function(e,t){t="string"==typeof t?[t]:t;var i=[];for(var n in t)if((s=t[n])&&""!=s)if("-"===s.substring(0,1)){var o=s.substring(1,s.length);o&&""!=o&&i.push([o,!0])}else i.push([s,!1]);for(var r=[],a=0;a<e.length;a++){var s=e[a];r.push(s)}return r.sort(function(e,t){var n=0;for(var o in i){var r=i[o],a=r[0],s=r[1],l=e[a],d=t[a];if(null!=l&&0!=(n=s?d-l:l-d))return n}return n}),r},e.bubbleSort=function(e,t){for(var i=e.length,n=0;n<i;n++)for(var o=0;o<i-1-n;o++)if(t(e[o],e[o+1])>0){var r=e[o+1];e[o+1]=e[o],e[o]=r}return e},e.forEachMap=function(e,t){if(e)for(var i=Object.keys(e),n=0;n<i.length;n++){var o=i[n],r=e[o];if(null!=r&&t(o,r))break}},e._origin_sortTiles=function(e){for(var t=function(e,t){return t.right>e.x&&t.top>e.y},i=[],n=e.length,o=0;o<n;o++)for(var r=e[o],a=i.indexOf(r),s=0,l=e.length;s<l;s++)if(o!=s){var d=e[s];if(t(r,d)){var c=i.indexOf(d);a<0&&(i.push(r),a=i.length-1),c<0&&(i.push(d),c=i.length-1),c<a&&(i.splice(a,1),i.splice(c,0,r),a=c)}}for(o=0;o<e.length;o++)r=e[o],i.indexOf(r)<0&&i.push(r);return i},e.sortTiles=function(e){for(var t=function(e,t){return t.right>e.x&&t.top>e.y},i=0;i<e.length;i++)e[i]._id=i;var n=[],o={},r=e.length;for(i=0;i<r;i++)for(var a=o[(u=e[i])._id],s=0;s<r;s++)if(i!=s){var l=e[s];if(t(u,l)){var d=o[l._id];if(null==a&&(n.push(u),a=n.length-1,o[u._id]=a),null==d&&(n.push(l),d=n.length-1,o[l._id]=d),d<a){for(var c=d;c<a;c++)o[n[c]._id]++;n.splice(a,1),n.splice(d,0,u),a=d,o[u._id]=a}}}for(i=0;i<e.length;i++){var u;null==o[(u=e[i])._id]&&n.push(u)}return n},e.convertRectToNodeSpace=function(e,t){if(!t)return null;var i=cc.v2(t.xMin,t.yMin),n=cc.v2(t.xMax,t.yMax);i=e.convertToNodeSpaceAR(i),n=e.convertToNodeSpaceAR(n);var o=Math.min(i.x,n.x),r=Math.min(i.y,n.y),a=Math.max(i.x,n.x)-o,s=Math.max(i.y,n.y)-r;return new cc.Rect(o,r,a,s)},e.convertRectToWorldSpace=function(e,t){if(!t)return null;var i=cc.v2(t.xMin,t.yMin),n=cc.v2(t.xMax,t.yMax);i=e.convertToWorldSpaceAR(i),n=e.convertToWorldSpaceAR(n);var o=Math.min(i.x,n.x),r=Math.min(i.y,n.y),a=Math.max(i.x,n.x)-o,s=Math.max(i.y,n.y)-r;return new cc.Rect(o,r,a,s)},e.getStrByteLen=function(e){if(!e)return 0;for(var t=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);t+=n>=0&&n<=128?1:2}return t},e.calcNodeBoundingBoxToWorld=function(e,i){var n=e.getBoundingBox();return i&&(n.x-=i,n.y-=i,n.width+=2*i,n.height+=2*i),t.convertRectToWorldSpace(e.parent,n)},e.formatTime=function(e,t){var i=Math.floor(e/3600),n=Math.floor(e/60)%60,o=Math.floor(e)%60;return t.match("%h")&&(t=t.replace("%h",i.toString())),t.match("%H")&&(t=t.replace("%H",ul.format("%02d",i))),t.match("%m")&&(t=t.replace("%m",n.toString())),t.match("%M")&&(t=t.replace("%M",ul.format("%02d",n))),t.match("%s")&&(t=t.replace("%s",o.toString())),t.match("%S")&&(t=t.replace("%S",ul.format("%02d",o))),t},e.formatFullTime=function(e,t){var i=new Date(e),n=i.getFullYear(),o=i.getMonth()+1,r=i.getDate(),a=i.getHours(),s=i.getMinutes(),l=i.getSeconds();return t.match("%y")&&(t=t.replace("%y",n.toString())),t.match("%m")&&(t=t.replace("%m",o.toString())),t.match("%M")&&(t=t.replace("%M",ul.format("%02d",o))),t.match("%d")&&(t=t.replace("%d",r.toString())),t.match("%D")&&(t=t.replace("%D",ul.format("%02d",r))),t.match("%h")&&(t=t.replace("%h",a.toString())),t.match("%H")&&(t=t.replace("%H",ul.format("%02d",a))),t.match("%tm")&&(t=t.replace("%tm",s.toString())),t.match("%TM")&&(t=t.replace("%TM",ul.format("%02d",s))),t.match("%s")&&(t=t.replace("%s",l.toString())),t.match("%S")&&(t=t.replace("%S",ul.format("%02d",l))),t},e.setCascadeColor=function(e,t){e.color=t;for(var i=0;i<e.children.length;i++){var n=e.children[i];this.setCascadeColor(n,t)}},e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)})},e.parseLogicExpressionArray=function(e){for(var t=!0,i=!1,n=null,o=0;o<e.length;o++){var r=e[o];switch(Array.isArray(r)&&(r=this.parseLogicExpressionArray(r)),typeof r){case"string":switch(r){case"not":i=!i;break;case"and":n&&cc.warn(ul.format("Tools.parseLogicExpressionArray exp='%s' symbol overload index=[%d], origin_symbol=[%s], new_symbol=[%s]",JSON.stringify(e),o,n,r)),n="and";break;case"or":n&&cc.warn(ul.format("Tools.parseLogicExpressionArray exp='%s' symbol overload index=[%d], origin_symbol=[%s], new_symbol=[%s]",JSON.stringify(e),o,n,r)),n="or";break;default:cc.warn(ul.format("Tools.parseLogicExpressionArray exp='%s' unknown symbol index=[%d], symbol=[%s]",JSON.stringify(e),o,r))}break;case"boolean":i&&(r=!r,i=!1),t=n&&"and"!=n?t||r:t&&r}}return t},e.recursionChildren=function(e,t){if(cc.isValid(e)&&t)for(var i=0;i<e.children.length;i++){var n=e.children[i];cc.isValid(n)&&(t(n),this.recursionChildren(n,t))}},e.formatNumToStr=function(e){return e.toString(),e>=1e9?Math.floor(e/10/1e3/1e3)/100+"km":e>=1e6?Math.floor(e/10/1e3)/100+"m":e>=1e3?Math.floor(e/10)/100+"k":(Math.floor(10*e)/10).toString()},e.formatNumToStrWanYi=function(e){return e.toString(),e>=1e12?(e/1e3/1e3/1e3/1e3).toFixed(2).replace(/.00$/,"")+"\u5146":e>=1e8?(e/1e3/1e3/100).toFixed(2).replace(/.00$/,"")+"\u4ebf":e>=1e4?(e/1e3/10).toFixed(2).replace(/.00$/,"")+"\u4e07":(Math.floor(10*e)/10).toString()},e.formatNumFish2048=function(e){var t=e.toString();return e>=1e20?t=Math.floor(e/1e8/1e3/1e3/1e3/1e3*1e8)+"\u5146":e>=1e16?t=Math.floor(e/1e8/1e3/1e3/100*1e8)+"\u4ebf":e>=1e12&&(t=Math.floor(e/1e8/1e3/10*1e8)+"\u4e07"),t},e.getNodeWorldPosAR=function(e){return e.parent.convertToWorldSpaceAR(e.getPosition())},e.getIntersectPointLineWithRect=function(e,t,i){var n=null,o=null;(i.contains(e)||i.contains(t))&&(n=e.clone());var r=cc.v2(i.xMin,i.yMin),a=cc.v2(i.xMin,i.yMax),s=cc.v2(i.xMax,i.yMin),l=cc.v2(i.xMax,i.yMax);return this.isIntersectLineWithLine(e,t,r,a)&&(o=this.getIntersectPointLineWithLine(e,t,r,a)),this.isIntersectLineWithLine(e,t,a,l)&&(o=this.getIntersectPointLineWithLine(e,t,a,l)),this.isIntersectLineWithLine(e,t,l,s)&&(o=this.getIntersectPointLineWithLine(e,t,l,s)),this.isIntersectLineWithLine(e,t,s,r)&&(o=this.getIntersectPointLineWithLine(e,t,s,r)),o&&(n=o),n},e.isIntersectLineWithLine=function(e,t,i,n){return this.quickReject(e,t,i,n)&&this.straddle(e,t,i,n)},e.quickReject=function(e,t,i,n){var o=Math.max(e.x,t.x),r=Math.max(e.y,t.y),a=Math.min(e.x,t.x),s=Math.min(e.y,t.y),l=Math.max(i.x,n.x),d=Math.max(i.y,n.y),c=Math.min(i.x,n.x),u=Math.min(i.y,n.y);return!(o<c||r<u||l<a||d<s)},e.straddle=function(e,t,i,n){var o=e.x,r=t.x,a=e.y,s=t.y,l=i.x,d=n.x,c=i.y,u=n.y;return!(((o-l)*(u-c)-(a-c)*(d-l))*((r-l)*(u-c)-(s-c)*(d-l))>0||((l-o)*(s-a)-(c-a)*(r-o))*((d-o)*(s-a)-(u-a)*(r-o))>0)},e.getIntersectPointLineWithLine=function(e,t,i,n){var o=e.x,r=t.x,a=e.y,s=t.y,l=i.x,d=n.x,c=i.y,u=n.y,h=(s-a)*(d-l)-(o-r)*(c-u);if(0==h)return null;var p=((r-o)*(d-l)*(c-a)+(s-a)*(d-l)*o-(u-c)*(r-o)*l)/h,f=-((s-a)*(u-c)*(l-o)+(r-o)*(u-c)*a-(d-l)*(s-a)*c)/h;return(p-o)*(p-r)<=0&&(f-a)*(f-s)<=0&&(p-l)*(p-d)<=0&&(f-c)*(f-u)<=0?cc.v2(p,f):null},e.getRotateByVector=function(e){var t=0,i=e.x,n=e.y;return 0!=i?t=-1*Math.atan(n/i)*a.default.RADIAN2EULAR:n>0?t=-90:n<0&&(t=90),t},e.degreesToVector=function(e){var t=cc.misc.degreesToRadians(e);return cc.v2(1,0).rotate(-t)},e.vectorToDegress=function(e){var t=cc.v2(1,0),i=e.signAngle(t);return cc.misc.radiansToDegrees(i)},e.distance=function(e,t,i,n){i||(i=0),n||(n=0);var o=i-e,r=n-t;return Math.sqrt(o*o+r*r)},e.angle=function(e,t,i,n){return Math.atan2(n-t,i-e)*(180/Math.PI)},e.randomArr=function(e){return e&&0!=e.length?e[this.random(0,e.length-1)]:null},e.randomGotArrayDatas=function(e,i){if(!e||e.length<=0||!i||i<0)return[];var n=[];i=Math.min(i,e.length);for(var o=[],r=0;r<e.length;r++)o.push(r);for(var a=0;a<i;){var s=t.random(0,o.length-1),l=e[o[s]];n.push(l),o.splice(s,1),a+=1}return n},e.RoundTableProbability=function(e,i){var n=0;t.forEachMap(e,function(e,t){n+=t[i]});var o=0,r=Math.random()*n,a=null;return t.forEachMap(e,function(t,n){if(r>o&&r<=o+n[i])return a=e[t],!0;o+=n[i]}),a},e.compress=function(e){return s.gzip(e,{to:"string"})},e.decompress=function(e){return s.ungzip(e,{to:"string"})},e.compressArr=function(e){return s.deflate(e)},e.decompressArr=function(e){try{return s.inflate(e)}catch(e){console.log("Tools.decompressArr",e)}},e.formatStrHToV=function(e){for(var t="",i=0;i<e.length;i++){var n=e[i];i<e.length-1?t+=n+"\n":t+=n}return t},e.booleanArrayToFlagsNumber=function(e){for(var t=0,i=Math.max(e.length,32),n=0;n<i;n++)t|=(e[n]?1:0)<<n;return t},e.getNativeFullpathByFileName=function(e){var t=cc.url.raw("resources/"+e),i=/(library.+)/.exec(t);return t.replace(i[1],"assets/resources/"+e)},e.setNodesOutScene=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.__original=i.position,i.setPosition(1e4,1e4)}},e.setNodesOriginalPos=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.setPosition(i.__original||cc.v2(0,0))}},e.clamp=function(e,t,i){return e<t&&(e=t),e>i&&(e=i),e},e.clampf=function(e,t,i){return e<t?t:e>i?i:e},e.prefixInteger=function(e,t){return(Array(t).join("0")+e).slice(-t)},e.shuffle=function(e){for(var t,i,n=e.length-1;n>0;n--)i=this.random(0,n),t=e[n],e[n]=e[i],e[i]=t},e.getNodeXByAnchorX=function(e,t){return(t-e.anchorX)*e.width},e.getNodeYByAnchorY=function(e,t){return(t-e.anchorY)*e.height},e.getAngle=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var o=e-i,r=t-n,a=r/Math.abs(Math.sqrt(Math.pow(o,2)+Math.pow(r,2))),s=Math.acos(a),l=180/(Math.PI/s);return o<0&&(l=-l),l},e.extractOne=function(e){if(null==e||0==e.length)return null;var t=this.random(0,e.length-1),i=e[t];return e.splice(t,1),i},e.labelChangeAnim=function(e,t,i,n){void 0===i&&(i=.5);var o=parseInt(e.string),r=(t-o)/30,a=i/30,s=0;e.changeTimer&&(e.changeTimer.stop(),e.changeTimer=null),e.changeTimer=l.default.callLoop(a,function(){(s+=1)>=30?(e.string=t.toString(),e.changeTimer.stop(),e.changeTimer=null,n&&n()):(o+=r,e.string=Math.floor(o).toString())},!0)},e._debugTime=null,e.calcPointOnArc=function(e,t,i,n){var o=n*Math.PI/180;return[Math.cos(o)*i+e,Math.sin(o)*i+t]},e.angleDelta=function(e,t){for(;e<0||t<0;)e+=360,t+=360;var i=e-t,n=e+360-t;return Math.abs(i)<Math.abs(n)?i:n},t=r([c],e)}());o.default=u,cc._RF.pop()},{}],UITools:[function(e,t,i){"use strict";cc._RF.push(t,"956d0zj0n9Dh7ynSln+GxDG","UITools");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Const"),a=n("mgrDirector"),s=function(){function e(){}return e.widgetLeftMC=function(e){this.widgetLeftTopMC(e,!1,!0)},e.widgetRightMC=function(e){this.widgetRightTopMC(e,!1,!0)},e.widgetTopMC=function(e){this.widgetLeftTopMC(e,!0,!1)},e.widgetBottomMC=function(e){this.widgetLeftBottomMC(e,!0,!1)},e.widgetLeftTopMC=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),e._originPos_||(e._originPos_=e.getPosition());var n=(a.default.width-r.default.RESOLUTION_RANGE.minWidth)/2,o=(Math.min(a.default.height,1152)-r.default.RESOLUTION_RANGE.minHeight)/2;!t&&(e.x=e._originPos_.x-n),!i&&(e.y=e._originPos_.y+o)},e.widgetRightTopMC=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),e._originPos_||(e._originPos_=e.getPosition());var n=(a.default.width-r.default.RESOLUTION_RANGE.minWidth)/2,o=(Math.min(a.default.height,1152)-r.default.RESOLUTION_RANGE.minHeight)/2;!t&&(e.x=e._originPos_.x+n),!i&&(e.y=e._originPos_.y+o)},e.widgetLeftBottomMC=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),e._originPos_||(e._originPos_=e.getPosition());var n=(a.default.width-r.default.RESOLUTION_RANGE.minWidth)/2,o=(Math.min(a.default.height,1152)-r.default.RESOLUTION_RANGE.minHeight)/2;!t&&(e.x=e._originPos_.x-n),!i&&(e.y=e._originPos_.y-o)},e.widgetRightBottomMC=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),e._originPos_||(e._originPos_=e.getPosition());var n=(a.default.width-r.default.RESOLUTION_RANGE.minWidth)/2,o=(Math.min(a.default.height,1152)-r.default.RESOLUTION_RANGE.minHeight)/2;!t&&(e.x=e._originPos_.x+n),!i&&(e.y=e._originPos_.y-o)},e}();o.default=s,cc._RF.pop()},{}],ULAdapterCreator2x:[function(e,t,i){"use strict";cc._RF.push(t,"3dfa8F+4VdBB57PjmFAt1Fv","ULAdapterCreator2x");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULRect"),l=o("ULGameExecutor"),d=o("ULModuleBase"),c=o("ULSystemExecutor"),u=o("ULTouchExecutor"),h=window.cc,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moduleName="ULAdapterCreator2x",t.lastNode=null,t.onTouchCallback=null,t}return a(t,e),t.prototype.onInitModule=function(){l.default.registerLifeItem(this),c.default.registerItem(this),u.default.registerItem(this)},t.prototype.monitorGameShow=function(e){h.game.on(h.game.EVENT_SHOW,function(){e()})},t.prototype.monitorGameHide=function(e){h.game.on(h.game.EVENT_HIDE,function(){e()})},t.prototype.getSystemInfoSync=function(){var e=""+h.sys.platform,t=""+h.sys.browserType,i=""+h.sys.osVersion,n=""+h.sys.os;return{channelName:this.moduleName,appName:e,platformVersionMessage:e+"("+t+")",osVersionMessage:n+"("+i+")",screenWidth:h.view.getVisibleSize().width,screenHeight:h.view.getVisibleSize().height,language:c.ULSystemLanguage.zhcn}},t.prototype.monitorTouchStart=function(e){var t=this;this.onTouchCallback=e;var i=function(){t.lastNode&&t.lastNode.isValid&&(t.lastNode.off(h.Node.EventType.TOUCH_START,t.onTouchStart.bind(t),t,!0),t.lastNode=null);var e=h.director.getScene();e&&(t.lastNode=e.children[0],t.lastNode&&t.lastNode.on(h.Node.EventType.TOUCH_START,t.onTouchStart.bind(t),t,!0))};i(),h.director.on(h.Director.EVENT_AFTER_SCENE_LAUNCH,function(){i()})},t.prototype.onTouchStart=function(e){e.preventSwallow=!1;var t=e.getLocation(),i=h.view.getVisibleSize();this.onTouchCallback(new s.ULPoint({x:t.x,y:i.height-t.y}),new s.ULSize({width:i.width,height:i.height}))},t}(d.default);r.default=p,cc._RF.pop()},{}],ULAdapterCreator3x:[function(e,t,i){"use strict";cc._RF.push(t,"95ddfqQoq9Jv7KZNcyIL+Fg","ULAdapterCreator3x");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULLog"),l=o("ULGameExecutor"),d=o("ULModuleBase"),c=o("ULSystemExecutor"),u=o("ULTouchExecutor"),h=o("ULRect"),p=window.cc,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moduleName="ULAdapterCreator3x",t.lastNode=null,t.onTouchCallback=null,t}return a(t,e),t.prototype.onInitModule=function(){l.default.registerLifeItem(this),c.default.registerItem(this),u.default.registerItem(this),this.registerHeadImgLoader()},t.prototype.monitorGameShow=function(e){p.game.on(p.game.EVENT_SHOW,function(){e()})},t.prototype.monitorGameHide=function(e){p.game.on(p.game.EVENT_HIDE,function(){e()})},t.prototype.getSystemInfoSync=function(){var e=""+p.sys.platform,t=""+p.sys.browserType,i=""+p.sys.osVersion,n=""+p.sys.os;return{channelName:this.moduleName,appName:e,platformVersionMessage:e+"("+t+")",osVersionMessage:n+"("+i+")",screenWidth:p.screen.windowSize.width,screenHeight:p.screen.windowSize.height,language:c.ULSystemLanguage.zhcn}},t.prototype.monitorTouchStart=function(e){var t=this;this.onTouchCallback=e;var i=function(){t.lastNode&&t.lastNode.isValid&&(t.lastNode.off(p.Node.EventType.TOUCH_START,t.onTouchStart.bind(t),t,!0),t.lastNode=null);var e=p.director.getScene();e&&(t.lastNode=e.children[0],t.lastNode&&t.lastNode.on(p.Node.EventType.TOUCH_START,t.onTouchStart.bind(t),t,!0))};i(),p.director.on(p.Director.EVENT_AFTER_SCENE_LAUNCH,function(){i()})},t.prototype.onTouchStart=function(e){e.preventSwallow=!1;var t=e.getUILocation(),i=p.view.getVisibleSize();this.onTouchCallback(new h.ULPoint({x:t.x,y:i.height-t.y}),new h.ULSize({width:i.width,height:i.height}))},t.prototype.registerHeadImgLoader=function(){p.assetManager.downloader.register(".head",function(e,t,i){i(null,e)}),p.assetManager.parser.register(".head",this.downloadDomImage),p.assetManager.factory.register(".head",function(e,t,i,n){var o=null,r=null;try{o=new p.Texture2D;var a=new p.ImageAsset;a.reset(t),o.image=a}catch(e){r=e}n&&n(r,o)})},t.prototype.downloadDomImage=function(e,t,i){s.default.log("ULAdapteCreator3x.downloadDomImage url:",e);var n=new Image;function o(){s.default.log("ULAdapteCreator3x.downloadDomImage loadCallback"),n.removeEventListener("load",o),n.removeEventListener("error",r),i&&i(null,n)}function r(){s.default.log("ULAdapteCreator3x.downloadDomImage errorCallback"),n.removeEventListener("load",o),n.removeEventListener("error",r),i&&i(new Error(e))}return"file:"!==window.location.protocol&&(n.crossOrigin="anonymous"),n.addEventListener("load",o),n.addEventListener("error",r),n.src=e,n},t}(d.default);r.default=f,cc._RF.pop()},{}],ULAdapterLaya:[function(e,t,i){"use strict";cc._RF.push(t,"22a55ZgEo5NlI3oh/o66n0L","ULAdapterLaya");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULGameExecutor"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moduleName="ULAdapterLaya",t}return a(t,e),t.prototype.onInitModule=function(){s.default.registerLifeItem(this)},t.prototype.monitorGameShow=function(e){window.addEventListener("blur",e)},t.prototype.monitorGameHide=function(e){window.addEventListener("focus",e)},t}(o("ULModuleBase").default);r.default=l,cc._RF.pop()},{}],ULAdapter:[function(e,t,i){"use strict";cc._RF.push(t,"a292fa1w7VEr4wEfDClbKNC","ULAdapter");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULPanelWeb"),a=n("ULPanelHeadline"),s=n("ULPanelWeixin"),l=n("ULKitTool"),d=n("ULPanelCreator2x"),c=n("ULPanelCreator3x"),u=n("ULPanelLaya"),h=function(){function e(){this._pannel=null}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pannel",{get:function(){return this._pannel||(window.cc?l.default.isCreator3xEngine()?this._pannel=new c.default:this._pannel=new d.default:window.Laya?this._pannel=new u.default:window.tt?this._pannel=new a.default:window.wx?this._pannel=new s.default:this._pannel=new r.default),this._pannel},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pannel",{get:function(){return e.instance.pannel},enumerable:!1,configurable:!0}),e.createCanvas=function(){return e.instance.pannel.createCanvas()},e}();o.default=h,cc._RF.pop()},{}],ULAdvAD:[function(e,t,i){"use strict";cc._RF.push(t,"00f1bQOCVNE0YuYWt9sSXQZ","ULAdvAD");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULAdvEnum"),a=function(){function e(e){this.dele=e}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this.dele.isReady},enumerable:!1,configurable:!0}),e.prototype.show=function(e,t){void 0===t&&(t=r.ULAdRewardType.show),this.dele&&this.dele.show(t,e)},e.prototype.close=function(e){void 0===e&&(e=!1),this.dele&&this.dele.close(e)},e.prototype.click=function(){this.dele&&this.dele.click()},e.prototype.destory=function(){this.dele&&this.dele.destroy(),this.dele=null},e.prototype.onShow=function(e){this.dele&&(this.dele.cycle.onShow=e)},e.prototype.onClick=function(e){this.dele&&(this.dele.cycle.onClick=e)},e.prototype.onError=function(e){this.dele&&(this.dele.cycle.onError=e)},e.prototype.onClose=function(e){this.dele&&(this.dele.cycle.onClose=e)},e.prototype.onReward=function(e){this.dele&&(this.dele.cycle.onReward=e)},e.prototype.onMessage=function(e){this.dele&&(this.dele.cycle.onMessage=e)},e.prototype.bindSupDele=function(e){this.dele&&this.dele.bindSupDele(e)},e}();o.default=a,cc._RF.pop()},{}],ULAdvBase:[function(e,t,i){"use strict";cc._RF.push(t,"394f0e5MplF+I+w6FqefQv/","ULAdvBase");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(e){function t(){var t=e.call(this)||this;t.bindAdvObjectCache={};var i=t;return t.onInitWithAction({onLoad:function(){i.onCycleLoad()}}),t}return a(t,e),t.prototype.onCycleLoad=function(){for(var e in this.bindAdvObjectCache)this.bindAdvObjectCache[e]},t}(o("ULModuleBase").default);r.default=s,cc._RF.pop()},{}],ULAdvDelegate:[function(e,t,i){"use strict";cc._RF.push(t,"771d3TrvpNOyYSS7uIlzQ44","ULAdvDelegate");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULError"),a=n("ULAdvEnum"),s=function(){function e(e){this.rewardType=a.ULAdRewardType.show,this.isUserClose=!1,this._errList=[],this._isShowed=!1,this._isClicked=!1,this._isSkiped=!1,this._isClosed=!1,this._isfail=!1,this._isReward=!1,this.callback=e,this.cycle={}}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this.callback.isReady(this)},enumerable:!1,configurable:!0}),e.prototype.show=function(e,t){this.rewardType=e;try{this.callback.show(this,t)}catch(e){this.addError(new r.default("0",e.stack)),this.isfail=!0}},e.prototype.close=function(e){void 0===e&&(e=!1),this.isUserClose=e,this.callback&&this.callback.close?this.callback.close(this):this.childDele&&this.childDele.close(e)},e.prototype.click=function(){this.callback&&this.callback.click?this.callback.click(this):this.childDele&&this.childDele.click()},e.prototype.destroy=function(){this.cycle=null,this.callback=null,this.supDele=null,this.childDele&&this.childDele.destroy(),this.childDele=null},Object.defineProperty(e.prototype,"isShowed",{get:function(){return this._isShowed},enumerable:!1,configurable:!0}),e.prototype.setIsShowed=function(e,t){!this._isShowed&&e&&(this._isShowed=!0,this.cycle&&this.cycle.onShow&&this.cycle.onShow(t),this.sendMessage("onShow:"+t.toString(),!1),this.supDele&&this.supDele.setIsShowed(!0,t),this.childDele||this.rewardType!=a.ULAdRewardType.show||this.setIsReward(!0,1))},Object.defineProperty(e.prototype,"isClicked",{get:function(){return this._isClicked},set:function(e){!this._isClicked&&e&&(this._isClicked=!0,this.cycle&&this.cycle.onClick&&this.cycle.onClick(),this.sendMessage("onClick",!1),this.supDele&&(this.supDele.isClicked=!0),this.childDele||this.rewardType!=a.ULAdRewardType.click||this.setIsReward(!0,1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSkiped",{get:function(){return this._isSkiped},set:function(e){!this._isSkiped&&e&&(this._isSkiped=!0,this.sendMessage("onSkiped",!1),this.supDele&&(this.supDele.isSkiped=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClosed",{get:function(){return this._isClosed},enumerable:!1,configurable:!0}),e.prototype.setIsClosed=function(e,t){void 0===t&&(t=1),!this._isClosed&&e&&(this._isClosed=!0,this.childDele||this.rewardType!=a.ULAdRewardType.CloseNotSkip||this.isSkiped||this.setIsReward(!0,t),this.cycle&&this.cycle.onClose&&this.cycle.onClose(this.isUserClose),this.sendMessage("onClose",!1),this.supDele&&this.supDele.setIsClosed(!0,t))},Object.defineProperty(e.prototype,"isfail",{get:function(){return this._isfail},set:function(e){!this._isfail&&e&&(this._isfail=!0,this.sendMessage("onError",!1),this.cycle&&this.cycle.onError?this.cycle.onError(this.errStack):this.supDele&&(this.supDele.addError(null,this.errStack),this.supDele.isfail=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReward",{get:function(){return this._isReward},enumerable:!1,configurable:!0}),e.prototype.setIsReward=function(e,t){void 0===t&&(t=1),!this._isReward&&e&&(this._isReward=!0,this.cycle&&this.cycle.onReward&&this.cycle.onReward(t),this.sendMessage("onReward count:"+t,!1),this.supDele&&this.supDele.setIsReward(!0,t))},e.prototype.sendMessage=function(e,t){void 0===t&&(t=!0),this.cycle.onMessage&&this.cycle.onMessage(e),t&&this.supDele&&this.supDele.sendMessage(e)},Object.defineProperty(e.prototype,"errStack",{get:function(){return[].concat(this._errList)},enumerable:!1,configurable:!0}),e.prototype.addError=function(e,t){void 0===t&&(t=null),e&&(this.sendMessage("addError:\n"+e.toString()),this._errList.push(e)),t&&t.length>0&&(this._errList=this._errList.concat(t))},e.prototype.unBindSupDele=function(){this.supDele=null},e.prototype.bindSubDele=function(e){this.childDele&&this.childDele.unBindSupDele(),this.childDele=e},e.prototype.bindSupDele=function(e){this.supDele=e,this.supDele.bindSubDele(this)},e}();o.default=s,cc._RF.pop()},{}],ULAdvDemoBanner:[function(e,t,i){"use strict";cc._RF.push(t,"ca5f74It/lMvLM0dOdEmBgZ","ULAdvDemoBanner");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULWindow"),l=o("ULKitPop"),d=o("ULAdvEnum"),c=o("ULAdvObjectBase"),u=o("ULTools"),h=o("ULScreen"),p=o("ULRect"),f=o("ULButton"),g=o("ULColor"),v=o("ULEventEnum"),_=o("ULFont"),y=o("ULLabel"),m=o("ULViewEnum"),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.advType=d.ULAdType.banner,t.advertiser="ULAdvDemo",t.support_loadType=d.ULAdLoadType.ordinary,t}return a(t,e),t.prototype.initAdv=function(e){e(!0)},t.prototype.playAdv=function(e){var t=this,i=e.style,n=Math.min(h.default.width,h.default.height),o=Math.min(Math.max(.6,i.width),1)*n,r=o/16*6,a=(h.default.width-o)*i.x,d=(h.default.height-r)*i.y,c=new s.default(p.default.Init(a,d,o,r));c.windowLevel=l.ULWindowPriority.AdWindow,c.makeKeyAndVisible();var u=new f.default(p.default.Init(0,0,o,r));u.setTitleColorForState(g.default.White,v.ULControlState.Normal),u.setTitleForState("\u8fd9\u662f\u4e00\u4e2abanner\u5e7f\u544a",v.ULControlState.Normal),u.setBackgroundColorForState(g.default.RGB(200,200,200),v.ULControlState.Normal),u.setBackgroundColorForState(g.default.RGB(200,200,200),v.ULControlState.Highlighted),u.font=_.default.boldSystem(22),c.addSubView(u);var S=new f.default(p.default.Init(o-50,0,50,50));S.font=_.default.boldSystem(18),S.setTitleForState("X",v.ULControlState.Normal),S.setTitleColorForState(g.default.White,v.ULControlState.Normal),S.setBackgroundColorForState(g.default.Red,v.ULControlState.Normal),u.addSubView(S);var b=new y.default(p.default.Init(o-150,r-50,150,50));b.backgroundColor=g.default.Red,b.textColor=g.default.White,b.font=_.default.boldSystem(18),b.textAlignment=m.ULTextAligment.Center,b.text="\u67e5\u770b\u5e7f\u544a",u.addSubView(b),u.registerControlEvent(v.ULControlEvents.TouchUpInside,function(){t.ul_didClicked()}),S.registerControlEvent(v.ULControlEvents.TouchUpInside,function(){t.closeAdv(),t.ul_didClosed()}),this._bannderAd=c,this.ul_showSuccess()},t.prototype.loadAdv=function(){var e=this,t=u.default.random(100,1e3);e.ul_startLoad(),setTimeout(function(){e.ul_loadSuccess()},t)},t.prototype.closeAdv=function(){this._bannderAd&&this._bannderAd.removeFromSuperView(),this._bannderAd=null},t.moduleName="ULAdvDemoBanner",t}(c.default);r.default=S,cc._RF.pop()},{}],ULAdvDemoInter:[function(e,t,i){"use strict";cc._RF.push(t,"8b97a9X1cdOIJk8EoW6oZ4X","ULAdvDemoInter");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULColor"),l=o("ULEventEnum"),d=o("ULFont"),c=o("ULRect"),u=o("ULScreen"),h=o("ULButton"),p=o("ULLabel"),f=o("ULWindow"),g=o("ULTools"),v=o("ULAdvEnum"),_=o("ULAdvObjectBase"),y=o("ULKitPop"),m=o("ULViewEnum"),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.advType=v.ULAdType.inter,t.advertiser="ULAdvDemo",t.support_loadType=v.ULAdLoadType.ordinary,t}return a(t,e),t.prototype.initAdv=function(e){e(!0)},t.prototype.playAdv=function(){var e=this,t=Math.min(u.default.width,u.default.height),i=Math.min(.8*t,300),n=i,o=.5*(u.default.width-i),r=.5*(u.default.height-n),a=new f.default(u.default.bounds);a.allowHit=!0,a.windowLevel=y.ULWindowPriority.AdWindow,a.backgroundColor=s.default.RGBA(0,0,0,.6),a.makeKeyAndVisible();var g=new h.default(c.default.Init(o,r,i,n));g.setTitleColorForState(s.default.White,l.ULControlState.Normal),g.setTitleForState("\u8fd9\u662f\u4e00\u4e2a\u63d2\u5c4f\u5e7f\u544a",l.ULControlState.Normal),g.setBackgroundColorForState(s.default.RGB(200,200,200),l.ULControlState.Normal),g.setBackgroundColorForState(s.default.RGB(200,200,200),l.ULControlState.Highlighted),g.font=d.default.boldSystem(22),a.addSubView(g);var v=new h.default(c.default.Init(i-50,0,50,50));v.font=d.default.boldSystem(18),v.setTitleForState("X",l.ULControlState.Normal),v.setTitleColorForState(s.default.White,l.ULControlState.Normal),v.setBackgroundColorForState(s.default.Red,l.ULControlState.Normal),g.addSubView(v);var _=new p.default(c.default.Init(i-150,n-50,150,50));_.backgroundColor=s.default.Red,_.textColor=s.default.White,_.font=d.default.boldSystem(18),_.textAlignment=m.ULTextAligment.Center,_.text="\u67e5\u770b\u5e7f\u544a",g.addSubView(_),g.registerControlEvent(l.ULControlEvents.TouchUpInside,function(){e.ul_didClicked()}),v.registerControlEvent(l.ULControlEvents.TouchUpInside,function(){e._interAd&&e._interAd.removeFromSuperView(),e._interAd=null,e.ul_didClosed()}),this._interAd=a,this.ul_showSuccess()},t.prototype.loadAdv=function(){var e=this,t=g.default.random(100,1e3);e.ul_startLoad(),setTimeout(function(){e.ul_loadSuccess()},t)},t.moduleName="ULAdvDemoInter",t}(_.default);r.default=S,cc._RF.pop()},{}],ULAdvDemoVideo:[function(e,t,i){"use strict";cc._RF.push(t,"facddXfEJVOGYJmz74hr4pY","ULAdvDemoVideo");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULEventEnum"),l=o("ULColor"),d=o("ULFont"),c=o("ULRect"),u=o("ULScreen"),h=o("ULButton"),p=o("ULLabel"),f=o("ULViewEnum"),g=o("ULWindow"),v=o("ULKitPop"),_=o("ULTools"),y=o("ULAdvEnum"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.advType=y.ULAdType.video,t.advertiser="ULAdvDemo",t.support_loadType=y.ULAdLoadType.ordinary,t}return a(t,e),t.prototype.initAdv=function(e){e(!0)},t.prototype.playAdv=function(){var e=this,t=10,i=new g.default(u.default.bounds);i.allowHit=!0,i.windowLevel=v.ULWindowPriority.AdWindow,i.makeKeyAndVisible();var n=new h.default(u.default.bounds);n.setTitleColorForState(l.default.White,s.ULControlState.Normal),n.setTitleForState("\u8fd9\u662f\u4e00\u4e2a\u89c6\u9891\u5e7f\u544a",s.ULControlState.Normal),n.setBackgroundColorForState(l.default.RGB(200,200,200),s.ULControlState.Normal),n.setBackgroundColorForState(l.default.RGB(200,200,200),s.ULControlState.Highlighted),n.font=d.default.boldSystem(22),i.addSubView(n);var o=new h.default(c.default.Init(u.default.width-140,50,100,40));o.font=d.default.boldSystem(18),o.setTitleForState("\u8df3\u8fc7",s.ULControlState.Normal),o.setTitleColorForState(l.default.White,s.ULControlState.Normal),o.setBackgroundColorForState(l.default.Red,s.ULControlState.Normal),o.hidden=!0,n.addSubView(o);var r=new p.default(c.default.Init(0,0,150,50));r.center=new c.ULPoint({x:n.center.x,y:n.center.y-150}),r.backgroundColor=l.default.Clear,r.textColor=l.default.Red,r.font=d.default.boldSystem(50),r.textAlignment=f.ULTextAligment.Center,r.text=t.toString(),n.addSubView(r),n.registerControlEvent(s.ULControlEvents.TouchUpInside,function(){e.ul_didClicked()}),o.registerControlEvent(s.ULControlEvents.TouchUpInside,function(){e._videoAd&&e._videoAd.removeFromSuperView(),e._videoAd=null,t>0&&e.ul_didSkip(),e.ul_didClosed()}),this._videoAd=i,this.ul_showSuccess();var a=0;a=setInterval(function(){t=Math.max(0,t-1),r.text=""+t,t<=5&&(o.hidden=!1,0==t&&(o.setTitleForState("\u5b8c\u6210",s.ULControlState.Normal),clearInterval(a)))},1e3)},t.prototype.loadAdv=function(){var e=this,t=_.default.random(100,1e3);e.ul_startLoad(),setTimeout(function(){e.ul_loadSuccess()},t)},t.moduleName="ULAdvDemoVideo",t}(o("ULAdvObjectBase").default);r.default=m,cc._RF.pop()},{}],ULAdvDemo:[function(e,t,i){"use strict";cc._RF.push(t,"32811LaovJHH5DWa951Lx92","ULAdvDemo");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULAdvBase"),l=o("ULAdvDemoInter"),d=o("ULAdvDemoVideo"),c=o("ULAdvDemoBanner"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moduleName="ULAdvDemo",t}return a(t,e),t.prototype.getAllAdvObjectBase=function(){return[d.default,l.default,c.default]},t}(s.default);r.default=u,cc._RF.pop()},{}],ULAdvEnum:[function(e,t,i){"use strict";cc._RF.push(t,"5b974VcWr9GkKtzaYjETr/f","ULAdvEnum");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULAdStatisType=o.ULAdLoadType=o.ULAdDateExp=o.ULAdCdExp=o.ULAdCountExp=o.ULAdRewardType=o.ULAdType=void 0;var r,a=n("ULLog"),s=n("ULConfigExecutor");(function(e){e.all="all",e.splash="splash",e.inter="inter",e.video="video",e.interVideo="interVideo",e.banner="banner",e.custom="custom",e.embed="embed",e.url="url",e.paster="paster",e.icon="icon",e.grid="grid",e.block="block",e.feed="feed",e.crossPromotion="crossPromotion",e.share="share"})(r=o.ULAdType||(o.ULAdType={})),function(e){e[e.show=0]="show",e[e.click=1]="click",e[e.CloseNotSkip=2]="CloseNotSkip"}(o.ULAdRewardType||(o.ULAdRewardType={})),function(e){e.rc="rc",e.sc="sc",e.cc="cc",e.fc="fc",e.mcc="mcc"}(o.ULAdCountExp||(o.ULAdCountExp={})),function(e){e[e.rcd=0]="rcd",e[e.scd=1]="scd",e[e.ecd=2]="ecd"}(o.ULAdCdExp||(o.ULAdCdExp={})),function(e){e.t="t",e.d="d",e.w="w",e.m="m",e.y="y"}(o.ULAdDateExp||(o.ULAdDateExp={})),function(e){e[e.ordinary=1]="ordinary",e[e.preload=2]="preload"}(o.ULAdLoadType||(o.ULAdLoadType={})),function(e){e.totalAdvRequest="totalAdvRequest",e.branchAdvRequest="branchAdvRequest",e.success="success",e.failed="failed",e.clicked="clicked",e.playStart="playStart",e.playCompletion="playCompletion",e.loadAdvRequest="loadAdvRequest",e.loadAdvSuccess="loadAdvSuccess",e.loadAdvFailed="loadAdvFailed",e.close="close",e.hide="hide"}(o.ULAdStatisType||(o.ULAdStatisType={}));var l=function(){function e(){}return e.getLaunchCd=function(e){switch(e){case r.inter:return s.default.getNumberValue("n_sdk_adv_inter_launch_cd",0);case r.video:return s.default.getNumberValue("n_sdk_adv_video_launch_cd",0);case r.interVideo:return s.default.getNumberValue("n_sdk_adv_interVideo_launch_cd",0);case r.banner:return s.default.getNumberValue("n_sdk_adv_banner_launch_cd",0);case r.custom:return s.default.getNumberValue("n_sdk_adv_custom_launch_cd",0);case r.embed:return s.default.getNumberValue("n_sdk_adv_embed_launch_cd",0);case r.url:return s.default.getNumberValue("n_sdk_adv_url_launch_cd",0);case r.paster:return s.default.getNumberValue("n_sdk_adv_paster_launch_cd",0);case r.icon:return s.default.getNumberValue("n_sdk_adv_icon_launch_cd",0)}return 0},e.getBannerDefaultStyle=function(e){var t=s.default.getObjectValue("o_sdk_adv_banner_tags_style_setting")[e]||e["*"]||{},i={x:isNaN(Number(t.x))?.5:Number(t.x),y:isNaN(Number(t.y))?1:Number(t.y),width:isNaN(Number(t.width))?1:Number(t.width),height:isNaN(Number(t.height))?1:Number(t.height)};return a.default.log("ULAdvEnum.getBannerDefaultStyle advId:"+e+" style:"+i),i},e.getCustomDefaultStyle=function(e){var t=s.default.getObjectValue("o_sdk_adv_custom_tags_style_setting")[e]||e["*"]||{},i={x:isNaN(Number(t.x))?.5:Number(t.x),y:isNaN(Number(t.y))?.5:Number(t.y),width:isNaN(Number(t.width))?1:Number(t.width),height:isNaN(Number(t.height))?1:Number(t.height)};return a.default.log("ULAdvEnum.getCustomDefaultStyle advId:"+e+" style:"+i),i},e}();o.default=l,cc._RF.pop()},{}],ULAdvExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"b358b0zD1ZOI7pV3yOedVZP","ULAdvExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULBaseExecutor"),l=o("ULConfigExecutor"),d=o("ULGoldfingerExecutor"),c=o("ULStorageExecutor"),u=function(e){function t(){var t=e.call(this)||this;return t.initExecutor(),t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.sdkSwitch=function(){return 1==l.default.getNumberValue("n_sdk_adv_mode",1)},Object.defineProperty(t.prototype,"selectedModule",{get:function(){return c.default.getStorage("ulsdk_adv_selectedModule")},set:function(e){c.default.setStorage("ulsdk_adv_selectedModule",e||"")},enumerable:!1,configurable:!0}),t.prototype.initExecutor=function(){},t.prototype.addListener=function(){d.default.registerItem(this)},t.prototype.getSubModuleGoldfingerView=function(e,t){void 0===e&&(e=void 0);var i=this.getItem({moduleName:e,type:s.ULBaseExecutionEnum.ChainFlashback});return i&&i.subAdvModuleGoldfingerStackView?i.subAdvModuleGoldfingerStackView(t):null},t.prototype.goldfingerView=function(e,i){var n=this;return new d.ULGoldfingerStackView("\u5e7f\u544a\u7cfb\u7edf",e,function(o){var r=[{name:"\u5e7f\u544a\u5f00\u5173:",value:t.isSupport}],a=n.getAllRegisterModuleName(s.ULBaseExecutionEnum.ChainFlashback);a=["\u9ed8\u8ba4"].concat(a);for(var l=null,d=function(t){n.selectedModule=0==t?"":a[t],l&&o.removeStackView(l),(l=n.getSubModuleGoldfingerView(0==t?void 0:a[t],e))&&o.addStackView(l),i()},c=0,u=n.selectedModule,h=0;h<a.length;h++)if(a[h]==u){c=h;break}var p=[{name:"\u5e7f\u544a\u6a21\u5f0f:",value:a,selectedNum:c,width:160,handle:d}];o.addStackForSwitchs(r),o.addStackMenuViews(p),d(c)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.createAdvAD=function(e){return t.instance.executeSync({moduleName:t.instance.selectedModule,type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,handle:function(t){return t.createAdvAD(e)}})},t}(s.default);r.default=u,cc._RF.pop()},{}],ULAdvExpManager:[function(e,t,i){"use strict";cc._RF.push(t,"f4a16yIN9tHk5rr1UsX1QQg","ULAdvExpManager");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULEvalExp"),a=n("ULLog"),s=n("ULTools"),l=n("ULStorageExecutor"),d=n("ULSystemExecutor"),c=n("ULAdvEnum"),u=function(){function e(){this.thisTimeString="",this.availableExpKeyArray=[],this.updateValue=10,this.thisTimeString=s.default.formatDate(new Date,"yyyyMMdd")}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expValueCache",{get:function(){if(!this._expValueCache){var e=this._getRecordKey(),t=l.default.getStorage(e)||"{}",i=void 0;try{i=JSON.parse(t)}catch(e){i={}}for(var n in i)this.getKeyTimeString(n)!=i[n].exp_time&&delete i[n];this._expValueCache=i}return this._expValueCache},enumerable:!1,configurable:!0}),e.prototype.getKeyTimeString=function(e){var t=this.thisTimeString;switch(e.substr(0,1)){case"d":t=s.default.formatDate(new Date,"yyyyMMdd");break;case"w":var i=new Date,n=i.getDay()||7,o=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1-n);t=s.default.formatDate(o,"yyyyMMdd");break;case"m":t=s.default.formatDate(new Date,"yyyyMM");break;case"y":t=s.default.formatDate(new Date,"yyyy")}return t},e.prototype._getRecordKey=function(){return s.default.format("ULAdvExpManager_record_%d",d.default.gameId)},e.prototype.saveStoreValue=function(){var e=this._getRecordKey();l.default.setStorage(e,JSON.stringify(this.expValueCache))},e.prototype.calcExpResults=function(e){var t=this;if(!e)return!0;a.default.log("ULAdvExpManager calcExp:",e);var i=e.replace(/\s/g,"");return i=i.split(".").join("^"),r.default.evalExpResults(i,function(e){var i=e.split("^").join(".");return t.getCalcExpValue(i)})},e.prototype.getCalcExpValue=function(e){return s.default.isString(e)&&-1!=this.availableExpKeyArray.indexOf(e)?this.getStoreValue(e):e},e.prototype.getStoreValue=function(e){var t=this.expValueCache[e];if(!t)return 0;var i=this.getKeyTimeString(e);return i!=t.exp_time&&(t.exp_time=i,t.exp_value=0),t.exp_value},e.prototype.setStoreValue=function(e){if("string"==typeof e&&-1!=this.availableExpKeyArray.indexOf(e)){var t=this.getKeyTimeString(e),i=this.expValueCache[e];i?t!=i.exp_time?(i.exp_time=t,i.exp_value=1):i.exp_value+=1:(i={exp_name:e,exp_time:t,exp_value:1},this.expValueCache[e]=i),this.updateValue--,this.updateValue<=0&&(this.updateValue=10,this.saveStoreValue())}},Object.defineProperty(e.prototype,"systemExpKeyArray",{get:function(){var e=[];for(var t in c.ULAdDateExp)for(var i in c.ULAdType)for(var n in c.ULAdCountExp)e.push(t+"atype"+i+"."+n);return e},enumerable:!1,configurable:!0}),e.updateExpKeys=function(t){var i=e.instance.systemExpKeyArray;for(var n in c.ULAdDateExp)for(var o in t)for(var r in c.ULAdCountExp)i.push(n+"tid"+o+"."+r);e.instance.availableExpKeyArray=i},e.calcExp=function(t){return e.instance.calcExpResults(t)},e.updateExpValue=function(t){e.instance.setStoreValue(t)},e.updateExp=function(t,i,n){for(var o in c.ULAdDateExp){var r=o+"tid"+t+"."+n,a=o+"tid"+i+"."+n;e.updateExpValue(r),e.updateExpValue(a)}},e._instance=null,e}();o.default=u,cc._RF.pop()},{}],ULAdvHeadLineBannerItem:[function(e,t,i){"use strict";cc._RF.push(t,"63532gdsZ5IArP1h8rRS9/G","ULAdvHeadLineBannerItem");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),n("ULError"),n("ULLog"),window.tt;var r=function(){function e(){this.arg=null,this.bannerAd=null,this.realWidth=0,this.realHeight=0,this.onResizeCallback=null}return e.prototype.init=function(e){this.arg=e},e.prototype.load=function(){},e.prototype.show=function(){},e.prototype.close=function(){},e.prototype.destroy=function(){},e}();o.default=r,cc._RF.pop()},{}],ULAdvHeadLineBanner:[function(e,t,i){"use strict";cc._RF.push(t,"6ce0824ZCFH06zmmYmw09G+","ULAdvHeadLineBanner");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULAdvEnum"),l=o("ULAdvObjectBase"),d=(o("ULLog"),o("ULRefreshAdManager"),o("ULAdvHeadLineBannerItem"),window.tt,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.advType=s.ULAdType.banner,t.advertiser="ULAdvHeadLine",t.support_loadType=s.ULAdLoadType.ordinary,t.bannerAd=null,t}return a(t,e),t.prototype.initAdv=function(){},t.prototype.playAdv=function(){},t.prototype.loadAdv=function(){},t.prototype.closeAdv=function(){},t.prototype.isReady=function(){return!0},t.moduleName="ULAdvHeadLineBanner",t}(l.default));r.default=d,cc._RF.pop()},{}],ULAdvHeadLineInter:[function(e,t,i){"use strict";cc._RF.push(t,"160e8dLgMpKJ63B9OOhOdIB","ULAdvHeadLineInter");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULAdvEnum"),l=o("ULAdvObjectBase"),d=(o("ULError"),o("ULLog")),c=(window.tt,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.advType=s.ULAdType.inter,t.advertiser="ULAdvHeadLine",t.support_loadType=s.ULAdLoadType.ordinary,t.interAd=null,t}return a(t,e),t.prototype.initAdv=function(e){d.default.log("ULAdvHeadLineInter.initAdv"),e(!0)},t.prototype.playAdv=function(){},t.prototype.loadAdv=function(){},t.moduleName="ULAdvHeadLineInter",t}(l.default));r.default=c,cc._RF.pop()},{}],ULAdvHeadLineVideo:[function(e,t,i){"use strict";cc._RF.push(t,"62e2dWUHjRCgoldpIZASrfM","ULAdvHeadLineVideo");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULAdvEnum"),l=o("ULAdvObjectBase"),d=(o("ULError"),o("ULLog"),window.tt,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.advType=s.ULAdType.video,t.advertiser="ULAdvHeadLine",t.support_loadType=s.ULAdLoadType.preload|s.ULAdLoadType.ordinary,t.videoAd=null,t}return a(t,e),t.prototype.initAdv=function(e){e(!0)},t.prototype.playAdv=function(e){console.error("\u5e7f\u544a\u64ad\u653e\u6210\u529f"),e.onReward()},t.prototype.loadAdv=function(){},t.moduleName="ULAdvHeadLineVideo",t}(l.default));r.default=d,cc._RF.pop()},{}],ULAdvHeadLine:[function(e,t,i){"use strict";cc._RF.push(t,"b1698VZG9lONYrtw7q6J6Rk","ULAdvHeadLine");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULAdvBase"),l=o("ULAdvHeadLineBanner"),d=o("ULAdvHeadLineInter"),c=o("ULAdvHeadLineVideo"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moduleName="ULAdvHeadLine",t}return a(t,e),t.prototype.getAllAdvObjectBase=function(){return[l.default,d.default,c.default]},t}(s.default);r.default=u,cc._RF.pop()},{}],ULAdvItem:[function(e,t,i){"use strict";cc._RF.push(t,"fe5fdcOuWZBs62Y9ao/9PEZ","ULAdvItem");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ULAdvObjectBase:[function(e,t,i){"use strict";cc._RF.push(t,"6fc77C4uF1KcbmX6BGvka+A","ULAdvObjectBase");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULError"),a=n("ULLog"),s=n("ULTools"),l=n("ULConfigExecutor"),d=n("ULGameExecutor"),c=n("ULStatisExecutor"),u=n("ULAdvAD"),h=n("ULAdvDelegate"),p=n("ULAdvEnum"),f=function(){function e(e,t){this._isLoaded=!1,this._isloading=!1,this._loadWillShow=!1,this._loadError=null,this._showAdvItem=null,this._displayTime=0,this._dele=null,this._adBaseConfigSuccess=!1,this._configSuccess=!1,this.arg=e,this._loadType=t}return Object.defineProperty(e.prototype,"loadType",{get:function(){return(this.support_loadType&p.ULAdLoadType.ordinary)>0&&(this.support_loadType&p.ULAdLoadType.preload)>0?(this._loadType&p.ULAdLoadType.preload)>0?this._loadType=p.ULAdLoadType.preload:this._loadType=p.ULAdLoadType.ordinary:this._loadType=this.support_loadType,this._loadType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return!!this._dele},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adBaseConfigSuccess",{get:function(){return this._adBaseConfigSuccess},set:function(e){var t=this;if(!this._adBaseConfigSuccess&&e){this._adBaseConfigSuccess=!0;try{this.initAdv&&this.initAdv(function(e){t.configSuccess=e})}catch(e){a.default.error(this.moduleName+" initAdv err:"+e.stack),d.default.reportErrMsg(this.moduleName+" initAdv",e.stack)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"configSuccess",{get:function(){return this._configSuccess},set:function(e){!this._configSuccess&&e&&(this._configSuccess=!0,this.setIsLoaded(!1,!1))},enumerable:!1,configurable:!0}),e.prototype.setIsLoaded=function(e,t){this._isLoaded=e,this._isLoaded||(this.loadType==p.ULAdLoadType.preload?this.perload(t):this._isLoaded=!0)},e.prototype.perload=function(e){if(!this._isLoaded&&!this._isloading)if(this._isloading=!0,e){var t=this;setTimeout(function(){t.loadAd()},2e4)}else this.loadAd()},Object.defineProperty(e.prototype,"advObjectIsReady",{get:function(){return!!this._configSuccess&&(this.loadType==p.ULAdLoadType.ordinary||this._isLoaded)},enumerable:!1,configurable:!0}),e.prototype.createAdvAD=function(){var e=this,t=new h.default({show:function(t,i){e.openAd(t,i)},isReady:function(){return e.advObjectIsReady},click:function(){e.clickAd()},close:function(){e.closeAd()}});return new u.default(t)},Object.defineProperty(e.prototype,"moduleName",{get:function(){return this.constructor.moduleName},enumerable:!1,configurable:!0}),e.prototype.openAd=function(e,t){this._showAdvItem=t,this.showAd()},e.prototype.loadAd=function(){},e.prototype.clickAd=function(){try{this.clickAdv&&this.clickAdv()}catch(e){a.default.error(this.moduleName+" clickAdv err:"+e.stack)}},e.prototype.closeAd=function(){try{this.closeAdv&&this.closeAdv()}catch(e){a.default.error(this.moduleName+" closeAdv err:"+e.stack)}this.ul_didClosed()},e.prototype.showAd=function(){try{this.playAdv(s.default.clone(this._showAdvItem))}catch(e){a.default.error(this.moduleName+" playAdv err:"+e.stack),this.ul_showFailed(new r.default("0","playAdv err \n:"+e.stack))}},e.prototype.reportAdvLog=function(e,t,i,n,o){void 0===t&&(t=""),void 0===i&&(i=""),void 0===n&&(n=0),void 0===o&&(o=""),e==p.ULAdStatisType.success&&(o=o||"1"),c.default.reportAdvLog(e,{arg:this.arg,advType:this.advType,advertiser:this.advertiser,advId:this._showAdvItem?this._showAdvItem.advId:"",ecpm:n,failReason:t,displayDuration:i,showCount:o})},e.prototype.ul_startLoad=function(){this._isloading||(this._isloading=!0,this.reportAdvLog(p.ULAdStatisType.loadAdvRequest))},e.prototype.ul_loadSuccess=function(){this._isloading&&(this._isloading=!1,this._loadError=null,this.setIsLoaded(!0,!1),this.reportAdvLog(p.ULAdStatisType.loadAdvSuccess),this._loadWillShow&&this.isPlaying&&(this._loadWillShow=!1,this.showAd()))},e.prototype.ul_loadFailed=function(e){this._isloading&&(this._isloading=!1,this._loadError=e,this.setIsLoaded(!1,!0),this.reportAdvLog(p.ULAdStatisType.loadAdvFailed,e.toString()),this._loadWillShow&&this.isPlaying&&(this._loadWillShow=!1,this.ul_showFailed(e)))},e.prototype.ul_showSuccess=function(){this._dele&&!this._dele.isShowed&&(this._displayTime=s.default.secondsTime(),this.reportAdvLog(this.advType==p.ULAdType.video?p.ULAdStatisType.playStart:p.ULAdStatisType.success),this._dele.setIsShowed(!0,this.advType))},e.prototype.ul_showFailed=function(t){this._dele&&!this._dele.isfail&&(e.endShow(this),this.reportAdvLog(p.ULAdStatisType.failed,t.toString()),this._dele.addError(t),this._dele.isfail=!0,this._dele=null,this._showAdvItem=null,this.setIsLoaded(!1,!0))},e.prototype.ul_didClicked=function(){this._dele&&!this._dele.isClicked&&(this.reportAdvLog(p.ULAdStatisType.clicked),this._dele.isClicked=!0)},e.prototype.ul_didSkip=function(){this._dele&&!this._dele.isSkiped&&(this._dele.isSkiped=!0)},e.prototype.ul_didClosed=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=1),this._dele&&!this._dele.isClosed){e.endShow(this);var n=s.default.secondsTime()-this._displayTime,o=n>0&&n<2e3?n.toString():"";this.advType==p.ULAdType.video&&(this._dele.isSkiped?this.reportAdvLog(p.ULAdStatisType.failed,"\u8df3\u8fc7\u4e86\u5e7f\u544a",o):(this.reportAdvLog(p.ULAdStatisType.playCompletion,"",o,t),this.reportAdvLog(p.ULAdStatisType.success,"",o,t,i.toString()))),this._dele.setIsClosed(!0,i),this.setIsLoaded(!1,!1)}this._loadWillShow=!1,this._dele=null,this._showAdvItem=null,this._displayTime=0},Object.defineProperty(e,"exemptArray",{get:function(){return this._exemptArray||(this._exemptArray=l.default.getArrayValue("a_sdk_exempt_advType_limit_arrays",[])),this._exemptArray},enumerable:!1,configurable:!0}),Object.defineProperty(e,"mutuallyExclusiveSetting",{get:function(){if(!this._mutuallyExclusiveSetting){this._mutuallyExclusiveSetting={};for(var e=l.default.getObjectValue("o_sdk_mutuallyExclusive_advType_setting"),t=0,i=Object.keys(e);t<i.length;t++)for(var n=i[t],o=0,r=s.default.getArrayValue(e,n);o<r.length;o++){var a=r[o],d=this._mutuallyExclusiveSetting[n]||[n],c=this._mutuallyExclusiveSetting[a]||[a];d.indexOf(a)>-1&&d.push(a),c.indexOf(n)>-1&&c.push(n),this._mutuallyExclusiveSetting[n]=d,this._mutuallyExclusiveSetting[a]=c}}return this._mutuallyExclusiveSetting},enumerable:!1,configurable:!0}),e.isAllowPlay=function(e){var t=s.default.milliTime();if(t>d.default.initTime){var i=p.default.getLaunchCd(e.advType),n=t-d.default.initTime-i;if(n<0)return e.advType+" \u542f\u52a8CD\u8fd8\u5269\u4e0b:"+Math.abs(n)}if(this.exemptArray.indexOf(e.advType)>=0)return null;for(var o=0,r=this.mutuallyExclusiveSetting[e.advType]||[e.advType];o<r.length;o++){var a=r[o];if((this._showingItemSetting[a]||[]).length>0)return"\u5e7f\u544a\u4e92\u65a5\uff1a"+a}return null},e.startShow=function(e){var t=this._showingItemSetting[e.advType]||[];t.push(e),this._showingItemSetting[e.advType]=t},e.endShow=function(e){var t=this._showingItemSetting[e.advType]||[],i=t.indexOf(e);i>=0&&t.splice(i,1),this._showingItemSetting[e.advType]=t},e.moduleName="",e._exemptArray=null,e._mutuallyExclusiveSetting=null,e._showingItemSetting={},e}();o.default=f,cc._RF.pop()},{}],ULAdvScheme:[function(e,t,i){"use strict";cc._RF.push(t,"73ebeOKd7FN+Ii1x9kEv6yY","ULAdvScheme");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULError"),a=n("ULLog"),s=n("ULTools"),l=n("ULAdvAD"),d=n("ULAdvDelegate"),c=n("ULAdvExpManager"),u=function(){function e(e,t){this.initSuccess=!1,this._exp="",this.weight=100,this._schemeData=s.default.clone(e),this._exp=s.default.getStringValue(this._schemeData,"exp"),this.weight=s.default.getNumberValue(this._schemeData,"weight",100),this.weight=Math.min(this.weight,100);var i=s.default.getArrayValue(this._schemeData,"tids"),n=s.default.getArrayValue(this._schemeData,"tidWeights");if(i.length<=0)a.default.warn("ULAdvScheme:","\u3010\u8b66\u544a\u3011\u7b56\u7565\u3010 "+e+" \u3011\u7f3a\u5c11\u5fc5\u914d\u5b57\u6bb5tids,\u6216\u8be5\u5b57\u6bb5\u683c\u5f0f\u975e\u6cd5");else{this._tids=[],this._templates=[],this._tidWeights=[];for(var o=0;o<i.length;o++){var r=s.default.getStringValue(i,o);if(r){var l=t?t(r):null;if(l){var d=s.default.getNumberValue(n,o,100);this._tids.push(r),this._tidWeights.push(d),this._templates.push(l)}else a.default.warn("ULAdvScheme:","\u3010\u8b66\u544a\u3011\u7b56\u7565\u3010 "+e+" \u3011\u7f3a\u5c11\u5fc5\u914d\u5b57\u6bb5tids,\u6216\u8be5\u5b57\u6bb5\u683c\u5f0f\u975e\u6cd5")}}this.initSuccess=!0}}return Object.defineProperty(e.prototype,"isReady",{get:function(){if(!this.initSuccess)return!1;for(var e=0,t=this._templates;e<t.length;e++)if(t[e].isReady)return!0;return!1},enumerable:!1,configurable:!0}),e.prototype.createAdvAD=function(){var e=this,t=new d.default({show:function(t,i){e.openAdv(t,i)},isReady:function(){return e.isReady}});return new l.default(t)},e.prototype.openAdv=function(e,t){if(e.sendMessage("\u4f7f\u7528\u7b56\u7565\u3010"+JSON.stringify(this._schemeData,null,2)+"\u3011"),!this.initSuccess)return e.addError(new r.default("0","\u8be5\u7b56\u7565\u3010"+this._schemeData+"\u3011\u672a\u521d\u59cb\u5316\u6210\u529f\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e")),void(e.isfail=!0);if(!c.default.calcExp(this._exp))return e.addError(new r.default("0","\u8be5\u7b56\u7565 calcExp false exp:"+this._exp)),void(e.isfail=!0);var i=[].concat(this._templates),n=[].concat(this._tidWeights);this.findTemplateToOpenAdv(e,t,i,n)},e.prototype.findTemplateToOpenAdv=function(e,t,i,n){var o=this;if(0==i.length)return e.addError(new r.default("0","\u8be5\u7b56\u7565\u3010"+JSON.stringify(this._schemeData,null,2)+"\u3011\u6240\u6709\u6a21\u677f\u5df2\u7528\u5b8c")),void(e.isfail=!0);for(var a=0,l=0,d=n;l<d.length;l++)a+=h=d[l];for(var c=s.default.random(0,Math.min(a,100)),u=0;u<i.length;u++){var h;if(c<=(h=n[u])){var p=i[u];i.splice(u,1),n.splice(u,1);var f=p.createAdvAD();return f.bindSupDele(e),f.onError(function(r){e.addError(null,r),o.findTemplateToOpenAdv(e,t,i,n)}),void f.show(t)}c-=h}},e}();o.default=u,cc._RF.pop()},{}],ULAdvSlot:[function(e,t,i){"use strict";cc._RF.push(t,"219ccXtOR1D+bQ92JsxkbA+","ULAdvSlot");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULError"),a=n("ULLog"),s=n("ULTools"),l=n("ULAdvAD"),d=n("ULAdvDelegate"),c=n("ULAdvScheme"),u=function(){function e(e,t,i){this._initSuccess=!1,this.lastRequestTime=0,this._slotId=e,this._slotData=s.default.clone(t),this._rcd=s.default.getNumberValue(this._slotData,"rcd"),this._rcd=Math.max(0,this._rcd);var n=s.default.getArrayValue(this._slotData,"schemes"),o=s.default.getArrayValue(this._slotData,"subAids");if(n.length<=0)a.default.warn("ULAdvSlot:","\u3010\u8b66\u544a\u3011\u5e7f\u544a\u4f4d\u3010 "+e+" \u3011\u7f3a\u5c11\u5fc5\u914d\u5b57\u6bb5schemes,\u6216\u8be5\u5b57\u6bb5\u683c\u5f0f\u975e\u6cd5");else{this._subAids=[];for(var r=0;r<o.length;r++){var l=s.default.getStringValue(o,r);l&&this._subAids.push(l)}this._schemes=[];for(var d=0,u=n;d<u.length;d++){var h=u[d],p=new c.default(h,i);p.initSuccess&&this._schemes.push(p)}this._initSuccess=!0}}return e.prototype.getSubAids=function(){return[].concat(this._subAids)},e.prototype.getAvailableScheme=function(){for(var e=0,t=0,i=this._schemes;t<i.length;t++)e+=(r=i[t]).weight;for(var n=s.default.random(0,e),o=0;o<this._schemes.length;o++){var r;if(n<=(r=this._schemes[o]).weight)return r;n-=r.weight}return this._schemes.length>0?this._schemes[0]:null},e.prototype.createAdvAD=function(){var e=this,t=new d.default({show:function(t,i){e.openAdv(t,i)},isReady:function(){return e.isReady}});return new l.default(t)},Object.defineProperty(e.prototype,"isReady",{get:function(){if(!this._initSuccess)return!1;for(var e=0,t=this._schemes;e<t.length;e++)if(t[e].isReady)return!0;return!1},enumerable:!1,configurable:!0}),e.prototype.openAdv=function(e,t){if(e.sendMessage("\u4f7f\u7528\u5e7f\u544a\u4f4d\u3010"+this._slotId+"\u3011"),!this._initSuccess)return e.addError(new r.default("0","\u8be5\u5e7f\u544a\u4f4d\u3010"+this._slotId+"\u3011\u672a\u521d\u59cb\u5316\u6210\u529f\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e")),void(e.isfail=!0);var i=s.default.milliTime(),n=i-this.lastRequestTime;if((n=Math.max(0,n))<this._rcd)return e.addError(new r.default("0","\u8be5\u5e7f\u544a\u4f4d\u3010"+this._slotId+"\u3011\u5904\u5728CD\u4e2d")),void(e.isfail=!0);this.lastRequestTime=i;var o=this.getAvailableScheme();if(null==o)return e.addError(new r.default("0","\u8be5\u5e7f\u544a\u4f4d\u3010"+this._slotId+"\u3011\u6ca1\u6709\u5408\u9002\u7684\u7b56\u7565")),void(e.isfail=!0);var a=o.createAdvAD();a.bindSupDele(e),a.show(t)},e}();o.default=u,cc._RF.pop()},{}],ULAdvTemplate:[function(e,t,i){"use strict";cc._RF.push(t,"4c663ffVShD8oct8WuxWzz4","ULAdvTemplate");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULError"),a=n("ULLog"),s=n("ULTools"),l=n("ULAdvAD"),d=n("ULAdvDelegate"),c=n("ULAdvEnum"),u=n("ULAdvExpManager"),h=function(){function e(e,t,i){if(this.initSuccess=!1,this._rewardType=c.ULAdRewardType.show,this.templateId=e,this._templateData=s.default.clone(t),this._exp=s.default.getStringValue(this._templateData,"exp"),this._rcd=s.default.getNumberValue(this._templateData,"rcd"),this.moduleName=s.default.getStringValue(this._templateData,"moduleName"),this.moduleName){"click"==s.default.getStringValue(this._templateData,"rewardType")&&(this._rewardType=c.ULAdRewardType.click);var n=s.default.getArrayValue(this._templateData,"args"),o=s.default.getArrayValue(this._templateData,"argWeights"),r=s.default.getArrayValue(this._templateData,"loadTypes");this._args=[],this._advObjectArray=[],this._argWeights=[],this._loadTypes=[];for(var l=0;l<n.length;l++){var d=s.default.getStringValue(n,l);if(d){var u=s.default.getNumberValue(o,l,100),h=0==s.default.getNumberValue(r,l,0)?c.ULAdLoadType.ordinary:c.ULAdLoadType.preload,p=i?i(this.moduleName,d,h):null;if(!p)return void a.default.warn("ULAdvTemplate:","\u3010\u8b66\u544a\u3011\u5e7f\u544a\u6a21\u677f\u3010 "+this.moduleName+"\u3011\u672a\u6ce8\u518c");this._args.push(d),this._argWeights.push(u),this._loadTypes.push(h),this._advObjectArray.push(p)}else a.default.warn("ULAdvTemplate:","\u3010\u8b66\u544a\u3011\u5e7f\u544a\u6a21\u677f\u3010 "+e+":"+d+"\u3011is not string")}this._advObjectArray.length<=0?a.default.warn("ULAdvTemplate:","\u3010\u8b66\u544a\u3011\u5e7f\u544a\u6a21\u677f\u3010 "+e+"\u3011advObjectArray.length == 0"):this.initSuccess=!0}else a.default.warn("ULAdvTemplate:","\u3010\u8b66\u544a\u3011\u5e7f\u544a\u6a21\u677f\u3010 "+e+" \u3011\u7f3a\u5c11\u5fc5\u914d\u5b57\u6bb5moduleName,\u6216\u8be5\u5b57\u6bb5\u683c\u5f0f\u975e\u6cd5")}return Object.defineProperty(e.prototype,"isReady",{get:function(){if(!this.initSuccess)return!1;for(var e=0,t=this._advObjectArray;e<t.length;e++)if(t[e].advObjectIsReady)return!0;return!1},enumerable:!1,configurable:!0}),e.prototype.createAdvAD=function(){var e=this,t=new d.default({show:function(t,i){e.openAdv(t,i)},isReady:function(){return e.isReady}});return new l.default(t)},e.prototype.openAdv=function(e,t){if(e.sendMessage("\u4f7f\u7528\u6a21\u677f\u3010"+this.templateId+"\u3011"),!this.initSuccess)return e.addError(new r.default("0","\u8be5\u6a21\u677f\u3010"+this.templateId+"\u3011\u672a\u521d\u59cb\u5316\u6210\u529f\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e")),void(e.isfail=!0);if(!u.default.calcExp(this._exp))return e.addError(new r.default("0","\u8be5\u6a21\u677f calcExp false exp:"+this._exp)),void(e.isfail=!0);var i=[].concat(this._advObjectArray),n=[].concat(this._argWeights);this.findAdvObjectToOpenAdv(e,t,i,n)},e.prototype.findAdvObjectToOpenAdv=function(e,t,i,n){var o=this;if(0==i.length)return e.addError(new r.default("0","\u8be5\u6a21\u677f\u3010"+this.templateId+"\u3011 \u6240\u6709\u5e7f\u544a\u5bf9\u8c61\u5df2\u7528\u5b8c")),void(e.isfail=!0);for(var l=0,d=0,h=n;d<h.length;d++)l+=h[d];for(var p=s.default.random(0,Math.min(l,100)),f=function(r){var s=n[r];if(p<=s){var l=i[r];i.splice(r,1),n.splice(r,1);var d=l.createAdvAD();d.bindSupDele(e),d.onError(function(r){a.default.log(o.templateId,":onError"),u.default.updateExp(o.templateId,l.advType,c.ULAdCountExp.fc),e.addError(null,r),o.findAdvObjectToOpenAdv(e,t,i,n)}),d.onShow(function(){a.default.log(o.templateId,":onShow"),u.default.updateExp(o.templateId,l.advType,c.ULAdCountExp.sc)}),d.onClick(function(){a.default.log(o.templateId,":onClick"),u.default.updateExp(o.templateId,l.advType,c.ULAdCountExp.cc)}),d.onClose(function(e){a.default.log(o.templateId,":onClose \uff1a"+e),e&&u.default.updateExp(o.templateId,l.advType,c.ULAdCountExp.mcc)}),u.default.updateExp(g.templateId,l.advType,c.ULAdCountExp.rc);var h=g._rewardType;return h==c.ULAdRewardType.show&&l.advType==c.ULAdType.video&&(h=c.ULAdRewardType.CloseNotSkip),d.show(t,h),{value:void 0}}p-=s},g=this,v=0;v<i.length;v++){var _=f(v);if("object"==typeof _)return _.value}},e}();o.default=h,cc._RF.pop()},{}],ULAffineTransform:[function(e,t,i){"use strict";cc._RF.push(t,"85f287g1NVN0J8Ri+4r3vH2","ULAffineTransform");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULRect"),a=function(){function e(e){this._cornerRadius=0,this._scale=new r.ULSize({width:1,height:1}),this._rotation=0,this.delegate=e}return Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this._cornerRadius},set:function(e){e<0||this._cornerRadius==e||(this._cornerRadius=e,this.delegate.transformDidChange())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return new r.ULSize({width:this._scale.width,height:this._scale.height})},set:function(e){e.width<0||e.height<0||this._scale.isEqual(e)||(this._scale=new r.ULSize({width:e.width,height:e.height}),this.delegate.transformDidChange())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!=e&&(this._rotation=e,this.delegate.transformDidChange())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEffective",{get:function(){return this._cornerRadius>=1||1!=this._scale.width||1!=this._scale.height||0!=this._rotation},enumerable:!1,configurable:!0}),e}();o.default=a,cc._RF.pop()},{}],ULApplication:[function(e,t,i){"use strict";cc._RF.push(t,"dc1af94xk5MvofU0zQOND/i","ULApplication");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULRect"),l=o("ULView"),d=o("ULPanelCtxManager"),c=o("ULKitEvent"),u=o("ULScreen"),h=o("ULWindow"),p=function(e){function t(t,i){var n=e.call(this,s.default.Init(0,0,t,i))||this;return n.extendSuperViewSolver=!1,n.registerWindowList=[],n._isShowing=!1,n._graphPanel=null,n._willrefresh=!1,n.inResponder=null,n.lastShowPoint=null,n.width=t,n.height=i,n}return a(t,e),Object.defineProperty(t.prototype,"isShowing",{get:function(){return this._isShowing},set:function(e){this._isShowing!=e&&(this._isShowing=e,this._isShowing?d.ULPanelCtxManager.addTouchEvent({onTouchStart:this.onTouchStart.bind(this),onTouchEnd:this.onTouchEnd.bind(this),onTouchMoved:this.onTouchMoved.bind(this),onTouchCancelled:this.onTouchCancelled.bind(this)}):d.ULPanelCtxManager.addTouchEvent(null))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphPanel",{get:function(){return this._graphPanel||(this._graphPanel=d.ULPanelCtxManager.creatPanelCtx(),this._graphPanel.width=this.width,this._graphPanel.height=this.height,this._graphPanel.clearRect()),this._graphPanel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"willrefresh",{set:function(e){var t=this;this._willrefresh||(this._willrefresh=e,window.requestAnimationFrame(function(){var e=(new Date).getTime();try{t.refresh()}catch(e){console.log(e.stack)}t._willrefresh=!1;var i=(new Date).getTime()-e;i>10&&console.log("willrefresh time:",i)}))},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){if(this.isShowing=this.effectiveWindowList.length>0,!this.isShowing)return this.clearMergePanel(),void d.ULPanelCtxManager.hideCtx();this.graphPanel.clearRect(),this.drawMergePanel(this._graphPanel,this.bounds),d.ULPanelCtxManager.showCtx(this._graphPanel)},Object.defineProperty(t.prototype,"panel",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.viewWillRefresh=function(t,i){var n=this.subViews,o=this.effectiveWindowList;n=n.filter(function(e){return-1==o.indexOf(e)});for(var r=0;r<n.length;r++){var a=n[r];e.prototype.removeSubView.call(this,a)}for(r=0;r<o.length;r++)a=o[r],e.prototype.addSubView.call(this,a);e.prototype.viewWillRefresh.call(this,t,i)},Object.defineProperty(t.prototype,"effectiveWindowList",{get:function(){return this.registerWindowList.filter(function(e){return e.windowLevel>0}),this.registerWindowList.sort(function(e,t){return e.windowLevel-t.windowLevel})},enumerable:!1,configurable:!0}),t.prototype.subViewNeedsRefresh=function(){this.willrefresh=!0},t.prototype.hitText=function(t,i){var n=e.prototype.hitText.call(this,t,i);return n==this?null:n},t.prototype.getAdapteConstraints=function(){return[]},t.prototype.reginsterWindow=function(e){e instanceof h.default&&(this.registerWindowList.push(e),this.subViewNeedsRefresh())},t.prototype.unReginsterWindow=function(e){if(e instanceof h.default){e.superView==this&&e.removeFromSuperView();var t=this.registerWindowList.indexOf(e);t>=0&&this.registerWindowList.splice(t,1)}},Object.defineProperty(t.prototype,"keyWindow",{get:function(){var e=this.registerWindowList.length;return e>0?this.registerWindowList[e-1]:null},enumerable:!1,configurable:!0}),t.prototype.removeSubView=function(t){if(t instanceof h.default){var i=this.registerWindowList.indexOf(t);i>=0&&this.registerWindowList.splice(i,1)}e.prototype.removeSubView.call(this,t)},t.prototype.onTouchStart=function(e){return this.lastShowPoint=e,this.inResponder=this.hitText(e,new c.default),!!this.inResponder&&(this.inResponder.touchesBegan(e,new c.default),!0)},t.prototype.onTouchEnd=function(e){return!!this.inResponder&&(this.inResponder.touchesEnded(e,new c.default),this.inResponder=null,!0)},t.prototype.onTouchMoved=function(e){return!!this.inResponder&&(e.isEqual(this.lastShowPoint)||(this.lastShowPoint=e,this.inResponder.touchesMoved(e,new c.default)),!0)},t.prototype.onTouchCancelled=function(e){return!!this.inResponder&&(this.lastShowPoint=null,this.inResponder.touchesCancelled(e,new c.default),!0)},t}(l.default),f=function(){function e(){this.view=new p(u.default.width,u.default.height)}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e,"keyWindow",{get:function(){return e.instance.view.keyWindow},enumerable:!1,configurable:!0}),e.registerWindow=function(t){e.instance.view.reginsterWindow(t)},e.logoutWindow=function(t){e.instance.view.unReginsterWindow(t)},e.registerKeyboardEvent=function(e){d.ULPanelCtxManager.focus(e)},e}();r.default=f,cc._RF.pop()},{}],ULBase64:[function(e,t,i){"use strict";cc._RF.push(t,"badcfGK2p9G/6XAfGxu7C6J","ULBase64");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.encodeForUrl=function(e,t){var i=this.encode(e,t);return i?i=(i=i.replace("+","-")).replace("/","*"):null},e.decodeForUrl=function(e,t){return e?(e=(e=e.replace("-","+")).replace("*","/"),this.decode(e,t)):null},e.encode=function(e,t){var i,n,o,r,a,s,l,d=t||this._defaultKeyStr,c="",u=0;for(e=this._utf8_encode(e);u<e.length;)r=(i=e.charCodeAt(u++))>>2,a=(3&i)<<4|(n=e.charCodeAt(u++))>>4,s=(15&n)<<2|(o=e.charCodeAt(u++))>>6,l=63&o,isNaN(n)?s=l=64:isNaN(o)&&(l=64),c=c+d.charAt(r)+d.charAt(a)+d.charAt(s)+d.charAt(l);return c},e.decode=function(e,t){var i,n,o,r,a,s,l=t||this._defaultKeyStr,d="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)i=l.indexOf(e.charAt(c++))<<2|(r=l.indexOf(e.charAt(c++)))>>4,n=(15&r)<<4|(a=l.indexOf(e.charAt(c++)))>>2,o=(3&a)<<6|(s=l.indexOf(e.charAt(c++))),d+=String.fromCharCode(i),64!=a&&(d+=String.fromCharCode(n)),64!=s&&(d+=String.fromCharCode(o));return this._utf8_decode(d)},e._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},e._utf8_decode=function(e){for(var t="",i=0,n=0,o=0,r=0;i<e.length;)(n=e.charCodeAt(i))<128?(t+=String.fromCharCode(n),i++):n>191&&n<224?(o=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&o),i+=2):(o=e.charCodeAt(i+1),r=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&r),i+=3);return t},e._defaultKeyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();n.default=o,cc._RF.pop()},{}],ULBaseExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"7c4c9GCfmlPo5Ma18LchX7T","ULBaseExecutor");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULPromiseErr=o.ULBaseExecutionEndEnum=o.ULBaseExecutionEnum=o.ULBaseExecutionPriorityType=void 0;var r,a,s,l=n("ULTools");(function(e){e[e.Invalid=0]="Invalid",e[e.Default=1]="Default",e[e.Channel=100]="Channel",e[e.FunctionalChannel=200]="FunctionalChannel"})(r=o.ULBaseExecutionPriorityType||(o.ULBaseExecutionPriorityType={})),function(e){e[e.ChainFlashback=1]="ChainFlashback",e[e.ChainSequence=2]="ChainSequence",e[e.RegisterFlashback=3]="RegisterFlashback",e[e.RegisterSequence=4]="RegisterSequence",e[e.Random=5]="Random",e[e.Concurrency=6]="Concurrency"}(a=o.ULBaseExecutionEnum||(o.ULBaseExecutionEnum={})),function(e){e[e.One=0]="One",e[e.SuccessAnyOne=1]="SuccessAnyOne",e[e.FailAnyOne=2]="FailAnyOne",e[e.AllSuccess=3]="AllSuccess",e[e.All=4]="All"}(s=o.ULBaseExecutionEndEnum||(o.ULBaseExecutionEndEnum={}));var d=function(){function e(){this.errList=[]}return e.prototype.addErr=function(e){this.errList.push(e)},Object.defineProperty(e.prototype,"stack",{get:function(){for(var e="",t=0,i=this.errList;t<i.length;t++){var n=i[t];e+=(n.stack||JSON.stringify(n))+"\n"}return e},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var e="",t=0,i=this.errList;t<i.length;t++){var n=i[t];e+=JSON.stringify(n)+"\n"}return e},e}();o.ULPromiseErr=d;var c=function(){function e(){this._itmes=[]}return Object.defineProperty(e.prototype,"isEffective",{get:function(){return this.trimExecuteItmes(a.RegisterFlashback).length>0},enumerable:!1,configurable:!0}),e.prototype.register=function(e){this.isExist(e)||this._itmes.push(e)},e.prototype.unRegister=function(e){var t=this._itmes.indexOf(e);t>-1&&this._itmes.splice(t,1)},e.prototype.isExist=function(e){return this._itmes.indexOf(e)>=0},e.prototype.clear=function(){this._itmes=[]},e.prototype.checkIsSupport=function(){return this.isEffective&&(!this.sdkSwitch||this.sdkSwitch())},e.prototype.checkIsSupportPromise=function(){return this.isEffective?this.sdkSwitch&&!this.sdkSwitch()?Promise.reject("SDK configuration is not enabled"):Promise.resolve():Promise.reject("Channel unsupport")},e.prototype.getPriority=function(e){return isNaN(Number(e.priority))?r.Default:Number(e.priority)},e.prototype.getItem=function(e){if(e.checkSupport&&!this.checkIsSupport())return null;if(e.moduleName)for(var t=0,i=this._itmes;t<i.length;t++){var n=i[t];if(n.moduleName==e.moduleName)return n}else{if(e.checkCustom&&this.customPrioritySort)return this.getCustomSortItmes(e.checkCustom,e.type)[0];if(e.type)return this.trimExecuteItmes(e.type)[0]}return null},e.prototype.getItemAsync=function(e){var t=this.getItem(e);return t?Promise.resolve(t):Promise.reject("no executable objects")},e.prototype.getAllRegisterModuleName=function(e){return void 0===e&&(e=a.RegisterFlashback),this.executeSync({type:e,endType:s.All,defaultValue:[],handle:function(e,t){return t.push(e.moduleName),t}})},e.prototype.getCustomSortItmes=function(e,t){if(e&&this.customPrioritySort){var i=this.customPrioritySort();if(i.length>0){for(var n=[],o=0;o<i.length;o++){var r=i[o],a=this.getItem({moduleName:r});a&&n.push(a)}return n}}return this.trimExecuteItmes(t)},e.prototype.trimExecuteItmes=function(e){var t=this,i=[].concat(this._itmes).filter(function(e){return t.getPriority(e)>0}),n=[];switch(e){case a.Concurrency:case a.RegisterSequence:n=n.concat(i);break;case a.RegisterFlashback:n=i.reverse();break;case a.ChainFlashback:n=i.sort(function(e,i){return t.getPriority(i)-t.getPriority(e)});break;case a.ChainSequence:n=i.sort(function(e,i){return t.getPriority(e)-t.getPriority(i)});break;case a.Random:for(var o=n.concat(i);o.length;){var r=l.default.random(0,o.length-1);n=n.concat(o.splice(r,1))}}return n},e.prototype.executeSync=function(e){if(e.moduleName){var t=this.getItem({moduleName:e.moduleName});return this.executeSyncHanle(t?[t]:[],s.One,e.handle,e.defaultValue,e.checkSupport)}var i=this.getCustomSortItmes(e.checkSupport,e.type);return this.executeSyncHanle(i,e.endType,e.handle,e.defaultValue,e.checkSupport)},e.prototype.executeSyncHanle=function(e,t,i,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!1),o&&!this.checkIsSupport())throw new Error("checkIsSupport == false");if(0==e.length){if(t==s.All)return n;throw Error("no executable objects")}for(var r=n,a=0,l=e;a<l.length;a++){var d=l[a];try{if(r=i(d,r),t==s.SuccessAnyOne||t==s.One)break}catch(e){if(t==s.One||t==s.AllSuccess)throw e;if(t==s.FailAnyOne)break}}return r},e.prototype.executeAsync=function(e){var t=e.promiseHandle;if(t||(t=function(t,i){return new Promise(function(n){n(i?e.handle(t,i):e.handle(t))})}),e.moduleName){var i=this.getItem({moduleName:e.moduleName});return this.executeAsynHandle(i?[i]:[],a.ChainSequence,s.One,t,e.checkSupport,e.defaultValue)}var n=this.getCustomSortItmes(e.checkSupport,e.type);return this.executeAsynHandle(n,e.type,e.endType,t,e.checkSupport,e.defaultValue)},e.prototype.executeConcurrencyAll=function(e){return this.executeAsync({type:a.Concurrency,endType:s.All,handle:function(t){e(t)}})},e.prototype.executeAsynHandle=function(e,t,i,n,o,r){var l=this;if(void 0===o&&(o=!1),void 0===r&&(r=void 0),o)return this.checkIsSupportPromise().then(function(){return l.executeAsynHandle(e,t,i,n,!1,r)});var d=r;if(0==e.length)return i==s.All?Promise.resolve(d):Promise.reject("no executable objects");if(t!=a.Concurrency)return this.executeAsyncItem(e,d,i,n);for(var c=[],u=0,h=e;u<h.length;u++){var p=h[u];c.push(n(p,d))}return i==s.All?this.promiseAll(c).then(function(){return Promise.resolve(d)}):i==s.AllSuccess?Promise.all(c).then(function(){return Promise.resolve(d)}):Promise.race(c)},e.prototype.executeAsyncItem=function(e,t,i,n,o){void 0===o&&(o=void 0);var r=e.shift(),a=this;return new Promise(function(l,c){n(r,t).then(function(r){if(t=r,0!=e.length){if(i!=s.SuccessAnyOne&&i!=s.One)return a.executeAsyncItem(e,t,i,n,o).then(l,c);l(t)}else o?c(o):l(t)}).catch(function(r){return i==s.All&&e.length>0?((o=o||new d).addErr(r),e.length>0?a.executeAsyncItem(e,t,i,n,o).then(l,c):void c(o)):i==s.SuccessAnyOne&&e.length>0?a.executeAsyncItem(e,t,i,n,o).then(l,c):void(i!=s.FailAnyOne?c(r):l(t))})})},e.prototype.promiseAll=function(e,t,i){void 0===t&&(t=void 0),void 0===i&&(i=void 0);var n=0,o=[],r=i;return new Promise(function(i,a){for(var s=function(s,l){l?(t=t||new d).addErr(l):o.push(s),++n===e.length&&(t?a(t):i(r))},l=0;l<e.length;l++)Promise.resolve(e[l]).then(function(e){s(e,null)}).catch(function(e){s(null,e)})})},e}();o.default=c,cc._RF.pop()},{}],ULBridgeAdItem:[function(e,t,i){"use strict";cc._RF.push(t,"fbdf5350NBNs7wlew8M7YuG","ULBridgeAdItem");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULBridgeTool"),a=function(){function e(e,t){this._id=e,this._advId=t.advId,this._showListener=t.onShow,this._errorListener=t.onError,this._clickListener=t.onClick,this._closeListener=t.onClose,this._rewardListener=t.onReward}return e.prototype.close=function(){r.default.callNative("closeAdv","(Ljava/lang/String;)V",this._id)},Object.defineProperty(e.prototype,"showListener",{get:function(){return this._showListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorListener",{get:function(){return this._errorListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickListener",{get:function(){return this._clickListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"closeListener",{get:function(){return this._closeListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rewardListener",{get:function(){return this._rewardListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"advId",{get:function(){return this._advId},enumerable:!1,configurable:!0}),e}();o.default=a,cc._RF.pop()},{}],ULBridgeMiddle:[function(e,t,i){"use strict";cc._RF.push(t,"51ad3COGfFKXpmS2PgXD1Bb","ULBridgeMiddle");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULSdkManager"),a=function(){function e(){}return e.jumpLeisureSubject=function(e){r.default.jumpLeisureSubject(e)},e.getSubscribeState=function(e){r.default.getSubscribeState(e)},e.addSubscribe=function(e){r.default.addSubscribe(e)},e.jumpToShareVideoView=function(e){r.default.jumpToShareVideoView(e)},e.getFollowOfficialAccountState=function(e){r.default.getFollowOfficialAccountState(e)},e.followOfficialAccount=function(e){r.default.followOfficialAccount(e)},e.phoneVibrate=function(e){r.default.phoneVibrate(e)},e.joinGroup=function(e){r.default.joinGroup(e)},e.setCheckDebugWhiteUserListener=function(e){r.default.setCheckDebugWhiteUserListener(e)},e.getShortcutState=function(e){r.default.getShortcutState(e)},e.installShortcut=function(e){r.default.installShortcut(e)},e.setAppShareListener=function(e){r.default.setAppShareListener(e)},e.getChannelUserInfo=function(e){r.default.getChannelUserInfo(e)},e.addGameToMyFavorite=function(e){r.default.addGameToMyFavorite(e)},e.getRecorder=function(){return r.default.getRecorder()},e.shareGameVideo=function(e){r.default.shareGameVideo(e)},e.setRankData=function(e){r.default.setRankData(e)},e.getRankDataList=function(e){r.default.getRankDataList(e)},e.login=function(e){r.default.login(e)},e.setClearStorageListener=function(e){r.default.setClearStorageListener(e)},e.wipeAccount=function(e){r.default.wipeAccount(e)},e.getPrivacySetting=function(){return r.default.getPrivacySetting()},e.showPrivacy=function(e){r.default.showPrivacy(e)},e.openPermissionSetting=function(e){r.default.openPermissionSetting(e)},e.openAdvancedSetting=function(e){r.default.openAdvancedSetting(e)},e.setJumpNewGuideListener=function(e){r.default.setJumpNewGuideListener(e)},e.setChangePatchInfoListener=function(e){r.default.setChangePatchInfoListener(e)},e.openInviteComment=function(e){r.default.openInviteComment(e)},e.openUrl=function(e){r.default.openUrl(e)},e.openShare=function(e){r.default.openShare(e)},e.setCoverStorageListener=function(e){r.default.setCoverStorageListener(e)},e.getCloudStorage=function(e,t){r.default.getCloudStorage(e,t)},e.setCloudStorage=function(e){r.default.setCloudStorage(e)},e.openAdv=function(e){return r.default.openAdv(e)},e.getAdvState=function(e){r.default.getAdvState(e)},e.useCdkey=function(e){r.default.useCdkey(e)},e.initSdk=function(e){r.default.initSdk(e)},e.loadRemoteConfig=function(e){r.default.loadRemoteConfig(e)},e.getLocalConfig=function(){return r.default.getLocalConfig()},e.setOnHideListener=function(e){r.default.setOnHideListener(e)},e.setOnShowListener=function(e){r.default.setOnShowListener(e)},e.openPay=function(e){r.default.openPay(e)},e.reOpenPay=function(e){r.default.reOpenPay(e)},e.setPrePayListener=function(e){r.default.setPrePayListener(e)},e.deliverGoodsEvent=function(e){r.default.deliverGoodsEvent(e)},e.exitGame=function(){r.default.exitGame()},e.setPauseSoundListener=function(e){r.default.setPauseSoundListener(e)},e.setResumeSoundListener=function(e){r.default.setResumeSoundListener(e)},e.levelStart=function(e){return r.default.levelStart(e)},e.levelComplete=function(e){return r.default.levelComplete(e)},e.coinChange=function(e){return r.default.coinChange(e)},e.itemBuy=function(e){return r.default.itemBuy(e)},e.buyAction=function(e){return r.default.buyAction(e)},e.commonEvent=function(e){return r.default.commonEvent(e)},e.videoPointEvent=function(e){return r.default.videoPointEvent(e)},e.patchInfo=function(e){return r.default.patchInfo(e)},e.setStorage=function(e){r.default.setStorage(e)},e.setStorageSync=function(e){return r.default.setStorageSync(e)},e.getStorage=function(e,t){r.default.getStorage(e,t)},e.getStorageSync=function(e){return r.default.getStorageSync(e)},e.removeStorage=function(e,t){r.default.removeStorage(e,t)},e.removeStorageSync=function(e){return r.default.removeStorageSync(e)},e.clearStorage=function(e){r.default.clearStorage(e)},e.clearStorageSync=function(){return r.default.clearStorageSync()},e.getPackConfig=function(){return r.default.getPackConfig()},e.checkNetwork=function(e){r.default.checkNetwork(e)},e.getServerTime=function(e){r.default.getServerTime(e)},e.getRankPlayersInfoByUids=function(e){r.default.getRankPlayersInfoByUids(e)},e.getRankPlayersInfoByRankIds=function(e){r.default.getRankPlayersInfoByRankIds(e)},e.updateRankPlayersData=function(e){r.default.updateRankPlayersData(e)},e.modifyRankScoreByArray=function(e){r.default.modifyRankScoreByArray(e)},e.getUserNumInRank=function(e){r.default.getUserNumInRank(e)},e.contentSecurityCheck=function(e){r.default.contentSecurityCheck(e)},e}();o.default=a,cc._RF.pop()},{}],ULBridgeRecorderItem:[function(e,t,i){"use strict";cc._RF.push(t,"4f9f6TCGgxDqaL6PUndN4oU","ULBridgeRecorderItem");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULBridgeTool"),a=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"startListener",{get:function(){return this._startListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stopListener",{get:function(){return this._stopListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeListener",{get:function(){return this._resumeListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pauseListener",{get:function(){return this._pauseListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorListener",{get:function(){return this._errorListener},enumerable:!1,configurable:!0}),e.prototype.onStart=function(e){this._startListener=e},e.prototype.onResume=function(e){this._resumeListener=e},e.prototype.onPause=function(e){this._pauseListener=e},e.prototype.onStop=function(e){this._stopListener=e},e.prototype.onError=function(e){this._errorListener=e},e.prototype.start=function(e){r.default.callNative("recorderStart","(Ljava/lang/String;)V",JSON.stringify(e))},e.prototype.pause=function(){r.default.callNative("recorderPause","()V")},e.prototype.resume=function(){r.default.callNative("recorderResume","()V")},e.prototype.stop=function(){r.default.callNative("recorderStop","()V")},e}();o.default=a,cc._RF.pop()},{}],ULBridgeTool:[function(e,t,i){"use strict";cc._RF.push(t,"5963d+FmC5ELq9wmFbUmgzE","ULBridgeTool");var n=i,o=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.isNative=function(){return!1},e.getPlatform=function(){return"h5"},e.callNative=function(e,t){for(var i,n,r,a,s=[],l=2;l<arguments.length;l++)s[l-2]=arguments[l];if(window.cc){if("android"===this.getPlatform())return window.jsb&&window.jsb.reflection?(i=window.jsb.reflection).callStaticMethod.apply(i,o([this.CLASS_NAME_SMALI_COMPLETE,e,t],s)):(n=window.cc.native.reflection).callStaticMethod.apply(n,o([this.CLASS_NAME_SMALI_COMPLETE,e,t],s));if("ios"===this.getPlatform()){for(var d=0;d<s.length;d++)e+=":";if(0==s.length);else{if(1==s.length)return window.jsb&&window.jsb.reflection?window.jsb.reflection.callStaticMethod(this.CLASS_NAME,e,s[0]):window.cc.native.reflection.callStaticMethod(this.CLASS_NAME,e,s[0]);if(s.length>1){var c=[s.length-1];for(d=1;d<s.length;d++)c[d-1]=s[d];return window.jsb&&window.jsb.reflection?(r=window.jsb.reflection).callStaticMethod.apply(r,o([this.CLASS_NAME,e,s[0]],c)):(a=window.cc.native.reflection).callStaticMethod.apply(a,o([this.CLASS_NAME,e,s[0]],c))}}}}if(window.Laya){var u=void 0;if("Conch-android"==window.conch.config.getOS())return u||(u=window.PlatformClass.createClass(this.CLASS_NAME_JAVA_COMPLETE)),u.call.apply(u,o([e],s));if("Conch-ios"==window.conch.config.getOS()){for(u||(u=window.PlatformClass.createClass(this.CLASS_NAME)),d=0;d<s.length;d++)e+=":";return u.call.apply(u,o([e],s))}}},e.getCallbackId=function(e){for(var t=e.size,i=(t+Math.random()).toString();e.has(i);)i=(++t+Math.random()).toString();return i},e.getIdByObj=function(){return""},e.CLASS_NAME="ULBridgeMiddle",e.CLASS_NAME_SMALI_COMPLETE="cn/ulsdk/bridge/ULBridgeMiddle",e.CLASS_NAME_JAVA_COMPLETE="cn.ulsdk.bridge.ULBridgeMiddle",e}();n.default=r,cc._RF.pop()},{}],ULBridge:[function(e,t,i){"use strict";cc._RF.push(t,"7b5faGsUMFBwbt0MmaiHtAN","ULBridge");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULSDK"),a=n("ULDebugManager"),s=n("ULBridgeAdItem"),l=n("ULBridgeTool"),d=n("ULCheckManager"),c=n("ULBridgeMiddle"),u=n("ULBridgeRecorderItem"),h=function(){function e(){this._initSdkCallback=null,this.loadRemoteConfigCallbackList=null,this._onShowCallback=null,this._onHideCallback=null,this._mPayParams=null,this._reOpenPayCallback=null,this._setPrePayListenerCallback=null,this._setPauseSoundListenerCallback=null,this._setResumeSoundListenerCallback=null,this._mCdkParams=null,this._getAdvStateCallbackList=null,this._openAdvItemList=null,this._setCloudStorageCallbackList=null,this._getCloudStorageCallbackList=null,this._setCoverStorageListenerCallback=null,this._getServerTimeCallbackList=null,this._checkNetworkCallbackList=null,this._openShareCallback=null,this._openUrlParam=null,this._openInviteCommentCallback=null,this._setJumpNewGuideListenerCallback=null,this._setChangePatchInfoListenerCallback=null,this._openAdvancedSettingCallback=null,this._wipeAccountCallback=null,this._openPermissionSettingCallback=null,this._showPrivacyParam=null,this._setClearStorageListenerCallback=null,this._loginCallback=null,this._getRankDataListParam=null,this._setRankDataList=null,this._shareGameVideoCallback=null,this._getRecorderItemList=null,this._addGameToMyFavoriteParam=null,this._getChannelUserInfoCallback=null,this._setAppShareListenerCallback=null,this._installShortcutCallback=null,this._getShortcutStateCallback=null,this._setCheckDebugWhiteUserListenerCallback=null,this._joinGroupCallback=null,this.getUserNumInRankCallbackList=null,this.modifyScoreByArrayCallbackList=null,this.updateRankPlayersDataCallbackList=null,this.getRankPlayersInfoByRankIdsCallbackList=null,this.getRankPlayersInfoByUidsCallbackList=null,this.phoneVibrateCallbackList=null,this._followOfficialAccountCallback=null,this._getFollowOfficialAccountStateCallback=null,this._jumpToShareVideoParam=null,this._addSubscribeParam=null,this._getSubscribeStateParam=null,this._jumpLeisureSubjectCallback=null,this._contentSecurityCheckParam=null}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getPackConfig=function(){try{if(e.debug)return a.default.getPackConfig();if(l.default.isNative()){var t=l.default.callNative("getPackConfig","()Ljava/lang/String;");return JSON.parse(t)}return c.default.getPackConfig()}catch(e){return{}}},e.prototype.nativeSetStorage=function(e,t){localStorage.setItem(e,t)},e.prototype.nativeGetStorage=function(e){localStorage.getItem(e)},e.prototype.initSdk=function(t){console.log("ULBridge-initSdk"),e.debug||"1"==localStorage.getItem("ulsdk_debug")?(e.debug=e.debug||"1"==localStorage.getItem("ulsdk_debug"),d.default.getInstance().setCallList("initSdk",JSON.stringify(t)),a.default.initSdk(t)):l.default.isNative()?(this._initSdkCallback=t.callback,l.default.callNative("initSdk","(Ljava/lang/String;)V",JSON.stringify(t))):c.default.initSdk(t)},e.prototype.initSdkCallback=function(e){if(e&&this._initSdkCallback){var t=JSON.parse(e.result);this._initSdkCallback(t)}},e.prototype.loadRemoteConfig=function(t){if(console.log("ULBridge-loadRemoteConfig"),e.debug)d.default.getInstance().setCallList("loadRemoteConfig"),a.default.loadRemoteConfig(t);else if(l.default.isNative()){this.loadRemoteConfigCallbackList||(this.loadRemoteConfigCallbackList=new Map);var i=l.default.getCallbackId(this.loadRemoteConfigCallbackList);this.loadRemoteConfigCallbackList.set(i,t),l.default.callNative("loadRemoteConfig","(Ljava/lang/String;)V",i)}else c.default.loadRemoteConfig(t)},e.prototype.loadRemoteConfigCallback=function(e){if(e&&this.loadRemoteConfigCallbackList){var t=e.callbackId;if(this.loadRemoteConfigCallbackList.has(t)){var i=this.loadRemoteConfigCallbackList.get(t),n=e.result;i(JSON.parse(n)),this.loadRemoteConfigCallbackList.delete(t)}}},e.prototype.getLocalConfig=function(){if(console.log("ULBridge-getLocalConfig"),e.debug)return d.default.getInstance().setCallList("getLocalConfig"),a.default.getLocalConfig();if(l.default.isNative()){var t=l.default.callNative("getLocalConfig","()Ljava/lang/String;");return t||(t="{}"),JSON.parse(t)}return c.default.getLocalConfig()},e.prototype.onShow=function(t){console.log("ULBridge-onShow"),e.debug?(d.default.getInstance().setCallList("onShow"),a.default.setOnShowListener(t)):l.default.isNative()?(this._onShowCallback=t,l.default.callNative("onShow","()V")):c.default.setOnShowListener(t)},e.prototype.onShowCallback=function(){this._onShowCallback&&this._onShowCallback()},e.prototype.onHide=function(t){console.log("ULBridge-onHide"),e.debug?(d.default.getInstance().setCallList("onHide"),a.default.setOnHideListener(t)):l.default.isNative()?(this._onHideCallback=t,l.default.callNative("onHide","()V")):c.default.setOnHideListener(t)},e.prototype.onHideCallback=function(){this._onHideCallback&&this._onHideCallback()},e.prototype.openPay=function(t){var i=this;if(console.log("ULBridge-openPay"),this._mPayParams)t.callback({bSuccess:!1,errMsg:"\u5df2\u6709\u652f\u4ed8\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._mPayParams=t,e.debug){d.default.getInstance().setCallList("openPay",JSON.stringify(t));var n=t.callback,o=function(e){e&&e.bSuccess||(i._mPayParams=null),n&&n(e)};t.callback=o,a.default.openPay(t)}else if(l.default.isNative()){var r="{}";t&&(r=JSON.stringify(t)),l.default.callNative("openPay","(Ljava/lang/String;)V",r)}else{var s=t.callback;o=function(e){e&&e.bSuccess||(i._mPayParams=null),s&&s(e)},t.callback=o,c.default.openPay(t)}},e.prototype.openPayCallback=function(e){if(e&&this._mPayParams){var t=JSON.parse(e.result);this._mPayParams.callback(t),t.bSuccess||(this._mPayParams=void 0)}},e.prototype.reOpenPay=function(t){var i=this;if(console.log("ULBridge-reOpenPay"),this._reOpenPayCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._reOpenPayCallback=t,e.debug){d.default.getInstance().setCallList("reOpenPay");var n=function(e){e&&e.bSuccess||(i._reOpenPayCallback=null),t&&t(e)};a.default.reOpenPay(n)}else l.default.isNative()?l.default.callNative("reOpenPay","()V"):(n=function(e){e&&e.bSuccess||(i._reOpenPayCallback=null),t&&t(e)},c.default.reOpenPay(n))},e.prototype.reOpenPayCallback=function(e){if(e&&this._reOpenPayCallback){var t=JSON.parse(e.result);this._reOpenPayCallback(t),t.bSuccess||(this._reOpenPayCallback=null)}},e.prototype.setPrePayListener=function(t){console.log("ULBridge-setPrePayListener"),e.debug?(d.default.getInstance().setCallList("setPrePayListener"),a.default.setPrePayListener(t)):l.default.isNative()?(this._setPrePayListenerCallback=t,l.default.callNative("setPrePayListener","()V")):c.default.setPrePayListener(t)},e.prototype.setPrePayListenerCallback=function(){this._setPrePayListenerCallback&&this._setPrePayListenerCallback()},e.prototype.deliverGoodsEvent=function(t){if(console.log("ULBridge-deliverGoodsEvent"),this._mPayParams=null,this._reOpenPayCallback=null,e.debug)d.default.getInstance().setCallList("deliverGoodsEvent",JSON.stringify(t)),a.default.deliverGoodsEvent(t);else if(l.default.isNative()){var i="{}";t&&(i=JSON.stringify(t)),l.default.callNative("deliverGoodsEvent","(Ljava/lang/String;)V",i)}else c.default.deliverGoodsEvent(t)},e.prototype.exitGame=function(){console.log("ULBridge-exitGame"),e.debug?(d.default.getInstance().setCallList("exitGame"),a.default.exitGame()):l.default.isNative()?l.default.callNative("exitGame","()V"):c.default.exitGame()},e.prototype.setPauseSoundListener=function(t){console.log("ULBridge-setPauseSoundListener"),e.debug?(d.default.getInstance().setCallList("setPauseSoundListener"),a.default.setPauseSoundListener(t)):l.default.isNative()?(this._setPauseSoundListenerCallback=t,l.default.callNative("setPauseSoundListener","()V")):c.default.setPauseSoundListener(t)},e.prototype.setPauseSoundListenerCallback=function(){this._setPauseSoundListenerCallback&&this._setPauseSoundListenerCallback()},e.prototype.setResumeSoundListener=function(t){console.log("ULBridge-setResumeSoundListener"),e.debug?(d.default.getInstance().setCallList("setResumeSoundListener"),a.default.setResumeSoundListener(t)):l.default.isNative()?(this._setResumeSoundListenerCallback=t,l.default.callNative("setResumeSoundListener","()V")):c.default.setResumeSoundListener(t)},e.prototype.setResumeSoundListenerCallback=function(){this._setResumeSoundListenerCallback&&this._setResumeSoundListenerCallback()},e.prototype.levelStart=function(t){return console.log("ULBridge-levelStart"),e.debug?(d.default.getInstance().setCallList("levelStart",JSON.stringify(t)),d.default.getInstance().levelStart(t),a.default.levelStart(t)):l.default.isNative()?l.default.callNative("levelStart","(Ljava/lang/String;)Z",JSON.stringify(t)):c.default.levelStart(t)},e.prototype.levelComplete=function(t){return console.log("ULBridge-levelComplete"),e.debug?(d.default.getInstance().setCallList("levelComplete",JSON.stringify(t)),d.default.getInstance().levelComplete(t),a.default.levelComplete(t)):l.default.isNative()?l.default.callNative("levelComplete","(Ljava/lang/String;)Z",JSON.stringify(t)):c.default.levelComplete(t)},e.prototype.coinChange=function(t){return console.log("ULBridge-coinChange"),e.debug?(d.default.getInstance().setCallList("coinChange",JSON.stringify(t)),a.default.coinChange(t)):l.default.isNative()?l.default.callNative("coinChange","(Ljava/lang/String;)Z",JSON.stringify(t)):c.default.coinChange(t)},e.prototype.itemBuy=function(t){return console.log("ULBridge-itemBuy"),e.debug?(d.default.getInstance().setCallList("itemBuy",JSON.stringify(t)),a.default.itemBuy(t)):l.default.isNative()?l.default.callNative("itemBuy","(Ljava/lang/String;)Z",JSON.stringify(t)):c.default.itemBuy(t)},e.prototype.buyAction=function(t){return console.log("ULBridge-buyAction"),e.debug?(d.default.getInstance().setCallList("buyAction",JSON.stringify(t)),a.default.buyAction(t)):l.default.isNative()?l.default.callNative("buyAction","(Ljava/lang/String;)Z",JSON.stringify(t)):c.default.buyAction(t)},e.prototype.commonEvent=function(t){return console.log("ULBridge-commonEvent"),e.debug?(d.default.getInstance().setCallList("commonEvent",JSON.stringify(t)),a.default.commonEvent(t)):l.default.isNative()?l.default.callNative("commonEvent","(Ljava/lang/String;)Z",JSON.stringify(t)):c.default.commonEvent(t)},e.prototype.videoPointEvent=function(t){return console.log("ULBridge-videoPointEvent"),e.debug?(d.default.getInstance().setCallList("videoPointEvent",JSON.stringify(t)),a.default.videoPointEvent(t)):l.default.isNative()?l.default.callNative("videoPointEvent","(Ljava/lang/String;)Z",JSON.stringify(t)):c.default.videoPointEvent(t)},e.prototype.patchInfo=function(t){return console.log("ULBridge-patchInfo"),e.debug?(d.default.getInstance().setCallList("patchInfo",JSON.stringify(t)),a.default.patchInfo(t)):l.default.isNative()?l.default.callNative("patchInfo","(Ljava/lang/String;)Z",JSON.stringify(t)):c.default.patchInfo(t)},e.prototype.useCdkey=function(t){var i=this;if(console.log("ULBridge-useCdkey"),this._mCdkParams)t.callback({bSuccess:!1,errMsg:"\u5151\u6362\u4e2d,\u8bf7\u7a0d\u540e"});else if(this._mCdkParams=t,e.debug){var n=t.callback,o=function(e){i._mCdkParams=null,n(e)};t.callback=o,d.default.getInstance().setCallList("useCdkey",JSON.stringify(t)),a.default.useCdkey(t)}else if(l.default.isNative()){var r="{}";t&&(r=JSON.stringify(t)),l.default.callNative("useCdkey","(Ljava/lang/String;)V",r)}else{var s=t.callback;o=function(e){i._mCdkParams=null,s(e)},t.callback=o,c.default.useCdkey(t)}},e.prototype.useCdkeyCallback=function(e){if(e&&this._mCdkParams){var t=JSON.parse(e.result);this._mCdkParams.callback(t),this._mCdkParams=null}},e.prototype.getAdvState=function(t){if(console.log("ULBridge-getAdvState"),e.debug)d.default.getInstance().setCallList("getAdvState",JSON.stringify(t)),a.default.getAdvState(t);else if(l.default.isNative()){this._getAdvStateCallbackList||(this._getAdvStateCallbackList=new Map);var i=l.default.getCallbackId(this._getAdvStateCallbackList);this._getAdvStateCallbackList.set(i,t.callback);var n="{}";t&&(n=JSON.stringify(t)),l.default.callNative("getAdvState","(Ljava/lang/String;Ljava/lang/String;)V",i,n)}else c.default.getAdvState(t)},e.prototype.getAdvStateCallback=function(e){if(e&&this._getAdvStateCallbackList){var t=e.callbackId;if(this._getAdvStateCallbackList.has(t)){var i=this._getAdvStateCallbackList.get(t),n=e.result;i(JSON.parse(n)),this._getAdvStateCallbackList.delete(t)}}},e.prototype.openAdv=function(t){if(console.log("ULBridge-openAdv"),e.debug)return d.default.getInstance().setCallList("openAdv",JSON.stringify(t)),a.default.openAdv(t);if(l.default.isNative()){this._openAdvItemList||(this._openAdvItemList=new Map);var i=l.default.getIdByObj(this._openAdvItemList),n=new s.default(i,t);this._openAdvItemList.set(i,n);var o="{}";return t&&(o=JSON.stringify(t)),l.default.callNative("openAdv","(Ljava/lang/String;Ljava/lang/String;)V",i,o),n}return c.default.openAdv(t)},e.prototype.openAdvCallback=function(e){if(e){var t=e.callbackId,i=JSON.parse(e.result),n=i.method;if(delete i.method,this._openAdvItemList.has(t)){var o=this._openAdvItemList.get(t);Reflect.get(o,n)(i),"closeListener"==n&&this._openAdvItemList.delete(t)}}},e.prototype.setCloudStorage=function(t){if(console.log("ULBridge-setCloudStorage"),e.debug)d.default.getInstance().setCallList("setCloudStorage",JSON.stringify(t)),a.default.setCloudStorage(t);else if(l.default.isNative()){this._setCloudStorageCallbackList||(this._setCloudStorageCallbackList=new Map);var i=l.default.getCallbackId(this._setCloudStorageCallbackList);this._setCloudStorageCallbackList.set(i,t.callback);var n="{}";t&&(n=JSON.stringify(t)),l.default.callNative("setCloudStorage","(Ljava/lang/String;Ljava/lang/String;)V",i,n)}else c.default.setCloudStorage(t)},e.prototype.setCloudStorageCallback=function(e){if(e&&this._setCloudStorageCallbackList){var t=e.callbackId;if(this._setCloudStorageCallbackList.has(t)){var i=this._setCloudStorageCallbackList.get(t),n=e.result;i(JSON.parse(n)),this._setCloudStorageCallbackList.delete(t)}}},e.prototype.getCloudStorage=function(t,i){if(console.log("ULBridge-getCloudStorage:"+e.debug),e.debug)d.default.getInstance().setCallList("getCloudStorage"),a.default.getCloudStorage(t,i);else if(l.default.isNative()){this._getCloudStorageCallbackList||(this._getCloudStorageCallbackList=new Map);var n=l.default.getCallbackId(this._getCloudStorageCallbackList);this._getCloudStorageCallbackList.set(n,i),l.default.callNative("getCloudStorage","(Ljava/lang/String;)V",n)}else c.default.getCloudStorage(t,i)},e.prototype.getCloudStorageCallback=function(e){if(e&&this._getCloudStorageCallbackList){var t=e.callbackId;if(this._getCloudStorageCallbackList.has(t)){var i=this._getCloudStorageCallbackList.get(t),n=e.result;i(JSON.parse(n)),this._getCloudStorageCallbackList.delete(t)}}},e.prototype.setCoverStorageListener=function(t){console.log("ULBridge-setCoverStorageListener"),e.debug?(d.default.getInstance().setCallList("setCoverStorageListener"),a.default.setCoverStorageListener(t)):l.default.isNative()?(this._setCoverStorageListenerCallback=t,l.default.callNative("setCoverStorageListener","()V")):c.default.setCoverStorageListener(t)},e.prototype.setCoverStorageListenerCallback=function(){this._setCoverStorageListenerCallback&&this._setCoverStorageListenerCallback()},e.prototype.setStorage=function(t){console.log("ULBridge-setStorage"),e.debug?(d.default.getInstance().setCallList("setStorage",JSON.stringify(t)),a.default.setStorage(t)):l.default.isNative()?(localStorage.setItem(t.key,t.value),t.callback({bSuccess:!0})):c.default.setStorage(t)},e.prototype.setStorageSync=function(t){return console.log("ULBridge-setStorageSync"),e.debug?(d.default.getInstance().setCallList("setStorageSync",JSON.stringify(t)),a.default.setStorageSync(t)):l.default.isNative()?(localStorage.setItem(t.key,t.value),!0):c.default.setStorageSync(t)},e.prototype.getStorage=function(t,i){console.log("ULBridge-getStorage"),e.debug?(d.default.getInstance().setCallList("getStorage",t),a.default.getStorage(i,t)):l.default.isNative()?i({bSuccess:!0,data:localStorage.getItem(t)}):c.default.getStorage(t,i)},e.prototype.getStorageSync=function(t){return console.log("ULBridge-getStorageSync"),e.debug?(d.default.getInstance().setCallList("getStorageSync",t),a.default.getStorageSync(t)):l.default.isNative()?localStorage.getItem(t):c.default.getStorageSync(t)},e.prototype.removeStorage=function(t,i){console.log("ULBridge-removeStorage"),e.debug?(d.default.getInstance().setCallList("removeStorage",t),a.default.removeStorage(t,i)):l.default.isNative()?(localStorage.removeItem(t),i({bSuccess:!0})):c.default.removeStorage(t,i)},e.prototype.removeStorageSync=function(t){return console.log("ULBridge-removeStorageSync"),e.debug?(d.default.getInstance().setCallList("removeStorageSync",t),a.default.removeStorageSync(t)):l.default.isNative()?(localStorage.removeItem(t),!0):c.default.removeStorageSync(t)},e.prototype.clearStorage=function(t){console.log("ULBridge-clearStorage"),e.debug?(d.default.getInstance().setCallList("clearStorage"),a.default.clearStorage(t)):l.default.isNative()?(localStorage.clear(),t({bSuccess:!0})):c.default.clearStorage(t)},e.prototype.clearStorageSync=function(){return console.log("ULBridge-clearStorageSync"),e.debug?(d.default.getInstance().setCallList("clearStorageSync"),a.default.clearStorageSync()):l.default.isNative()?(localStorage.clear(),!0):c.default.clearStorageSync()},e.prototype.getServerTime=function(t){if(console.log("ULBridge-getServerTime"),e.debug)d.default.getInstance().setCallList("getServerTime"),a.default.getServerTime(t);else if(l.default.isNative()){this._getServerTimeCallbackList||(this._getServerTimeCallbackList=new Map);var i=l.default.getCallbackId(this._getServerTimeCallbackList);this._getServerTimeCallbackList.set(i,t),l.default.callNative("getServerTime","(Ljava/lang/String;)V",i)}else c.default.getServerTime(t)},e.prototype.getServerTimeCallback=function(e){if(e&&this._getServerTimeCallbackList){var t=e.callbackId;if(this._getServerTimeCallbackList.has(t)){var i=this._getServerTimeCallbackList.get(t),n=e.result;i(JSON.parse(n)),this._getServerTimeCallbackList.delete(t)}}},e.prototype.checkNetwork=function(t){if(console.log("ULBridge-checkNetwork"),e.debug)d.default.getInstance().setCallList("checkNetwork"),a.default.checkNetwork(t);else if(l.default.isNative()){this._checkNetworkCallbackList||(this._checkNetworkCallbackList=new Map);var i=l.default.getCallbackId(this._checkNetworkCallbackList);this._checkNetworkCallbackList.set(i,t),l.default.callNative("checkNetwork","(Ljava/lang/String;)V",i)}else c.default.checkNetwork(t)},e.prototype.checkNetworkCallback=function(e){if(e&&this._checkNetworkCallbackList){var t=e.callbackId;if(this._checkNetworkCallbackList.has(t)){var i=this._checkNetworkCallbackList.get(t),n=e.result;i(JSON.parse(n)),this._checkNetworkCallbackList.delete(t)}}},e.prototype.openShare=function(t){var i=this;if(console.log("ULBridge-openShare"),this._openShareCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u5206\u4eab\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._openShareCallback=t,e.debug){var n=function(e){i._openShareCallback=null,t(e)};d.default.getInstance().setCallList("openShare"),a.default.openShare(n)}else l.default.isNative()?l.default.callNative("openShare","()V"):(n=function(e){i._openShareCallback=null,t(e)},c.default.openShare(n))},e.prototype.openShareCallback=function(e){if(e&&this._openShareCallback){var t=JSON.parse(e.result);this._openShareCallback(t),this._openShareCallback=null}},e.prototype.openUrl=function(t){var i=this;if(console.log("ULBridge-openUrl"),this._openUrlParam)t.callback({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._openUrlParam=t,e.debug){var n=t.callback,o=function(e){i._openUrlParam=null,n(e)};t.callback=o,d.default.getInstance().setCallList("openUrl",JSON.stringify(t)),a.default.openUrl(t)}else if(l.default.isNative()){var r="{}";t&&(r=JSON.stringify(t)),l.default.callNative("openUrl","(Ljava/lang/String;)V",r)}else{var s=t.callback;o=function(e){i._openUrlParam=null,s(e)},t.callback=o,c.default.openUrl(t)}},e.prototype.openUrlCallback=function(e){if(e&&this._openUrlParam){var t=JSON.parse(e.result);this._openUrlParam.callback(t),this._openUrlParam=null}},e.prototype.openInviteComment=function(t){var i=this;if(console.log("ULBridge-openInviteComment"),this._openInviteCommentCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._openInviteCommentCallback=t,e.debug){var n=function(e){i._openInviteCommentCallback=null,t(e)};d.default.getInstance().setCallList("openInviteComment"),a.default.openInviteComment(n)}else l.default.isNative()?l.default.callNative("openInviteComment","()V"):(n=function(e){i._openInviteCommentCallback=null,t(e)},c.default.openInviteComment(n))},e.prototype.openInviteCommentCallback=function(e){if(e&&this._openInviteCommentCallback){var t=JSON.parse(e.result);this._openInviteCommentCallback(t),this._openInviteCommentCallback=null}},e.prototype.setJumpNewGuideListener=function(t){console.log("ULBridge-setJumpNewGuideListener"),e.debug?(d.default.getInstance().setCallList("setJumpNewGuideListener"),a.default.setJumpNewGuideListener(t)):l.default.isNative()?(this._setJumpNewGuideListenerCallback=t,l.default.callNative("setJumpNewGuideListener","()V")):c.default.setJumpNewGuideListener(t)},e.prototype.setJumpNewGuideListenerCallback=function(){this._setJumpNewGuideListenerCallback&&this._setJumpNewGuideListenerCallback()},e.prototype.setChangePatchInfoListener=function(t){console.log("ULBridge-setChangePatchInfoListener"),e.debug?(d.default.getInstance().setCallList("setChangePatchInfoListener"),a.default.setChangePatchInfoListener(t)):l.default.isNative()?(this._setChangePatchInfoListenerCallback=t,l.default.callNative("setChangePatchInfoListener","()V")):c.default.setChangePatchInfoListener(t)},e.prototype.setChangePatchInfoListenerCallback=function(){this._setChangePatchInfoListenerCallback&&this._setChangePatchInfoListenerCallback()},e.prototype.openAdvancedSetting=function(t){var i=this;if(console.log("ULBridge-openAdvancedSetting"),this._openAdvancedSettingCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._openAdvancedSettingCallback=t,e.debug){var n=function(e){i._openAdvancedSettingCallback=null,t(e)};d.default.getInstance().setCallList("openAdvancedSetting"),a.default.openAdvancedSetting(n)}else l.default.isNative()?l.default.callNative("openAdvancedSetting","()V"):(n=function(e){i._openAdvancedSettingCallback=null,t(e)},c.default.openAdvancedSetting(n))},e.prototype.openAdvancedSettingCallback=function(e){if(e&&this._openAdvancedSettingCallback){var t=JSON.parse(e.result);this._openAdvancedSettingCallback(t),this._openAdvancedSettingCallback=null}},e.prototype.wipeAccount=function(t){var i=this;if(console.log("ULBridge-wipeAccount"),this._wipeAccountCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._wipeAccountCallback=t,e.debug){var n=function(e){i._wipeAccountCallback=null,t(e)};d.default.getInstance().setCallList("wipeAccount"),a.default.wipeAccount(n)}else l.default.isNative()?l.default.callNative("wipeAccount","()V"):(n=function(e){i._wipeAccountCallback=null,t(e)},c.default.wipeAccount(n))},e.prototype.wipeAccountCallback=function(e){if(e&&this._wipeAccountCallback){var t=JSON.parse(e.result);this._wipeAccountCallback(t),this._wipeAccountCallback=null}},e.prototype.openPermissionSetting=function(t){var i=this;if(console.log("ULBridge-openPermissionSetting"),this._openPermissionSettingCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._openPermissionSettingCallback=t,e.debug){var n=function(e){i._openPermissionSettingCallback=null,t(e)};d.default.getInstance().setCallList("openPermissionSetting"),a.default.openPermissionSetting(n)}else l.default.isNative()?l.default.callNative("openPermissionSetting","()V"):(n=function(e){i._openPermissionSettingCallback=null,t(e)},c.default.openPermissionSetting(n))},e.prototype.openPermissionSettingCallback=function(e){if(e&&this._openPermissionSettingCallback){var t=JSON.parse(e.result);this._openPermissionSettingCallback(t),this._openPermissionSettingCallback=null}},e.prototype.getPrivacySetting=function(){if(console.log("ULBridge-getPrivacySetting"),e.debug)return d.default.getInstance().setCallList("getPrivacySetting"),a.default.getPrivacySetting();if(l.default.isNative()){var t=l.default.callNative("getPrivacySetting","()Ljava/lang/String;");return t||(t="[]"),JSON.parse(t)}return c.default.getPrivacySetting()},e.prototype.showPrivacy=function(t){var i=this;if(console.log("ULBridge-showPrivacy"),this._showPrivacyParam)t.callback({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._showPrivacyParam=t,e.debug){var n=t.callback,o=function(e){i._showPrivacyParam=null,n(e)};t.callback=o,d.default.getInstance().setCallList("showPrivacy",JSON.stringify(t)),a.default.showPrivacy(t)}else if(l.default.isNative()){var r="{}";t&&(r=JSON.stringify(t)),l.default.callNative("showPrivacy","(Ljava/lang/String;)V",r)}else{var s=t.callback;o=function(e){i._showPrivacyParam=null,s(e)},t.callback=o,c.default.showPrivacy(t)}},e.prototype.showPrivacyCallback=function(e){if(e&&this._showPrivacyParam){var t=JSON.parse(e.result);this._showPrivacyParam.callback(t),this._showPrivacyParam=null}},e.prototype.setClearStorageListener=function(t){console.log("ULBridge-setClearStorageListener"),e.debug?(d.default.getInstance().setCallList("setClearStorageListener"),a.default.setClearStorageListener(t)):l.default.isNative()?(this._setClearStorageListenerCallback=t,l.default.callNative("setClearStorageListener","()V")):c.default.setClearStorageListener(t)},e.prototype.setClearStorageListenerCallback=function(){this._setClearStorageListenerCallback&&this._setClearStorageListenerCallback()},e.prototype.login=function(t){var i=this;if(console.log("ULBridge-login"),this._loginCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._loginCallback=t,e.debug){var n=function(e){i._loginCallback=null,t(e)};d.default.getInstance().setCallList("login"),a.default.login(n)}else l.default.isNative()?l.default.callNative("login","()V"):(n=function(e){i._loginCallback=null,t(e)},c.default.login(n))},e.prototype.loginCallback=function(e){if(e&&this._loginCallback){var t=JSON.parse(e.result);this._loginCallback(t),this._loginCallback=null}},e.prototype.getRankDataList=function(t){var i=this;if(console.log("ULBridge-getRankDataList"),this._getRankDataListParam)t.callback({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._getRankDataListParam=t,e.debug){var n=t.callback,o=function(e){i._getRankDataListParam=null,n(e)};t.callback=o,d.default.getInstance().setCallList("getRankDataList",JSON.stringify(t)),a.default.getRankDataList(t)}else if(l.default.isNative()){var r="{}";t&&(r=JSON.stringify(t)),l.default.callNative("getRankDataList","(Ljava/lang/String;)V",r)}else{var s=t.callback;o=function(e){i._getRankDataListParam=null,s(e)},t.callback=o,c.default.getRankDataList(t)}},e.prototype.getRankDataListCallback=function(e){if(e&&this._getRankDataListParam){var t=JSON.parse(e.result);this._getRankDataListParam.callback(t),this._getRankDataListParam=null}},e.prototype.setRankData=function(t){if(console.log("ULBridge-setRankData"),e.debug)d.default.getInstance().setCallList("setRankData",JSON.stringify(t)),a.default.setRankData(t);else if(l.default.isNative()){this._setRankDataList||(this._setRankDataList=new Map);var i=l.default.getCallbackId(this._setRankDataList);this._setRankDataList.set(i,t.callback);var n="{}";t&&(n=JSON.stringify(t)),l.default.callNative("setRankData","(Ljava/lang/String;Ljava/lang/String;)V",i,n)}else c.default.setRankData(t)},e.prototype.setRankDataCallback=function(e){if(e&&this._setRankDataList){var t=e.callbackId;if(this._setRankDataList.has(t)){var i=this._setRankDataList.get(t),n=e.result;i(JSON.parse(n)),this._setRankDataList.delete(t)}}},e.prototype.shareGameVideo=function(t){var i=this;if(console.log("ULBridge-shareGameVideo"),this._shareGameVideoCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._shareGameVideoCallback=t,e.debug){var n=function(e){i._shareGameVideoCallback=null,t(e)};d.default.getInstance().setCallList("shareGameVideo"),a.default.shareGameVideo(n)}else l.default.isNative()?l.default.callNative("shareGameVideo","()V"):(n=function(e){i._shareGameVideoCallback=null,t(e)},c.default.shareGameVideo(n))},e.prototype.shareGameVideoCallback=function(e){if(e&&this._shareGameVideoCallback){var t=JSON.parse(e.result);this._shareGameVideoCallback(t),this._shareGameVideoCallback=null}},e.prototype.getRecorder=function(){return console.log("ULBridge-getRecorder"),e.debug?(d.default.getInstance().setCallList("getRecorder"),a.default.getRecorder()):l.default.isNative()?u.default.getInstance():c.default.getRecorder()},e.prototype.getRecorderCallback=function(e){if(e){e.callbackId;var t=JSON.parse(e.result).method;"start"==t?u.default.getInstance().startListener&&u.default.getInstance().startListener():"stop"==t?u.default.getInstance().stopListener&&u.default.getInstance().stopListener():"resume"==t?u.default.getInstance().resumeListener&&u.default.getInstance().resumeListener():"pause"==t?u.default.getInstance().pauseListener&&u.default.getInstance().pauseListener():"error"==t&&u.default.getInstance().errorListener&&u.default.getInstance().errorListener()}},e.prototype.addGameToMyFavorite=function(t){var i=this;if(console.log("ULBridge-addGameToMyFavorite"),this._addGameToMyFavoriteParam)t.callback({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d",isFavorited:t.type!=r.FavoriteType.customize&&void 0});else if(this._addGameToMyFavoriteParam=t,e.debug){var n=t.callback,o=function(e){i._addGameToMyFavoriteParam=null,n(e)};t.callback=o,d.default.getInstance().setCallList("addGameToMyFavorite",JSON.stringify(t)),a.default.addGameToMyFavorite(t)}else if(l.default.isNative()){var s="{}";t&&(s=JSON.stringify(t)),l.default.callNative("addGameToMyFavorite","(Ljava/lang/String;)V",s)}else{var u=t.callback;o=function(e){i._addGameToMyFavoriteParam=null,u(e)},t.callback=o,c.default.addGameToMyFavorite(t)}},e.prototype.addGameToMyFavoriteCallback=function(e){if(e&&this._addGameToMyFavoriteParam){var t=JSON.parse(e.result);this._addGameToMyFavoriteParam.callback(t),this._addGameToMyFavoriteParam=null}},e.prototype.getChannelUserInfo=function(t){var i=this;if(console.log("ULBridge-getChannelUserInfo"),this._getChannelUserInfoCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._getChannelUserInfoCallback=t,e.debug){var n=function(e){i._getChannelUserInfoCallback=null,t(e)};d.default.getInstance().setCallList("getChannelUserInfo"),a.default.getChannelUserInfo(n)}else l.default.isNative()?l.default.callNative("getChannelUserInfo","()V"):(n=function(e){i._getChannelUserInfoCallback=null,t(e)},c.default.getChannelUserInfo(n))},e.prototype.getChannelUserInfoCallback=function(e){if(e&&this._getChannelUserInfoCallback){var t=JSON.parse(e.result);this._getChannelUserInfoCallback(t),this._getChannelUserInfoCallback=null}},e.prototype.setAppShareListener=function(t){console.log("ULBridge-setAppShareListener"),e.debug?(d.default.getInstance().setCallList("setAppShareListener"),a.default.setAppShareListener(t)):l.default.isNative()?(this._setAppShareListenerCallback=t,l.default.callNative("setAppShareListener","()V")):c.default.setAppShareListener(t)},e.prototype.setAppShareListenerCallback=function(){this._setAppShareListenerCallback&&this._setAppShareListenerCallback()},e.prototype.installShortcut=function(t){var i=this;if(console.log("ULBridge-installShortcut"),this._installShortcutCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._installShortcutCallback=t,e.debug){var n=function(e){i._installShortcutCallback=null,t(e)};d.default.getInstance().setCallList("installShortcut"),a.default.installShortcut(n)}else l.default.isNative()?l.default.callNative("installShortcut","()V"):(n=function(e){i._installShortcutCallback=null,t(e)},c.default.installShortcut(n))},e.prototype.installShortcutCallback=function(e){if(e&&this._installShortcutCallback){var t=JSON.parse(e.result);this._installShortcutCallback(t),this._installShortcutCallback=null}},e.prototype.getShortcutState=function(t){var i=this;if(console.log("ULBridge-getShortcutState"),this._getShortcutStateCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d",state:2});else if(this._getShortcutStateCallback=t,e.debug){var n=function(e){i._getShortcutStateCallback=null,t(e)};d.default.getInstance().setCallList("getShortcutState"),a.default.getShortcutState(n)}else l.default.isNative()?l.default.callNative("getShortcutState","()V"):(n=function(e){i._getShortcutStateCallback=null,t(e)},c.default.getShortcutState(n))},e.prototype.getShortcutStateCallback=function(e){if(e&&this._getShortcutStateCallback){var t=JSON.parse(e.result);this._getShortcutStateCallback(t),this._getShortcutStateCallback=null}},e.prototype.setCheckDebugWhiteUserListener=function(t){console.log("ULBridge-setCheckDebugWhiteUserListener"),e.debug?(d.default.getInstance().setCallList("setCheckDebugWhiteUserListener"),a.default.setCheckDebugWhiteUserListener(t)):l.default.isNative()?(this._setCheckDebugWhiteUserListenerCallback=t,l.default.callNative("setCheckDebugWhiteUserListener","()V")):c.default.setCheckDebugWhiteUserListener(t)},e.prototype.setCheckDebugWhiteUserListenerCallback=function(){this._setCheckDebugWhiteUserListenerCallback&&this._setCheckDebugWhiteUserListenerCallback()},e.prototype.joinGroup=function(t){console.log("ULBridge-joinGroup"),e.debug?(d.default.getInstance().setCallList("joinGroup"),a.default.joinGroup(t)):l.default.isNative()?(this._joinGroupCallback=t,l.default.callNative("joinGroup","(Ljava/lang/String;)V")):c.default.joinGroup(t)},e.prototype.joinGroupCallback=function(e){if(e&&this._joinGroupCallback){var t=JSON.parse(e.result);this._joinGroupCallback(t),this._joinGroupCallback=null}},e.prototype.getUserNumInRank=function(t){if(console.log("ULBridge-getUserNumInRank"),e.debug)d.default.getInstance().setCallList("getUserNumInRank",JSON.stringify(t)),a.default.getUserNumInRank(t);else if(l.default.isNative()){this.getUserNumInRankCallbackList||(this.getUserNumInRankCallbackList=new Map);var i=l.default.getCallbackId(this.getUserNumInRankCallbackList);this.getUserNumInRankCallbackList.set(i,t.callback),l.default.callNative("getUserNumInRank","(Ljava/lang/String;Ljava/lang/String;)V",i,JSON.stringify(t))}else c.default.getUserNumInRank(t)},e.prototype.getUserNumInRankCallback=function(e){if(e&&this.getUserNumInRankCallbackList){var t=e.callbackId;if(this.getUserNumInRankCallbackList.has(t)){var i=this.getUserNumInRankCallbackList.get(t),n=e.result;i(JSON.parse(n)),this.getUserNumInRankCallbackList.delete(t)}}},e.prototype.modifyRankScoreByArray=function(t){if(console.log("ULBridge-modifyRankScoreByArray"),e.debug)d.default.getInstance().setCallList("modifyRankScoreByArray",JSON.stringify(t)),a.default.modifyRankScoreByArray(t);else if(l.default.isNative()){this.modifyScoreByArrayCallbackList||(this.modifyScoreByArrayCallbackList=new Map);var i=l.default.getCallbackId(this.modifyScoreByArrayCallbackList);this.modifyScoreByArrayCallbackList.set(i,t.callback),l.default.callNative("modifyRankScoreByArray","(Ljava/lang/String;Ljava/lang/String;)V",i,JSON.stringify(t))}else c.default.modifyRankScoreByArray(t)},e.prototype.modifyScoreByArrayCallback=function(e){if(e&&this.modifyScoreByArrayCallbackList){var t=e.callbackId;if(this.modifyScoreByArrayCallbackList.has(t)){var i=this.modifyScoreByArrayCallbackList.get(t),n=e.result;i(JSON.parse(n)),this.modifyScoreByArrayCallbackList.delete(t)}}},e.prototype.updateRankPlayersData=function(t){if(console.log("ULBridge-updateRankPlayersData"),e.debug)d.default.getInstance().setCallList("updateRankPlayersData",JSON.stringify(t)),a.default.updateRankPlayersData(t);else if(l.default.isNative()){this.updateRankPlayersDataCallbackList||(this.updateRankPlayersDataCallbackList=new Map);var i=l.default.getCallbackId(this.updateRankPlayersDataCallbackList);this.updateRankPlayersDataCallbackList.set(i,t.callback),l.default.callNative("updateRankPlayersData","(Ljava/lang/String;Ljava/lang/String;)V",i,JSON.stringify(t))}else c.default.updateRankPlayersData(t)},e.prototype.updateRankPlayersDataCallback=function(e){if(e&&this.updateRankPlayersDataCallbackList){var t=e.callbackId;if(this.updateRankPlayersDataCallbackList.has(t)){var i=this.updateRankPlayersDataCallbackList.get(t),n=e.result;i(JSON.parse(n)),this.updateRankPlayersDataCallbackList.delete(t)}}},e.prototype.getRankPlayersInfoByRankIds=function(t){if(console.log("ULBridge-getRankPlayersInfoByRankIds"),e.debug)d.default.getInstance().setCallList("getRankPlayersInfoByRankIds",JSON.stringify(t)),a.default.getRankPlayersInfoByRankIds(t);else if(l.default.isNative()){this.getRankPlayersInfoByRankIdsCallbackList||(this.getRankPlayersInfoByRankIdsCallbackList=new Map);var i=l.default.getCallbackId(this.getRankPlayersInfoByRankIdsCallbackList);this.getRankPlayersInfoByRankIdsCallbackList.set(i,t.callback),l.default.callNative("getRankPlayersInfoByRankIds","(Ljava/lang/String;Ljava/lang/String;)V",i,JSON.stringify(t))}else c.default.getRankPlayersInfoByRankIds(t)},e.prototype.getRankPlayersInfoByRankIdsCallback=function(e){if(e&&this.getRankPlayersInfoByRankIdsCallbackList){var t=e.callbackId;if(this.getRankPlayersInfoByRankIdsCallbackList.has(t)){var i=this.getRankPlayersInfoByRankIdsCallbackList.get(t),n=e.result;i(JSON.parse(n)),this.getRankPlayersInfoByRankIdsCallbackList.delete(t)}}},e.prototype.getRankPlayersInfoByUids=function(t){if(console.log("ULBridge-getRankPlayersInfoByUids"),e.debug)d.default.getInstance().setCallList("getRankPlayersInfoByUids",JSON.stringify(t)),a.default.getRankPlayersInfoByUids(t);else if(l.default.isNative()){this.getRankPlayersInfoByUidsCallbackList||(this.getRankPlayersInfoByUidsCallbackList=new Map);var i=l.default.getCallbackId(this.getRankPlayersInfoByUidsCallbackList);this.getRankPlayersInfoByUidsCallbackList.set(i,t.callback),l.default.callNative("getRankPlayersInfoByUids","(Ljava/lang/String;Ljava/lang/String;)V",i,JSON.stringify(t))}else c.default.getRankPlayersInfoByUids(t)},e.prototype.getRankPlayersInfoByUidsCallback=function(e){if(e&&this.getRankPlayersInfoByUidsCallbackList){var t=e.callbackId;if(this.getRankPlayersInfoByUidsCallbackList.has(t)){var i=this.getRankPlayersInfoByUidsCallbackList.get(t),n=e.result;i(JSON.parse(n)),this.getRankPlayersInfoByUidsCallbackList.delete(t)}}},e.prototype.phoneVibrate=function(t){if(console.log("ULBridge-phoneVibrate"),e.debug)d.default.getInstance().setCallList("phoneVibrate",JSON.stringify(t)),a.default.phoneVibrate(t);else if(l.default.isNative()){this.phoneVibrateCallbackList||(this.phoneVibrateCallbackList=new Map);var i=l.default.getCallbackId(this.phoneVibrateCallbackList);this.phoneVibrateCallbackList.set(i,t.callback),l.default.callNative("phoneVibrate","(Ljava/lang/String;Ljava/lang/String;)V",i,JSON.stringify(t))}else c.default.phoneVibrate(t)},e.prototype.phoneVibrateCallback=function(e){if(e&&this.phoneVibrateCallbackList){var t=e.callbackId;if(this.phoneVibrateCallbackList.has(t)){var i=this.phoneVibrateCallbackList.get(t),n=e.result;i(JSON.parse(n)),this.phoneVibrateCallbackList.delete(t)}}},e.prototype.followOfficialAccount=function(t){var i=this;if(console.log("ULBridge-followOfficialAccount"),this._followOfficialAccountCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d",state:3});else if(this._followOfficialAccountCallback=t,e.debug){var n=function(e){i._followOfficialAccountCallback=null,t(e)};d.default.getInstance().setCallList("followOfficialAccount"),a.default.followOfficialAccount(n)}else l.default.isNative()?l.default.callNative("followOfficialAccount","()V"):(n=function(e){i._followOfficialAccountCallback=null,t(e)},c.default.followOfficialAccount(n))},e.prototype.followOfficialAccountCallback=function(e){if(e&&this._followOfficialAccountCallback){var t=JSON.parse(e.result);this._followOfficialAccountCallback(t),this._followOfficialAccountCallback=null}},e.prototype.getFollowOfficialAccountState=function(t){var i=this;if(console.log("ULBridge-getFollowOfficialAccountState"),this._getFollowOfficialAccountStateCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d",state:3});else if(this._getFollowOfficialAccountStateCallback=t,e.debug){var n=function(e){i._getFollowOfficialAccountStateCallback=null,t(e)};d.default.getInstance().setCallList("getFollowOfficialAccountState"),a.default.getFollowOfficialAccountState(n)}else l.default.isNative()?l.default.callNative("getFollowOfficialAccountState","()V"):(n=function(e){i._getFollowOfficialAccountStateCallback=null,t(e)},c.default.getFollowOfficialAccountState(n))},e.prototype.getFollowOfficialAccountStateCallback=function(e){if(e&&this._getFollowOfficialAccountStateCallback){var t=JSON.parse(e.result);this._getFollowOfficialAccountStateCallback(t),this._getFollowOfficialAccountStateCallback=null}},e.prototype.jumpToShareVideoView=function(t){var i=this;if(console.log("ULBridge-jumpToShareVideoView"),this._jumpToShareVideoParam)t.callback({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._jumpToShareVideoParam=t,e.debug){var n=t.callback,o=function(e){i._jumpToShareVideoParam=null,n(e)};t.callback=o,d.default.getInstance().setCallList("jumpToShareVideoView",JSON.stringify(t)),a.default.jumpToShareVideoView(t)}else if(l.default.isNative()){var r="{}";t&&(r=JSON.stringify(t)),l.default.callNative("jumpToShareVideoView","(Ljava/lang/String;)V",r)}else{var s=t.callback;o=function(e){i._jumpToShareVideoParam=null,s(e)},t.callback=o,c.default.jumpToShareVideoView(t)}},e.prototype.jumpToShareVideoViewCallback=function(e){if(e&&this._jumpToShareVideoParam){var t=JSON.parse(e.result);this._jumpToShareVideoParam.callback(t),this._jumpToShareVideoParam=null}},e.prototype.addSubscribe=function(t){var i=this;if(console.log("ULBridge-addSubscribe"),this._addSubscribeParam)t.callback({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._addSubscribeParam=t,e.debug){var n=t.callback,o=function(e){i._addSubscribeParam=null,n(e)};t.callback=o,d.default.getInstance().setCallList("addSubscribe",JSON.stringify(t)),a.default.addSubscribe(t)}else if(l.default.isNative()){var r="{}";t&&(r=JSON.stringify(t)),l.default.callNative("addSubscribe","(Ljava/lang/String;)V",r)}else{var s=t.callback;o=function(e){i._addSubscribeParam=null,s(e)},t.callback=o,c.default.addSubscribe(t)}},e.prototype.addSubscribeCallback=function(e){if(e&&this._addSubscribeParam){var t=JSON.parse(e.result);this._addSubscribeParam.callback(t),this._addSubscribeParam=null}},e.prototype.getSubscribeState=function(t){var i=this;if(console.log("ULBridge-getSubscribeState"),this._getSubscribeStateParam)t.callback({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._getSubscribeStateParam=t,e.debug){var n=t.callback,o=function(e){i._getSubscribeStateParam=null,n(e)};t.callback=o,d.default.getInstance().setCallList("getSubscribeState",JSON.stringify(t)),a.default.getSubscribeState(t)}else if(l.default.isNative()){var r="{}";t&&(r=JSON.stringify(t)),l.default.callNative("getSubscribeState","(Ljava/lang/String;)V",r)}else{var s=t.callback;o=function(e){i._getSubscribeStateParam=null,s(e)},t.callback=o,c.default.getSubscribeState(t)}},e.prototype.getSubscribeStateCallback=function(e){if(e&&this._getSubscribeStateParam){var t=JSON.parse(e.result);this._getSubscribeStateParam.callback(t),this._getSubscribeStateParam=null}},e.prototype.jumpLeisureSubject=function(t){var i=this;if(console.log("ULBridge-jumpLeisureSubject"),this._jumpLeisureSubjectCallback)t({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._jumpLeisureSubjectCallback=t,e.debug){var n=function(e){i._jumpLeisureSubjectCallback=null,t(e)};d.default.getInstance().setCallList("jumpLeisureSubject"),a.default.jumpLeisureSubject(n)}else l.default.isNative()?l.default.callNative("jumpLeisureSubject","()V"):(n=function(e){i._jumpLeisureSubjectCallback=null,t(e)},c.default.jumpLeisureSubject(n))},e.prototype.jumpLeisureSubjectCallback=function(e){if(e&&this._jumpLeisureSubjectCallback){var t=JSON.parse(e.result);this._jumpLeisureSubjectCallback(t),this._jumpLeisureSubjectCallback=null}},e.prototype.contentSecurityCheck=function(t){var i=this;if(console.log("ULBridge-contentSecurityCheck"),this._contentSecurityCheckParam)t.callback({bSuccess:!1,errMsg:"\u5df2\u6709\u8bf7\u6c42\u8fdb\u884c\u4e2d"});else if(this._contentSecurityCheckParam=t,e.debug){var n=t.callback,o=function(e){i._contentSecurityCheckParam=null,n(e)};t.callback=o,d.default.getInstance().setCallList("contentSecurityCheck",JSON.stringify(t)),a.default.contentSecurityCheck(t)}else if(l.default.isNative()){var r="{}";t&&(r=JSON.stringify(t)),l.default.callNative("contentSecurityCheck","(Ljava/lang/String;)V",r)}else{var s=t.callback;o=function(e){i._contentSecurityCheckParam=null,s(e)},t.callback=o,c.default.contentSecurityCheck(t)}},e.prototype.contentSecurityCheckCallback=function(e){if(e&&this._contentSecurityCheckParam){var t=JSON.parse(e.result);this._contentSecurityCheckParam.callback(t),this._contentSecurityCheckParam=null}},e._instance=null,e.debug=!1,e}();o.default=h,window["ULSDK.ULBridge"]=h.getInstance(),cc._RF.pop()},{}],ULButton:[function(e,t,i){"use strict";cc._RF.push(t,"ec446SRledIUJCcIU4yf+5O","ULButton");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULColor"),l=o("ULEventEnum"),d=o("ULRect"),c=o("ULControl"),u=o("ULLabel"),h=o("ULViewEnum"),p=function(e){function t(t){void 0===t&&(t=d.default.Zero);var i=e.call(this,t)||this;return i.titleLabel=new u.default,i.titleSettingState={},i.colorSettingState={},i.bgColorSettingState={},i._state=l.ULControlState.Normal,i.titleLabel.frame=i.bounds,i.addCustomSubView(),i}return a(t,e),Object.defineProperty(t.prototype,"font",{get:function(){return this.titleLabel.font},set:function(e){this.titleLabel.font=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textAlignment",{get:function(){return this.titleLabel.textAlignment},set:function(e){this.titleLabel.textAlignment=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleEdgeInsets",{get:function(){return this.titleLabel.titleEdgeInsets},set:function(e){this.titleLabel.titleEdgeInsets=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.setState=function(e){if(this._state!=e){this._state=e;var t=this.titleSettingState[e],i=this.colorSettingState[e],n=this.bgColorSettingState[e];t&&(this.titleLabel.text=t),i&&(this.titleLabel.textColor=i),n&&(this.titleLabel.backgroundColor=n)}},t.prototype.updateState=function(){var e=this._state;this._state=e==l.ULControlState.Normal?l.ULControlState.Highlighted:l.ULControlState.Normal,this.setState(e)},t.prototype.setTitleForState=function(e,t){this.titleSettingState[t]=e,this.updateState()},t.prototype.setTitleColorForState=function(e,t){this.colorSettingState[t]=e,this.updateState()},t.prototype.setBackgroundColorForState=function(e,t){this.bgColorSettingState[t]=e,this.updateState()},t.prototype.frameDidChange=function(){e.prototype.frameDidChange.call(this),this.titleLabel.frame=this.bounds},t.prototype.getAutoLayoutAdapteWidth=function(){return this.titleLabel.getAutoLayoutAdapteWidth()},t.prototype.getAutoLayoutAdapteHeight=function(e){return this.titleLabel.getAutoLayoutAdapteHeight(e)},t.prototype.addCustomSubView=function(){this.titleLabel.userInteractionEnabled=!1,this.textAlignment=h.ULTextAligment.Center,this.setTitleForState("Button",l.ULControlState.Normal),this.setTitleColorForState(s.default.Black,l.ULControlState.Normal),this.setBackgroundColorForState(s.default.RGB(220,220,220),l.ULControlState.Normal),this.setBackgroundColorForState(s.default.RGB(140,140,140),l.ULControlState.Highlighted),this.setState(l.ULControlState.Highlighted),this.setState(l.ULControlState.Normal),this.addSubView(this.titleLabel)},t.prototype.touchesBegan=function(t,i){this.setState(l.ULControlState.Highlighted),e.prototype.touchesBegan.call(this,t,i)},t.prototype.touchesMoved=function(t,i){this.state!=l.ULControlState.Highlighted||this.disPlayRect.containPoint(t)||this.setState(l.ULControlState.Normal),e.prototype.touchesMoved.call(this,t,i)},t.prototype.touchesEnded=function(t,i){this.setState(l.ULControlState.Normal),e.prototype.touchesEnded.call(this,t,i)},t.prototype.touchesCancelled=function(t,i){this.setState(l.ULControlState.Normal),e.prototype.touchesCancelled.call(this,t,i)},t}(c.default);r.default=p,cc._RF.pop()},{}],ULBuyQuantityExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"9fd18uJnKRC+a7Hm50osSKC","ULBuyQuantityExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULBuyQuantityState=void 0;var s,l=o("ULKitPop"),d=o("ULEvalExp"),c=o("ULLog"),u=o("ULTools"),h=o("ULAdvEnum"),p=o("ULBaseExecutor"),f=o("ULConfigExecutor"),g=o("ULGameExecutor"),v=o("ULGoldfingerExecutor"),_=o("ULPayExecutor"),y=o("ULStatisExecutor"),m=o("ULStorageExecutor"),S=o("ULSystemExecutor"),b=function(){function e(e){var t=this;this.delegate=null,this._isActive=!1,this._isNextDayOpen=!1,this._isPaymentBehavior=!1,this._onlineTime=0,this._videoTimes=0,this._payCount=0,this._ecpmCount=0,this._gameEventJudge=!1,this._isAddiction=!1,this._activeTime=u.default.secondsTime(),this.userData=null,this._onlineTimeRepotCache=0,this.timerId=null,this._startWork=!1,this.delegate=e,this.loadRecord(),g.default.registerListener({onGameHide:function(){t._onlineTimeRepotCache>0&&(t.delegate.addOnlineTime(t._onlineTimeRepotCache),t._onlineTimeRepotCache=0)}})}return Object.defineProperty(e.prototype,"addictionRule",{get:function(){return f.default.getStringValue("s_sdk_buyQuantity_addiction_rule")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"addictionGameEventId",{get:function(){return f.default.getStringValue("s_sdk_buyQuantity_addiction_game_eventId")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onlineTime",{get:function(){return this._onlineTime},set:function(e){this._onlineTime=e,this.isAddiction=this.isAddiction,this.saveRecord()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoTimes",{get:function(){return this._videoTimes},set:function(e){this._videoTimes=e,this.isAddiction=this.isAddiction,this.saveRecord()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"payCount",{get:function(){return this._payCount},set:function(e){this._payCount=e,this.isPaymentBehavior=this._payCount>0,this.isAddiction=this.isAddiction,this.saveRecord()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ecpmCount",{get:function(){return this._ecpmCount},set:function(e){this._ecpmCount=e,this.isAddiction=this.isAddiction,this.saveRecord()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAddiction",{get:function(){var e=this;if(this._isAddiction)return!0;var t=this.addictionRule;return!!t&&d.default.evalExpResults(t,function(t){return"onlineTime"==t?e.onlineTime:"videoTimes"==t?e.videoTimes:"payCount"==t?e.payCount:"ecpmCount"==t?e.ecpmCount:"gameEventJudge"==t?e.gameEventJudge:void 0})},set:function(e){!this._isAddiction&&e&&(this._isAddiction=!0,this.delegate.reportBuyQuantity(s.game_addiction))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive||(this._isActive=e,this._isActive&&this.delegate.reportBuyQuantity(s.active))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaymentBehavior",{get:function(){return this._isPaymentBehavior},set:function(e){this._isPaymentBehavior||(this._isPaymentBehavior=e,this._isPaymentBehavior&&this.delegate.reportBuyQuantity(s.active_pay))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNextDayOpen",{get:function(){return!!this._isNextDayOpen||u.default.secondsTime()-u.default.timeDay(this._activeTime)>86400},set:function(e){this._isNextDayOpen||(this._isNextDayOpen=e,this._isNextDayOpen&&(this.delegate.reportBuyQuantity(s.next_day_open),this.saveRecord()))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameEventJudge",{get:function(){return this._gameEventJudge},set:function(e){!this._gameEventJudge&&e&&(this._gameEventJudge=!0,this.isAddiction=this.isAddiction,this.delegate.gameEventDidJudge(),this.saveRecord())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startWork",{get:function(){return this._startWork},set:function(e){if(this._startWork!=e)if(this._startWork=e,this._startWork){var t=this;this.timerId=setInterval(function(){t.onlineTime+=10,t._onlineTimeRepotCache+=10,t._onlineTimeRepotCache>=60&&(t.delegate.addOnlineTime(t._onlineTimeRepotCache),t._onlineTimeRepotCache=0),t.saveRecord()},1e4),this.isActive=!0,this.isNextDayOpen=this.isNextDayOpen}else clearInterval(this.timerId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recordKey",{get:function(){return"ulsdk_buyQuantity_cache_"+S.default.gameId+"_"+S.default.channelId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getObjMessage",{get:function(){return{isActive:this._isActive,isNextDayOpen:this._isNextDayOpen,isPaymentBehavior:this._isPaymentBehavior,isAddiction:this._isAddiction,onlineTime:this._onlineTime,videoTimes:this._videoTimes,payCount:this._payCount,ecpmCount:this._ecpmCount,gameEventJudge:this._gameEventJudge,activeTime:this._activeTime,userData:this.userData}},enumerable:!1,configurable:!0}),e.prototype.loadRecord=function(){var e=u.default.safeJsonParse(m.default.getStorage(this.recordKey)||"{}");this._isActive=e.isActive||!1,this._isNextDayOpen=e.isNextDayOpen||!1,this._isPaymentBehavior=e.isPaymentBehavior||!1,this._onlineTime=e.onlineTime||0,this._videoTimes=e.videoTimes||0,this._payCount=e.payCount||0,this._ecpmCount=e.ecpmCount||0,this._gameEventJudge=e.gameEventJudge||!1,this._isAddiction=e.isAddiction||!1,this._activeTime=e.activeTime||u.default.secondsTime(),this.userData=e.userData},e.prototype.saveRecord=function(){m.default.setStorage(this.recordKey,JSON.stringify(this.getObjMessage))},e.prototype.playVideoAdComplete=function(){this.isActive&&(this.videoTimes+=1)},e.prototype.paySuccess=function(e){this.isActive&&(this.payCount+=e)},e.prototype.onAcceptEcpm=function(e){this.isActive&&(this.ecpmCount+=e)},e.prototype.onAcceptEvent=function(e){this.isActive&&e&&e==this.addictionGameEventId&&(this.gameEventJudge=!0)},e}();(function(e){e.active="active",e.next_day_open="next_day_open",e.active_pay="active_pay",e.game_addiction="game_addiction"})(s=r.ULBuyQuantityState||(r.ULBuyQuantityState={}));var C=function(e){function t(){var t=e.call(this)||this;return t.cache=new b({reportBuyQuantity:t.reportBuyQuantityHandle.bind(t),addOnlineTime:t.reportOnlineTimeHandle.bind(t),gameEventDidJudge:t.reportGameTagHandle.bind(t)}),t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){y.default.registerItem(this),_.default.registerListener(this),g.default.registerListener(this),v.default.registerItem(this)},Object.defineProperty(t.prototype,"debugMode",{get:function(){return 1==f.default.getNumberValue("n_sdk_buyQuantity_debug_mode",0)},enumerable:!1,configurable:!0}),t.prototype.sdkSwitch=function(){return 1==f.default.getNumberValue("n_sdk_buyQuantity_mode",0)},t.prototype.getBuyQuantityItem=function(e){return void 0===e&&(e=void 0),this.executeAsync({moduleName:e,type:p.ULBaseExecutionEnum.ChainFlashback,endType:p.ULBaseExecutionEndEnum.One,checkSupport:!0,checkCustom:!0,handle:function(e){return e}})},t.prototype.customPromise=function(e,t){return this.debugMode?new Promise(function(i){l.default.showModal({title:e,content:t,actions:[{name:"\u77e5\u9053\u4e86",handle:function(){i()}}]})}):Promise.resolve()},t.prototype.monitorBuyQuantityValidUserHandle=function(){var e=this;if(this.cache.isActive)return this.cache.startWork=!0,void this.customPromise("\u6e29\u99a8\u63d0\u793a","\u5df2\u662f\u4e70\u91cf\u7528\u6237\nuserData:"+JSON.stringify(this.cache.userData,null,2));this.getBuyQuantityItem().then(function(e){return e.monitorBuyQuantityValidUser()}).then(function(t){c.default.log("ULBuyQuantityExecutor.monitorBuyQuantityValidUserHandle userData:",t),e.cache.userData=u.default.clone(t),e.cache.startWork=!0,e.customPromise("\u6e29\u99a8\u63d0\u793a","\u4e70\u91cf\u7528\u6237\nuserData:"+JSON.stringify(e.cache.userData,null,2))},function(e){c.default.log("ULBuyQuantityExecutor.monitorBuyQuantityValidUserHandle err:",e)})},t.prototype.reportBuyQuantityHandle=function(e){var t=this;return c.default.log("ULBuyQuantityExecutor.reportBuyQuantityHandle state:",e),this.customPromise("\u6e29\u99a8\u63d0\u793a","\u4e70\u91cf\u4e0a\u62a5\nstate:"+e).then(function(){return t.getBuyQuantityItem()}).then(function(i){return i.reportBuyQuantity(e,u.default.clone(t.cache.userData))}).then(function(){return c.default.log("ULBuyQuantityExecutor.reportBuyQuantityHandle success"),t.customPromise("\u6e29\u99a8\u63d0\u793a","\u4e70\u91cf\u4e0a\u62a5\nstate:"+e+"\n\u4e0a\u62a5\u6210\u529f")},function(i){return c.default.log("ULBuyQuantityExecutor.reportBuyQuantityHandle err:",i),t.customPromise("\u6e29\u99a8\u63d0\u793a","\u4e70\u91cf\u4e0a\u62a5\nstate:"+e+"\n\u4e0a\u62a5\u5931\u8d25:"+i)})},t.prototype.monitorOnAcceptEcpmHandle=function(e,t,i){var n=this;c.default.log("ULBuyQuantityExecutor.monitorOnAcceptEcpmHandle arg:"+e+" advType:"+t+" ecpm:"+i),i>0?this.cache.onAcceptEcpm(i):this.getBuyQuantityItem().then(function(i){return i.monitorOnAcceptEcpm?i.monitorOnAcceptEcpm(e,t):Promise.reject(i.moduleName+" monitorOnAcceptEcpm unsupport")}).then(function(e){c.default.log("ULBuyQuantityExecutor.monitorOnAcceptEcpmHandle ecpm:",e),n.cache.onAcceptEcpm(e)},function(e){c.default.log("ULBuyQuantityExecutor.monitorOnAcceptEcpmHandle err:",e)})},t.prototype.reportPayOrderHandle=function(e){var t=this;c.default.log("ULBuyQuantityExecutor.reportPayOrderHandle value:",e),this.getBuyQuantityItem().then(function(i){return i.reportPayOrder?i.reportPayOrder(u.default.clone(t.cache.userData),e):Promise.reject(i.moduleName+" reportPayOrder unsupport")}).catch(function(e){c.default.log("ULBuyQuantityExecutor.reportPayOrderHandle err:",e)})},t.prototype.reportVideoAdvShowHandle=function(){var e=this;c.default.log("ULBuyQuantityExecutor.reportVideoAdvShowHandle"),this.getBuyQuantityItem().then(function(t){return t.reportVideoAdvShow?t.reportVideoAdvShow(u.default.clone(e.cache.userData)):Promise.reject(t.moduleName+" reportVideoAdvShow unsupport")}).catch(function(e){c.default.log("ULBuyQuantityExecutor.reportVideoAdvShowHandle err:",e)})},t.prototype.reportOnlineTimeHandle=function(e){var t=this;c.default.log("ULBuyQuantityExecutor.reportOnlineTimeHandle value:",e),this.getBuyQuantityItem().then(function(i){return i.reportOnlineTime?i.reportOnlineTime(u.default.clone(t.cache.userData),e):Promise.reject(i.moduleName+" reportOnlineTime unsupport")}).catch(function(e){c.default.log("ULBuyQuantityExecutor.reportOnlineTimeHandle err:",e)})},t.prototype.reportGameTagHandle=function(){var e=this;c.default.log("ULBuyQuantityExecutor.reportGameTagHandle"),this.getBuyQuantityItem().then(function(t){return t.reportGameTag?t.reportGameTag(u.default.clone(e.cache.userData)):Promise.reject(t.moduleName+" reportGameTag unsupport")}).catch(function(e){c.default.log("ULBuyQuantityExecutor.reportGameTagHandle err:",e)})},t.prototype.commonEvent=function(e){this.cache.isActive&&this.cache.onAcceptEvent(e)},t.prototype.reportAdvLog=function(e,t){this.cache.isActive&&e==h.ULAdStatisType.playCompletion&&t.advType==h.ULAdType.video&&(this.cache.playVideoAdComplete(),this.reportVideoAdvShowHandle(),this.monitorOnAcceptEcpmHandle(t.arg,t.advType,t.ecpm))},t.prototype.onPaySuccess=function(e,t){if(this.cache.isActive){var i=t.price;this.cache.paySuccess(i),this.reportPayOrderHandle(i)}},t.prototype.onModuleLoadComplete=function(){this.monitorBuyQuantityValidUserHandle()},t.prototype.goldfingerView=function(e){var i=this;return new v.ULGoldfingerStackView("\u4e70\u91cf\u6a21\u5757",e,function(e){var n=i.getItem({type:p.ULBaseExecutionEnum.ChainFlashback,checkSupport:!0,checkCustom:!0}),o=[{name:"\u4e70\u91cf\u5f00\u5173:",value:t.isSupport}],r=[{name:"\u6709\u6548\u4e70\u91cf\u6a21\u5757:",value:n?n.moduleName:"\u65e0"}],a=[{name:"\u76f8\u5173\u914d\u7f6e:",handle:function(){l.default.showInformationFlow({title:"\u4e70\u91cf\u76f8\u5173\u914d\u7f6e",content:u.default.getObjMessage({addictionGameEventId:i.cache.addictionGameEventId,addictionRule:i.cache.addictionRule})})}},{name:"\u4e70\u91cf\u7528\u6237\u4fe1\u606f:",handle:function(){l.default.showInformationFlow({title:"\u4e70\u91cf\u7528\u6237\u4fe1\u606f",content:u.default.getObjMessage(i.cache.getObjMessage)})}}];e.addStackForSwitchs(o),e.addStackLabels(r),e.addStackButtons(a)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t}(p.default);r.default=C,cc._RF.pop()},{}],ULCdkExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"94fbfUZZfBB54nc94BjSNud","ULCdkExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULKitPop"),l=o("ULHttp"),d=o("ULLog"),c=o("ULTools"),u=o("ULBaseExecutor"),h=o("ULConfigExecutor"),p=o("ULGoldfingerExecutor"),f=o("ULSystemExecutor"),g=o("ULUserExecutor"),v=function(){function e(){this.priority=1,this.moduleName="ULDefaultCdkItem"}return Object.defineProperty(e.prototype,"cdkUrl",{get:function(){return f.default.commonServerUrl+"/cdk/usecdkv8"},enumerable:!1,configurable:!0}),e.prototype.requestUseCdk=function(e,t){var i={gameId:f.default.gameId,userId:g.default.uuid,gameVersion:t,channelId:f.default.channelId,cdkStr:e,platform:"h5"},n=this.cdkUrl;return l.default.getPromise({url:n,params:i}).then(function(e){if(d.default.log("ULCdkExecutor-requestUseCdk-then:",e),1==c.default.getNumberValue(e,"code")){for(var t=[],i=0,n=c.default.getArrayValue(e,"data");i<n.length;i++){var o=n[i],r=c.default.getStringValue(o,"goodsid"),a=c.default.getNumberValue(o,"count");t.push({goodsId:r,goodsNum:a})}return Promise.resolve(t)}return Promise.reject(JSON.stringify(e))})},e}(),_=function(e){function t(){var t=e.call(this)||this;return t.register(new v),t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){p.default.registerItem(this)},t.prototype.sdkSwitch=function(){return 1==h.default.getNumberValue("n_sdk_cdk_mode",1)},t.prototype.getUseCdkHandle=function(e,i,n){return void 0===n&&(n=void 0),t.instance.executeAsync({moduleName:n,type:u.ULBaseExecutionEnum.ChainFlashback,endType:u.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(t){return t.requestUseCdk(e,i)}})},t.prototype.goldfingerView=function(e){var i=this;return new p.ULGoldfingerStackView("CDK\u7cfb\u7edf",e,function(e){var n=0,o="",r="",a=["\u9ed8\u8ba4"].concat(i.getAllRegisterModuleName()),l=[{name:"CDK\u5f00\u5173:",value:t.isSupport}],d=[{name:"\u8bf7\u9009\u62e9\u6e20\u9053:",value:a,width:160,handle:function(e){n=e}}],c=[{name:"\u8bf7\u8f93\u5165CdkStr:",width:240,value:o,handle:function(e){o=e}},{name:"\u8bf7\u8f93\u5165GameVersion:",width:240,value:r,handle:function(e){r=e}}],u=[{name:"\u6d4b\u8bd5CDK:",width:160,buttonText:"\u5f00\u59cb\u6d4b\u8bd5",handle:function(){var e=a[n],t=s.default.showInformationFlow({title:"CDK\u6d4b\u8bd5\u6d41\u7a0b",content:["\u5f00\u59cb\u8bf7\u6c42:"+e+" \nCdkStr:"+o+" \nGameVersion:"+r]});i.getUseCdkHandle(o,r,0==n?void 0:e).then(function(e){t.sendMessage("\u8bf7\u6c42\u6210\u529f\n"+JSON.stringify(e,null,2))},function(e){t.sendMessage("\u8bf7\u6c42\u5931\u8d25\n errMsg:"+e)})}}];e.addStackForSwitchs(l),e.addStackMenuViews(d),e.addStackTextFiled(c),e.addStackButtons(u)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.getUseCdk=function(e,i){return void 0===i&&(i=""),t.instance.getUseCdkHandle(e,i)},t}(u.default);r.default=_,cc._RF.pop()},{}],ULChainAdvExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"e8f50eROzVM95S5pDCMSOly","ULChainAdvExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULEventEnum"),l=o("ULColor"),d=o("ULFont"),c=o("ULRect"),u=o("ULLabel"),h=o("ULMenuView"),p=o("ULTextField"),f=o("ULView"),g=o("ULViewEnum"),v=o("ULKitPop"),_=o("ULError"),y=o("ULLog"),m=o("ULTools"),S=o("ULAdvAD"),b=o("ULAdvEnum"),C=o("ULAdvExpManager"),I=o("ULAdvSlot"),F=o("ULAdvTemplate"),R=o("ULBaseExecutor"),w=o("ULCopExecutor"),L=o("ULGameExecutor"),T=o("ULGoldfingerExecutor"),x=o("ULStatisExecutor"),P=o("ULAdvExecutor"),A=o("ULAdvDelegate"),E=function(e){function t(){var t=e.call(this)||this;return t.priority=2,t.moduleName="\u94fe\u5f0f\u5e7f\u544a",t._advBaseTypeArray=[],t._advObjCache={},t._advTemplateCache={},t._advSlotCache={},t._advObjectBaseCache={},t.initExecutor(),t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.updateAdv=function(e,t){var i=this;this._advTemplateCache={},this._advSlotCache={},this._advObjectBaseCache={};for(var n=0,o=Object.keys(t);n<o.length;n++){var r=o[n],a=t[r],s=new F.default(r,a,function(e,t,n){var o=i._advObjectBaseCache[e]||{};if(o[t])return o[t];var r=i._advObjCache[e];if(r){var a=r.moduleClass,s=r.advBaseObj,l=new a(t,n);return o[t]=l,i._advObjectBaseCache[e]=o,l.adBaseConfigSuccess=s.configSuccess,l}return y.default.warn(i.moduleName,":\u6ca1\u6709\u8be5\u5e7f\u544a\u6a21\u5757 "+e),null});this._advTemplateCache[r]=s}for(var l=0,d=Object.keys(e);l<d.length;l++){var c=d[l],u=e[c],h=new I.default(c,u,function(e){return i._advTemplateCache[e]||null});this._advSlotCache[c]=h;for(var p=0,f=h.getSubAids();p<f.length;p++){var g=f[p];this._advSlotCache[g]=h}}},t.prototype.initExecutor=function(){},t.prototype.addListener=function(){P.default.registerItem(this),L.default.registerListener({onModuleLoadComplete:this.onModuleLoadComplete.bind(this)})},t.prototype.registerItem=function(e){this._advBaseTypeArray.indexOf(e)>=0||this._advBaseTypeArray.push(e)},t.prototype.initAllAdvBase=function(){for(var e=this,t=0,i=e._advBaseTypeArray;t<i.length;t++){var n=i[t];e.register(new n)}return e.executeAsync({type:R.ULBaseExecutionEnum.ChainFlashback,endType:R.ULBaseExecutionEndEnum.All,promiseHandle:function(t){return new Promise(function(i,n){t.startWork(),t.onInitWithAction({onLoad:function(){for(var n=0,o=t.getAllAdvObjectBase();n<o.length;n++){var r=o[n],a=r;a.moduleName&&!e._advObjCache[a.moduleName]&&(e._advObjCache[a.moduleName]={moduleClass:r,advBaseObj:t})}i()},onError:function(e){n(e)}})})}}).catch(function(e){return y.default.error("ULChainAdvExecutor initAllAdvBase startWork err:",e.stack),L.default.reportErrMsg("ULChainAdvExecutor initAllAdvBase",e.stack),Promise.resolve()})},t.prototype.onModuleLoadComplete=function(){var e=this;console.log("ULChainAdvExecutor.onModuleLoadComplete"),this.initAllAdvBase().then(function(){e.onCopDidChange(),w.default.registerListener({onCopDidChange:e.onCopDidChange.bind(e)})})},t.prototype.onCopDidChange=function(){console.log("ULChainAdvExecutor.onCopDidChange");var e=w.default.getObjectValue("o_sdk_adv_show_list")||{},t=m.default.getObjectValue(e,"advSlots",null),i=m.default.getObjectValue(e,"templates",null);i?t?(this.updateAdv(t,i),C.default.updateExpKeys(Object.keys(this._advTemplateCache))):y.default.warn(this.moduleName,":advSlots is null,please check"):y.default.warn(this.moduleName,":templates is null,please check")},t.prototype.openAdv=function(e,t){x.default.reportAdvLog(b.ULAdStatisType.totalAdvRequest,{advId:t.advId});var i=this._advSlotCache[t.advId];if(!i)return e.addError(new _.default("0","\u8be5\u5e7f\u544a\u4f4d\u3010"+t.advId+"\u3011\u6ca1\u6709\u914d\u7f6e\u5e7f\u544a")),void(e.isfail=!0);var n=i.createAdvAD();n.bindSupDele(e),n.show(t)},t.prototype.isReady=function(e){var t=this._advSlotCache[e];return t&&t.isReady},t.prototype.getAdvObjectList=function(e){return this.executeSync({moduleName:e,type:R.ULBaseExecutionEnum.ChainFlashback,endType:R.ULBaseExecutionEndEnum.One,defaultValue:[],handle:function(e,t){for(var i=0,n=e.getAllAdvObjectBase();i<n.length;i++){var o=n[i];o.moduleName&&t.push(o.moduleName)}return t}})},t.prototype.getRegisterArgs=function(e){var t=this._advObjectBaseCache[e]||[];return Object.keys(t)},t.prototype.getAllAdvBaseMessage=function(){return this.executeSync({type:R.ULBaseExecutionEnum.ChainFlashback,endType:R.ULBaseExecutionEndEnum.All,defaultValue:[],handle:function(e,t){return t.push(e.moduleName+" : "+e.configSuccess+" : "+e.configErrMsg),t}})},t.prototype.createAdvAD=function(e){var t=this,i=new A.default({show:function(e,i){t.openAdv(e,i)},isReady:function(){return t.isReady(e.advId)}});return new S.default(i)},t.prototype.subAdvModuleGoldfingerStackView=function(e){var t=this,i=new T.ULGoldfingerStackView(this.moduleName,e),n=[{name:"\u6a21\u5757\u521d\u59cb\u5316",width:160,handle:function(){v.default.showInformationFlow({title:"\u5e7f\u544a\u6a21\u5757\u521d\u59cb\u5316\u4fe1\u606f",content:t.getAllAdvBaseMessage()})}}],o=new f.default(c.default.Init(0,0,e,40));o.backgroundColor=l.default.Clear;var r=new u.default(c.default.Init(0,0,160,40));r.center=new c.ULPoint({x:e/2,y:r.center.y}),r.backgroundColor=l.default.Clear,r.textAlignment=g.ULTextAligment.Center,r.textColor=l.default.White,r.font=d.default.boldSystem(20),r.text="\u5e7f\u544a\u4f4d";var a=new p.default(c.default.Init(e-160,r.frame.y,160,40));a.textAlignment=g.ULTextAligment.Center;var _=new h.default(r.frame);_.hidden=!0,_.font=d.default.boldSystem(16),_.registerControlEvent(s.ULControlEvents.ValueChange,function(e){var i=t.getRegisterArgs(_.dataSource[e]);y.dataSource=i});var y=new h.default(a.frame);y.hidden=!0,y.font=d.default.boldSystem(16);var m=["\u94fe\u5f0f"].concat(this.getAllRegisterModuleName()),S=new h.default(c.default.Init(0,r.frame.y,160,40));S.dataSource=m,S.font=d.default.boldSystem(16),S.registerControlEvent(s.ULControlEvents.ValueChange,function(e){if(r.hidden=0!=e,a.hidden=0!=e,_.hidden=0==e,y.hidden=0==e,e>0){var i=t.getAdvObjectList(m[e]);_.dataSource=i}});var b=[{name:"\u5e7f\u544a\u6d4b\u8bd5:",buttonText:"\u64ad\u653e\u5e7f\u544a",width:160,handle:function(){var e=v.default.showInformationFlow({title:"\u5e7f\u544a\u6d4b\u8bd5\u6d41\u7a0b"}),i=null,n={advId:a.text,style:{x:.5,y:.5,width:.6}};if(y.hidden)i=t.createAdvAD(n);else{var o=_.dataSource[_.selectedNum],r=y.dataSource[y.selectedNum],s=(t._advObjectBaseCache[o]||[])[r];if(!s)return void e.sendMessage("\u672a\u914d\u7f6e\u8be5\u5e7f\u544a\u6a21\u5757\u3010"+o+"\u3011 \u53c2\u6570\u3010"+r+"\u3011");i=s.createAdvAD()}i.onMessage(function(t){e.sendMessage(t)}),i.show(n)}}];return o.addSubView(r),o.addSubView(a),o.addSubView(_),o.addSubView(y),o.addSubView(S),i.addStackCenterLabels(["------------"+this.moduleName+"------------"]),i.addStackButtons(n),i.addStackView(o),i.addStackButtons(b),i},t.registerItem=function(e){t.instance.registerItem(e)},t}(R.default);r.default=E,cc._RF.pop()},{}],ULChannelRankListExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"034d0TRaW5GE68mUh/V3yCL","ULChannelRankListExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULChannelRelationType=r.ULChannelRankType=void 0;var s,l,d=o("ULKitPop"),c=o("ULBaseExecutor"),u=o("ULGoldfingerExecutor");(function(e){e.day="day",e.week="week",e.month="month",e.all="all"})(s=r.ULChannelRankType||(r.ULChannelRankType={})),function(e){e.default="default",e.friend="friend",e.all="all"}(l=r.ULChannelRelationType||(r.ULChannelRelationType={}));var h=function(e){function t(){var t=e.call(this)||this;return t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){u.default.registerItem(this)},t.prototype.setImRankData=function(e,t){return void 0===t&&(t=void 0),this.getItemAsync({moduleName:t,type:c.ULBaseExecutionEnum.ChainFlashback,checkSupport:!0,checkCustom:!0}).then(function(t){return t.setImRankData(e)})},t.prototype.getImRankList=function(e,t){return void 0===t&&(t=void 0),this.getItemAsync({moduleName:t,type:c.ULBaseExecutionEnum.ChainFlashback,checkSupport:!0,checkCustom:!0}).then(function(t){return t.getImRankList(e)})},t.prototype.goldfingerView=function(e){var i=this;return new u.ULGoldfingerStackView("\u6e20\u9053\u6392\u884c\u699c",e,function(e){var n=0,o=0,r=0,a=0,c=["\u9ed8\u8ba4"].concat(i.getAllRegisterModuleName()),u=[s.all,s.month,s.week,s.day],h=[l.default,l.friend,l.all],p=[{name:"\u6e20\u9053\u6392\u884c\u699c\u5f00\u5173:",value:t.isSupport}],f=[{name:"\u8bf7\u9009\u62e9\u6e20\u9053:",value:c,width:160,handle:function(e){n=e}},{name:"\u6392\u884c\u699c\u7c7b\u578b:",value:u,width:160,handle:function(e){o=e}},{name:"\u6570\u636e\u7c7b\u578b:",value:["0\uff1a\u6570\u5b57\u7c7b\u578b","1\uff1a\u679a\u4e3e\u7c7b\u578b"],width:160,handle:function(e){r=e}},{name:"\u699c\u5355\u5c55\u793a\u8303\u56f4:",value:h,width:160,handle:function(e){a=e}}],g=[{name:"\u6d4b\u8bd5\u60c5\u666f:",width:160,buttonText:"\u5c55\u793a\u6392\u884c\u699c",handle:function(){i.getImRankList({rankType:u[o],relationType:h[a],dataType:r},0==n?void 0:c[n]).then(function(){d.default.showToast({title:"\u5c55\u793a\u6392\u884c\u699c\u6210\u529f"})},function(e){d.default.showToast({title:"\u5c55\u793a\u6392\u884c\u699c\u5931\u8d25\n"+e})})}}];e.addStackForSwitchs(p),e.addStackMenuViews(f),e.addStackButtons(g)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.setImRankData=function(e){return t.instance.setImRankData(e)},t.getImRankList=function(e){return t.instance.getImRankList(e)},t}(c.default);r.default=h,cc._RF.pop()},{}],ULCheckManager:[function(e,t,i){"use strict";cc._RF.push(t,"020e7040D9DpYCq5VUXaHU6","ULCheckManager");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this._methodList=null,this._callList=[],this._mustList=[],this._methodMap=new Map,this._logArray=[],this._levelList=[],this.init()}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.init=function(){var e=this;this._methodList=["initSdk","loadRemoteConfig","getLocalConfig","onShow","onHide","levelStart","levelComplete","coinChange","itemBuy","buyAction","commonEvent","videoPointEvent","patchInfo","getAdvState","openAdv","openPay","reOpenPay","setPrePayListener","deliverGoodsEvent","setPauseSoundListener","setResumeSoundListener","useCdkey","openAdvancedSetting","showPrivacy","openPermissionSetting","wipeAccount","setStorage","setStorageSync","getStorage","getStorageSync","removeStorage","removeStorageSync","clearStorage","clearStorageSync","setClearStorageListener","setCloudStorage","getCloudStorage","setCoverStorageListener","getUserNumInRank","getUserInfoByIdInRank","getUserInfoListByRankId","reportUserInfoInRank","modifyScoreByArray","setRankData","getRankDataList","login","openJump","jumpOtherGame","jumpLeisureSubject","getShortcutState","installShortcut","openShare","shareGameVideo","jumpToShareVideoView","getRecorder","joinGroup","getFollowOfficialAccountState","followOfficialAccount","setJumpNewGuideListener","setChangePatchInfoListener","setCheckDebugWhiteUserListener","getSubscribeState","addSubscribe","getServerTime","checkNetwork","openUrl","phoneVibrate","openInviteComment","addGameToMyFavorite","getChannelUserInfo","setAppShareListener","exitGame","contentSecurityCheck"],this._methodList.forEach(function(t){e._methodMap.set(t,{method:t,time:"",num:0,param:""})}),this._mustList=["openAdvancedSetting","shareGameVideo","jumpLeisureSubject"]},e.prototype.setCallList=function(e,t){var i=this._methodMap.get(e);if(!i)throw new Error("\u9519\u8bef\uff1aunknown method "+e+",\u8bf7\u8054\u7cfbSDK\u5f00\u53d1\u4eba\u5458\u6392\u67e5");i.num++,i.time=this.timeFormat(),i.param=t||"",this._logArray.push(i),-1==this._callList.indexOf(e)&&this._callList.push(e)},e.prototype.getCallList=function(){return this._callList},e.prototype.getUnCallList=function(){var e=this,t=[];return this._methodList.forEach(function(i){-1==e._callList.indexOf(i)&&t.push(i)}),t},e.prototype.getMustCallList=function(){var e=this,t=[];return this._mustList.forEach(function(i){t.push(e._methodMap.get(i))}),t},e.prototype.timeFormat=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"."+e.getMilliseconds()},Object.defineProperty(e.prototype,"logArray",{get:function(){return this._logArray},set:function(){},enumerable:!1,configurable:!0}),e.prototype.levelStart=function(e){e&&e.levelName&&this._levelList.push(e.levelName)},e.prototype.levelComplete=function(e){e&&e.levelName&&(-1!=this._levelList.indexOf(e.levelName)?this._levelList.splice(this._levelList.indexOf(e.levelName),1):this._levelList.push(e.levelName))},Object.defineProperty(e.prototype,"levelList",{get:function(){return this._levelList},enumerable:!1,configurable:!0}),e._instance=null,e}();n.default=o,cc._RF.pop()},{}],ULClipboardExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"7f2beJeD4BOVaWnJpEJ+c8u","ULClipboardExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULBaseExecutor"),l=function(e){function t(){return e.call(this)||this}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.getClipboardData=function(){return t.instance.executeAsync({type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,promiseHandle:function(e){return e.getClipboardData()}})},t.setClipboardData=function(e){return t.instance.executeAsync({type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,promiseHandle:function(t){return t.setClipboardData(e)}})},t}(s.default);r.default=l,cc._RF.pop()},{}],ULCloudStorageExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"a96aeh7vFhOuqNbrL8c8O8W","ULCloudStorageExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULBaseExecutor"),l=function(e){function t(){return e.call(this)||this}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.setCloudStorage=function(e,i,n){return void 0===n&&(n=!1),t.instance.executeAsync({type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(t){return t.setCloudStorage(e,i,n)}})},t.getCloudStorage=function(e){return t.instance.executeAsync({type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(t){return t.getCloudStorage(e)}})},t.removeCloudStorage=function(e){return t.instance.executeAsync({type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(t){return t.removeCloudStorage(e)}})},t.clearCloudStorage=function(){return t.instance.executeAsync({type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(e){return e.clearCloudStorage()}})},t}(s.default);r.default=l,cc._RF.pop()},{}],ULColor:[function(e,t,i){"use strict";cc._RF.push(t,"f8e53sGhKJF0p2GVZsQ00iJ","ULColor");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t,i,n){this.r=255,this.g=255,this.b=255,this.a=1,this.r=Math.min(Math.max(0,e),255),this.g=Math.min(Math.max(0,t),255),this.b=Math.min(Math.max(0,i),255),this.a=Math.min(Math.max(0,n),1)}return Object.defineProperty(e,"White",{get:function(){return this.RGB(255,255,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Black",{get:function(){return this.RGB(0,0,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Green",{get:function(){return this.RGB(0,255,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Blue",{get:function(){return this.RGB(0,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Gray",{get:function(){return this.RGB(160,160,160)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Red",{get:function(){return this.RGB(255,0,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Clear",{get:function(){return this.RGBA(255,255,255,0)},enumerable:!1,configurable:!0}),e.RGB=function(e,t,i){return this.RGBA(e,t,i,1)},e.RGBA=function(t,i,n,o){return new e(t,i,n,o)},Object.defineProperty(e.prototype,"colorStr",{get:function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hexadecimalColorStr",{get:function(){if(this._hexadecimalColorStr)return this._hexadecimalColorStr;var e=function(e){return""+(e>15?"":0)+e.toString(16)};return this._hexadecimalColorStr="#"+e(this.r)+e(this.g)+e(this.b)+(1===this.a?"":e(Math.floor(255*this.a))),this._hexadecimalColorStr},enumerable:!1,configurable:!0}),e.prototype.conversion=function(t){var i=Math.min(Math.max(0,t),1);return e.RGBA(this.r,this.g,this.b,this.a*i)},e.prototype.getWebGLColorData=function(){return[this.r/255,this.g/255,this.b/255,this.a]},e.prototype.isEqual=function(e){return this==e||this.r==e.r&&this.g==e.g&&this.b==e.b&&this.a==e.a},e}();n.default=o,cc._RF.pop()},{}],ULCompositeConstraint:[function(e,t,i){"use strict";cc._RF.push(t,"c592210JShLrqpqv4kdV0NZ","ULCompositeConstraint");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULConstraint"),l=o("ULViewConstraint"),d=function(e){function t(t){var i=e.call(this)||this;return i.children=[],i.delegate=null,i.children=[].concat(t),i}return a(t,e),Object.defineProperty(t.prototype,"layoutConstant",{set:function(e){for(var t=0;t<this.children.length;t++)this.children[t].layoutConstant=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layoutMultiplier",{set:function(e){for(var t=0;t<this.children.length;t++)this.children[t].layoutMultiplier=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layoutPriority",{set:function(e){for(var t=0;t<this.children.length;t++)this.children[t].layoutPriority=e},enumerable:!1,configurable:!0}),t.prototype.addConstraintWithLayoutAttribute=function(e){return this.constraintAddLayoutAttribute(this,e),this},t.prototype.equalToWithRelation=function(e,t){for(var i=0;i<this.children.length;i++)this.children[i].equalToWithRelation(e,t);return this},Object.defineProperty(t.prototype,"viewConstraints",{get:function(){for(var e=[],i=0,n=this.children;i<n.length;i++){var o=n[i];o instanceof l.default?e.push(o):o instanceof t&&(e=e.concat(o.viewConstraints))}return e},enumerable:!1,configurable:!0}),t.prototype.constraintShouldBeReplaced=function(e,t){var i=this.children.indexOf(e);this.children[i]=t},t.prototype.constraintAddLayoutAttribute=function(e,t){var i=this.delegate.constraintAddLayoutAttribute(this,t);return i.delegate=this,this.children.push(i),i},t}(s.default);r.default=d,cc._RF.pop()},{}],ULConfigExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"7d96eA8GnZHeotqKL4QdiuV","ULConfigExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0});var l=o("cConfig"),d=o("ULLog"),c=o("ULTools"),u=o("ULBaseExecutor"),h=o("ULCopExecutor"),p=o("ULGoldfingerExecutor"),f=o("ULKitPop"),g=o("ULGameExecutor"),v=function(e){function t(){var t=e.call(this)||this;return t._mergeConfig={},t.initExecutor(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t,this._instance.addListener()),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mergeConfig",{get:function(){return this._mergeConfig},set:function(e){c.default.equals(e,this._mergeConfig)||(this.onConfigWillChange(),this._mergeConfig=e,this.onConfigDidChange())},enumerable:!1,configurable:!0}),t.prototype.initExecutor=function(){this._localConfig=c.default.clone(l.cConfig),this._mergeConfig=c.default.clone(l.cConfig)},t.prototype.addListener=function(){h.default.registerListener({onCopDidChange:this.onCopDidChange.bind(this)}),p.default.registerItem(this)},t.prototype.onCopDidChange=function(){this.mergeConfig=s(s({},this._localConfig),h.default.mergeCopObject)},t.prototype.onConfigWillChange=function(){this.executeConcurrencyAll(function(e){e.onConfigWillChange&&e.onConfigWillChange()}).catch(function(e){d.default.log("ULConfigExecutor onConfigWillChange err:",e.stack),g.default.reportErrMsg("ULConfigExecutor onConfigWillChange",e.stack)})},t.prototype.onConfigDidChange=function(){this.executeConcurrencyAll(function(e){e.onConfigDidChange&&e.onConfigDidChange()}).catch(function(e){d.default.log("ULConfigExecutor onConfigDidChange err:",e.stack),g.default.reportErrMsg("ULConfigExecutor onConfigWillChange",e.stack)})},t.prototype.goldfingerView=function(e){var t=this;return new p.ULGoldfingerStackView("Config\u6a21\u5757",e,function(e){var i=[{name:"\u521d\u59cb\u914d\u7f6e",handle:function(){f.default.showInformationFlow({title:"\u521d\u59cb\u914d\u7f6e",content:c.default.getObjMessage(t._localConfig),isAllowSearch:!0})}},{name:"\u6700\u65b0\u914d\u7f6e",handle:function(){f.default.showInformationFlow({title:"\u6700\u65b0\u914d\u7f6e",content:c.default.getObjMessage(t._mergeConfig),isAllowSearch:!0})}}];e.addHorizontalButtons(i)})},t.registerListener=function(e){t.instance.register(e)},t.removeListener=function(e){t.instance.unRegister(e)},t.getStringValue=function(e,i){return void 0===i&&(i=""),c.default.getStringValue(t.instance.mergeConfig,e,i)},t.getNumberValue=function(e,i){return c.default.getNumberValue(t.instance.mergeConfig,e,i)},t.getArrayValue=function(e,i){return void 0===i&&(i=[]),c.default.clone(c.default.getArrayValue(t.instance.mergeConfig,e,i))},t.getObjectValue=function(e,i){return void 0===i&&(i={}),c.default.clone(c.default.getObjectValue(t.instance.mergeConfig,e,i))},t}(u.default);r.default=v,cc._RF.pop()},{}],ULConstraintMaker:[function(e,t,i){"use strict";cc._RF.push(t,"f76c7NROgREDbd/jwkFC5fR","ULConstraintMaker");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULCompositeConstraint"),a=n("ULLayout"),s=n("ULViewAttribute"),l=n("ULViewConstraint"),d=function(){function e(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this.constraints=[],this.updateExisting=!1,this.removeExisting=!1,this.delegate=e,this.updateExisting=t,this.removeExisting=i}return e.prototype.constraintShouldBeReplaced=function(e,t){var i=this.constraints.indexOf(e);this.constraints[i]=t},e.prototype.constraintAddLayoutAttribute=function(e,t){var i=new s.default(this.delegate,t),n=new l.default(i);if(e&&e instanceof l.default){var o=new r.default([e,n]);return o.delegate=this,this.constraintShouldBeReplaced(e,o),o}return e||(n.delegate=this,this.constraints.push(n)),n},Object.defineProperty(e.prototype,"left",{get:function(){return this.constraintAddLayoutAttribute(null,a.ULLayoutAttribute.Left)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.constraintAddLayoutAttribute(null,a.ULLayoutAttribute.Right)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.constraintAddLayoutAttribute(null,a.ULLayoutAttribute.Top)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.constraintAddLayoutAttribute(null,a.ULLayoutAttribute.Bottom)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerX",{get:function(){return this.constraintAddLayoutAttribute(null,a.ULLayoutAttribute.CenterX)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerY",{get:function(){return this.constraintAddLayoutAttribute(null,a.ULLayoutAttribute.CenterY)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.constraintAddLayoutAttribute(null,a.ULLayoutAttribute.Width)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.constraintAddLayoutAttribute(null,a.ULLayoutAttribute.Height)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewConstraints",{get:function(){for(var e=[],t=0,i=this.constraints;t<i.length;t++){var n=i[t];n instanceof l.default?e.push(n):n instanceof r.default&&(e=e.concat(n.viewConstraints))}return e},enumerable:!1,configurable:!0}),e.prototype.install=function(){var e=[].concat(this.delegate.getInstallViewConstraints());if(this.removeExisting)for(;e.length>0;)(i=e.shift()).uninstall();for(var t=this.viewConstraints;t.length>0;){var i;(i=t.shift()).updateExisting=this.updateExisting,i.install()}},e}();o.default=d,cc._RF.pop()},{}],ULConstraint:[function(e,t,i){"use strict";cc._RF.push(t,"d2defXtwJNL8a6davIhKY+e","ULConstraint");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULLayout"),a=function(){function e(){this.delegate=null,this.updateExisting=!1}return Object.defineProperty(e.prototype,"offset",{get:function(){var e=this;return function(t){return e.layoutConstant=t,e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multipliedBy",{get:function(){var e=this;return function(t){return e.layoutMultiplier=t,e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dividedBy",{get:function(){var e=this;return function(t){return e.layoutMultiplier=1/t,e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"priority",{get:function(){var e=this;return function(t){return e.layoutPriority=Math.max(Math.min(1e3,t),0),e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.addConstraintWithLayoutAttribute(r.ULLayoutAttribute.Left)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.addConstraintWithLayoutAttribute(r.ULLayoutAttribute.Right)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.addConstraintWithLayoutAttribute(r.ULLayoutAttribute.Top)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.addConstraintWithLayoutAttribute(r.ULLayoutAttribute.Bottom)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerX",{get:function(){return this.addConstraintWithLayoutAttribute(r.ULLayoutAttribute.CenterX)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerY",{get:function(){return this.addConstraintWithLayoutAttribute(r.ULLayoutAttribute.CenterY)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.addConstraintWithLayoutAttribute(r.ULLayoutAttribute.Width)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.addConstraintWithLayoutAttribute(r.ULLayoutAttribute.Height)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"and",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"equalTo",{get:function(){var e=this;return function(t){return e.equalToWithRelation(t,r.ULLayoutRelation.equalTo)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"greaterThanOrEaualTo",{get:function(){var e=this;return function(t){return e.equalToWithRelation(t,r.ULLayoutRelation.greaterThanOrEaualTo)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lessThanOrEaualTo",{get:function(){var e=this;return function(t){return e.equalToWithRelation(t,r.ULLayoutRelation.lessThanOrEaualTo)}},enumerable:!1,configurable:!0}),e}();o.default=a,cc._RF.pop()},{}],ULControl:[function(e,t,i){"use strict";cc._RF.push(t,"be78fNlRNpOQqkVgi6uOiJz","ULControl");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULEventEnum"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registedCache={},t}return a(t,e),t.prototype.registerControlEvent=function(e,t){this.registedCache[e]=t},t.prototype.removeControlEvent=function(e){delete this.registedCache[e]},t.prototype.postValueChange=function(e){var t=this.registedCache[s.ULControlEvents.ValueChange];t&&t(e)},t.prototype.touchesBegan=function(){var e=this.registedCache[s.ULControlEvents.TouchDown];e&&e()},t.prototype.touchesMoved=function(){var e=this.registedCache[s.ULControlEvents.TouchDrag];e&&e()},t.prototype.touchesEnded=function(e){var t;this.disPlayRect.containPoint(e)?(t=this.registedCache[s.ULControlEvents.TouchUpInside])&&t():(t=this.registedCache[s.ULControlEvents.TouchUpOutside])&&t()},t.prototype.touchesCancelled=function(){var e=this.registedCache[s.ULControlEvents.TouchCancel];e&&e()},t}(o("ULView").default);r.default=l,cc._RF.pop()},{}],ULCopExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"2b975PJVdBAY4DKBDWiEsZp","ULCopExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ULEventEnum"),d=o("ULFont"),c=o("ULRect"),u=o("ULButton"),h=o("ULHttp"),p=o("ULLog"),f=o("ULTools"),g=o("ULBaseExecutor"),v=o("ULConfigExecutor"),_=o("ULGoldfingerExecutor"),y=o("ULStorageExecutor"),m=(o("ULUserExecutor"),o("ULKitPop")),S=(o("ULStatisExecutor"),o("ULGameExecutor")),b=(o("ULSystemExecutor"),o("ULUrl")),C=o("ULTipsExecutor"),I=function(){function e(){this._debugMode="1"==y.default.getStorage("ulsdk_mc_cop_debug_mode"),this._debugUrl=y.default.getStorage("ulsdk_mc_cop_debug_url")||F.serviceAddr+"/getdatadebugv8",this._debugCityId=y.default.getStorage("ulsdk_mc_cop_debug_city_id")||"",this._debugTemplateId=y.default.getStorage("ulsdk_mc_cop_debug_template_id")||"",this._debugMode&&(this._debugCityId&&C.default.addTipsMsg("cop_debug_city_id","COP\u8c03\u8bd5\u6a21\u5f0f \u57ce\u5e02id:"+this._debugCityId),this._debugTemplateId&&C.default.addTipsMsg("cop_debug_template_id","COP\u8c03\u8bd5\u6a21\u5f0f \u6a21\u677fid:"+this._debugTemplateId),this._debugUrl&&C.default.addTipsMsg("cop_debug_url","COP\u8c03\u8bd5\u6a21\u5f0f url:"+this._debugUrl))}return e.prototype.saveArchive=function(){y.default.setStorage("ulsdk_mc_cop_debug_mode",this._debugMode?"1":"0"),y.default.setStorage("ulsdk_mc_cop_debug_url",this._debugUrl),y.default.setStorage("ulsdk_mc_cop_debug_city_id",this._debugCityId),y.default.setStorage("ulsdk_mc_cop_debug_template_id",this._debugTemplateId)},e.prototype.getDebugSetting=function(){return this._debugMode?{url:this._debugUrl,params:{zoneid:this._debugCityId,templateId:this._debugTemplateId}}:null},e.prototype.goldfingerView=function(e,t){var i=this;return new _.ULGoldfingerStackView("Cop\u6a21\u5757",e,function(n){var o=[{name:"\u672c\u5730Cop",handle:function(){m.default.showInformationFlow({title:"\u672c\u5730Cop",content:f.default.getObjMessage(F.localCopObject),isAllowSearch:!0})}},{name:"\u8fdc\u7a0bCop",handle:function(){m.default.showInformationFlow({title:"\u8fdc\u7a0bCop",content:f.default.getObjMessage(F.serviceCopObject),isAllowSearch:!0})}},{name:"\u5408\u5e76Cop",handle:function(){m.default.showInformationFlow({title:"\u5408\u5e76Cop",content:f.default.getObjMessage(F.mergeCopObject),isAllowSearch:!0})}}],r=i._debugMode?i.getDebugCopView(e):null,a=[{name:"Cop\u8c03\u8bd5\u529f\u80fd:",value:i._debugMode,handle:function(o){i._debugMode=o,o?(r=r||i.getDebugCopView(e),n.addStackView(r)):r&&n.removeStackView(r),i.saveArchive(),m.default.showToast({title:(o?"\u5df2\u6253\u5f00":"\u5df2\u5173\u95ed")+"COP\u8c03\u8bd5\u914d\u7f6e\uff0c\u4e0b\u6b21\u542f\u52a8\u751f\u6548"}),t()}}];n.addHorizontalButtons(o),n.addStackForSwitchs(a),r&&n.addStackView(r)})},e.prototype.getDebugCopView=function(e){for(var t=this,i=new _.ULGoldfingerStackView("Cop\u8c03\u8bd5\u6a21\u5757",e),n=v.default.getObjectValue("o_sdk_cop_simulate_city_data"),o={},r=[],a=0,s=0,h=Object.keys(n);s<h.length;s++){var p=h[s];this._debugCityId&&this._debugCityId==p&&(a=r.length);var f=p+":"+n[p];o[f]=p,r.push(f)}var g=[{name:"\u9009\u62e9\u57ce\u5e02:",width:200,value:r,selectedNum:a,handle:function(e){var i=r[e];t._debugCityId=o[i]}}],y=[{name:"\u9009\u62e9\u6a21\u677f:",width:200,value:this._debugTemplateId,handle:function(e){t._debugTemplateId=e}},{name:"Cop\u5730\u5740:",width:e-120,value:this._debugUrl,handle:function(e){t._debugUrl=e}}];i.addStackMenuViews(g),i.addStackTextFiled(y);var S=new u.default(c.default.Init(0,0,200,40));return S.setTitleForState("\u4fdd\u5b58COP\u8c03\u8bd5\u914d\u7f6e",l.ULControlState.Normal),S.center=new c.ULPoint({x:e/2,y:S.center.y}),S.font=d.default.boldSystem(20),S.registerControlEvent(l.ULControlEvents.TouchUpInside,function(){t.saveArchive(),m.default.showToast({title:"\u4fdd\u5b58COP\u8c03\u8bd5\u914d\u7f6e\u6210\u529f\uff0c\u4e0b\u6b21\u542f\u52a8\u751f\u6548"})}),i.addStackView(S),i},e}(),F=function(e){function t(){var t=e.call(this)||this;return t._goldfingerItem=new I,t._copRetryTimeSec=3e4,t._remain_fail_frequency=5,t._serviceCop={},t._hadMergeServer=!1,t.initExecutor(),t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serviceCop",{get:function(){return this._serviceCop},set:function(e){this._serviceCop=e,this.mergeCop=s(s({},this._localCop),this._serviceCop)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mergeCop",{get:function(){return this._mergeCop},set:function(e){f.default.equals(e,this._mergeCop)||(this.onCopWillChange(),this._mergeCop=e,this.onCopDidChange())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serviceSwitch",{get:function(){return 1==v.default.getNumberValue("n_sdk_cop_mode",1)},enumerable:!1,configurable:!0}),t.prototype.initExecutor=function(){this._localCop=this.trimJsonData(v.default.getObjectValue("o_sdk_cop_default_cop")),this._mergeCop=s({},this._localCop)},t.prototype.addListener=function(){_.default.registerItem(this._goldfingerItem),S.default.registerListener(this)},t.prototype.onModuleLoadComplete=function(){this.serviceSwitch?this.requestServerCop():this.onCopDidMergeServer()},t.prototype.onCopWillChange=function(){this.executeConcurrencyAll(function(e){e.onCopWillChange&&e.onCopWillChange()}).catch(function(e){p.default.log("ULCopListener onCopWillChange err:",e.stack),S.default.reportErrMsg("ULCopListener onCopWillChange",e.stack)})},t.prototype.onCopDidChange=function(){this.executeConcurrencyAll(function(e){e.onCopDidChange&&e.onCopDidChange()}).catch(function(e){p.default.log("ULCopListener onCopDidChange err:",e.stack),S.default.reportErrMsg("ULCopListener onCopDidChange",e.stack)})},t.prototype.onCopDidMergeServer=function(){this._hadMergeServer||(this._hadMergeServer=!0,this.executeConcurrencyAll(function(e){e.onCopDidMergeServer&&e.onCopDidMergeServer()}).catch(function(e){p.default.log("ULCopListener onCopDidMergeServer err:",e.stack),S.default.reportErrMsg("ULCopListener onCopDidMergeServer",e.stack)}))},t.prototype.requestServerCop=function(){var e=this;cc.resources.load("config",function(t,i){e.serviceCop=e.trimJsonData(i.json),e.onCopDidMergeServer()})},t.prototype.trimJsonData=function(e){var t={};return Object.keys(e).forEach(function(i){if(i.startsWith("n_sdk"))t[i]=Number(e[i]);else if(i.startsWith("b_sdk"))t[i]=Boolean(e[i]);else if(i.startsWith("o_sdk")){var n=f.default.safeJsonParse(e[i]);if(!f.default.isObject(n))return void p.default.warn("\u3010\u8b66\u544a\u3011cop key\uff1a"+i+" \u503c\u9519\u8bef");t[i]=n}else if(i.startsWith("a_sdk")){if(n=f.default.safeJsonParse(e[i]),!f.default.isArray(n))return void p.default.warn("\u3010\u8b66\u544a\u3011cop key\uff1a"+i+" \u503c\u9519\u8bef");t[i]=n}else t[i]=e[i]}),t},t.prototype.copServerTime=function(){return h.default.getPromise({url:t.serviceAddr+"/getservertime",responseType:"text"}).then(function(e){var t=isNaN(Number(e))?0:Number(e);return t>0?Promise.resolve(t):Promise.reject("\u8fd4\u56de\u9519\u8bef")})},Object.defineProperty(t,"serviceAddr",{get:function(){return new b.default(v.default.getStringValue("s_sdk_cop_server_url","https://copv7.ultralisk.cn")).origin},enumerable:!1,configurable:!0}),Object.defineProperty(t,"copVersion",{get:function(){return v.default.getStringValue("s_sdk_cop_version")},enumerable:!1,configurable:!0}),Object.defineProperty(t,"localCopObject",{get:function(){return f.default.clone(t.instance._localCop)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"serviceCopObject",{get:function(){return f.default.clone(t.instance._serviceCop)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"mergeCopObject",{get:function(){return f.default.clone(t.instance._mergeCop)},enumerable:!1,configurable:!0}),t.getStringValue=function(e,i){return void 0===i&&(i=""),f.default.getStringValue(t.instance.mergeCop,e,i)},t.getNumberValue=function(e,i){return f.default.getNumberValue(t.instance.mergeCop,e,i)},t.getArrayValue=function(e,i){return void 0===i&&(i=[]),f.default.clone(f.default.getArrayValue(t.instance.mergeCop,e,i))},t.getObjectValue=function(e,i){return void 0===i&&(i={}),f.default.clone(f.default.getObjectValue(t.instance.mergeCop,e,i))},t.registerListener=function(e){t.instance.register(e),t.instance._hadMergeServer&&Promise.resolve().then(function(){e.onCopDidMergeServer&&e.onCopDidMergeServer()})},t.removeListener=function(e){t.instance.unRegister(e)},t.copServerTime=function(){return t.instance.copServerTime()},t}(g.default);r.default=F,cc._RF.pop()},{}],ULDebugAccount:[function(e,t,i){"use strict";cc._RF.push(t,"9fd03LDwMRBbbY9SZwdlD3U","ULDebugAccount");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULDebugHttp"),a=n("ULColor"),s=n("ULEventEnum"),l=n("ULFont"),d=n("ULRect"),c=n("ULScreen"),u=n("ULButton"),h=n("ULLabel"),p=n("ULTextField"),f=n("ULView"),g=n("ULViewEnum"),v=n("ULWindow"),_=n("ULKitPop"),y=n("ULDebugConfig"),m=function(){function e(){}return Object.defineProperty(e,"isLogin",{get:function(){return this._isLogin},enumerable:!1,configurable:!0}),Object.defineProperty(e,"userInfo",{get:function(){return this._userInfo},enumerable:!1,configurable:!0}),e.login=function(e){var t=this;this.mLogin("test","test",function(i){var n={gameId:y.default.config.s_sdk_game_id,channel:y.default.config.s_sdk_channel_name,openId:i.openId,token:i.token};e({bSuccess:!0,loginData:n}),_.default.showToast({title:"\u767b\u5f55\u6210\u529f",duration:2e3}),t._isLogin=!0},function(t){e({bSuccess:!1,errMsg:t})})},e.autoLogin=function(e,t){this.mLogin("test","test",e,t)},e.showLoginDialog=function(e){var t=this;_.default.showModal({title:"\u63d0\u793a",content:"\u8bf7\u9009\u62e9",actions:[{name:"\u5df2\u6709\u8d26\u53f7",handle:function(){t.doLogin(function(i){var n={gameId:y.default.config.s_sdk_game_id,channel:y.default.config.s_sdk_channel_name,openId:i.openId,token:i.token};e({bSuccess:!0,loginData:n}),_.default.showToast({title:"\u767b\u5f55\u6210\u529f",duration:2e3}),t._isLogin=!0},function(t){e({bSuccess:!1,errMsg:t}),_.default.showToast({title:"\u767b\u5f55\u5931\u8d25\uff1a"+t,duration:2e3})})}},{name:"\u6ce8\u518c\u65b0\u8d26\u53f7",handle:function(){t.registerUser(function(){},function(){e({bSuccess:!1,errMsg:"\u6ce8\u518c\u8d26\u53f7\u5931\u8d25"})})}}]})},e.registerUser=function(e,t){var i=this,n=new v.default(c.default.bounds);n.makeKeyAndVisible(),n.backgroundColor=a.default.White;var o=new u.default(d.default.Init(0,0,100,50));o.setTitleForState("\u5173\u95ed",s.ULControlState.Normal),o.registerControlEvent(s.ULControlEvents.TouchUpInside,function(){n.removeFromSuperView(),n=null,t()}),n.addSubView(o);var r=new f.default(d.default.Init(0,0,400,50));r.center=new d.ULPoint({x:n.bounds.midX,y:300});var y=new h.default(d.default.Init(0,0,80,50));y.backgroundColor=a.default.Clear,y.textColor=a.default.Black,y.text="\u8d26\u53f7\uff1a",y.textAlignment=g.ULTextAligment.Center,y.font=l.default.system(25),r.addSubView(y);var m=new p.default(d.default.Init(80,0,320,50));m.textColor=a.default.Black,m.textAlignment=g.ULTextAligment.Center,m.font=l.default.system(25),r.addSubView(m),n.addSubView(r);var S=new f.default(d.default.Init(0,0,400,50));S.center=new d.ULPoint({x:n.bounds.midX,y:400});var b=new h.default(d.default.Init(0,0,80,50));b.backgroundColor=a.default.Clear,b.textColor=a.default.Black,b.text="\u5bc6\u7801\uff1a",b.textAlignment=g.ULTextAligment.Center,b.font=l.default.system(25),S.addSubView(b);var C=new p.default(d.default.Init(80,0,320,50));C.textColor=a.default.Black,C.textAlignment=g.ULTextAligment.Center,C.font=l.default.system(25),S.addSubView(C),n.addSubView(S);var I=new u.default(d.default.Init(0,500,150,50));I.center=new d.ULPoint({x:n.bounds.midX,y:800}),I.setTitleForState("\u6ce8\u518c",s.ULControlState.Normal),I.registerControlEvent(s.ULControlEvents.TouchUpInside,function(){var e=m.text,t=C.text;e?t?i.check(e)?i.check(t)?i.doRegister(e,t):_.default.showToast({title:"\u5bc6\u7801\u4ec5\u652f\u6301\u6570\u5b57\u548c\u5b57\u6bcd",duration:2e3}):_.default.showToast({title:"\u8d26\u53f7\u4ec5\u652f\u6301\u6570\u5b57\u548c\u5b57\u6bcd",duration:2e3}):_.default.showToast({title:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",duration:2e3}):_.default.showToast({title:"\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a",duration:2e3})}),n.addSubView(I)},e.doLogin=function(e,t){var i=this,n=new v.default(c.default.bounds);n.makeKeyAndVisible(),n.backgroundColor=a.default.White;var o=new u.default(d.default.Init(0,0,100,50));o.setTitleForState("\u5173\u95ed",s.ULControlState.Normal),o.registerControlEvent(s.ULControlEvents.TouchUpInside,function(){n.removeFromSuperView(),n=null,t("\u53d6\u6d88\u767b\u5f55")}),n.addSubView(o);var r=new f.default(d.default.Init(0,0,400,50));r.center=new d.ULPoint({x:n.bounds.midX,y:300});var y=new h.default(d.default.Init(0,0,80,50));y.backgroundColor=a.default.Clear,y.textColor=a.default.Black,y.text="\u8d26\u53f7\uff1a",y.textAlignment=g.ULTextAligment.Center,y.font=l.default.system(25),r.addSubView(y);var m=new p.default(d.default.Init(80,0,320,50));m.textColor=a.default.Black,m.textAlignment=g.ULTextAligment.Center,m.font=l.default.system(25),r.addSubView(m),n.addSubView(r);var S=new f.default(d.default.Init(0,0,400,50));S.center=new d.ULPoint({x:n.bounds.midX,y:400});var b=new h.default(d.default.Init(0,0,80,50));b.backgroundColor=a.default.Clear,b.textColor=a.default.Black,b.text="\u5bc6\u7801\uff1a",b.textAlignment=g.ULTextAligment.Center,b.font=l.default.system(25),S.addSubView(b);var C=new p.default(d.default.Init(80,0,320,50));C.textColor=a.default.Black,C.textAlignment=g.ULTextAligment.Center,C.font=l.default.system(25),S.addSubView(C),n.addSubView(S);var I=new u.default(d.default.Init(0,500,150,50));I.center=new d.ULPoint({x:n.bounds.midX,y:800}),I.setTitleForState("\u767b\u5f55",s.ULControlState.Normal),I.registerControlEvent(s.ULControlEvents.TouchUpInside,function(){var o=m.text,r=C.text;o?r?i.check(o)?i.check(r)?i.mLogin(o,r,function(t){n.removeFromSuperView(),n=null,e(t)},t):_.default.showToast({title:"\u5bc6\u7801\u4ec5\u652f\u6301\u6570\u5b57\u548c\u5b57\u6bcd",duration:2e3}):_.default.showToast({title:"\u8d26\u53f7\u4ec5\u652f\u6301\u6570\u5b57\u548c\u5b57\u6bcd",duration:2e3}):_.default.showToast({title:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",duration:2e3}):_.default.showToast({title:"\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a",duration:2e3})}),n.addSubView(I)},e.mLogin=function(e,t,i,n){var o=this,a=y.default.config,s=a.n_net_timeout||5e3,l=a.s_sdk_marrs_login_url||"http://ulmarrs.ultralisk.cn/login",d="account="+e+"&passWord="+t;r.default.post({url:l,timeout:s,data:d,success:function(t){if(console.log(t),t)try{var r=JSON.parse(t);1==r.code?(o._userInfo={account:e},o.getOpenId(r.token,i,n)):n(r.msg)}catch(e){n("\u89e3\u6790\u5f02\u5e38")}else n("\u65e0\u7ed3\u679c\u8fd4\u56de")},fail:function(e){console.log(e),n("\u8bf7\u6c42\u9519\u8bef")}})},e.getOpenId=function(e,t,i){var n=y.default.config,o=n.n_net_timeout||5e3,a=n.s_sdk_marrs_login_check_url||"http://ulmarrs.ultralisk.cn/logincheck",s="token="+e;r.default.post({url:a,timeout:o,data:s,success:function(n){if(console.log(n),n)try{var o=JSON.parse(n);1==o.code?(y.default.config.s_sdk_channel_userid=o.openId,t({openId:o.openId,token:e})):i(o.msg)}catch(e){i("\u89e3\u6790\u5f02\u5e38")}else i("\u65e0\u7ed3\u679c\u8fd4\u56de")},fail:function(e){console.log(e),i("\u8bf7\u6c42\u9519\u8bef")}})},e.doRegister=function(e,t){var i=y.default.config,n=i.n_net_timeout||5e3,o=i.s_sdk_marrs_register_url||"http://ulmarrs.ultralisk.cn/registeruser";o=o+"?account="+e+"&userName="+e+"&passWord="+t,r.default.get({url:o,timeout:n,success:function(e){if(console.log(e),e)try{var t=JSON.parse(e);1==t.code?_.default.showToast({title:"\u6ce8\u518c\u6210\u529f",duration:2e3}):_.default.showToast({title:"\u6ce8\u518c\u5931\u8d25:"+t.msg,duration:2e3})}catch(e){_.default.showToast({title:"\u6ce8\u518c\u5931\u8d25",duration:2e3})}else _.default.showToast({title:"\u6ce8\u518c\u5931\u8d25",duration:2e3})},fail:function(e){console.log(e),_.default.showToast({title:"\u6ce8\u518c\u5931\u8d25",duration:2e3})}})},e.check=function(e){return/^[\da-z]+$/i.test(e)},e._isLogin=!1,e}();o.default=m,cc._RF.pop()},{}],ULDebugAdItem:[function(e,t,i){"use strict";cc._RF.push(t,"a7c62iD+SJLy7epLTn08bWm","ULDebugAdItem");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e){this._param=e,this._showListener=e.onShow,this._errorListener=e.onError,this._clickListener=e.onClick,this._closeListener=e.onClose,this._rewardListener=e.onReward}return Object.defineProperty(e.prototype,"param",{get:function(){return this._param},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showListener",{get:function(){return this._showListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorListener",{get:function(){return this._errorListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickListener",{get:function(){return this._clickListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"closeListener",{get:function(){return this._closeListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rewardListener",{get:function(){return this._rewardListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"closeCallback",{get:function(){return this._closeCallback},set:function(e){this._closeCallback=e},enumerable:!1,configurable:!0}),e.prototype.close=function(){console.log("ULDebugAdItem-close"),this._closeCallback&&this._closeCallback()},e}();n.default=o,cc._RF.pop()},{}],ULDebugAdvManager:[function(e,t,i){"use strict";cc._RF.push(t,"620a4MwOc5NRrVK4KN99cto","ULDebugAdvManager");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r,a=n("ULKitPop"),s=n("ULDebugAdItem"),l=n("ULDebugBanner"),d=n("ULDebugManager"),c=n("ULDebugStyle"),u=n("ULDebugTool");(function(e){e.AD_VIDEO="video",e.AD_INTER="inter",e.AD_BANNER="banner",e.AD_OTHER="other"})(r||(r={}));var h=function(){function e(){}return e.openAdv=function(t){var i=this,n=new s.default(t),o=Number(t.advId);if(isNaN(o)||o<=1e3||o>=4999)return console.warn("\u672a\u77e5\u5e7f\u544a\u7c7b\u578b\uff0c\u76f4\u63a5\u56de\u8c03\u6210\u529f"),console.warn("advId\u5b9a\u4e49\u89c4\u8303\u8981\u6c42\uff1a\u6fc0\u52b1\u89c6\u9891\u53d6\u503c\u8303\u56f41001~1999\u3001\u63d2\u5c4f\u53d6\u503c\u8303\u56f42001~2999\u3001banner\u53d6\u503c\u8303\u56f43001~3999\u3001\u5176\u4ed6\u5e7f\u544a\u7c7b\u578b\u53d6\u503c\u8303\u56f44001~4999"),n.showListener&&n.showListener(),n.rewardListener&&n.rewardListener(),n.clickListener&&n.clickListener(),n.closeListener&&n.closeListener(),n;if(this.advShowState||(this.advShowState=new Map),this.advTypeShowState||(this.advTypeShowState=new Map),this.advShowState.has(t.advId)&&1==this.advShowState.get(t.advId))return n.errorListener&&n.errorListener("\u5df2\u6709\u5e7f\u544a\u5c55\u793a\u4e2d"),n;this.advShowState.set(t.advId,1);var a=e.getAdvTypeById(o);if(this.advTypeShowState.has(a)&&1==this.advTypeShowState.get(a))return n.errorListener&&n.errorListener("\u5df2\u6709\u5e7f\u544a\u5c55\u793a\u4e2d"),n;if(this.advTypeShowState.set(a,1),a==r.AD_VIDEO||a==r.AD_INTER)setTimeout(function(){i.showAdvDialog(n,function(){i.advShowState.set(t.advId,0),i.advTypeShowState.set(a,0)})},1e3);else if(a==r.AD_BANNER){var d={x:0,y:0,width:0,height:0};t.style&&(d.width=t.style.width,d.height=t.style.height,d.x=t.style.x,d.y=u.default.screenHeight()-t.style.y-d.height);var h=l.default.createBannerView({adUnitId:"xxx",style:d});h.onShow(n.showListener),h.onClick(n.clickListener);var p=n.closeListener,f=function(){i.advShowState.set(t.advId,0),i.advTypeShowState.set(a,0),p&&p(),h.hide()};n.closeCallback=f,h.onClose(n.closeListener),h.show()}else{d={x:0,y:0,width:0,height:0},t.style&&(d.width=t.style.width,d.height=t.style.height,d.x=t.style.x,d.y=u.default.screenHeight()-t.style.y-d.height);var g=c.default.createStyleView({adUnitId:"xxx",style:d});g.onShow(n.showListener),g.onClick(n.clickListener);var v=n.closeListener;f=function(){i.advShowState.set(t.advId,0),i.advTypeShowState.set(a,0),v&&v(),g.hide()},n.closeCallback=f,g.onClose(n.closeListener),g.show()}return n},e.getAdvTypeById=function(e){return e<2e3?r.AD_VIDEO:e>2e3&&e<3e3?r.AD_INTER:e>3e3&&e<4e3?r.AD_BANNER:r.AD_OTHER},e.getAdvState=function(e){var t={};e.advIds.forEach(function(e){t[e]=1}),e.callback({bSuccess:!0,states:t})},e.showAdvDialog=function(e,t){var i=e&&e.param.advId||"",n="",o=this.getAdvTypeById(Number(i));switch(o){case r.AD_VIDEO:n="\u6fc0\u52b1\u89c6\u9891";break;case r.AD_INTER:n="\u63d2\u5c4f"}a.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u5c55\u793a"+n+"\u5e7f\u544a,advId=="+i,actions:[{name:"\u6210\u529f",handle:function(){if(e&&e.showListener&&e.showListener(),o==r.AD_VIDEO){if(!d.default.pauseSound)throw new Error("\u672a\u68c0\u6d4b\u5230\u6682\u505c\u58f0\u97f3\u76d1\u542c\uff0c\u8bf7\u786e\u8ba4\u662f\u5426\u6b63\u5e38\u63a5\u5165setPauseSoundListener");d.default.pauseSound()}a.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df"+n+"\u5e7f\u544a\u5c55\u793a\u4e2d...",actions:[{name:"\u5173\u95ed",handle:function(){if(e&&e.closeListener&&e.closeListener(),e&&e.rewardListener&&e.rewardListener(),o==r.AD_VIDEO){if(!d.default.resumeSound)throw new Error("\u672a\u68c0\u6d4b\u5230\u6062\u590d\u58f0\u97f3\u76d1\u542c\uff0c\u8bf7\u786e\u8ba4\u662f\u5426\u6b63\u5e38\u63a5\u5165setResumeSoundListener");d.default.resumeSound()}t()}},{name:"\u70b9\u51fb",handle:function(){a.default.showToast({title:n+"\u5e7f\u544a\u88ab\u70b9\u51fb",duration:2e3}),e&&e.clickListener&&e.clickListener()}}]})}},{name:"\u5931\u8d25",handle:function(){e&&e.errorListener&&e.errorListener("\u5931\u8d25"),t()}}]})},e}();o.default=h,cc._RF.pop()},{}],ULDebugBanner:[function(e,t,i){"use strict";cc._RF.push(t,"2e9fdkAEadMmIc7Pr6xFPPV","ULDebugBanner");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULColor"),a=n("ULEventEnum"),s=n("ULFont"),l=n("ULRect"),d=n("ULScreen"),c=n("ULButton"),u=n("ULLabel"),h=n("ULView"),p=n("ULViewEnum"),f=n("ULWindow"),g=n("ULKitPop"),v=function(){function e(){this._onShow=null}return e.createBannerView=function(t){var i=this,n=(d.default.width-300)/2,o=d.default.height-120,v=300,_=120;if(t.style){var y=t.style;y.x&&(n=y.x),y.y&&(o=y.y),y.width&&(v=y.width),y.height&&(_=y.height)}this._bannerView=new f.default(l.default.Init(n,o,v,_)),this._bannerView.windowLevel=g.ULWindowPriority.AdWindow,this._bannerView.makeKeyAndVisible();var m=new h.default(this._bannerView.bounds),S=new u.default(l.default.Init(0,0,v,_));S.font=s.default.system(25),S.backgroundColor=r.default.RGB(200,200,200),S.textColor=r.default.White,S.textAlignment=p.ULTextAligment.Center,S.numberOfLine=2,S.text="\u6211\u662f\u4e00\u4e2abanner",m.addSubView(S);var b=new c.default(l.default.Init(v-25,0,25,25));b.setBackgroundColorForState(r.default.RGB(255,0,0),a.ULControlState.Normal),b.setTitleColorForState(r.default.Black,a.ULControlState.Normal),b.setTitleForState("X",a.ULControlState.Normal),b.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){i._bannerView&&(i._bannerView.removeFromSuperView(),i._bannerView=null),e._onClose&&e._onClose()}),m.addSubView(b);var C=new c.default(l.default.Init(v-120,_-35,120,35));return C.setBackgroundColorForState(r.default.RGB(255,0,0),a.ULControlState.Normal),C.setTitleColorForState(r.default.Black,a.ULControlState.Normal),C.setTitleForState("\u67e5\u770b\u5e7f\u544a",a.ULControlState.Normal),C.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){g.default.showToast({title:"banner\u5e7f\u544a\u88ab\u70b9\u51fb",duration:2e3}),e._onClick&&e._onClick()}),m.addSubView(C),this._bannerView.addSubView(m),this._bannerView.hidden=!0,new e},e.prototype.show=function(){e._bannerView&&(e._bannerView.hidden=!1),this._onShow&&this._onShow()},e.prototype.hide=function(){e._bannerView&&(e._bannerView.removeFromSuperView(),e._bannerView=null)},e.prototype.destroy=function(){e._bannerView&&(e._bannerView.removeFromSuperView(),e._bannerView=null)},e.prototype.onShow=function(e){this._onShow=e},e.prototype.onClick=function(t){e._onClick=t},e.prototype.onClose=function(t){e._onClose=t},e._onClick=null,e._onClose=null,e}();o.default=v,cc._RF.pop()},{}],ULDebugChannelRank:[function(e,t,i){"use strict";cc._RF.push(t,"d8ff9YeLrVFioFvYPVs/i9X","ULDebugChannelRank");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULSDK"),a=n("ULDebugConfig"),s=n("ULDebugUi"),l=n("ULColor"),d=n("ULEventEnum"),c=n("ULFont"),u=n("ULRect"),h=n("ULScreen"),p=n("ULButton"),f=n("ULLabel"),g=n("ULView"),v=n("ULViewEnum"),_=n("ULWindow"),y=n("ULKitPop"),m=function(){function e(){}return e.setRankData=function(e){var t=this;s.default.showSetRankDialog(function(){e.callback({bSuccess:!0});var i=e.dataType;if(0==i)t.testScoreData[a.default.config.uuid]=e.value;else{if(1!=i)throw new Error("ULDebugChannelRank setRankData error: unknown dataType = "+i);if(void 0===e.priority||null===e.priority)throw new Error("ULDebugChannelRank setRankData error: priority  is invalid");-1==Object.keys(t.Test).indexOf(e.value)&&(t.testEnumData={},t.Test={}),t.testEnumData[a.default.config.uuid]=e.value,t.Test[e.value]=e.priority}},function(){e.callback({bSuccess:!1,errMsg:"failed"})})},e.getRankDataList=function(e){var t=this;s.default.showGetRankListDialog(function(){e.callback({bSuccess:!0}),t.showChannlRankListView(e)},function(){e.callback({bSuccess:!1,errMsg:"failed"})})},e.showChannlRankListView=function(e){var t=this,i=new _.default(h.default.bounds);i.windowLevel=y.ULWindowPriority.AdWindow,i.makeKeyAndVisible();var n=new g.default(u.default.Init(0,0,h.default.width,h.default.height));n.backgroundColor=l.default.Clear,n.userInteractionEnabled=!0,i.addSubView(n);var o=h.default.height-400,r=h.default.width,s=new g.default(u.default.Init(0,o,r,400));s.backgroundColor=l.default.RGB(200,200,200),n.addSubView(s);var m=new f.default(u.default.Init(0,0,r,50));m.font=c.default.system(25),m.backgroundColor=l.default.Clear,m.textColor=l.default.White,m.textAlignment=v.ULTextAligment.Left,m.text=e.rankTitle||"\u6bcf"+this.getRankType(e.rankType)+"\u6392\u884c\u699c",s.addSubView(m);var S=new f.default(u.default.Init(0,60,r,30));S.backgroundColor=l.default.Clear,S.textColor=l.default.White,S.textAlignment=v.ULTextAligment.Left,S.text="\u6bcf"+this.getRankType(e.rankType)+"\u66f4\u65b0\u6392\u884c\u699c\u6570\u636e",s.addSubView(S);var b=new p.default(u.default.Init(r-25,0,25,25));if(b.setBackgroundColorForState(l.default.RGB(255,0,0),d.ULControlState.Normal),b.setTitleColorForState(l.default.Black,d.ULControlState.Normal),b.setTitleForState("X",d.ULControlState.Normal),b.registerControlEvent(d.ULControlEvents.TouchUpInside,function(){s&&(s.removeFromSuperView(),s=null)}),s.addSubView(b),0==e.dataType){var C=[],I={};Object.keys(this.testScoreData).forEach(function(e){var i=Number(t.testScoreData[e]);C.push(i),I[i]=e}),C=C.sort(function(e,t){return e-t}).reverse();for(var F=100,R=0;R<C.length;R++){var w=C[R],L=I[w];(A=new f.default(u.default.Init(0,F,200,30))).font=c.default.system(20),A.backgroundColor=l.default.Clear,A.textColor=l.default.Black,L==a.default.config.uuid&&(A.textColor=l.default.Red),A.textAlignment=v.ULTextAligment.Left,A.text=L,s.addSubView(A),(E=new f.default(u.default.Init(s.bounds.width-50,F,200,30))).font=c.default.system(20),E.backgroundColor=l.default.Clear,E.textColor=l.default.Black,L==a.default.config.uuid&&(E.textColor=l.default.Red),E.textAlignment=v.ULTextAligment.Left,E.text=w+e.suffix,s.addSubView(E),F+=60}}else{var T=[],x={};Object.keys(this.testEnumData).forEach(function(e){var i=t.testEnumData[e];T.push(t.Test[i]),x[i]=e});var P={};for(Object.keys(this.Test).forEach(function(e){var i=t.Test[e];P[i]=e}),T=T.sort(function(e,t){return e-t}).reverse(),F=100,R=0;R<T.length;R++){var A,E;w=T[R],L=x[P[w]],(A=new f.default(u.default.Init(0,F,200,30))).font=c.default.system(20),A.backgroundColor=l.default.Clear,A.textColor=l.default.Black,L==a.default.config.uuid&&(A.textColor=l.default.Red),A.textAlignment=v.ULTextAligment.Left,A.text=L,s.addSubView(A),(E=new f.default(u.default.Init(s.bounds.width-50,F,200,30))).font=c.default.system(20),E.backgroundColor=l.default.Clear,E.textColor=l.default.Black,L==a.default.config.uuid&&(E.textColor=l.default.Red),E.textAlignment=v.ULTextAligment.Left,E.text=P[w],s.addSubView(E),F+=60}}s.addSubView(s)},e.getRankType=function(e){var t;switch(e){case r.ChannelRankType.day:t="\u65e5";break;case r.ChannelRankType.week:t="\u5468";break;case r.ChannelRankType.month:t="\u6708";break;case r.ChannelRankType.all:t="\u534a\u5e74"}return t},e.testScoreData={"\u5f20\u4e09":"100","\u674e\u56db":"59","\u738b\u4e94":"88"},e.Test={"\u9ed1\u94c1":0,"\u9752\u94dc":1,"\u767d\u94f6":2,"\u9ec4\u91d1":3,"\u94c2\u91d1":4,"\u94bb\u77f3":5,"\u5927\u5e08":6,"\u738b\u8005":7},e.testEnumData={"\u5f20\u4e09":"\u9752\u94dc","\u674e\u56db":"\u738b\u8005","\u738b\u4e94":"\u9ec4\u91d1"},e}();o.default=m,cc._RF.pop()},{}],ULDebugCloudStorage:[function(e,t,i){"use strict";cc._RF.push(t,"4ade4GXcohDALN/RK24DVSv","ULDebugCloudStorage");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULDebugUi"),a=function(){function e(){this.localUserData={}}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.init=function(){this.loadLocalStorage()},e.prototype.setCoverStorageListener=function(e){this._coverListener=e},e.prototype.getCloudStorage=function(e,t){var i=this;console.log("ULDebugCloudStorage-getCloudStorage"),r.default.showGetCloudStorageDialog(function(n){t({bSuccess:!0,data:i.localUserData[e]||""}),i._coverListener&&n&&i._coverListener({data:i.localUserData[e]||""})},function(){t({bSuccess:!1,errMsg:"\u8bf7\u6c42\u5931\u8d25"})})},e.prototype.setCloudStorage=function(e){console.log("ULDebugCloudStorage-setCloudStorage:"+JSON.stringify(e)),e.bImmediately,this.localUserData[e.key]=e.data,this.saveLocalStorage(),e.callback({bSuccess:!0})},Object.defineProperty(e.prototype,"recordKey",{get:function(){return"ulsdk_debug_cloud_storage"},enumerable:!1,configurable:!0}),e.prototype.loadLocalStorage=function(){var e=localStorage.getItem(this.recordKey)||"";this.localUserData={};try{this.localUserData=JSON.parse(e)}catch(e){}},e.prototype.saveLocalStorage=function(){localStorage.setItem(this.recordKey,JSON.stringify(this.localUserData))},e}();o.default=a,cc._RF.pop()},{}],ULDebugConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3bb66Oy4fFM0bxdBQjZYvf3","ULDebugConfig");var n=e,o=i,r=function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.cop=o.cConfig=void 0;var a=n("ULDebugManager"),s=n("ULDebugUid");o.cConfig={s_sdk_common_checktime_url:"",n_net_timeout:5e3,n_sdk_common_checktime_deferenceLimit:3e5,o_sdk_pay_info:{1:{payCode:"1",proName:"\u6d4b\u8bd5\u8ba1\u8d39\u70b91",price:1e3,displayPrice:"10\u5143"},2:{payCode:"2",proName:"\u6d4b\u8bd5\u8ba1\u8d39\u70b92",price:2e3,displayPrice:"20\u5143"}},n_sdk_pay_mode:1,a_sdk_kefu_info:["kefu@ultralisk.cn"],n_sdk_normal_share_mode:0,n_sdk_record_share_mode:0,n_sdk_more_wonderful_mode:0,n_sdk_install_shortcut_mode:0,n_sdk_phone_vibrate:0,n_sdk_support_open_url:0,n_sdk_subscribe_mode:0,n_sdk_follow_official_mode:0,n_sdk_favorite_guide_mode:0,n_sdk_banner_height:80,o_sdk_cop_default_cop:{},s_sdk_cdk_url:"",uuid:"Ready-Player-One",copInfo:"",s_sdk_app_name:"Demo",s_sdk_channel_userid:"",o_sdk_screen_info:{orientation:"portrait",screenWidth:576,screenHeight:1024},s_sdk_ulsdk_version:"f1ade46c",s_sdk_package_version:"1.0.0",s_sdk_channel_id:"80",s_sdk_channel_name:"demo",s_prj_num:"prj.gamedemo",s_sdk_game_id:"0",s_prj_orientation:"portrait",s_prj_engine:"cocoscreator",s_sdk_game_name:"GameDemo",n_sdk_licence_info_mode:1,s_sdk_licence_info:"\u7cbe\u54c1\u6e38\u620f   \nUltralisk.Game",n_sdk_age_level_info_mode:1,s_sdk_age_level_info:"\u672c\u6e38\u620f\u662f\u4e00\u6b3e\u73a9\u6cd5\u7b80\u5355\u7684\u4f11\u95f2\u6218\u6597\u6e38\u620f\uff0c\u9002\u7528\u4e8e\u5e74\u6ee18\u5468\u5c81\u53ca\u4ee5\u4e0a\u7684\u7528\u6237\u3002\n\u672c\u6e38\u620f\u65e0\u5267\u60c5\u6545\u4e8b\uff0c\u73a9\u5bb6\u53ea\u9700\u8981\u8fdb\u884c\u7b80\u5355\u7684\u70b9\u51fb\u64cd\u4f5c\uff0c\u64cd\u7eb5\u5f00\u5fc3\u8d85\u4eba\u4ee5\u53ca\u5176\u56e2\u961f\u6253\u5012\u602a\u7269\u901a\u5173\u5373\u53ef\u3002\n\u6e38\u620f\u5185\u65e0\u793e\u4ea4\u7cfb\u7edf\uff0c\u5e76\u4e14\u6e38\u620f\u7684\u76c8\u5229\u6a21\u5f0f\u4e3a\u4ed8\u8d39\u548c\u5e7f\u544a\u3002\n\u6e38\u620f\u5185\u6709\u5b9e\u540d\u8ba4\u8bc1\u7cfb\u7edf\uff0c\u8ba4\u8bc1\u4e3a\u672a\u6210\u5e74\u4eba\u7684\u7528\u6237\u5c06\u63a5\u53d7\u4ee5\u4e0b\u7ba1\u7406\uff1a\n\u672a\u6ee18\u5468\u5c81\u7684\u7528\u6237\u5c06\u65e0\u6cd5\u4f53\u9a8c\u672c\u6e38\u620f\u3002\u5df2\u6ee18\u5468\u5c81\u7684\u672a\u6210\u5e74\u7528\u6237\uff0c\u6bcf\u5468\u4e94\u3001\u5468\u516d\u3001\u5468\u65e5\u548c\u6cd5\u5b9a\u8282\u5047\u65e5\u6bcf\u65e520\u65f6\u81f321\u65f6\u63d0\u4f9b1\u5c0f\u65f6\u7f51\u7edc\u6e38\u620f\u670d\u52a1\u3002\u5176\u4ed6\u65f6\u95f4\u6bb5\u5c06\u4e0d\u4ee5\u4efb\u4f55\u5f62\u5f0f\u4e3a\u672a\u6210\u5e74\u4eba\u63d0\u4f9b\u7f51\u7edc\u6e38\u620f\u670d\u52a1\u3002\n\u672a\u6ee18\u5468\u5c81\u7684\u7528\u6237\u4e0d\u80fd\u4ed8\u8d39\uff1b8\u5468\u5c81\u4ee5\u4e0a\u672a\u6ee116\u5468\u5c81\u7684\u672a\u6210\u5e74\u7528\u6237\uff0c\u5355\u6b21\u5145\u503c\u91d1\u989d\u4e0d\u5f97\u8d85\u8fc750\u5143\u4eba\u6c11\u5e01\uff0c\u6bcf\u6708\u7d2f\u8ba1\u5145\u503c\u91d1\u989d\u4e0d\u5f97\u8d85\u8fc7200\u5143\u4eba\u6c11\u5e01\uff1b16\u5468\u5c81\u4ee5\u4e0a\u7684\u672a\u6210\u5e74\u7528\u6237\uff0c\u5355\u6b21\u5145\u503c\u91d1\u989d\u4e0d\u5f97\u8d85\u8fc7100\u5143\u4eba\u6c11\u5e01\uff0c\u6bcf\u6708\u7d2f\u8ba1\u5145\u503c\u91d1\u989d\u4e0d\u5f97\u8d85\u8fc7400\u5143\u4eba\u6c11\u5e01\u3002",n_sdk_statistics_mode:1,s_sdk_favorite_content:"\u4e00\u952e\u6dfb\u52a0\u5230\u6211\u7684\u5c0f\u7a0b\u5e8f",s_sdk_join_group:"1234567:key1;7654321:key2",s_sdk_ranklist_base_url:"",o_sdk_ranklist_rankids:{1:"73",2:"74"},s_sdk_platform:"h5",s_sdk_game_language:"zhcn",s_sdk_marrs_register_url:"http://ulmarrs.ultralisk.cn/registeruser",s_sdk_marrs_login_url:"http://ulmarrs.ultralisk.cn/login",s_sdk_marrs_login_check_url:"http://ulmarrs.ultralisk.cn/logincheck",s_sdk_marrs_openpay_url:"http://ulmarrs.ultralisk.cn/openpay",s_sdk_marrs_openpay_appkey:"gameTestAppKey",s_sdk_cloud_storage_base_url:"",s_sdk_cloud_storage_secret:"",n_sdk_cloud_storage_upload_span:0,n_sdk_cloud_storage_mode:1,n_sdk_cloud_storage_max_fail_count:5},o.cop={n_sdk_normal_share_mode:"1",n_sdk_record_share_mode:"1",n_sdk_moreWonderful_mode:"1",n_sdk_install_shortcut_mode:"1",n_sdk_phone_vibrate:"1",n_sdk_support_open_url:"1",n_sdk_subscribe_mode:"1",n_sdk_follow_official_mode:"1",n_sdk_favorite_guide_mode:"1",n_sdk_banner_height:"120",n_sdk_cloud_storage_mode:"1",o_sdk_adv_show_list:"{}",a_sdk_test:"[]",b_sdk_test:"true",a_reward_ad_ratios:"100;0;100"};var l=function(){function e(){}return e.init=function(){this._config=r(r({},o.cConfig),o.cConfig.o_sdk_cop_default_cop),this.bInit=!0},e.setConfig=function(e){this.bInit||this.init(),this._config=r(r({},this._config),e),a.default.remoteConfigCallback&&a.default.remoteConfigCallback()},Object.defineProperty(e,"config",{get:function(){return this.bInit||this.init(),this._config},enumerable:!1,configurable:!0}),e.getLocalConfig=function(){return{gameId:e.config.s_sdk_game_id,gameName:e.config.s_sdk_game_name,gameLanguage:e.config.s_sdk_game_language,platform:e.config.s_sdk_platform,channelInfo:{channelId:e.config.s_sdk_channel_id,channelName:e.config.s_sdk_channel_name},licenceInfo:e.config.s_sdk_licence_info,ageLevelInfo:e.config.s_sdk_age_level_info,appName:e.config.s_sdk_app_name,screenInfo:{orientation:e.config.o_sdk_screen_info.orientation,screenWidth:e.config.o_sdk_screen_info.screenWidth,screenHeight:e.config.o_sdk_screen_info.screenHeight},uuid:s.default.getUserId(),packageVersion:e.config.s_sdk_package_version,ulsdkVersion:e.config.s_sdk_ulsdk_version,isStartGameByTouch:"0"!=localStorage.getItem("ulsdk_debug_start_by_touch"),isSupportUserCloudStorage:"0"!=localStorage.getItem("ulsdk_debug_cloud_storage")}},e.getRemoteConfig=function(){return{referenceBannerHeight:e.config.n_sdk_banner_height,copInfo:e.config.copInfo,payInfo:e.config.o_sdk_pay_info,channelUserId:e.config.s_sdk_channel_userid,customerServiceInfo:e.config.a_sdk_kefu_info,isSupportPay:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_pay"),isSupportNormalShare:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_normal_share"),isSupportRecordShare:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_record_share"),isSupportInstallShortcut:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_shortcut"),isSupportSubscribe:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_subscribe"),isSupportFollowOfficialAccount:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_official"),isSupportFavoriteGuide:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_favorite"),isSupportVibrate:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_vibrate"),isSupportOpenUrl:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_url"),isSupportRankList:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_ranklist"),isSupportInviteComment:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_invite"),isSupportJumpLeisureEnabled:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_leisure"),isSupportChannelRankList:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_channelrank"),isSupportJoinGroup:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_joingroup"),isSupportContentSecurityCheck:!!e.config.copInfo&&"0"!=localStorage.getItem("ulsdk_debug_securitycheck")}},e.checkCop=function(){if(!e.config.copInfo)return!1;var t={};try{t=JSON.parse(e.config.copInfo)}catch(e){return!1}return!(!t||-1==t.code)},e.bInit=!1,e}();o.default=l,cc._RF.pop()},{}],ULDebugCop:[function(e,t,i){"use strict";cc._RF.push(t,"df3db71dO1OcbwaQR5eblzj","ULDebugCop");var n=e,o=i,r=function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var a=n("ULDebugConfig"),s=function(){function e(){}return e.init=function(){setTimeout(function(){var e=JSON.stringify(a.cop),t=JSON.parse(e);if(window.ulsdk&&window.ulsdk.cop){var i=window.ulsdk.cop;t=r(r({},t),{cop:i})}var n={};Object.keys(t).forEach(function(e){try{e.startsWith("n_sdk_")?n[e]=Number(t[e]):e.startsWith("s_sdk_")?n[e]=t[e]:e.startsWith("b_sdk_")?n[e]=Boolean(t[e]):e.startsWith("o_sdk_")?n[e]=JSON.parse(t[e]):e.startsWith("a_sdk_")&&(n[e]=JSON.parse(t[e]))}catch(i){console.error("ULDebugCop-init:"+e+"\u8f6c\u6362\u7c7b\u578b\u5f02\u5e38"),n[e]=t[e]}}),n.copInfo=e,a.default.setConfig(n)},3e3)},e}();o.default=s,cc._RF.pop()},{}],ULDebugGameRecorder:[function(e,t,i){"use strict";cc._RF.push(t,"42877g410JOz4mbTIVGkH5n","ULDebugGameRecorder");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULSDK"),a=n("ULDebugUi"),s=function(){function e(){this.bRecorderStart=!1,this.bRecorderPause=!1,this.bRecorderResume=!1,this.recorderStartTime=0,this.recorderStopTime=0,this.recorderResumeTime=0,this.recorderPauseTime=0,this.recorderStartParams=null,this.bShare=!1,this.recorderVideoPath=0,this.shareVideoId=0,this.shareVideoIdArray=null,this.recorderTime=0}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.stop=function(){if(this.bRecorderStart){switch(this.recorderStopTime=(new Date).getTime(),this.bRecorderStart=!1,this.recorderVideoPath+=1,0==this.recorderResumeTime?this.recorderTime+=this.recorderStopTime-this.recorderStartTime:this.recorderTime+=this.recorderStopTime-this.recorderResumeTime,console.log("\u5f55\u5c4f\u65f6\u957f\uff1a",this.recorderTime),this.recorderTime<1e3*(this.recorderStartParams.durationTime||300)&&this.recorderTimer&&clearTimeout(this.recorderTimer),this.errorTimer&&clearTimeout(this.errorTimer),this.recorderStartParams.type){case r.RecorderType.manual:if(this.recorderTime<3e3)return void(this._onError&&this._onError("\u5f55\u5c4f\u65f6\u957f\u4e0d\u7b26\u5408\u89c4\u8303"));break;default:if(this.recorderTime<15e3)return void(this._onError&&this._onError("\u5f55\u5c4f\u65f6\u957f\u4e0d\u7b26\u5408\u89c4\u8303"))}this._onStop&&this._onStop()}else console.error("No recorder start or recoder has ended automatically")},e.prototype.resume=function(){if(this.bRecorderStart){if(this.bRecorderPause=!1,!this.bRecorderResume){this.bRecorderResume=!0,this.recorderResumeTime=(new Date).getTime(),this.recorderStartTime=(new Date).getTime();var e=this.recorderStartParams.durationTime?this.recorderStartParams.durationTime:300;console.log("\u76ee\u6807\u5f55\u5c4f\u65f6\u957f\uff1a",e),console.log("\u5df2\u5f55\u5c4f\u65f6\u957f\uff1a",this.recorderTime),console.log("\u5269\u4f59\u81ea\u52a8\u5173\u95ed\u5f55\u5c4f\u65f6\u957f\uff1a",1e3*e-this.recorderTime),this.recorderTimer=this.setRecorderTimer(1e3*e-this.recorderTime)}this._onResume&&this._onResume()}else console.error("No recorder start or recoder has ended automatically")},e.prototype.pause=function(){this.bRecorderStart?(this.bRecorderResume=!1,this.bRecorderPause||(this.bRecorderPause=!0,this.recorderPauseTime=(new Date).getTime(),this.recorderTime+=this.recorderPauseTime-this.recorderStartTime,console.log("\u5f55\u5c4f\u65f6\u957f\uff1a",this.recorderTime),this.recorderTimer&&clearTimeout(this.recorderTimer)),this._onPause&&this._onPause(),this.errorTimer&&clearTimeout(this.errorTimer)):console.error("No recorder start or recoder has ended automatically")},e.prototype.start=function(e){var t=this;if(e&&e.type)if(e.durationTime&&(e.durationTime<3||e.durationTime>300))this._onError&&this._onError("\u5f55\u5c4f\u65f6\u957f\u4e0d\u7b26\u5408\u89c4\u8303");else if(this.bRecorderStart)console.error("Recorder already start");else{this.bRecorderStart=!0,this.bRecorderPause=!1,this.bRecorderResume=!1,this.recorderStartTime=(new Date).getTime(),this.recorderStopTime=0,this.recorderPauseTime=0,this.recorderResumeTime=0,this.recorderTime=0,this.recorderStartParams=e,this._onStart&&this._onStart();var i=e.durationTime?e.durationTime:300;console.log("\u76ee\u6807\u5f55\u5c4f\u65f6\u957f\uff1a",i),this.recorderTimer=this.setRecorderTimer(1e3*i),i>=15&&(this.errorTimer=setTimeout(function(){a.default.showRecorderErrorDialog(function(){t.bRecorderStart&&(t._onError&&t._onError("\u5f55\u5c4f\u51fa\u73b0\u5f02\u5e38"),t.recorderTimer&&clearTimeout(t.recorderTimer),t.bRecorderStart=!1)},function(){})},8e3))}else this._onError&&this._onError("\u5f55\u5c4f\u5931\u8d25\uff1aparams is invalid")},e.prototype.setRecorderTimer=function(e){var t=this;return setTimeout(function(){console.log("\u5f55\u5236\u65f6\u957f\u5728\u8fbe\u5230\u6307\u5b9a\u65f6\u957f\u540e\u81ea\u52a8\u505c\u6b62\u5f55\u5c4f"),t.bRecorderStart=!1,t.recorderStopTime=(new Date).getTime(),t.recorderVideoPath+=1,t._onStop&&t._onStop()},e)},e.prototype.getRecorder=function(){return e.getInstance()},e.prototype.shareGameVideo=function(e){var t=this,i=(this.recorderStopTime-this.recorderStartTime)/1e3;if(i<=0)throw new Error("No recorder found.");switch(this.recorderStartParams.type){case r.RecorderType.manual:if(i<3)return void e({bSuccess:!1,errMsg:"\u5f55\u5c4f\u5931\u8d25\uff1a\u5f55\u5c4f\u65f6\u957f\u4f4e\u4e8e 3 \u79d2"});break;case r.RecorderType.auto:if(i<15)return void e({bSuccess:!1,errMsg:"\u5f55\u5c4f\u5931\u8d25\uff1a\u5f55\u5c4f\u65f6\u957f\u4f4e\u4e8e 15 \u79d2"})}a.default.showRecorderDialog(String(this.recorderVideoPath),function(){t.recorderVideoPath>t.shareVideoId&&(t.shareVideoId+=1),e({bSuccess:!0,videoId:String(t.shareVideoId)}),t.bShare=!0,t.shareVideoIdArray||(t.shareVideoIdArray=[]),-1==t.shareVideoIdArray.indexOf(String(t.shareVideoId))&&t.shareVideoIdArray.push(String(t.shareVideoId))},function(){e({bSuccess:!1,errMsg:"failed"})})},e.prototype.jumpToShareVideoView=function(e){if(!this.bShare)throw new Error("No share video found.");var t;if(e&&e.videoId){if(t=e.videoId,!this.shareVideoIdArray||-1==this.shareVideoIdArray.indexOf(t))return void e.callback({bSuccess:!1,errMsg:t+" not found"})}else t=String(this.shareVideoId);a.default.showJumpRecorderViewDialog(t,function(){e.callback({bSuccess:!0})},function(){e.callback({bSuccess:!1,errMsg:"failed"})})},e.prototype.onStart=function(e){this._onStart=e},e.prototype.onPause=function(e){this._onPause=e},e.prototype.onResume=function(e){this._onResume=e},e.prototype.onStop=function(e){this._onStop=e},e.prototype.onError=function(e){this._onError=e},e._instance=null,e}();o.default=s,cc._RF.pop()},{}],ULDebugHttp:[function(e,t,i){"use strict";cc._RF.push(t,"25492xJe5JEC6eJzuYWU5qP","ULDebugHttp");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.get=function(t){if(!t)throw new Error("ULDebugHttp get error: params is invalid");var i=new XMLHttpRequest;i.timeout=t.timeout||e.DEFAULT_TIMEOUT,i.onreadystatechange=function(){if(4==i.readyState){if(200==i.status){var e=i.response;t.success&&t.success instanceof Function&&t.success(e)}else t.fail&&t.fail instanceof Function&&t.fail("error:"+i.status);i.abort()}},i.ontimeout=function(){i.abort(),t.fail&&t.fail instanceof Function&&t.fail("error: timeout")},i.open("get",t.url),t.requestHeader&&Object.keys(t.requestHeader).forEach(function(e){i.setRequestHeader(e,t.requestHeader[e])}),i.send()},e.post=function(t){if(!t)throw new Error("ULDebugHttp post error: params is invalid");var i=new XMLHttpRequest;i.timeout=t.timeout||e.DEFAULT_TIMEOUT,i.onreadystatechange=function(){if(4==i.readyState){if(200==i.status){var e=i.response;t.success&&t.success instanceof Function&&t.success(e)}else t.fail&&t.fail instanceof Function&&t.fail("error:"+i.status);i.abort()}},i.ontimeout=function(){i.abort(),t.fail&&t.fail instanceof Function&&t.fail("error: timeout")},i.open("post",t.url),t.requestHeader?Object.keys(t.requestHeader).forEach(function(e){i.setRequestHeader(e,t.requestHeader[e])}):i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.send(t.data)},e.DEFAULT_TIMEOUT=5e3,e}();n.default=o,cc._RF.pop()},{}],ULDebugManager:[function(e,t,i){"use strict";cc._RF.push(t,"9e72fpBJ4xOqYCW73t1Iy0u","ULDebugManager");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULSDK"),a=n("ULTools"),s=n("ULDebugAccount"),l=n("ULDebugAdvManager"),d=n("ULDebugChannelRank"),c=n("ULDebugCloudStorage"),u=n("ULDebugConfig"),h=n("ULDebugCop"),p=n("ULDebugGameRecorder"),f=n("ULDebugPay"),g=n("ULDebugUi"),v=n("ULDebugUlRankList"),_=function(){function e(){}return e.initSdk=function(e){console.log("ULDebugManager-initSdk"),g.default.init(),h.default.init(),c.default.getInstance().init(),this.registerLifeCycle(),this.game_mode=e.mode,e.callback({bSuccess:!0})},e.registerLifeCycle=function(){var e=this;console.log("ULDebugManager-registerLifeCycle"),window.cc?window.cc.game?window.cc.game.on&&window.cc.game.on instanceof Function?window.cc.ENGINE_VERSION&&window.cc.ENGINE_VERSION.startsWith("3.")?(window.cc.game.on(window.cc.Game.EVENT_SHOW,function(){console.log("\u6e38\u620f\u8fdb\u5165\u524d\u53f0"),e.onShow&&e.onShow()}),window.cc.game.on(window.cc.Game.EVENT_HIDE,function(){console.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0"),e.onHide&&e.onHide()})):(window.cc.game.on(window.cc.game.EVENT_SHOW,function(){console.log("\u6e38\u620f\u8fdb\u5165\u524d\u53f0"),e.onShow&&e.onShow()}),window.cc.game.on(window.cc.game.EVENT_HIDE,function(){console.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0"),e.onHide&&e.onHide()})):console.log("window['cc']['game']['on'] undefined"):console.log("window['cc']['game'] undefined"):window.Laya&&this._register_laya_life_cycle_listener()},e._register_laya_life_cycle_listener=function(){var t,i=window;function n(){e.onHide&&e.onHide()}function o(){e.onShow&&e.onShow()}if(void 0!==document.hidden?t="hidden":void 0!==document.mozHidden?t="mozHidden":void 0!==document.msHidden?t="msHidden":void 0!==document.webkitHidden&&(t="webkitHidden"),t)for(var r=["visibilitychange","mozvisibilitychange","msvisibilitychange","webkitvisibilitychange","qbrowserVisibilityChange"],a=0;a<r.length;a++)document.addEventListener(r[a],function(e){var i=document[t];(i=i||e.hidden)?(console.log("1"),n()):o()});else i.addEventListener("blur",n),i.addEventListener("focus",o);navigator.userAgent.indexOf("MicroMessenger")>-1&&(console.log("2"),i.onfocus=o),"onpageshow"in window&&"onpagehide"in window&&(console.log("3"),i.addEventListener("pagehide",n),i.addEventListener("pageshow",o),document.addEventListener("pagehide",n),document.addEventListener("pageshow",o))},e.getPackConfig=function(){return u.default.config},Object.defineProperty(e,"remoteConfigCallback",{get:function(){return this._remoteConfigCallback},enumerable:!1,configurable:!0}),e.loadRemoteConfig=function(e){console.log("ULDebugManager-loadRemoteConfig"),e(u.default.getRemoteConfig())},e.getLocalConfig=function(){return u.default.getLocalConfig()},e.setOnShowListener=function(e){this.onShow=e},e.setOnHideListener=function(e){this.onHide=e},e.openPay=function(e){console.log("ULDebugManager-openPay");var t=u.default.getRemoteConfig();if(!t||!t.isSupportPay)throw new Error("ulsdk openPay error: unavailable");if(1==this.game_mode){if(!e.orderId)throw new Error("ulsdk pay error: orderId\u4e3a\u7f51\u6e38\u5fc5\u4f20\u53c2\u6570");f.default.openPay(function(){e.callback({bSuccess:!0}),g.default.showPayToast("\u652f\u4ed8\u6210\u529f")},function(t){e.callback({bSuccess:!1,errMsg:"\u652f\u4ed8\u5931\u8d25:"+t}),g.default.showPayToast("\u652f\u4ed8\u5931\u8d25:"+t)},e)}else g.default.showSinglePayDialog(e.payId,function(){e.callback({bSuccess:!0})},function(){e.callback({bSuccess:!1,errMsg:"\u7528\u6237\u53d6\u6d88\u652f\u4ed8"})})},e.reOpenPay=function(e){console.log("ULDebugManager-reOpenPay");var t=u.default.getRemoteConfig();if(!t||!t.isSupportPay)throw new Error("ulsdk reOpenPay error: unavailable");g.default.showRePayDialog(function(){e({payIds:["9527"],bSuccess:!0})},function(){e({bSuccess:!1,errMsg:"\u5931\u8d25"})})},e.setPrePayListener=function(e){console.log("ULDebugManager-setPrePayListener");var t=u.default.getRemoteConfig();if(!t||!t.isSupportPay)throw new Error("ulsdk setPrePayListener error: unavailable");this.prePayListener=e},e.deliverGoodsEvent=function(e){console.log("ULDebugManager-deliverGoodsEvent");var t=u.default.getRemoteConfig();if(!t||!t.isSupportPay)throw new Error("ulsdk deliverGoodsEvent error: unavailable");g.default.showDeliverGoodsToast(e.payId)},e.exitGame=function(){throw new Error("Method not implemented.")},e.setResumeSoundListener=function(e){console.log("ULDebugManager-setResumeSoundListener"),this.resumeSound=e},e.setPauseSoundListener=function(e){console.log("ULDebugManager-setPauseSoundListener"),this.pauseSound=e},e.levelStart=function(e){return console.log("ULDebugManager-levelStart:"+JSON.stringify(e)),!0},e.levelComplete=function(e){return console.log("ULDebugManager-levelComplete:"+JSON.stringify(e)),!0},e.coinChange=function(e){return console.log("ULDebugManager-coinChange:"+JSON.stringify(e)),!0},e.itemBuy=function(e){return console.log("ULDebugManager-itemBuy:"+JSON.stringify(e)),!0},e.buyAction=function(e){return console.log("ULDebugManager-buyAction:"+JSON.stringify(e)),!0},e.commonEvent=function(e){return console.log("ULDebugManager-commonEvent:"+JSON.stringify(e)),!0},e.videoPointEvent=function(e){return console.log("ULDebugManager-videoPointEvent:"+JSON.stringify(e)),!0},e.patchInfo=function(e){return console.log("ULDebugManager-patchInfo:"+JSON.stringify(e)),!0},e.setStorage=function(e){localStorage.setItem(e.key,e.value),e.callback({bSuccess:!0})},e.setStorageSync=function(e){return localStorage.setItem(e.key,e.value),!0},e.getStorage=function(e,t){e({bSuccess:!0,data:localStorage.getItem(t)})},e.getStorageSync=function(e){return localStorage.getItem(e)},e.removeStorage=function(e,t){localStorage.removeItem(e),t({bSuccess:!0})},e.removeStorageSync=function(e){return localStorage.removeItem(e),!0},e.clearStorage=function(e){localStorage.clear(),e({bSuccess:!0})},e.clearStorageSync=function(){return localStorage.clear(),g.default.release(),!0},e.setClearStorageListener=function(e){this.clearStorageListener=e},e.wipeAccount=function(e){g.default.showWipeAccountDialog(function(){e({bSuccess:!0}),localStorage.clear()},function(){e({bSuccess:!1,errMsg:"\u5931\u8d25"})})},e.showPrivacy=function(e){g.default.showPrivacyDialog(e.name,function(){e.callback({bSuccess:!0})},function(){e.callback({bSuccess:!1,errMsg:"\u5931\u8d25"})})},e.openPermissionSetting=function(e){g.default.showPermissionSettingDialog(function(){e({bSuccess:!0})},function(){e({bSuccess:!1,errMsg:"failed"})})},e.openAdvancedSetting=function(e){g.default.showAdvancedSettingDialog(function(){e({bSuccess:!0})},function(){e({bSuccess:!1,errMsg:"\u8df3\u8f6c\u5931\u8d25"})})},e.setJumpNewGuideListener=function(e){console.log("ULDebugManager-setJumpNewGuideListener"),this.jumpNewGuideListener=e},e.setChangePatchInfoListener=function(e){console.log("ULDebugManager-setJumpNewGuideListener"),this.changePatchInfoListener=e},e.openInviteComment=function(e){console.log("ULDebugManager-openInviteComment");var t=u.default.getRemoteConfig();if(!t||!t.isSupportInviteComment)throw new Error("ulsdk openInviteComment error: unavailable");g.default.showInviteCommentDialog(function(){e({bSuccess:!0})},function(){e({bSuccess:!1,errMsg:"failed"})})},e.openShare=function(e){console.log("ULDebugManager-openShare");var t=u.default.getRemoteConfig();if(!t||!t.isSupportNormalShare)throw new Error("ulsdk openShare error: unavailable");g.default.showNormalShareDialog(function(){e({bSuccess:!0})},function(){e({bSuccess:!1,errMsg:"\u5931\u8d25"})})},e.setCoverStorageListener=function(e){var t=u.default.getLocalConfig();if(!t||!t.isSupportUserCloudStorage)throw new Error("ulsdk getCloudStorage error: unavailable");c.default.getInstance().setCoverStorageListener(e)},e.getCloudStorage=function(e,t){console.log("ULDebugManager-getCloudStorage");var i=u.default.getLocalConfig();if(!i||!i.isSupportUserCloudStorage)throw new Error("ulsdk getCloudStorage error: unavailable");c.default.getInstance().getCloudStorage(e,t)},e.setCloudStorage=function(e){var t=u.default.getLocalConfig();if(!t||!t.isSupportUserCloudStorage)throw new Error("ulsdk setCloudStorage error: unavailable");c.default.getInstance().setCloudStorage(e)},e.openAdv=function(e){return console.log("ULDebugManager-openAdv:"+JSON.stringify(e)),l.default.openAdv(e)},e.getAdvState=function(e){l.default.getAdvState(e)},e.useCdkey=function(e){g.default.showCdkDialog(function(){e.callback({bSuccess:!0,data:[{goodsId:"1001",goodsNum:1}]})},function(){e.callback({bSuccess:!1,errMsg:"\u5151\u6362\u7801\u4e0d\u53ef\u7528"})})},e.getRecorder=function(){var e=u.default.getRemoteConfig();if(!e||!e.isSupportRecordShare)throw new Error("ulsdk getRecorder error: unavailable");return p.default.getInstance().getRecorder()},e.shareGameVideo=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportRecordShare)throw new Error("ulsdk shareGameVideo error: unavailable");p.default.getInstance().shareGameVideo(e)},e.jumpToShareVideoView=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportRecordShare)throw new Error("ulsdk jumpToShareVideoView error: unavailable");p.default.getInstance().jumpToShareVideoView(e)},e.setRankData=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportChannelRankList)throw new Error("ulsdk setRankData error: unavailable");d.default.setRankData(e)},e.getRankDataList=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportChannelRankList)throw new Error("ulsdk getRankDataList error: unavailable");d.default.getRankDataList(e)},e.addLoginListener=function(e){this._loginListeners||(this._loginListeners=new Array,-1==this._loginListeners.indexOf(e)&&this._loginListeners.push(e))},e.login=function(e){var t=this;0==this.game_mode?g.default.showLoginDialog1(function(){u.default.config.s_sdk_channel_userid="test",t._loginListeners&&t._loginListeners.forEach(function(e){e()});var i={gameId:u.default.config.s_sdk_game_id,channel:u.default.config.s_sdk_channel_name,openId:"test",token:"111111111111111"};e({bSuccess:!0,loginData:i})},function(){e({bSuccess:!1,errMsg:"\u767b\u9646\u5931\u8d25"})}):s.default.login(function(i){i&&i.bSuccess&&t._loginListeners&&t._loginListeners.forEach(function(e){e()}),e(i)})},e.addGameToMyFavorite=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportFavoriteGuide)throw new Error("ulsdk addGameToMyFavorite error: unavailable");u.default.config.s_sdk_favorite_content,g.default.showFavoriteDialog(function(){switch(e.type){case r.FavoriteType.customize:e.callback({bSuccess:!0,isFavorited:!0});break;default:e.callback({bSuccess:!0})}},function(){switch(e.type){case r.FavoriteType.customize:e.callback({bSuccess:!1,errMsg:"failed",isFavorited:!1});break;default:e.callback({bSuccess:!1})}})},e.getChannelUserInfo=function(e){g.default.showGetChannelUserInfoDialog(function(){e({bSuccess:!0,avatarUrl:"https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/76.png",nickName:"\u7a0b\u5e8f\u733f",gender:1,province:"\u56db\u5ddd",city:"\u6210\u90fd",country:"\u4e2d\u56fd"})},function(){e({bSuccess:!1,errMsg:"failed"})})},e.setAppShareListener=function(e){this.appShareCallback=e},e.installShortcut=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportInstallShortcut)throw new Error("ulsdk installShortcut error: unavailable");if(!this.bCheckShortcutCall)throw new Error("ulsdk installShortcut error: Please call getShortcutState first");g.default.showInstallShortcutDialog(function(){e({bSuccess:!0})},function(){e({bSuccess:!1,errMsg:"failed"})})},e.getShortcutState=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportInstallShortcut)throw new Error("ulsdk getShortcutState error: unavailable");this.bCheckShortcutCall=!0,g.default.showShortcutStateDialog(function(t){var i=1;t&&(i=3),e({bSuccess:!0,state:i})},function(){e({bSuccess:!1,errMsg:"failed",state:2})})},e.setCheckDebugWhiteUserListener=function(e){this.whiteUserCallback=e},e.joinGroup=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportJoinGroup)throw new Error("ulsdk joinGroup error: unavailable");var i=u.default.config.s_sdk_join_group,n=i.split(";");if(0==(i?n.length:0))throw new Error("ulsdk joinGroup error: The method is unavailable when num==0");g.default.showJoinGroupDialog(JSON.stringify(i),function(){e({bSuccess:!0})},function(){e({bSuccess:!1,errMsg:"failed"})})},e.openUrl=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportOpenUrl)throw new Error("ulsdk openUrl error: unavailable");g.default.showOpenUrlDialog(function(){e.callback({bSuccess:!0})},function(){e.callback({bSuccess:!1,errMsg:"failed"})})},e.phoneVibrate=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportVibrate)throw new Error("ulsdk phoneVibrate error: unavailable");console.log("ULDebugManager-phoneVibrate:"+JSON.stringify(e)),g.default.showPhoneVibrateToast(),e.callback({bSuccess:!0})},e.getFollowOfficialAccountState=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportFollowOfficialAccount)throw new Error("ulsdk getFollowOfficialAccountState error: unavailable");this.bCheckFollowOfficialCall=!0,g.default.showFollowOfficialStateDialog(function(t){e(null!=t&&null!=t?t?{bSuccess:!0,state:1}:{bSuccess:!0,state:2}:{bSuccess:!0,state:3})},function(){e({bSuccess:!1,errMsg:"failed",state:3})})},e.followOfficialAccount=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportFollowOfficialAccount)throw new Error("ulsdk followOfficialAccount error: unavailable");if(!this.bCheckFollowOfficialCall)throw new Error("ulsdk followOfficialAccount error: Please call getFollowOfficialAccountState first");g.default.showFollowOfficialDialog(function(t){e(null!=t&&null!=t?t?{bSuccess:!0,state:1}:{bSuccess:!0,state:2}:{bSuccess:!0,state:3})},function(){e({bSuccess:!1,errMsg:"failed",state:3})})},e.getSubscribeState=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportSubscribe)throw new Error("ulsdk getSubscribeState error: unavailable");g.default.showGetSubscribeStateDialog(e.subscribeId,function(){e.callback({bSuccess:!0,isSubscribe:!0})},function(){e.callback({bSuccess:!0,isSubscribe:!1})})},e.addSubscribe=function(e){var t=u.default.getRemoteConfig();if(!t||t.isSupportSubscribe)throw new Error("ulsdk addSubscribe error: unavailable");g.default.showAddSubscribeDialog(e.subscribeId,function(){e.callback({bSuccess:!0})},function(){e.callback({bSuccess:!1,errMsg:"failed"})})},e.jumpLeisureSubject=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportJumpLeisureEnabled)throw new Error("ulsdk jumpLeisureSubject error: unavailable");g.default.showJumpLeisureDialog(function(){e({bSuccess:!0})},function(){e({bSuccess:!1,errMsg:"\u8df3\u8f6c\u5931\u8d25"})})},e.checkNetwork=function(e){g.default.showCheckNetworkDialog(function(){e({bSuccess:!0,bConnected:!0})},function(t){var i={bSuccess:t,bConnected:!1};t||(i.errMsg="\u63a5\u53e3\u8c03\u7528\u5931\u8d25"),e(i)})},e.getServerTime=function(e){g.default.showCheckTimeChangeDialog(function(){e({bSuccess:!0,serverTime:a.default.milliTime()})},function(){e({bSuccess:!1,errMsg:"\u6a21\u62df\u5931\u8d25"})})},e.getRankPlayersInfoByUids=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportRankList)throw new Error("ulsdk getRankPlayersInfoByUids error: unavailable");v.default.getInstance().getRankPlayersInfoByUids(e)},e.getRankPlayersInfoByRankIds=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportRankList)throw new Error("ulsdk getRankPlayersInfoByRankIds error: unavailable");v.default.getInstance().getRankPlayersInfoByRankIds(e)},e.updateRankPlayersData=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportRankList)throw new Error("ulsdk updateRankPlayersData error: unavailable");v.default.getInstance().updateRankPlayersData(e)},e.modifyRankScoreByArray=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportRankList)throw new Error("ulsdk modifyRankScoreByArray error: unavailable");v.default.getInstance().modifyRankScoreByArray(e)},e.getUserNumInRank=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportRankList)throw new Error("ulsdk getUserNumInRank error: unavailable");v.default.getInstance().getUserNumInRank(e)},e.contentSecurityCheck=function(e){var t=u.default.getRemoteConfig();if(!t||!t.isSupportContentSecurityCheck)throw new Error("ulsdk contentSecurityCheck error: unavailable");g.default.showSecurityCheckDialog(function(t){e.callback({bSuccess:!0,bPass:t})},function(){e.callback({bSuccess:!1,errMsg:"\u8bf7\u6c42\u5931\u8d25"})})},e.getPrivacySetting=function(){return["\u9690\u79c1\u653f\u7b56","\u7528\u6237\u8bb8\u53ef\u534f\u8bae","\u513f\u7ae5\u9690\u79c1\u4fdd\u62a4\u6307\u5f15"]},e.TAG="ULDebugManager",e.game_mode=0,e._remoteConfigCallback=null,e.prePayListener=null,e.bCheckShortcutCall=!1,e.bPhoneVibrate=!1,e.bCheckFollowOfficialCall=!1,e}();o.default=_,cc._RF.pop()},{}],ULDebugPay:[function(e,t,i){"use strict";cc._RF.push(t,"83826by5p9FK6ueQef9ljqS","ULDebugPay");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULDebugHttp"),a=n("ULDebugAccount"),s=n("ULDebugConfig"),l=function(){function e(){}return e.openPay=function(e,t,i){var n=this;a.default.isLogin?this.doPay(e,t,i,a.default.userInfo):a.default.login(function(o){o&&o.bSuccess?n.doPay(e,t,i,a.default.userInfo):t("\u767b\u5f55\u5931\u8d25")})},e.doPay=function(e,t,i,n){var o=s.default.config,a=o.n_net_timeout||5e3,l=o.s_sdk_marrs_openpay_url||"http://ulmarrs.ultralisk.cn/openpay",d=o.s_sdk_marrs_openpay_appkey||"",c=i.payId,u=i.orderId,h=o.o_sdk_pay_info[c];if(h){var p="appKey="+d+"&account="+(n?n.account:"")+"&userName="+(n?n.account:"")+"&cpOrderId="+u+"&productName="+(h.proName||"")+"&productDesc="+(h.proName||"")+"&productCount=1&money="+String(h.price)+"&gamemoney=1&serverId=0&extra=";r.default.post({url:l,timeout:a,data:p,success:function(i){if(console.log(i),i)try{var n=JSON.parse(i);1==n.code?e():t(n.msg)}catch(e){t("\u89e3\u6790\u5f02\u5e38")}else t("\u65e0\u7ed3\u679c\u8fd4\u56de")},fail:function(e){console.log(e),t("\u8bf7\u6c42\u9519\u8bef")}})}else t("\u65e0\u6548\u8ba1\u8d39\u70b9\uff0c\u6d4b\u8bd5\u73af\u5883\u53ea\u652f\u63011\uff0c2\u4e24\u4e2a\u8ba1\u8d39\u70b9")},e}();o.default=l,cc._RF.pop()},{}],ULDebugStyle:[function(e,t,i){"use strict";cc._RF.push(t,"0c95bMJggNHu4A3mkg0FGzU","ULDebugStyle");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULColor"),a=n("ULEventEnum"),s=n("ULFont"),l=n("ULRect"),d=n("ULButton"),c=n("ULLabel"),u=n("ULView"),h=n("ULViewEnum"),p=n("ULWindow"),f=n("ULKitPop"),g=function(){function e(){this._onShow=null}return e.createStyleView=function(t){var i=this,n=0,o=0,g=100,v=100;if(t.style){var _=t.style;_.x&&(n=_.x),_.y&&(o=_.y),_.width&&(g=_.width),_.height&&(v=_.height)}this._styleView=new p.default(l.default.Init(n,o,g,v)),this._styleView.makeKeyAndVisible(),this._styleView.windowLevel=f.ULWindowPriority.AdWindow;var y=new u.default(this._styleView.bounds),m=new c.default(l.default.Init(0,0,g,v-20));m.font=s.default.system(25),m.backgroundColor=r.default.RGB(200,200,200),m.textColor=r.default.White,m.textAlignment=h.ULTextAligment.Center,m.numberOfLine=2,m.text="\u5e7f\u544a",y.addSubView(m);var S=new d.default(l.default.Init(g-25,0,25,25));S.setBackgroundColorForState(r.default.RGB(255,0,0),a.ULControlState.Normal),S.setTitleColorForState(r.default.Black,a.ULControlState.Normal),S.setTitleForState("X",a.ULControlState.Normal),S.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){i._styleView&&(i._styleView.removeFromSuperView(),i._styleView=null),e._onClose()&&e._onClose}),y.addSubView(S);var b=new d.default(l.default.Init(0,v-20,g,20));return b.setBackgroundColorForState(r.default.RGB(255,0,0),a.ULControlState.Normal),b.setTitleColorForState(r.default.Black,a.ULControlState.Normal),b.setTitleForState("\u67e5\u770b\u5e7f\u544a",a.ULControlState.Normal),b.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){f.default.showToast({title:"\u6837\u5f0f\u5e7f\u544a\u88ab\u70b9\u51fb",duration:2e3}),e._onClick&&e._onClick()}),y.addSubView(b),this._styleView.addSubView(y),this._styleView.hidden=!0,new e},e.prototype.show=function(){e._styleView&&(e._styleView.hidden=!1),this._onShow&&this._onShow()},e.prototype.hide=function(){e._styleView&&(e._styleView.removeFromSuperView(),e._styleView=null)},e.prototype.destroy=function(){e._styleView&&(e._styleView.removeFromSuperView(),e._styleView=null)},e.prototype.onShow=function(e){this._onShow=e},e.prototype.onClick=function(t){e._onClick=t},e.prototype.onClose=function(t){e._onClose=t},e._onClick=null,e._onClose=null,e}();o.default=g,cc._RF.pop()},{}],ULDebugTool:[function(e,t,i){"use strict";cc._RF.push(t,"fdd9eXhnI1FFroZuHvZGh2v","ULDebugTool");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.screenWidth=function(){if(window.cc)return window.cc.view?window.cc.view.getFrameSize().width:window.cc.screen.width;throw console.log("window['cc'] undefined"),new Error("get screen width error")},e.screenHeight=function(){if(window.cc)return window.cc.view?window.cc.view.getFrameSize().height:window.cc.screen.height;throw console.log("window['cc'] undefined"),new Error("get screen height error")},e}();n.default=o,cc._RF.pop()},{}],ULDebugUid:[function(e,t,i){"use strict";cc._RF.push(t,"5852di9wAtAvaqNOHuGTCpj","ULDebugUid");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULDebugConfig"),a=function(){function e(){}return e.getUserId=function(){return this._userId||this.init(),this._userId},e.init=function(){this._userId=localStorage.getItem("ulsdk_userid"),this._userId||(this._userId=this.generateUUID(),this._userId=this.compressUuid(this._userId),this._userId+="_"+r.default.config.s_sdk_channel_id,localStorage.setItem("ulsdk_userid",this._userId))},e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)})},e.compressUuid=function(e){for(var t="0123456789abcdef".split(""),i={},n=0;n<t.length;n++)i[t[n]]=n;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),r={};for(n=0;n<o.length;n++)r[o[n]]=n;var a=(e=e.replace(/-/g,"")).split(""),s=[];for(s.push(a[0]),s.push(a[1]),n=2;n<a.length;n+=3){var l=i[a[n]],d=i[a[n+1]],c=i[a[n+2]];s.push(o[l<<2|d>>2]),s.push(o[(3&d)<<4|c])}return s.join("")},e.decompressUuid=function(e){var t=e.split("");if(t.length<22)return e;for(var i="0123456789abcdef".split(""),n={},o=0;o<i.length;o++)n[i[o]]=o;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),a={};for(o=0;o<r.length;o++)a[r[o]]=o;var s=[];for(s.push(t[0]),s.push(t[1]),o=2;o<t.length;o+=2){var l=a[t[o]],d=a[t[o+1]];s.push(i[l>>2]),s.push(i[(3&l)<<2|d>>4]),s.push(i[15&d])}return s.splice(8,0,"-"),s.splice(13,0,"-"),s.splice(18,0,"-"),s.splice(23,0,"-"),s.join("")},e}();o.default=a,cc._RF.pop()},{}],ULDebugUi:[function(e,t,i){"use strict";cc._RF.push(t,"e90d4aq4hFFe6gchqiUw3Hn","ULDebugUi");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULColor"),a=n("ULEventEnum"),s=n("ULFont"),l=n("ULRect"),d=n("ULScreen"),c=n("ULButton"),u=n("ULLabel"),h=n("ULScrollView"),p=n("ULSwitch"),f=n("ULView"),g=n("ULViewEnum"),v=n("ULWindow"),_=n("ULKitPop"),y=n("ULPanelCtxManager"),m=n("ULCheckManager"),S=n("ULDebugManager"),b=function(){function e(){}return e.init=function(){var e=this,t=new v.default(d.default.bounds);t.windowLevel=_.ULWindowPriority.DebugWindow,t.makeKeyAndVisible();var i=new u.default(l.default.Init(0,0,400,100));i.center=t.center,i.font=s.default.system(25),i.backgroundColor=r.default.Clear,i.textColor=r.default.RGBA(255,0,0,1),i.text="\u5f53\u524d\u5904\u4e8edebug\u6a21\u5f0f\uff0c\u6b63\u5f0f\u53d1\u5e03\u8bf7\u5173\u95ed\u8c03\u8bd5\u6a21\u5f0f",i.userInteractionEnabled=!1,t.addSubView(i);var n=new c.default(l.default.Init(d.default.bounds.width-120-12,0,120,50));n.setBackgroundColorForState(r.default.RGBA(0,150,0,1),a.ULControlState.Normal),n.setTitleColorForState(r.default.White,a.ULControlState.Normal),n.setTitleForState("debug",a.ULControlState.Normal),n.font=s.default.system(25),n.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){console.log("ULDebugUi-init"),e.createDebugLayout(t)}),t.addSubView(n)},e.release=function(){y.ULPanelCtxManager.hideCtx()},e.createDebugLayout=function(e){var t=this,i=new f.default(d.default.bounds);i.backgroundColor=r.default.Black;var n=new u.default(l.default.Init(0,0,200,50));n.center=new l.ULPoint({x:i.bounds.midX,y:50}),n.backgroundColor=r.default.Clear,n.textColor=r.default.White,n.text="Debug\u754c\u9762",n.textAlignment=g.ULTextAligment.Center,n.font=s.default.system(25),i.addSubView(n);var o=new c.default(l.default.Init(10,10,50,50));o.setTitleForState("Back",a.ULControlState.Normal),o.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){i.removeFromSuperView()}),i.addSubView(o);var h=new c.default(l.default.Init(10,80,150,50));h.setTitleForState("\u8865\u53d1",a.ULControlState.Normal),h.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62dfSDK\u89e6\u53d1\u8865\u53d1\u63a5\u53e3\u76d1\u542c",actions:[{name:"\u8865\u53d1",handle:function(){if(!S.default.prePayListener)throw new Error("\u672a\u68c0\u6d4b\u5230\u8865\u53d1\u56de\u8c03\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u6b63\u786e\u8c03\u7528setPrePayListener\u63a5\u53e3");_.default.showToast({title:"\u8865\u53d1\u6b64\u5904\u4ec5\u652f\u6301\u6d4b\u8bd5payId==9527,\u8bf7\u4f7f\u7528\u8be5\u8ba1\u8d39\u70b9\u6d4b\u8bd5",duration:2e3}),S.default.prePayListener({payId:"9527"})}}]})}),i.addSubView(h);var v=new c.default(l.default.Init(170,80,150,50));v.setTitleForState("\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc",a.ULControlState.Normal),v.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62dfSDK\u89e6\u53d1\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc\u63a5\u53e3\u76d1\u542c",actions:[{name:"\u6210\u529f",handle:function(){if(!S.default.jumpNewGuideListener)throw new Error("\u672a\u68c0\u6d4b\u5230\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc\u56de\u8c03\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u6b63\u786e\u8c03\u7528setJumpNewGuideListener\u63a5\u53e3");S.default.jumpNewGuideListener()}},{name:"\u5931\u8d25",handle:function(){if(!S.default.jumpNewGuideListener)throw new Error("\u672a\u68c0\u6d4b\u5230\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc\u56de\u8c03\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u6b63\u786e\u8c03\u7528setJumpNewGuideListener\u63a5\u53e3")}}]})}),i.addSubView(v);var y=new c.default(l.default.Init(330,80,150,50));y.setTitleForState("\u6e20\u9053\u81ea\u5e26\u5206\u4eab",a.ULControlState.Normal),y.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62dfSDK\u89e6\u53d1\u6e20\u9053\u81ea\u5e26\u5206\u4eab",actions:[{name:"\u786e\u5b9a",handle:function(){if(!S.default.appShareCallback)throw new Error("\u672a\u68c0\u6d4b\u5230\u81ea\u5e26\u5206\u4eab\u56de\u8c03\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u6b63\u786e\u8c03\u7528setAppShareListener\u63a5\u53e3");S.default.appShareCallback()}}]})}),i.addSubView(y);var m=new c.default(l.default.Init(10,140,150,50));m.setTitleForState("\u6e38\u620f\u767d\u540d\u5355",a.ULControlState.Normal),m.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62dfSDK\u89e6\u53d1\u6e38\u620f\u767d\u540d\u5355\u76d1\u542c",actions:[{name:"\u767d\u540d\u5355",handle:function(){if(!S.default.whiteUserCallback)throw new Error("\u672a\u68c0\u6d4b\u5230\u767d\u540d\u5355\u8bbe\u7f6e\u56de\u8c03\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u6b63\u786e\u8c03\u7528setCheckDebugWhiteUserListener\u63a5\u53e3");S.default.whiteUserCallback({isWhiteUser:!0})}},{name:"\u975e\u767d\u540d\u5355",handle:function(){if(!S.default.whiteUserCallback)throw new Error("\u672a\u68c0\u6d4b\u5230\u767d\u540d\u5355\u8bbe\u7f6e\u56de\u8c03\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u6b63\u786e\u8c03\u7528setCheckDebugWhiteUserListener\u63a5\u53e3");S.default.whiteUserCallback({isWhiteUser:!1})}}]})}),i.addSubView(m);var b=new c.default(l.default.Init(170,140,150,50));b.setTitleForState("\u6e05\u7406\u5b58\u6863",a.ULControlState.Normal),b.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){if(!S.default.clearStorageListener)throw new Error("\u672a\u68c0\u6d4b\u5230\u6e05\u7406\u5b58\u6863\u56de\u8c03\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u6b63\u786e\u8c03\u7528setClearStorageListener\u63a5\u53e3");_.default.showToast({title:"\u89e6\u53d1\u6e05\u7406\u5b58\u6863\u76d1\u542c",duration:2e3}),S.default.clearStorageListener()}),i.addSubView(b);var C=new c.default(l.default.Init(330,140,150,50));C.setTitleForState("\u63a5\u5165\u68c0\u6d4b",a.ULControlState.Normal),C.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){t.showCheckView(e)}),i.addSubView(C);var I=new c.default(l.default.Init(10,200,150,50));I.setTitleForState("\u6d4b\u8bd5\u8865\u4e01",a.ULControlState.Normal),I.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62dfSDK\u89e6\u53d1\u6e38\u620f\u8bfb\u53d6\u6d4b\u8bd5\u8865\u4e01\u76d1\u542c",actions:[{name:"\u662f",handle:function(){if(!S.default.changePatchInfoListener)throw new Error("\u672a\u68c0\u6d4b\u5230\u767d\u540d\u5355\u8bbe\u7f6e\u56de\u8c03\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u6b63\u786e\u8c03\u7528setChangePatchInfoListener\u63a5\u53e3");S.default.changePatchInfoListener({bTest:!0})}},{name:"\u5426",handle:function(){if(!S.default.changePatchInfoListener)throw new Error("\u672a\u68c0\u6d4b\u5230\u767d\u540d\u5355\u8bbe\u7f6e\u56de\u8c03\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u6b63\u786e\u8c03\u7528setChangePatchInfoListener\u63a5\u53e3");S.default.changePatchInfoListener({bTest:!1})}}]})}),i.addSubView(I);var F=new c.default(l.default.Init(170,200,150,50));F.setTitleForState("\u5173\u95ed\u8c03\u8bd5\u73af\u5883",a.ULControlState.Normal),F.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){localStorage.setItem("ulsdk_debug","0"),_.default.showToast({duration:2e3,title:"\u5df2\u5173\u95ed\u8c03\u8bd5\u73af\u5883\uff0c\u6b63\u5f0f\u73af\u5883\u4e0b\u91cd\u542f\u751f\u6548"})}),i.addSubView(F);var R=new u.default(l.default.Init(10,260,250,50));R.font=s.default.system(20),R.text="\u662f\u5426\u652f\u6301\u4e91\u5b58\u6863",R.backgroundColor=r.default.Clear,R.textColor=r.default.White,R.textAlignment=g.ULTextAligment.Left,i.addSubView(R);var w=new p.default(l.default.Init(500,260,50,50));w.backgroundColor=r.default.Clear;var L=localStorage.getItem("ulsdk_debug_cloud_storage");w.isSelected="0"!=L,w.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_cloud_storage",e?"1":"0")}),i.addSubView(w);var T=new u.default(l.default.Init(10,300,250,50));T.font=s.default.system(20),T.text="\u662f\u5426\u652f\u6301\u4ed8\u8d39\u529f\u80fd",T.backgroundColor=r.default.Clear,T.textColor=r.default.White,T.textAlignment=g.ULTextAligment.Left,i.addSubView(T);var x=new p.default(l.default.Init(500,300,50,50));x.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_pay"),x.isSelected="0"!=L,x.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_pay",e?"1":"0")}),i.addSubView(x);var P=new u.default(l.default.Init(10,340,250,50));P.font=s.default.system(20),P.text="\u662f\u5426\u652f\u6301\u666e\u901a\u5206\u4eab",P.backgroundColor=r.default.Clear,P.textColor=r.default.White,P.textAlignment=g.ULTextAligment.Left,i.addSubView(P);var A=new p.default(l.default.Init(500,340,50,50));A.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_normal_share"),A.isSelected="0"!=L,A.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_normal_share",e?"1":"0")}),i.addSubView(A);var E=new u.default(l.default.Init(10,380,250,50));E.font=s.default.system(20),E.text="\u662f\u5426\u652f\u6301\u5f55\u5c4f\u5206\u4eab",E.backgroundColor=r.default.Clear,E.textColor=r.default.White,E.textAlignment=g.ULTextAligment.Left,i.addSubView(E);var N=new p.default(l.default.Init(500,380,50,50));N.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_record_share"),N.isSelected="0"!=L,N.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_record_share",e?"1":"0")}),i.addSubView(N);var D=new u.default(l.default.Init(10,420,250,50));D.font=s.default.system(20),D.text="\u662f\u5426\u652f\u6301\u6dfb\u52a0\u684c\u9762\u5feb\u6377\u65b9\u5f0f",D.backgroundColor=r.default.Clear,D.textColor=r.default.White,D.textAlignment=g.ULTextAligment.Left,i.addSubView(D);var k=new p.default(l.default.Init(500,420,50,50));k.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_shortcut"),k.isSelected="0"!=L,k.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_shortcut",e?"1":"0")}),i.addSubView(k);var M=new u.default(l.default.Init(10,460,250,50));M.font=s.default.system(20),M.text="\u662f\u5426\u652f\u6301\u8ba2\u9605\u529f\u80fd",M.backgroundColor=r.default.Clear,M.textColor=r.default.White,M.textAlignment=g.ULTextAligment.Left,i.addSubView(M);var O=new p.default(l.default.Init(500,460,50,50));O.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_subscribe"),O.isSelected=!L||"0"!=L,O.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_subscribe",e?"1":"0")}),i.addSubView(O);var B=new u.default(l.default.Init(10,500,250,50));B.font=s.default.system(20),B.text="\u662f\u5426\u652f\u6301\u5173\u6ce8\u516c\u4f17/\u6296\u97f3\u53f7",B.backgroundColor=r.default.Clear,B.textColor=r.default.White,B.textAlignment=g.ULTextAligment.Left,i.addSubView(B);var U=new p.default(l.default.Init(500,500,50,50));U.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_official"),U.isSelected=!L||"0"!=L,U.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_official",e?"1":"0")}),i.addSubView(U);var V=new u.default(l.default.Init(10,540,250,50));V.font=s.default.system(20),V.text="\u662f\u5426\u652f\u6301\u6dfb\u52a0\u5230\u6211\u7684\u5c0f\u7a0b\u5e8f",V.backgroundColor=r.default.Clear,V.textColor=r.default.White,V.textAlignment=g.ULTextAligment.Left,i.addSubView(V);var G=new p.default(l.default.Init(500,540,50,50));G.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_favorite"),G.isSelected=!L||"0"!=L,G.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_favorite",e?"1":"0")}),i.addSubView(G);var H=new u.default(l.default.Init(10,580,250,50));H.font=s.default.system(20),H.text="\u662f\u5426\u652f\u6301\u624b\u673a\u632f\u52a8",H.backgroundColor=r.default.Clear,H.textColor=r.default.White,H.textAlignment=g.ULTextAligment.Left,i.addSubView(H);var j=new p.default(l.default.Init(500,580,50,50));j.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_vibrate"),j.isSelected=!L||"0"!=L,j.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_vibrate",e?"1":"0")}),i.addSubView(j);var W=new u.default(l.default.Init(10,620,250,50));W.font=s.default.system(20),W.text="\u662f\u5426\u652f\u6301\u6253\u5f00url",W.backgroundColor=r.default.Clear,W.textColor=r.default.White,W.textAlignment=g.ULTextAligment.Left,i.addSubView(W);var z=new p.default(l.default.Init(500,620,50,50));z.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_url"),z.isSelected=!L||"0"!=L,z.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_url",e?"1":"0")}),i.addSubView(z);var K=new u.default(l.default.Init(10,660,250,50));K.font=s.default.system(20),K.text="\u662f\u5426\u652f\u6301\u9080\u8bc4",K.backgroundColor=r.default.Clear,K.textColor=r.default.White,K.textAlignment=g.ULTextAligment.Left,i.addSubView(K);var Y=new p.default(l.default.Init(500,660,50,50));Y.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_invite"),Y.isSelected=!L||"0"!=L,Y.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_invite",e?"1":"0")}),i.addSubView(Y);var J=new u.default(l.default.Init(10,700,250,50));J.font=s.default.system(20),J.text="\u662f\u5426\u652f\u6301\u81ea\u6709\u6392\u884c\u699c",J.backgroundColor=r.default.Clear,J.textColor=r.default.White,J.textAlignment=g.ULTextAligment.Left,i.addSubView(J);var q=new p.default(l.default.Init(500,700,50,50));q.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_ranklist"),q.isSelected=!L||"0"!=L,q.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_ranklist",e?"1":"0")}),i.addSubView(q);var X=new u.default(l.default.Init(10,740,250,50));X.font=s.default.system(20),X.text="\u662f\u5426\u652f\u6301\u8df3\u8f6c\u81f3\u6e20\u9053\u8d85\u4f11\u95f2\u754c\u9762",X.backgroundColor=r.default.Clear,X.textColor=r.default.White,X.textAlignment=g.ULTextAligment.Left,i.addSubView(X);var Q=new p.default(l.default.Init(500,740,50,50));Q.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_leisure"),Q.isSelected=!L||"0"!=L,Q.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_leisure",e?"1":"0")}),i.addSubView(Q);var Z=new u.default(l.default.Init(10,780,250,50));Z.font=s.default.system(20),Z.text="\u662f\u5426\u652f\u6301\u6e20\u9053\u6392\u884c\u699c",Z.backgroundColor=r.default.Clear,Z.textColor=r.default.White,Z.textAlignment=g.ULTextAligment.Left,i.addSubView(Z);var $=new p.default(l.default.Init(500,780,50,50));$.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_channelrank"),$.isSelected=!L||"0"!=L,$.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_channelrank",e?"1":"0")}),i.addSubView($);var ee=new u.default(l.default.Init(10,820,250,50));ee.font=s.default.system(20),ee.text="\u662f\u5426\u652f\u6301\u52a0\u5165\u7fa4\u804a",ee.backgroundColor=r.default.Clear,ee.textColor=r.default.White,ee.textAlignment=g.ULTextAligment.Left,i.addSubView(ee);var te=new p.default(l.default.Init(500,820,50,50));te.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_joingroup"),te.isSelected=!L||"0"!=L,te.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_joingroup",e?"1":"0")}),i.addSubView(te);var ie=new u.default(l.default.Init(10,860,250,50));ie.font=s.default.system(20),ie.text="\u662f\u5426\u652f\u6301\u5b89\u5168\u5185\u5bb9\u68c0\u6d4b",ie.backgroundColor=r.default.Clear,ie.textColor=r.default.White,ie.textAlignment=g.ULTextAligment.Left,i.addSubView(ie);var ne=new p.default(l.default.Init(500,860,50,50));ne.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_securitycheck"),ne.isSelected=!L||"0"!=L,ne.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_securitycheck",e?"1":"0")}),i.addSubView(ne);var oe=new u.default(l.default.Init(10,900,250,50));oe.font=s.default.system(20),oe.text="\u662f\u5426\u70b9\u51fb\u5f00\u59cb\u8fdb\u5165\u6e38\u620f",oe.backgroundColor=r.default.Clear,oe.textColor=r.default.White,oe.textAlignment=g.ULTextAligment.Left,i.addSubView(oe);var re=new p.default(l.default.Init(500,900,50,50));re.backgroundColor=r.default.Clear,L=localStorage.getItem("ulsdk_debug_start_by_touch"),re.isSelected=!L||"0"!=L,re.registerControlEvent(a.ULControlEvents.ValueChange,function(e){localStorage.setItem("ulsdk_debug_start_by_touch",e?"1":"0")}),i.addSubView(re),e.addSubView(i)},e.showCheckView=function(e){var t=new f.default(d.default.bounds);t.backgroundColor=r.default.Black;var i=new u.default(l.default.Init(0,0,200,50));i.center=new l.ULPoint({x:t.bounds.midX,y:50}),i.backgroundColor=r.default.Clear,i.textColor=r.default.White,i.text="\u63a5\u5165\u68c0\u6d4b\u62a5\u544a",i.textAlignment=g.ULTextAligment.Center,i.font=s.default.system(25),t.addSubView(i);var n=new c.default(l.default.Init(10,10,50,50));n.setTitleForState("Back",a.ULControlState.Normal),n.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){t.removeFromSuperView()}),t.addSubView(n);var o=new h.default(l.default.Init(10,80,t.bounds.width-20,t.bounds.height-80));o.contentSize=new l.ULSize({width:t.bounds.width-20,height:1300}),o.backgroundColor=r.default.Clear;var p=new u.default(l.default.Init(0,0,200,50));p.backgroundColor=r.default.Clear,p.textColor=r.default.White,p.text="\u5fc5\u63a5\u529f\u80fd\uff1a",p.textAlignment=g.ULTextAligment.Center,p.font=s.default.system(25),o.contentView.addSubView(p);var v=new h.default(l.default.Init(0,60,o.bounds.width,150));v.contentSize=new l.ULSize({width:o.bounds.width,height:150}),v.backgroundColor=r.default.White;for(var y=m.default.getInstance().getMustCallList(),S=0;S<y.length;S++){var b=(T=y[S]).num>0,C=T.method,I=new f.default(l.default.Init(0,50*S,v.bounds.width,50));(U=new u.default(l.default.Init(0,0,200,I.bounds.height))).textAlignment=g.ULTextAligment.Left,U.backgroundColor=r.default.Clear,U.text=C,U.font=s.default.system(20),I.addSubView(U);var F=new u.default(l.default.Init(v.bounds.width-100,0,100,I.bounds.height));F.textAlignment=g.ULTextAligment.Center,F.backgroundColor=r.default.Clear,F.text=b?"\u5df2\u8c03\u7528":"\u672a\u8c03\u7528",F.textColor=b?r.default.Green:r.default.Red,F.font=s.default.system(20),I.addSubView(F),v.contentView.addSubView(I)}o.contentView.addSubView(v);var R=new u.default(l.default.Init(0,220,200,50));R.backgroundColor=r.default.Clear,R.textColor=r.default.White,R.text="\u5df2\u8c03\u7528\u63a5\u53e3\uff1a",R.textAlignment=g.ULTextAligment.Center,R.font=s.default.system(25),o.contentView.addSubView(R);var w=new h.default(l.default.Init(0,280,o.bounds.width,200));w.contentSize=new l.ULSize({width:o.bounds.width,height:2400}),w.backgroundColor=r.default.White;var L=m.default.getInstance().getCallList();for(S=0;S<L.length;S++){var T=L[S];(U=new u.default(l.default.Init(0,30*S,w.bounds.width,30))).textAlignment=g.ULTextAligment.Left,U.backgroundColor=r.default.Clear,U.text=T,U.font=s.default.system(20),w.contentView.addSubView(U)}o.contentView.addSubView(w);var x=new u.default(l.default.Init(0,490,200,50));x.backgroundColor=r.default.Clear,x.textColor=r.default.White,x.text="\u672a\u8c03\u7528\u63a5\u53e3\uff1a",x.textAlignment=g.ULTextAligment.Center,x.font=s.default.system(25),o.contentView.addSubView(x);var P=new h.default(l.default.Init(0,550,o.bounds.width,200));P.contentSize=new l.ULSize({width:o.bounds.width,height:2400}),P.backgroundColor=r.default.White;var A=m.default.getInstance().getUnCallList();for(S=0;S<A.length;S++)T=A[S],(U=new u.default(l.default.Init(0,30*S,P.bounds.width,30))).textAlignment=g.ULTextAligment.Left,U.backgroundColor=r.default.Clear,U.text=T,U.font=s.default.system(20),P.contentView.addSubView(U);o.contentView.addSubView(P);var E=new u.default(l.default.Init(0,760,200,50));E.backgroundColor=r.default.Clear,E.textColor=r.default.White,E.text="\u8c03\u7528\u8be6\u60c5\uff1a",E.textAlignment=g.ULTextAligment.Center,E.font=s.default.system(25),o.contentView.addSubView(E);var N=new h.default(l.default.Init(0,820,o.bounds.width,200));N.contentSize=new l.ULSize({width:o.bounds.width,height:2400}),N.backgroundColor=r.default.White;var D=m.default.getInstance().logArray,k=function(e){var t=D[e],i=new c.default(l.default.Init(0,32*e,N.bounds.width,30));i.setTitleForState(t.method,a.ULControlState.Normal);var n=new u.default(l.default.Init(0,0,200,i.bounds.height));n.textAlignment=g.ULTextAligment.Left,n.backgroundColor=r.default.Clear,n.text=t.time,n.font=s.default.system(15),i.addSubView(n),i.registerControlEvent(a.ULControlEvents.TouchUpInside,function(){_.default.showModal({title:"\u63d0\u793a",content:"\u8c03\u7528\u6b21\u6570:"+t.num+"\n\u8bf7\u6c42\u53c2\u6570:"+t.param,actions:[{name:"\u786e\u5b9a",handle:function(){}}]})}),N.contentView.addSubView(i)};for(S=0;S<D.length;S++)k(S);o.contentView.addSubView(N);var M=new u.default(l.default.Init(0,1030,200,50));M.backgroundColor=r.default.Clear,M.textColor=r.default.White,M.text="\u5173\u5361\u5339\u914d\uff1a",M.textAlignment=g.ULTextAligment.Center,M.font=s.default.system(25),o.contentView.addSubView(M);var O=m.default.getInstance().levelList,B=new h.default(l.default.Init(0,1090,o.bounds.width,200));if(B.contentSize=new l.ULSize({width:o.bounds.width,height:2400}),B.backgroundColor=r.default.White,0==O.length)(U=new u.default(l.default.Init(0,0,B.bounds.width,30))).textAlignment=g.ULTextAligment.Left,U.backgroundColor=r.default.Clear,U.text="\u65e0\u5f02\u5e38\u5173\u5361",U.font=s.default.system(20),B.contentSize=new l.ULSize({width:B.bounds.width,height:30}),B.contentView.addSubView(U);else for(S=0;S<O.length;S++){var U;T=O[S],(U=new u.default(l.default.Init(0,30*S,B.bounds.width,30))).textAlignment=g.ULTextAligment.Left,U.backgroundColor=r.default.Clear,U.text=T,U.font=s.default.system(20),B.contentView.addSubView(U)}o.contentView.addSubView(B),t.addSubView(o),e.addSubView(t)},e.showRecorderDialog=function(e,t,i){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62dfpath="+e+"\u5f55\u5c4f\u5206\u4eab\u7ed3\u679c",actions:[{name:"\u6210\u529f",handle:function(){t()}},{name:"\u5931\u8d25",handle:function(){i()}}]})},e.showRecorderErrorDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u662f\u5426\u6a21\u62df\u5f55\u5c4f\u51fa\u73b0\u5f02\u5e38",actions:[{name:"\u662f",handle:function(){e()}},{name:"\u5426",handle:function(){t()}}]})},e.showShortcutStateDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u83b7\u53d6\u6e20\u9053\u6dfb\u52a0\u684c\u9762\u72b6\u6001\u8c03\u7528\u7ed3\u679c",actions:[{name:"\u6210\u529f",handle:function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u6dfb\u52a0\u684c\u9762\u7ed3\u679c",actions:[{name:"\u5df2\u6dfb\u52a0",handle:function(){e(!0)}},{name:"\u672a\u6dfb\u52a0",handle:function(){e(!1)}}]})}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showInstallShortcutDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u6e20\u9053\u6dfb\u52a0\u684c\u9762\u8c03\u7528\u7ed3\u679c",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showGetChannelUserInfoDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u662f\u5426\u663e\u793a\u6e20\u9053\u6388\u6743\u6309\u94ae(H5\u5fae\u4fe1\u6e20\u9053\u9700\u8981\u63d0\u4f9b\u6388\u6743\u6309\u94ae)",actions:[{name:"\u662f",handle:function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u6e20\u9053\u6388\u6743\u6309\u94ae",actions:[{name:"\u6388\u6743",handle:function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u83b7\u53d6\u6e20\u9053\u7528\u6237\u4fe1\u606f\u8c03\u7528\u7ed3\u679c",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})}},{name:"\u5173\u95ed",handle:function(){t()}}]})}},{name:"\u5426",handle:function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u83b7\u53d6\u6e20\u9053\u7528\u6237\u4fe1\u606f\u8c03\u7528\u7ed3\u679c",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})}}]})},e.showFavoriteDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u6dfb\u52a0\u6536\u85cf\u8c03\u7528\u7ed3\u679c",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showCdkDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62dfcdk\u5151\u6362\u7ed3\u679c",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showJoinGroupDialog=function(e,t,i){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u8c03\u8d77\u7fa4\u804a"+e.split(":")[0]+"\u8be6\u7ec6\u4fe1\u606f\u754c\u9762",actions:[{name:"\u6210\u529f",handle:function(){t()}},{name:"\u5931\u8d25",handle:function(){i()}}]})},e.showOpenUrlDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62dfsdk\u6253\u5f00url\u529f\u80fd\u8c03\u7528",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showPhoneVibrateToast=function(){_.default.showToast({title:"\u65e0\u6cd5\u6b63\u5e38\u6a21\u62df\u6e20\u9053\u529f\u80fd\uff0c\u4ec5\u8f93\u51fa\u6253\u5370\uff1b\u7531\u4e8e\u8c03\u7528\u9891\u7e41\uff0c\u4e0d\u505a\u6a21\u62df\u5f39\u7a97\u5904\u7406\uff1b\u672c\u63d0\u793a\u53ea\u663e\u793a\u4e00\u6b21",duration:2e3})},e.showFollowOfficialDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u8c03\u8d77\u5173\u6ce8\u516c\u4f17\u53f7/\u6296\u97f3\u53f7\u754c\u9762",actions:[{name:"\u6210\u529f",handle:function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u5173\u6ce8\u516c\u4f17\u53f7/\u6296\u97f3\u53f7\u7ed3\u679c\u8fd4\u56de",actions:[{name:"\u6709\u8fd4\u56de",handle:function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u5173\u6ce8\u516c\u4f17\u53f7/\u6296\u97f3\u53f7",actions:[{name:"\u5173\u6ce8",handle:function(){e(!0)}},{name:"\u53d6\u6d88",handle:function(){e(!1)}}]})}},{name:"\u65e0\u8fd4\u56de",handle:function(){e()}}]})}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showFollowOfficialStateDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u67e5\u8be2\u5173\u6ce8\u516c\u4f17\u53f7/\u6296\u97f3\u53f7\u72b6\u6001\u529f\u80fd\u8c03\u7528",actions:[{name:"\u6210\u529f",handle:function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u5173\u6ce8\u516c\u4f17\u53f7/\u6296\u97f3\u53f7\u7ed3\u679c\u8fd4\u56de",actions:[{name:"\u6709\u8fd4\u56de",handle:function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u5173\u6ce8\u516c\u4f17\u53f7/\u6296\u97f3\u53f7\u7ed3\u679c",actions:[{name:"\u5df2\u5173\u6ce8",handle:function(){e(!0)}},{name:"\u672a\u5173\u6ce8",handle:function(){e(!1)}}]})}},{name:"\u65e0\u8fd4\u56de",handle:function(){e()}}]})}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showJumpRecorderViewDialog=function(e,t,i){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u8df3\u8f6c\u81f3"+e+"\u5206\u4eab\u89c6\u9891\u64ad\u653e\u9875\u9762",actions:[{name:"\u6210\u529f",handle:function(){t()}},{name:"\u5931\u8d25",handle:function(){i()}}]})},e.showAddSubscribeDialog=function(e,t,i){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df"+e+"\u6dfb\u52a0\u8ba2\u9605\u7ed3\u679c",actions:[{name:"\u6210\u529f",handle:function(){t()}},{name:"\u5931\u8d25",handle:function(){i()}}]})},e.showGetSubscribeStateDialog=function(e,t,i){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df"+e.toString()+"\u83b7\u53d6\u8ba2\u9605\u72b6\u6001",actions:[{name:"\u5df2\u8ba2\u9605",handle:function(){t()}},{name:"\u672a\u8ba2\u9605",handle:function(){i()}}]})},e.showPayDialog=function(e){_.default.showModal({title:"\u63d0\u793a",content:"\u8bf7\u9009\u62e9\u652f\u4ed8\u7c7b\u578b",actions:[{name:"\u5355\u673a",handle:function(){e(1)}},{name:"\u7f51\u6e38",handle:function(){e(2)}}]})},e.showSinglePayDialog=function(e,t,i){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df"+e+"\u652f\u4ed8\u529f\u80fd\u8c03\u7528",actions:[{name:"\u652f\u4ed8\u6210\u529f",handle:function(){t()}},{name:"\u652f\u4ed8\u5931\u8d25",handle:function(){i()}}]})},e.showPayToast=function(e){_.default.showToast({title:e,duration:2e3})},e.showRePayDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u6062\u590d\u8d2d\u4e70",actions:[{name:"\u6210\u529f",handle:function(){_.default.showToast({title:"\u6062\u590d\u8d2d\u4e70\u6b64\u5904\u4ec5\u652f\u6301\u6d4b\u8bd5payId==9527,\u8bf7\u4f7f\u7528\u8be5\u8ba1\u8d39\u70b9\u6d4b\u8bd5",duration:2e3}),e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showDeliverGoodsToast=function(e){_.default.showToast({title:"\u652f\u4ed8\u5b8c\u6bd5\u53d1\u83b7\u786e\u8ba4"+e,duration:2e3})},e.showJumpLeisureDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u8df3\u8f6c\u81f3\u8d85\u4f11\u95f2",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showCheckNetworkDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u68c0\u6d4b\u7f51\u7edc\u8fde\u63a5\u63a5\u53e3\u8c03\u7528\u7ed3\u679c",actions:[{name:"\u6210\u529f",handle:function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u68c0\u6d4b\u7f51\u7edc\u662f\u5426\u5904\u4e8e\u8fde\u63a5\u72b6\u6001",actions:[{name:"\u5df2\u8fde\u63a5",handle:function(){e()}},{name:"\u672a\u8fde\u63a5",handle:function(){t(!0)}}]})}},{name:"\u5931\u8d25",handle:function(){t(!1)}}]})},e.showCheckTimeChangeDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u8bf7\u6c42\u670d\u52a1\u5668\u65f6\u95f4",actions:[{name:"\u6210\u529f",handle:function(){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u8bf7\u6c42\u670d\u52a1\u5668\u771f\u5b9e\u4e8b\u4ef6",actions:[{name:"\u8bf7\u6c42\u6210\u529f",handle:function(){e()}},{name:"\u8bf7\u6c42\u5931\u8d25",handle:function(){t(!0)}}]})}},{name:"\u5931\u8d25",handle:function(){t(!1)}}]})},e.showNormalShareDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u666e\u901a\u5206\u4eab\u8c03\u7528",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showInviteCommentDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u9080\u8bc4\u8c03\u7528",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showAdvancedSettingDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u6253\u5f00\u9ad8\u7ea7\u8bbe\u7f6e\u754c\u9762",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showPermissionSettingDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u6253\u5f00\u6743\u9650\u8bbe\u7f6e\u754c\u9762",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showPrivacyDialog=function(e,t,i){_.default.showModal({title:e,content:"\u6a21\u62df\u6253\u5f00\u300a"+e+"\u300b\u663e\u793a\u754c\u9762",actions:[{name:"\u6210\u529f",handle:function(){t()}},{name:"\u5931\u8d25",handle:function(){i()}}]})},e.showWipeAccountDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u6ce8\u9500\u8d26\u53f7",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showGetRankListDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u83b7\u53d6\u6e20\u9053\u6392\u884c\u699c\u5217\u8868",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showSetRankDialog=function(e,t){_.default.showModal({title:"\u63d0\u793a",content:"\u6a21\u62df\u8bbe\u7f6e\u6e20\u9053\u6392\u884c\u699c\u6570\u636e",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showCloudStorageDialog=function(e,t,i){_.default.showModal({title:e,content:t,actions:[{name:"\u77e5\u9053\u4e86",handle:function(){i()}}]})},e.showCloudStorageDialog2=function(e,t){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u670d\u52a1\u5668\u5b58\u6863\u548c\u672c\u5730\u5b58\u6863\u4e0d\u517c\u5bb9\n\u8bf7\u9009\u62e9\u4ee5\u4e0b\u5b58\u6863",actions:[{name:"\u672c\u5730\u5b58\u6863",handle:function(){e()}},{name:"\u8fdc\u7aef\u5b58\u6863",handle:function(){t()}}]})},e.showLoginDialog=function(e,t){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6a21\u62df\u6e20\u9053\u5f3a\u767b\u5f55",actions:[{name:"\u662f",handle:function(){e()}},{name:"\u5426",handle:function(){t()}}]})},e.showLoginDialog1=function(e,t){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6a21\u62df\u6e20\u9053\u767b\u5f55\u7ed3\u679c",actions:[{name:"\u767b\u5f55\u6210\u529f",handle:function(){e()}},{name:"\u767b\u5f55\u5931\u8d25",handle:function(){t()}}]})},e.showGetCloudStorageDialog=function(e,t){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6a21\u62df\u83b7\u53d6\u4e91\u5b58\u6863\u7ed3\u679c",actions:[{name:"\u6210\u529f",handle:function(){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6a21\u62df\u4e91\u5b58\u6863\u548c\u672c\u5730\u5b58\u6863\u4e0d\u517c\u5bb9\uff0c\u8bf7\u9009\u62e9",actions:[{name:"\u672c\u5730\u5b58\u6863",handle:function(){e(!1)}},{name:"\u4e91\u5b58\u6863",handle:function(){e(!0)}}]})}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showGetUserNumInRankDialog=function(e,t){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6a21\u62df\u83b7\u53d6\u65c1\u884c\u5e2e\u7528\u6237\u6570\u91cf",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showReportUserInfoInRankDialog=function(e,t){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6a21\u62df\u4e0a\u62a5\u7528\u6237\u4fe1\u606f\u81f3\u6392\u884c\u699c",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showGetUserInfoByIdInRankDialog=function(e,t){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6a21\u62df\u83b7\u53d6\u7528\u6237\u6392\u884c\u699c\u4fe1\u606f",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showGetUserInfoListDialog=function(e,t){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6a21\u62df\u83b7\u53d6\u6307\u5b9a\u6392\u540d\u7528\u6237\u6392\u884c\u699c\u4fe1\u606f",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showModifyScoreDialog=function(e,t){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6a21\u62df\u4fee\u6539\u6392\u884c\u699c\u5206\u6570",actions:[{name:"\u6210\u529f",handle:function(){e()}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e.showSecurityCheckDialog=function(e,t){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6a21\u62df\u5185\u5bb9\u5b89\u5168\u68c0\u6d4b\u63a5\u53e3\u8c03\u7528\u7ed3\u679c",actions:[{name:"\u6210\u529f",handle:function(){_.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6a21\u62df\u5185\u5bb9\u5b89\u5168\u68c0\u6d4b\u7ed3\u679c",actions:[{name:"\u901a\u8fc7",handle:function(){e(!0)}},{name:"\u672a\u901a\u8fc7",handle:function(){e(!1)}}]})}},{name:"\u5931\u8d25",handle:function(){t()}}]})},e}();o.default=b,cc._RF.pop()},{}],ULDebugUlRankList:[function(e,t,i){"use strict";cc._RF.push(t,"8227b/MRyhCTa30dBJfkp8z","ULDebugUlRankList");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULDebugUi"),a=function(){function e(){this.rankData=null,this.rankData=new Map,this.getStorageRankData()}return e.prototype.getStorageRankData=function(){var e=localStorage.getItem("ulsdk_debug_rank_data");if(e){var t=JSON.parse(e);for(var i in t)this.rankData.set(i,t[i])}},e.prototype.setStorageRankData=function(){var e={};this.rankData.keys,this.rankData.forEach(function(t,i){e[i]=t}),localStorage.setItem("ulsdk_debug_rank_data",JSON.stringify(e))},e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getUserNumInRank=function(e){var t=this;!e.rankIds||e.rankIds.length<=0||null==e.isLast||null==e.isLast?e.callback({bSuccess:!1,errMsg:"params is invalid"}):r.default.showGetUserNumInRankDialog(function(){for(var i={},n=0,o=e.rankIds;n<o.length;n++){var r=o[n],a=t.rankData.get(r);i[r]=a?String(a.length):"0"}e.callback({bSuccess:!0,info:i})},function(){e.callback({bSuccess:!1,errMsg:"\u83b7\u53d6\u5931\u8d25"})})},e.prototype.modifyRankScoreByArray=function(e){var t=this;!(!e.rankId||!e.uids||e.uids.length<=0||!e.scores||e.scores.length<=0||e.uids.length!=e.scores.length)&&e.callback&&e.callback instanceof Function?this.rankData.get(e.rankId)?r.default.showModifyScoreDialog(function(){for(var i=t.rankData.get(e.rankId),n=0;n<e.uids.length;n++)for(var o=e.uids[n],r=0;r<i.length;r++){var a=i[r];a.uid!==o||(a.score=String(Number(a.score)+Number(e.scores[n])))}t.rankData.set(e.rankId,t.sortArray(i)),t.setStorageRankData(),e.callback({bSuccess:!0})},function(){e.callback({bSuccess:!1,errMsg:"\u83b7\u53d6\u5931\u8d25"})}):e.callback({bSuccess:!1,errMsg:"\u672a\u68c0\u6d4b\u5230params.rankId="+e.rankId+"\u6392\u884c\u699c\u4fe1\u606f"}):e.callback({bSuccess:!1,errMsg:"params is invalid"})},e.prototype.getRankPlayersInfoByUids=function(e){var t=this;e.rankId&&e.uids&&e.uids.length&&e.callback&&e.callback instanceof Function?this.rankData.get(e.rankId)?r.default.showGetUserInfoByIdInRankDialog(function(){for(var i=t.rankData.get(e.rankId),n={},o=[].concat(e.uids),r=0;r<i.length;r++){var a=i[r],s=o.indexOf(a.uid);if(s>=0&&(o.splice(s,1),n[a.uid]=a),0==o.length)break}o.length>0?e.callback({bSuccess:!1,errMsg:"\u672a\u67e5\u8be2\u5230\u8be5\u7528\u6237["+o+"]\u5728\u6392\u884c\u699c"+e.rankId+"\u4e2d\u4fe1\u606f"}):e.callback({bSuccess:!0,data:n})},function(){e.callback({bSuccess:!1,errMsg:"\u83b7\u53d6\u5931\u8d25"})}):e.callback({bSuccess:!1,errMsg:"\u672a\u68c0\u6d4b\u5230params.rankId="+e.rankId+"\u6392\u884c\u699c\u4fe1\u606f"}):e.callback({bSuccess:!1,errMsg:"params is invalid"})},e.prototype.updateRankPlayersData=function(e){if(e.userInfoList&&e.userInfoList.length){var t=this.rankData.get(e.rankId);if(t){for(var i=0,n=e.userInfoList;i<n.length;i++){for(var o=n[i],r=!1,a=-1,s=0;s<t.length;s++)if(t[s].uid===o.uid){r=!0,a=s;break}r?t[a]=o:t.push(o)}this.rankData.set(e.rankId,this.sortArray(t))}else(t=[]).push.apply(t,e.userInfoList),this.rankData.set(e.rankId,t);this.setStorageRankData(),e.callback({bSuccess:!0})}else e.callback({bSuccess:!1,errMsg:e.userInfoList+" is invalid"})},e.prototype.getRankPlayersInfoByRankIds=function(e){var t=this;e.rankId&&e.rangeIds&&!(e.rangeIds.length<=0)&&null!=e.isLast&&null!=e.isLast&&e.callback&&e.callback instanceof Function?this.rankData.get(e.rankId)?r.default.showGetUserInfoListDialog(function(){for(var i={},n=t.rankData.get(e.rankId),o=0;o<e.rangeIds.length;o++)for(var r=e.rangeIds[o],a=0;a<n.length;a++){var s=n[a];Number(r)!=a+1||(i[r]=s)}e.callback({bSuccess:!0,userInfoList:i})},function(){e.callback({bSuccess:!1,errMsg:"\u672a\u68c0\u6d4b\u5230params.rankId="+e.rankId+"\u6392\u884c\u699c\u4fe1\u606f"})}):e.callback({bSuccess:!1,errMsg:"\u672a\u68c0\u6d4b\u5230params.rankId="+e.rankId+"\u6392\u884c\u699c\u4fe1\u606f"}):e.callback({bSuccess:!1,errMsg:"params is invalid"})},e.prototype.sortArray=function(e){var t=e;if(t.length>1)for(var i=0;i<t.length;i++)for(var n=i+1;n<t.length;n++){var o=t[i],r=t[n];Number(o.score)<Number(r.score)&&(t[i]=r,t[n]=o)}return t},e}();o.default=a,cc._RF.pop()},{}],ULDefaultPanelCtx:[function(e,t,i){"use strict";cc._RF.push(t,"faab2baSa5OKqK0m4uX69H0","ULDefaultPanelCtx");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULImageShaderItem=o.ULViewShaderItem=o.ULPanelImageData=void 0;var r=n("ULColor"),a=n("ULFont"),s=n("ULRect"),l=n("ULAdapter"),d=function(){function e(e){this._width=0,this._height=0,this._font=a.default.system(20),this._fillStyle=r.default.Clear,this._textAlign="left",this._textBaseline="middle",this._globalAlpha=1,this.delegate=null,this._hadContent=!1,this.delegate=e}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._canvas&&(this._canvas.width=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._canvas&&(this._canvas.height=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(e){this._font=e,this._context&&(this._context.font=e.fontStr)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillStyle",{get:function(){return this._fillStyle},set:function(e){this._fillStyle=e,this._context&&(this._context.fillStyle=e.colorStr)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this._textAlign},set:function(e){this._textAlign=e,this._context&&(this._context.textAlign=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline=e,this._context&&(this._context.textBaseline=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalAlpha",{get:function(){return this._globalAlpha},set:function(e){this._globalAlpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context||(this._canvas=c.get(),this._context=this._canvas.getContext("2d"),this._canvas.width=this.width,this._canvas.height=this.height,this.context.clearRect(0,0,this.width,this.height),this.context.font=this.font.fontStr,this.context.fillStyle=this.fillStyle.colorStr,this.context.textAlign=this.textAlign,this.context.textBaseline=this.textBaseline),this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hadContent",{set:function(e){this._hadContent!=e&&(this._hadContent=e,e&&this.delegate.creatLabelCanvas(this._canvas))},enumerable:!1,configurable:!0}),e.prototype.measureText=function(e){return{width:this.context.measureText(e).width}},e.prototype.fillText=function(e,t,i,n){this.context.fillText(e,t,i,n),this.hadContent=!0},e.prototype.clear=function(){this._canvas&&c.put(this._canvas),this._canvas=null,this._context=null},e}(),c=function(){function e(){this.pool=[],this.cacheNum=50}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.get=function(){var e=this.instance.pool.pop();return e||(e=l.default.createCanvas()),e},e.put=function(e){this.instance.pool.length>=this.instance.cacheNum||this.instance.pool.push(e)},e}(),u=function(e){this.originalImageData=e};o.ULPanelImageData=u;var h=function(){function e(e,t,i){void 0===i&&(i=1),this.alpha=1,this.displayRect=e,this.color=t,this.alpha=i}return e.prototype.creatShaderItem=function(t,i,n,o,r,a,l,d,c,u){var h=s.default.Init(l+this.displayRect.x,d+this.displayRect.y,c,u);h=s.default.intersectionRect(h,t);var p=i*this.alpha;return h.width<=0||h.height<=0||p<.01?null:new e(h,this.color,p)},e}();o.ULViewShaderItem=h;var p=function(){function e(e,t,i,n){void 0===n&&(n=1),this.alpha=1,this.displayRect=e,this.textureRect=t,this.imageData=i,this.alpha=n}return e.prototype.creatShaderItem=function(t,i,n,o,r,a,l,d,c,u){var h=s.default.Init(l+this.displayRect.x,d+this.displayRect.y,c,u);h=s.default.intersectionRect(h,t);var p=i*this.alpha;if(h.width<=0||h.height<=0||p<.01)return null;var f=s.default.Init(n,o,r,a).rectFrom(this.displayRect),g=f.width/this.displayRect.width*this.textureRect.width,v=f.height/this.displayRect.height*this.textureRect.height,_=this.textureRect.width*(f.x/this.displayRect.width),y=this.textureRect.height*(f.y/this.displayRect.height);return new e(h,s.default.Init(this.textureRect.x+_,this.textureRect.y+y,g,v),this.imageData,p)},e}();o.ULImageShaderItem=p;var f=function(){function e(){this.canvas=new d(this),this._items=[]}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this.canvas.font},set:function(e){this.canvas.font=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillStyle",{get:function(){return this.canvas.fillStyle},set:function(e){this.canvas.fillStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this.canvas.textAlign},set:function(e){this.canvas.textAlign=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this.canvas.textBaseline},set:function(e){this.canvas.textBaseline=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalAlpha",{get:function(){return this.canvas.globalAlpha},set:function(e){this.canvas.globalAlpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},set:function(e){this._transform=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rect",{get:function(){return s.default.Init(0,0,this.width,this.height)},enumerable:!1,configurable:!0}),e.prototype.fillRect=function(e,t,i,n){var o=this.rect,r=s.default.Init(e,t,i,n),a=s.default.intersectionRect(o,r);if(!(a.width<=0||a.height<=0)){var l=new h(a,this.fillStyle,this.globalAlpha);this._items.push(l)}},e.prototype.clearRect=function(){this._items=[],this.canvas.clear()},e.prototype.measureText=function(e){return{width:this.canvas.measureText(e).width}},e.prototype.fillText=function(e,t,i,n){this.canvas.fillText(e,t,i,n)},e.prototype.drawImage=function(t,i,n){var o=this.rect;if(t instanceof e)for(var r=0,a=t._items;r<a.length;r++)(g=a[r].creatShaderItem(o,this.globalAlpha,0,0,t.width,t.height,i,n,t.width,t.height))&&this._items.push(g);else{var l=t.width,d=t.height,c=s.default.Init(i,n,l,d),h=s.default.intersectionRect(o,c);if(h.width<=0||h.height<=0)return;var f=s.default.Init(0,0,h.width,h.height),g=new p(h,f,new u(t),this.globalAlpha);this._items.push(g)}},e.prototype.drawClipImage=function(t,i,n,o,r,a,l,d,c){var h=this.rect;if(t instanceof e)for(var f=0,g=t._items;f<g.length;f++)(m=g[f].creatShaderItem(h,this.globalAlpha,i,n,o,r,a,l,d,c))&&this._items.push(m);else{var v=s.default.Init(a,l,d,c),_=s.default.intersectionRect(h,v);if(_.width<=0||_.height<=0)return;var y=s.default.Init(i,n,o,r),m=new p(_,y,new u(t),this.globalAlpha);this._items.push(m)}},e.prototype.creatLabelCanvas=function(e){var t=this.rect,i=new p(t,t,new u(e),this.globalAlpha);this._items.push(i)},e}();o.default=f,cc._RF.pop()},{}],ULDemoAdvExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"5570dVYH5RCL6yxTR83dO45","ULDemoAdvExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULDemoAdvType=void 0;var s,l=o("ULLog"),d=o("ULAdvDemo"),c=o("ULAdvEnum"),u=o("ULBaseExecutor"),h=o("ULConfigExecutor"),p=o("ULGameExecutor"),f=o("ULAdvExecutor"),g=o("ULAdvAD"),v=o("ULAdvDelegate"),_=o("ULError"),y=o("ULGoldfingerExecutor"),m=o("ULKitPop"),S=o("ULTools");(function(e){e[e.simulate=0]="simulate",e[e.random=1]="random",e[e.directAward=2]="directAward",e[e.directFailure=3]="directFailure"})(s=r.ULDemoAdvType||(r.ULDemoAdvType={}));var b=function(e){function t(){var t=e.call(this)||this;return t.priority=1,t.moduleName="Debug\u5e7f\u544a",t.type=s.simulate,t._advBaseTypeArray=[],t._advObjCache={},t.initExecutor(),t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"debugLoadType",{get:function(){return 1==h.default.getNumberValue("n_sdk_debug_adv_loadType",0)?c.ULAdLoadType.preload:c.ULAdLoadType.ordinary},enumerable:!1,configurable:!0}),t.prototype.getDebugArg=function(e){return h.default.getObjectValue("o_sdk_debug_adv_args_setting",{})[e]||"Debug"},t.prototype.initExecutor=function(){this._advBaseTypeArray.push(d.default)},t.prototype.addListener=function(){f.default.registerItem(this),p.default.registerListener(this)},t.prototype.registerItem=function(e){this._advBaseTypeArray.indexOf(e)>=0||this._advBaseTypeArray.push(e)},t.prototype.initAllAdvBase=function(){for(var e=this,t=0,i=e._advBaseTypeArray;t<i.length;t++){var n=i[t];e.register(new n)}return e.executeAsync({type:u.ULBaseExecutionEnum.RegisterFlashback,endType:u.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(t){return new Promise(function(i,n){t.startWork(),t.onInitWithAction({onLoad:function(){for(var n=0,o=t.getAllAdvObjectBase();n<o.length;n++){var r=o[n],a=r,s=new r(e.getDebugArg(a.moduleName),e.debugLoadType);s.adBaseConfigSuccess=!0;var l=e._advObjCache[s.advType]||[];l.push(s),e._advObjCache[s.advType]=l}i()},onError:function(e){n(e)}})})}}).catch(function(e){return l.default.error("ULDemoAdvExecutor initAllAdvBase startWork err:",e.stack),Promise.resolve()})},t.prototype.isReady=function(e){for(var t=0,i=this._advObjCache[e]||[];t<i.length;t++)if(i[t].advObjectIsReady)return!0;return!1},t.prototype.openAdv=function(e,t,i){var n=this,o=this.type==s.random?0==S.default.random(0,1)?s.directAward:s.directFailure:this.type;if(o==s.directAward)return setTimeout(function(){e.setIsShowed(!0,t.defaultAdvType)},S.default.random(100,500)),void setTimeout(function(){var i=t.multitonRewardMsg||[];e.setIsClosed(!0,Math.max(1,S.default.random(0,i.length+1)))},S.default.random(1e3,2e3));if(o!=s.directFailure){if(i.length<=0)return e.addError(new _.default("0","\u8be5\u5e7f\u544a\u7c7b\u578b\u3010"+t.defaultAdvType+"\u3011\u6ca1\u6709\u53ef\u7528\u5e7f\u544a")),void(e.isfail=!0);var r=i.shift().createAdvAD();r.bindSupDele(e),r.onError(function(o){e.addError(null,o),n.openAdv(e,t,i)}),r.show(t,t.defaultAdvType==c.ULAdType.video?c.ULAdRewardType.CloseNotSkip:c.ULAdRewardType.show)}else setTimeout(function(){e.addError(new _.default("0","\u5e7f\u544a\u6a21\u62df\u9519\u8bef")),e.isfail=!0},S.default.random(20,500))},t.prototype.onModuleLoadComplete=function(){this.initAllAdvBase()},t.prototype.createAdvAD=function(e){var t=this,i=new v.default({show:function(e,i){var n=t._advObjCache[i.defaultAdvType]||[];n=[].concat(n),t.openAdv(e,i,n)},isReady:function(){return t.isReady(e.advId)}});return new g.default(i)},t.prototype.subAdvModuleGoldfingerStackView=function(e){var t=this,i=new y.ULGoldfingerStackView(this.moduleName,e),n=[{name:"\u5f53\u524d\u6709\u6548\u6a21\u5757:",value:this.getItem({type:u.ULBaseExecutionEnum.RegisterFlashback}).moduleName},{name:"\u5e7f\u544a\u52a0\u8f7d\u7c7b\u578b:",value:this.debugLoadType==c.ULAdLoadType.ordinary?"\u666e\u901a\u52a0\u8f7d":"\u9884\u52a0\u8f7d"}],o=Object.keys(this._advObjCache),r=0,a=[{name:"\u8bf7\u9009\u62e9\u5e7f\u544a\u7c7b\u578b:",value:o,selectedNum:r,width:160,handle:function(e){r=e}},{name:"\u8bf7\u9009\u62e9\u6d4b\u8bd5\u7c7b\u522b:",value:["\u6a21\u62df\u5c55\u793a","\u968f\u673a","\u6a21\u62df\u6210\u529f","\u6a21\u62df\u5931\u8d25"],selectedNum:this.type,width:160,handle:function(e){t.type=e}}],s=[{name:"\u5e7f\u544a\u6d4b\u8bd5:",buttonText:"\u64ad\u653e\u5e7f\u544a",width:160,handle:function(){var e=m.default.showInformationFlow({title:"\u5e7f\u544a\u6d4b\u8bd5\u6d41\u7a0b"}),i={advId:"debug",defaultAdvType:o[r],style:{x:.5,y:1,width:.6}},n=t.createAdvAD(i);n.onMessage(function(t){e.sendMessage(t)}),n.show(i)}}];return i.addStackCenterLabels(["------------"+this.moduleName+"------------"]),i.addStackLabels(n),i.addStackMenuViews(a),i.addStackButtons(s),i},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.setDemoAdvType=function(e){return t.instance.type=e},t.registerItem=function(e){t.instance.registerItem(e)},t}(u.default);r.default=b,cc._RF.pop()},{}],ULEncipher:[function(e,t,i){"use strict";cc._RF.push(t,"b7373KbKzNIm66U/5qV/hyL","ULEncipher");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("CryptoJS"),a=function(){function e(){}return e.encryptAES128CBC=function(t){var i=e.generateRandomString(16),n=r.CryptoJS.enc.Utf8.parse(i);return r.CryptoJS.AES.encrypt(t,n,{iv:e.iv,mode:r.CryptoJS.mode.CBC,padding:r.CryptoJS.pad.Pkcs7}).toString()+i},e.decryptAES128CBC=function(t){var i=t.slice(-16),n=t.slice(0,-16),o=r.CryptoJS.enc.Utf8.parse(i);return r.CryptoJS.AES.decrypt(n,o,{iv:e.iv}).toString(r.CryptoJS.enc.Utf8)},e.generateRandomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="",n=t.length,o=0;o<e;o++){var r=Math.floor(Math.random()*n);i+=t.charAt(r)}return i},e.iv=r.CryptoJS.enc.Utf8.parse("ZQrPGtcwQskMJsTr"),e}();o.default=a,cc._RF.pop()},{}],ULError:[function(e,t,i){"use strict";cc._RF.push(t,"46fe7BAYDhDE7o3VJo2/2Q6","ULError");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t,i){void 0===i&&(i=""),this.code=e,this.errMsg=t,this.desc=i}return e.prototype.toString=function(){return"code:"+this.code+" errMsg:"+this.errMsg},e}();n.default=o,cc._RF.pop()},{}],ULEvalExp:[function(e,t,i){"use strict";cc._RF.push(t,"e09a0ktJANIWrwkCjqXOiEN","ULEvalExp");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULLog"),a=n("ULTools"),s={",":{order:-2,argCount:1,handler:function(e){return e[0]}},"*":{order:3,argCount:2,handler:function(e){return e[0]*e[1]}},"/":{order:3,argCount:2,handler:function(e){return e[0]/e[1]}},"+":{order:2,argCount:2,handler:function(e){return e[0]+e[1]}},"-":{order:2,argCount:2,handler:function(e){return 1==e.length?0-e[0]:e[0]-e[1]}},">=":{order:1,argCount:2,handler:function(e){return e[0]>=e[1]}},">":{order:1,argCount:2,handler:function(e){return e[0]>e[1]}},"<=":{order:1,argCount:2,handler:function(e){return e[0]<=e[1]}},"<":{order:1,argCount:2,handler:function(e){return e[0]<e[1]}},"==":{order:0,argCount:2,handler:function(e){return e[0]==e[1]}},"!=":{order:0,argCount:2,handler:function(e){return e[0]!=e[1]}},"&&":{order:-1,argCount:2,handler:function(e){return e[0]&&e[1]}},"||":{order:-1,argCount:2,handler:function(e){return e[0]||e[1]}},"[":{order:4,argChar:"]",handler:function(e){return e[0][e[1]]}},"(":{order:4,argChar:")",handler:function(e){var t=e[0];return a.default.isFunc(t)?(e.shift(),t.apply(void 0,e)):t}},".":{order:5,argCount:2,handler:function(e){if(a.default.isNumber(e[1]))return Number(e[0]+"."+e[1]);var t=e[0][e[1]];return a.default.isFunc(t)?t.bind(e[0]):t}},'""':{order:6,argCount:1,handler:function(e){return e[0].toString()}},"''":{order:6,argCount:1,handler:function(e){return e[0].toString()}},undefined:{order:5,argCount:0,handler:function(){}},window:{order:5,argCount:0,handler:function(){return window}},ULTools:{order:5,argCount:0,handler:function(){return a.default}}},l=Object.keys(s),d={};l.forEach(function(e){d[e.length]=!0});var c=Object.keys(d).map(function(e){return Number(e)}).sort(function(e,t){return t-e}),u=function(){function e(){}return e.trimCalcExp=function(e){for(var t=this,i=(e=e.replace(/\s/g,"")).split(""),n=[],o={")":{cut:[")","'",'"'],end:"(",symbol:"(",handle:function(e){var i=t.trimCalcExp(e);return i.push('")"'),i}},"]":{cut:[")","'",'"'],end:"[",symbol:"[",handle:function(e){var i=t.trimCalcExp(e);return i.push('"]"'),i}},'"':{cut:[],end:'"',handle:function(e){return['"'+e+'"']}},"'":{cut:[],end:"'",handle:function(e){return["'"+e+"'"]}}},r="",a=[],l=[],d="";i.length;){var u=i.pop(),h=n.length?n[n.length-1]:null;if(h){var p=o[h].cut,f=o[h].end,g=o[h].symbol,v=o[h].handle;if(u==f){if(n.pop(),0==n.length){a=a.concat(v(d).reverse()),g&&l.push(g),d="";continue}}else p.indexOf(u)>=0&&n.push(u);d=u+d}else{if(o[u]){r.length&&(a.push(r),r=""),n.push(u);continue}g=null;for(var _=0;_<c.length;_++){var y=c[_]-1;if(i.length>y){var m=i.slice(i.length-y,i.length)+u;if(s[m]){u=m,g=s[m],i=i.slice(0,i.length-y);break}}}if(g){if(r.length&&(a.push(r),r=""),l.length)for(_=l.length-1;_>=0;_--){var S=l.pop(),b=s[S];if(!(b&&b.order>g.order)){l.push(S);break}a.push(S)}l.push(u);continue}r=u+r}}return r.length&&(a.push(r),r=""),(a=a.filter(function(e){return""!=e})).concat(l.reverse()).reverse()},e.getCalcExpArray=function(e,t,i){return void 0===t&&(t=null),void 0===i&&(i=!1),e=e.split(".").join(".^"),this.trimCalcExp(e).map(function(e){if(s[e])return e;var n,o=e.charAt(0);if('"'==o||"'"==o)return(n=e.substring(1,e.length-1)).split(".^").join(".");if("^"==o)return(o=(n=e.substring(1,e.length)).charAt(0))<="9"&&o>="0"?Number(n):n;if(isNaN(Number(e))){var a=t?t(e):void 0;return null!=a&&null!=a||i&&r.default.warn("ULEvalExp item:"+e+" value:"+a),a}return Number(e)})},e.evalExpResults=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!1);var n=!0;try{var o=this.getCalcExpArray(e,t);i&&r.default.log(JSON.stringify(o)),n=this.evalExpArrayResults(o),i&&r.default.log("ULEvalExp result:",n)}catch(e){i&&r.default.log("ULEvalExp exp\u89c4\u5219\u9519\u8bef:",e.stack),n=!1}return n},e.evalExpArrayResults=function(e){if(0==e.length)return!0;for(var t=function(e,t,i){for(var n=[];e.length>0;)if(t){var o=e.pop();if(o==t)break;n.push(o)}else{if(i--<=0)break;n.push(e.pop())}return n},i=[];e.length;){var n=e.pop();if(l.indexOf(n)>-1){var o=s[n],r=t(i,o.argChar,o.argCount),a=o.handler(r);i.push(a)}else i.push(n)}return i[0]},e}();o.default=u,cc._RF.pop()},{}],ULEventEnum:[function(e,t,i){"use strict";cc._RF.push(t,"dbe3dFtH4hFl4gAUlmX3Z3X","ULEventEnum");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.ULControlState=n.ULControlEvents=void 0,function(e){e[e.TouchDown=0]="TouchDown",e[e.TouchUpInside=1]="TouchUpInside",e[e.TouchUpOutside=2]="TouchUpOutside",e[e.TouchCancel=3]="TouchCancel",e[e.TouchDrag=4]="TouchDrag",e[e.ValueChange=5]="ValueChange"}(n.ULControlEvents||(n.ULControlEvents={})),function(e){e[e.Normal=0]="Normal",e[e.Highlighted=1]="Highlighted"}(n.ULControlState||(n.ULControlState={})),cc._RF.pop()},{}],ULFont:[function(e,t,i){"use strict";cc._RF.push(t,"33d10gzhClDb5YmMZia/h0m","ULFont");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULPanelCtxManager"),a=n("ULViewEnum"),s=function(){function e(e){this._fontStr=e}return Object.defineProperty(e.prototype,"fontStr",{get:function(){return this._fontStr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},enumerable:!1,configurable:!0}),e.system=function(t){var i=new e(t+"px \u5b8b\u4f53");return i._fontSize=t,i},e.boldSystem=function(t){var i=new e("normal bold "+t+"px Arial,sans-serif");return i._fontSize=t,i},Object.defineProperty(e,"ctx",{get:function(){return this._ctx||(this._ctx=r.ULPanelCtxManager.creatPanelCtx()),this._ctx},enumerable:!1,configurable:!0}),e.prototype.judgeTextContent=function(t,i,n,o){var r=0,s=e.ctx;s.font=this;for(var l=[],d=0,c=0,u=0,h=0,p=0;p<i.length&&!(l.length+1>=o);p++){var f=i[p],g=s.measureText(f).width;if(f>="a"&&f<="z"||f>="A"&&f<="Z"?h+=g:(u=p,h=0),(d+=g)>n||"\n"==f){var v=p;switch(t){case a.ULLineBreakMode.CharWrapping:v=p;break;default:v=h>n?p:u+1}l.push(i.substring(c,v)),"\n"==f&&v++,c=v,r=Math.max(r,d),d=v==p?0:h}}if(c<=i.length-1){var _=i.substring(c,i.length);r=Math.max(r,Math.min(s.measureText(_).width,n)),l.push(_)}return{content:l,maxWidth:r}},e.prototype.judgeTextLine=function(e,t,i,n){return this.judgeTextContent(e,t,i,n).content},e.prototype.getTextWidth=function(e,t,i,n){return this.judgeTextContent(e,t,i,n).maxWidth},e.prototype.measureText=function(t){var i=e.ctx;return i.font=this,i.measureText(t).width},e.prototype.isEqual=function(e){return this==e||this._fontStr==e._fontStr},e._ctx=null,e}();o.default=s,cc._RF.pop()},{}],ULGameExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"11afcE8DshHSKv97Cerr6A3","ULGameExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULBaseExecutor"),l=o("ULGoldfingerExecutor"),d=o("ULAdapterCreator2x"),c=o("ULAdapterCreator3x"),u=o("ULAdapterLaya"),h=o("ULModuleStatistics"),p=o("ULModuleHeadLine"),f=o("ULKitPop"),g=o("ULLog"),v=o("ULTools"),_=o("ULStorageExecutor"),y=o("ULLogExecutor"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._loadComplete=!1,t._loadCompleteErr="",t._isShowing=!0,t._listenerExecutor=new s.default,t}return a(t,e),t.prototype.onGameHide=function(){this._isShowing&&(this._isShowing=!1,this._listenerExecutor.executeConcurrencyAll(function(e){e.onGameHide&&e.onGameHide()}).catch(function(e){g.default.log("ULLifeCycleExecutor onGameHide err:",e.stack),S.reportErrMsg("ULLifeCycleExecutor onGameHide",e.stack)}))},t.prototype.onGameShow=function(){this._isShowing||(this._isShowing=!0,this._listenerExecutor.executeConcurrencyAll(function(e){e.onGameShow&&e.onGameShow()}).catch(function(e){g.default.log("ULLifeCycleExecutor onGameShow err:",e.stack),S.reportErrMsg("ULLifeCycleExecutor onGameShow",e.stack)}))},t.prototype.onModuleLoadComplete=function(e){this._loadComplete||(this._loadComplete=!0,this._loadCompleteErr=e,this._listenerExecutor.executeConcurrencyAll(function(t){t.onModuleLoadComplete&&t.onModuleLoadComplete(e)}).catch(function(e){g.default.log("ULLifeCycleExecutor onModuleLoadComplete err:",e.stack),S.reportErrMsg("ULLifeCycleExecutor onModuleLoadComplete",e.stack)}))},t.prototype.onSkipNoviceGuide=function(){this._listenerExecutor.executeConcurrencyAll(function(e){e.onSkipNoviceGuide&&e.onSkipNoviceGuide()}).catch(function(e){g.default.log("ULLifeCycleExecutor onSkipNoviceGuide err:",e.stack),S.reportErrMsg("ULLifeCycleExecutor onSkipNoviceGuide",e.stack)})},t.prototype.onResetGameSave=function(){this._listenerExecutor.executeConcurrencyAll(function(e){e.onResetGameSave&&e.onResetGameSave()}).catch(function(e){g.default.log("ULLifeCycleExecutor onResetGameSave err:",e.stack),S.reportErrMsg("ULLifeCycleExecutor onResetGameSave",e.stack)})},t.prototype.onShowPointDebugInfo=function(e){this._listenerExecutor.executeConcurrencyAll(function(t){t.onShowPointDebugInfo&&t.onShowPointDebugInfo(e)}).catch(function(e){g.default.log("ULLifeCycleExecutor onShowPointDebugInfo err:",e.stack),S.reportErrMsg("ULLifeCycleExecutor onShowPointDebugInfo",e.stack)})},t.prototype.exitGame=function(){return this.executeAsync({type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.SuccessAnyOne,promiseHandle:function(e){return e.exitGame?e.exitGame():Promise.reject("exitGame == null")}})},t.prototype.registerListener=function(e){var t=this;this._listenerExecutor.register(e),this._loadComplete&&e.onModuleLoadComplete&&Promise.resolve().then(function(){e.onModuleLoadComplete(t._loadCompleteErr)}),this._isShowing&&e.onGameShow?Promise.resolve().then(function(){e.onGameShow()}):!this._isShowing&&e.onGameHide&&Promise.resolve().then(function(){e.onGameHide()})},t.prototype.unRegisterListener=function(e){this._listenerExecutor.unRegister(e)},t.prototype.registerLifeItem=function(e){this.isExist(e)||(this.register(e),e.monitorGameShow(this.onGameShow.bind(this)),e.monitorGameHide(this.onGameHide.bind(this)))},t.prototype.unRegisterLifeItem=function(e){this.unRegister(e)},t}(s.default),S=function(e){function t(){var t=e.call(this)||this;return t._initTime=v.default.milliTime(),t._isStart=!1,t._lifeCycleItemExecutor=new m,t._registerErrMsg=[],t.initExecutor(),t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initExecutor=function(){v.default.isLayaEngine()&&this.register(new u.default),v.default.isCreator3xEngine()&&this.register(new c.default),v.default.isCreator2xEngine()&&this.register(new d.default),this.register(new h.default),this.register(new p.default)},t.prototype.addListener=function(){l.default.registerItem(this)},Object.defineProperty(t.prototype,"isStart",{set:function(){var e=this;if(!this._isStart){this._isStart=!0;var i="";this.executeAsync({type:s.ULBaseExecutionEnum.RegisterSequence,endType:s.ULBaseExecutionEndEnum.All,promiseHandle:function(e){return new Promise(function(t,i){e.startWork(),e.onInitWithAction({onLoad:function(){t()},onError:function(e){i(e)}})})}}).catch(function(e){t.reportErrMsg("ULGameExecutor startWork",e.stack),i=JSON.stringify(e.stack.slice(0,e.stack.indexOf("\n")))}).then(function(){e._lifeCycleItemExecutor.onModuleLoadComplete(i)})}},enumerable:!1,configurable:!0}),t.prototype.getAllModuleConfigMessage=function(){return this.executeSync({type:s.ULBaseExecutionEnum.RegisterSequence,endType:s.ULBaseExecutionEndEnum.All,defaultValue:[],handle:function(e,t){return t.push(e.moduleName+" : "+e.configSuccess+" : "+e.configErrMsg),t}})},t.prototype.goldfingerView=function(e){var i=this;return new l.ULGoldfingerStackView("\u6e38\u620f\u57fa\u7840\u6a21\u5757",e,function(e){var n="1"==_.default.getStorage("ulsdk_show_pointDebugInfo_mode"),o=[{name:"\u662f\u5426\u521d\u59cb\u5316:",value:t.isStart},{name:"Debug\u6a21\u5757\u5f00\u5173:",value:"1"==_.default.getStorage("ulsdk_debug"),handle:function(e){_.default.setStorage("ulsdk_debug",e?"1":""),f.default.showToast({title:"Debug\u6a21\u5f0f"+(e?"\u5df2\u5f00\u542f":"\u5df2\u5173\u95ed")+" \u4e0b\u6b21\u542f\u52a8\u751f\u6548"})}},{name:"\u663e\u793a\u5ba2\u6237\u7aef\u6253\u70b9\u4fe1\u606f\u754c\u9762\u5f00\u5173:",value:n,handle:function(e){_.default.setStorage("ulsdk_show_pointDebugInfo_mode",e?"1":"0"),i._lifeCycleItemExecutor.onShowPointDebugInfo(e),f.default.showToast({title:e?"\u6253\u70b9\u4fe1\u606f\u754c\u9762\u6253\u5f00":"\u6253\u70b9\u4fe1\u606f\u754c\u9762\u5173\u95ed"})}}],r=[{name:"\u6e20\u9053\u521d\u59cb\u5316:",handle:function(){f.default.showInformationFlow({title:"\u6e20\u9053\u521d\u59cb\u5316\u4fe1\u606f",content:i.getAllModuleConfigMessage()})}},{name:"\u5f02\u5e38\u4fe1\u606f:",handle:function(){f.default.showInformationFlow({title:"\u5f02\u5e38\u4fe1\u606f",content:[].concat(i._registerErrMsg)})}},{name:"\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc:",buttonText:"\u53d1\u9001\u4fe1\u606f",handle:function(){i._lifeCycleItemExecutor.onSkipNoviceGuide(),f.default.showToast({title:"\u5df2\u5411\u6e38\u620f\u53d1\u9001\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc"})}},{name:"\u91cd\u7f6e\u6e38\u620f\u5b58\u6863:",buttonText:"\u53d1\u9001\u4fe1\u606f",handle:function(){f.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u662f\u5426\u91cd\u7f6e\u6e38\u620f\u5b58\u6863",actions:[{name:"\u786e\u5b9a\u91cd\u7f6e",handle:function(){i._lifeCycleItemExecutor.onResetGameSave()}},{name:"\u518d\u60f3\u60f3",handle:function(){}}]})}}];e.addStackForSwitchs(o),e.addStackButtons(r)})},t.startWork=function(){y.default.startWork(),t.instance.isStart=!0},Object.defineProperty(t,"isStart",{get:function(){return t.instance._isStart},enumerable:!1,configurable:!0}),Object.defineProperty(t,"initTime",{get:function(){return t.instance._initTime},enumerable:!1,configurable:!0}),t.isExist=function(e){return t.instance.getAllRegisterModuleName().indexOf(e)>-1},t.reportErrMsg=function(e,i){t.instance._registerErrMsg.push(e+":\n"+i)},t.registerListener=function(e){t.instance._lifeCycleItemExecutor.registerListener(e)},t.removeListener=function(e){t.instance._lifeCycleItemExecutor.unRegisterListener(e)},t.registerLifeItem=function(e){t.instance._lifeCycleItemExecutor.registerLifeItem(e)},t.removeLifeItem=function(e){t.instance._lifeCycleItemExecutor.unRegisterLifeItem(e)},t.exitGame=function(){t.instance._lifeCycleItemExecutor.exitGame()},t}(s.default);r.default=S,cc._RF.pop()},{}],ULGesture:[function(e,t,i){"use strict";cc._RF.push(t,"b831ciuOqNNbpKeLssx7/2v","ULGesture");var n=i;Object.defineProperty(n,"__esModule",{value:!0});n.default=function(){},cc._RF.pop()},{}],ULGoldfingerExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"55e40ECr7dJK4tohhlIpBFw","ULGoldfingerExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULGoldfingerStackView=void 0;var s=o("ULColor"),l=o("ULEventEnum"),d=o("ULFont"),c=o("ULRect"),u=o("ULScreen"),h=o("ULButton"),p=o("ULView"),f=o("ULWindow"),g=o("ULBaseExecutor"),v=o("ULTableView"),_=o("ULViewController"),y=o("ULViewEnum"),m=o("ULLabel"),S=o("ULSwitch"),b=o("ULTextField"),C=o("ULMenuView"),I=o("ULTableViewStoredTextCell"),F=function(e){function t(t,i,n){void 0===n&&(n=null);var o=e.call(this,c.default.Zero)||this;return o._isSelected=!1,o.name=t,o.width=i,o._onLazyLoad=n,o.backgroundColor=s.default.Clear,o}return a(t,e),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this._isSelected&&this._onLazyLoad&&(this._onLazyLoad(this),this._onLazyLoad=null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var e=this.subViews;return e.length>0?e[e.length-1].frame.maxY:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextItemY",{get:function(){var e=this.height;return 0==e?0:e+this.spacing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return t.font},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonFont",{get:function(){return t.buttonFont},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemHeight",{get:function(){return t.itemHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return t.spacing},enumerable:!1,configurable:!0}),t.prototype.addStackCenterLabels=function(e){for(var t=this.nextItemY,i=0;i<e.length;i++){var n=e[i],o=t+i*(this.itemHeight+this.spacing);if(n){var r=new m.default(c.default.Init(0,o,this.width,this.itemHeight));r.backgroundColor=s.default.Clear,r.textColor=s.default.White,r.textAlignment=y.ULTextAligment.Center,r.font=this.font,r.text=n,this.addSubView(r)}}this.frame=c.default.Init(0,0,this.width,this.height)},t.prototype.addStackLabels=function(e){for(var t=this.nextItemY,i=0;i<e.length;i++){var n=e[i],o=t+i*(this.itemHeight+this.spacing),r=this.font.getTextWidth(y.ULLineBreakMode.CharWrapping,n.name,this.width,1)+10;if(n.name){var a=new m.default(c.default.Init(0,o,r,this.itemHeight));a.backgroundColor=s.default.Clear,a.textColor=s.default.White,a.font=this.font,a.text=n.name,this.addSubView(a)}if(n.value){var l=new m.default(c.default.Init(r,o,this.width-r,this.itemHeight));l.backgroundColor=s.default.Clear,l.textColor=s.default.White,l.textAlignment=y.ULTextAligment.Right,l.font=this.font,l.text=n.value,this.addSubView(l)}}this.frame=c.default.Init(0,0,this.width,this.height)},t.prototype.addStackForSwitchs=function(e){for(var t=this.nextItemY,i=function(i){var o=e[i],r=t+i*(n.itemHeight+n.spacing);if(o.name){var a=new m.default(c.default.Init(0,r,n.width-100,n.itemHeight));a.backgroundColor=s.default.Clear,a.textColor=o.handle?s.default.White:s.default.Red,a.font=n.font,a.text=o.name,n.addSubView(a)}var d=new S.default(c.default.Init(n.width-50,r,50,n.itemHeight));d.isSelected=o.value,o.handle?d.registerControlEvent(l.ULControlEvents.ValueChange,function(e){o.handle(e)}):d.userInteractionEnabled=!1,n.addSubView(d)},n=this,o=0;o<e.length;o++)i(o);this.frame=c.default.Init(0,0,this.width,this.height)},t.prototype.addStackButtons=function(e){for(var t=this.nextItemY,i=function(i){var o=e[i],r=t+i*(n.itemHeight+n.spacing),a=o.width||100;if(o.name){var d=new m.default(c.default.Init(0,r,n.width-a,n.itemHeight));d.backgroundColor=s.default.Clear,d.textColor=s.default.White,d.font=n.font,d.text=o.name,n.addSubView(d)}var u=new h.default(c.default.Init(n.width-a,r,a,n.itemHeight));u.font=n.buttonFont,u.setTitleForState(o.buttonText||"\u67e5\u770b\u4fe1\u606f",l.ULControlState.Normal),u.registerControlEvent(l.ULControlEvents.TouchUpInside,function(){o.handle&&o.handle()}),n.addSubView(u)},n=this,o=0;o<e.length;o++)i(o);this.frame=c.default.Init(0,0,this.width,this.height)},t.prototype.addHorizontalButtons=function(e){var t=this.nextItemY,i=0;e.forEach(function(e){i+=e.width||100});for(var n=(this.width-i)/(e.length-1),o=0,r=function(i){var r=e[i],s=r.width||100,d=new h.default(c.default.Init(o,t,s,a.itemHeight));d.font=a.buttonFont,o=d.frame.maxX+n,d.setTitleForState(r.name,l.ULControlState.Normal),r.handle&&d.registerControlEvent(l.ULControlEvents.TouchUpInside,function(){r.handle()}),a.addSubView(d)},a=this,s=0;s<e.length;s++)r(s);this.frame=c.default.Init(0,0,this.width,this.height)},t.prototype.addStackTextFiled=function(e){for(var t=this.nextItemY,i=function(i){var o=e[i],r=t+i*(n.itemHeight+n.spacing),a=o.width||100;if(o.name){var d=new m.default(c.default.Init(0,r,n.width-a,n.itemHeight));d.backgroundColor=s.default.Clear,d.textColor=s.default.White,d.font=n.font,d.text=o.name,n.addSubView(d)}var u=new b.default(c.default.Init(n.width-a,r,a,n.itemHeight));u.textAlignment=y.ULTextAligment.Center,u.text=o.value||"",o.handle&&u.registerControlEvent(l.ULControlEvents.ValueChange,function(e){o.handle(e)}),n.addSubView(u)},n=this,o=0;o<e.length;o++)i(o);this.frame=c.default.Init(0,0,this.width,this.height)},t.prototype.addStackMenuViews=function(e){for(var t=this.nextItemY,i=function(i){var o=e[i],r=t+i*(n.itemHeight+n.spacing),a=o.width||100;if(o.name){var d=new m.default(c.default.Init(0,r,n.width-a,n.itemHeight));d.backgroundColor=s.default.Clear,d.textColor=s.default.White,d.font=n.font,d.text=o.name,n.addSubView(d)}var u=new C.default(c.default.Init(n.width-a,r,a,n.itemHeight));u.textAlignment=y.ULTextAligment.Center,u.title=o.name,u.font=n.buttonFont,u.dataSource=o.value||[],u.selectedNum=o.selectedNum||0,u.menuViewType=u.dataSource.length>15?C.ULMenuViewType.KitPop:C.ULMenuViewType.Normal,o.handle&&u.registerControlEvent(l.ULControlEvents.ValueChange,function(e){o.handle(e)}),n.addSubView(u)},n=this,o=0;o<e.length;o++)i(o);this.frame=c.default.Init(0,0,this.width,this.height)},t.prototype.addStackView=function(e){e.frame=c.default.Init(e.frame.x,this.nextItemY,e.frame.width,e.frame.height),this.addSubView(e),this.frame=c.default.Init(0,0,this.width,this.height)},t.prototype.removeStackView=function(e){for(var t=this.subViews,i=!1,n=0;t.length>0;){var o=t.shift();o!=e?(i&&(o.frame=c.default.Init(0,n,o.frame.width,o.frame.height)),n=o.frame.maxY+this.spacing):(o.removeFromSuperView(),i=!0)}this.frame=c.default.Init(0,0,this.width,this.height)},t.font=d.default.boldSystem(20),t.buttonFont=d.default.boldSystem(17),t.itemHeight=40,t.spacing=10,t}(p.default);r.ULGoldfingerStackView=F;var R=function(e){function t(){var t=e.call(this)||this;return t.dataSource=[],t._tableView=null,t}return a(t,e),Object.defineProperty(t.prototype,"tableView",{get:function(){return this._tableView||(this._tableView=new v.default(c.default.Init(10,0,u.default.width-20,u.default.height),v.ULTableViewStyle.Group),this._tableView.registerCell(v.ULTableViewCell,"ULTableViewCell"),this._tableView.registerCell(I.default,"ULTableViewStoredTextCell"),this._tableView.backgroundColor=s.default.Clear,this._tableView.delegate=this,this._tableView.dataSource=this),this._tableView},enumerable:!1,configurable:!0}),t.prototype.viewDidLoad=function(){this.view.backgroundColor=s.default.Black,this.view.addSubView(this.tableView),this.reloadData()},t.prototype.reloadData=function(){this.tableView.reloadData()},t.prototype.numberOfSectionsInTableView=function(){return this.dataSource.length},t.prototype.numberOfRowsInSection=function(e,t){var i=this.dataSource[t];return i instanceof F&&1==i.isSelected?2:1},t.prototype.cellForRowAtIndexPath=function(e,t){var i=this.dataSource[t.section];if(0==t.row&&i instanceof F){var n=e.dequeueReusableCell("ULTableViewStoredTextCell");return n.titleLabel.text=i.name,n.titleLabel.font=d.default.boldSystem(24),n.titleLabel.textAlignment=y.ULTextAligment.Center,n.titleLabel.backgroundColor=s.default.RGB(220,220,220),n}var o=e.dequeueReusableCell("ULTableViewCell");return o.backgroundColor=s.default.Clear,o.removeAllSubView(),i.frame=c.default.Init(0,10,i.frame.width,i.frame.height),o.addSubView(i),o},t.prototype.heightForCell=function(e,t){var i=this.dataSource[t.section];return 0==t.row?i instanceof F?40:i.frame.height:i.frame.height+10},t.prototype.heightForFooter=function(){return 10},t.prototype.didHighlightRowAtIndexPath=function(e,t){var i=this.dataSource[t.section];0==t.row&&i instanceof F&&(e.cellForRowsIndexPath(t).titleLabel.backgroundColor=s.default.RGB(140,140,140))},t.prototype.didUnHighlightRowAtIndexPath=function(e,t){var i=this.dataSource[t.section];0==t.row&&i instanceof F&&(e.cellForRowsIndexPath(t).titleLabel.backgroundColor=s.default.RGB(220,220,220))},t.prototype.didSelectRowAtIndexPath=function(e,t){e.deSelectRowAtIndexPath(t);var i=this.dataSource[t.section];0==t.row&&i instanceof F&&(i.isSelected=!i.isSelected,e.reloadData())},t}(_.default),w=function(e){function t(){var t=e.call(this)||this;return t._contentWidth=u.default.bounds.width-20,t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.showGoldfinger=function(){var e=this,t=new h.default(c.default.Init(0,0,this._contentWidth,50));t.font=d.default.boldSystem(24),t.setTitleForState("\u9000\u51fa",l.ULControlState.Normal),t.registerControlEvent(l.ULControlEvents.TouchUpInside,function(){n.removeFromSuperView()});var i=new R;i.dataSource=this.executeSync({type:g.ULBaseExecutionEnum.RegisterSequence,endType:g.ULBaseExecutionEndEnum.All,defaultValue:[t],handle:function(t,n){var o=t.goldfingerView(e._contentWidth,function(){i.reloadData()});return n.push(o),n}});var n=new f.default;n.makeKeyAndVisible(),n.pushViewController(i)},t.registerItem=function(e){t.instance.register(e)},t.show=function(){t.instance.showGoldfinger()},t}(g.default);r.default=w,cc._RF.pop()},{}],ULHttp:[function(e,t,i){"use strict";cc._RF.push(t,"f3beaV6KuBFWYn7DOSxrJXG","ULHttp");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.ReqeustHandleParam=r.ReqeustParam=void 0;var l=o("ULTools"),d=function(){};r.ReqeustParam=d;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(d);r.ReqeustHandleParam=c;var u=function(){function e(){}return e.mergeReqeustUrl=function(e){var t=e.url;if(e.params){var i=[];Object.keys(e.params).forEach(function(t){var n=e.params[t];i.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),t=t+"?"+i.join("&")}return t},e.getPromise=function(t){var i=t.responseType||"json",n=t.requestHeader||{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},o=this;return new Promise(function(r,a){var s=new XMLHttpRequest;s.timeout=t.timeout||e.DEFAULT_TIMEOUT,s.responseType=i,s.onreadystatechange=function(){if(4==s.readyState){if(200==s.status){var e=s.response;if("json"==i)if(l.default.isString(e)){var t=l.default.safeJsonParse(e,null);t?r(t):a("error:json\u89e3\u6790\u9519\u8bef")}else r(e);else r("text"==i?e.toString():e)}else a("error:"+s.status);s.abort()}},s.ontimeout=function(){s.abort(),a("error: timeout")},s.open("get",o.mergeReqeustUrl(t)),Object.keys(n).forEach(function(e){s.setRequestHeader(e,n[e])}),s.send()})},e.postPromise=function(t){var i=t.responseType||"json",n=t.requestHeader||{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},o=this;return new Promise(function(r,a){var s=new XMLHttpRequest;s.timeout=t.timeout||e.DEFAULT_TIMEOUT,s.responseType=i,s.onreadystatechange=function(){if(4==s.readyState){if(200==s.status){var e=s.response;if("json"==i)if(l.default.isString(e)){var t=l.default.safeJsonParse(e,null);t?r(t):a("error:json\u89e3\u6790\u9519\u8bef")}else r(e);else r("text"==i?e.toString():e)}else a("error:"+s.status);s.abort()}},s.ontimeout=function(){s.abort(),a("error: timeout")},s.open("post",o.mergeReqeustUrl(t)),Object.keys(n).forEach(function(e){s.setRequestHeader(e,n[e])}),s.send(t.data)})},e.postEncryptionPromise=function(e){var t=e.data;l.default.isString(t)||(t=JSON.stringify(t));var i,n=this.stringToByte(t),o=n.length%127||127;i=new ArrayBuffer(n.length);for(var r=new Uint8Array(i),a=0;a<n.length;a++)n[a]=n[a]^o,r[a]=n[a];return this.postPromise({url:e.url,timeout:e.timeout,params:e.params,data:i,responseType:e.responseType,requestHeader:s(s({},e.requestHeader||{}),{isEncrypt:"1","Content-Type":"application/octet-stream"})})},e.get=function(e){return this.getPromise(e).then(function(t){e.success&&e.success(t)},function(t){e.fail&&e.fail(t)})},e.post=function(e){return this.postPromise(e).then(function(t){e.success&&e.success(t)},function(t){e.fail&&e.fail(t)})},e.postEncryption=function(e){return this.postEncryptionPromise(e).then(function(t){e.success&&e.success(t)},function(t){e.fail&&e.fail(t)})},e.stringToByte=function(e){var t,i,n=new Array;t=e.length;for(var o=0;o<t;o++)(i=e.charCodeAt(o))>=65536&&i<=1114111?(n.push(i>>18&7|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)):i>=2048&&i<=65535?(n.push(i>>12&15|224),n.push(i>>6&63|128),n.push(63&i|128)):i>=128&&i<=2047?(n.push(i>>6&31|192),n.push(63&i|128)):n.push(255&i);return n},e.DEFAULT_TIMEOUT=5e3,e}();r.default=u,cc._RF.pop()},{}],ULImageView:[function(e,t,i){"use strict";cc._RF.push(t,"bbe84BTzJ9Jcqkzp+mIxPcp","ULImageView");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULRect"),l=o("ULView"),d=o("ULViewEnum"),c=o("ULColor"),u=function(e){function t(t){void 0===t&&(t=s.default.Zero);var i=e.call(this,t)||this;return i._contenMode=d.ULViewContentMode.ToFill,i._image=null,i.backgroundColor=c.default.Clear,i}return a(t,e),Object.defineProperty(t.prototype,"contenMode",{get:function(){return this._contenMode},set:function(e){this._contenMode!=e&&(this._contenMode=e,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this._image},set:function(e){this._image!=e&&(this._image=e,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),t.prototype.drawRect=function(t,i){var n=this;if(e.prototype.drawRect.call(this,t,i),this.image){var o=!1;this.image.getImagePanelCtx(function(e,i){if(n.image==e)if(o)n.setNeedsRefresh();else{var r=n.drawImageRect(i,n.bounds),a=r.drawImageRect,s=r.bgRect;t.drawClipImage(i,a.x,a.y,a.width,a.height,s.x,s.y,s.width,s.height)}}),o=!0}},t.prototype.drawImageRect=function(e,t){var i=new s.default({x:0,y:0,width:e.width,height:e.height}),n=new s.default({x:0,y:0,width:t.width,height:t.height}),o=Math.min(n.width,i.width),r=Math.min(n.height,i.height);switch(this.contenMode){case d.ULViewContentMode.ToFill:break;case d.ULViewContentMode.AspectFit:var a=Math.min(n.width/i.width,n.height/i.height);n.width=i.width*a,n.height=i.height*a,n.x=(t.width-n.width)/2,n.y=(t.height-n.height)/2;break;case d.ULViewContentMode.AspectFill:a=Math.max(n.width/i.width,n.height/i.height),i.width=n.width/a,i.height=n.height/a,i.x=(e.width-i.width)/2,i.y=(e.height-i.height)/2;break;case d.ULViewContentMode.Center:i.x=(i.width-o)/2,i.y=(i.height-r)/2,n.x=(n.width-o)/2,n.y=(n.height-r)/2,i.width=n.width=o,i.height=n.height=r;break;case d.ULViewContentMode.Top:i.x=(i.width-o)/2,i.y=0,n.x=(n.width-o)/2,n.y=0,i.width=n.width=o,i.height=n.height=r;break;case d.ULViewContentMode.Bottom:i.x=(i.width-o)/2,i.y=i.height-r,n.x=(n.width-o)/2,n.y=n.height-r,i.width=n.width=o,i.height=n.height=r;break;case d.ULViewContentMode.Left:i.x=0,i.y=(i.height-r)/2,n.x=0,n.y=(n.height-r)/2,i.width=n.width=o,i.height=n.height=r;break;case d.ULViewContentMode.Right:i.x=i.width-o,i.y=(i.height-r)/2,n.x=n.width-o,n.y=(n.height-r)/2,i.width=n.width=o,i.height=n.height=r;break;case d.ULViewContentMode.TopLeft:i.x=0,i.y=0,n.x=0,n.y=0,i.width=n.width=o,i.height=n.height=r;break;case d.ULViewContentMode.TopRight:i.x=i.width-o,i.y=0,n.x=n.width-o,n.y=0,i.width=n.width=o,i.height=n.height=r;break;case d.ULViewContentMode.BottomLeft:i.x=0,i.y=i.height-r,n.x=0,n.y=n.height-r,i.width=n.width=o,i.height=n.height=r;break;case d.ULViewContentMode.BottomRight:i.x=i.width-o,i.y=i.height-r,n.x=n.width-o,n.y=n.height-r,i.width=n.width=o,i.height=n.height=r}return{drawImageRect:i,bgRect:n}},t}(l.default);r.default=u,cc._RF.pop()},{}],ULImage:[function(e,t,i){"use strict";cc._RF.push(t,"5042a8dw5BG1pPfHkmoEcZ8","ULImage");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r,a=n("ULPanelCtxManager");(function(e){e[e.Bundle=0]="Bundle",e[e.RemoteUrl=1]="RemoteUrl"})(r||(r={}));var s=function(){function e(e,t){var i=this;this.panelCtx=null,this.onLoadCallbackList=[],this.type=e,this.url=t;var n=null;switch(e){case r.Bundle:n=a.ULPanelCtxManager.loadImageFromBundle;break;case r.RemoteUrl:n=a.ULPanelCtxManager.loadImageFromUrl}n(this.url,function(e,t){if(e)return console.error("ULImage loadImage url:",i.url),void console.error("ULImage loadImage err:",e);for(i.panelCtx=t;i.onLoadCallbackList.length;)i.onLoadCallbackList.shift()(i,i.panelCtx)})}return e.prototype.getImagePanelCtx=function(e){this.panelCtx?e(this,this.panelCtx):this.onLoadCallbackList.push(e)},e.fromBundle=function(t){return new e(r.Bundle,t)},e.fromUrl=function(t){return new e(r.RemoteUrl,t)},e}();o.default=s,cc._RF.pop()},{}],ULJoinGroupExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"5a69crR2aVFxqMoXes6FF9s","ULJoinGroupExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULKitPop"),l=o("ULColor"),d=o("ULFont"),c=o("ULRect"),u=o("ULEventEnum"),h=o("ULButton"),p=o("ULMenuView"),f=o("ULView"),g=o("ULWindow"),v=o("ULLog"),_=o("ULTools"),y=o("ULBaseExecutor"),m=o("ULConfigExecutor"),S=o("ULGameExecutor"),b=o("ULGoldfingerExecutor"),C=o("ULJoinGroupViewController"),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onJoinGroup=function(e,t){v.default.log("ULJoinGroupListenerExecutor onJoinGroup moduleName:"+e+"  groudId:"+t),this.executeConcurrencyAll(function(i){i.onJoinGroup&&i.onJoinGroup(e,t)}).catch(function(e){v.default.log("ULJoinGroupListenerExecutor onJoinGroup err:",e.stack),S.default.reportErrMsg("ULJoinGroupListenerExecutor onJoinGroup",e.stack)})},t}(y.default),F=function(e){function t(){var t=e.call(this)||this;return t._listenerExecutor=new I,t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){b.default.registerItem(this)},t.prototype.sdkSwitch=function(){return 1==m.default.getNumberValue("n_sdk_joinGroup_mode",1)},t.prototype.joinGroup=function(e){var t=this;void 0===e&&(e=void 0);var i=this.getJoinGroupItem(e),n=i.joinGroupSetting;if(0==n.length)return Promise.reject("\u7fa4\u7ec4\u6570\u91cf==0");var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.vcStackDidChange=function(){e.prototype.vcStackDidChange.call(this),0==this.viewControllers.length&&this.resignKeyWindow()},t}(g.default));o.windowLevel=s.ULWindowPriority.DebugWindow,o.makeKeyAndVisible();var r=new C.default(n,function(e){i.joinGroup(n[e]).then(function(){t._listenerExecutor.onJoinGroup(i.moduleName,n[e])},function(){})});return o.pushViewController(r),Promise.resolve()},t.prototype.getJoinGroupItem=function(e){return void 0===e&&(e=void 0),this.executeSync({moduleName:e,type:y.ULBaseExecutionEnum.ChainFlashback,endType:y.ULBaseExecutionEndEnum.One,handle:function(e){return e}})},t.prototype.goldfingerView=function(e){var i=this;return new b.ULGoldfingerStackView("\u7fa4\u7ec4\u6a21\u5757",e,function(n){var o=[{name:"\u7fa4\u7ec4\u5f00\u5173:",value:t.isSupport}],r=new f.default(c.default.Init(0,0,e,40));r.backgroundColor=l.default.Clear;var a=["\u9ed8\u8ba4"].concat(i.getAllRegisterModuleName()),g=new p.default(c.default.Init(0,0,160,40));g.dataSource=a,g.font=d.default.boldSystem(16);var v=new h.default(c.default.Init(0,0,160,40));v.center=new c.ULPoint({x:e/2,y:v.center.y}),v.setTitleForState("\u7fa4\u7ec4\u914d\u7f6e",u.ULControlState.Normal),v.font=d.default.boldSystem(20),n.addSubView(v),v.registerControlEvent(u.ULControlEvents.TouchUpInside,function(){var e=i.getJoinGroupItem(0==g.selectedNum?void 0:a[g.selectedNum]);s.default.showInformationFlow({title:e.moduleName+" \u7fa4\u7ec4\u914d\u7f6e",content:_.default.getObjMessage(e.joinGroupSetting)})});var y=new h.default(c.default.Init(e-160,0,160,40));y.setTitleForState("\u6dfb\u52a0\u7fa4\u7ec4",u.ULControlState.Normal),y.font=d.default.boldSystem(20),y.registerControlEvent(u.ULControlEvents.TouchUpInside,function(){i.joinGroup(0==g.selectedNum?void 0:a[g.selectedNum]).then(function(){s.default.showToast({title:"\u6dfb\u52a0\u6210\u529f"})},function(e){s.default.showToast({title:"\u6dfb\u52a0\u5931\u8d25 errMsg:\n"+e})})}),r.addSubView(g),r.addSubView(v),r.addSubView(y),n.addStackForSwitchs(o),n.addStackView(r)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.registerListener=function(e){t.instance._listenerExecutor.register(e)},t.removeListener=function(e){t.instance._listenerExecutor.unRegister(e)},t.joinGroup=function(){return t.instance.joinGroup()},t}(y.default);r.default=F,cc._RF.pop()},{}],ULJoinGroupViewController:[function(e,t,i){"use strict";cc._RF.push(t,"9c96cgUhEBAt6sTVhfSvr3S","ULJoinGroupViewController");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULColor"),l=o("ULRect"),d=o("ULEventEnum"),c=o("ULButton"),u=o("ULStatckView"),h=function(e){function t(t,i){var n=e.call(this)||this;return n.handle=null,n._stackView=null,n.dataSource=t,n.handle=i,n}return a(t,e),Object.defineProperty(t.prototype,"stackView",{get:function(){if(!this._stackView){var e=new u.default;e.spacing=10,e.axis=u.ULStatckViewAxis.Vertical,e.edgeInsets=new l.ULEdgeInsets(20,20,20,20),e.backgroundColor=s.default.White,e.alignment=u.ULStatckViewAlignment.Fill,e.dstribution=u.ULStatckViewDistribution.Fill,this._stackView=e}return this._stackView},enumerable:!1,configurable:!0}),t.prototype.viewDidLoad=function(){this.initWithUserInterface(),this.autoLayoutSetting()},t.prototype.initWithUserInterface=function(){var e=this;this.view.backgroundColor=s.default.RGBA(0,0,0,.5),this.view.addSubView(this.stackView);for(var t=function(t){var n=i.dataSource[t],o=new c.default;o.titleEdgeInsets=new l.ULEdgeInsets(20,10,20,10),o.setTitleForState(n,d.ULControlState.Normal),o.registerControlEvent(d.ULControlEvents.TouchUpInside,function(){e.handle(t)}),i.stackView.addSubView(o)},i=this,n=0;n<this.dataSource.length;n++)t(n)},t.prototype.autoLayoutSetting=function(){var e=this;this.stackView.ul_makeConstraints(function(t){t.centerX.and.centerY.equalTo(e.view)})},t.prototype.touchesBegan=function(){this.popViewController()},t}(o("ULViewController").default);r.default=h,cc._RF.pop()},{}],ULKitAdapter:[function(e,t,i){"use strict";cc._RF.push(t,"30111sm5xdBSLQ3TLTEMiJ8","ULKitAdapter");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ULKitEvent:[function(e,t,i){"use strict";cc._RF.push(t,"19f4566D7pKk6hla1MoYv7F","ULKitEvent");var n=i;Object.defineProperty(n,"__esModule",{value:!0});n.default=function(){},cc._RF.pop()},{}],ULKitIndexedMap:[function(e,t,i){"use strict";cc._RF.push(t,"39521CgQcNOvaLwAQeddsyg","ULKitIndexedMap");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.ULKitBaseArray=n.ULPair=void 0;var o=function(){function e(e){this.index={},this.array=[],this.onAdd=null,this.onRemove=null,this.onAdd=e.onAdd,this.onRemove=e.onRemove}return e.prototype.size=function(){return this.array.length},e.prototype.empty=function(){return 0===this.array.length},e.prototype.itemAt=function(e){return this.array[e]},e.prototype.contains=function(e){return void 0!==this.index[e.id()]},e.prototype.find=function(e){var t=this.index[e.id()];return void 0===t?void 0:this.array[t]},e.prototype.setDefault=function(e,t){var i=this.index[e.id()];if(void 0===i){var n=new r(e,t());return this.index[e.id()]=this.array.length,this.array.push(n),this.onAdd&&this.onAdd(n),n}return this.array[i]},e.prototype.erase=function(e){var t=this.index[e.id()];if(void 0!==t){this.index[e.id()]=void 0;var i=this.array[t],n=this.array.pop();return i!==n&&(this.array[t]=n,this.index[n.first.id()]=t),this.onRemove&&this.onRemove(i),i}},e.prototype.copy=function(){for(var t=new e({onAdd:this.onAdd,onRemove:this.onRemove}),i=0;i<this.array.length;i++){var n=this.array[i].copy();t.array[i]=n,t.index[n.first.id()]=i}return t},e}();n.default=o;var r=function(){function e(e,t){this.first=e,this.second=t}return e.prototype.copy=function(){return new e(this.first,this.second)},e}();n.ULPair=r;var a=function(){function e(e){this.contentList=[],this.onAdd=null,this.onRemove=null,this.onAdd=e.onAdd,this.onRemove=e.onRemove}return e.prototype.add=function(e){this.contentList.indexOf(e)>=0||(this.contentList.push(e),this.onAdd&&this.onAdd(e))},e.prototype.remove=function(e){var t=this.contentList.indexOf(e);t<0||(this.contentList.splice(t,1),this.onRemove&&this.onRemove(e))},e.prototype.size=function(){return this.contentList.length},e.prototype.itemAt=function(e){return this.contentList[e]},e.prototype.pop=function(){var e=this.size();if(e>0){var t=this.itemAt(e-1);return this.remove(t),t}},e.prototype.clear=function(){for(;this.contentList.length>0;){var e=this.contentList.pop();this.onRemove&&this.onRemove(e)}},Object.defineProperty(e.prototype,"items",{get:function(){return[].concat(this.contentList)},enumerable:!1,configurable:!0}),e}();n.ULKitBaseArray=a,cc._RF.pop()},{}],ULKitPop:[function(e,t,i){"use strict";cc._RF.push(t,"a78207bDEVGMZOIyNwRGM/6","ULKitPop");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULShowToastIconEnum=r.ULWindowPriority=void 0;var s,l=o("ULApplication"),d=o("ULColor"),c=o("ULImage"),u=o("ULRect"),h=o("ULScreen"),p=o("ULImageView"),f=o("ULLabel"),g=o("ULView"),v=o("ULViewEnum"),_=o("ULWindow"),y=o("ULSearchViewController"),m=o("ULModalViewController"),S=o("ULToastViewcontroller");(function(e){e[e.DebugWindow=0]="DebugWindow",e[e.DialogWindow=100]="DialogWindow",e[e.ToastWindow=200]="ToastWindow",e[e.AdWindow=300]="AdWindow",e[e.LoadingWindow=1e3]="LoadingWindow"})(s=r.ULWindowPriority||(r.ULWindowPriority={})),function(e){e[e.None=0]="None",e[e.Success=1]="Success",e[e.Fail=2]="Fail",e[e.loading=3]="loading"}(r.ULShowToastIconEnum||(r.ULShowToastIconEnum={}));var b=function(){function e(){}return e.handle=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var o=e?t.success:t.fail;if(o)try{o.apply(void 0,i)}catch(e){console.error(e.stack)}if(t.complete)try{t.complete()}catch(e){console.error(e.stack)}},Object.defineProperty(e,"showToastWindow",{get:function(){return this._showToastWindow||(this._showToastWindow=new _.default,this._showToastWindow.windowLevel=s.ToastWindow,this._showToastWindow.backgroundColor=d.default.Clear,this._showToastWindow.makeKeyAndVisible()),this._showToastWindow},enumerable:!1,configurable:!0}),Object.defineProperty(e,"toastVC",{get:function(){return this._toastVC||(this._toastVC=new S.default({toastVCWillUnDisplay:this.hideToast.bind(this)})),this._toastVC},enumerable:!1,configurable:!0}),e.showToast=function(e){var t=e.duration||1200;this.toastVC.showToastMessage(e.title,t),this._showToastWindow||this.showToastWindow.pushViewController(this.toastVC),this.handle(!0,e)},e.hideToast=function(){this._showToastWindow&&this._showToastWindow.resignKeyWindow(),this._toastVC=null,this._showToastWindow=null},Object.defineProperty(e,"showModalWindow",{get:function(){return this._showModalWindow||(this._showModalWindow=new _.default,this._showModalWindow.windowLevel=s.DialogWindow,this._showModalWindow.backgroundColor=d.default.Clear,this._showModalWindow.makeKeyAndVisible()),this._showModalWindow},enumerable:!1,configurable:!0}),e.showModal=function(e){var t=this,i=e.actions&&e.actions.length>0?e.actions.filter(function(e,i){var n=e.handle;return e.handle=function(){t.popModalViewcontroller(),n(e.name)},i<3}):[{name:"\u77e5\u9053\u4e86",handle:function(){t.popModalViewcontroller()}}],n=new m.default({title:e.title,content:e.content,actions:i});this.showModalWindow.pushViewController(n),this.handle(!0,e)},e.popModalViewcontroller=function(){this._showModalWindow&&this._showModalWindow.viewControllers.length>1?this._showModalWindow.popLastViewController():(this._showModalWindow&&this._showModalWindow.resignKeyWindow(),this._showModalWindow=null)},e.showLoading=function(e){if(this.loadingWindow)e.fail&&e.fail("\u5df2\u5b58\u5728");else{this.loadingWindow=new _.default(h.default.bounds),this.loadingWindow.windowLevel=s.LoadingWindow,this.loadingWindow.backgroundColor=d.default.RGBA(0,0,0,.5),l.default.registerWindow(this.loadingWindow);var t=new g.default(u.default.Init(0,0,100,100));t.center=this.loadingWindow.center,t.backgroundColor=d.default.White,this.loadingWindow.addSubView(t);var i=new p.default(u.default.Init(20,0,60,60));i.image=c.default.fromBundle("_ulsdk_ui/ulkit_loading.png"),t.addSubView(i);var n=new f.default(u.default.Init(0,60,100,40));n.textColor=d.default.Black,n.textAlignment=v.ULTextAligment.Center,n.text=e.title,t.addSubView(n),this.handle(!0,e)}},e.hideLoading=function(){this.loadingWindow&&l.default.logoutWindow(this.loadingWindow),this.loadingWindow=null},Object.defineProperty(e,"showInformationWindow",{get:function(){return this._showInformationWindow||(this._showInformationWindow=new(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return a(i,t),i.prototype.vcStackDidChange=function(){t.prototype.vcStackDidChange.call(this),0==this.viewControllers.length&&(this.resignKeyWindow(),e._showInformationWindow=null)},i}(_.default)),this._showInformationWindow.windowLevel=s.DialogWindow,this._showInformationWindow.backgroundColor=d.default.Clear,this._showInformationWindow.makeKeyAndVisible()),this._showInformationWindow},enumerable:!1,configurable:!0}),e.showInformationFlow=function(e){var t=new y.default(!!e.isAllowSearch);return t.view.backgroundColor=d.default.RGBA(0,0,0,.5),t.title=e.title,t.sendMessageList(e.content||[]),this.showInformationWindow.pushViewController(t,_.ULPopViewControllerStyle.Popup),{sendMessage:t.sendMessage.bind(t)}},e._showToastWindow=null,e._toastVC=null,e._showModalWindow=null,e.loadingWindow=null,e._showInformationWindow=null,e}();r.default=b,cc._RF.pop()},{}],ULKitTool:[function(e,t,i){"use strict";cc._RF.push(t,"6b5689pg8xJxprw/Z+O1TW/","ULKitTool");var n,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULKitBinaryRelation=void 0,function(e){e[e.lessThan=-1]="lessThan",e[e.equalTo=0]="equalTo",e[e.greaterThan=1]="greaterThan"}(n=o.ULKitBinaryRelation||(o.ULKitBinaryRelation={}));var r=function(){function e(){}return e.startsWith=function(e,t){return e.slice(0,Math.min(e.length,t.length))==t},e.isCreator3xEngine=function(){return!!(window.cc&&window.cc.ENGINE_VERSION&&this.startsWith(window.cc.ENGINE_VERSION,"3."))},e.binarySearch=function(e,t){var i,o=0,r=e.length-1;if(!r)return t(e[0])==n.equalTo?0:-1;if(1==r)return t(e[0])==n.equalTo?0:t(e[1])==n.equalTo?1:-1;for(;o<=r;){var a=t(e[i=(o+r)/2|0]);if(a==n.equalTo)return i;a==n.lessThan?o=i+1:r=i-1}return-1},e}();o.default=r,cc._RF.pop()},{}],ULKit:[function(e,t,i){"use strict";cc._RF.push(t,"cd0883Am1FFJ7KdekCGEtRR","ULKit");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULKit=void 0;var r=n("ULApplication"),a=n("ULColor"),s=n("ULFont"),l=n("ULImage"),d=n("ULRect"),c=n("ULScreen"),u=n("ULButton"),h=n("ULImageView"),p=n("ULControl"),f=n("ULLabel"),g=n("ULMenuView"),v=n("ULScrollView"),_=n("ULStatckView"),y=n("ULSwitch"),m=n("ULTableView"),S=n("ULTableViewStoredTextCell"),b=n("ULTextField"),C=n("ULTextView"),I=n("ULView"),F=n("ULWindow"),R=n("ULViewEnum"),w=n("ULEventEnum"),L=n("ULGesture"),T=n("ULKitEvent"),x=n("ULViewController"),P=n("ULKitPop");o.ULKit=window.ULKit={ULApplication:r.default,ULColor:a.default,ULFont:s.default,ULImage:l.default,ULRect:d.default,ULSize:d.ULSize,ULPoint:d.ULPoint,ULEdgeInsets:d.ULEdgeInsets,ULIndexPath:d.ULIndexPath,ULScreen:c.default,ULButton:u.default,ULControl:p.default,ULImageView:h.default,ULLabel:f.default,ULMenuView:g.default,ULScrollView:v.default,ULStatckView:_.default,ULSwitch:y.default,ULTableView:m.default,ULTableViewStoredTextCell:S.default,ULTextField:b.default,ULTextView:C.default,ULView:I.default,ULWindow:F.default,ULTextAligment:R.ULTextAligment,ULViewContentMode:R.ULViewContentMode,ULLineBreakMode:R.ULLineBreakMode,ULControlEvents:w.ULControlEvents,ULControlState:w.ULControlState,ULGesture:L.default,ULKitEvent:T.default,ULViewController:x.default,ULKitPop:P.default},cc._RF.pop()},{}],ULKiwiConstraint:[function(e,t,i){"use strict";cc._RF.push(t,"f80e2cNF51C0JR2qeX2JOD0","ULKiwiConstraint");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULKiwiConstraint=o.ULKiwiOperator=void 0;var r=n("ULKiwiExpression"),a=n("ULKiwiStrength");(function(e){e[e.Le=0]="Le",e[e.Ge=1]="Ge",e[e.Eq=2]="Eq"})(o.ULKiwiOperator||(o.ULKiwiOperator={}));var s=function(){function e(e,t,i,n){void 0===n&&(n=a.ULKiwiStrength.required),this._id=l++,this._operator=t,this._strength=a.ULKiwiStrength.clip(n),void 0===i&&e instanceof r.ULKiwiExpression?this._expression=e:this._expression=e.minus(i)}return e.prototype.id=function(){return this._id},e.prototype.expression=function(){return this._expression},e.prototype.op=function(){return this._operator},e.prototype.strength=function(){return this._strength},e.prototype.toString=function(){return this._expression.toString()+" "+["<=",">=","="][this._operator]+" 0 ("+this._strength.toString()+")"},e}();o.ULKiwiConstraint=s;var l=0;cc._RF.pop()},{}],ULKiwiExpression:[function(e,t,i){"use strict";cc._RF.push(t,"e01374PjaBH25FvjaTSNWEi","ULKiwiExpression");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULKiwiExpression=void 0;var r=n("ULKiwiPair"),a=n("ULKiwiVariable"),s=function(){function e(){var e=l(arguments);this._terms=e.terms,this._constant=e.constant}return e.prototype.terms=function(){return this._terms},e.prototype.constant=function(){return this._constant},e.prototype.value=function(){for(var e=this._constant,t=0,i=this._terms.size();t<i;t++){var n=this._terms.itemAt(t);e+=n.first.value()*n.second}return e},e.prototype.plus=function(t){return new e(this,t)},e.prototype.minus=function(t){return new e(this,"number"==typeof t?-t:[-1,t])},e.prototype.multiply=function(t){return new e([t,this])},e.prototype.divide=function(t){return new e([1/t,this])},e.prototype.isConstant=function(){return 0==this._terms.size()},e.prototype.toString=function(){var e=this._terms.array.map(function(e){return e.second+"*"+e.first.toString()}).join(" + ");return this.isConstant()||0===this._constant||(e+=" + "),e+this._constant},e}();function l(e){for(var t=0,i=function(){return 0},n=r.createMap(),o=0,l=e.length;o<l;++o){var d=e[o];if("number"==typeof d)t+=d;else if(d instanceof a.ULKiwiVariable)n.setDefault(d,i).second+=1;else if(d instanceof s){t+=d.constant();for(var c=0,u=(g=d.terms()).size();c<u;c++){var h=g.itemAt(c);n.setDefault(h.first,i).second+=h.second}}else{if(!(d instanceof Array))throw new Error("invalid ULKiwiExpression argument: "+d);if(2!==d.length)throw new Error("array must have length 2");var p=d[0],f=d[1];if("number"!=typeof p)throw new Error("array item 0 must be a number");if(f instanceof a.ULKiwiVariable)n.setDefault(f,i).second+=p;else{if(!(f instanceof s))throw new Error("array item 1 must be a variable or expression");var g;for(t+=f.constant()*p,c=0,u=(g=f.terms()).size();c<u;c++)h=g.itemAt(c),n.setDefault(h.first,i).second+=h.second*p}}}return{terms:n,constant:t}}o.ULKiwiExpression=s,cc._RF.pop()},{}],ULKiwiPair:[function(e,t,i){"use strict";cc._RF.push(t,"c442fayoARGp5kflCQqgfYS","ULKiwiPair");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.createMap=void 0,n.createMap=function(){return new o};var o=function(){function e(){this.index={},this.array=[]}return e.prototype.size=function(){return this.array.length},e.prototype.empty=function(){return 0===this.array.length},e.prototype.itemAt=function(e){return this.array[e]},e.prototype.contains=function(e){return void 0!==this.index[e.id()]},e.prototype.find=function(e){var t=this.index[e.id()];return void 0===t?void 0:this.array[t]},e.prototype.setDefault=function(e,t){var i=this.index[e.id()];if(void 0===i){var n=new r(e,t());return this.index[e.id()]=this.array.length,this.array.push(n),n}return this.array[i]},e.prototype.insert=function(e,t){var i=new r(e,t),n=this.index[e.id()];return void 0===n?(this.index[e.id()]=this.array.length,this.array.push(i)):this.array[n]=i,i},e.prototype.erase=function(e){var t=this.index[e.id()];if(void 0!==t){this.index[e.id()]=void 0;var i=this.array[t],n=this.array.pop();return i!==n&&(this.array[t]=n,this.index[n.first.id()]=t),i}},e.prototype.copy=function(){for(var t=new e,i=0;i<this.array.length;i++){var n=this.array[i].copy();t.array[i]=n,t.index[n.first.id()]=i}return t},e}(),r=function(){function e(e,t){this.first=e,this.second=t}return e.prototype.copy=function(){return new e(this.first,this.second)},e}();cc._RF.pop()},{}],ULKiwiSolver:[function(e,t,i){"use strict";cc._RF.push(t,"36e7cgGi6JB3ZMOAxTNjOSW","ULKiwiSolver");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULKiwiSolver=void 0;var r,a=n("ULKiwiConstraint"),s=n("ULKiwiExpression"),l=n("ULKiwiPair"),d=n("ULKiwiStrength"),c=function(){function e(){this._cnMap=l.createMap(),this._rowMap=l.createMap(),this._varMap=l.createMap(),this._editMap=l.createMap(),this._infeasibleRows=[],this._objective=new f,this._artificial=null,this._idTick=0}return e.prototype.createConstraint=function(e,t,i,n){void 0===n&&(n=d.ULKiwiStrength.required);var o=new a.ULKiwiConstraint(e,t,i,n);return this.addConstraint(o),o},e.prototype.safeAddConstraint=function(e){try{this.addConstraint(e)}catch(e){console.warn(e)}},e.prototype.safeRemoveConstraint=function(e){try{this.removeConstraint(e)}catch(e){console.warn(e)}},e.prototype.addConstraint=function(e){if(void 0!==this._cnMap.find(e))throw new Error("duplicate constraint");var t=this._createRow(e),i=t.row,n=t.tag,o=this._chooseSubject(i,n);if(o.type()===r.Invalid&&i.allDummies()){if(!u(i.constant()))throw new Error("unsatisfiable constraint");o=n.marker}if(o.type()===r.Invalid){if(!this._addWithArtificialVariable(i))throw new Error("unsatisfiable constraint")}else i.solveFor(o),this._substitute(o,i),this._rowMap.insert(o,i);this._cnMap.insert(e,n),this._optimize(this._objective)},e.prototype.removeConstraint=function(e){var t=this._cnMap.erase(e);if(void 0===t)throw new Error("unknown constraint");this._removeConstraintEffects(e,t.second);var i=t.second.marker,n=this._rowMap.erase(i);if(void 0===n){var o=this._getMarkerLeavingSymbol(i);if(o.type()===r.Invalid)throw new Error("failed to find leaving row");(n=this._rowMap.erase(o)).second.solveForEx(o,i),this._substitute(i,n.second)}this._optimize(this._objective)},e.prototype.hasConstraint=function(e){return this._cnMap.contains(e)},e.prototype.addEditVariable=function(e,t){if(void 0!==this._editMap.find(e))throw new Error("duplicate edit variable");if((t=d.ULKiwiStrength.clip(t))===d.ULKiwiStrength.required)throw new Error("bad required strength");var i=new s.ULKiwiExpression(e),n=new a.ULKiwiConstraint(i,a.ULKiwiOperator.Eq,void 0,t);this.addConstraint(n);var o={tag:this._cnMap.find(n).second,constraint:n,constant:0};this._editMap.insert(e,o)},e.prototype.removeEditVariable=function(e){var t=this._editMap.erase(e);if(void 0===t)throw new Error("unknown edit variable");this.removeConstraint(t.second.constraint)},e.prototype.hasEditVariable=function(e){return this._editMap.contains(e)},e.prototype.suggestValue=function(e,t){var i=this._editMap.find(e);if(void 0===i)throw new Error("unknown edit variable");var n=this._rowMap,o=i.second,a=t-o.constant;o.constant=t;var s=o.tag.marker,l=n.find(s);if(void 0!==l)return l.second.add(-a)<0&&this._infeasibleRows.push(s),void this._dualOptimize();var d=o.tag.other;if(void 0!==(l=n.find(d)))return l.second.add(a)<0&&this._infeasibleRows.push(d),void this._dualOptimize();for(var c=0,u=n.size();c<u;++c){var h=n.itemAt(c),p=h.second,f=p.coefficientFor(s);0!==f&&p.add(a*f)<0&&h.first.type()!==r.External&&this._infeasibleRows.push(h.first)}this._dualOptimize()},e.prototype.updateVariables=function(){for(var e=this._varMap,t=this._rowMap,i=0,n=e.size();i<n;++i){var o=e.itemAt(i),r=t.find(o.second);void 0!==r?o.first.setValue(r.second.constant()):o.first.setValue(0)}},e.prototype._getVarSymbol=function(e){var t=this;return this._varMap.setDefault(e,function(){return t._makeSymbol(r.External)}).second},e.prototype._createRow=function(e){for(var t=e.expression(),i=new f(t.constant()),n=t.terms(),o=0,s=n.size();o<s;++o){var l=n.itemAt(o);if(!u(l.second)){var c=this._getVarSymbol(l.first),h=this._rowMap.find(c);void 0!==h?i.insertRow(h.second,l.second):i.insertSymbol(c,l.second)}}var g=this._objective,v=e.strength(),_={marker:p,other:p};switch(e.op()){case a.ULKiwiOperator.Le:case a.ULKiwiOperator.Ge:var y=e.op()===a.ULKiwiOperator.Le?1:-1,m=this._makeSymbol(r.Slack);if(_.marker=m,i.insertSymbol(m,y),v<d.ULKiwiStrength.required){var S=this._makeSymbol(r.Error);_.other=S,i.insertSymbol(S,-y),g.insertSymbol(S,v)}break;case a.ULKiwiOperator.Eq:if(v<d.ULKiwiStrength.required){var b=this._makeSymbol(r.Error),C=this._makeSymbol(r.Error);_.marker=b,_.other=C,i.insertSymbol(b,-1),i.insertSymbol(C,1),g.insertSymbol(b,v),g.insertSymbol(C,v)}else{var I=this._makeSymbol(r.Dummy);_.marker=I,i.insertSymbol(I)}}return i.constant()<0&&i.reverseSign(),{row:i,tag:_}},e.prototype._chooseSubject=function(e,t){for(var i=e.cells(),n=0,o=i.size();n<o;++n){var a=i.itemAt(n);if(a.first.type()===r.External)return a.first}var s=t.marker.type();return(s===r.Slack||s===r.Error)&&e.coefficientFor(t.marker)<0?t.marker:((s=t.other.type())===r.Slack||s===r.Error)&&e.coefficientFor(t.other)<0?t.other:p},e.prototype._addWithArtificialVariable=function(e){var t=this._makeSymbol(r.Slack);this._rowMap.insert(t,e.copy()),this._artificial=e.copy(),this._optimize(this._artificial);var i=u(this._artificial.constant());this._artificial=null;var n=this._rowMap.erase(t);if(void 0!==n){var o=n.second;if(o.isConstant())return i;var a=this._anyPivotableSymbol(o);if(a.type()===r.Invalid)return!1;o.solveForEx(t,a),this._substitute(a,o),this._rowMap.insert(a,o)}for(var s=this._rowMap,l=0,d=s.size();l<d;++l)s.itemAt(l).second.removeSymbol(t);return this._objective.removeSymbol(t),i},e.prototype._substitute=function(e,t){for(var i=this._rowMap,n=0,o=i.size();n<o;++n){var a=i.itemAt(n);a.second.substitute(e,t),a.second.constant()<0&&a.first.type()!==r.External&&this._infeasibleRows.push(a.first)}this._objective.substitute(e,t),this._artificial&&this._artificial.substitute(e,t)},e.prototype._optimize=function(e){for(;;){var t=this._getEnteringSymbol(e);if(t.type()===r.Invalid)return;var i=this._getLeavingSymbol(t);if(i.type()===r.Invalid)throw new Error("the objective is unbounded");var n=this._rowMap.erase(i).second;n.solveForEx(i,t),this._substitute(t,n),this._rowMap.insert(t,n)}},e.prototype._dualOptimize=function(){for(var e=this._rowMap,t=this._infeasibleRows;0!==t.length;){var i=t.pop(),n=e.find(i);if(void 0!==n&&n.second.constant()<0){var o=this._getDualEnteringSymbol(n.second);if(o.type()===r.Invalid)throw new Error("dual optimize failed");var a=n.second;e.erase(i),a.solveForEx(i,o),this._substitute(o,a),e.insert(o,a)}}},e.prototype._getEnteringSymbol=function(e){for(var t=e.cells(),i=0,n=t.size();i<n;++i){var o=t.itemAt(i),a=o.first;if(o.second<0&&a.type()!==r.Dummy)return a}return p},e.prototype._getDualEnteringSymbol=function(e){for(var t=Number.MAX_VALUE,i=p,n=e.cells(),o=0,a=n.size();o<a;++o){var s=n.itemAt(o),l=s.first,d=s.second;if(d>0&&l.type()!==r.Dummy){var c=this._objective.coefficientFor(l)/d;c<t&&(t=c,i=l)}}return i},e.prototype._getLeavingSymbol=function(e){for(var t=Number.MAX_VALUE,i=p,n=this._rowMap,o=0,a=n.size();o<a;++o){var s=n.itemAt(o),l=s.first;if(l.type()!==r.External){var d=s.second,c=d.coefficientFor(e);if(c<0){var u=-d.constant()/c;u<t&&(t=u,i=l)}}}return i},e.prototype._getMarkerLeavingSymbol=function(e){for(var t=Number.MAX_VALUE,i=t,n=t,o=p,a=o,s=o,l=o,d=this._rowMap,c=0,u=d.size();c<u;++c){var h=d.itemAt(c),f=h.second,g=f.coefficientFor(e);if(0!==g){var v=h.first;if(v.type()===r.External)l=v;else if(g<0)(_=-f.constant()/g)<i&&(i=_,a=v);else{var _;(_=f.constant()/g)<n&&(n=_,s=v)}}}return a!==o?a:s!==o?s:l},e.prototype._removeConstraintEffects=function(e,t){t.marker.type()===r.Error&&this._removeMarkerEffects(t.marker,e.strength()),t.other.type()===r.Error&&this._removeMarkerEffects(t.other,e.strength())},e.prototype._removeMarkerEffects=function(e,t){var i=this._rowMap.find(e);void 0!==i?this._objective.insertRow(i.second,-t):this._objective.insertSymbol(e,-t)},e.prototype._anyPivotableSymbol=function(e){for(var t=e.cells(),i=0,n=t.size();i<n;++i){var o=t.itemAt(i),a=o.first.type();if(a===r.Slack||a===r.Error)return o.first}return p},e.prototype._makeSymbol=function(e){return new h(e,this._idTick++)},e}();function u(e){return e<0?-e<1e-8:e<1e-8}o.ULKiwiSolver=c,function(e){e[e.Invalid=0]="Invalid",e[e.External=1]="External",e[e.Slack=2]="Slack",e[e.Error=3]="Error",e[e.Dummy=4]="Dummy"}(r||(r={}));var h=function(){function e(e,t){this._id=t,this._type=e}return e.prototype.id=function(){return this._id},e.prototype.type=function(){return this._type},e}(),p=new h(r.Invalid,-1),f=function(){function e(e){void 0===e&&(e=0),this._cellMap=l.createMap(),this._constant=e}return e.prototype.cells=function(){return this._cellMap},e.prototype.constant=function(){return this._constant},e.prototype.isConstant=function(){return this._cellMap.empty()},e.prototype.allDummies=function(){for(var e=this._cellMap,t=0,i=e.size();t<i;++t)if(e.itemAt(t).first.type()!==r.Dummy)return!1;return!0},e.prototype.copy=function(){var t=new e(this._constant);return t._cellMap=this._cellMap.copy(),t},e.prototype.add=function(e){return this._constant+=e},e.prototype.insertSymbol=function(e,t){void 0===t&&(t=1),u(this._cellMap.setDefault(e,function(){return 0}).second+=t)&&this._cellMap.erase(e)},e.prototype.insertRow=function(e,t){void 0===t&&(t=1),this._constant+=e._constant*t;for(var i=e._cellMap,n=0,o=i.size();n<o;++n){var r=i.itemAt(n);this.insertSymbol(r.first,r.second*t)}},e.prototype.removeSymbol=function(e){this._cellMap.erase(e)},e.prototype.reverseSign=function(){this._constant=-this._constant;for(var e=this._cellMap,t=0,i=e.size();t<i;++t){var n=e.itemAt(t);n.second=-n.second}},e.prototype.solveFor=function(e){var t=this._cellMap,i=-1/t.erase(e).second;this._constant*=i;for(var n=0,o=t.size();n<o;++n)t.itemAt(n).second*=i},e.prototype.solveForEx=function(e,t){this.insertSymbol(e,-1),this.solveFor(t)},e.prototype.coefficientFor=function(e){var t=this._cellMap.find(e);return void 0!==t?t.second:0},e.prototype.substitute=function(e,t){var i=this._cellMap.erase(e);void 0!==i&&this.insertRow(t,i.second)},e}();cc._RF.pop()},{}],ULKiwiStrength:[function(e,t,i){"use strict";cc._RF.push(t,"395b3Ems4JES5Eb22+SHLRW","ULKiwiStrength");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.ULKiwiStrength=void 0;var o=function(){function e(){}return e.clip=function(t){return Math.max(0,Math.min(e.required,t))},e.required=1e3,e.strong=750,e.medium=250,e.weak=0,e}();n.ULKiwiStrength=o,cc._RF.pop()},{}],ULKiwiVariable:[function(e,t,i){"use strict";cc._RF.push(t,"54daafP1yBLBIbCmX3+y6jY","ULKiwiVariable");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULKiwiVariable=void 0;var r=n("ULKiwiExpression"),a=function(){function e(e){void 0===e&&(e=""),this._value=0,this._context=null,this._id=s++,this._name=e}return e.prototype.id=function(){return this._id},e.prototype.name=function(){return this._name},e.prototype.setName=function(e){this._name=e},e.prototype.context=function(){return this._context},e.prototype.setContext=function(e){this._context=e},e.prototype.value=function(){return this._value},e.prototype.setValue=function(e){this._value=e},e.prototype.plus=function(e){return new r.ULKiwiExpression(this,e)},e.prototype.minus=function(e){return new r.ULKiwiExpression(this,"number"==typeof e?-e:[-1,e])},e.prototype.multiply=function(e){return new r.ULKiwiExpression([e,this])},e.prototype.divide=function(e){return new r.ULKiwiExpression([1/e,this])},e.prototype.toJSON=function(){return{name:this._name,value:this._value}},e.prototype.toString=function(){return"["+this._name+":"+this._value+"]"},e}();o.ULKiwiVariable=a;var s=0;cc._RF.pop()},{}],ULKiwi:[function(e,t,i){"use strict";cc._RF.push(t,"a4fe1VS2HdJhZXDUvhFRMFw","ULKiwi");var n=e,o=i,r=Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]},a=function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(o,"__esModule",{value:!0}),a(n("ULKiwiConstraint"),o),a(n("ULKiwiExpression"),o),a(n("ULKiwiSolver"),o),a(n("ULKiwiStrength"),o),a(n("ULKiwiVariable"),o),cc._RF.pop()},{}],ULLabel:[function(e,t,i){"use strict";cc._RF.push(t,"b6857EWK8BLDqYBurrqUMpY","ULLabel");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULColor"),l=o("ULFont"),d=o("ULRect"),c=o("ULView"),u=o("ULViewEnum"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._textColor=s.default.Black,t._font=l.default.system(17),t._lineHeigt=20,t._numberOfLine=1,t._text="",t._textAlignment=u.ULTextAligment.Left,t._titleEdgeInsets=new d.ULEdgeInsets(0,0,0,0),t._lineBreakMode=u.ULLineBreakMode.CharWrapping,t}return a(t,e),Object.defineProperty(t.prototype,"textColor",{get:function(){return this._textColor},set:function(e){this._textColor.isEqual(e)||(this._textColor=e,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this._font},set:function(e){this._font.isEqual(e)||(this._font=e,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeigt",{get:function(){return Math.max(this.font.fontSize+4,this._lineHeigt)},set:function(e){this._lineHeigt!=e&&(this._lineHeigt=e,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numberOfLine",{get:function(){return this._numberOfLine},set:function(e){this._numberOfLine!=Math.floor(e)&&(this._numberOfLine=Math.floor(e),this.setNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text!=e&&(this._text=e,this.adapteLayoutWillChange=!0,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textAlignment",{get:function(){return this._textAlignment},set:function(e){this._textAlignment!=e&&(this._textAlignment=e,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleEdgeInsets",{get:function(){return this._titleEdgeInsets},set:function(e){this._titleEdgeInsets.isEqual(e)||(this._titleEdgeInsets=e,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineBreakMode",{get:function(){return this._lineBreakMode},set:function(e){this._lineBreakMode!=e&&(this._lineBreakMode=e,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),t.prototype.getAutoLayoutSize=function(e){var t=this.getAutoLayoutAdapteWidth(),i=Math.min(e,t),n=this.getAutoLayoutAdapteHeight(i);return new d.ULSize({width:i,height:n})},t.prototype.getAutoLayoutAdapteWidth=function(){for(var e=this.text.split("\n"),t=0,i=0==this.numberOfLine?e.length:Math.min(e.length,this.numberOfLine);i>0;){i--;var n=e.shift(),o=this.font.measureText(n);t=Math.max(t,o)}return t+this.titleEdgeInsets.left+this.titleEdgeInsets.right},t.prototype.getAutoLayoutAdapteHeight=function(e){var t=e-this.titleEdgeInsets.left-this.titleEdgeInsets.right,i=0==this.numberOfLine?50:this.numberOfLine,n=this.font.judgeTextLine(this.lineBreakMode,this.text,t,i);return(0==this.numberOfLine?n.length:Math.min(n.length,this.numberOfLine))*this.lineHeigt+this.titleEdgeInsets.top+this.titleEdgeInsets.bottom},t.prototype.drawRect=function(t,i){e.prototype.drawRect.call(this,t,i);var n={x:i.x+this.titleEdgeInsets.left,y:i.y+this.titleEdgeInsets.top,width:i.width-this.titleEdgeInsets.left-this.titleEdgeInsets.right,height:i.height-this.titleEdgeInsets.top-this.titleEdgeInsets.bottom};this.drawText(t,new d.default(n))},t.prototype.getDrawPoint=function(e){switch(this.textAlignment){case u.ULTextAligment.Left:return new d.ULPoint({x:e.x,y:e.midY});case u.ULTextAligment.Center:return new d.ULPoint({x:e.midX,y:e.midY});case u.ULTextAligment.Right:return new d.ULPoint({x:e.maxX,y:e.midY})}},t.prototype.drawText=function(e,t){e.font=this.font,e.textAlign=this.textAlignment,e.fillStyle=this.textColor,e.textBaseline="middle";var i=this.lineHeigt,n=Math.ceil(t.height/i),o=this.numberOfLine<=0?n:Math.min(this.numberOfLine,n),r=[];switch(this.lineBreakMode){case u.ULLineBreakMode.CharWrapping:r=(l=this.font.judgeTextLine(u.ULLineBreakMode.CharWrapping,this.text,t.width,o+1)).splice(0,Math.min(l.length,o));break;case u.ULLineBreakMode.WordWrapping:r=(l=this.font.judgeTextLine(u.ULLineBreakMode.WordWrapping,this.text,t.width,o+1)).splice(0,Math.min(l.length,o));break;case u.ULLineBreakMode.Clip:if(r=(l=this.font.judgeTextLine(u.ULLineBreakMode.WordWrapping,this.text,t.width,o+1)).splice(0,Math.min(l.length,o)),l.length>0){var a=r[o-1]+l[0];console.log(a),l=this.font.judgeTextLine(u.ULLineBreakMode.CharWrapping,a,t.width,2),console.log(l),r[o-1]=l[0]}break;case u.ULLineBreakMode.TruncateHead:if(r=(l=this.font.judgeTextLine(u.ULLineBreakMode.WordWrapping,this.text,t.width,o+1)).splice(0,Math.min(l.length,o)),l.length>0){var s=e.measureText("...").width;a=(a=r[o-1]+l[0]).split("").reverse().join(""),a=(l=this.font.judgeTextLine(u.ULLineBreakMode.CharWrapping,a,t.width-s,2))[0].split("").reverse().join(""),r[o-1]="..."+a}break;case u.ULLineBreakMode.TruncateMiddle:r=(l=this.font.judgeTextLine(u.ULLineBreakMode.WordWrapping,this.text,t.width,o+1)).splice(0,Math.min(l.length,o)),l.length>0&&(s=e.measureText("...").width,a=r[o-1]+l[0],l=this.font.judgeTextLine(u.ULLineBreakMode.CharWrapping,a,(t.width-s)/2,2),r[o-1]=l[0],a=l[1].split("").reverse().join(""),a=(l=this.font.judgeTextLine(u.ULLineBreakMode.CharWrapping,a,(t.width-s)/2,2))[0].split("").reverse().join(""),r[o-1]=r[o-1]+"..."+a);break;case u.ULLineBreakMode.TruncateTail:var l;r=(l=this.font.judgeTextLine(u.ULLineBreakMode.WordWrapping,this.text,t.width,o+1)).splice(0,Math.min(l.length,o)),l.length>0&&(s=e.measureText("...").width,a=r[o-1]+l[0],l=this.font.judgeTextLine(u.ULLineBreakMode.CharWrapping,a,t.width-s,2),r[o-1]=l[0]+"...")}for(var c=0;c<r.length;c++){var h={x:t.x,y:t.midY+(c-r.length/2)*i,width:t.width,height:i},p=this.getDrawPoint(new d.default(h));e.fillText(r[c],p.x,p.y,h.width)}},t}(c.default);r.default=h,cc._RF.pop()},{}],ULLayoutBase:[function(e,t,i){"use strict";cc._RF.push(t,"72634/oJRRDrIk7QXOOBVnC","ULLayoutBase");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULKitIndexedMap"),l=o("ULRect"),d=o("ULKiwiConstraint"),c=o("ULConstraintMaker"),u=o("ULLayout"),h=o("ULLayoutRect"),p=o("ULLayoutSolver"),f=o("ULRectBase"),g=o("ULViewAttribute"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._horizontalHuggingPriority=10,t._verticalHuggingPriority=10,t._horizontalCompressionPriority=750,t._verticalCompressionPriority=750,t.extendSuperViewSolver=!0,t._solver=null,t.viewConstraints=new s.ULKitBaseArray({onAdd:function(){},onRemove:function(){}}),t._normalMap=new s.default({onAdd:function(e){t.solver.addConstraint(e.second)},onRemove:function(e){t.setNeedsLayout(),t.solver.removeConstraint(e.second)}}),t._customMap=new s.ULKitBaseArray({onAdd:function(e){t.solver.addConstraint(e)},onRemove:function(e){t.solver.removeConstraint(e)}}),t._adapterMap=new s.ULKitBaseArray({onAdd:function(e){t.solver.addConstraint(e)},onRemove:function(e){t.solver.removeConstraint(e)}}),t._customLayoutWillChange=!0,t._adapteLayoutWillChange=!0,t}return a(t,e),Object.defineProperty(t.prototype,"horizontalHuggingPriority",{get:function(){return this._horizontalHuggingPriority},set:function(e){this._horizontalHuggingPriority!=e&&(this._horizontalHuggingPriority=e,this.adapteLayoutWillChange=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticalHuggingPriority",{get:function(){return this._verticalHuggingPriority},set:function(e){this._verticalHuggingPriority!=e&&(this._verticalHuggingPriority=e,this.adapteLayoutWillChange=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"horizontalCompressionPriority",{get:function(){return this._horizontalCompressionPriority},set:function(e){this._horizontalCompressionPriority!=e&&(this._horizontalCompressionPriority=e,this.adapteLayoutWillChange=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticalCompressionPriority",{get:function(){return this._verticalCompressionPriority},set:function(e){this._verticalCompressionPriority!=e&&(this._verticalCompressionPriority=e,this.adapteLayoutWillChange=!0)},enumerable:!1,configurable:!0}),t.prototype.setNeedsLayout=function(){this.solver.needCalculation=!0},t.prototype.supLayoutBaseWillChange=function(){this.supLayoutBase&&(this.solverWillChange(),this.subConstraintWillChange())},t.prototype.supLayoutBaseDidChange=function(){this.extendSuperViewSolver&&(this._solver||this.solverDidChange(),this.supLayoutBase&&this._solver&&(this.solver.addOtherSolverItem(this._solver),this._solver.destroy(),this._solver=null))},t.prototype.subConstraintWillChange=function(){if(this.extendSuperViewSolver){var e=this.supLayoutBase;if(e){for(var t=0;t<this._normalMap.size();t++)e._normalMap.itemAt(t).first.checkEffective();e.subConstraintWillChange()}}},t.prototype.solverWillChange=function(){if(this.extendSuperViewSolver){for(var e=0;e<this._normalMap.size();e++){var t=this._normalMap.itemAt(e);this.solver.removeConstraint(t.second)}for(e=0;e<this._customMap.size();e++)t=this._customMap.itemAt(e),this.solver.removeConstraint(t);for(e=0;e<this._adapterMap.size();e++)t=this._adapterMap.itemAt(e),this.solver.removeConstraint(t);for(var i=0,n=this.subLayoutBases;i<n.length;i++)n[i].solverWillChange()}},t.prototype.solverDidChange=function(){if(this.extendSuperViewSolver){for(var e=0;e<this._normalMap.size();e++){var t=this._normalMap.itemAt(e);this.solver.addConstraint(t.second)}for(e=0;e<this._customMap.size();e++)t=this._customMap.itemAt(e),this.solver.addConstraint(t);for(e=0;e<this._adapterMap.size();e++)t=this._adapterMap.itemAt(e),this.solver.addConstraint(t);for(var i=0,n=this.subLayoutBases;i<n.length;i++)n[i].solverDidChange()}},t.prototype.layoutIfNeeded=function(){if(this.solver.needCalculation){var e=(new Date).getTime();this.solver.prepare();var t=(new Date).getTime()-e;t>5&&console.log("layoutIfNeeded time:",t)}},t.prototype.prepareForSolver=function(){this.layoutRect.cleanSolver(),this.updateCustomConstraints();for(var e=0,t=this.subLayoutBases;e<t.length;e++){var i=t[e];i.extendSuperViewSolver&&i.prepareForSolver()}},t.prototype.afterSolverForAdapterWidth=function(){if(this.layoutRect.isSolver&&this._adapteLayoutWillChange)for(var e=0,t=this.getAutoLayoutAdapteWidthConstraints();e<t.length;e++){var i=t[e];this._adapterMap.add(i)}for(var n=0,o=this.subLayoutBases;n<o.length;n++){var r=o[n];r.extendSuperViewSolver&&r.afterSolverForAdapterWidth()}},t.prototype.afterSolverForAdapterHeight=function(){if(this.layoutRect.isSolver&&this._adapteLayoutWillChange){for(var e=0,t=this.getAutoLayoutAdapteHeightConstraints();e<t.length;e++){var i=t[e];this._adapterMap.add(i)}this._adapteLayoutWillChange=!1}for(var n=0,o=this.subLayoutBases;n<o.length;n++){var r=o[n];r.extendSuperViewSolver&&r.afterSolverForAdapterHeight()}},t.prototype.layoutForFrame=function(t){if(this.layoutRect.isSolver){var i=this.layoutRect.rect;this.supLayoutBase?e.prototype.setFrame.call(this,new l.default({x:i.x-t.x,y:i.y-t.y,width:i.width,height:i.height})):e.prototype.setFrame.call(this,i)}for(var n=0,o=this.subLayoutBases;n<o.length;n++){var r=o[n],a=this.frame,s=new l.ULPoint({x:a.x+t.x,y:a.y+t.y});r.layoutForFrame(s)}},Object.defineProperty(t.prototype,"layoutRect",{get:function(){return this._layoutRect?this._layoutRect:(this._layoutRect=this.extendSuperViewSolver?new h.default:new h.default({x:0,y:0,width:void 0,height:void 0}),this._layoutRect)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"installViewConstraints",{get:function(){return this.viewConstraints},enumerable:!1,configurable:!0}),t.prototype.getCommonSuper=function(e){if(!e)return this.creatLayoutDelegate();var i=e.getLayoutBase?e.getLayoutBase():void 0;if(i instanceof t){var n=this.getCommonLayoutBase(i);return n?n.creatLayoutDelegate():void 0}},t.prototype.installViewConstraint=function(e,t){this._normalMap.setDefault(e,function(){return t})},t.prototype.removeViewConstraint=function(e){this._normalMap.erase(e)},t.prototype.getCommonLayoutBase=function(e){if(!e)return this;for(var t=function(e){for(var t=e,i=[];t&&(i.unshift(t),t.extendSuperViewSolver);)t=t.supLayoutBase;return i},i=t(this),n=t(e),o=null;i.length>0&&n.length>0;){var r=i.shift();if(r!=n.shift())break;o=r}return o},t.prototype.creatLayoutDelegate=function(){var e=this;return{getLayoutBase:function(){return e},getLayoutRect:function(){return e.layoutRect},getInstallViewConstraints:function(){return e.installViewConstraints},getCommonSuper:this.getCommonSuper.bind(this),installViewConstraint:this.installViewConstraint.bind(this),removeViewConstraint:this.removeViewConstraint.bind(this)}},Object.defineProperty(t.prototype,"solver",{get:function(){return this.supLayoutBase&&this.extendSuperViewSolver?this.supLayoutBase.solver:(this._solver||(this._solver=new p.default({prepareToCalculation:this.prepareToCalculation.bind(this)})),this._solver)},enumerable:!1,configurable:!0}),t.prototype.prepareToCalculation=function(){this.prepareForSolver(),this.solver.calculation(),this.afterSolverForAdapterWidth(),this.solver.calculation(),this.afterSolverForAdapterHeight(),this.solver.calculation(),this.layoutForFrame(new l.ULPoint({x:0,y:0}))},t.prototype.updateCustomConstraints=function(){if(this._customLayoutWillChange){this._customLayoutWillChange=!1;for(var e=0,t=this.getCustomConstraints();e<t.length;e++){var i=t[e];this._customMap.add(i)}}},Object.defineProperty(t.prototype,"customLayoutWillChange",{get:function(){return this._customLayoutWillChange},set:function(e){!this._customLayoutWillChange&&e&&(this._customLayoutWillChange=!0,this._customMap.clear())},enumerable:!1,configurable:!0}),t.prototype.getCustomConstraints=function(){return this.extendSuperViewSolver?[]:[new d.ULKiwiConstraint(this.layoutRect.getVariableOrConstraintItem(u.ULLayoutAttribute.Width),d.ULKiwiOperator.Eq,this.frame.width),new d.ULKiwiConstraint(this.layoutRect.getVariableOrConstraintItem(u.ULLayoutAttribute.Height),d.ULKiwiOperator.Eq,this.frame.height)]},Object.defineProperty(t.prototype,"adapteLayoutWillChange",{get:function(){return this._adapteLayoutWillChange},set:function(e){!this._adapteLayoutWillChange&&e&&(this._adapteLayoutWillChange=!0,this._adapterMap.clear())},enumerable:!1,configurable:!0}),t.prototype.getAutoLayoutAdapteWidthConstraints=function(){var e=this.getAutoLayoutAdapteWidth();return[new d.ULKiwiConstraint(this.layoutRect.getVariableOrConstraintItem(u.ULLayoutAttribute.Width),d.ULKiwiOperator.Ge,e,this.horizontalCompressionPriority),new d.ULKiwiConstraint(this.layoutRect.getVariableOrConstraintItem(u.ULLayoutAttribute.Width),d.ULKiwiOperator.Le,e,this.verticalHuggingPriority)]},t.prototype.getAutoLayoutAdapteHeightConstraints=function(){var e=this.getAutoLayoutAdapteHeight(this.layoutRect.rect.width);return[new d.ULKiwiConstraint(this.layoutRect.getVariableOrConstraintItem(u.ULLayoutAttribute.Height),d.ULKiwiOperator.Ge,e,this.verticalCompressionPriority),new d.ULKiwiConstraint(this.layoutRect.getVariableOrConstraintItem(u.ULLayoutAttribute.Height),d.ULKiwiOperator.Le,e,this.horizontalHuggingPriority)]},t.prototype.getAutoLayoutAdapteWidth=function(){return 0},t.prototype.getAutoLayoutAdapteHeight=function(){return 0},t.prototype.ul_makeConstraints=function(e){var t=new c.default(this.creatLayoutDelegate());e(t),t.install()},t.prototype.ul_updateConstraints=function(e){var t=new c.default(this.creatLayoutDelegate(),!0,!1);e(t),t.install()},t.prototype.ul_remakeConstraints=function(e){var t=new c.default(this.creatLayoutDelegate(),!1,!0);e(t),t.install()},Object.defineProperty(t.prototype,"layout_left",{get:function(){return new g.default(this.creatLayoutDelegate(),u.ULLayoutAttribute.Left)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout_right",{get:function(){return new g.default(this.creatLayoutDelegate(),u.ULLayoutAttribute.Right)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout_top",{get:function(){return new g.default(this.creatLayoutDelegate(),u.ULLayoutAttribute.Top)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout_bottom",{get:function(){return new g.default(this.creatLayoutDelegate(),u.ULLayoutAttribute.Bottom)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout_centerX",{get:function(){return new g.default(this.creatLayoutDelegate(),u.ULLayoutAttribute.CenterX)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout_centerY",{get:function(){return new g.default(this.creatLayoutDelegate(),u.ULLayoutAttribute.CenterY)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout_width",{get:function(){return new g.default(this.creatLayoutDelegate(),u.ULLayoutAttribute.Width)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout_height",{get:function(){return new g.default(this.creatLayoutDelegate(),u.ULLayoutAttribute.Height)},enumerable:!1,configurable:!0}),t}(f.default);r.default=v,cc._RF.pop()},{}],ULLayoutConstraint:[function(e,t,i){"use strict";cc._RF.push(t,"d06dd8kUQpAxoHdmnXdiPUa","ULLayoutConstraint");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULLayoutConstraint=void 0;var r=n("ULKiwiConstraint"),a=n("ULKiwiExpression"),s=n("ULLayout"),l=function(){function e(){this.layoutPriority=1e3,this.layoutMultiplier=1,this.layoutConstant=0}return Object.defineProperty(e.prototype,"getOperator",{get:function(){switch(this.layoutRelation){case s.ULLayoutRelation.equalTo:return r.ULKiwiOperator.Eq;case s.ULLayoutRelation.greaterThanOrEaualTo:return r.ULKiwiOperator.Ge;case s.ULLayoutRelation.lessThanOrEaualTo:return r.ULKiwiOperator.Le}},enumerable:!1,configurable:!0}),e.prototype.check=function(){var e=this.firstLayoutAttribute.delegate,t=this.secondLayoutAttribute?this.secondLayoutAttribute.delegate:void 0;return e.getCommonSuper(t)==this.commonDelegae},e.prototype.isEqual=function(e){return this.firstLayoutAttribute.isEqual(e.firstLayoutAttribute)&&(!this.secondLayoutAttribute&&!e.secondLayoutAttribute||this.secondLayoutAttribute.isEqual(e.secondLayoutAttribute))},e.prototype.install=function(e){var t=this.firstLayoutAttribute.delegate,i=this.secondLayoutAttribute?this.secondLayoutAttribute.delegate:void 0;if(this.commonDelegae=t.getCommonSuper(i),!this.commonDelegae)throw new Error("install\uff1agetCommonSuper\uff1anull");if(i){var n=t.getLayoutRect().getVariableOrConstraintItem(this.firstLayoutAttribute.layoutAttribute),o=i.getLayoutRect().getVariableOrConstraintItem(this.secondLayoutAttribute.layoutAttribute),s=new a.ULKiwiExpression([this.layoutMultiplier,o],this.layoutConstant),l=new r.ULKiwiConstraint(n,this.getOperator,s,this.layoutPriority);this.commonDelegae.installViewConstraint(e,l)}else n=t.getLayoutRect().getVariableOrConstraintItem(this.firstLayoutAttribute.layoutAttribute),l=new r.ULKiwiConstraint(n,this.getOperator,this.layoutConstant,this.layoutPriority),this.commonDelegae.installViewConstraint(e,l)},e.prototype.uninstall=function(e){this.commonDelegae.removeViewConstraint(e)},e}();o.ULLayoutConstraint=l,cc._RF.pop()},{}],ULLayoutManager:[function(e,t,i){"use strict";cc._RF.push(t,"bc3b7azjNxEgaSNxlZod90w","ULLayoutManager");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULKiwiSolver"),a=function(){function e(){this.constraintList=[]}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.addConstraints=function(e){this.constraintList.push(e)},e.prototype.solveConstraint=function(){for(var e=new r.ULKiwiSolver,t=0,i=this.constraintList;t<i.length;t++){var n=i[t];e.addConstraint(n)}e.updateVariables()},e.prototype.clear=function(){this.constraintList=[]},e.addConstraints=function(t){e.instance.addConstraints(t)},e}();o.default=a,cc._RF.pop()},{}],ULLayoutRect:[function(e,t,i){"use strict";cc._RF.push(t,"5da13f6nrVGUK6Gsni4NqlW","ULLayoutRect");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULLayoutStyle=void 0;var s=o("ULKiwiExpression"),l=o("ULKiwiVariable"),d=o("ULRect"),c=o("ULLayout"),u=function(e){function t(t,i){void 0===t&&(t="");var n=e.call(this,t)||this;return n.valueDidUpdate=i,n}return a(t,e),t.prototype.setValue=function(t){e.prototype.setValue.call(this,t),this.valueDidUpdate&&this.valueDidUpdate()},t}(l.ULKiwiVariable);r.ULLayoutStyle=function(){};var h=function(){function e(e){void 0===e&&(e=void 0),this._key="",this._isSolver=!1;var t=e||{x:void 0,y:void 0,width:void 0,height:void 0};this.x=isNaN(t.x)?new u("x"+this.key,this.valueDidUpdate.bind(this)):t.x,this.y=isNaN(t.y)?new u("y"+this.key,this.valueDidUpdate.bind(this)):t.y,this.width=isNaN(t.width)?new u("width"+this.key,this.valueDidUpdate.bind(this)):t.width,this.height=isNaN(t.height)?new u("height"+this.key,this.valueDidUpdate.bind(this)):t.height}return Object.defineProperty(e.prototype,"key",{get:function(){return this._key||(this._key=""+e.key_num++),this._key},enumerable:!1,configurable:!0}),e.prototype.getVariableOrConstraintItem=function(e){switch(e){case c.ULLayoutAttribute.Left:return new s.ULKiwiExpression(this.x);case c.ULLayoutAttribute.Right:return new s.ULKiwiExpression(this.x,this.width);case c.ULLayoutAttribute.Top:return new s.ULKiwiExpression(this.y);case c.ULLayoutAttribute.Bottom:return new s.ULKiwiExpression(this.y,this.height);case c.ULLayoutAttribute.CenterX:return this.width instanceof u?new s.ULKiwiExpression(this.x,[.5,this.width]):new s.ULKiwiExpression(this.x,.5*this.width);case c.ULLayoutAttribute.CenterY:return this.height instanceof u?new s.ULKiwiExpression(this.y,[.5,this.height]):new s.ULKiwiExpression(this.y,.5*this.height);case c.ULLayoutAttribute.Width:return new s.ULKiwiExpression(this.width);case c.ULLayoutAttribute.Height:return new s.ULKiwiExpression(this.height)}},Object.defineProperty(e.prototype,"rect",{get:function(){return new d.default({x:this.x instanceof u?Math.ceil(this.x.value()):this.x,y:this.y instanceof u?Math.ceil(this.y.value()):this.y,width:this.width instanceof u?Math.ceil(this.width.value()):this.width,height:this.height instanceof u?Math.ceil(this.height.value()):this.height})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSolver",{get:function(){return this._isSolver},enumerable:!1,configurable:!0}),e.prototype.cleanSolver=function(){this._isSolver=!1},e.prototype.valueDidUpdate=function(){this._isSolver=!0},e.key_num=1,e}();r.default=h,cc._RF.pop()},{}],ULLayoutSolver:[function(e,t,i){"use strict";cc._RF.push(t,"e7f76/vygBCvap5zDhr90eb","ULLayoutSolver");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULKiwiSolver"),a=function(){function e(e){this._slover=new r.ULKiwiSolver,this._installConstraint=[],this._willAddConstraint=[],this._willRemoveConstraint=[],this._needCalculation=!1,this._delegate=e}return Object.defineProperty(e.prototype,"needCalculation",{get:function(){return this._needCalculation||this._willAddConstraint.length+this._willRemoveConstraint.length>0},set:function(e){!this._needCalculation&&e&&(this._needCalculation=e)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._slover=null,this._installConstraint=null,this._willAddConstraint=null,this._willRemoveConstraint=null},e.prototype.addOtherSolverItem=function(e){var t=e._installConstraint.filter(function(t){return-1==e._willRemoveConstraint.indexOf(t)}).concat(e._willAddConstraint);this._willAddConstraint=this._willAddConstraint.concat(t),this._needCalculation=this._needCalculation||e._needCalculation},e.prototype.addConstraint=function(e){var t=this._willRemoveConstraint.indexOf(e);t>=0&&this._willRemoveConstraint.splice(t,1),this._slover.hasConstraint(e)||(t=this._willAddConstraint.indexOf(e))<0&&this._willAddConstraint.push(e)},e.prototype.removeConstraint=function(e){var t=this._willAddConstraint.indexOf(e);t>=0&&this._willAddConstraint.splice(t,1),this._slover.hasConstraint(e)&&(t=this._willRemoveConstraint.indexOf(e))<0&&this._willRemoveConstraint.push(e)},e.prototype.prepare=function(){this._needCalculation=!1,this._delegate.prepareToCalculation()},e.prototype.calculation=function(){for(;this._willRemoveConstraint.length>0;){var e=this._willRemoveConstraint.pop();this._slover.safeRemoveConstraint(e);var t=this._installConstraint.indexOf(e);t>=0&&this._installConstraint.splice(t,1)}for(;this._willAddConstraint.length>0;)e=this._willAddConstraint.pop(),this._slover.safeAddConstraint(e),this._installConstraint.push(e);this._slover.updateVariables()},e}();o.default=a,cc._RF.pop()},{}],ULLayout:[function(e,t,i){"use strict";cc._RF.push(t,"4666fl9NF5I6KXg4bkOH7ol","ULLayout");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.ULLayoutRelation=n.ULLayoutAttribute=void 0,function(e){e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Top=3]="Top",e[e.Bottom=4]="Bottom",e[e.Width=5]="Width",e[e.Height=6]="Height",e[e.CenterX=7]="CenterX",e[e.CenterY=8]="CenterY"}(n.ULLayoutAttribute||(n.ULLayoutAttribute={})),function(e){e[e.lessThanOrEaualTo=-1]="lessThanOrEaualTo",e[e.equalTo=0]="equalTo",e[e.greaterThanOrEaualTo=1]="greaterThanOrEaualTo"}(n.ULLayoutRelation||(n.ULLayoutRelation={})),cc._RF.pop()},{}],ULLoadImageWeb:[function(e,t,i){"use strict";cc._RF.push(t,"04d18S1SixDG7dkjSi45v3b","ULLoadImageWeb");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.loadImageFromBundle=function(e,t){this.loadImageFromUrl(e,t)},e.prototype.loadImageFromUrl=function(e,t){if(t){var i=new Image;i.src=e,i.crossOrigin="anonymous",i.onload=function(){var e=document.createElement("canvas"),n=e.getContext("2d");e.width=i.width,e.height=i.height,n.drawImage(i,0,0,i.width,i.height),t(null,e)},i.onerror=function(e){t(e.toString(),null)}}},e}();n.default=o,cc._RF.pop()},{}],ULLoadToolCreator2x:[function(e,t,i){"use strict";cc._RF.push(t,"5c6dd5GEFVNiJlKzQ0QLKtb","ULLoadToolCreator2x");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=window.cc,r=function(){function e(){}return e.prototype.loadImageFromBundle=function(e,t){if(t){var i=e.substring(0,e.lastIndexOf("."));o.loader.loadRes(i,o.Texture2D,function(e,i){if(e)t(JSON.stringify(e),null);else{var n=new o.SpriteFrame;n.setTexture(i),n.width=i.width,n.height=i.height,t(null,n)}})}},e.prototype.loadImageFromUrl=function(e,t){t&&o.loader.load({url:e,type:"png"},function(e,i){if(e)t(JSON.stringify(e),null);else{var n=new o.SpriteFrame;n.setTexture(i),n.width=i.width,n.height=i.height,t(null,n)}})},e}();n.default=r,cc._RF.pop()},{}],ULLoadToolCreator3x:[function(e,t,i){"use strict";cc._RF.push(t,"2e4adArBaRA6JBfOux7pAGW","ULLoadToolCreator3x");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=window.cc,r=function(){function e(){}return e.prototype.loadImageFromBundle=function(e,t){if(t){var i=e.substring(0,e.lastIndexOf("."));o.resources.load(i,o.imageAsset,function(e,i){if(e)t(JSON.stringify(e),null);else{var n=new o.SpriteFrame,r=new o.Texture2D;r.image=i,n.texture=r,t(null,n)}})}},e.prototype.loadImageFromUrl=function(e,t){t&&o.assetManager.loadRemote(e,{ext:".png"},function(e,i){if(e)t(JSON.stringify(e),null);else{var n=new o.SpriteFrame,r=new o.Texture2D;r.image=i,n.texture=r,t(null,n)}})},e}();n.default=r,cc._RF.pop()},{}],ULLoadToolLaya:[function(e,t,i){"use strict";cc._RF.push(t,"ef99cXyiGVBooEDF6D0N6r0","ULLoadToolLaya");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=window.Laya,r=function(){function e(){}return e.prototype.loadImageFromBundle=function(e,t){t&&this.loadImageFromUrl(e,t)},e.prototype.loadImageFromUrl=function(e,t){t&&o.loader.load(e,o.Handler.create(this,function(e){t(null,e)}))},e}();n.default=r,cc._RF.pop()},{}],ULLogExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"0139fIUkUVDXLBnpHlI/C+A","ULLogExecutor");var n=e,o=i,r=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var a,s=n("ULKitPop"),l=n("ULLog"),d=n("ULTools"),c=n("ULWebSocket"),u=n("ULConfigExecutor"),h=n("ULGoldfingerExecutor"),p=n("ULStorageExecutor");(function(e){e[e.None=0]="None",e[e.Err=1]="Err",e[e.Warn=2]="Warn",e[e.Log=3]="Log",e[e.Info=4]="Info"})(a||(a={}));var f=window.console.log,g=window.console.warn,v=window.console.error,_=function(){function e(){this._gameLogSwitch=!0,this._sdkLogSwitch=!0,this._logGrade=a.Warn,this._debugMode=!1,this.debugServerUrl="",this.ws=null,this.hadInit=!1,this.initExecutor(),this.addListener()}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameLogSwitch",{get:function(){return this._gameLogSwitch},set:function(e){this._gameLogSwitch!=e&&(this._gameLogSwitch=e,this.hadInit&&this.saveRecord())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sdkLogSwitch",{get:function(){return this._sdkLogSwitch},set:function(e){this._sdkLogSwitch!=e&&(this._sdkLogSwitch=e,l.default.systemConsole=e?{info:this.info.bind(this),log:this.log.bind(this),warn:this.warn.bind(this),error:this.error.bind(this)}:null,this.hadInit&&this.saveRecord())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logGrade",{get:function(){return this._logGrade},set:function(e){this._logGrade!=e&&(this._logGrade=e,this.hadInit&&this.saveRecord())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugMode",{get:function(){return this._debugMode},set:function(e){var t=this;this._debugMode!=e&&(this._debugMode=e,s.default.showToast({title:"\u65e5\u5fd7\u8c03\u8bd5\u5f00\u5173:"+(e?"\u5df2\u5f00\u542f":"\u5df2\u5173\u95ed")}),e?(this.ws=new c.default("ws://"+this.debugServerUrl+":3002/websocket/test"),this.ws.onopen=function(){s.default.showToast({title:"\u65e5\u5fd7\u8c03\u8bd5\u94fe\u63a5\u6210\u529f"})},this.ws.onclose=function(){s.default.showToast({title:"\u65e5\u5fd7\u8c03\u8bd5\u88ab\u5173\u95ed"}),t.ws=null},this.ws.onerror=function(e){s.default.showToast({title:"\u65e5\u5fd7\u8c03\u8bd5\u53d1\u9001\u9519\u8bef\n"+e}),t.ws=null}):(this.ws&&this.ws.close(0,"\u624b\u52a8\u5173\u95ed"),this.ws=null),this.hadInit&&this.saveRecord())},enumerable:!1,configurable:!0}),e.prototype.initExecutor=function(){try{window.console.info=this.gameInfo.bind(this),window.console.log=this.gameLog.bind(this),window.console.warn=this.gameWarn.bind(this),window.console.error=this.gameError.bind(this),window.cc&&window.cc.Node&&(window.cc.log=this.gameLog.bind(this),window.cc.warn=this.gameWarn.bind(this),window.cc.error=this.gameError.bind(this))}catch(e){l.default.error("ULLogExecutor.initExecutor:",e.stack)}this.loadRecord(),this.hadInit=!0},e.prototype.addListener=function(){h.default.registerItem(this)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logGrade>=a.Info&&(f.apply(void 0,e),this.sendDebugMsg.apply(this,r([1],e)))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logGrade>=a.Log&&(f.apply(void 0,e),this.sendDebugMsg.apply(this,r([1],e)))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logGrade>=a.Warn&&(g.apply(void 0,e),this.sendDebugMsg.apply(this,r([2],e)))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logGrade>=a.Err&&(v.apply(void 0,e),this.sendDebugMsg.apply(this,r([3],e)))},e.prototype.gameInfo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.gameLogSwitch&&this.info.apply(this,e)},e.prototype.gameLog=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.gameLogSwitch&&this.log.apply(this,e)},e.prototype.gameWarn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.gameLogSwitch&&this.warn.apply(this,e)},e.prototype.gameError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.gameLogSwitch&&this.error.apply(this,e)},e.prototype.sendDebugMsg=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.debugMode&&this.ws&&this.ws.send({type:e,data:t})},e.prototype.loadRecord=function(){var e=d.default.safeJsonParse(p.default.getStorage("ulsdk_logExecutor_Setting"),{gameLogSwitch:!0,sdkLogSwitch:!0,logGrade:a.Warn,debugMode:!1,debugServerUrl:u.default.getStringValue("s_sdk_log_debug_address")});this.gameLogSwitch=e.gameLogSwitch,this.sdkLogSwitch=!e.sdkLogSwitch,this.sdkLogSwitch=e.sdkLogSwitch,this.logGrade=e.logGrade,this.debugServerUrl=e.debugServerUrl,this.debugMode=e.debugMode},e.prototype.saveRecord=function(){p.default.setStorage("ulsdk_logExecutor_Setting",JSON.stringify({gameLogSwitch:this.gameLogSwitch,sdkLogSwitch:this.sdkLogSwitch,logGrade:this.logGrade,debugMode:this.debugMode,debugServerUrl:this.debugServerUrl}))},e.prototype.startWork=function(){},e.prototype.goldfingerView=function(e){var t=this;return new h.ULGoldfingerStackView("\u65e5\u5fd7\u6a21\u5757",e,function(i){var n=[{name:"Game\u65e5\u5fd7\u8f93\u51fa:",value:t.gameLogSwitch,handle:function(e){t.gameLogSwitch=e,s.default.showToast({title:"Game\u65e5\u5fd7\u8f93\u51fa:"+(e?"\u5df2\u5f00\u542f":"\u5df2\u5173\u95ed")})}},{name:"SDK\u65e5\u5fd7\u8f93\u51fa:",value:t.sdkLogSwitch,handle:function(e){t.sdkLogSwitch=e,s.default.showToast({title:"SDK\u65e5\u5fd7\u8f93\u51fa:"+(e?"\u5df2\u5f00\u542f":"\u5df2\u5173\u95ed")})}}],o=[{name:"\u65e5\u5fd7\u8f93\u51fa\u7b49\u7ea7:",value:["0:\u4e0d\u8f93\u51fa\u4efb\u4f55\u65e5\u5fd7\u4fe1\u606f","1:\u8f93\u51faerror\u4fe1\u606f","2:\u8f93\u51faerror+warn\u4fe1\u606f","3:\u8f93\u51faerror+warn+log\u4fe1\u606f","4:\u8f93\u51faerror+warn+log+info\u4fe1\u606f"],selectedNum:t.logGrade,width:240,handle:function(e){t.logGrade=e}}],r=[{name:"\u65e5\u5fd7\u8c03\u8bd5\u5730\u5740:",value:t.debugServerUrl,width:e-140,handle:function(e){t.debugServerUrl=e}}],a=[{name:"\u65e5\u5fd7\u8c03\u8bd5\u5f00\u5173:",value:t.debugMode,handle:function(e){t.debugMode=e}}];i.addStackForSwitchs(n),i.addStackMenuViews(o),i.addStackTextFiled(r),i.addStackForSwitchs(a)})},e.startWork=function(){e.instance.startWork()},e}();o.default=_,cc._RF.pop()},{}],ULLog:[function(e,t,i){"use strict";cc._RF.push(t,"fa6e32nMbJFzbPaBIjkzDQd","ULLog");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.info=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.systemConsole&&(t=e.systemConsole).info.apply(t,i)},e.log=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.systemConsole&&(t=e.systemConsole).log.apply(t,i)},e.warn=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.systemConsole&&(t=e.systemConsole).warn.apply(t,i)},e.error=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.systemConsole&&(t=e.systemConsole).error.apply(t,i)},e.systemConsole=window.console,e}();n.default=o,cc._RF.pop()},{}],ULMenuView:[function(e,t,i){"use strict";cc._RF.push(t,"ee1e3yZkV1NY56L7d1x53Zw","ULMenuView");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULMenuViewType=void 0;var s,l=o("ULKitPop"),d=o("ULColor"),c=o("ULEventEnum"),u=o("ULRect"),h=o("ULScreen"),p=o("ULButton"),f=o("ULTableView"),g=o("ULTableViewStoredTextCell"),v=o("ULWindow"),_=o("ULSearchViewController"),y=o("ULControl");(function(e){e[e.Normal=0]="Normal",e[e.KitPop=1]="KitPop"})(s=r.ULMenuViewType||(r.ULMenuViewType={}));var m=function(e){function t(t){void 0===t&&(t=u.default.Zero);var i=e.call(this,t)||this;return i.title="",i.menuViewType=s.Normal,i._tableView=null,i._searchVC=null,i._window=null,i._dataSource=[],i.showMenuNum=5,i._selectedNum=0,i.addListener(),i}return a(t,e),Object.defineProperty(t.prototype,"tableView",{get:function(){if(!this._tableView){var e=new f.default;e.backgroundColor=d.default.Clear,e.delegate=this,e.dataSource=this,e.registerCell(g.default,"ULTableViewStoredTextCell"),this._tableView=e}return this._tableView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchVC",{get:function(){var e=this;return this._searchVC||(this._searchVC=new _.default(!0,!0),this._searchVC.title=this.title,this._searchVC.view.backgroundColor=d.default.Clear,this._searchVC.onSelectDidChange(function(t){e.selectedNum=t})),this._searchVC},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){if(!this._window){var e=this;this._window=new(function(t){function i(){var e=t.call(this)||this;return e.windowLevel=l.ULWindowPriority.DialogWindow,e.backgroundColor=d.default.RGBA(0,0,0,.7),e.makeKeyAndVisible(),e}return a(i,t),i.prototype.vcStackDidChange=function(){t.prototype.vcStackDidChange.call(this),0==this.viewControllers.length&&e.closeMenuContentView()},i}(v.default))}return this._window},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{get:function(){return[].concat(this._dataSource)},set:function(e){this._dataSource=[].concat(e),this._selectedNum=-1,this.selectedNum=0,this._tableView&&this._tableView.reloadData()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedNum",{get:function(){return this._selectedNum},set:function(e){this._selectedNum!=e&&(this._selectedNum=e,this.setTitleForState(this._dataSource[e]||"undefined",c.ULControlState.Normal),this._tableView&&this._tableView.reloadData(),this._searchVC&&(this._searchVC.selecteNum=e),this.postValueChange(e))},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){var e=this;this.registerControlEvent(c.ULControlEvents.TouchUpInside,function(){e.hidden=!0,e.menuViewType==s.Normal?e.showMenuContentView():(e.searchVC.sendMessageList(e.dataSource),e.searchVC.selecteNum=e.selectedNum,e.window.pushViewController(e.searchVC,v.ULPopViewControllerStyle.Popup))})},t.prototype.closeMenuContentView=function(){this.window.removeFromSuperView(),this._window=null,this._tableView=null,this._searchVC=null,this.hidden=!1},t.prototype.showMenuContentView=function(){var e=this,t=new y.default(h.default.bounds);t.backgroundColor=d.default.Clear,this.window.addSubView(t),t.registerControlEvent(c.ULControlEvents.TouchUpInside,function(){e.closeMenuContentView()});var i=this.disPlayRect,n=Math.min(Math.max(0,this.showMenuNum),this.dataSource.length),o=(i.height+10)*n,r=(i.height+10)*this.selectedNum-(o-i.height)/2;r=Math.max(0,r),r=Math.min(r,(i.height+10)*this.dataSource.length-o),i.y-=(i.height+10)*this.selectedNum-r,i.height=o,this.tableView.frame=i,this.window.addSubView(this.tableView),this.tableView.reloadData(),this.tableView.contentOffset=new u.ULPoint({x:0,y:r})},t.prototype.numberOfSectionsInTableView=function(){return this.dataSource.length},t.prototype.numberOfRowsInSection=function(){return 1},t.prototype.cellForRowAtIndexPath=function(e,t){var i=e.dequeueReusableCell("ULTableViewStoredTextCell");return i.titleLabel.text=this._dataSource[t.section],i.titleLabel.textAlignment=this.textAlignment,i.titleLabel.font=this.font,this.selectedNum==t.section?i.backgroundColor=d.default.RGB(140,140,140):i.backgroundColor=d.default.White,i},t.prototype.heightForCell=function(){return this.bounds.height},t.prototype.heightForFooter=function(){return 10},t.prototype.didSelectRowAtIndexPath=function(e,t){this.selectedNum=t.section},t}(p.default);r.default=m,cc._RF.pop()},{}],ULModalViewController:[function(e,t,i){"use strict";cc._RF.push(t,"a534fSr7hhG0b8afXoAuEHr","ULModalViewController");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULModalItem=void 0;var s=o("ULColor"),l=o("ULFont"),d=o("ULRect"),c=o("ULEventEnum"),u=o("ULButton"),h=o("ULLabel"),p=o("ULStatckView"),f=o("ULViewEnum"),g=o("ULViewController");r.ULModalItem=function(){};var v=function(e){function t(t){var i=e.call(this)||this;return i._stackView=null,i._titleLabel=null,i._contentLabel=null,i._buttonStackView=null,i.obj=t,i}return a(t,e),Object.defineProperty(t.prototype,"stackView",{get:function(){if(!this._stackView){var e=new p.default;e.spacing=5,e.axis=p.ULStatckViewAxis.Vertical,e.edgeInsets=new d.ULEdgeInsets(10,10,10,10),e.backgroundColor=s.default.RGBA(0,255,255,1),e.alignment=p.ULStatckViewAlignment.Fill,e.dstribution=p.ULStatckViewDistribution.Fill,this._stackView=e}return this._stackView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleLabel",{get:function(){if(!this._titleLabel){var e=new h.default;e.font=l.default.boldSystem(24),e.textAlignment=f.ULTextAligment.Center,e.text=this.obj.title,e.textColor=s.default.Black,this._titleLabel=e}return this._titleLabel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentLabel",{get:function(){if(!this._contentLabel){var e=new h.default;e.font=l.default.system(20),e.lineHeigt=30,e.textAlignment=f.ULTextAligment.Center,e.text=this.obj.content,e.textColor=s.default.Black,e.titleEdgeInsets=new d.ULEdgeInsets(10,10,10,10),e.numberOfLine=0,this._contentLabel=e}return this._contentLabel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonStackView",{get:function(){if(!this._buttonStackView){var e=new p.default;e.spacing=5,e.axis=p.ULStatckViewAxis.Horizontal,e.backgroundColor=s.default.Clear,e.dstribution=p.ULStatckViewDistribution.FillEqual,this._buttonStackView=e}return this._buttonStackView},enumerable:!1,configurable:!0}),t.prototype.viewDidLoad=function(){this.initWithUserInterface(),this.autoLayoutSetting()},t.prototype.initWithUserInterface=function(){var e=this.obj;this.view.backgroundColor=s.default.RGBA(0,0,0,.5),this.view.addSubView(this.stackView),this.stackView.addSubView(this.titleLabel),this.stackView.addSubView(this.contentLabel),this.stackView.addSubView(this.buttonStackView);for(var t=function(t){var n=e.actions[t],o=new u.default;o.font=l.default.system(20),o.titleEdgeInsets=new d.ULEdgeInsets(10,10,10,10),o.setBackgroundColorForState(s.default.White,c.ULControlState.Normal),o.setTitleForState(n.name,c.ULControlState.Normal),o.registerControlEvent(c.ULControlEvents.TouchUpInside,function(){n.handle&&n.handle(n.name)}),i.buttonStackView.addSubView(o)},i=this,n=0;n<e.actions.length;n++)t(n)},t.prototype.autoLayoutSetting=function(){var e=this;this.stackView.ul_makeConstraints(function(t){t.centerX.and.centerY.equalTo(e.view),t.width.lessThanOrEaualTo(e.view).multipliedBy(.8),t.height.lessThanOrEaualTo(e.view).multipliedBy(.8)}),this.titleLabel.ul_makeConstraints(function(e){e.width.greaterThanOrEaualTo(200),e.height.equalTo(50)}),this.contentLabel.ul_makeConstraints(function(e){e.height.greaterThanOrEaualTo(50)}),this.buttonStackView.ul_makeConstraints(function(e){e.height.equalTo(50)})},t}(g.default);r.default=v,cc._RF.pop()},{}],ULModuleBase:[function(e,t,i){"use strict";cc._RF.push(t,"9bf4dKwU5RBgbexqp0oA+uo","ULModuleBase");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this._configSuccess=!1,this._configErrMsg="\u8fd8\u672a\u521d\u59cb\u5316",this._hadConfig=!1,this._initActionList=[],this._isStartWork=!1}return Object.defineProperty(e.prototype,"configSuccess",{get:function(){return this._configSuccess},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"configErrMsg",{get:function(){return this._configErrMsg},enumerable:!1,configurable:!0}),e.prototype.setConfigResult=function(e,t){if(!this._hadConfig)if(this._hadConfig=!0,this._configSuccess=e,this._configErrMsg=t,this._configSuccess)for(this.onInitModule&&this.onInitModule();this._initActionList.length>0;)(i=this._initActionList.shift()).onLoad&&i.onLoad();else for(;this._initActionList.length>0;){var i;(i=this._initActionList.shift()).onError&&i.onError(t)}},e.prototype.defaultInitModule=function(){this.setConfigResult(!0,"\u521d\u59cb\u6210\u529f")},e.prototype.startWork=function(){var e=this;this._isStartWork||(this._isStartWork=!0,this.initModule?this.initModule({onLoad:function(){e.setConfigResult(!0,"\u521d\u59cb\u6210\u529f")},onError:function(t){e.setConfigResult(!1,t)}}):this.defaultInitModule())},e.prototype.onInitWithAction=function(e){this._hadConfig?this._configSuccess?e&&e.onLoad&&e.onLoad():e&&e.onError&&e.onError(this._configErrMsg):e&&this._initActionList.push(e)},e}();n.default=o,cc._RF.pop()},{}],ULModuleHeadLine:[function(e,t,i){"use strict";cc._RF.push(t,"0da16CI2e5BFLd0oUuw5WIP","ULModuleHeadLine");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULModuleBase"),l=o("ULRecorderExecutor"),d=o("ULShortcutExecutor"),c=o("ULStorageExecutor"),u=o("ULSubscribeExecutor"),h=o("ULChainAdvExecutor"),p=o("ULAdvHeadLine"),f=o("ULGameExecutor"),g=o("ULPayExecutor"),v=o("ULTools"),_=o("ULClipboardExecutor"),y=o("ULConfigExecutor"),m=o("ULLog"),S=o("ULBaseExecutor"),b=o("ULSystemExecutor"),C=o("ULShareExecutor"),I=o("ULUserExecutor"),F=o("ULSecurityCheckExecutor"),R=o("ULHttp"),w=o("ULVibrateExecutor"),L=o("ULOfficialAccountExecutor"),T=o("ULChannelRankListExecutor"),x=o("ULBuyQuantityExecutor"),P=o("ULCopExecutor"),A=window.tt,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=S.ULBaseExecutionPriorityType.Channel,t.moduleName="headline",t.openId="",t.tokenObj=null,t._recorder=null,t._gameRecorder=null,t}return a(t,e),Object.defineProperty(t.prototype,"isiOS",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNovelapp",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appId",{get:function(){return y.default.getStringValue("s_sdk_headline_appid")},enumerable:!1,configurable:!0}),t.prototype.onInitModule=function(){var e=this.isiOS,t=this.isNovelapp;c.default.registerItem(this),f.default.registerLifeItem(this),_.default.registerItem(this),b.default.registerItem(this),I.default.registerItem(this),!e&&d.default.registerItem(this),u.default.registerItem(this),F.default.registerItem(this),w.default.registerItem(this),C.default.registerItem(this),L.default.registerItem(this),h.default.registerItem(p.default),T.default.registerItem(this),!t&&l.default.registerItem(this),!e&&!t&&g.default.registerItem(this),x.default.registerItem(this)},t.prototype.getLoginCode=function(e){return void 0===e&&(e=!0),new Promise(function(t,i){A.login({force:e,success:function(e){e.isLogin?t(e.code):i(JSON.stringify(e))},fail:function(e){i(JSON.stringify(e))}})})},t.prototype.getOpenId=function(){if(this.openId)return Promise.resolve(this.openId);var e=this;return this.getLoginCode(!0).then(function(t){return I.default.requestOpenId(I.ULRequestOpenIdChannelType.HeadLine,t).then(function(t){return e.openId=t.openId,Promise.resolve(t.openId)})})},t.prototype.getToken=function(e){if(void 0===e&&(e=!0),this.tokenObj&&v.default.secondsTime()-this.tokenObj.getTime<this.tokenObj.validSec-60)return Promise.resolve(this.tokenObj.token);var t=this;return R.default.getPromise({url:b.default.commonServerUrl+"/sdkserver/ttgettoken",params:{appId:t.appId}}).then(function(e){return 1==v.default.getNumberValue(e,"code",0)?(t.tokenObj={token:v.default.getStringValue(e,"token"),validSec:v.default.getNumberValue(e,"validSec"),getTime:v.default.secondsTime()},Promise.resolve(t.tokenObj.token)):Promise.reject(JSON.stringify(e))})},t.prototype.setStorage=function(){},t.prototype.getStorage=function(){},t.prototype.removeStorage=function(){},t.prototype.clearStorage=function(){},t.prototype.getStorageAsync=function(){},t.prototype.setStorageAsync=function(){},t.prototype.removeStorageAsync=function(){},t.prototype.clearStorageAsync=function(){},t.prototype.monitorGameShow=function(){},t.prototype.monitorGameHide=function(){},t.prototype.exitGame=function(){},t.prototype.getClipboardData=function(){},t.prototype.setClipboardData=function(){},t.prototype.getSystemInfoSync=function(){return{}},Object.defineProperty(t.prototype,"shareSetting",{get:function(){return y.default.getArrayValue("a_sdk_headline_share_list",[])},enumerable:!1,configurable:!0}),t.prototype.shareAppMessage=function(e){return window.tt?new Promise(function(t,i){A.shareAppMessage({title:e.title,imageUrl:e.imageUrl,templateId:e.templateId,success:function(){m.default.log("ULModuleHeadLine.shareAppMessage success"),t()},fail:function(e){m.default.log("ULModuleHeadLine.shareAppMessage fail err:",e),i(JSON.stringify(e))}})}):{}},t.prototype.monitorOnShareAppMessage=function(e,t,i){if(!window.tt)return{};A.onShareAppMessage(function(){var n=e();return{title:n.title,desc:n.desc?n.desc:n.title||"",path:"",imageUrl:n.imageUrl,templateId:n.templateId,success:function(){m.default.log("ULModuleHeadLine.onShareAppMessage success"),t()},fail:function(e){m.default.log("ULModuleHeadLine.onShareAppMessage fail err:",e),i(JSON.stringify(e))}}})},Object.defineProperty(t.prototype,"paySetting",{get:function(){return y.default.getObjectValue("o_sdk_headline_pay_code")},enumerable:!1,configurable:!0}),t.prototype.openPay=function(){},t.prototype.userLogin=function(){var e=this;return this.getOpenId().then(function(t){return e.getLoginCode().then(function(e){return Promise.resolve({openId:t,token:e})})})},t.prototype.getUserInfo=function(){return window.tt?this.getLoginCode().then(function(){return new Promise(function(e,t){A.getUserInfo({success:function(t){e(t.userInfo)},fail:function(e){t(JSON.stringify(e))}})})}):{}},t.prototype.checkShortCutState=function(){return window.tt?new Promise(function(e,t){A.checkShortcut({success:function(t){e(!!t.status.exis)},fail:function(e){t(JSON.stringify(e))}})}):{}},t.prototype.installShortcut=function(){return window.tt?new Promise(function(e,t){A.addShortcut({success:function(){e()},fail:function(e){t(JSON.stringify(e))}})}):{}},Object.defineProperty(t.prototype,"subscribeType",{get:function(){return u.ULSubscribeType.HeadLine},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subscribeSetting",{get:function(){return y.default.getObjectValue("o_sdk_headline_subscribe_setting")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subscribeRefreshRule",{get:function(){return y.default.getObjectValue("o_sdk_headline_subscribe_refresh_rule")},enumerable:!1,configurable:!0}),t.prototype.checkSubscribeState=function(e){if(!window.tt)return{};var t=[].concat(e);return new Promise(function(e,i){A.getSetting({withSubscriptions:!0,success:function(i){m.default.log("ULModuleHeadLine.checkSubscribeState success res:",i);var n=(i.subscriptionsSetting||{}).itemSettings||{};t=t.filter(function(e){var t=e in n?n[e]:"unknown";return-1==["accept","acceptWithAudio"].indexOf(t)}),e(0==t.length)},fail:function(e){m.default.log("ULModuleHeadLine.checkSubscribeState fail err:",e),i(JSON.stringify(e))}})})},t.prototype.addSubscribe=function(e){if(!window.tt)return{};var t=this;return new Promise(function(i,n){A.requestSubscribeMessage({tmplIds:e,success:function(o){m.default.log("ULModuleHeadLine.addSubscribe success res:",o);var r=[];e.forEach(function(e){var t=e in o?o[e]:"unknown";["accept","acceptWithAudio"].indexOf(t)>-1&&r.push(e)}),t.getOpenId().then(function(i){return u.default.reportSubscribe(t,t.appId,i,r).then(function(){var t=e.filter(function(e){return-1==r.indexOf(e)});return 0==t.length?Promise.resolve():Promise.reject("\u672a\u63a5\u53d7tmplIds\uff1a"+t.join(";"))})}).then(i,n)},fail:function(e){m.default.log("ULModuleHeadLine.addSubscribe fail err:",e),n(JSON.stringify(e))}})})},t.prototype.getMinDuration=function(e){return e==l.ULRecorderType.manual?3:15},Object.defineProperty(t.prototype,"maxDuration",{get:function(){return 300},enumerable:!1,configurable:!0}),t.prototype.getGameRecorderManager=function(){if(!window.tt)return{};if(this._gameRecorder)return this._gameRecorder;var e=this;return this._recorder=this._recorder||A.getGameRecorderManager(),this._gameRecorder={onStart:function(t){e._recorder.onStart(function(){t()})},onResume:function(t){e._recorder.onResume(function(){t()})},onPause:function(t){e._recorder.onPause(function(){t()})},onStop:function(t){e._recorder.onStop(function(e){t(e.videoPath,NaN)})},onError:function(t){e._recorder.onError(function(e){t(JSON.stringify(e))})},start:function(t,i){e._recorder.start({duration:i})},pause:function(){e._recorder.pause()},resume:function(){e._recorder.resume()},stop:function(){e._recorder.stop()}},this._gameRecorder},t.prototype.shareGameVideo=function(e){return window.tt?new Promise(function(t,i){var n=y.default.getArrayValue("a_sdk_headline_share_recorder_video_desc"),o=y.default.getStringValue("s_sdk_headline_share_video_tag"),r=y.default.getStringValue("s_sdk_headline_share_video_title"),a=n[v.default.random(n.length)-1];A.shareAppMessage({title:r,channel:"video",desc:a,extra:{videoTopics:a,videoPath:e,withVideoId:!0,videoTag:o},success:function(e){m.default.log("ULModuleHeadLine.shareGameVideo success res:",e),t()},fail:function(e){m.default.log("ULModuleHeadLine.shareGameVideo fail err:",e),i(JSON.stringify(e))}})}):{}},t.prototype.checkFollowOfficialAccountState=function(){return window.tt?new Promise(function(e,t){A.checkFollowAwemeState({success:function(i){m.default.log("ULModuleHeadLine.checkFollowOfficialAccountState success res:",i);var n=i.hasFollowed;null==n||null==n?t("\u672a\u5f00\u901a\u6b21\u529f\u80fd"):e(!!n)},fail:function(e){m.default.log("ULModuleHeadLine.checkFollowOfficialAccountState fail err:",e),t(JSON.stringify(e))}})}):{}},t.prototype.followOfficialAccount=function(){return window.tt?this.getLoginCode().then(function(){return new Promise(function(e,t){A.checkFollowAwemeState({success:function(i){m.default.log("ULModuleHeadLine.followOfficialAccount success res:",i),i.hasFollowed?e():t(JSON.stringify(i))},fail:function(e){m.default.log("ULModuleHeadLine.followOfficialAccount fail err:",e),t(JSON.stringify(e))}})})}):{}},t.prototype.vibrateShort=function(){if(!window.tt)return{};A.vibrateShort()},t.prototype.vibrateLong=function(){if(!window.tt)return{};A.vibrateLong()},t.prototype.securityCheckText=function(e){return this.getToken(!0).then(function(t){return R.default.postPromise({url:"https://developer.toutiao.com/api/v2/tags/text/antidirt",requestHeader:{"X-Token":t,"Content-Type":"application/json"},data:{tasks:[e]}})}).then(function(e){var t=v.default.getArrayValue(e,"data");if(0!=t.length)return Promise.reject(JSON.stringify(e));for(var i=0,n=t;i<n.length;i++)for(var o=n[i],r=0,a=v.default.getArrayValue(o,"predicts");r<a.length;r++)if(a[r].hit)return Promise.resolve(!1);return Promise.resolve(!0)})},t.prototype.securityCheckImage=function(e){var t=this;return this.getToken(!0).then(function(i){return R.default.postPromise({url:"https://developer.toutiao.com/api/apps/censor/image",requestHeader:{"Content-Type":"application/json"},data:{app_id:t.appId,access_token:i,image_data:e}})}).then(function(e){var t=v.default.getArrayValue(e,"data");if(0!=t.length)return Promise.reject(JSON.stringify(e));for(var i=0,n=t;i<n.length;i++)for(var o=n[i],r=0,a=v.default.getArrayValue(o,"predicts");r<a.length;r++)if(a[r].hit)return Promise.resolve(!1);return Promise.resolve(!0)})},t.prototype.setImRankData=function(e){return window.tt?new Promise(function(t,i){A.setImRankData({dataType:e.dataType,value:e.value,priority:e.priority,success:function(){t()},fail:function(e){i(JSON.stringify(e))}})}):{}},t.prototype.getImRankList=function(e){return window.tt?new Promise(function(t,i){A.getImRankList({relationType:e.relationType,dataType:e.dataType,rankType:e.rankType,suffix:e.suffix,rankTitle:e.rankTitle,success:function(){t()},fail:function(e){i(JSON.stringify(e))}})}):{}},t.prototype.monitorBuyQuantityValidUser=function(){if(!window.tt)return{};var e=A.getLaunchOptionsSync().query||{},t=e.clickid||"";return t?Promise.resolve({clickid:t,adid:e.adid||"",creativeid:e.creativeid||"",creativetype:e.creativetype||"",projectid:e.projectid||"",promotionid:e.promotionid||"",requestid:e.requestid||""}):Promise.reject("\u8be5\u7528\u6237\u4e0d\u662f\u4e70\u91cf\u7528\u6237")},t.prototype.reportBuyQuantity=function(e,t){var i=this;return this.getOpenId().then(function(n){return new Promise(function(o,r){R.default.postEncryption({url:b.default.commonServerUrl+"/iaaback/h5/oceantoutiaouploadv2",data:JSON.stringify({gameId:b.default.gameId,sdkUserId:I.default.uuid,copChannelId:b.default.channelId,copVersion:P.default.copVersion,platform:i.isiOS?"1":"0",openId:n,event_type:e.toString(),callback:t.clickid}),success:function(e){m.default.log("ULModuleHeadLine.reportBuyQuantity success:",e),o()},fail:function(e){m.default.log("ULModuleHeadLine.reportBuyQuantity fail:",e),r(JSON.stringify(e))}})})})},t.prototype.reportPayOrder=function(e,t){this.reportNetworkAddictionData("payMoney",t,e)},t.prototype.reportVideoAdvShow=function(e){this.reportNetworkAddictionData("advShowCount",1,e)},t.prototype.reportOnlineTime=function(e,t){this.reportNetworkAddictionData("playTime",t,e)},t.prototype.reportGameTag=function(e){this.reportNetworkAddictionData("gameTag",1,e)},t.prototype.reportNetworkAddictionData=function(e,t,i){var n=this;this.getOpenId().then(function(o){return new Promise(function(r,a){R.default.postEncryption({url:b.default.commonServerUrl+"/iaaback/h5/uploadaddictionaackeventv2",data:JSON.stringify({gameId:Number(b.default.gameId),copChannelId:b.default.channelId,openId:o,typeName:e,value:t,sdkUserId:I.default.uuid,copVersion:P.default.copVersion,platform:n.isiOS?"1":"0",callback:i.clickid,adId:i.adid||"",creativeId:i.creativeid||"",creativeType:i.creativetype||"",projectId:i.projectid||"",promotionId:i.promotionid||"",requestId:i.requestid||""}),success:function(e){m.default.log("ULModuleHeadLine.reportNetworkAddictionData success:",e),r()},fail:function(e){m.default.log("ULModuleHeadLine.reportNetworkAddictionData fail:",e),a(JSON.stringify(e))}})})})},t}(s.default);r.default=E,cc._RF.pop()},{}],ULModuleStatistics:[function(e,t,i){"use strict";cc._RF.push(t,"4d87dBn45lOJZ2svWKvqVG9","ULModuleStatistics");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULBaseExecutor"),l=o("ULConfigExecutor"),d=o("ULCopExecutor"),c=o("ULGameExecutor"),u=o("ULGoldfingerExecutor"),h=o("ULModuleBase"),p=o("ULStatisExecutor"),f=o("ULStorageExecutor"),g=o("ULSystemExecutor"),v=o("ULUserExecutor"),_=o("ULKitPop"),y=o("ULLog"),m=o("ULUrl"),S=o("ULStatisManager"),b=o("ULTipsExecutor"),C=function(){function e(){this.cache=[],this.maxNum=100}return e.prototype.push=function(e){this.cache.push(e),this.cache.length>this.maxNum&&this.cache.shift()},Object.defineProperty(e.prototype,"data",{get:function(){return[].concat(this.cache).reverse()},enumerable:!1,configurable:!0}),e}(),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=s.ULBaseExecutionPriorityType.Channel,t.moduleName="ulsdkStatis",t._levelStartCache=new C,t._levelCompleteCache=new C,t._coinChangeCache=new C,t._itemBuyCache=new C,t._buyGoodsActionCache=new C,t._advPointEventCache=new C,t._commonEventCache=new C,t._reportCopMsgCache=new C,t._reportAdvLogCache=new C,t}return a(t,e),Object.defineProperty(t.prototype,"isStart",{get:function(){return 1==l.default.getNumberValue("n_sdk_megadata_mode",1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDebug",{get:function(){return"1"==f.default.getStorage("ulsdk_mc_statis_debug_mode")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this.isDebug&&f.default.getStorage("ulsdk_mc_statis_debug_uuid")||v.default.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statisId",{get:function(){return this.isDebug?"1":g.default.gameId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"megadataUrl",{get:function(){return new m.default(l.default.getStringValue("s_sdk_megadata_server_url","https://megadatav7.ultralisk.cn")).origin+(this.isDebug?"/batchtestdatauploadv8":"/batchdatauploadv8")},enumerable:!1,configurable:!0}),t.prototype.onInitModule=function(){u.default.registerItem(this),this.isStart?(S.default.sdkVersion=l.default.getStringValue("s_sdk_version"),S.default.getChannelItem(function(e){return f.default.getStorage(e)}),S.default.setChannelItem(function(e,t){f.default.setStorage(e,t)}),S.default.initSDK(this.statisId,"appsecret",g.default.channelId,d.default.copVersion,this.uuid,this.megadataUrl),p.default.registerItem(this),c.default.registerListener(this),this.isDebug&&b.default.addTipsMsg("statis_debug","\u5f53\u524d\u662f\u6d4b\u8bd5\u4e0a\u62a5\u6a21\u5f0f\nuuid:"+this.uuid)):y.default.warn("ULModuleStatistics \u7edf\u8ba1\u914d\u7f6e\u5df2\u5173\u95ed")},t.prototype.onGameShow=function(){S.default.gameShow()},t.prototype.onGameHide=function(){S.default.gameHide()},t.prototype.levelStart=function(e,t,i){var n=S.default.levelStart(e,t,i);this._levelStartCache.push(JSON.stringify({levelName:e,reason:t,isGuide:i,checkResult:n},null,2))},t.prototype.levelComplete=function(e,t,i,n,o){var r=S.default.levelComplete(e,t,i,n,o);this._levelCompleteCache.push(JSON.stringify({levelName:e,isComplete:t,reason:i,parameterList:n,isGuide:o,checkResult:r},null,2))},t.prototype.coinChange=function(e,t,i,n){var o=S.default.coinChange(e,t,i,n);this._coinChangeCache.push(JSON.stringify({coinName:e,changeNum:t,reason:i,isGuide:n,checkResult:o},null,2))},t.prototype.itemBuy=function(e,t,i,n){var o=S.default.itemBuy(e,t,i,n);this._itemBuyCache.push(JSON.stringify({itemName:e,buyNum:t,reason:i,isGuide:n,checkResult:o},null,2))},t.prototype.buyGoodsAction=function(e,t,i,n){var o=S.default.buyGoodsAction(e,t,i,n);this._buyGoodsActionCache.push(JSON.stringify({goodsName:e,reason:t,result:i,isGuide:n,checkResult:o},null,2))},t.prototype.advPointEvent=function(e,t,i){var n=S.default.advPointEvent(e,t,i);this._advPointEventCache.push(JSON.stringify({advId:e,state:t,isGuide:i,checkResult:n},null,2))},t.prototype.commonEvent=function(e,t,i){var n=S.default.commonEvent(e,t,i);this._commonEventCache.push(JSON.stringify({commonId:e,parameterList:t,isGuide:i,checkResult:n},null,2))},t.prototype.reportCopMsg=function(e,t){var i=S.default.reportCopMsg(e,t);this._reportCopMsgCache.push(JSON.stringify({success:e,msg:t,checkResult:i},null,2))},t.prototype.reportAdvLog=function(e,t){var i=S.default.reportAdvLog(e,t);this._reportAdvLogCache.push(JSON.stringify({type:e,adParms:t,checkResult:i},null,2))},t.prototype.goldfingerView=function(e){var t=this;return new u.ULGoldfingerStackView("\u96f7\u517d\u7edf\u8ba1\u6a21\u5757",e,function(i){for(var n=[{name:"\u7edf\u8ba1\u5f00\u5173:",value:t.isStart},{name:"\u7edf\u8ba1\u65e5\u5fd7\u5f00\u5173:",value:S.default.debug,handle:function(e){S.default.debug=e}}],o=t.uuid,r=[{name:"\u6d4b\u8bd5uuid:",width:e-100,value:o,handle:function(e){o=e}}],a=[{name:"\u6d4b\u8bd5\u5f00\u5173:",value:t.isDebug,handle:function(e){f.default.setStorage("ulsdk_mc_statis_debug_mode",e?"1":"0"),f.default.setStorage("ulsdk_mc_statis_debug_uuid",e?o:""),e?_.default.showToast({title:"\u96f7\u517d\u7edf\u8ba1\u6d4b\u8bd5\u6a21\u5757\u5df2\u5f00\u542f\uff0c\u4e0b\u6b21\u542f\u52a8\u751f\u6548\n \u6d4b\u8bd5 uuid:"+o}):_.default.showToast({title:"\u96f7\u517d\u7edf\u8ba1\u6d4b\u8bd5\u6a21\u5757\u5df2\u5173\u95ed\uff0c\u4e0b\u6b21\u542f\u52a8\u751f\u6548"})}}],s=[],l=function(e){s.push({name:e.name,handle:function(){_.default.showInformationFlow({title:e.name,content:e.value})}})},d=0,c=[{name:"levelStart \u7edf\u8ba1",value:t._levelStartCache.data},{name:"levelComplete \u7edf\u8ba1",value:t._levelCompleteCache.data},{name:"coinChange \u7edf\u8ba1",value:t._coinChangeCache.data},{name:"itemBuy \u7edf\u8ba1",value:t._itemBuyCache.data},{name:"buyGoodsAction \u7edf\u8ba1",value:t._buyGoodsActionCache.data},{name:"advPointEvent \u7edf\u8ba1",value:t._advPointEventCache.data},{name:"commonEvent \u7edf\u8ba1",value:t._commonEventCache.data},{name:"reportCopMsg \u7edf\u8ba1",value:t._reportCopMsgCache.data},{name:"reportAdvLog \u7edf\u8ba1",value:t._reportAdvLogCache.data}];d<c.length;d++)l(c[d]);i.addStackForSwitchs(n),i.addStackTextFiled(r),i.addStackForSwitchs(a),i.addStackButtons(s)})},t}(h.default);r.default=I,cc._RF.pop()},{}],ULMsgExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"58861H3SptPMrDBrLuYeaKy","ULMsgExecutor");var n=e,o=i,r=function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var a=n("ULTools"),s=n("ULSystemExecutor"),l=function(){function e(){this.language=s.ULSystemLanguage.zhcn,this.msgCache={},this.initExecutor()}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initExecutor=function(){this.registerMsg(s.ULSystemLanguage.zhcn,{warm_reminder:"\u6e29\u99a8\u63d0\u793a",sure:"\u786e\u5b9a",think_again:"\u518d\u60f3\u60f3",got_it:"\u77e5\u9053\u4e86"}),this.registerMsg(s.ULSystemLanguage.enus,{warm_reminder:"warm reminder",sure:"sure",think_again:"think again",got_it:"got it"})},e.prototype.registerMsg=function(e,t){e in this.msgCache||(this.msgCache[e]={});var i=this.msgCache[e];i=r(r({},i),t),this.msgCache[e]=i},e.prototype.getValue=function(e,t){void 0===t&&(t="");var i=this.msgCache[this.language]||{};return a.default.getStringValue(i,e,t)},e.switchLanguage=function(t){e.instance.language=t},e.registerMsg=function(t,i){e.instance.registerMsg(t,i)},e.getValue=function(t,i){return void 0===i&&(i=""),e.instance.getValue(t,i)},e}();o.default=l,cc._RF.pop()},{}],ULNativeControllerHtml5:[function(e,t){"use strict";cc._RF.push(t,"c8a28gqOHVNu6dhu7kRrKr/","ULNativeControllerHtml5"),cc._RF.pop()},{}],ULOfficialAccountExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"04e314jKb1BY7JXKe0Y7Bfm","ULOfficialAccountExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULKitPop"),l=o("ULColor"),d=o("ULFont"),c=o("ULRect"),u=o("ULEventEnum"),h=o("ULButton"),p=o("ULMenuView"),f=o("ULView"),g=o("ULLog"),v=o("ULBaseExecutor"),_=o("ULConfigExecutor"),y=o("ULGameExecutor"),m=o("ULGoldfingerExecutor"),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onFollowOfficialAccount=function(){this.executeAsync({type:v.ULBaseExecutionEnum.Concurrency,endType:v.ULBaseExecutionEndEnum.All,handle:function(e){e.onFollowOfficialAccount&&e.onFollowOfficialAccount()}}).catch(function(e){g.default.log("ULOfficialAccountListenerExecutor onFollowOfficialAccount err:",e.stack),y.default.reportErrMsg("ULOfficialAccountListenerExecutor onFollowOfficialAccount",e.stack)})},t}(v.default),b=function(e){function t(){var t=e.call(this)||this;return t._listenerExecutor=new S,t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){m.default.registerItem(this)},t.prototype.sdkSwitch=function(){return 1==_.default.getNumberValue("n_sdk_officialAccount_mode",1)},t.prototype.checkState=function(e){return void 0===e&&(e=void 0),t.instance.executeAsync({moduleName:e,type:v.ULBaseExecutionEnum.ChainFlashback,endType:v.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(e){return e.checkFollowOfficialAccountState()}})},t.prototype.follow=function(e){void 0===e&&(e=void 0);var t=this;return this.executeAsync({moduleName:e,type:v.ULBaseExecutionEnum.ChainFlashback,endType:v.ULBaseExecutionEndEnum.One,promiseHandle:function(e){return e.followOfficialAccount()}}).then(function(){return t._listenerExecutor.onFollowOfficialAccount(),Promise.resolve()})},t.prototype.goldfingerView=function(e){var i=this;return new m.ULGoldfingerStackView("\u5b98\u65b9\u8d26\u53f7\u6a21\u5757",e,function(n){var o=[{name:"\u5b98\u65b9\u8d26\u53f7\u5f00\u5173:",value:t.isSupport}],r=new f.default(c.default.Init(0,0,e,40));r.backgroundColor=l.default.Clear;var a=["\u9ed8\u8ba4"].concat(i.getAllRegisterModuleName()),g=new p.default(c.default.Init(0,0,160,40));g.dataSource=a,g.font=d.default.boldSystem(16);var v=new h.default(c.default.Init(0,0,160,40));v.center=new c.ULPoint({x:e/2,y:v.center.y}),v.setTitleForState("\u662f\u5426\u5173\u6ce8",u.ULControlState.Normal),v.font=d.default.boldSystem(20),n.addSubView(v),v.registerControlEvent(u.ULControlEvents.TouchUpInside,function(){i.checkState(0==g.selectedNum?void 0:a[g.selectedNum]).then(function(e){s.default.showToast({title:e?"\u5df2\u5173\u6ce8":"\u672a\u5173\u6ce8"})},function(e){s.default.showToast({title:"\u6267\u884c\u9519\u8bef\n errMsg:"+e})})});var _=new h.default(c.default.Init(e-160,0,160,40));_.setTitleForState("\u5173\u6ce8\u5b98\u65b9\u8d26\u53f7",u.ULControlState.Normal),_.font=d.default.boldSystem(20),_.registerControlEvent(u.ULControlEvents.TouchUpInside,function(){var e=s.default.showInformationFlow({title:"\u5173\u6ce8\u5b98\u65b9\u8d26\u53f7\u6d4b\u8bd5\u6d41\u7a0b"}),t=a[g.selectedNum];e.sendMessage("\u6a21\u5757:"+t+" "),i.follow(0==g.selectedNum?void 0:t).then(function(){e.sendMessage("\u5173\u6ce8\u6210\u529f")}).catch(function(t){e.sendMessage("\u5173\u6ce8\u5931\u8d25\n errMsg:"+t)})}),r.addSubView(g),r.addSubView(v),r.addSubView(_),n.addStackForSwitchs(o),n.addStackView(r)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.removeItem=function(e){t.instance.unRegister(e)},t.registerListener=function(e){t.instance._listenerExecutor.register(e)},t.removeListener=function(e){t.instance._listenerExecutor.unRegister(e)},t.checkState=function(){return t.instance.checkState()},t.follow=function(){return t.instance.follow()},t}(v.default);r.default=b,cc._RF.pop()},{}],ULPanelCreator2x:[function(e,t,i){"use strict";cc._RF.push(t,"103d0YYwV5NXJjGoIugT4+N","ULPanelCreator2x");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULRect"),l=o("ULLoadToolCreator2x"),d=o("ULDefaultPanelCtx"),c=window.cc||{},u=function(){function e(){var e=this;this._willShowPanel=null,this._loadToolManager=null,this._editBoxNode=null,this.editEvent=null,this._panelNode=null,this._panNodeClass=null,c.director.on(c.Director.EVENT_AFTER_SCENE_LAUNCH,function(){e._willShowPanel&&e.show(e._willShowPanel)})}return Object.defineProperty(e.prototype,"gameCanvasFrame",{get:function(){return new s.default({x:0,y:0,width:c.view.getVisibleSize().width,height:c.view.getVisibleSize().height})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadTool",{get:function(){return this._loadToolManager||(this._loadToolManager=new l.default),this._loadToolManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editBoxNode",{get:function(){if(!this._editBoxNode){var e=new c.Node;e.setAnchorPoint(0,1),e.width=0,e.height=0,e.x=0,e.y=0;var t=e.addComponent(c.EditBox);t.inputMode=c.EditBox.InputMode.SINGLE_LINE,t.maxLength=2048,this._editBoxNode=e}return this._editBoxNode},set:function(e){this._editBoxNode=e},enumerable:!1,configurable:!0}),e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.creatPanelCtx=function(){return new d.default},e.prototype.addTouchEvent=function(e){this.panelEvent=e,this.panelNode.onBindPanelEvent(e)},e.prototype.show=function(e){this.getCanvasNode?(this.panelNode.parent||(this.panelNode.parent=this.getCanvasNode),this.panelNode.refresh(e)):this._willShowPanel=e},e.prototype.hide=function(){this._panelNode&&(this._panelNode.destroy(),this._panelNode=null)},e.prototype.registerKeyboardEvent=function(e){var t=this;if(e!=this.editEvent){this.editEvent&&this.editEvent.onBlur(),this.editEvent=e,this._editBoxNode&&this.editBoxNode.destroy(),this._editBoxNode=null;var i=this.editEvent.frameToWindow,n=this.gameCanvasFrame;this.editBoxNode.parent=this.getCanvasNode,this.editBoxNode.x=i.midX-n.midX,this.editBoxNode.y=n.midY-i.midY;var o=this.editBoxNode.getComponent(c.EditBox);o.string=e.text;var r=this;setTimeout(function(){r._editBoxNode&&(o.focus?o.focus():o.setFocus())},100),this.editEvent.onFocus(),this.editBoxNode.on("text-changed",function(){t.editEvent&&t.editEvent.textDidChange(o.string)}),this.editBoxNode.on("editing-did-ended",function(){t.editEvent.onBlur(),t.editEvent=null,t.editBoxNode.destroy(),t.editBoxNode=null})}},Object.defineProperty(e.prototype,"panelNode",{get:function(){if(!this._panelNode||!this._panelNode.isValid){var e=new this.panNodeClass;e.setAnchorPoint(0,1),e.width=this.gameCanvasFrame.width,e.height=this.gameCanvasFrame.height,e.x=-this.gameCanvasFrame.width/2,e.y=this.gameCanvasFrame.height/2,e.onBindPanelEvent(this.panelEvent),this._panelNode=e}return this._panelNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getCanvasNode",{get:function(){var e=c.director.getScene();if(e)return e.getChildByName("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"panNodeClass",{get:function(){if(this._panNodeClass)return this._panNodeClass;var e=c.Node;return this._panNodeClass=function(e){function t(){var t=e.call(this)||this;return t._bgSprite=null,t.on(c.Node.EventType.TOUCH_START,t.onTouchStart,t),t.on(c.Node.EventType.TOUCH_MOVE,t.onTouchMove,t),t.on(c.Node.EventType.TOUCH_END,t.onTouchEnd,t),t.on(c.Node.EventType.TOUCH_CANCEL,t.onTouchCancel,t),t._touchListener.swallowTouches=!1,t}return a(t,e),t.prototype.onBindPanelEvent=function(e){this.panelEvent=e},t.prototype.onTouchStart=function(e){if(this.panelEvent){var t=e.getLocation(),i=this.height-t.y;this.panelEvent.onTouchStart(new s.ULPoint({x:t.x,y:i}))&&e.stopPropagation()}},t.prototype.onTouchMove=function(e){if(this.panelEvent){var t=e.getLocation(),i=this.height-t.y;this.panelEvent.onTouchMoved(new s.ULPoint({x:t.x,y:i}))&&e.stopPropagation()}},t.prototype.onTouchEnd=function(e){if(this.panelEvent){var t=e.getLocation(),i=this.height-t.y;this.panelEvent.onTouchEnd(new s.ULPoint({x:t.x,y:i}))&&e.stopPropagation()}},t.prototype.onTouchCancel=function(e){if(this.panelEvent){var t=e.getLocation(),i=this.height-t.y;this.panelEvent.onTouchCancelled(new s.ULPoint({x:t.x,y:i}))&&e.stopPropagation()}},Object.defineProperty(t.prototype,"bgSprite",{get:function(){if(!this._bgSprite){var e=new Uint8Array([255,255,255,255]),t=new c.Texture2D;t.initWithData(e,c.Texture2D.PixelFormat.RGBA8888,1,1);var i=new c.SpriteFrame;i.setTexture(t),i.packable=!1,this._bgSprite=i}return this._bgSprite},enumerable:!1,configurable:!0}),t.prototype.addFillerSprite=function(e,t,i){e.color=t,e.opacity=i;var n=e.addComponent(c.Sprite);n.sizeMode=c.Sprite.SizeMode.CUSTOM,n.type=c.Sprite.Type.SIMPLE,n.spriteFrame=this.bgSprite},t.prototype.getColorData=function(e){var t=e.color.conversion(e.alpha);return{color:c.color(t.r,t.g,t.b),alpha:Math.round(255*t.a)}},t.prototype.getImageRect=function(e){return new c.Rect(e.textureRect.x,e.textureRect.y,e.textureRect.width,e.textureRect.height)},t.prototype.getSpriteFrame=function(e){if(e.imageData.conversionImageData)return e.imageData.conversionImageData;if(e.imageData.originalImageData instanceof c.SpriteFrame)e.imageData.conversionImageData=e.imageData.originalImageData;else{var t=new c.Texture2D,i=new c.SpriteFrame(t);t.initWithElement(e.imageData.originalImageData),t.handleLoadedTexture(),e.imageData.conversionImageData=i}return e.imageData.conversionImageData},t.prototype.refresh=function(e){var t=e.items;this.removeAllChildren();for(var i=0;i<t.length;i++){var n=t[i],o=n.displayRect,r=new c.Node;if(r.setAnchorPoint(0,1),r.width=o.width,r.height=o.height,r.x=o.x,r.y=-o.y,this.addChild(r),n instanceof d.ULViewShaderItem){var a=this.getColorData(n);this.addFillerSprite(r,a.color,a.alpha)}else{var s=this.getSpriteFrame(n);(s=s.clone()).setRect(this.getImageRect(n)),r.addComponent(c.Sprite).spriteFrame=s,r.setContentSize(new c.Size(n.displayRect.width,n.displayRect.height))}r.width=o.width,r.height=o.height}},t}(e),this._panNodeClass},enumerable:!1,configurable:!0}),e}();r.default=u,cc._RF.pop()},{}],ULPanelCreator3x:[function(e,t,i){"use strict";cc._RF.push(t,"05bdeXWICBEQYn54pPqxhD9","ULPanelCreator3x");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULRect"),l=o("ULLoadToolCreator3x"),d=o("ULDefaultPanelCtx"),c=window.cc||{},u=c.Node||{},h=function(){function e(){var e=this;this._willShowPanel=null,this._loadToolManager=null,this.editEvent=null,this._panelNode=null,this._editBoxNode=null,this._panNodeClass=null,u=c.Node,c.Canvas=c.CanvasComponent,c.EditBox=c.EditBoxComponent,c.Label=c.LabelComponent,c.LabelOutline=c.LabelOutlineComponent,c.Layout=c.LayoutComponent,c.Mask=c.MaskComponent,c.ScrollView=c.ScrollViewComponent,c.Sprite=c.SpriteComponent,c.UITransform=c.UITransformComponent,c.Widget=c.WidgetComponent,c.director.on(c.Director.EVENT_AFTER_SCENE_LAUNCH,function(){e._willShowPanel&&e.show(e._willShowPanel)})}return Object.defineProperty(e.prototype,"gameCanvasFrame",{get:function(){return new s.default({x:0,y:0,width:c.view.getVisibleSize().width,height:c.view.getVisibleSize().height})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadTool",{get:function(){return this._loadToolManager||(this._loadToolManager=new l.default),this._loadToolManager},enumerable:!1,configurable:!0}),e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.creatPanelCtx=function(){return new d.default},e.prototype.addTouchEvent=function(e){this.panelNode.onBindPanelEvent(e)},e.prototype.show=function(e){var t=this.getCanvasNode;t?(this.panelNode.parent||(this.panelNode.parent=t),this._willShowPanel=null,this.panelNode.refresh(e)):this._willShowPanel=e},e.prototype.hide=function(){this._willShowPanel=null,this._panelNode&&(this._panelNode.destroy(),this._panelNode=null)},e.prototype.registerKeyboardEvent=function(e){var t=this;if(e!=this.editEvent){this.editEvent&&this.editEvent.onBlur(),this.editEvent=e,this._editBoxNode&&this.editBoxNode.destroy(),this.editBoxNode=null;var i=this.editEvent.frameToWindow,n=this.gameCanvasFrame;this.editBoxNode.parent=this.getCanvasNode,this.editBoxNode.setPosition(i.midX-n.midX,n.midY-i.midY,0);var o=this.editBoxNode.getComponent(c.EditBox);o.string=e.text,o.setFocus(),this.editEvent.onFocus(),this.editBoxNode.on("text-changed",function(){t.editEvent&&t.editEvent.textDidChange(o.string)}),this.editBoxNode.on("editing-did-ended",function(){t.editEvent.onBlur(),t.editEvent=null,t.editBoxNode.destroy(),t.editBoxNode=null,o.destroy()})}},Object.defineProperty(e.prototype,"panelNode",{get:function(){if(!this._panelNode){var e=new this.panNodeClass;e.layer=1<<27,e.addComponent(c.UITransform).anchorPoint=c.v2(0,1),e.getComponent(c.UITransform).width=this.gameCanvasFrame.width,e.getComponent(c.UITransform).height=this.gameCanvasFrame.height,e.setPosition(-this.gameCanvasFrame.width/2,this.gameCanvasFrame.height/2,0),this._panelNode=e}return this._panelNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editBoxNode",{get:function(){if(!this._editBoxNode){var e=new c.Node;e.addComponent(c.UITransform),e.layer=1<<27,e.setPosition(0,0,0),e.getComponent(c.UITransform).width=0,e.getComponent(c.UITransform).height=0,e.getComponent(c.UITransform).anchorPoint=c.v2(.5,.5);var t=e.addComponent(c.EditBox);t.inputMode=c.EditBox.InputMode.SINGLE_LINE,t.maxLength=2048,this._editBoxNode=e}return this._editBoxNode},set:function(e){this._editBoxNode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getCanvasNode",{get:function(){var e=c.director.getScene();if(e){var t=e.getChildByName("__ULSDK_CANVAS__");if(c.isValid(t))return t;(t=new c.Node).name="__ULSDK_CANVAS__",t.position=c.v3(480,320,0),t.setRotationFromEuler(c.v3(0,0,0)),t.scale=c.v3(1,1,1),t.layer=1<<27,e.addChild(t),c.director.addPersistRootNode(t);var i=t.addComponent(c.UITransform);i.contentSize=c.size(c.view.getVisibleSize().width,c.view.getVisibleSize().height),i.anchorPoint=c.v2(.5,.5);var n=new c.Node;n.name="__ULSDK_CAMERA__",n.parent=t,n.position=c.v3(0,0,1e3),n.setRotationFromEuler(c.v3(0,0,0)),n.scale=c.v3(1,1,1),n.layer=1<<27;var o=n.addComponent(c.Camera);return o.priority=1073741826,o.visibility=1<<27,o.clearFlags=c.Camera.ClearFlag.DONT_CLEAR,o.clearColor=c.color(0,0,0,255),o.clearDepth=1,o.clearStencil=0,o.projection=c.Camera.ProjectionType.ORTHO,o.orthoHeight=320,o.near=1,o.far=2e3,o.aperture=c.Camera.Aperture.F16_0,o.shutter=c.Camera.Shutter.D125,o.iso=c.Camera.ISO.ISO100,o.rect=c.rect(0,0,1,1),o.targetTexture=null,t.addComponent(c.Canvas).cameraComponent=o,t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"panNodeClass",{get:function(){return this._panNodeClass?this._panNodeClass:(this._panNodeClass=function(e){function t(){var t=e.call(this)||this;return t._bgSprite=null,t.on(c.Node.EventType.TOUCH_START,t.onTouchStart,t),t.on(c.Node.EventType.TOUCH_MOVE,t.onTouchMove,t),t.on(c.Node.EventType.TOUCH_END,t.onTouchEnd,t),t.on(c.Node.EventType.TOUCH_CANCEL,t.onTouchCancel,t),t}return a(t,e),t.prototype.onBindPanelEvent=function(e){this.panelEvent=e},t.prototype.onTouchStart=function(e){if(e.preventSwallow=!1,this.panelEvent){var t=e.getUILocation(),i=this.getComponent(c.UITransform).height-t.y;e.preventSwallow=!this.panelEvent.onTouchStart(new s.ULPoint({x:t.x,y:i}))}},t.prototype.onTouchMove=function(e){if(this.panelEvent){var t=e.getUILocation(),i=this.getComponent(c.UITransform).height-t.y;e.preventSwallow=!this.panelEvent.onTouchMoved(new s.ULPoint({x:t.x,y:i}))}},t.prototype.onTouchEnd=function(e){if(this.panelEvent){var t=e.getUILocation(),i=this.getComponent(c.UITransform).height-t.y;e.preventSwallow=!this.panelEvent.onTouchEnd(new s.ULPoint({x:t.x,y:i}))}},t.prototype.onTouchCancel=function(e){if(this.panelEvent){var t=e.getUILocation(),i=this.getComponent(c.UITransform).height-t.y;e.preventSwallow=!this.panelEvent.onTouchCancelled(new s.ULPoint({x:t.x,y:i}))}},Object.defineProperty(t.prototype,"bgSprite",{get:function(){if(!this._bgSprite){var e=new Uint8Array([255,255,255,255]),t=new c.ImageAsset;t.reset({_data:e,_compressed:!1,width:1,height:1,format:c.Texture2D.PixelFormat.RGBA8888});var i=new c.Texture2D;i.image=t;var n=new c.SpriteFrame;n.texture=i,n.packable=!1,this._bgSprite=n}return this._bgSprite},enumerable:!1,configurable:!0}),t.prototype.addFillerSprite=function(e,t){var i=e.addComponent(c.Sprite);i.sizeMode=c.Sprite.SizeMode.CUSTOM,i.type=c.Sprite.Type.SIMPLE,i.color=t,i.spriteFrame=this.bgSprite},t.prototype.getColorData=function(e){var t=e.color.conversion(e.alpha);return c.color(t.r,t.g,t.b,Math.round(255*t.a))},t.prototype.getImageRect=function(e){return new c.Rect(e.textureRect.x,e.textureRect.y,e.textureRect.width,e.textureRect.height)},t.prototype.getSpriteFrame=function(e){if(e.imageData.conversionImageData)return e.imageData.conversionImageData;if(e.imageData.originalImageData instanceof c.SpriteFrame)e.imageData.conversionImageData=e.imageData.originalImageData;else{var t=new c.ImageAsset(e.imageData.originalImageData),i=new c.Texture2D,n=new c.SpriteFrame;i.image=t,n.texture=i,e.imageData.conversionImageData=n}return e.imageData.conversionImageData},t.prototype.refresh=function(e){var t=e.items;this.removeAllChildren();for(var i=0;i<t.length;i++){var n=t[i],o=n.displayRect,r=new c.Node;if(r.layer=1<<27,r.setPosition(o.x,-o.y,0),r.addComponent(c.UITransform).anchorPoint=c.v2(0,1),n instanceof d.ULViewShaderItem)this.addFillerSprite(r,this.getColorData(n));else{var a=this.getSpriteFrame(n);(a=a.clone()).rect=this.getImageRect(n),r.addComponent(c.Sprite).spriteFrame=a}r.getComponent(c.UITransform).width=o.width,r.getComponent(c.UITransform).height=o.height,this.addChild(r)}},t}(u),this._panNodeClass)},enumerable:!1,configurable:!0}),e}();r.default=h,cc._RF.pop()},{}],ULPanelCtxManager:[function(e,t,i){"use strict";cc._RF.push(t,"4cc41r+1EZIGZuatrrapkE6","ULPanelCtxManager");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULPanelCtxManager=void 0;var r=n("ULAdapter"),a=function(){function e(){this.pannel=r.default.pannel}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.creatPanelCtx=function(){return e.instance.pannel.creatPanelCtx()},Object.defineProperty(e,"gameCanvasFrame",{get:function(){return e.instance.pannel.gameCanvasFrame},enumerable:!1,configurable:!0}),e.showCtx=function(t){e.instance.pannel.show(t)},e.hideCtx=function(){e.instance.pannel.hide()},e.addTouchEvent=function(t){e.instance.pannel.addTouchEvent(t)},e.focus=function(t){e.instance.pannel.registerKeyboardEvent(t)},e.loadImageFromBundle=function(t,i){e.instance.pannel.loadTool.loadImageFromBundle(t,i)},e.loadImageFromUrl=function(t,i){e.instance.pannel.loadTool.loadImageFromUrl(t,i)},e}();o.ULPanelCtxManager=a,cc._RF.pop()},{}],ULPanelHeadline:[function(e,t,i){"use strict";cc._RF.push(t,"79cfeYSVOlAdIg1m/myrvQC","ULPanelHeadline");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULRect"),a=n("ULDefaultPanelCtx"),s=n("ULPanelWeb2d"),l=n("ULLoadImageWeb"),d=function(){function e(){this._loadToolManager=null,this.editEvent=null,this._canvas=null,this.panelEvent=null,this._isShowing=!1,this.lastTouchPoint=null}return Object.defineProperty(e.prototype,"gameCanvasFrame",{get:function(){return new r.default({x:0,y:0,width:window.innerWidth,height:window.innerHeight})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadTool",{get:function(){return this._loadToolManager||(this._loadToolManager=new l.default),this._loadToolManager},enumerable:!1,configurable:!0}),e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.creatPanelCtx=function(){return new a.default},e.prototype.addTouchEvent=function(e){this.panelEvent=e},e.prototype.show=function(e){this.isShowing=!0,s.default.render(e,this.canvas)},e.prototype.hide=function(){this.isShowing=!1},e.prototype.registerKeyboardEvent=function(e){e!=this.editEvent&&(this.editEvent&&this.editEvent.onBlur(),this.editEvent=e)},e.prototype.blur=function(){},Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas||(canvas=window.ulkit_canvas||this.createCanvas(),window.ulkit_canvas=canvas,canvas.width=this.gameCanvasFrame.width,canvas.height=this.gameCanvasFrame.height,this._canvas=canvas),this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isShowing",{get:function(){return this._isShowing},set:function(e){this.isShowing!=e&&(this._isShowing=e,this._isShowing?(window.tt.onTouchStart(this.onTouchStart.bind(this)),window.tt.onTouchMove(this.onTouchMoved.bind(this)),window.tt.onTouchEnd(this.onTouchEnd.bind(this)),window.tt.onTouchCancel(this.onTouchCancelled.bind(this))):(window.tt.offTouchStart(this.onTouchStart.bind(this)),window.tt.offTouchMove(this.onTouchMoved.bind(this)),window.tt.offTouchEnd(this.onTouchEnd.bind(this)),window.tt.offTouchCancel(this.onTouchCancelled.bind(this)),s.default.render(null,this.canvas),this._canvas=null))},enumerable:!1,configurable:!0}),e.prototype.onTouchStart=function(e){if(this.panelEvent&&this.panelEvent.onTouchStart){this.blur();var t=e.touches;1==t.length&&(this.lastTouchPoint=new r.ULPoint({x:t[0].screenX,y:t[0].screenY}),this.panelEvent.onTouchStart(this.lastTouchPoint))}},e.prototype.onTouchEnd=function(){this.panelEvent&&this.panelEvent.onTouchEnd&&this.panelEvent.onTouchEnd(this.lastTouchPoint)},e.prototype.onTouchMoved=function(e){if(this.panelEvent&&this.panelEvent.onTouchMoved){var t=e.touches;1==t.length&&(this.lastTouchPoint=new r.ULPoint({x:t[0].screenX,y:t[0].screenY}),this.panelEvent.onTouchMoved(this.lastTouchPoint))}},e.prototype.onTouchCancelled=function(e){if(this.panelEvent&&this.panelEvent.onTouchCancelled){var t=e.touches;if(1==t.length){var i=t[0];this.panelEvent.onTouchCancelled(new r.ULPoint({x:i.screenX,y:i.screenY}))}}},e}();o.default=d,cc._RF.pop()},{}],ULPanelLaya:[function(e,t,i){"use strict";cc._RF.push(t,"60b8at7MgZJb7t72EMVAqW3","ULPanelLaya");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULRect"),l=o("ULDefaultPanelCtx"),d=o("ULLoadToolLaya"),c=window.Laya||{},u=c.Sprite||function(){},h=c.Script||function(){},p=function(){function e(){this._loadToolManager=null,this.editEvent=null,this._editBoxNode=null,this._eventComponent=null,this._panelComponent=null,this._panSpriteClass=null,this._panScriptClass=null,c=window.Laya||{},u=c.Sprite||function(){},h=c.Script||function(){}}return Object.defineProperty(e.prototype,"gameCanvasFrame",{get:function(){return new s.default({x:0,y:0,width:c.stage.width,height:c.stage.height})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadTool",{get:function(){return this._loadToolManager||(this._loadToolManager=new d.default),this._loadToolManager},enumerable:!1,configurable:!0}),e.prototype.createCanvas=function(){return new c.HTMLCanvas(!0).source},e.prototype.creatPanelCtx=function(){return new l.default},e.prototype.addTouchEvent=function(e){this.eventComponent.onBindPanelEvent(e)},e.prototype.show=function(e){this.panelComponent.parent||c.stage.addChild(this._panelComponent),this.panelComponent.refresh(e)},e.prototype.hide=function(){this._eventComponent&&this._eventComponent.destroy(),this._panelComponent&&this._panelComponent.destroy()},e.prototype.registerKeyboardEvent=function(e){var t=this;if(e!=this.editEvent){this.editEvent&&this.editEvent.onBlur(),this.editEvent=e,this._editBoxNode&&this.editBoxNode.destroy(),this._editBoxNode=null;var i=this.editEvent.frameToWindow,n=this.editBoxNode;c.stage.addChild(n),n.x=i.x,n.y=i.y,n.text=e.text,n.focus=!0,this.editEvent.onFocus(),n.on(c.Event.KEY_DOWN,null,function(){setTimeout(function(){t.editEvent&&t.editEvent.textDidChange(n.text)},0)}),n.on(c.Event.BLUR,null,function(){t._editBoxNode&&(t.editEvent.onBlur(),t.editEvent=null,t.editBoxNode.destroy(),t.editBoxNode=null)})}},Object.defineProperty(e.prototype,"editBoxNode",{get:function(){return this._editBoxNode||(this._editBoxNode=new c.Input,this._editBoxNode.size(0,0)),this._editBoxNode},set:function(e){this._editBoxNode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventComponent",{get:function(){return this._eventComponent||(this._eventComponent=this.panelComponent.addComponent(this.panScriptClass)),this._eventComponent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"panelComponent",{get:function(){return this._panelComponent||(this._panelComponent=new this.panSpriteClass,this._panelComponent.zOrder=4e4,this._panelComponent.width=this.gameCanvasFrame.width,this._panelComponent.height=this.gameCanvasFrame.height),this._panelComponent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"panSpriteClass",{get:function(){return this._panSpriteClass?this._panSpriteClass:(this._panSpriteClass=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getLayaTexture=function(e){if(e.imageData.conversionImageData)return e.imageData.conversionImageData;if(e.imageData.originalImageData instanceof c.Texture)e.imageData.conversionImageData=e.imageData.originalImageData;else{var t=new c.Texture2D;t.loadImageSource(e.imageData.originalImageData,!1);var i=new c.Texture(t);e.imageData.conversionImageData=i}return e.imageData.conversionImageData},t.prototype.refresh=function(e){var t=e.items;this.destroyChildren();for(var i=0;i<t.length;i++){var n=t[i],o=n.displayRect,r=new c.Sprite;if(r.size(o.width,o.height),r.x=o.x,r.y=o.y,r.alpha=n.alpha,n instanceof l.ULViewShaderItem)r.graphics.drawRect(0,0,o.width,o.height,n.color.hexadecimalColorStr);else{var a=n.textureRect,s=this.getLayaTexture(n),d=c.Texture.createFromTexture(s,a.x,a.y,a.width,a.height);r.graphics.drawTexture(d,0,0,r.width,r.height,null,n.alpha)}this.addChild(r)}},t}(u),this._panSpriteClass)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"panScriptClass",{get:function(){return this._panScriptClass?this._panScriptClass:(this._panScriptClass=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isStop=!1,t}return a(t,e),t.prototype.onBindPanelEvent=function(e){this.panelEvent=e},t.prototype.onMouseDown=function(e){if(this.panelEvent){var t=new s.ULPoint({x:e.stageX,y:e.stageY});this.isStop=this.panelEvent.onTouchStart(t),this.isStop&&e.stopPropagation()}},t.prototype.onMouseMove=function(e){if(this.panelEvent){var t=new s.ULPoint({x:e.stageX,y:e.stageY});this.panelEvent.onTouchMoved(t)&&e.stopPropagation()}},t.prototype.onMouseUp=function(e){if(this.panelEvent){var t=new s.ULPoint({x:e.stageX,y:e.stageY});this.panelEvent.onTouchEnd(t)&&e.stopPropagation()}},t.prototype.onClick=function(e){this.isStop&&e.stopPropagation()},t}(h),this._panScriptClass)},enumerable:!1,configurable:!0}),e}();r.default=p,cc._RF.pop()},{}],ULPanelWeb2d:[function(e,t,i){"use strict";cc._RF.push(t,"ebc75C7i79JEaa58HvwD+M9","ULPanelWeb2d");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULDefaultPanelCtx"),a=function(){function e(){}return e.render=function(e,t){var i=t.getContext("2d");if(i.clearRect(0,0,t.width,t.height),e)for(var n=e.items,o=0;o<n.length;o++){var a=n[o],s=a.displayRect;if(a instanceof r.ULViewShaderItem)i.fillStyle=a.color.colorStr,i.fillRect(s.x,s.y,s.width,s.height);else{var l=a.textureRect;i.drawImage(a.imageData.originalImageData,l.x,l.y,l.width,l.height,s.x,s.y,s.width,s.height)}}},e}();o.default=a,cc._RF.pop()},{}],ULPanelWebGL:[function(e,t,i){"use strict";cc._RF.push(t,"8ed5f9lp75Fd6bbO7UOX77D","ULPanelWebGL");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r,a=n("ULDefaultPanelCtx");(function(e){e.View="view",e.Image="Image"})(r||(r={}));var s=function(){function e(){this.cache={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.getVertexShader=function(e){switch(e){case r.View:return"\n                attribute vec4 a_Position;\n                \n                void main() {\n                    gl_Position = a_Position;\n                }\n                ";case r.Image:return"\n                attribute vec4 a_Position;//\u9876\u70b9\u4f4d\u7f6e\u5750\u6807\n                attribute vec2 a_TexCoord;//\u7eb9\u7406\u5750\u6807\n                varying vec2 v_TexCoord;//\u63d2\u503c\u540e\u7eb9\u7406\u5750\u6807\n                void main() {\n                    gl_Position = a_Position;\n                    v_TexCoord = a_TexCoord;\n                }\n                "}},e.prototype.getFragmentShader=function(e){switch(e){case r.View:return"\n                // \u6240\u6709float\u7c7b\u578b\u6570\u636e\u7684\u7cbe\u5ea6\u662flowp\n                precision lowp float;\n                uniform vec4 u_Color;\n                void main() {\n                    gl_FragColor = u_Color;\n                }\n                ";case r.Image:return"\n                //\u6240\u6709float\u7c7b\u578b\u6570\u636e\u7684\u7cbe\u5ea6\u662fhighp\n                precision highp float;\n                varying vec2 v_TexCoord;\n                uniform sampler2D u_Sampler;\n                uniform float u_Alpha;\n                void main() {\n                    vec4 texture = texture2D(u_Sampler,v_TexCoord);\n                    gl_FragColor = vec4(texture.r,texture.g,texture.b, texture.a * u_Alpha);\n                }\n                "}},e.prototype.getProgram=function(e,t){var i=this.cache[e];if(i)return i;i=t.createProgram();for(var n=0,o=[t.VERTEX_SHADER,t.FRAGMENT_SHADER];n<o.length;n++){var r=o[n],a=t.createShader(r),s=r==t.VERTEX_SHADER?this.getVertexShader(e):this.getFragmentShader(e);t.shaderSource(a,s),t.compileShader(a),t.attachShader(i,a)}return t.linkProgram(i),this.cache[e]=i,i},e.prototype.bindProgram=function(e,t){var i=this.getProgram(e,t);return e!=this.bindType&&(this.bindType=e,t.useProgram(i)),i},e.prototype.clear=function(e){e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},e.prototype.getPositionData=function(e,t){var i=e.displayRect,n=t.width/2,o=t.height/2,r=i.x/n-1,a=1-i.y/o,s=i.width/n,l=i.height/o;return[r,a,r,a-l,r+s,a,r+s,a-l]},e.prototype.getTextureData=function(e){var t=e.imageData.originalImageData.width,i=e.imageData.originalImageData.height,n=e.textureRect,o=n.x/t,r=1-n.y/i,a=n.width/t,s=n.height/i;return[o,r,o,r-s,o+a,r,o+a,r-s]},e.prototype.getTextureImageData=function(e){if(e.imageData.conversionImageData)return e.imageData.conversionImageData;if(e.imageData.originalImageData instanceof a.default){var t=document.createElement("canvas");t.width=e.imageData.originalImageData.width,t.height=e.imageData.originalImageData.height,l.render(e.imageData.originalImageData,t),e.imageData.conversionImageData=t}else e.imageData.conversionImageData=e.imageData.originalImageData;return e.imageData.conversionImageData},e.prototype.drawView=function(e,t,i){if(e.length){for(var n=[],o=0;o<e.length;o++){var a=this.getPositionData(e[o],t);n=n.concat(a)}var s=this.bindProgram(r.View,i),l=i.getAttribLocation(s,"a_Position"),d=i.getUniformLocation(s,"u_Color"),c=i.createBuffer();for(i.bindBuffer(i.ARRAY_BUFFER,c),i.bufferData(i.ARRAY_BUFFER,new Float32Array(n),i.STATIC_DRAW),i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l),o=0;o<e.length;o++){var u=e[o].color.getWebGLColorData();i.uniform4f(d,u[0],u[1],u[2],u[3]),i.drawArrays(i.TRIANGLE_STRIP,4*o,4)}i.disableVertexAttribArray(l),i.deleteBuffer(c)}},e.prototype.drawImage=function(e,t,i){if(e.length){for(var n=[],o=[],a=0;a<e.length;a++)n=n.concat(this.getPositionData(e[a],t)),o=o.concat(this.getTextureData(e[a]));var s=this.bindProgram(r.Image,i),l=i.getAttribLocation(s,"a_Position"),d=i.getAttribLocation(s,"a_TexCoord"),c=i.getUniformLocation(s,"u_Sampler"),u=i.getUniformLocation(s,"u_Alpha"),h=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,h),i.bufferData(i.ARRAY_BUFFER,new Float32Array(n),i.STATIC_DRAW),i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l);var p=i.createBuffer();for(i.bindBuffer(i.ARRAY_BUFFER,p),i.bufferData(i.ARRAY_BUFFER,new Float32Array(o),i.STATIC_DRAW),i.vertexAttribPointer(d,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(d),a=0;a<e.length;a++){var f=e[a],g=i.createTexture();i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,g),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,this.getTextureImageData(f)),i.uniform1f(u,f.alpha),i.uniform1i(c,0),i.drawArrays(i.TRIANGLE_STRIP,4*a,4)}i.disableVertexAttribArray(l),i.deleteBuffer(h),i.disableVertexAttribArray(d),i.deleteBuffer(p)}},e.prototype.draw=function(e,t,i){var n=this;this.clear(i);for(var o=[],s=r.View,l=function(){0!=o.length&&(s==r.View?n.drawView(o,t,i):n.drawImage(o,t,i),o=[])},d=0,c=e;d<c.length;d++){var u=c[d];u instanceof a.ULViewShaderItem?(s==r.Image&&l(),s=r.View,o.push(u)):(s==r.View&&l(),s=r.Image,o.push(u))}l()},e.draw=function(t,i){var n=i.getContext("webgl");n.enable(n.BLEND),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE),e.instance.draw(t,i,n)},e}(),l=function(){function e(){}return e.render=function(e,t){s.draw(e.items,t)},e}();o.default=l,cc._RF.pop()},{}],ULPanelWeb:[function(e,t,i){"use strict";cc._RF.push(t,"741cfarwBFNy5B+mKTeZi9H","ULPanelWeb");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULRect"),a=n("ULDefaultPanelCtx"),s=n("ULPanelWeb2d"),l=n("ULPanelWebGL"),d=n("ULLoadImageWeb"),c=function(){function e(){this._loadToolManager=null,this.editEvent=null,this._div=null,this._isSupportWebGL=!1,this._canvas=null,this._input=null,this.panelEvent=null,this._isShowing=!1,this.lastTouchPoint=null}return Object.defineProperty(e.prototype,"gameCanvasFrame",{get:function(){return new r.default({x:0,y:0,width:window.innerWidth,height:window.innerHeight})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadTool",{get:function(){return this._loadToolManager||(this._loadToolManager=new d.default),this._loadToolManager},enumerable:!1,configurable:!0}),e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.creatPanelCtx=function(){return new a.default},e.prototype.addTouchEvent=function(e){this.panelEvent=e},e.prototype.show=function(e){this.isShowing=!0,this.isSupportWebGL?l.default.render(e,this.canvas):s.default.render(e,this.canvas)},e.prototype.hide=function(){this.isShowing=!1},e.prototype.registerKeyboardEvent=function(e){var t=this;e!=this.editEvent&&(this.editEvent&&this.editEvent.onBlur(),this.editEvent=e,this.div.appendChild(this.input),this.input.value=e.text,this.input.focus(),this.input.oninput=function(){t.editEvent&&t.editEvent.textDidChange(t.input.value)},this.input.onblur=function(){t.editEvent&&(t.editEvent.onBlur(),t.editEvent=null),t._input&&(t.div.removeChild(t._input),t._input=null)})},e.prototype.blur=function(){this._input&&this._input.blur()},Object.defineProperty(e.prototype,"div",{get:function(){if(!this._div){var e=document.createElement("div");e.id="ULApplication_div",e.style.position="absolute",e.style.width=this.gameCanvasFrame.width.toString(),e.style.height=this.gameCanvasFrame.height.toString(),e.style.left="0",e.style.top="0",e.appendChild(this.canvas),this._div=e}return this._div},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSupportWebGL",{get:function(){return this.canvas&&this._isSupportWebGL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){if(!this._canvas){var e=document.createElement("canvas");e.style.position="absolute",e.width=this.gameCanvasFrame.width,e.height=this.gameCanvasFrame.height,e.addEventListener("touchstart",this.onTouchStart.bind(this)),e.addEventListener("touchend",this.onTouchEnd.bind(this)),e.addEventListener("touchmove",this.onTouchMoved.bind(this)),e.addEventListener("touchcancel",this.onTouchCancelled.bind(this)),e.addEventListener("mousedown",this.onMousedown.bind(this)),e.addEventListener("mousemove",this.onMousemove.bind(this)),e.addEventListener("mouseup",this.onMouseup.bind(this)),this._canvas=e;var t=null;try{t=e.getContext("webgl")}catch(e){}this._isSupportWebGL=!!t}return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"input",{get:function(){if(!this._input){var e=document.createElement("input");e.id="ULApplication_input",e.style.position="absolute",e.style.width="1px",this._input=e}return this._input},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isShowing",{get:function(){return this._isShowing},set:function(e){this.isShowing!=e&&(this._isShowing=e,this.isShowing?document.body.appendChild(this.div):(document.body.removeChild(this.div),this.panelEvent=null))},enumerable:!1,configurable:!0}),e.prototype.onTouchStart=function(e){if(this.panelEvent&&this.panelEvent.onTouchStart){this.blur();var t=e.touches;1==t.length&&(this.lastTouchPoint=new r.ULPoint({x:t[0].clientX,y:t[0].clientY}),this.panelEvent.onTouchStart(this.lastTouchPoint)&&e.preventDefault())}},e.prototype.onTouchEnd=function(e){this.panelEvent&&this.panelEvent.onTouchEnd&&this.panelEvent.onTouchEnd(this.lastTouchPoint)&&e.preventDefault()},e.prototype.onTouchMoved=function(e){if(this.panelEvent&&this.panelEvent.onTouchMoved){var t=e.touches;1==t.length&&(this.lastTouchPoint=new r.ULPoint({x:t[0].clientX,y:t[0].clientY}),this.panelEvent.onTouchMoved(this.lastTouchPoint)&&e.preventDefault())}},e.prototype.onTouchCancelled=function(e){if(this.panelEvent&&this.panelEvent.onTouchCancelled){var t=e.touches;if(1==t.length){var i=t[0];this.panelEvent.onTouchCancelled(new r.ULPoint({x:i.clientX,y:i.clientY}))&&e.preventDefault()}}},e.prototype.onMousedown=function(e){this.panelEvent&&this.panelEvent.onTouchStart&&this.panelEvent.onTouchStart(new r.ULPoint({x:e.clientX,y:e.clientY}))&&e.preventDefault()},e.prototype.onMousemove=function(e){this.panelEvent&&this.panelEvent.onTouchMoved&&this.panelEvent.onTouchMoved(new r.ULPoint({x:e.clientX,y:e.clientY}))&&e.preventDefault()},e.prototype.onMouseup=function(e){this.panelEvent&&this.panelEvent.onTouchEnd&&this.panelEvent.onTouchEnd(new r.ULPoint({x:e.clientX,y:e.clientY}))&&e.preventDefault()},e}();o.default=c,cc._RF.pop()},{}],ULPanelWeixin:[function(e,t,i){"use strict";cc._RF.push(t,"4c8751aw3RETr7i3uK9AL72","ULPanelWeixin");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULRect"),a=n("ULDefaultPanelCtx"),s=n("ULPanelWeb2d"),l=n("ULLoadImageWeb"),d=function(){function e(){this._loadToolManager=null,this.editEvent=null,this._canvas=null,this.panelEvent=null,this._isShowing=!1,this.lastTouchPoint=null}return Object.defineProperty(e.prototype,"gameCanvasFrame",{get:function(){return new r.default({x:0,y:0,width:window.innerWidth,height:window.innerHeight})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadTool",{get:function(){return this._loadToolManager||(this._loadToolManager=new l.default),this._loadToolManager},enumerable:!1,configurable:!0}),e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.creatPanelCtx=function(){return new a.default},e.prototype.addTouchEvent=function(e){this.panelEvent=e},e.prototype.show=function(e){this.isShowing=!0,s.default.render(e,this.canvas)},e.prototype.hide=function(){this.isShowing=!1},e.prototype.registerKeyboardEvent=function(e){e!=this.editEvent&&(this.editEvent&&this.editEvent.onBlur(),this.editEvent=e)},e.prototype.blur=function(){},Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas||(canvas=window.ulkit_canvas||this.createCanvas(),window.ulkit_canvas=canvas,canvas.width=this.gameCanvasFrame.width,canvas.height=this.gameCanvasFrame.height,this._canvas=canvas),this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isShowing",{get:function(){return this._isShowing},set:function(e){this.isShowing!=e&&(this._isShowing=e,this._isShowing?(window.wx.onTouchStart(this.onTouchStart.bind(this)),window.wx.onTouchMove(this.onTouchMoved.bind(this)),window.wx.onTouchEnd(this.onTouchEnd.bind(this)),window.wx.onTouchCancel(this.onTouchCancelled.bind(this))):(window.wx.offTouchStart(this.onTouchStart.bind(this)),window.wx.offTouchMove(this.onTouchMoved.bind(this)),window.wx.offTouchEnd(this.onTouchEnd.bind(this)),window.wx.offTouchCancel(this.onTouchCancelled.bind(this)),s.default.render(null,this.canvas),this._canvas=null))},enumerable:!1,configurable:!0}),e.prototype.onTouchStart=function(e){if(this.panelEvent&&this.panelEvent.onTouchStart){this.blur();var t=e.touches;1==t.length&&(this.lastTouchPoint=new r.ULPoint({x:t[0].screenX,y:t[0].screenY}),this.panelEvent.onTouchStart(this.lastTouchPoint))}},e.prototype.onTouchEnd=function(){this.panelEvent&&this.panelEvent.onTouchEnd&&this.panelEvent.onTouchEnd(this.lastTouchPoint)},e.prototype.onTouchMoved=function(e){if(this.panelEvent&&this.panelEvent.onTouchMoved){var t=e.touches;1==t.length&&(this.lastTouchPoint=new r.ULPoint({x:t[0].screenX,y:t[0].screenY}),this.panelEvent.onTouchMoved(this.lastTouchPoint))}},e.prototype.onTouchCancelled=function(e){if(this.panelEvent&&this.panelEvent.onTouchCancelled){var t=e.touches;if(1==t.length){var i=t[0];this.panelEvent.onTouchCancelled(new r.ULPoint({x:i.screenX,y:i.screenY}))}}},e}();o.default=d,cc._RF.pop()},{}],ULPayExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"dd700ZTpzVO8ZtG4NT8D4nt","ULPayExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULPayChannelType=void 0;var s=o("ULColor"),l=o("ULEventEnum"),d=o("ULFont"),c=o("ULRect"),u=o("ULButton"),h=o("ULTextField"),p=o("ULView"),f=o("ULViewEnum"),g=o("ULLog"),v=o("ULBaseExecutor"),_=o("ULConfigExecutor"),y=o("ULGoldfingerExecutor"),m=o("ULKitPop"),S=o("ULGameExecutor"),b=o("ULHttp"),C=o("ULSystemExecutor"),I=o("ULTools"),F=o("ULLabel");(function(e){e.HeadLine="h5headline",e.WeiXin="h5weixin",e.Oppo="h5oppo",e.Vivo="h5vivo",e.Huawei="h5huawei"})(r.ULPayChannelType||(r.ULPayChannelType={}));var R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onPaySuccess=function(e,t){this.executeAsync({type:v.ULBaseExecutionEnum.Concurrency,endType:v.ULBaseExecutionEndEnum.All,handle:function(i){i.onPaySuccess&&i.onPaySuccess(e,I.default.clone(t))}}).catch(function(e){g.default.log("ULPayListenerExecutor onPaySuccess err:",e.stack),S.default.reportErrMsg("ULPayListenerExecutor onPaySuccess",e.stack)})},t.prototype.onPayFail=function(e,t){this.executeAsync({type:v.ULBaseExecutionEnum.Concurrency,endType:v.ULBaseExecutionEndEnum.All,handle:function(i){i.onPayFail&&i.onPayFail(e,I.default.clone(t))}}).catch(function(e){g.default.log("ULPayListenerExecutor onPayFail err:",e.stack),S.default.reportErrMsg("ULPayListenerExecutor onPayFail",e.stack)})},t.prototype.onReissuePayOrder=function(e,t){this.executeAsync({type:v.ULBaseExecutionEnum.Concurrency,endType:v.ULBaseExecutionEndEnum.All,handle:function(i){i.onReissuePayOrder&&i.onReissuePayOrder(e,I.default.clone(t))}}).catch(function(e){g.default.log("ULPayListenerExecutor onReissuePayOrder err:",e.stack),S.default.reportErrMsg("ULPayListenerExecutor onReissuePayOrder",e.stack)})},t}(v.default),w=function(e){function t(){var t=e.call(this)||this;return t._listenerExecutor=new R,t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.sdkSwitch=function(){return 1==_.default.getNumberValue("n_sdk_pay_mode",1)},t.prototype.addListener=function(){y.default.registerItem(this)},t.prototype.customPrioritySort=function(){return _.default.getArrayValue("a_sdk_pay_custom_priority_sort")},t.prototype.getPayObject=function(e,t,i){var n=e.paySetting[t];return n&&n.price&&n.proName?((n=I.default.clone(n)).payId=t,n.orderId=i||I.default.createRandomOrderId(),Promise.resolve(n)):Promise.reject("\u652f\u4ed8\u57cb\u70b9\u4fe1\u606f\u9519\u8bef:"+JSON.stringify(n))},t.prototype.openPay=function(e,t,i,n){var o=this;void 0===i&&(i=void 0),void 0===n&&(n=void 0);var r=this;return this.getItemAsync({moduleName:i,type:v.ULBaseExecutionEnum.ChainFlashback,checkCustom:!0,checkSupport:!0}).then(function(i){return n&&n("\u652f\u4ed8\u6a21\u5757\uff1a"+i.moduleName),o.getPayObject(i,e,t).then(function(e){return n&&n("\u652f\u4ed8\u57cb\u70b9\u4fe1\u606f\uff1a"+JSON.stringify(e,null,2)),new Promise(function(t,n){i.openPay(e).then(function(){t(e),r._listenerExecutor.onPaySuccess(i.moduleName,e)}).catch(function(t){n(t),r._listenerExecutor.onPayFail(i.moduleName,e)})})})})},t.prototype.requestPayOrderId=function(e,t){return b.default.postEncryptionPromise({url:C.default.commonServerUrl+"/sdkserver/preorder",data:JSON.stringify({gameId:C.default.gameId,channel:e,orderInfo:JSON.stringify(t)})}).then(function(e){if(g.default.log("ULPayExecutor.requestPayOrderId success:",e),1==I.default.getNumberValue(e,"code",0))return Promise.resolve(I.default.getObjectValue(e,"preOrderData"));Promise.reject(JSON.stringify(e))})},t.prototype.goldfingerView=function(e){var i=this;return new y.ULGoldfingerStackView("\u652f\u4ed8\u7cfb\u7edf",e,function(n){var o=0,r=["\u9ed8\u8ba4"].concat(i.getAllRegisterModuleName()),a=[{name:"SDK\u652f\u4ed8\u5f00\u5173:",value:t.isSupport}],g=[{name:"\u8bf7\u9009\u62e9\u6e20\u9053:",value:r,width:160,handle:function(e){o=e}}],_=[{name:"\u652f\u4ed8\u57cb\u70b9\u914d\u7f6e:",width:160,handle:function(){i.getItemAsync({moduleName:0==o?void 0:r[o],type:v.ULBaseExecutionEnum.ChainFlashback,checkCustom:!0,checkSupport:!0}).then(function(e){m.default.showInformationFlow({title:"\u652f\u4ed8\u57cb\u70b9\u914d\u7f6e",content:["\u652f\u4ed8\u6a21\u5757:"+e.moduleName].concat(I.default.getObjMessage(e.paySetting))})},function(e){m.default.showToast({title:e})})}}],y=new p.default(c.default.Init(0,0,e,40));y.backgroundColor=s.default.Clear;var S=new F.default(c.default.Init(0,0,180,40));S.backgroundColor=s.default.Clear,S.textAlignment=f.ULTextAligment.Left,S.textColor=s.default.White,S.font=d.default.boldSystem(20),S.text="\u6d4b\u8bd5\u573a\u666f\uff08\u57cb\u70b9\uff09\uff1a";var b=new h.default(c.default.Init(e/2-50,0,100,40));b.textAlignment=f.ULTextAligment.Center;var C=new u.default(c.default.Init(e-160,0,160,40));C.setTitleForState("\u652f\u4ed8\u6d4b\u8bd5",l.ULControlState.Normal),C.font=d.default.boldSystem(20),C.registerControlEvent(l.ULControlEvents.TouchUpInside,function(){var e=m.default.showInformationFlow({title:"\u652f\u4ed8\u6d4b\u8bd5\u6d41\u7a0b"}),t=b.text;e.sendMessage("\u5f00\u59cb\u652f\u4ed8:"+r[o]+" \u652f\u4ed8\u57cb\u70b9:"+t),i.openPay(t,null,0==o?void 0:r[o],e.sendMessage).then(function(){e.sendMessage("\u652f\u4ed8\u6210\u529f")},function(t){e.sendMessage("\u652f\u4ed8\u5931\u8d25\n errMsg:"+t)})}),y.addSubView(S),y.addSubView(C),y.addSubView(b),n.addStackForSwitchs(a),n.addStackMenuViews(g),n.addStackButtons(_),n.addStackView(y)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e),e.monitorReissuePayOrder&&e.monitorReissuePayOrder(function(i){t.instance._listenerExecutor.onReissuePayOrder(e.moduleName,i)})},t.removeItem=function(e){t.instance.unRegister(e)},t.registerListener=function(e){t.instance._listenerExecutor.register(e)},t.removeListener=function(e){t.instance._listenerExecutor.unRegister(e)},t.openPay=function(e,i){return t.instance.openPay(e,i)},Object.defineProperty(t,"paySetting",{get:function(){var e=t.instance.getItem({type:v.ULBaseExecutionEnum.ChainFlashback,checkCustom:!0,checkSupport:!0});return e?I.default.clone(e.paySetting||{}):{}},enumerable:!1,configurable:!0}),t.requestPreOrderData=function(e,i){return t.instance.requestPayOrderId(e,i)},t}(v.default);r.default=w,cc._RF.pop()},{}],ULPrivacyPolicyExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"d1576dgyKNAULhAEBpdu70Y","ULPrivacyPolicyExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULKitPop"),l=o("ULTools"),d=o("ULBaseExecutor"),c=o("ULGoldfingerExecutor"),u=o("ULMsgExecutor"),h=o("ULSystemExecutor"),p=function(e){function t(){var t=e.call(this)||this;return t.initExecutor(),t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initExecutor=function(){u.default.registerMsg(h.ULSystemLanguage.zhcn,{privacyPolicy_no_name:"\u672a\u627e\u5230\u5bf9\u5e94\u9690\u79c1\u653f\u7b56"})},t.prototype.addListener=function(){c.default.registerItem(this)},t.prototype.privacyPolicySetting=function(e){void 0===e&&(e=void 0);var t=this.getItem({moduleName:e,type:d.ULBaseExecutionEnum.ChainFlashback});return t?l.default.clone(t.privacyPolicyObjList):[]},t.prototype.showPrivacyPolicy=function(e,t){return void 0===t&&(t=void 0),this.getItemAsync({moduleName:t,type:d.ULBaseExecutionEnum.ChainFlashback}).then(function(t){for(var i=0,n=t.privacyPolicyObjList;i<n.length;i++){var o=n[i];if(o.name==e)return t.showPrivacyPolicy(o)}return Promise.reject(u.default.getValue("privacyPolicy_no_name"))})},t.prototype.openPrivacyPolicySetting=function(e){return void 0===e&&(e=void 0),this.getItemAsync({moduleName:e,type:d.ULBaseExecutionEnum.ChainFlashback}).then(function(e){return e.openPrivacyPolicySetting()})},t.prototype.goldfingerView=function(e){var i=this;return new c.ULGoldfingerStackView("\u9690\u79c1\u653f\u7b56\u7cfb\u7edf",e,function(e){var n=0,o=["\u9ed8\u8ba4"].concat(i.getAllRegisterModuleName()),r=[{name:"\u9690\u79c1\u653f\u7b56\u5f00\u5173:",value:t.isSupport}],a=[{name:"\u8bf7\u9009\u62e9\u6e20\u9053:",value:o,width:150,handle:function(e){n=e}}],d=[{name:"\u9690\u79c1\u653f\u7b56\u914d\u7f6e:",handle:function(){var e=o[n];e="\u9ed8\u8ba4"==e?"":e;var t=i.privacyPolicySetting(e);s.default.showInformationFlow({title:"\u9690\u79c1\u653f\u7b56\u914d\u7f6e",content:l.default.getObjMessage(t)})}},{name:"\u5c55\u793a\u9690\u79c1\u653f\u7b56:",handle:function(){var e=o[n];e="\u9ed8\u8ba4"==e?"":e,i.openPrivacyPolicySetting(e).catch(function(e){s.default.showToast({title:e})})}}];e.addStackForSwitchs(r),e.addStackMenuViews(a),e.addStackButtons(d)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.privacyPolicySetting=function(){return t.instance.privacyPolicySetting()},t.showPrivacyPolicy=function(e){return t.instance.showPrivacyPolicy(e)},t.openPrivacyPolicySetting=function(){return t.instance.openPrivacyPolicySetting()},t}(d.default);r.default=p,cc._RF.pop()},{}],ULRankListExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"122c5J3yM1OZq7X7jeqoNyh","ULRankListExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULBaseExecutor"),l=o("ULConfigExecutor"),d=function(e){function t(){return e.call(this)||this}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.sdkSwitch=function(){return 1==l.default.getNumberValue("n_sdk_rankList_mode",1)},t.prototype.getRankItem=function(e){return this.executeAsync({type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(t){for(var i=t.rankTypeSetiing,n={},o=0,r=e;o<r.length;o++){var a=r[o],s=i[a];if(!s)return Promise.reject("rankType:"+a+" \u672a\u914d\u7f6e");n[s]=a}return Promise.resolve({item:t,rankIdSetting:n})}})},t.prototype.getRankNum=function(e,t){return this.getRankItem(e).then(function(e){return e.item.getRankNum(Object.keys(e.rankIdSetting),t).then(function(t){for(var i={},n=0,o=Object.keys(t);n<o.length;n++){var r=o[n],a=e.rankIdSetting[r];a&&(i[a]=t[r])}return Promise.resolve(i)})})},t.prototype.getPlayersInfoByUids=function(e,t,i){return this.getRankItem([e]).then(function(e){var n=Object.keys(e.rankIdSetting)[0];return e.item.getPlayersInfoByUids(n,t,i)})},t.prototype.getPlayersInfoByRankIds=function(e,t,i){return this.getRankItem([e]).then(function(e){var n=Object.keys(e.rankIdSetting)[0];return e.item.getPlayersInfoByRankIds(n,t,i)})},t.prototype.modifyUsersScore=function(e,t,i){return this.getRankItem([e]).then(function(e){var n=Object.keys(e.rankIdSetting)[0];return e.item.modifyUsersScore(n,t,i)})},t.prototype.updatePlayersData=function(e,t){return this.getRankItem([e]).then(function(e){var i=Object.keys(e.rankIdSetting)[0];return e.item.updatePlayersData(i,t)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.getRankNum=function(e,i){return t.instance.getRankNum(e,i)},t.getPlayersInfoByUids=function(e,i,n){return t.instance.getPlayersInfoByUids(e,i,n)},t.getPlayersInfoByRankIds=function(e,i,n){return t.instance.getPlayersInfoByRankIds(e,i,n)},t.modifyUsersScore=function(e,i,n){return t.instance.modifyUsersScore(e,i,n)},t.updatePlayersData=function(e,i){return t.instance.updatePlayersData(e,i)},t}(s.default);r.default=d,cc._RF.pop()},{}],ULRecorderExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"e1b76/wi8VItZdcwdb7USmK","ULRecorderExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULRecorderType=void 0;var s,l,d=o("ULApplication"),c=o("ULColor"),u=o("ULFont"),h=o("ULRect"),p=o("ULEventEnum"),f=o("ULButton"),g=o("ULLabel"),v=o("ULMenuView"),_=o("ULView"),y=o("ULViewEnum"),m=o("ULViewController"),S=(o("ULLog"),o("ULBaseExecutor")),b=o("ULConfigExecutor"),C=(o("ULGameExecutor"),o("ULGoldfingerExecutor")),I=function(e){function t(){return e.call(this)||this}return a(t,e),t.prototype.viewDidLoad=function(){this.view.backgroundColor=c.default.White},t}(m.default);(function(e){e[e.AllowStart=0]="AllowStart",e[e.Pause=1]="Pause",e[e.Recording=2]="Recording",e[e.OnError=3]="OnError"})(s||(s={})),function(e){e.manual="1",e.auto="2"}(l=r.ULRecorderType||(r.ULRecorderType={})),function(){function e(e){this.recorderCache=[],this.onErrorMsg="",this.onStartCallback=null,this.onResumeCallback=null,this.onPauseCallback=null,this.onStopCallback=null,this.onErrorCallback=null,this.startType=l.auto,this._stateDidChangeHandle=null,this._state=s.AllowStart,this._isOperating=!1,this._trimRecorder=null,this.recorderItem=e,this.recorder=e.getGameRecorderManager()}Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this._state!=e&&(this._state=e,this._stateDidChangeHandle&&this._stateDidChangeHandle())},enumerable:!1,configurable:!0}),e.prototype.getStatePromise=function(e,t,i){var n=this;return new Promise(function(o,r){-1!=e.indexOf(n.state)?(n._stateDidChangeHandle=function(){n.state==t?o():r(n.getStateMsg())},i()):r(n.getStateMsg())})},e.prototype.getStateMsg=function(){switch(this.state){case s.AllowStart:return"\u8fd8\u672a\u5f00\u59cb\u5f55\u5c4f";case s.Pause:return"\u5f55\u5c4f\u5df2\u6682\u505c";case s.Recording:return"\u6b63\u5728\u5f55\u5c4f\u4e2d";case s.OnError:return this.onErrorMsg}},e.prototype.startOperation=function(){var e=this;return new Promise(function(t,i){e._isOperating?i("\u4e0a\u4e2a\u64cd\u4f5c\u8fd8\u672a\u5b8c\u6210"):(e._isOperating=!0,t())})},e.prototype.endOperation=function(){this._isOperating=!1},e.prototype.start=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.stop=function(){},e.prototype.onStart=function(e){this.onStartCallback=e},e.prototype.onResume=function(e){this.onResumeCallback=e},e.prototype.onPause=function(e){this.onPauseCallback=e},e.prototype.onStop=function(e){this.onStopCallback=e},e.prototype.onError=function(e){this.onErrorCallback=e},Object.defineProperty(e.prototype,"trimRecorder",{get:function(){return this._trimRecorder||(this._trimRecorder={onStart:this.onStart.bind(this),onResume:this.onResume.bind(this),onPause:this.onPause.bind(this),onStop:this.onStop.bind(this),onError:this.onError.bind(this),start:this.start.bind(this),pause:this.pause.bind(this),resume:this.resume.bind(this),stop:this.stop.bind(this)}),this._trimRecorder},enumerable:!1,configurable:!0}),e.prototype.getTrimVideoId=function(e){if(0!=this.recorderCache.length){if(!e)return this.recorderCache[this.recorderCache.length-1].videoId;for(var t=this.recorderCache.length-1;t>=0;t--)if(e==this.recorderCache[t].videoId)return e}}}();var F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.registerListener=function(e){this.register(e)},t.prototype.onShareRecorderSuccess=function(){},t.prototype.onShareRecorderFail=function(){},t}(S.default),R=function(e){function t(){var t=e.call(this)||this;return t._listenerExecutor=new F,t.recorderManager={},t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){C.default.registerItem(this)},t.prototype.sdkSwitch=function(){return 1==b.default.getNumberValue("n_sdk_recorder_mode",1)},t.prototype.goldfingerView=function(e){var i=this;return new C.ULGoldfingerStackView("\u5f55\u5c4f\u7cfb\u7edf",e,function(n){var o=[{name:"\u5f55\u5c4f\u5f00\u5173:",value:t.isSupport}],r=new _.default(h.default.Init(0,0,e,40));r.backgroundColor=c.default.Clear;var a=new g.default(h.default.Init(0,0,160,40));a.backgroundColor=c.default.Clear,a.textAlignment=y.ULTextAligment.Left,a.textColor=c.default.White,a.font=u.default.boldSystem(20),a.text="\u6d4b\u8bd5\u573a\u666f\uff1a";var s=["\u9ed8\u8ba4"].concat(i.getAllRegisterModuleName()),l=new v.default(h.default.Init(0,0,160,40));l.center=new h.ULPoint({x:e/2,y:l.center.y}),l.dataSource=s,l.font=u.default.boldSystem(16);var m=new f.default(h.default.Init(e-160,0,160,40));m.setTitleForState("\u8fdb\u5165\u8be6\u60c5\u754c\u9762",p.ULControlState.Normal),m.font=u.default.boldSystem(20),m.registerControlEvent(p.ULControlEvents.TouchUpInside,function(){var e=new I;d.default.keyWindow.pushViewController(e)}),r.addSubView(a),r.addSubView(l),r.addSubView(m),n.addStackForSwitchs(o),n.addStackView(r)})},t.prototype.getGameRecorderManagerHandle=function(){},t.prototype.shareRecorder=function(){},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.removeItem=function(e){t.instance.unRegister(e)},t.registerListener=function(e){t.instance._listenerExecutor.register(e)},t.removeListener=function(e){t.instance._listenerExecutor.unRegister(e)},t.getGameRecorderManager=function(){return null},t.share=function(){},t}(S.default);r.default=R,cc._RF.pop()},{}],ULRectBase:[function(e,t,i){"use strict";cc._RF.push(t,"d69dbMLiqlHC4zx9G8vLoOt","ULRectBase");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULRect"),a=function(){function e(e){void 0===e&&(e=r.default.Zero),this._frame=r.default.Zero,this._frame=e}return Object.defineProperty(e.prototype,"frame",{get:function(){return this.getFrame()},set:function(e){this.setFrame(e)},enumerable:!1,configurable:!0}),e.prototype.getFrame=function(){return r.default.Init(this._frame.x,this._frame.y,this._frame.width,this._frame.height)},e.prototype.setFrame=function(e){this._frame.isEqual(e)||(this.frameWillChange(),this._frame=e,this.frameDidChange())},Object.defineProperty(e.prototype,"center",{get:function(){return new r.ULPoint({x:this._frame.midX,y:this._frame.midY})},set:function(e){this.frame=new r.default({x:e.x-this._frame.width/2,y:e.y-this._frame.height/2,width:this._frame.width,height:this._frame.height})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return new r.default({x:0,y:0,width:this._frame.width,height:this._frame.height})},enumerable:!1,configurable:!0}),e}();o.default=a,cc._RF.pop()},{}],ULRect:[function(e,t,i){"use strict";cc._RF.push(t,"1ed5fUO0HpPArGJzveCAeah","ULRect");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.ULIndexPath=n.ULEdgeInsets=n.ULPoint=n.ULSize=void 0;var o=function(){function e(e){this._x=0,this._y=0,this._width=0,this._height=0,this.x=Math.ceil(e.x),this.y=Math.ceil(e.y),this.width=Math.ceil(e.width),this.height=Math.ceil(e.height)}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=Math.ceil(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=Math.ceil(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=Math.ceil(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height=Math.ceil(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"midX",{get:function(){return this.x+this.width/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"midY",{get:function(){return this.y+this.height/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),e.prototype.containPoint=function(e){return this.x<=e.x&&this.maxX>=e.x&&this.y<=e.y&&this.maxY>=e.y},e.prototype.isEqual=function(e){return this.x==e.x&&this.y==e.y&&this.width==e.width&&this.height==e.height},Object.defineProperty(e,"Zero",{get:function(){return new e({x:0,y:0,width:0,height:0})},enumerable:!1,configurable:!0}),e.Init=function(t,i,n,o){return new e({x:t,y:i,width:n,height:o})},e.prototype.rectFrom=function(t){return new e({x:this.x-t.x,y:this.y-t.y,width:this.width,height:this.height})},e.intersectionRect=function(t,i){var n=e.Zero;return t.x>=i.maxX||t.y>=i.maxY||t.maxX<=t.x||t.maxY<=t.y?n:(n.x=Math.max(t.x,i.x),n.y=Math.max(t.y,i.y),n.width=Math.min(t.maxX,i.maxX)-n.x,n.height=Math.min(t.maxY,i.maxY)-n.y,n)},e.prototype.copy=function(){return e.Init(this.x,this.y,this.width,this.height)},e}();n.default=o;var r=function(){function e(e){this.width=0,this.height=0,this.width=e.width,this.height=e.height}return Object.defineProperty(e,"Zero",{get:function(){return new e({width:0,height:0})},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.width==e.width&&this.height==e.height},e}();n.ULSize=r;var a=function(){function e(e){this._x=0,this._y=0;var t=Number(e.x),i=Number(e.y);this.x=isNaN(t)?0:t,this.y=isNaN(i)?0:i}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=Math.floor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=Math.floor(e)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return!!e&&this.x==e.x&&this.y==e.y},Object.defineProperty(e,"Zero",{get:function(){return new e({x:0,y:0})},enumerable:!1,configurable:!0}),e}();n.ULPoint=a;var s=function(){function e(e,t,i,n){this.top=0,this.left=0,this.bottom=0,this.right=0,this.top=e,this.left=t,this.bottom=i,this.right=n}return Object.defineProperty(e,"Zero",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return e&&this.top==e.top&&this.left==e.left&&this.bottom==e.bottom&&this.right==e.right},e}();n.ULEdgeInsets=s;var l=function(){function e(e,t){this.section=0,this.row=0,this.section=e,this.row=t}return e.prototype.toJson=function(){return JSON.stringify(this)},e.parse=function(t){var i=JSON.parse(t);return new e(i.section,i.row)},e.prototype.isEqual=function(e){return e&&this.section==e.section&&this.row==e.row},e}();n.ULIndexPath=l,cc._RF.pop()},{}],ULRefreshAdManager:[function(e,t,i){"use strict";cc._RF.push(t,"65a596R8LlC34JBHMpQewL6","ULRefreshAdManager");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULError"),a=n("ULLog"),s=n("ULTools"),l=n("ULConfigExecutor"),d=n("ULRefreshAd"),c=n("ULRefreshNormalAd"),u=function(){function e(){this.timerId=null,this.itemCache={};var e=this;this.timerId=setInterval(function(){for(var t in e.itemCache){var i=e.itemCache[t];e.showOneSecond(i)}},1e3)}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.getIsRefresh=function(e){var t=l.default.getObjectValue("o_sdk_refresh_switch_setting");return e in t?!!t[e]:"*"in t&&!!t["*"]},e.getAdIntervals=function(e){var t=l.default.getObjectValue("o_sdk_refresh_adIntervals_setting"),i=s.default.getNumberValue(t,e,s.default.getNumberValue(t,"*",30));return i=Math.min(i,60),Math.max(i,10)},e.getAllowShowNum=function(e){var t=l.default.getObjectValue("o_sdk_refresh_showNum_setting"),i=s.default.getNumberValue(t,e,s.default.getNumberValue(t,"*",2));return Math.max(i,1)},e.getRequestCD=function(e){var t=l.default.getObjectValue("o_sdk_refresh_requestCD_setting"),i=s.default.getNumberValue(t,e,s.default.getNumberValue(t,"*",30));return Math.max(i,10)},e.prototype.showOneSecond=function(e){e.performSecond(),e.isRefresh&&e.allowLoad&&e.refresh()},e.createRefreshAd=function(t,i){return e.createCustomRefreshAd({arg:t,channelClass:i,isRefresh:this.getIsRefresh(t),adIntervals:this.getAdIntervals(t),allowShowNum:this.getAllowShowNum(t),requestCD:this.getRequestCD(t)})},e.createCustomRefreshAd=function(t){return e.getInstance().createRefreshAd(t)},e.prototype.createRefreshAd=function(e){var t=this,i=e.channelClass.moduleName+"_"+e.arg,n=this.itemCache[i];return n||(n=new h(e),this.itemCache[i]=n),new c.default({arg:n.arg,show:function(e,t){n.show(e,t)},close:function(){n.close()},destroy:function(){n.destroy(),delete t.itemCache[i]}})},e}();o.default=u;var h=function(){function e(e){var t=this;this.showAdvItem=null,this.showCycleList=[],this.loadCycleList=[],this.channelShowCycle={onShow:function(){if(a.default.log("ULRefreshItem.channelShowCycle arg:"+t.arg+" onShow"),t.isShowing){t.hadshown=!0,t.remainShowNumber=Math.max(--t.remainShowNumber,0);for(var e=0;e<t.showCycleList.length;e++){var i=t.showCycleList[e];i.onShow&&i.onShow()}}else t.close()},onShowFail:function(e){if(a.default.log("ULRefreshItem.channelShowCycle arg:"+t.arg+" onShowFail"),t.isShowing){t.isShowing=!1,t.loadSuccess=!1,t.errInfo=e;for(var i=0;i<t.showCycleList.length;i++){var n=t.showCycleList.shift();n.onShowFail&&n.onShowFail(e)}}},onRefresh:function(e){if(void 0===e&&(e=null),t.isShowing&&(a.default.log("ULRefreshItem.channelShowCycle arg:"+t.arg+" onRefresh err:"+e),!e)){t.hadshown=!0,t.remainShowNumber=Math.max(--t.remainShowNumber,0);for(var i=0;i<t.showCycleList.length;i++){var n=t.showCycleList[i];n.onRefresh&&n.onRefresh()}}},onClose:function(e){if(void 0===e&&(e=!1),t.isShowing&&(!t.isLoading||!e)&&(t.hadshown||!e))for(a.default.log("ULRefreshItem.channelShowCycle arg:"+t.arg+" onClose isUserClick:"+e),t.isShowing=!1;t.showCycleList.length;){var i=t.showCycleList.shift();i.onClose&&i.onClose(e)}},onClick:function(){if(t.isShowing){a.default.log("ULRefreshItem.channelShowCycle arg:"+t.arg+" onClick"),t.hadClick=!0,t.remainRequestTime=0;for(var e=0;e<t.showCycleList.length;e++){var i=t.showCycleList[e];i.onClick&&i.onClick()}}}},this.channelLoadCycle=new d.ULRefreshAdLoadCycle,this.arg=e.arg,this.isRefresh=e.isRefresh,this.adIntervals=e.adIntervals,this.allowShowNum=e.allowShowNum,this.requestCD=e.requestCD,this.channelAd=new e.channelClass,this.isShowing=!1,this.hadClick=!1,this.hadshown=!1,this.isLoading=!1,this.loadSuccess=!1,this.remainRequestTime=0,this.remainShowTime=this.adIntervals,this.remainShowNumber=this.allowShowNum,this.channelAd.init(this.arg)}return Object.defineProperty(e.prototype,"allowLoad",{get:function(){if(0==this.remainRequestTime){if(this.hadClick)return!0;if(!this.loadSuccess)return!0;if(this.hadshown&&0==this.remainShowTime)return!0;if(this.hadshown&&0==this.remainShowNumber){if(!this.isShowing&&this.isRefresh)return!0;if(this.isShowing&&!this.isRefresh)return!0}}return!1},enumerable:!1,configurable:!0}),e.prototype.performSecond=function(){this.remainRequestTime=Math.max(--this.remainRequestTime,0),this.isShowing&&(this.remainShowTime=Math.max(--this.remainShowTime,0)),a.default.info("ULRefreshItem arg:"+this.arg+":",{allowLoad:this.allowLoad,isShowing:this.isShowing,remainRequestTime:this.remainRequestTime,remainShowTime:this.remainShowTime,remainShowNumber:this.remainShowNumber})},e.prototype.loadData=function(e){var t=this;if(a.default.log("ULRefreshItem arg:"+this.arg+" loadData"),this.loadCycleList.push(e),!this.isLoading){this.isLoading=!0,this.remainRequestTime=this.requestCD;var i=setTimeout(function(){t.channelLoadCycle.onLoadFail(new r.default("0","\u52a0\u8f7d\u8d85\u65f6"))},2e4),n=new d.ULRefreshAdLoadCycle;this.channelLoadCycle.onLoad=function(){for(a.default.log("ULRefreshItem arg:"+t.arg+" loadData onLoad"),t.channelLoadCycle.onLoad=n.onLoad,t.channelLoadCycle.onLoadFail=n.onLoadFail,clearTimeout(i),t.isLoading=!1,t.errInfo=null,t.loadSuccess=!0,t.hadshown=!1,t.hadClick=!1,t.remainRequestTime=t.requestCD,t.remainShowTime=t.adIntervals,t.remainShowNumber=t.allowShowNum;t.loadCycleList.length;){var e=t.loadCycleList.shift();e.onLoad&&e.onLoad()}},this.channelLoadCycle.onLoadFail=function(e){for(a.default.log("ULRefreshItem arg:"+t.arg+" loadData onLoadFail:"+e),t.channelLoadCycle.onLoad=n.onLoad,t.channelLoadCycle.onLoadFail=n.onLoadFail,clearTimeout(i),t.isLoading=!1,t.errInfo=e,t.loadSuccess=!1;t.loadCycleList.length;){var o=t.loadCycleList.shift();o.onLoadFail&&o.onLoadFail(e)}},this.channelAd.load(this.channelLoadCycle)}},e.prototype.channelShow=function(e){void 0===e&&(e=!1),this.isShowing&&this.channelAd.show(this.showAdvItem,{onShow:e?this.channelShowCycle.onRefresh:this.channelShowCycle.onShow,onShowFail:e?this.channelShowCycle.onRefresh:this.channelShowCycle.onShowFail,onRefresh:this.channelShowCycle.onRefresh,onClose:this.channelShowCycle.onClose,onClick:this.channelShowCycle.onClick})},e.prototype.show=function(e,t){var i=this;a.default.log("ULRefreshAdManager.show arg:"+this.arg+" isShowing:"+this.isShowing),this.isShowing?t.onShowFail(new r.default("0","\u6b63\u5728\u64ad\u653e\u4e2d")):(this.isShowing=!0,this.showAdvItem=e,this.showCycleList.push(t),this.allowLoad||this.isLoading?(a.default.log("ULRefreshAdManager.show arg:"+this.arg+" loadData"),this.loadData({onLoad:function(){a.default.log("ULRefreshAdManager.show arg:"+i.arg+" loadData onLoad"),i.channelShow()},onLoadFail:function(e){a.default.log("ULRefreshAdManager.show arg:"+i.arg+" loadData onLoadFail"),i.channelShowCycle.onShowFail(e)}})):this.loadSuccess?(a.default.log("ULRefreshAdManager.show arg:"+this.arg+" loadSuccess"),this.remainRequestTime=Math.max(this.remainRequestTime,3),this.channelShow()):(a.default.log("ULRefreshAdManager.show arg:"+this.arg+" errInfo"),this.channelShowCycle.onShowFail(this.errInfo||new r.default("0",this.isLoading?"\u6b63\u5728\u52a0\u8f7d\u4e2d":"\u672a\u77e5\u9519\u8bef"))))},e.prototype.refresh=function(){var e=this;a.default.log("ULRefreshAdManager.refresh arg:"+this.arg);var t=this.isShowing;this.loadData({onLoad:function(){a.default.log("ULRefreshAdManager.refresh arg:"+e.arg+" onLoad isShowing:"+e.isShowing),t&&e.isShowing&&e.channelShow(!0)},onLoadFail:function(t){a.default.log("ULRefreshAdManager.refresh arg:"+e.arg+" onLoadFail err:"+t)}})},e.prototype.close=function(){a.default.log("ULRefreshAdManager.close arg:"+this.arg),this.loadCycleList=[],this.channelAd.close(),this.channelShowCycle.onClose&&this.channelShowCycle.onClose(!1)},e.prototype.destroy=function(){a.default.log("ULRefreshAdManager.destroy arg:"+this.arg),this.close(),this.channelAd.destroy(),this.channelAd=null},e}();cc._RF.pop()},{}],ULRefreshAd:[function(e,t,i){"use strict";cc._RF.push(t,"40bfciJkLJBOIpV73yiprdw","ULRefreshAd");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULChannelRefreshAd=o.ULRefreshAdShowCycle=o.ULRefreshAdLoadCycle=void 0;var r=n("ULLog");o.ULRefreshAdLoadCycle=function(){this.onLoad=function(){r.default.log("ULRefreshAdLoadCycle default onLoad")},this.onLoadFail=function(){r.default.log("ULRefreshAdLoadCycle default onLoadFail")}};o.ULRefreshAdShowCycle=function(){this.onShow=function(){r.default.log("ULRefreshAdShowCycle default onShow")},this.onShowFail=function(){r.default.log("ULRefreshAdShowCycle default onShowFail")},this.onRefresh=function(){r.default.log("ULRefreshAdShowCycle default onRefresh")},this.onClose=function(e){r.default.log("ULRefreshAdShowCycle default onClose isUserClick:",e)},this.onClick=function(){r.default.log("ULRefreshAdShowCycle default onClick")}};o.ULChannelRefreshAd=function(){},cc._RF.pop()},{}],ULRefreshNormalAd:[function(e,t,i){"use strict";cc._RF.push(t,"aef3cDBhvVA/IeYmsPNW1K1","ULRefreshNormalAd");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULRefreshAd"),a=function(){function e(e){this.showCycle=new r.ULRefreshAdShowCycle,this.showCall=null,this.closeCall=null,this.destroyCall=null,this.arg=e.arg,this.showCall=e.show,this.closeCall=e.close,this.destroyCall=e.destroy}return e.prototype.show=function(e){var t=this;this.isShowing||this.showCall&&(this.isShowing=!0,this.showCall(e,{onShow:function(){t.showCycle.onShow&&t.showCycle.onShow()},onShowFail:function(e){t.isShowing=!1,t.showCycle.onShowFail&&t.showCycle.onShowFail(e)},onRefresh:function(){t.showCycle.onRefresh&&t.showCycle.onRefresh()},onClose:function(e){void 0===e&&(e=!1),t.isShowing=!1,t.showCycle.onClose&&t.showCycle.onClose(e)},onClick:function(){t.showCycle.onClick&&t.showCycle.onClick()}}))},e.prototype.close=function(){this.isShowing&&this.closeCall&&this.closeCall()},e.prototype.destroy=function(){this.destroyCall&&this.destroyCall(),this.showCall=null,this.closeCall=null,this.destroyCall=null},e}();o.default=a,cc._RF.pop()},{}],ULResponder:[function(e,t,i){"use strict";cc._RF.push(t,"d0be1qaSABLHqG8mWZNSGCf","ULResponder");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ULSDK:[function(e,t,i){"use strict";cc._RF.push(t,"a3743BB0qxEjppWghD9Vzop","ULSDK");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ulsdk=o.ChannelRelationType=o.ChannelRankType=o.PhoneVibrateIntensity=o.PhoneVibrateType=o.FavoriteType=o.RecorderType=o.AdRewardType=o.AdLoadState=o.VideoPointEventStatus=o.BuyActionResult=o.Orientation=o.Platform=o.GameLanguage=void 0;var r=n("ULBridge");(function(e){e.zhcn="zh-cn",e.zhtw="zh-tw",e.enus="en-us",e.jajp="ja-jp",e.kokr="ko-kr",e.ptbr="pt-br",e.vi="vi",e.id="id"})(o.GameLanguage||(o.GameLanguage={})),function(e){e.Android="android",e.Ios="ios",e.H5="h5"}(o.Platform||(o.Platform={})),function(e){e.portrait="portrait",e.landscape="landscape"}(o.Orientation||(o.Orientation={})),function(e){e[e.show=0]="show",e[e.buy=1]="buy",e[e.receipt=2]="receipt"}(o.BuyActionResult||(o.BuyActionResult={})),function(e){e[e.show=1]="show",e[e.click=2]="click"}(o.VideoPointEventStatus||(o.VideoPointEventStatus={})),function(e){e[e.loadSuccess=1]="loadSuccess",e[e.loading=2]="loading",e[e.loadFailed=3]="loadFailed"}(o.AdLoadState||(o.AdLoadState={})),function(e){e.show="show",e.click="click"}(o.AdRewardType||(o.AdRewardType={})),function(e){e.manual="1",e.auto="2"}(o.RecorderType||(o.RecorderType={})),function(e){e.bar="bar",e.tip="tip",e.customize="customize"}(o.FavoriteType||(o.FavoriteType={})),function(e){e.short="short",e.long="long"}(o.PhoneVibrateType||(o.PhoneVibrateType={})),function(e){e.heavy="heavy",e.medium="medium",e.light="light"}(o.PhoneVibrateIntensity||(o.PhoneVibrateIntensity={})),function(e){e.day="day",e.week="week",e.month="month",e.all="all"}(o.ChannelRankType||(o.ChannelRankType={})),function(e){e.default="default",e.friend="friend",e.all="all"}(o.ChannelRelationType||(o.ChannelRelationType={}));var a=!1;o.ulsdk=window.ulsdk={VERSION:"V8",initSdk:function(e){if(a)throw new Error("ulsdk initSdk error: Do not repeat initialization");if(!(e&&e.callback&&e.callback instanceof Function))throw new Error("ulsdk initSdk error: params is invaild");a=!0;var t=e.callback;e.callback=function(e){e&&(a=e.bSuccess),t(e)},r.default.getInstance().initSdk(e)},loadRemoteConfig:function(e){if(!a)throw new Error("ulsdk loadRemoteConfig error: Please initialize the SDK first");if(!(e&&e instanceof Function))throw new Error("ulsdk loadRemoteConfig error: callback is invaild");r.default.getInstance().loadRemoteConfig(e)},getLocalConfig:function(){if(!a)throw new Error("ulsdk getLocalConfig error: Please initialize the SDK first");return r.default.getInstance().getLocalConfig()},onShow:function(e){if(!a)throw new Error("ulsdk onShow error: Please initialize the SDK first");if(!(e&&e instanceof Function))throw new Error("ulsdk onShow error: callback is invaild");r.default.getInstance().onShow(e)},onHide:function(e){if(!a)throw new Error("ulsdk onHide error: Please initialize the SDK first");if(!(e&&e instanceof Function))throw new Error("ulsdk onHide error: callback is invaild");r.default.getInstance().onHide(e)},levelStart:function(e){if(!a)throw new Error("ulsdk levelStart error: Please initialize the SDK first");if(!e)throw new Error("ulsdk levelStart error: params is invaild");return r.default.getInstance().levelStart(e)},levelComplete:function(e){if(!a)throw new Error("ulsdk levelComplete error: Please initialize the SDK first");if(!e)throw new Error("ulsdk levelComplete error: params is invaild");return r.default.getInstance().levelComplete(e)},coinChange:function(e){if(!a)throw new Error("ulsdk coinChange error: Please initialize the SDK first");if(!e)throw new Error("ulsdk coinChange error: params is invaild");return r.default.getInstance().coinChange(e)},itemBuy:function(e){if(!a)throw new Error("ulsdk itemBuy error: Please initialize the SDK first");if(!e)throw new Error("ulsdk itemBuy error: params is invaild");return r.default.getInstance().itemBuy(e)},buyAction:function(e){if(!a)throw new Error("ulsdk buyAction error: Please initialize the SDK first");if(!e||!e.produceName)throw new Error("ulsdk buyAction error: params is invaild");return r.default.getInstance().buyAction(e)},commonEvent:function(e){if(!a)throw new Error("ulsdk commonEvent error: Please initialize the SDK first");if(!e)throw new Error("ulsdk commonEvent error: params is invaild");return r.default.getInstance().commonEvent(e)},videoPointEvent:function(e){if(!a)throw new Error("ulsdk videoPointEvent error: Please initialize the SDK first");if(!e||!e.advId||!e.status)throw new Error("ulsdk videoPointEvent error: params is invaild");return r.default.getInstance().videoPointEvent(e)},patchInfo:function(e){if(!a)throw new Error("ulsdk patchInfo error: Please initialize the SDK first");if(!e)throw new Error("ulsdk patchInfo error: params is invaild");return r.default.getInstance().patchInfo(e)},getAdvState:function(e){if(!a)throw new Error("ulsdk getAdvState error: Please initialize the SDK first");if(!(e&&e.advIds&&0!=e.advIds.length&&e.callback&&e.callback instanceof Function))throw new Error("ulsdk getAdvState error: params is invalid");r.default.getInstance().getAdvState(e)},openAdv:function(e){if(!a)throw new Error("ulsdk openAdv error: Please initialize the SDK first");if(!e||!e.advId)throw new Error("ulsdk openAdv error: params is invalid");return r.default.getInstance().openAdv(e)},openPay:function(e){if(!a)throw new Error("ulsdk openPay error: Please initialize the SDK first");if(!(e&&e.payId&&e.callback&&e.callback instanceof Function))throw new Error("ulsdk openPay error: params is invalid");r.default.getInstance().openPay(e)},reOpenPay:function(e){if(!a)throw new Error("ulsdk reOpenPay error: Please initialize the SDK first");if(!e)throw new Error("ulsdk reOpenPay error: callback is invalid");r.default.getInstance().reOpenPay(e)},setPrePayListener:function(e){if(!a)throw new Error("ulsdk setPrePayListener error: Please initialize the SDK first");if(!e)throw new Error("ulsdk setPrePayListener error: callback is invalid");r.default.getInstance().setPrePayListener(e)},deliverGoodsEvent:function(e){if(!a)throw new Error("ulsdk deliverGoodsEvent error: Please initialize the SDK first");if(!e||!e.payId)throw new Error("ulsdk deliverGoodsEvent error: params is invalid");r.default.getInstance().deliverGoodsEvent(e)},setPauseSoundListener:function(e){if(!a)throw new Error("ulsdk setPauseSoundListener error: Please initialize the SDK first");if(!e)throw new Error("ulsdk setPauseSoundListener error: callback is invalid");r.default.getInstance().setPauseSoundListener(e)},setResumeSoundListener:function(e){if(!a)throw new Error("ulsdk setResumeSoundListener error: Please initialize the SDK first");if(!e)throw new Error("ulsdk setResumeSoundListener error: callback is invalid");r.default.getInstance().setResumeSoundListener(e)},useCdkey:function(e){if(!a)throw new Error("ulsdk useCdkey error: Please initialize the SDK first");if(!(e&&e.cdkStr&&e.callback&&e.callback instanceof Function))throw new Error("ulsdk useCdkey error: params is invalid");r.default.getInstance().useCdkey(e)},openAdvancedSetting:function(e){if(!a)throw new Error("ulsdk openAdvancedSetting error: Please initialize the SDK first");if(!e)throw new Error("ulsdk openAdvancedSetting error: callback is invalid");r.default.getInstance().openAdvancedSetting(e)},getPrivacySetting:function(){if(!a)throw new Error("ulsdk showPrivacy error: Please initialize the SDK first");return r.default.getInstance().getPrivacySetting()},showPrivacy:function(e){if(!a)throw new Error("ulsdk showPrivacy error: Please initialize the SDK first");if(!e||null==e.name||null==e.name||!e.callback)throw new Error("ulsdk showPrivacy error: params is invalid");r.default.getInstance().showPrivacy(e)},openPermissionSetting:function(e){if(!a)throw new Error("ulsdk openPermissionSetting error: Please initialize the SDK first");if(!e)throw new Error("ulsdk openPermissionSetting error: callback is invalid");r.default.getInstance().openPermissionSetting(e)},wipeAccount:function(e){if(!a)throw new Error("ulsdk wipeAccount error: Please initialize the SDK first");if(!e)throw new Error("ulsdk wipeAccount error: callback is invalid");r.default.getInstance().wipeAccount(e)},setStorage:function(e){if(!a)throw new Error("ulsdk setStorage error: Please initialize the SDK first");if(!e||!e.key||!e.callback)throw new Error("ulsdk setStorage error: params is invalid");r.default.getInstance().setStorage(e)},setStorageSync:function(e){if(!a)throw new Error("ulsdk setStorageSync error: Please initialize the SDK first");if(!e||!e.key)throw new Error("ulsdk setStorageSync error: params is invalid");return r.default.getInstance().setStorageSync(e)},getStorage:function(e,t){if(!a)throw new Error("ulsdk getStorage error: Please initialize the SDK first");if(!t)throw new Error("ulsdk getStorage error: callback is invalid");if(!e)throw new Error("ulsdk getStorage error: key is invalid");r.default.getInstance().getStorage(e,t)},getStorageSync:function(e){if(!a)throw new Error("ulsdk getStorageSync error: Please initialize the SDK first");if(!e)throw new Error("ulsdk getStorageSync error: key is invalid");return r.default.getInstance().getStorageSync(e)},removeStorage:function(e,t){if(!a)throw new Error("ulsdk removeStorage error: Please initialize the SDK first");if(!t)throw new Error("ulsdk removeStorage error: callback is invalid");if(!e)throw new Error("ulsdk removeStorage error: key is invalid");r.default.getInstance().removeStorage(e,t)},removeStorageSync:function(e){if(!a)throw new Error("ulsdk removeStorageSync error: Please initialize the SDK first");if(!e)throw new Error("ulsdk removeStorageSync error: key is invalid");return r.default.getInstance().removeStorageSync(e)},clearStorage:function(e){if(!a)throw new Error("ulsdk clearStorage error: Please initialize the SDK first");if(!e)throw new Error("ulsdk clearStorage error: callback is invalid");r.default.getInstance().clearStorage(e)},clearStorageSync:function(){if(!a)throw new Error("ulsdk clearStorageSync error: Please initialize the SDK first");return r.default.getInstance().clearStorageSync()},setClearStorageListener:function(e){if(!a)throw new Error("ulsdk setClearStorageListener error: Please initialize the SDK first");if(!e)throw new Error("ulsdk setClearStorageListener error: callback is invaild");r.default.getInstance().setClearStorageListener(e)},setCloudStorage:function(e){if(!a)throw new Error("ulsdk setCloudStorage error: Please initialize the SDK first");if(!(e&&e.key&&e.data&&e.callback))throw new Error("ulsdk setCloudStorage error: params is invalid");r.default.getInstance().setCloudStorage(e)},getCloudStorage:function(e,t){if(!a)throw new Error("ulsdk getCloudStorage error: Please initialize the SDK first");if(!t)throw new Error("ulsdk getCloudStorage error: callback is invalid");r.default.getInstance().getCloudStorage(e,t)},setCoverStorageListener:function(e){if(!a)throw new Error("ulsdk setCoverStorageListener error: Please initialize the SDK first");if(!e)throw new Error("ulsdk setCoverStorageListener error: callback is invalid");r.default.getInstance().setCoverStorageListener(e)},getUserNumInRank:function(e){if(!a)throw new Error("ulsdk getUserNumInRank error: Please initialize the SDK first");if(!e||!e.rankIds||0==e.rankIds.length||!e.callback)throw new Error("ulsdk getUserNumInRank error: params is invalid");r.default.getInstance().getUserNumInRank(e)},getRankPlayersInfoByUids:function(e){if(!a)throw new Error("ulsdk getRankPlayersInfoByUids error: Please initialize the SDK first");if(!(e&&e.rankId&&e.uids&&e.uids.length&&e.callback))throw new Error("ulsdk getRankPlayersInfoByUids error: params is invalid");r.default.getInstance().getRankPlayersInfoByUids(e)},getRankPlayersInfoByRankIds:function(e){if(!a)throw new Error("ulsdk getRankPlayersInfoByRankIds error: Please initialize the SDK first");if(!(e&&e.rangeIds&&e.rangeIds.length&&e.rankId&&e.callback))throw new Error("ulsdk getRankPlayersInfoByRankIds error: params is invalid");r.default.getInstance().getRankPlayersInfoByRankIds(e)},updateRankPlayersData:function(e){if(!a)throw new Error("ulsdk updateRankPlayersData error: Please initialize the SDK first");if(!(e&&e.userInfoList&&e.userInfoList.length&&e.rankId&&e.callback))throw new Error("ulsdk updateRankPlayersData error: params is invalid");r.default.getInstance().updateRankPlayersData(e)},modifyRankScoreByArray:function(e){if(!a)throw new Error("ulsdk modifyRankScoreByArray error: Please initialize the SDK first");if(!(e&&e.uids&&0!=e.uids.length&&e.scores&&0!=e.scores.length&&e.uids.length==e.scores.length&&e.rankId&&e.callback))throw new Error("ulsdk modifyRankScoreByArray error: params is invalid");r.default.getInstance().modifyRankScoreByArray(e)},setRankData:function(e){if(!a)throw new Error("ulsdk setRankData error: Please initialize the SDK first");if(!(e&&e.dataType&&e.value&&e.callback))throw new Error("ulsdk setRankData error: params is invalid");r.default.getInstance().setRankData(e)},getRankDataList:function(e){if(!a)throw new Error("ulsdk getRankDataList error: Please initialize the SDK first");if(!(e&&e.rankType&&e.dataType&&e.callback))throw new Error("ulsdk getRankDataList error: params is invalid");r.default.getInstance().getRankDataList(e)},login:function(e){if(!a)throw new Error("ulsdk login error: Please initialize the SDK first");if(!e)throw new Error("ulsdk login error: callback is invalid");r.default.getInstance().login(e)},openJump:function(){throw new Error("Method not implemented.")},jumpOtherGame:function(){throw new Error("Method not implemented.")},jumpLeisureSubject:function(e){if(!a)throw new Error("ulsdk jumpLeisureSubject error: Please initialize the SDK first");if(!e)throw new Error("ulsdk jumpLeisureSubject error: callback is invalid");r.default.getInstance().jumpLeisureSubject(e)},getShortcutState:function(e){if(!a)throw new Error("ulsdk getShortcutState error: Please initialize the SDK first");if(!e)throw new Error("ulsdk getShortcutState error: callback is invalid");r.default.getInstance().getShortcutState(e)},installShortcut:function(e){if(!a)throw new Error("ulsdk installShortcut error: Please initialize the SDK first");if(!e)throw new Error("ulsdk installShortcut error: callback is invalid");r.default.getInstance().installShortcut(e)},openShare:function(e){if(!a)throw new Error("ulsdk openShare error: Please initialize the SDK first");if(!e)throw new Error("ulsdk openShare error: callback is invalid");r.default.getInstance().openShare(e)},shareGameVideo:function(e){if(!a)throw new Error("ulsdk shareGameVideo error: Please initialize the SDK first");if(!e)throw new Error("ulsdk shareGameVideo error: callback is invalid");r.default.getInstance().shareGameVideo(e)},jumpToShareVideoView:function(e){if(!a)throw new Error("ulsdk jumpToShareVideoView error: Please initialize the SDK first");if(!e||!e.callback)throw new Error("ulsdk getRecorder error: params is invalid");r.default.getInstance().jumpToShareVideoView(e)},getRecorder:function(){if(!a)throw new Error("ulsdk getRecorder error: Please initialize the SDK first");return r.default.getInstance().getRecorder()},joinGroup:function(e){if(!a)throw new Error("ulsdk joinGroup error: Please initialize the SDK first");if(!e)throw new Error("ulsdk joinGroup error: params is invalid");r.default.getInstance().joinGroup(e)},getFollowOfficialAccountState:function(e){if(!a)throw new Error("ulsdk getFollowOfficialAccountState error: Please initialize the SDK first");if(!e)throw new Error("ulsdk getFollowOfficialAccountState error: callback is invalid");r.default.getInstance().getFollowOfficialAccountState(e)},followOfficialAccount:function(e){if(!a)throw new Error("ulsdk followOfficialAccount error: Please initialize the SDK first");if(!e)throw new Error("ulsdk followOfficialAccount error: callback is invalid");r.default.getInstance().followOfficialAccount(e)},setJumpNewGuideListener:function(e){if(!a)throw new Error("ulsdk setJumpNewGuideListener error: Please initialize the SDK first");if(!e)throw new Error("ulsdk setJumpNewGuideListener error: callback is invalid");r.default.getInstance().setJumpNewGuideListener(e)},setChangePatchInfoListener:function(e){if(!a)throw new Error("ulsdk setChangePatchInfoListener error: Please initialize the SDK first");if(!e)throw new Error("ulsdk setChangePatchInfoListener error: callback is invalid");r.default.getInstance().setChangePatchInfoListener(e)},setCheckDebugWhiteUserListener:function(e){if(!a)throw new Error("ulsdk setCheckDebugWhiteUserListener error: Please initialize the SDK first");if(!e)throw new Error("ulsdk setCheckDebugWhiteUserListener error: callback is invalid");r.default.getInstance().setCheckDebugWhiteUserListener(e)},getSubscribeState:function(e){if(!a)throw new Error("ulsdk getSubscribeState error: Please initialize the SDK first");if(!e||!e.subscribeId||!e.callback)throw new Error("ulsdk getSubscribeState error: params is invalid");r.default.getInstance().getSubscribeState(e)},addSubscribe:function(e){if(!a)throw new Error("ulsdk addSubscribe error: Please initialize the SDK first");if(!e||!e.subscribeId||!e.callback)throw new Error("ulsdk addSubscribe error: params is invalid");r.default.getInstance().addSubscribe(e)},getServerTime:function(e){if(!a)throw new Error("ulsdk getServerTime error: Please initialize the SDK first");if(!e)throw new Error("ulsdk getServerTime error: callback is invalid");r.default.getInstance().getServerTime(e)},checkNetwork:function(e){if(!a)throw new Error("ulsdk checkNetwork error: Please initialize the SDK first");if(!e)throw new Error("ulsdk checkNetwork error: callback is invalid");r.default.getInstance().checkNetwork(e)},openUrl:function(e){if(!a)throw new Error("ulsdk openUrl error: Please initialize the SDK first");if(!e||!e.url||!e.callback)throw new Error("ulsdk openUrl error: params is invalid");r.default.getInstance().openUrl(e)},phoneVibrate:function(e){if(!a)throw new Error("ulsdk phoneVibrate error: Please initialize the SDK first");if(!e||!e.type||!e.callback)throw new Error("ulsdk phoneVibrate error: params is invalid");r.default.getInstance().phoneVibrate(e)},openInviteComment:function(e){if(!a)throw new Error("ulsdk openInviteComment error: Please initialize the SDK first");if(!e)throw new Error("ulsdk openInviteComment error: callback is invalid");r.default.getInstance().openInviteComment(e)},addGameToMyFavorite:function(e){if(!a)throw new Error("ulsdk addGameToMyFavorite error: Please initialize the SDK first");if(!e||!e.type||!e.callback)throw new Error("ulsdk addGameToMyFavorite error: params is invalid");r.default.getInstance().addGameToMyFavorite(e)},getChannelUserInfo:function(e){if(!a)throw new Error("ulsdk getChannelUserInfo error: Please initialize the SDK first");if(!e)throw new Error("ulsdk getChannelUserInfo error: callback is invalid");r.default.getInstance().getChannelUserInfo(e)},setAppShareListener:function(e){if(!a)throw new Error("ulsdk setAppShareListener error: Please initialize the SDK first");if(!e)throw new Error("ulsdk setAppShareListener error: callback is invalid");r.default.getInstance().setAppShareListener(e)},exitGame:function(){if(!a)throw new Error("ulsdk exitGame error: Please initialize the SDK first");r.default.getInstance().exitGame()},contentSecurityCheck:function(e){if(!a)throw new Error("ulsdk contentSecurityCheck error: Please initialize the SDK first");if(!(e&&e.type&&e.content&&e.callback))throw new Error("ulsdk contentSecurityCheck error: params is invalid");r.default.getInstance().contentSecurityCheck(e)}},cc._RF.pop()},{}],ULScreen:[function(e,t,i){"use strict";cc._RF.push(t,"208e9O7PupEaZX9DRpQ0zyD","ULScreen");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULPanelCtxManager"),a=n("ULRect"),s=function(){function e(){}return Object.defineProperty(e,"bounds",{get:function(){return new a.default({x:0,y:0,width:this.width,height:this.height})},enumerable:!1,configurable:!0}),Object.defineProperty(e,"width",{get:function(){return r.ULPanelCtxManager.gameCanvasFrame.width},enumerable:!1,configurable:!0}),Object.defineProperty(e,"height",{get:function(){return r.ULPanelCtxManager.gameCanvasFrame.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"center",{get:function(){var e=this.bounds;return new a.ULPoint({x:e.midX,y:e.midY})},enumerable:!1,configurable:!0}),e}();o.default=s,cc._RF.pop()},{}],ULScrollView:[function(e,t,i){"use strict";cc._RF.push(t,"749dcXVPTNBh6NEC848byQY","ULScrollView");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULColor"),l=o("ULRect"),d=o("ULControl"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._contentOffset=new l.ULPoint({x:0,y:0}),t.extendSuperViewSolver=!1,t}return a(t,e),Object.defineProperty(t.prototype,"contentOffset",{get:function(){return this._contentOffset},set:function(e){if(!this._contentOffset.isEqual(e)){this._contentOffset=e;var t=this.bounds;this.frame=new l.default({x:-e.x,y:-e.y,width:t.width,height:t.height})}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panel",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.getAdapteConstraints=function(){return[]},t}(o("ULView").default),u=function(e){function t(t){void 0===t&&(t=l.default.Zero);var i=e.call(this,t)||this;return i._contentView=new c,i.delegate=null,i.contentInset=l.ULEdgeInsets.Zero,i.scrollEnabled=!0,i.pagingEnable=!1,i.bounces=!0,i.alwaysBounceVertical=!1,i.alwaysBounceHorizontal=!1,i._isDragging=!1,i._isDecelerating=!1,i.draggHorizontalDecelerating=0,i.draggVerticalDecelerating=0,i.lastPoint=null,i.lastContentOffset=null,i.lastDragPoint=null,i.lastDragTime=0,i.addSubView(i._contentView),i.backgroundColor=s.default.White,i}return a(t,e),Object.defineProperty(t.prototype,"contentOffset",{get:function(){return this._contentView.contentOffset},set:function(e){this.contentOffset.isEqual(e)||(this._contentView.contentOffset=e,this.scrollViewDidScroll())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentSize",{get:function(){var e=this._contentView.bounds;return new l.ULSize({width:e.width,height:e.height})},set:function(e){this._contentView.frame=l.default.Init(this._contentView.frame.x,this._contentView.frame.y,e.width,e.height)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentView",{get:function(){return this._contentView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDragging",{get:function(){return this._isDragging},enumerable:!1,configurable:!0}),t.prototype.setIsDragging=function(e){this._isDragging!=e&&(this._isDragging=e,this._isDragging?this.scrollViewWBeginDragging():this.scrollViewDidEndDragging())},Object.defineProperty(t.prototype,"isDecelerating",{get:function(){return this._isDecelerating},enumerable:!1,configurable:!0}),t.prototype.setIsDecelerating=function(e){this._isDecelerating!=e&&(this._isDecelerating=e,this._isDecelerating?this.scrollViewWillBeginDecelerating():this.scrollViewDidEndDecelerating())},Object.defineProperty(t.prototype,"bounceVertical",{get:function(){return this.alwaysBounceVertical||this.bounces&&this.contentSize.height>this.bounds.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bounceHorizontal",{get:function(){return this.alwaysBounceHorizontal||this.bounces&&this.contentSize.width>this.bounds.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxInset",{get:function(){var e=this.bounds,t=this.contentSize;return new l.ULPoint({x:Math.max(0,t.width-e.width),y:Math.max(0,t.height-e.height)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minInset",{get:function(){return new l.ULPoint({x:0,y:0})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bounceHorizontalDecelerating",{get:function(){var e=this.maxInset,t=this.minInset;if(this.contentOffset.x>e.x){var i=Math.ceil((this.contentOffset.x-e.x)/3);return-Math.pow(i,2)-5}return this.contentOffset.x<t.x?(i=Math.floor((t.x-this.contentOffset.x)/3),Math.pow(i,2)+5):0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bounceVerticalDecelerating",{get:function(){var e=this.maxInset,t=this.minInset;if(this.contentOffset.y>e.y){var i=Math.ceil((this.contentOffset.y-e.y)/3);return-Math.pow(i,2)-5}return this.contentOffset.y<t.y?(i=Math.floor((t.y-this.contentOffset.y)/3),Math.pow(i,2)+5):0},enumerable:!1,configurable:!0}),t.prototype.scrollViewWBeginDragging=function(){this.delegate&&this.delegate.scrollViewWBeginDragging&&this.delegate.scrollViewWBeginDragging(this)},t.prototype.scrollViewDidScroll=function(){this.delegate&&this.delegate.scrollViewDidScroll&&this.delegate.scrollViewDidScroll(this)},t.prototype.scrollViewDidEndDragging=function(){this.delegate&&this.delegate.scrollViewDidEndDragging&&this.delegate.scrollViewDidEndDragging(this)},t.prototype.nextFrameShow=function(e){var t=this;window.requestAnimationFrame(function(){t.isDragging||e()&&t.nextFrameShow(e)})},t.prototype.scrollViewWillBeginDecelerating=function(){var e=this;this.nextFrameShow(function(){var t=e.bounceHorizontalDecelerating,i=e.bounceVerticalDecelerating;if(e.setIsDecelerating(0!=e.draggHorizontalDecelerating||0!=e.draggVerticalDecelerating||0!=t||0!=i),!e.isDecelerating)return!1;var n=e.draggHorizontalDecelerating+t,o=e.draggVerticalDecelerating+i;return e.draggHorizontalDecelerating>0?e.draggHorizontalDecelerating=Math.max(0,n-Math.max(30,.08*e.draggHorizontalDecelerating)):e.draggHorizontalDecelerating<0&&(e.draggHorizontalDecelerating=Math.min(0,n+Math.max(30,.08*e.draggHorizontalDecelerating))),e.draggVerticalDecelerating>0?e.draggVerticalDecelerating=Math.max(0,o-Math.max(30,.08*e.draggVerticalDecelerating)):e.draggVerticalDecelerating<0&&(e.draggVerticalDecelerating=Math.min(0,o+Math.max(30,.08*e.draggVerticalDecelerating))),n=.016*(e.draggHorizontalDecelerating+t),o=.016*(e.draggVerticalDecelerating+i),n=n>=0?Math.ceil(n):Math.floor(n),o=o>=0?Math.ceil(o):Math.floor(o),e.lastContentOffset=e.contentOffset,e.scrollViewWillScroll(n,o),!0}),this.delegate&&this.delegate.scrollViewWillBeginDecelerating&&this.delegate.scrollViewWillBeginDecelerating(this)},t.prototype.scrollViewDidEndDecelerating=function(){this.delegate&&this.delegate.scrollViewDidEndDecelerating&&this.delegate.scrollViewDidEndDecelerating(this)},t.prototype.scrollViewWillPaging=function(){var e=this;this.nextFrameShow(function(){var t=e.bounds,i=e.contentOffset,n=new l.ULPoint({x:Math.round(i.x/t.width)*t.width,y:Math.round(i.y/t.height)*t.height});if(n.x=Math.max(0,n.x),n.y=Math.max(0,n.y),i.isEqual(n))return!1;var o=Math.abs(n.x-i.x),r=Math.abs(n.y-i.y);return o=Math.min(o,Math.max(5,Math.ceil(.1*o))),r=Math.min(r,Math.max(5,Math.ceil(.1*r))),o=n.x>i.x?o:-o,r=n.y>i.y?r:-r,e.lastContentOffset=e.contentOffset,e.scrollViewWillScroll(o,r),!0})},t.prototype.scrollViewWillScroll=function(e,t){var i=new l.ULPoint({x:Math.round(this.lastContentOffset.x+e),y:Math.round(this.lastContentOffset.y+t)}),n=this.maxInset,o=this.minInset;if(i.x>n.x)if(this.bounceHorizontal){var r=i.x-n.x;this.isDragging&&(r=Math.round(r/3)),i.x=n.x+r}else i.x=n.x;else i.x<o.x&&(this.bounceHorizontal?(r=o.x-i.x,this.isDragging&&(r=Math.round(r/3)),i.x=o.x-r):i.x=o.x);i.y>n.y?this.bounceVertical?(r=i.y-n.y,this.isDragging&&(r=Math.round(r/3)),i.y=n.y+r):i.y=n.y:i.y<o.y&&(this.bounceVertical?(r=o.y-i.y,this.isDragging&&(r=Math.round(r/3)),i.y=o.y-r):i.y=o.y),this.contentOffset=i},t.prototype.touchesBegan=function(e){this.lastPoint=e,this.lastContentOffset=this.contentOffset,this.lastDragPoint=null},t.prototype.touchesMoved=function(e){if(this.scrollEnabled){var t=(new Date).getTime();if(this.lastDragPoint){var i=(t-this.lastDragTime)/1e3;this.draggHorizontalDecelerating=Math.floor(this.lastDragPoint.x-e.x)/i,this.draggVerticalDecelerating=Math.floor(this.lastDragPoint.y-e.y)/i,this.draggHorizontalDecelerating=this.draggHorizontalDecelerating>0?Math.min(15e3,this.draggHorizontalDecelerating):Math.max(-3e4,this.draggHorizontalDecelerating),this.draggVerticalDecelerating=this.draggVerticalDecelerating>0?Math.min(15e3,this.draggVerticalDecelerating):Math.max(-3e4,this.draggVerticalDecelerating)}this.lastDragPoint=e,this.lastDragTime=t,this.setIsDecelerating(!1),this.setIsDragging(!0),this.scrollViewWillScroll(this.lastPoint.x-e.x,this.lastPoint.y-e.y)}},t.prototype.touchesEnded=function(){this.setIsDragging(!1),this.pagingEnable?this.scrollViewWillPaging():this.setIsDecelerating(!0)},t.prototype.touchesCancelled=function(){},t}(d.default);r.default=u,cc._RF.pop()},{}],ULSdkManager:[function(e,t,i){"use strict";cc._RF.push(t,"be54dzliFZM8pTkAXIhhksJ","ULSdkManager");var n=e,o=i,r=function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var a=n("ULSDK"),s=n("ULLog"),l=n("ULAdvExecutor"),d=n("ULCdkExecutor"),c=n("ULChannelRankListExecutor"),u=n("ULCloudStorageExecutor"),h=n("ULConfigExecutor"),p=n("ULCopExecutor"),f=n("ULGameExecutor"),g=n("ULJoinGroupExecutor"),v=n("ULOfficialAccountExecutor"),_=n("ULPayExecutor"),y=n("ULPrivacyPolicyExecutor"),m=n("ULRankListExecutor"),S=n("ULRecorderExecutor"),b=n("ULSecurityCheckExecutor"),C=n("ULShareExecutor"),I=n("ULShortcutExecutor"),F=n("ULStatisExecutor"),R=n("ULStorageExecutor"),w=n("ULSubscribeExecutor"),L=n("ULSystemExecutor"),T=n("ULUserExecutor"),x=n("ULVibrateExecutor"),P=function(){function e(){}return e.initSdk=function(e){var t={onModuleLoadComplete:function(i){i?e.callback&&e.callback({bSuccess:!1,errMsg:i}):e.callback&&e.callback({bSuccess:!0}),f.default.removeListener(t)}};f.default.registerListener(t),f.default.startWork()},e.getPackConfig=function(){return s.default.error("Method not implemented."),{}},e.setCoverStorageListener=function(){s.default.error("Method not implemented.")},e.getCloudStorage=function(e,t){u.default.getCloudStorage(e).then(function(e){t({bSuccess:!0,data:e})},function(e){t({bSuccess:!1,errMsg:e})})},e.setCloudStorage=function(e){u.default.setCloudStorage(e.key,e.data,e.bImmediately).then(function(){e.callback({bSuccess:!0})},function(t){e.callback({bSuccess:!1,errMsg:t})})},e.openAdv=function(e){var t=l.default.createAdvAD(e);return t.onShow(e.onShow),t.onClick(e.onClick),t.onReward(e.onReward),t.onClose(e.onClose),t.onError(function(){e.onError("\u5e7f\u544a\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!")}),t.show(e),{close:function(){t.close()}}},e.getAdvState=function(e){for(var t={},i=0,n=e.advIds;i<n.length;i++){var o=n[i],r=l.default.createAdvAD({advId:o});t[o]=r.isReady}e.callback&&e.callback({bSuccess:!0,states:t})},e.useCdkey=function(e){d.default.getUseCdk(e.cdkStr,e.gameVersion).then(function(t){e.callback({bSuccess:!1,data:t})}).catch(function(t){e.callback({bSuccess:!1,errMsg:t})})},e.loadRemoteConfig=function(e){var t={onCopDidMergeServer:function(){var i={copInfo:JSON.stringify(p.default.mergeCopObject),payInfo:{},channelUserId:T.default.uuid,customerServiceInfo:[],referenceBannerHeight:150,isSupportPay:_.default.isSupport,isSupportNormalShare:C.default.isSupport,isSupportRecordShare:S.default.isSupport,isSupportInstallShortcut:I.default.isSupport,isSupportSubscribe:w.default.isSupport,isSupportCdk:d.default.isSupport,isSupportVibrate:x.default.isSupport,isSupportFollowOfficialAccount:v.default.isSupport,isSupportFavoriteGuide:!1,isSupportOpenUrl:!1,isSupportInviteComment:!1,isSupportRankList:m.default.isSupport,isSupportJumpLeisureEnabled:!1,isSupportChannelRankList:c.default.isSupport,isSupportJoinGroup:g.default.isSupport,isSupportContentSecurityCheck:b.default.isSupport};e(i),p.default.removeListener(t)}};p.default.registerListener(t)},e.getLocalConfig=function(){var e=L.default.getSystemInfoSync();return{gameId:L.default.gameId,gameName:L.default.gameName,gameLanguage:a.GameLanguage.zhcn,platform:a.Platform.H5,channelInfo:{channelName:e.channelName,channelId:L.default.channelId},licenceInfo:h.default.getStringValue("s_sdk_licence_info"),appName:e.appName,ageLevelInfo:h.default.getStringValue("s_sdk_age_level_info"),screenInfo:{orientation:L.default.screenDirection==L.ULScreenDirection.Portrait?a.Orientation.portrait:a.Orientation.landscape,screenWidth:e.screenWidth,screenHeight:e.screenHeight},uuid:T.default.uuid,packageVersion:"",ulsdkVersion:p.default.copVersion,isStartGameByTouch:1==h.default.getNumberValue("n_sdk_start_game_by_touch",1),isSupportUserCloudStorage:u.default.isSupport}},e.exitGame=function(){f.default.exitGame()},e.setOnShowListener=function(e){f.default.registerListener({onGameShow:function(){e({})}})},e.setOnHideListener=function(e){f.default.registerListener({onGameHide:function(){e()}})},e.openPay=function(e){_.default.openPay(e.payId).then(function(){e.callback&&e.callback({bSuccess:!0})},function(t){e.callback&&e.callback({bSuccess:!1,errMsg:t})})},e.reOpenPay=function(){s.default.error("Method not implemented.")},e.setPrePayListener=function(e){_.default.registerListener({onReissuePayOrder:function(t,i){e({payId:i.payId,orderId:i.orderId})}})},e.deliverGoodsEvent=function(){s.default.error("Method not implemented.")},e.setResumeSoundListener=function(){},e.setPauseSoundListener=function(){},e.patchInfo=function(){return s.default.error("Method not implemented."),!1},e.setStorage=function(e){R.default.setStorageAsync(e.key,e.value).then(function(){e.callback&&e.callback({bSuccess:!0})},function(t){e.callback&&e.callback({bSuccess:!1,errMsg:t})})},e.setStorageSync=function(e){try{return R.default.setStorage(e.key,e.value),!0}catch(e){}return!1},e.getStorage=function(e,t){R.default.getStorageAsync(e).then(function(){t({bSuccess:!0})},function(e){t({bSuccess:!1,errMsg:e})})},e.getStorageSync=function(e){try{return R.default.getStorage(e)}catch(e){}return""},e.removeStorage=function(e,t){R.default.removeStorageAsync(e).then(function(){t({bSuccess:!0})},function(e){t({bSuccess:!1,errMsg:e})})},e.removeStorageSync=function(e){try{return R.default.removeStorage(e),!0}catch(e){}return!1},e.clearStorage=function(e){R.default.clearStorageAsync().then(function(){e({bSuccess:!0})},function(t){e({bSuccess:!1,errMsg:t})})},e.clearStorageSync=function(){try{return R.default.clearStorage(),!0}catch(e){}return!1},e.openPermissionSetting=function(e){e({bSuccess:!1,errMsg:"\u5c0f\u6e38\u620f\u4e0d\u652f\u6301"})},e.openInviteComment=function(e){e({bSuccess:!1,errMsg:"\u5c0f\u6e38\u620f\u4e0d\u652f\u6301"})},e.openUrl=function(e){e.callback({bSuccess:!1,errMsg:"\u5c0f\u6e38\u620f\u4e0d\u652f\u6301"})},e.openShare=function(e){C.default.share().then(function(){e({bSuccess:!0})},function(t){e({bSuccess:!1,errMsg:t})})},e.jumpLeisureSubject=function(e){e({bSuccess:!1,errMsg:"\u5c0f\u6e38\u620f\u4e0d\u652f\u6301"})},e.getSubscribeState=function(e){w.default.getSubscribeState(e.subscribeId).then(function(t){e.callback({bSuccess:!0,isSubscribe:t})},function(t){e.callback({bSuccess:!1,errMsg:t})})},e.addSubscribe=function(e){w.default.addSubscribe(e.subscribeId).then(function(){e.callback({bSuccess:!0})},function(t){e.callback({bSuccess:!1,errMsg:t})})},e.jumpToShareVideoView=function(){s.default.error("Method not implemented.")},e.getFollowOfficialAccountState=function(e){v.default.checkState().then(function(t){e({bSuccess:!0,state:t?1:2})},function(t){e({bSuccess:!1,errMsg:t,state:3})})},e.followOfficialAccount=function(e){v.default.follow().then(function(){e({bSuccess:!0,state:1})},function(t){e({bSuccess:!1,errMsg:t,state:3})})},e.phoneVibrate=function(e){e.type==a.PhoneVibrateType.long?x.default.vibrateLong():x.default.vibrateShort()},e.joinGroup=function(e){g.default.joinGroup().then(function(){e({bSuccess:!0})},function(t){e({bSuccess:!1,errMsg:t})})},e.setCheckDebugWhiteUserListener=function(e){T.default.registerListener({onVerifyWhiteUser:function(t){e({isWhiteUser:t})}})},e.getShortcutState=function(e){I.default.isInstall().then(function(t){e({bSuccess:!0,state:t?3:1})},function(){e({bSuccess:!1,state:2})})},e.installShortcut=function(e){I.default.install().then(function(){e({bSuccess:!0})},function(t){e({bSuccess:!1,errMsg:t})})},e.setAppShareListener=function(){s.default.error("Method not implemented.")},e.getChannelUserInfo=function(e){T.default.getUserInfo().then(function(t){var i=r({bSuccess:!0},t);e(i)},function(t){e({bSuccess:!1,errMsg:t})})},e.addGameToMyFavorite=function(){s.default.error("Method not implemented.")},e.getRecorder=function(){},e.shareGameVideo=function(){},e.setRankData=function(e){s.default.error("Method not implemented."),c.default.setImRankData({dataType:e.dataType,value:e.value,priority:e.priority||0}).then(function(){e.callback&&e.callback({bSuccess:!0})},function(t){e.callback&&e.callback({bSuccess:!1,errMsg:t})})},e.getRankDataList=function(e){c.default.getImRankList({rankType:e.rankType.toString(),dataType:e.dataType,relationType:(e.relationType||"default").toString(),suffix:e.suffix,rankTitle:e.rankTitle}).then(function(){e.callback&&e.callback({bSuccess:!0})},function(t){e.callback&&e.callback({bSuccess:!1,errMsg:t})})},e.login=function(e){T.default.getLoginObjectAsync().then(function(t){e({bSuccess:!0,loginData:{gameId:L.default.gameId,channel:L.default.channelId,openId:t.openId,token:t.token}})},function(t){e({bSuccess:!1,errMsg:t})})},e.setClearStorageListener=function(e){f.default.registerListener({onResetGameSave:function(){e()}})},e.wipeAccount=function(e){e({bSuccess:!1,errMsg:"\u5c0f\u6e38\u620f\u4e0d\u652f\u6301"})},e.getPrivacySetting=function(){for(var e=[],t=0,i=y.default.privacyPolicySetting();t<i.length;t++){var n=i[t];e.push(n.name)}return e},e.showPrivacy=function(e){y.default.showPrivacyPolicy(e.name).then(function(){e.callback&&e.callback({bSuccess:!0})},function(t){e.callback&&e.callback({bSuccess:!1,errMsg:t})})},e.openAdvancedSetting=function(e){L.default.openAdvancedSetting().then(function(){e&&e({bSuccess:!0})},function(t){e&&e({bSuccess:!1,errMsg:t})})},e.setJumpNewGuideListener=function(e){f.default.registerListener({onSkipNoviceGuide:function(){e()}})},e.setChangePatchInfoListener=function(){s.default.error("Method not implemented.")},e.checkNetwork=function(e){L.default.checkNetwork().then(function(){e({bSuccess:!0})},function(t){e({bSuccess:!1,errMsg:t})})},e.getServerTime=function(e){L.default.getServerTime().then(function(t){e({bSuccess:!0,serverTime:t})},function(t){e({bSuccess:!1,errMsg:t,serverTime:NaN})})},e.getUserNumInRank=function(e){m.default.getRankNum(e.rankIds,e.isLast).then(function(t){e.callback({bSuccess:!0,info:t})},function(t){e.callback({bSuccess:!1,errMsg:t})})},e.getRankPlayersInfoByUids=function(e){m.default.getPlayersInfoByUids(e.rankId,e.uids,e.isLast).then(function(t){e.callback({bSuccess:!0,data:t})},function(t){e.callback({bSuccess:!1,errMsg:t})})},e.getRankPlayersInfoByRankIds=function(e){m.default.getPlayersInfoByRankIds(e.rankId,e.rangeIds,e.isLast).then(function(t){e.callback({bSuccess:!0,userInfoList:t})},function(t){e.callback({bSuccess:!1,errMsg:t})})},e.updateRankPlayersData=function(e){m.default.updatePlayersData(e.rankId,e.userInfoList).then(function(){e.callback({bSuccess:!0})},function(t){e.callback({bSuccess:!1,errMsg:t})})},e.modifyRankScoreByArray=function(e){m.default.modifyUsersScore(e.rankId,e.uids,e.scores).then(function(){e.callback({bSuccess:!0})},function(t){e.callback({bSuccess:!1,errMsg:t})})},e.contentSecurityCheck=function(e){"text"==e.type?b.default.checkText(e.content).then(function(t){e.callback({bSuccess:!0,bPass:t})},function(t){e.callback({bSuccess:!1,errMsg:t})}):"image"==e.type?b.default.checkImage(e.content).then(function(t){e.callback({bSuccess:!0,bPass:t})},function(t){e.callback({bSuccess:!1,errMsg:t})}):e.callback({bSuccess:!1,errMsg:"\u9519\u8befType:"+e.type})},e.levelStart=function(e){return F.default.levelStart(e.levelName,e.reason,e.bNewGuide),!0},e.levelComplete=function(e){var t=[];return t.push(e.param1||""),t.push(e.param2||""),t.push(e.param3||""),t.push(e.param4||""),t.push(e.param5||""),F.default.levelComplete(e.levelName,e.bSuccess,e.reason,t,e.bNewGuide),!0},e.coinChange=function(e){return F.default.coinChange(e.coinType,e.changeNumber,e.reason,e.bNewGuide),!0},e.itemBuy=function(e){return F.default.itemBuy(e.goodsName,e.goodsNumber,e.reason,e.bNewGuide),!0},e.buyAction=function(e){return F.default.buyGoodsAction(e.produceName,e.reason,e.result,e.bNewGuide),!0},e.commonEvent=function(e){var t=[];return t.push(e.param1||""),t.push(e.param2||""),F.default.commonEvent(e.eventId.toString(),t,e.bNewGuide),!0},e.videoPointEvent=function(e){return F.default.advPointEvent(e.advId,e.status,e.bNewGuide),!0},e.TAG="ULSdkManager",e}();o.default=P,cc._RF.pop()},{}],ULSearchViewController:[function(e,t,i){"use strict";cc._RF.push(t,"ef2eax8SGBNaLsKkcncomY9","ULSearchViewController");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULColor"),l=o("ULFont"),d=o("ULRect"),c=o("ULScreen"),u=o("ULEventEnum"),h=o("ULButton"),p=o("ULLabel"),f=o("ULTableView"),g=o("ULTableViewStoredTextCell"),v=o("ULTextField"),_=o("ULView"),y=o("ULViewEnum"),m=o("ULViewController"),S=l.default.system(20),b=function(){function e(e){this.content="",this._height=NaN,this._width=0,this.isSelected=!1,this.content=e}return Object.defineProperty(e.prototype,"height",{get:function(){if(this._width<=0)return 0;if(isNaN(this._height)){var e=S.judgeTextLine(y.ULLineBreakMode.CharWrapping,this.content,this._width,100);this._height=24*e.length+20}return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{set:function(e){this._width!=e&&(this._width=e,this._height=NaN)},enumerable:!1,configurable:!0}),e.creatList=function(t){for(var i=[],n=0;n<t.length;n++){var o=t[n];i.push(new e(o))}return i},e}(),C=function(e){function t(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n=e.call(this)||this;return n.title="Search",n.isAllowSearch=!1,n.isAllowSelect=!1,n._dataSource=[],n._trimDataSource=[],n._selecteNum=0,n._onSelectDidChangeHandle=null,n._titleLabel=null,n._exitButton=null,n._searchTextField=null,n._searchButton=null,n._tableView=null,n._font=l.default.system(20),n.isAllowSearch=t,n.isAllowSelect=i,n}return a(t,e),Object.defineProperty(t.prototype,"selecteNum",{get:function(){return this._selecteNum},set:function(e){if(this._selecteNum!=e){this._selecteNum=e;var t=this._dataSource[e];t&&(t.isSelected=!0),this._onSelectDidChangeHandle&&this._onSelectDidChangeHandle(e)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trimDataSource",{get:function(){return this.isAllowSearch&&this._searchTextField&&this._searchTextField.text.length>0?this._trimDataSource:this._dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titileLabel",{get:function(){return this._titleLabel||(this._titleLabel=new p.default,this._titleLabel.font=l.default.boldSystem(22),this._titleLabel.textAlignment=y.ULTextAligment.Center,this._titleLabel.text=this.title),this._titleLabel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exitButton",{get:function(){var e=this;return this._exitButton||(this._exitButton=new h.default,this._exitButton.setTitleForState("X",u.ULControlState.Normal),this._exitButton.font=l.default.boldSystem(24),this._exitButton.registerControlEvent(u.ULControlEvents.TouchUpInside,function(){e.popViewController()})),this._exitButton},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchTextField",{get:function(){return this._searchTextField||(this._searchTextField=new v.default,this._searchTextField.textAlignment=y.ULTextAligment.Center,this._searchTextField.font=l.default.boldSystem(20)),this._searchTextField},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchButton",{get:function(){var e=this;return this._searchButton||(this._searchButton=new h.default,this._searchButton.setTitleForState("\u641c\u7d22",u.ULControlState.Normal),this._searchButton.font=l.default.boldSystem(24),this._searchButton.registerControlEvent(u.ULControlEvents.TouchUpInside,function(){e.searchTextDidChange(e._searchTextField.text)})),this._searchButton},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tableView",{get:function(){return this._tableView||(this._tableView=new f.default(d.default.Zero,f.ULTableViewStyle.Group),this._tableView.registerCell(g.default,"ULTableViewStoredTextCell"),this._tableView.backgroundColor=s.default.Clear,this._tableView.delegate=this,this._tableView.dataSource=this),this._tableView},enumerable:!1,configurable:!0}),t.prototype.viewDidLoad=function(){var e=.8*Math.min(c.default.width,c.default.height),t=.6*c.default.height,i=(c.default.width-e)/2,n=(c.default.height-t)/2;t=c.default.height>c.default.width?t:.9*c.default.width;var o=new _.default(d.default.Init(i,n,e,t));o.backgroundColor=s.default.RGB(200,200,200),this.view.addSubView(o),this.isAllowSearch?(this.searchTextField.frame=d.default.Init(0,0,e-90,60),this.searchButton.frame=d.default.Init(this.searchTextField.frame.maxX,0,90,60),this.tableView.frame=d.default.Init(10,this.searchTextField.frame.maxY+10,e-20,t-80),o.addSubView(this.searchTextField),o.addSubView(this.searchButton),o.addSubView(this.tableView)):(this.titileLabel.frame=d.default.Init(0,0,e-60,60),this.exitButton.frame=d.default.Init(this.titileLabel.frame.maxX,0,60,60),this.tableView.frame=d.default.Init(10,this.titileLabel.frame.maxY+10,e-20,t-80),o.addSubView(this.titileLabel),o.addSubView(this.exitButton),o.addSubView(this.tableView)),this.tableView.reloadData()},t.prototype.searchTextDidChange=function(e){if(this._trimDataSource=[],e.length>0)for(var t=0;t<this._dataSource.length;t++){var i=this._dataSource[t];i.content.indexOf(e)>-1&&this._trimDataSource.push(i)}this.tableView.reloadData()},t.prototype.sendMessageList=function(e){if(!(e.length<=0)){var t=b.creatList(e);this._dataSource=this._dataSource.concat(t);var i=this._searchTextField?this._searchTextField.text:"",n=[];if(this.isAllowSearch&&i.length>0)for(var o=0;o<t.length;o++){var r=t[o];r.content.indexOf(i)>-1&&(n.push(this._trimDataSource.length),this._trimDataSource.push(r))}else for(o=0;o<t.length;o++)n.push(this._dataSource.length-1-o);this.tableView.insertSections(n)}},t.prototype.sendMessage=function(e){this.sendMessageList([e])},t.prototype.onSelectDidChange=function(e){this._onSelectDidChangeHandle=e},t.prototype.heightForCell=function(e,t){var i=this.trimDataSource[t.section];return i.width=e.bounds.width-20,i.height},t.prototype.heightForFooter=function(){return 10},t.prototype.didSelectRowAtIndexPath=function(e,t){if(this.isAllowSelect){var i=e.cellForRowsIndexPath(t);i&&(i.backgroundColor=s.default.Gray),(i=e.cellForRowsIndexPath(new d.ULIndexPath(this.selecteNum,0)))&&(i.backgroundColor=s.default.White);var n=this.trimDataSource[this.selecteNum];n.isSelected=!1,(n=this.trimDataSource[t.section]).isSelected=!0;var o=this._dataSource.indexOf(n);this.selecteNum=o}},t.prototype.numberOfSectionsInTableView=function(){return this.trimDataSource.length},t.prototype.numberOfRowsInSection=function(){return 1},t.prototype.cellForRowAtIndexPath=function(e,t){var i=e.dequeueReusableCell("ULTableViewStoredTextCell");0!=i.titleLabel.numberOfLine&&(i.titleLabel.numberOfLine=0);var n=this.trimDataSource[t.section];return this.isAllowSelect&&n.isSelected?i.backgroundColor=s.default.Gray:i.backgroundColor=s.default.White,i.titleLabel.font=this._font,i.titleLabel.text=n.content,i},t.prototype.touchesBegan=function(t,i){this.isAllowSearch?this.popViewController():e.prototype.touchesBegan.call(this,t,i)},t}(m.default);r.default=C,cc._RF.pop()},{}],ULSecurityCheckExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"b3f76tXd9dMfYX7pvRAIyXS","ULSecurityCheckExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULBaseExecutor"),l=o("ULConfigExecutor"),d=o("ULTipsExecutor"),c=function(e){function t(){var t=e.call(this)||this;return t.hadCheck=!1,t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.sdkSwitch=function(){return 1==l.default.getNumberValue("n_sdk_security_check_mode",1)},t.prototype.addListener=function(){var e=this;d.default.registerItem({getGoldfingerTipsItem:function(){return[{name:"\u662f\u5426\u6b63\u786e\u8c03\u7528\u5185\u5bb9\u5b89\u5168\u68c0\u6d4b\u63a5\u53e3:",value:e.hadCheck?"\u662f":"\u5426"}]}})},t.prototype.checkText=function(e,t){void 0===e&&(e=void 0);var i=this;return this.executeAsync({moduleName:e,type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(e){return e.securityCheckText(t)}}).then(function(e){return i.hadCheck=!0,e})},t.prototype.checkImage=function(e,t){void 0===e&&(e=void 0);var i=this;return this.executeAsync({moduleName:e,type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(e){return e.securityCheckImage(t)}}).then(function(e){return i.hadCheck=!0,e})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.checkText=function(e){return t.instance.checkText(void 0,e)},t.checkImage=function(e){return t.instance.checkImage(void 0,e)},t}(s.default);r.default=c,cc._RF.pop()},{}],ULSettingViewController:[function(e,t,i){"use strict";cc._RF.push(t,"efea8a1AANA26dJPU3XkTCA","ULSettingViewController");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULKitPop"),l=o("ULColor"),d=o("ULFont"),c=o("ULRect"),u=o("ULEventEnum"),h=o("ULButton"),p=o("ULLabel"),f=o("ULStatckView"),g=o("ULViewEnum"),v=o("ULViewController"),_=o("ULGameExecutor"),y=o("ULPrivacyPolicyExecutor"),m=o("ULStorageExecutor"),S=function(e){function t(){var t=e.call(this)||this;return t._stackView=null,t._titleLabel=null,t}return a(t,e),Object.defineProperty(t.prototype,"stackView",{get:function(){if(!this._stackView){var e=new f.default;e.spacing=10,e.axis=f.ULStatckViewAxis.Vertical,e.edgeInsets=new c.ULEdgeInsets(20,20,20,20),e.backgroundColor=l.default.White,e.alignment=f.ULStatckViewAlignment.Fill,e.dstribution=f.ULStatckViewDistribution.Fill,e.allowEventPass=!1,this._stackView=e}return this._stackView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleLabel",{get:function(){if(!this._titleLabel){var e=new p.default;e.font=d.default.boldSystem(24),e.textAlignment=g.ULTextAligment.Center,e.text="\u9ad8\u7ea7\u8bbe\u7f6e",e.textColor=l.default.Black,this._titleLabel=e}return this._titleLabel},enumerable:!1,configurable:!0}),t.prototype.viewDidLoad=function(){this.initWithUserInterface(),this.autoLayoutSetting()},t.prototype.initWithUserInterface=function(){this.view.backgroundColor=l.default.RGBA(0,0,0,.5);var e=[{name:"\u6ce8\u9500\u8d26\u6237",handle:function(){s.default.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u6ce8\u9500\u8d26\u6237\u4f1a\u5bfc\u81f4\u8be5\u8d26\u6237\u4e0d\u53ef\u7528",actions:[{name:"\u77e5\u9053\u4e86",handle:function(){m.default.clearStorage(),_.default.exitGame(),m.default.clearStorage()}},{name:"\u518d\u60f3\u60f3",handle:function(){}}]})}}];if(y.default.isSupport){e.push({name:"\u9690\u79c1\u653f\u7b56\u754c\u9762",handle:function(){y.default.openPrivacyPolicySetting().catch(function(e){s.default.showToast({title:e})})}});for(var t=function(t){e.push({name:"\u300a"+t.name+"\u300b",handle:function(){y.default.showPrivacyPolicy(t.name)}})},i=0,n=y.default.privacyPolicySetting();i<n.length;i++)t(n[i])}this.view.addSubView(this.stackView),this.stackView.addSubView(this.titleLabel);for(var o=function(t){var i=e[t],n=new h.default;n.titleEdgeInsets=new c.ULEdgeInsets(20,10,20,10),n.font=d.default.boldSystem(20),n.setTitleForState(i.name,u.ULControlState.Normal),n.registerControlEvent(u.ULControlEvents.TouchUpInside,function(){i.handle()}),r.stackView.addSubView(n)},r=this,a=0;a<e.length;a++)o(a)},t.prototype.autoLayoutSetting=function(){var e=this;this.titleLabel.ul_makeConstraints(function(e){e.height.equalTo(60)}),this.stackView.ul_makeConstraints(function(t){t.width.equalTo(250),t.centerX.and.centerY.equalTo(e.view)})},t.prototype.touchesBegan=function(){this.popViewController()},t}(v.default);r.default=S,cc._RF.pop()},{}],ULShareExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"31c4cSsvhVLu5mQyfNykfRc","ULShareExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULLog"),l=o("ULTools"),d=o("ULBaseExecutor"),c=o("ULConfigExecutor"),u=o("ULGameExecutor"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onShareSuccess=function(e,t){this.executeConcurrencyAll(function(i){i.onShareSuccess&&i.onShareSuccess(e,t)}).catch(function(e){s.default.log("ULShareListenerExecutor onShareSuccess err:",e.stack),u.default.reportErrMsg("ULShareListenerExecutor onShareSuccess",e.stack)})},t.prototype.onShareFail=function(e,t){this.executeConcurrencyAll(function(i){i.onShareFail&&i.onShareFail(e,t)}).catch(function(e){s.default.log("ULShareListenerExecutor onShareFail err:",e.stack),u.default.reportErrMsg("ULShareListenerExecutor onShareFail",e.stack)})},t}(d.default),p=function(e){function t(){var t=e.call(this)||this;return t._listenerExecutor=new h,t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.sdkSwitch=function(){return 1==c.default.getNumberValue("n_sdk_share_mode",1)},t.prototype.shareHanle=function(e,t){void 0===t&&(t=void 0);var i=this,n=e.shareSetting,o=n[l.default.random(n.length)-1];return o.title=t||o.title,new Promise(function(t,n){e.shareAppMessage(o).then(function(){t(),i._listenerExecutor.onShareSuccess(e.moduleName,o)}).catch(function(t){n(t),i._listenerExecutor.onShareFail(e.moduleName,o)})})},t.prototype.registerItem=function(e){var t=this;if(!this.isExist(e)&&(this.register(e),e.monitorOnShareAppMessage)){var i=null;e.monitorOnShareAppMessage(function(){var t=e.shareSetting,n=l.default.random(t.length)-1;return i=t[n]},function(){t._listenerExecutor.onShareSuccess(e.moduleName,i)},function(){t._listenerExecutor.onShareFail(e.moduleName,i)})}},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.registerItem(e)},t.removeItem=function(e){t.instance.unRegister(e)},t.registerListener=function(e){t.instance._listenerExecutor.register(e)},t.removeListener=function(e){t.instance._listenerExecutor.unRegister(e)},t.share=function(e){void 0===e&&(e=null);var i=t.instance;return i.executeAsync({type:d.ULBaseExecutionEnum.ChainFlashback,endType:d.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(t){return i.shareHanle(t,e)}})},t}(d.default);r.default=p,cc._RF.pop()},{}],ULShortcutExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"294bepXuOdE05GTnsYXDrXy","ULShortcutExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULKitPop"),l=o("ULColor"),d=o("ULFont"),c=o("ULRect"),u=o("ULEventEnum"),h=o("ULButton"),p=o("ULMenuView"),f=o("ULView"),g=o("ULLog"),v=o("ULBaseExecutor"),_=o("ULConfigExecutor"),y=o("ULGameExecutor"),m=o("ULGoldfingerExecutor"),S=o("ULStorageExecutor"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onInstallShortcut=function(){this.executeConcurrencyAll(function(e){e.onInstallShortcut&&e.onInstallShortcut()}).catch(function(e){g.default.log("ULShortcutListenerExecutor onInstallShortcut err:",e.stack),y.default.reportErrMsg("ULShortcutListenerExecutor onInstallShortcut",e.stack)})},t}(v.default),C=function(e){function t(){var t=e.call(this)||this;return t._listenerExecutor=new b,t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hadInstall",{get:function(){return"1"==S.default.getStorage("ulsdk_installShortcut")},set:function(e){S.default.setStorage("ulsdk_installShortcut",e?"1":"0")},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){m.default.registerItem(this)},t.prototype.sdkSwitch=function(){return 1==_.default.getNumberValue("n_sdk_installShortcut_mode",1)},t.prototype.isInstall=function(e){return void 0===e&&(e=void 0),t.instance.executeAsync({moduleName:e,type:v.ULBaseExecutionEnum.ChainFlashback,endType:v.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(e){return e.checkShortCutState?e.checkShortCutState():Promise.resolve(t.instance.hadInstall)}})},t.prototype.install=function(e){void 0===e&&(e=void 0);var i=t.instance;return new Promise(function(t,n){i.executeSync({moduleName:e,type:v.ULBaseExecutionEnum.ChainFlashback,endType:v.ULBaseExecutionEndEnum.One,handle:function(e){return e.installShortcut()}}).then(function(){i.hadInstall=!0,t(),i._listenerExecutor.onInstallShortcut()},function(e){n(e)})})},t.prototype.goldfingerView=function(e){var i=this;return new m.ULGoldfingerStackView("\u6dfb\u52a0\u684c\u9762\u7cfb\u7edf",e,function(n){var o=[{name:"\u6dfb\u52a0\u684c\u9762\u5f00\u5173:",value:t.isSupport}],r=new f.default(c.default.Init(0,0,e,40));r.backgroundColor=l.default.Clear;var a=["\u9ed8\u8ba4"].concat(i.getAllRegisterModuleName()),g=new p.default(c.default.Init(0,0,160,40));g.dataSource=a,g.font=d.default.boldSystem(16);var v=new h.default(c.default.Init(0,0,160,40));v.center=new c.ULPoint({x:e/2,y:v.center.y}),v.setTitleForState("\u662f\u5426\u6dfb\u52a0",u.ULControlState.Normal),v.font=d.default.boldSystem(20),n.addSubView(v),v.registerControlEvent(u.ULControlEvents.TouchUpInside,function(){i.isInstall(0==g.selectedNum?void 0:a[g.selectedNum]).then(function(e){s.default.showToast({title:e?"\u5df2\u6dfb\u52a0":"\u672a\u6dfb\u52a0"})},function(e){s.default.showToast({title:"\u6267\u884c\u9519\u8bef\n errMsg:"+e})})});var _=new h.default(c.default.Init(e-160,0,160,40));_.setTitleForState("\u6dfb\u52a0\u684c\u9762",u.ULControlState.Normal),_.font=d.default.boldSystem(20),_.registerControlEvent(u.ULControlEvents.TouchUpInside,function(){var e=s.default.showInformationFlow({title:"\u6dfb\u52a0\u684c\u9762\u6d4b\u8bd5\u6d41\u7a0b"}),t=a[g.selectedNum];e.sendMessage("\u6a21\u5757:"+t+" "),i.install(0==g.selectedNum?void 0:t).then(function(){e.sendMessage("\u6dfb\u52a0\u6210\u529f")}).catch(function(t){e.sendMessage("\u6dfb\u52a0\u5931\u8d25\n errMsg:"+t)})}),r.addSubView(g),r.addSubView(v),r.addSubView(_),n.addStackForSwitchs(o),n.addStackView(r)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.removeItem=function(e){t.instance.unRegister(e)},t.registerListener=function(e){t.instance._listenerExecutor.register(e)},t.removeListener=function(e){t.instance._listenerExecutor.unRegister(e)},t.isInstall=function(){return t.instance.isInstall()},t.install=function(){return t.instance.install()},t}(v.default);r.default=C,cc._RF.pop()},{}],ULStatckView:[function(e,t,i){"use strict";cc._RF.push(t,"1e1308C1qxM4a+VZ2FYnVgV","ULStatckView");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULStatckViewDistribution=r.ULStatckViewAlignment=r.ULStatckViewAxis=void 0;var s,l,d,c=o("ULColor"),u=o("ULKiwiConstraint"),h=o("ULLayout"),p=o("ULRect"),f=o("ULView");(function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"})(s=r.ULStatckViewAxis||(r.ULStatckViewAxis={})),function(e){e[e.Fill=0]="Fill",e[e.Top=1]="Top",e[e.Bottom=2]="Bottom",e[e.Center=3]="Center",e[e.Left=4]="Left",e[e.Right=5]="Right"}(l=r.ULStatckViewAlignment||(r.ULStatckViewAlignment={})),function(e){e[e.Fill=0]="Fill",e[e.FillEqual=1]="FillEqual"}(d=r.ULStatckViewDistribution||(r.ULStatckViewDistribution={}));var g=function(e){function t(t){void 0===t&&(t=p.default.Zero);var i=e.call(this)||this;return i._axis=s.Horizontal,i._alignment=l.Fill,i._dstribution=d.Fill,i._spacing=0,i._edgeInsets=new p.ULEdgeInsets(0,0,0,0),i.backgroundColor=c.default.Clear,i}return a(t,e),Object.defineProperty(t.prototype,"axis",{get:function(){return this._axis},set:function(e){this._axis!=e&&(this._axis=e,this.customLayoutWillChange=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this._alignment},set:function(e){this._alignment!=e&&(this._alignment=e,this.customLayoutWillChange=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dstribution",{get:function(){return this._dstribution},set:function(e){this._dstribution!=e&&(this._dstribution=e,this.customLayoutWillChange=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this._spacing},set:function(e){this._spacing!=e&&(this._spacing=e,this.customLayoutWillChange=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"edgeInsets",{get:function(){return this._edgeInsets},set:function(e){this._edgeInsets=e,this.customLayoutWillChange=!0},enumerable:!1,configurable:!0}),t.prototype.addSubView=function(t){t!=this&&(e.prototype.addSubView.call(this,t),this.customLayoutWillChange=!0)},t.prototype.removeSubView=function(t){e.prototype.removeSubView.call(this,t),this.customLayoutWillChange=!0},t.prototype.getCustomConstraints=function(){return e.prototype.getCustomConstraints.call(this).concat(this.axis==s.Horizontal?this.getHorizontalAdapteConstraints():this.getVerticalAdapteConstraints())},t.prototype.ffectiveSubView=function(){for(var e=[],t=0;t<this.subViews.length;t++){var i=this.subViews[t];i.hidden||e.push(i)}return e},t.prototype.getHorizontalAdapteConstraints=function(){for(var e=[],t=this.ffectiveSubView(),i=0;i<t.length;i++){var n=(s=t[i]).layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Left),o=void 0;if(0==i)o=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Left).plus(this.edgeInsets.left),e.push(new u.ULKiwiConstraint(n,u.ULKiwiOperator.Eq,o));else if(o=t[i-1].layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Right).plus(this.spacing),e.push(new u.ULKiwiConstraint(n,u.ULKiwiOperator.Eq,o)),this.dstribution==d.FillEqual){var r=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Width),a=t[i-1].layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Width);e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a))}i==t.length-1&&(r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Right),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Right).plus(this.edgeInsets.right),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a)))}for(i=0;i<t.length;i++){var s=t[i];switch(this.alignment){case l.Top:r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Top).plus(this.edgeInsets.top),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Top),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a)),r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Height),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Height).plus(this.edgeInsets.top+this.edgeInsets.bottom),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Ge,a));break;case l.Center:r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.CenterY),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.CenterY),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a)),r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Height),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Height).plus(this.edgeInsets.top+this.edgeInsets.bottom),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Ge,a));break;case l.Bottom:r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Bottom),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Bottom).plus(this.edgeInsets.bottom),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a)),r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Height),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Height).plus(this.edgeInsets.top+this.edgeInsets.bottom),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Ge,a));break;default:r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Top).plus(this.edgeInsets.top),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Top),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a)),r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Bottom),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Bottom).plus(this.edgeInsets.bottom),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a))}}return e},t.prototype.getVerticalAdapteConstraints=function(){for(var e=[],t=this.ffectiveSubView(),i=0;i<t.length;i++){var n=(s=t[i]).layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Top);if(0==i){var o=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Top).plus(this.edgeInsets.top);e.push(new u.ULKiwiConstraint(n,u.ULKiwiOperator.Eq,o))}else if(o=t[i-1].layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Bottom).plus(this.spacing),e.push(new u.ULKiwiConstraint(n,u.ULKiwiOperator.Eq,o)),this.dstribution==d.FillEqual){var r=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Height),a=t[i-1].layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Height);e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a))}i==t.length-1&&(r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Bottom),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Bottom).plus(this.edgeInsets.bottom),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a)))}for(i=0;i<t.length;i++){var s=t[i];switch(this.alignment){case l.Left:r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Left).plus(this.edgeInsets.left),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Left),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a)),r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Width),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Width).plus(this.edgeInsets.left+this.edgeInsets.right),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Ge,a));break;case l.Center:r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.CenterX),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.CenterX),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a)),r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Width),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Width).plus(this.edgeInsets.left+this.edgeInsets.right),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Ge,a));break;case l.Right:r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Right),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Right).plus(this.edgeInsets.right),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a)),r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Width),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Width).plus(this.edgeInsets.left+this.edgeInsets.right),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Ge,a));break;default:r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Left).plus(this.edgeInsets.left),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Left),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a)),r=this.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Right),a=s.layoutRect.getVariableOrConstraintItem(h.ULLayoutAttribute.Right).plus(this.edgeInsets.right),e.push(new u.ULKiwiConstraint(r,u.ULKiwiOperator.Eq,a))}}return e},t}(f.default);r.default=g,cc._RF.pop()},{}],ULStatisExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"675baSemRFJfrNvyIyeNXf+","ULStatisExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULStatisticsEventId=void 0;var s=o("ULBaseExecutor"),l=o("ULLog"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.levelStart=function(e,t,i){void 0===i&&(i=!1),this.reportHandle("levelStart",function(n){n.levelStart&&n.levelStart(e,t,i)})},t.levelComplete=function(e,t,i,n,o){void 0===n&&(n=[]),void 0===o&&(o=!1),this.reportHandle("levelComplete",function(r){r.levelComplete&&r.levelComplete(e,t,i,n,o)})},t.coinChange=function(e,t,i,n){void 0===n&&(n=!1),this.reportHandle("coinChange",function(o){o.coinChange&&o.coinChange(e,t,i,n)})},t.itemBuy=function(e,t,i,n){void 0===n&&(n=!1),this.reportHandle("itemBuy",function(o){o.itemBuy&&o.itemBuy(e,t,i,n)})},t.buyGoodsAction=function(e,t,i,n){void 0===n&&(n=!1),this.reportHandle("buyGoodsAction",function(o){o.buyGoodsAction&&o.buyGoodsAction(e,t,i,n)})},t.advPointEvent=function(e,t,i){void 0===i&&(i=!1),this.reportHandle("advPointEvent",function(n){n.advPointEvent&&n.advPointEvent(e,t,i)})},t.commonEvent=function(e,t,i){void 0===i&&(i=!1),this.reportHandle("commonEvent",function(n){n.commonEvent&&n.commonEvent(e,t,i)})},t.reportCopMsg=function(e,t){this.reportHandle("reportCopMsg",function(i){i.reportCopMsg&&i.reportCopMsg(e,t)})},t.reportAdvLog=function(e,t){this.reportHandle("reportAdvLog",function(i){i.reportAdvLog&&i.reportAdvLog(e,t)})},t.reportHandle=function(e,i){t.instance.executeConcurrencyAll(function(e){i(e)}).catch(function(t){l.default.log("ULStatisExecutor "+e+" err:",t.stack)})},t}(s.default);r.default=d;var c=function(){function e(){}return e.OPEN_SHARE=100,e.CLICK_SHARE=101,e.ADD_SUBSCRIBLE=102,e.CLICK_SUBSCRIBLE=103,e.CLICK_MORE_GAME_ICON_SINGLE=104,e.CLICK_MORE_GAME_ICON_REWARD=105,e.CLICK_MORE_GAME_ICON_LIST=106,e.CDK=107,e.CLICK_MORE_GAME_CHANNEL_SYSTEM_BUTTON=108,e.NATIVE_ADV_CLICK_EVent=109,e.WEIXIN_TOUFANG=200,e.IOS_USERID_EVENT=201,e.REAL_NAME_AUTHENTICATION=202,e.LOGIN_EVENT=203,e.GAME_PACK_EVENT=204,e.INSTALLATION_SOURCE=205,e.NATIVE_ADV_DATA_UPLOAD_EVENT=888,e}();r.ULStatisticsEventId=c,cc._RF.pop()},{}],ULStatisLog:[function(e,t,i){"use strict";cc._RF.push(t,"44710WMjExGGZa1FrHEFWR8","ULStatisLog");var n=i,o=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(n,"__esModule",{value:!0});var r=console,a=function(){function e(){}return e.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.allowConsole&&r.info.apply(r,o(["ULStatis:"],t))},e.log=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.allowConsole&&r.log.apply(r,o(["ULStatis:"],t))},e.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.allowConsole&&r.warn.apply(r,o(["ULStatis:"],t))},e.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.allowConsole&&r.error.apply(r,o(["ULStatis:"],t))},e.allowConsole=!1,e}();n.default=a,cc._RF.pop()},{}],ULStatisManager:[function(e,t,i){"use strict";cc._RF.push(t,"78826DrP5hJzJ6eGuY7ZPzH","ULStatisManager");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULStatisReport"),a=n("ULStatisStorage"),s=n("ULStatisLog"),l=n("ULTools"),d=function(){function e(){}return Object.defineProperty(e,"debug",{get:function(){return s.default.allowConsole},set:function(e){s.default.allowConsole=!!e},enumerable:!1,configurable:!0}),e.initSDK=function(e,t,i,n,o,a){return void 0===o&&(o=void 0),void 0===a&&(a=void 0),r.default.getInstance().initSDK(e,t,i,n,o,a)},e.gameShow=function(){r.default.getInstance().onGameShow()},e.gameHide=function(){r.default.getInstance().onGameHide()},e.getChannelItem=function(e){a.default.getItemCallback=e},e.setChannelItem=function(e){a.default.setItemCallback=e},e.levelStart=function(e,t,i){return void 0===i&&(i=!1),r.default.getInstance().postMegadata(["levelStart",e,t,i?"1":"0"])},e.levelComplete=function(e,t,i,n,o){void 0===n&&(n=[]),void 0===o&&(o=!1);var a=["levelComplete",e,t?"1":"0",i],s=n.concat(["","","","",""]);return(a=a.concat(s.slice(0,5))).push(o?"1":"0"),r.default.getInstance().postMegadata(a)},e.coinChange=function(e,t,i,n){return void 0===n&&(n=!1),r.default.getInstance().postMegadata(["coinChange",e,t>0?"1":"0",Math.abs(t).toString(),i,n?"1":"0"])},e.itemBuy=function(e,t,i,n){return void 0===n&&(n=!1),r.default.getInstance().postMegadata(["itemBuy",e,t.toString(),i,n?"1":"0"])},e.buyGoodsAction=function(e,t,i,n){return void 0===n&&(n=!1),0!==i&&1!==i&&2!==i?(s.default.log("result \u9519\u8bef \uff08\u5c55\u793a[0] \u3001\u8d2d\u4e70[1]\u3001\u5230\u8d26[2]\uff09"),!1):r.default.getInstance().postMegadata(["buyAction",t,e,i.toString(),n?"1":"0"])},e.advPointEvent=function(e,t,i){return void 0===i&&(i=!1),1!==t&&2!==t?(s.default.log("state \u9519\u8bef \uff081 \u5c55\u793a\uff0c 2 \u70b9\u51fb\uff09"),!1):r.default.getInstance().postMegadata(["videoPointEvent",e,t.toString(),i?"1":"0"])},e.commonEvent=function(e,t,i){void 0===i&&(i=!1);var n=["commonEvent",e],o=t.concat(["",""]);return o[0]||(o[0]="0"),(n=n.concat(o.slice(0,2))).push(i?"1":"0"),r.default.getInstance().postMegadata(n)},e.reportCopMsg=function(e,t){return t=(t=t||"").length>50?t.substring(0,50):t,r.default.getInstance().postMegadata(["copInfo","coprequest",e?"success":"filed",e?"":t,e?t:""])},e.reportAdvLog=function(e,t){var i=l.default.getStringValue(t,"advType"),n=l.default.getStringValue(t,"advId");return r.default.getInstance().postMegadata(["advInfo",l.default.getStringValue(t,"advertiser"),this.oldAdvTypeSetting[i]||i,e,l.default.getStringValue(t,"failReason"),"",n,n,"",l.default.getStringValue(t,"arg"),l.default.getStringValue(t,"displayDuration"),"",l.default.getStringValue(t,"showCount")])},e.sdkVersion="v8.0",e.oldAdvTypeSetting={inter:"interstitial",embed:"embedded",interVideo:"fullscreen"},e}();o.default=d,"undefined"!=typeof window&&(window.ULStatisManager=d),cc._RF.pop()},{}],ULStatisReport:[function(e,t,i){"use strict";cc._RF.push(t,"1b809uHBRVL+7TvxW83fleJ","ULStatisReport");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.ULStatisTypeId=void 0;var r,a=n("ULStatisLog"),s=n("ULStatisManager"),l=n("ULStatisStorage"),d=n("ULStatisTimer"),c=n("ULStatisTools"),u={megadata_url:"https://megadatav7.ultralisk.cn/thirddatauploadv8",megadata_time_span:5,megadata_online_time_span:60,megadata_http_timeout:20,megadata_max_count:100};function h(e){switch(e){case r.startGame:return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16];case r.advInfo:return[0,1,2,7,8];case r.copInfo:return[0,1,2,4,5];case r.coinChange:return[0,1,2,7,8,9];case r.onlineTime:return[0,1,2,5,6];case r.commonEvent:return[0,1,2,6,7,8];case r.levelStart:return[0,1,2,5,6,7];case r.levelComplete:return[0,1,2,11,12,13,14];case r.itemBuy:case r.buyAction:return[0,1,2,6,7,8];case r.videoPointEvent:return[0,1,2,5,6,7];default:return null}}(function(e){e.startGame="1",e.advInfo="3",e.copInfo="4",e.coinChange="5",e.onlineTime="6",e.commonEvent="7",e.levelStart="8",e.levelComplete="9",e.itemBuy="10",e.buyAction="11",e.videoPointEvent="12"})(r=o.ULStatisTypeId||(o.ULStatisTypeId={}));var p=function(){function e(){this.initSuccess=!1,this.isGameShow=!1,this.isGameShowDate=null,this.lastRepotOnlineTime=null,this.levelStartMsgList={},this.cacheItems=[]}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.initSDK=function(e,t,i,n,o,r){return void 0===o&&(o=void 0),void 0===r&&(r=void 0),this.initSuccess||("string"==typeof e&&e?"string"==typeof t&&t?"string"==typeof i&&i?"string"==typeof n&&n?(this.appid=e,this.appsecret=t,this.channelid=i,this.gameVersion=n,r&&(u.megadata_url=r),this.initSuccess=!0,this.initWithUserInterface(o)):a.default.log("version \u6570\u636e\u9519\u8bef"):a.default.log("channelid \u6570\u636e\u9519\u8bef"):a.default.log("appsecret \u6570\u636e\u9519\u8bef"):a.default.log("appid \u6570\u636e\u9519\u8bef")),a.default.log("",this.initSuccess?"\u521d\u59cb\u5316\u6210\u529f":"\u521d\u59cb\u5316\u5931\u8d25"),this.initSuccess},e.prototype.onGameShow=function(){if(this.initSuccess&&!this.isGameShow){this.isGameShow=!0,this.isGameShowDate=new Date,this.lastRepotOnlineTime=this.isGameShowDate;var e=new Date;for(var t in this.levelStartMsgList)this.levelStartMsgList[t]=e}},e.prototype.onGameHide=function(){if(this.initSuccess&&this.isGameShow){for(var e in this.isGameShow=!1,this.levelStartMsgList)this.postMegadata(["levelComplete",e,"2","pause","","","","","","0"]);this.reportOnlineTime(),this.tryUploadToServer()}},e.prototype.reportOnlineTime=function(){var e=new Date,t=(e.getTime()-this.lastRepotOnlineTime.getTime())/1e3;t>0&&t<86400&&this.postMegadata(["onlineTime",c.default.formatDate(this.isGameShowDate,"yyyy-MM-dd HH:mm:ss"),Math.floor(t).toString()]),this.lastRepotOnlineTime=e},e.prototype.initWithUserInterface=function(e){if(this.isGameShow=!0,this.isGameShowDate=new Date,this.lastRepotOnlineTime=this.isGameShowDate,e)this.appUUid=e;else{var t="ULStatisManager_uuid";this.appUUid=l.default.getStorage(t),this.appUUid||(this.appUUid=c.default.createRandomUserId(),l.default.setStorage(t,this.appUUid))}this.loadRecord(),this.postMegadata(["startGame"]),d.default.callLoop(u.megadata_time_span,this.onTimerLoop.bind(this)),d.default.callLoop(u.megadata_online_time_span,this.reportOnlineTime.bind(this))},e.prototype.loadRecord=function(){var e,t=l.default.getStorage("ULStatisManager_record")||"{}";try{e=JSON.parse(t)}catch(t){e={}}this.cacheItems=e.cacheItems||[]},e.prototype.saveRecord=function(){var e={cacheItems:this.cacheItems||[]},t=JSON.stringify(e);l.default.setStorage("ULStatisManager_record",t)},e.prototype.onTimerLoop=function(){this.tryUploadToServer()},e.prototype.receiveStatisItem=function(e){this.cacheItems.push(e),this.isGameShow||this.saveRecord(),this.cacheItems.length>u.megadata_max_count&&this.tryUploadToServer()},e.prototype.tryUploadToServer=function(){},e.prototype.postMegadata=function(e){if(!this.initSuccess)return!1;if(!Array.isArray(e)||e.length<=0)return!1;for(var t=0,i=e;t<i.length;t++)if("string"!=typeof i[t])return a.default.log("\u6e38\u620f\u4e0a\u4f20\u7c7b\u578b\u9519\u8bef"),!1;var n=c.default.clone(e),o=n.shift(),l=r[o];if(l==r.commonEvent&&n.length&&this.appsecret){var d=Number(n[0]);if(!isNaN(d)&&d<1e3)return a.default.log("commonEventId:"+d+" \u4e0d\u53ef\u7528"),!1}var u=h(l);if(!u)return a.default.log("\u6ca1\u6709\u76f8\u5173\u7684\u7c7b\u578b"),!1;var p=[];switch(p.push(c.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")),p.push(this.appUUid+"_"+this.channelid),p.push(""),p.push(this.gameVersion),p.push(s.default.sdkVersion||""),p.push(this.channelid),l){case r.startGame:(p=p.slice(0,3)).push(""),p.push(""),p.push(""),p.push(this.appid),p.push(""),p.push(this.channelid),p.push(this.gameVersion),p.push(""),p.push("gameStart"),p.push(""),p.push("1.1.0"),p.push(""),p.push(""),p.push("");break;case r.copInfo:case r.advInfo:case r.onlineTime:p=p.slice(0,5);break;case r.levelStart:var f=n[0];if(this.levelStartMsgList[f])return a.default.log("\u8be5\u5173\u5361\u5df2\u7ecf\u5f00\u59cb"),!1;this.levelStartMsgList[f]=new Date;break;case r.levelComplete:f=n[0];var g=n[1],v=this.levelStartMsgList[f];if("1"!=g&&"0"!=g||delete this.levelStartMsgList[f],!v)return a.default.log("\u8be5\u5173\u5361\u5e76\u672a\u5f00\u59cb"),!1;var _=((new Date).getTime()-v.getTime())/1e3;(_<0||_>1e4)&&(_=0),p.splice(3,0,Math.floor(_).toString())}for(var y=[];p.length||n.length;){var m=u[0];if(y.length==m){if(!p.length)return a.default.log("SDK\u4e0a\u4f20\u5360\u4f4d\u51fa\u9519"),!1;y.push(p.shift()),u.shift()}else{if(!n.length)return a.default.log("GAME\u4e0a\u4f20\u5360\u4f4d\u51fa\u9519"),!1;y.push(n.shift())}}a.default.log("\u6210\u529f\u6dfb\u52a0\u4fe1\u606f\uff1a",o);var S={typeid:""+l,updata:y};return this.receiveStatisItem(S),!0},e._instance=null,e}();o.default=p,cc._RF.pop()},{}],ULStatisStorage:[function(e,t,i){"use strict";cc._RF.push(t,"46fdawpFEFAoZHkPwKlsXbu","ULStatisStorage");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getStorage=function(e){return this.getItemCallback?this.getItemCallback(e):this.cacheStorage[e]},e.setStorage=function(e,t){this.cacheStorage[e]=t,this.setItemCallback&&this.setItemCallback(e,t)},e.cacheStorage={},e.getItemCallback=null,e.setItemCallback=null,e}();n.default=o,cc._RF.pop()},{}],ULStatisTimer:[function(e,t,i){"use strict";cc._RF.push(t,"f683aJiNb1Mgp6qN9SL0KVI","ULStatisTimer");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t,i){this._repeatCount=-1,this._span=1,this._callback=null,this._intervalId=null,this._count=0,this._beginTime=-1,this._usedTime=0,this._span=e,this._repeatCount=t,this._callback=i}return e.callLater=function(t,i){new e(t,1,i).start()},e.callLoop=function(t,i){new e(t,-1,i).start()},e.prototype.time=function(){return(new Date).getTime()/1e3},e.prototype._onSpan=function(){if(this._count++,this._usedTime=this.time()-this._beginTime,this._callback)try{this._callback(this)}catch(e){console.warn("\u8b66\u544a] ULStatisTimer._onSpan callback has error",e)}this._repeatCount>=0&&this._count>=this._repeatCount&&this.stop()},e.prototype.isRunning=function(){return null!=this._intervalId},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){return this._span},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usedTime",{get:function(){return this._usedTime},enumerable:!1,configurable:!0}),e.prototype.start=function(){return this.stop(),this._callback?(this._beginTime=this.time(),this._count=0,this._intervalId=setInterval(this._onSpan.bind(this),1e3*this.span),this):(console.warn("\u8b66\u544a] ULStatisTimer.start callback\u672a\u8bbe\u7f6e\uff01"),this)},e.prototype.stop=function(){return null!=this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this},e}();n.default=o,cc._RF.pop()},{}],ULStatisTools:[function(e,t,i){"use strict";cc._RF.push(t,"7c5e71hjzJIT46w7AxgivgZ","ULStatisTools");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULStatisTimer"),a={XMLHttpRequest:null};"undefined"!=typeof XMLHttpRequest&&(a.XMLHttpRequest=XMLHttpRequest);var s=function(){function e(){}return e.createRandomUserId=function(){var e=this.generateUUID();return this.compressUuid(e)},e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)})},e.compressUuid=function(e){for(var t="0123456789abcdef".split(""),i={},n=0;n<t.length;n++)i[t[n]]=n;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),r={};for(n=0;n<o.length;n++)r[o[n]]=n;var a=(e=e.replace(/-/g,"")).split(""),s=[];for(s.push(a[0]),s.push(a[1]),n=2;n<a.length;n+=3){var l=i[a[n]],d=i[a[n+1]],c=i[a[n+2]];s.push(o[l<<2|d>>2]),s.push(o[(3&d)<<4|c])}return s.join("")},e.getType=function(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]},e.clone=function(e){var t,i=this.getType(e);if("object"===i)t={};else{if("array"!==i)return e;t=[]}if("array"===i)for(var n=0,o=e.length;n<o;n++)t.push(this.clone(e[n]));else if("object"===i)for(var r in e)t[r]=this.clone(e[r]);return t},e.formatDate=function(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()},n=t;for(var o in/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+o+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return n},e.stringToByte=function(e){var t,i,n=new Array;t=e.length;for(var o=0;o<t;o++)(i=e.charCodeAt(o))>=65536&&i<=1114111?(n.push(i>>18&7|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)):i>=2048&&i<=65535?(n.push(i>>12&15|224),n.push(i>>6&63|128),n.push(63&i|128)):i>=128&&i<=2047?(n.push(i>>6&31|192),n.push(63&i|128)):n.push(255&i);return n},e.httpPostEncryption=function(e){var t=new a.XMLHttpRequest,i=new r.default(e.timeoutMillisecond,1,function(){if(t){var i=t;t=null,i.abort(),e.fail instanceof Function&&e.fail("timeout")}});t.onreadystatechange=function(){if(t&&4==t.readyState)if(i.stop(),200==t.status){var n=t.responseText;e.success instanceof Function&&e.success(n)}else console.warn("ULTools.httpPost on error:",t.readyState,t.status),e.fail instanceof Function&&e.fail(t.status.toString())},t.ontimeout=function(){if(t){var i=t;t=null,i.abort(),e.fail instanceof Function&&e.fail("timeout")}},t.onerror=function(i){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("on error :"+i)}};var n=null,o=this.stringToByte(e.postString),s=o.length%127||127;if("undefined"!=typeof window){n=new ArrayBuffer(o.length);for(var l=new Uint8Array(n),d=0;d<o.length;d++)o[d]=o[d]^s,l[d]=o[d]}i.start(),t.open("post",e.url,!0),t.setRequestHeader("isEncrypt","1"),t.setRequestHeader("gameId",e.gameId),t.setRequestHeader("platform","1"),t.setRequestHeader("secret",e.secret),t.send(n)},e}();o.default=s,cc._RF.pop()},{}],ULStorageExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"49e7cCgzgpI77IX5FOBL4t2","ULStorageExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULBaseExecutor"),l=function(){function e(){this.moduleName="ULDefaultStorage",this.priority=1}return e.prototype.getStorage=function(e){return localStorage.getItem(e)},e.prototype.setStorage=function(e,t){localStorage.setItem(e,t)},e.prototype.removeStorage=function(e){localStorage.removeItem(e)},e.prototype.clearStorage=function(){localStorage.clear()},e.prototype.getStorageAsync=function(e){return new Promise(function(t){t(localStorage.getItem(e))})},e.prototype.setStorageAsync=function(e,t){return new Promise(function(i){localStorage.setItem(e,t),i()})},e.prototype.removeStorageAsync=function(e){return new Promise(function(t){localStorage.removeItem(e),t()})},e.prototype.clearStorageAsync=function(){return new Promise(function(e){localStorage.clear(),e()})},e}(),d=function(e){function t(){var t=e.call(this)||this;return t.register(new l),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.getStorageItem=function(){return t.instance.executeSync({type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,handle:function(e){return e}})},t.prototype.getStorageItemAsync=function(){return t.instance.executeAsync({type:s.ULBaseExecutionEnum.ChainFlashback,endType:s.ULBaseExecutionEndEnum.One,handle:function(e){return e}})},t.registerItem=function(e){t.instance.register(e)},t.setStorage=function(e,i){t.instance.getStorageItem().setStorage(e,i)},t.getStorage=function(e){return t.instance.getStorageItem().getStorage(e)},t.removeStorage=function(e){t.instance.getStorageItem().removeStorage(e)},t.clearStorage=function(){t.instance.getStorageItem().clearStorage()},t.getStorageAsync=function(e){return t.instance.getStorageItemAsync().then(function(t){return t.getStorageAsync(e)})},t.setStorageAsync=function(e,i){return t.instance.getStorageItemAsync().then(function(t){return t.setStorageAsync(e,i)})},t.removeStorageAsync=function(e){return t.instance.getStorageItemAsync().then(function(t){return t.removeStorageAsync(e)})},t.clearStorageAsync=function(){return t.instance.getStorageItemAsync().then(function(e){return e.clearStorageAsync()})},t}(s.default);r.default=d,cc._RF.pop()},{}],ULSubscribeExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"c8faedwTF1B5I/jkPUkba+e","ULSubscribeExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULSubscribeType=void 0;var s,l=o("ULKitPop"),d=o("ULEvalExp"),c=o("ULHttp"),u=o("ULLog"),h=o("ULTools"),p=o("ULBaseExecutor"),f=o("ULConfigExecutor"),g=o("ULGameExecutor"),v=o("ULGoldfingerExecutor"),_=o("ULStorageExecutor"),y=o("ULSystemExecutor");(function(e){e.HeadLine="h5headline",e.WeiXin="h5weixin",e.QQ="h5qq",e.UlsdkDemo=""})(s=r.ULSubscribeType||(r.ULSubscribeType={}));var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onAddSubscribe=function(e){this.executeConcurrencyAll(function(t){t.onAddSubscribe&&t.onAddSubscribe(e)}).catch(function(e){u.default.log("ULSubscribeListenerExecutor onAddSubscribe err:",e.stack),g.default.reportErrMsg("ULSubscribeListenerExecutor onAddSubscribe",e.stack)})},t}(p.default),S=function(e){function t(){var t=e.call(this)||this;return t._listenerExecutor=new m,t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.sdkSwitch=function(){return 1==f.default.getNumberValue("n_sdk_subscribe_mode",1)},t.prototype.addListener=function(){v.default.registerItem(this)},t.prototype.getRecordKey=function(e){return"localSubscribeSetting_"+(e.moduleName||"")},t.prototype.getLocalSubscribeSetting=function(e){var t=e.subscribeRefreshRule||[],i=[];try{var n=_.default.getStorage(this.getRecordKey(e)),o=JSON.parse(n),r=function(e){var n=o[e],r=t[e]||"ULTools.timeDayHour(18)",a=d.default.evalExpResults(r,function(e){return"oldValue"==e?n||"":e});n&&a&&a==n&&i.push(e)};for(var a in o)r(a)}catch(e){}return i},t.prototype.saveLocalSubscribeSetting=function(e,t){var i={};try{var n=_.default.getStorage(this.getRecordKey(e))||"{}";i=JSON.parse(n)||{}}catch(e){}var o=e.subscribeRefreshRule||[];t.forEach(function(e){var t=o[e]||"ULTools.timeDayHour(18)";i[e]=d.default.evalExpResults(t)}),_.default.setStorage(this.getRecordKey(e),JSON.stringify(i))},t.prototype.getTmplIdsFor=function(e,t){var i=e.subscribeSetting,n=t in i?i[t]:void 0,o=[];return"string"==typeof n?o.push(n):n instanceof Array&&(o=o.concat(n)),o},t.prototype.getSubscribeStateHandle=function(e,t,i){var n=this;return new Promise(function(o,r){var a=n.getTmplIdsFor(e,t);if(0!=a.length){i&&i("\u603btmplIds:"+a.join(","));var s=n.getLocalSubscribeSetting(e);a=a.filter(function(e){return-1==s.indexOf(e)}),i&&i("\u53bb\u9664\u5df2\u8ba2\u9605tmplIds:"+a.join(",")),0!=a.length?e.checkSubscribeState(a).then(o,r):o(!0)}else r("\u5f53\u524d\u6a21\u677f\u914d\u7f6e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e")})},t.prototype.addSubscribeHandle=function(e,t,i){var n=this;return new Promise(function(o,r){var a=n.getTmplIdsFor(e,t);if(0!=a.length){i&&i("\u603btmplIds:"+a.join(","));var l=n.getLocalSubscribeSetting(e);a=a.filter(function(e){return-1==l.indexOf(e)}),i&&i("\u53bb\u9664\u5df2\u8ba2\u9605tmplIds:"+a.join(",")),0!=a.length?e.addSubscribe(a).then(function(){e.subscribeType==s.UlsdkDemo&&n.saveLocalSubscribeSetting(e,a),n._listenerExecutor.onAddSubscribe(a),o()},r):o()}else r("\u5f53\u524d\u6a21\u677f\u914d\u7f6e\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e")})},t.prototype.reportSubscribe=function(e,t,i,n){var o=this;return c.default.postPromise({url:y.default.commonServerUrl+"/subscrible/postusermsgv8",params:{channel:e.subscribeType,appId:t,openId:i,tmplIds:JSON.stringify(n)}}).then(function(t){1==h.default.getNumberValue(t,"code",0)?(o.saveLocalSubscribeSetting(e,n),Promise.resolve()):Promise.reject(JSON.stringify(t))})},t.prototype.addSubscribe=function(e,i,n){void 0===i&&(i=void 0),void 0===n&&(n=void 0);var o=t.instance;return this.executeAsync({moduleName:i,type:p.ULBaseExecutionEnum.ChainFlashback,endType:p.ULBaseExecutionEndEnum.One,promiseHandle:function(t){return o.addSubscribeHandle(t,e,n)}})},t.prototype.getSubscribeState=function(e,i,n){void 0===i&&(i=void 0),void 0===n&&(n=void 0);var o=t.instance;return this.executeAsync({moduleName:i,type:p.ULBaseExecutionEnum.ChainFlashback,endType:p.ULBaseExecutionEndEnum.One,checkSupport:!0,promiseHandle:function(t){return o.getSubscribeStateHandle(t,e,n)}})},t.prototype.goldfingerView=function(e){var i=this;return new v.ULGoldfingerStackView("\u8ba2\u9605\u7cfb\u7edf",e,function(e){var n="",o=0,r=["\u9ed8\u8ba4"].concat(i.getAllRegisterModuleName()),a=[{name:"\u8ba2\u9605\u5f00\u5173:",value:t.isSupport}],s=[{name:"\u8bf7\u9009\u62e9\u6e20\u9053:",value:r,width:150,handle:function(e){o=e}}],d=[{name:"\u8bf7\u8f93\u5165\u8ba2\u9605\u57cb\u70b9:",width:150,handle:function(e){n=e}}],c=[{name:"\u8ba2\u9605\u72b6\u6001:",handle:function(){var e=r[o],t=l.default.showInformationFlow({title:"\u8ba2\u9605\u72b6\u6001\u6d4b\u8bd5\u6d41\u7a0b"});t.sendMessage("\u6267\u884c\u6a21\u5757:"+e),i.getSubscribeState(n,"\u9ed8\u8ba4"==e?"":e,t.sendMessage).then(function(e){t.sendMessage("\u8ba2\u9605\u72b6\u6001:"+e)},function(e){t.sendMessage("\u6267\u884c\u5931\u8d25 errMsg:\n"+e)})}},{name:"\u6dfb\u52a0\u8ba2\u9605:",handle:function(){var e=r[o],t=l.default.showInformationFlow({title:"\u6dfb\u52a0\u8ba2\u9605\u6d4b\u8bd5\u6d41\u7a0b"});t.sendMessage("\u6267\u884c\u6a21\u5757:"+e),i.addSubscribe(n,"\u9ed8\u8ba4"==e?"":e,t.sendMessage).then(function(){t.sendMessage("\u8ba2\u9605\u6210\u529f")},function(e){t.sendMessage("\u8ba2\u9605\u5931\u8d25 errMsg:\n"+e)})}}];e.addStackForSwitchs(a),e.addStackMenuViews(s),e.addStackTextFiled(d),e.addStackButtons(c)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.removeItem=function(e){t.instance.unRegister(e)},t.registerListener=function(e){t.instance._listenerExecutor.register(e)},t.removeListener=function(e){t.instance._listenerExecutor.unRegister(e)},t.reportSubscribe=function(e,i,n,o){return t.instance.reportSubscribe(e,i,n,o)},t.getSubscribeState=function(e){return t.instance.getSubscribeState(e)},t.addSubscribe=function(e){return t.instance.addSubscribe(e)},t}(p.default);r.default=S,cc._RF.pop()},{}],ULSwitch:[function(e,t,i){"use strict";cc._RF.push(t,"e1202rJXv5FD4Ab2ZUWcDZp","ULSwitch");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULEventEnum"),l=o("ULImage"),d=o("ULRect"),c=o("ULControl"),u=o("ULImageView"),h=function(e){function t(t){void 0===t&&(t=d.default.Zero);var i=e.call(this,t)||this;return i.imageView=new u.default(d.default.Init(0,0,50,50)),i.image=l.default.fromBundle("_ulsdk_ui/ulkit_switch_close.png"),i.seletdImage=l.default.fromBundle("_ulsdk_ui/ulkit_switch_open.png"),i._isSelected=!1,i.imageView.center=new d.ULPoint({x:t.width/2,y:t.height/2}),i.addCustomSubView(),i}return a(t,e),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._isSelected},set:function(e){this._isSelected!=e&&(this._isSelected=e,this.imageView.image=this.isSelected?this.seletdImage:this.image,this.postValueChange(e))},enumerable:!1,configurable:!0}),t.prototype.frameDidChange=function(){e.prototype.frameDidChange.call(this),this.imageView.center=new d.ULPoint({x:this.bounds.width/2,y:this.bounds.height/2})},Object.defineProperty(t.prototype,"panel",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.getAutoLayoutAdapteWidth=function(){return this.imageView.frame.width},t.prototype.getAutoLayoutAdapteHeight=function(){return this.imageView.frame.height},t.prototype.addCustomSubView=function(){var e=this;this.imageView.userInteractionEnabled=!1,this.imageView.image=this.isSelected?this.seletdImage:this.image,this.addSubView(this.imageView),this.registerControlEvent(s.ULControlEvents.TouchUpInside,function(){e.isSelected=!e.isSelected})},t}(c.default);r.default=h,cc._RF.pop()},{}],ULSystemExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"fed455rLwRL14tzAw274YLB","ULSystemExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULScreenDirection=r.ULSystemLanguage=void 0;var s,l=o("ULKitPop"),d=o("ULWindow"),c=o("ULTools"),u=o("ULUrl"),h=o("ULSdkManager"),p=o("ULBaseExecutor"),f=o("ULConfigExecutor"),g=o("ULCopExecutor"),v=o("ULGameExecutor"),_=o("ULGoldfingerExecutor"),y=o("ULUserExecutor"),m=o("ULSettingViewController");(function(e){e.zhcn="zh-cn",e.zhtw="zh-tw",e.enus="en-us",e.jajp="ja-jp",e.kokr="ko-kr",e.ptbr="pt-br",e.vi="vi",e.id="id"})(r.ULSystemLanguage||(r.ULSystemLanguage={})),function(e){e[e.Portrait=0]="Portrait",e[e.Landscape=1]="Landscape"}(s=r.ULScreenDirection||(r.ULScreenDirection={}));var S=function(){function e(){}return e.prototype.goldfingerView=function(e){return new _.ULGoldfingerStackView("\u7cfb\u7edf\u4fe1\u606f",e,function(e){var t=[{name:"GameId:",value:b.gameId},{name:"GameName:",value:b.gameName},{name:"ChannelId:",value:b.channelId},{name:"CopVersion:",value:g.default.copVersion},{name:"Uuid:",value:y.default.uuid},{name:"ProjectBranch:",value:b.projectBranch},{name:"ProjectLog:",value:b.projectLog}],i=[{name:"GetServerTime()",handle:function(){var e=l.default.showInformationFlow({title:"GetServerTime()"});b.getServerTime().then(function(t){e.sendMessage("serviceTime:"+t),e.sendMessage("serviceTime:"+c.default.formatDate(new Date(t),"yyyy\u5e74MM\u6708dd\u65e5HH\u65f6mm\u5206ss\u79d2"))},function(t){e.sendMessage("errMsg:"+t)})}},{name:"CheckNetwork()",handle:function(){b.checkNetwork().then(function(){l.default.showToast({title:"\u5df2\u8054\u7f51"})},function(){l.default.showToast({title:"\u672a\u8054\u7f51"})})}},{name:"GetSystemInfoSync()",handle:function(){l.default.showInformationFlow({title:"GetSystemInfoSync()",content:c.default.getObjMessage(b.getSystemInfoSync())})}},{name:"LoadRemoteConfig()",handle:function(){h.default.loadRemoteConfig(function(e){l.default.showInformationFlow({title:"LoadRemoteConfig()",content:c.default.getObjMessage(e)})})}},{name:"GetLocalConfig()",handle:function(){l.default.showInformationFlow({title:"GetLocalConfig()",content:c.default.getObjMessage(h.default.getLocalConfig())})}},{name:"\u9ad8\u7ea7\u8bbe\u7f6e\u754c\u9762",handle:function(){b.openAdvancedSetting().catch(function(e){l.default.showToast({title:e})})}}];e.addStackLabels(t),e.addStackButtons(i)})},e}(),b=function(e){function t(){var t=e.call(this)||this;return t._goldfingerItem=new S,t._localTime=0,t._serverTimePromise=null,t._window=null,t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){_.default.registerItem(this._goldfingerItem),v.default.registerListener(this)},t.prototype.getServerTime=function(){var e=this;return this._serverTimePromise?this._serverTimePromise.then(function(t){return Promise.resolve(t+c.default.milliTime()-e._localTime)}):g.default.copServerTime().then(function(t){return e._serverTimePromise=Promise.resolve(t),e._serverTimePromise})},t.prototype.openAdvancedSetting=function(){if(this._window)return Promise.reject("\u5df2\u6210\u529f\u5c55\u793a");var e=this,t=new(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return a(i,t),i.prototype.vcStackDidChange=function(){t.prototype.vcStackDidChange.call(this),0==this.viewControllers.length&&(this.resignKeyWindow(),e._window=null)},i}(d.default));t.windowLevel=l.ULWindowPriority.DebugWindow,t.makeKeyAndVisible(),this._window=t;var i=new m.default;return t.pushViewController(i),Promise.resolve()},t.prototype.onGameShow=function(){this._serverTimePromise=null},t.prototype.onGameHide=function(){this._serverTimePromise=null},Object.defineProperty(t,"commonServerUrl",{get:function(){return new u.default(f.default.getStringValue("s_sdk_common_server_url","https://common.ultralisk.cn")).origin},enumerable:!1,configurable:!0}),Object.defineProperty(t,"gameId",{get:function(){return f.default.getStringValue("s_sdk_game_id")},enumerable:!1,configurable:!0}),Object.defineProperty(t,"gameName",{get:function(){return f.default.getStringValue("s_sdk_game_name")},enumerable:!1,configurable:!0}),Object.defineProperty(t,"channelId",{get:function(){return f.default.getStringValue("s_sdk_channel_id")},enumerable:!1,configurable:!0}),Object.defineProperty(t,"projectBranch",{get:function(){return f.default.getStringValue("_target_project_branch")},enumerable:!1,configurable:!0}),Object.defineProperty(t,"projectLog",{get:function(){return f.default.getStringValue("_target_project_log")},enumerable:!1,configurable:!0}),Object.defineProperty(t,"screenDirection",{get:function(){var e=this.getSystemInfoSync();return e.screenHeight>e.screenWidth?s.Portrait:s.Landscape},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.getSystemInfoSync=function(){return t.instance.executeSync({type:p.ULBaseExecutionEnum.ChainFlashback,endType:p.ULBaseExecutionEndEnum.SuccessAnyOne,handle:function(e){return e.getSystemInfoSync()}})},t.getServerTime=function(){return t.instance.getServerTime()},t.checkNetwork=function(){return t.instance.getServerTime().then(function(){return Promise.resolve()})},t.openAdvancedSetting=function(){return t.instance.openAdvancedSetting()},t}(p.default);r.default=b,cc._RF.pop()},{}],ULTableViewStoredTextCell:[function(e,t,i){"use strict";cc._RF.push(t,"b6983niMSxO7qhDE1GPSTXI","ULTableViewStoredTextCell");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULColor"),l=o("ULRect"),d=o("ULLabel"),c=o("ULTableView"),u=o("ULViewEnum"),h=function(e){function t(t){var i=e.call(this,t)||this;return i.titleLabel=new d.default,i.titleLabel.backgroundColor=s.default.Clear,i.titleLabel.titleEdgeInsets=new l.ULEdgeInsets(10,10,10,10),i.titleLabel.lineBreakMode=u.ULLineBreakMode.CharWrapping,i.addSubView(i.titleLabel),i}return a(t,e),t.prototype.frameDidChange=function(){e.prototype.frameDidChange.call(this),this.titleLabel.frame=this.bounds},t}(c.ULTableViewCell);r.default=h,cc._RF.pop()},{}],ULTableView:[function(e,t,i){"use strict";cc._RF.push(t,"0afdawGLzVMlYMuBdz8MD5V","ULTableView");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULTableHeaderFooterView=r.ULTableViewCell=r.ULTableViewStyle=void 0;var s,l=o("ULKitTool"),d=o("ULRect"),c=o("ULScrollView"),u=o("ULView");(function(e){e[e.Plain=0]="Plain",e[e.Group=1]="Group"})(s=r.ULTableViewStyle||(r.ULTableViewStyle={}));var h=function(e){function t(t){var i=e.call(this)||this;return i.reuseId=t,i}return a(t,e),t}(u.default);r.ULTableViewCell=h;var p=function(e){function t(t){var i=e.call(this)||this;return i.reuseId=t,i}return a(t,e),t}(u.default);r.ULTableHeaderFooterView=p;var f=function(e){function t(t,i){void 0===t&&(t=d.default.Zero),void 0===i&&(i=s.Plain);var n=e.call(this,t)||this;return n._visibleCells={},n._registerCells={},n._reuseCells={},n._registerFooterViews={},n._reuseHeaderFooterViews={},n._allHeigtCache=[],n._lastAllHeigtCache=[],n.delegate=null,n.dataSource=null,n.rowHeight=0,n.sectionHeaderHeight=0,n.sectionFooterHeight=0,n._selectedIndexPath=void 0,n._touchIndexPath=void 0,n._style=i,n.alwaysBounceVertical=!0,n}return a(t,e),t.prototype.willDisplayCell=function(e,t){var i=this._allHeigtCache[t.section][t.row];e.frame=d.default.Init(0,i.y,this.frame.width,i.height),this.delegate&&this.delegate.willDisplayCell&&this.delegate.willDisplayCell(this,e,new d.ULIndexPath(t.section,t.row-1)),e.frame=d.default.Init(0,i.y,this.frame.width,i.height)},t.prototype.willDisplayHeaderView=function(e,t){if(e){var i=this._allHeigtCache[t][0];e.frame=d.default.Init(0,i.y,this.frame.width,i.height),this.delegate&&this.delegate.willDisplayHeaderView&&this.delegate.willDisplayHeaderView(this,e,t),e.frame=d.default.Init(0,i.y,this.frame.width,i.height)}},t.prototype.willDisplayFooterView=function(e,t){if(e){var i=this._allHeigtCache[t],n=i[i.length-1];e.frame=d.default.Init(0,n.y,this.frame.width,n.height),this.delegate&&this.delegate.willDisplayFooterView&&this.delegate.willDisplayFooterView(this,e,t),e.frame=d.default.Init(0,n.y,this.frame.width,n.height)}},t.prototype.willEndDisplayCell=function(e,t){var i=this._reuseCells[e.reuseId]||[];i.push(e),this._reuseCells[e.reuseId]=i,this.delegate&&this.delegate.willEndDisplayCell&&this.delegate.willEndDisplayCell(this,e,new d.ULIndexPath(t.section,t.row-1)),e.removeFromSuperView()},t.prototype.willEndDisplayHeaderView=function(e,t){if(e){if(e instanceof p){var i=this._reuseHeaderFooterViews[e.reuseId]||[];i.push(e),this._reuseHeaderFooterViews[e.reuseId]=i}this.delegate&&this.delegate.willEndDisplayHeaderView&&this.delegate.willEndDisplayHeaderView(this,e,t),e.removeFromSuperView()}},t.prototype.willEndDisplayFooterView=function(e,t){if(e){if(e instanceof p){var i=this._reuseHeaderFooterViews[e.reuseId]||[];i.push(e),this._reuseHeaderFooterViews[e.reuseId]=i}this.delegate&&this.delegate.willEndDisplayFooterView&&this.delegate.willEndDisplayFooterView(this,e,t),e.removeFromSuperView()}},t.prototype.heightForCell=function(e){return this.delegate&&this.delegate.heightForCell?this.delegate.heightForCell(this,e):this.rowHeight},t.prototype.heightForHeader=function(e){return this.delegate&&this.delegate.heightForHeader?this.delegate.heightForHeader(this,e):this.sectionHeaderHeight},t.prototype.heightForFooter=function(e){return this.delegate&&this.delegate.heightForFooter?this.delegate.heightForFooter(this,e):this.sectionFooterHeight},t.prototype.headerViewForSection=function(e){return this.delegate&&this.delegate.headerViewForSection?this.delegate.headerViewForSection(this,e):null},t.prototype.footerViewForSection=function(e){return this.delegate&&this.delegate.footerViewForSection?this.delegate.footerViewForSection(this,e):null},t.prototype.didHighlightRowAtIndexPath=function(e){0!=e.row&&e.row!=this._allHeigtCache[e.section].length-1&&this.delegate&&this.delegate.didHighlightRowAtIndexPath&&this.delegate.didHighlightRowAtIndexPath(this,new d.ULIndexPath(e.section,e.row-1))},t.prototype.didUnHighlightRowAtIndexPath=function(e){0!=e.row&&e.row!=this._allHeigtCache[e.section].length-1&&this.delegate&&this.delegate.didUnHighlightRowAtIndexPath&&this.delegate.didUnHighlightRowAtIndexPath(this,new d.ULIndexPath(e.section,e.row-1))},t.prototype.didSelectRowAtIndexPath=function(e){if(0!=e.row&&e.row!=this._allHeigtCache[e.section].length-1){if(e.isEqual(this._selectedIndexPath))return this.didDeselectRowAtIndexPath(this._selectedIndexPath),void(this._selectedIndexPath=void 0);this._selectedIndexPath&&this.didDeselectRowAtIndexPath(this._selectedIndexPath),this._selectedIndexPath=e,this.delegate&&this.delegate.didSelectRowAtIndexPath&&this.delegate.didSelectRowAtIndexPath(this,new d.ULIndexPath(e.section,e.row-1))}},t.prototype.didDeselectRowAtIndexPath=function(e){0!=e.row&&e.row!=this._allHeigtCache[e.section].length-1&&(this._selectedIndexPath.isEqual(e)&&(this._selectedIndexPath=null),this.delegate&&this.delegate.didDeselectRowAtIndexPath&&this.delegate.didDeselectRowAtIndexPath(this,new d.ULIndexPath(e.section,e.row-1)))},t.prototype.touchesBegan=function(t,i){e.prototype.touchesBegan.call(this,t,i);var n=t.y-this.disPlayRect.y+this.clipRect.y+this.contentOffset.y;this._touchIndexPath=this.indexPathForPoint(n),this._touchIndexPath&&this.didHighlightRowAtIndexPath(this._touchIndexPath)},t.prototype.touchesMoved=function(t,i){e.prototype.touchesMoved.call(this,t,i),this._touchIndexPath&&this.didUnHighlightRowAtIndexPath(this._touchIndexPath),this._touchIndexPath=void 0},t.prototype.touchesEnded=function(t,i){e.prototype.touchesEnded.call(this,t,i),this._touchIndexPath&&this.didUnHighlightRowAtIndexPath(this._touchIndexPath),this._touchIndexPath&&this.didSelectRowAtIndexPath(this._touchIndexPath),this._touchIndexPath=void 0},t.prototype.frameDidChange=function(){e.prototype.frameDidChange.call(this),this.reloadData()},t.prototype.numberOfRowsInSection=function(e){return this.dataSource.numberOfRowsInSection(this,e)},t.prototype.cellForRowAtIndexPath=function(e){var t=this.dataSource.cellForRowAtIndexPath(this,new d.ULIndexPath(e.section,e.row-1));if(!t)throw new Error("cellForRowAtIndexPath :return cell null");return t},t.prototype.numberOfSectionsInTableView=function(){return this.delegate&&this.dataSource.numberOfSectionsInTableView?this.dataSource.numberOfSectionsInTableView(this):1},t.prototype.titleForHeaderInSection=function(e){return this.delegate&&this.dataSource.titleForHeaderInSection?this.dataSource.titleForHeaderInSection(this,e):""},t.prototype.titleForFooterInSection=function(e){return this.delegate&&this.dataSource.titleForFooterInSection?this.dataSource.titleForFooterInSection(this,e):""},t.prototype.willDisplay=function(e){var t=null;return 0==e.row?(t=this.headerViewForSection(e.section))&&this.willDisplayHeaderView(t,e.section):e.row==this._allHeigtCache[e.section].length-1?(t=this.footerViewForSection(e.section))&&this.willDisplayFooterView(t,e.section):(t=this.cellForRowAtIndexPath(e),this.willDisplayCell(t,e)),t},t.prototype.willEndDisplay=function(e,t){0==t.row?this.willEndDisplayHeaderView(e,t.section):t.row==this._lastAllHeigtCache[t.section].length-1?this.willEndDisplayFooterView(e,t.section):this.willEndDisplayCell(e,t)},t.prototype.indexPathForPoint=function(e){for(var t=void 0,i=0;i<this._allHeigtCache.length;i++){var n=this._allHeigtCache[i],o=n[n.length-1];if(!(o.y+o.height<=e)){var r=l.default.binarySearch(n,function(t){return t.y+t.height<=e?l.ULKitBinaryRelation.lessThan:t.y>e?l.ULKitBinaryRelation.greaterThan:l.ULKitBinaryRelation.equalTo});if(!(r<0)){t=new d.ULIndexPath(i,r);break}}}return t},t.prototype.indexPathsForRowsInRect=function(e,t){var i=[];e<0&&(t+=e,e=0);var n=this.indexPathForPoint(e);if(n)for(var o=n,r=e+t;o;){var a=this._allHeigtCache[o.section][o.row];if(a.height>0&&i.push(o),a.y+a.height>=r)break;o=this._allHeigtCache[o.section].length>o.row+1?new d.ULIndexPath(o.section,o.row+1):this._allHeigtCache.length>o.section+1?new d.ULIndexPath(o.section+1,0):void 0}return i},t.prototype.viewWillRefresh=function(t,i){for(var n=this.indexPathsForRowsInRect(this.contentOffset.y-i.y,t.height),o={},r=[],a=0;a<n.length;a++){var s=(f=n[a]).toJson();if(this._visibleCells[s]){var l=this._visibleCells[s],c=this._allHeigtCache[f.section][f.row];o[s]=l,l.frame=d.default.Init(0,c.y,this.frame.width,c.height),delete this._visibleCells[s]}else r.push(f)}for(var u=0,h=Object.keys(this._visibleCells);u<h.length;u++){var p=h[u],f=d.ULIndexPath.parse(p),g=this._visibleCells[p];this.willEndDisplay(g,f)}for(var v=0,_=r;v<_.length;v++)s=(f=_[v]).toJson(),(g=this.willDisplay(f))&&(o[s]=g,this.contentView.addSubView(g));this._visibleCells=o,e.prototype.viewWillRefresh.call(this,t,i)},t.prototype.cellForRowsIndexPath=function(e){var t=new d.ULIndexPath(e.section,e.row+1);return this._visibleCells[t.toJson()]},Object.defineProperty(t.prototype,"visibleCell",{get:function(){return[].concat(this._visibleCells)},enumerable:!1,configurable:!0}),t.prototype.registerCell=function(e,t){this._registerCells[t]=e},t.prototype.registerHeaderFooterView=function(e,t){this._registerFooterViews[t]=e},t.prototype.refreshCell=function(e,t){if(t)for(var i=0,n=0;n<this._allHeigtCache.length;n++)for(var o=this._allHeigtCache[n],r=0;r<o.length;r++){var a=o[r];a.y=i,i+=a.height}for(var s=0,l=Object.keys(this._visibleCells);s<l.length;s++){var c=l[s],u=d.ULIndexPath.parse(c),h=this._visibleCells[c];(u.section>e.section||u.section==e.section&&u.row>=e.row)&&(this.willEndDisplay(h,u),delete this._visibleCells[c])}if(this._allHeigtCache.length>0){n=this._allHeigtCache.length-1,r=this._allHeigtCache[n].length-1;var p=this._allHeigtCache[n][r];this.contentSize=d.default.Init(0,0,this.frame.width,p.y+p.height)}else this.contentSize=d.default.Init(0,0,0,0);this.setNeedsRefresh()},t.prototype.reloadData=function(){this._lastAllHeigtCache=this._allHeigtCache,this._allHeigtCache=[];for(var e=0,t=this.numberOfSectionsInTableView(),i=0;i<t;i++){var n=[],o=this.heightForHeader(i);n.push({y:e,height:o}),e+=o;for(var r=0;r<this.numberOfRowsInSection(i);r++){var a=this.heightForCell(new d.ULIndexPath(i,r));n.push({y:e,height:a}),e+=a}var s=this.heightForFooter(i);n.push({y:e,height:s}),e+=s,this._allHeigtCache.push(n)}this.refreshCell(new d.ULIndexPath(0,0),!1),this._lastAllHeigtCache=this._allHeigtCache},t.prototype.insertRows=function(e){if(0!=e.length){for(var t=e.sort(function(e,t){return 1e6*(e.section-t.section)+(e.row-t.row)}),i={},n=0,o=t;n<o.length;n++){if((y=o[n]).section>=this._allHeigtCache.length)throw new Error("insertRows section:"+y.section+" \u4e0d\u5b58\u5728");(s=i[""+y.section]||[]).push(y),i[""+y.section]=s}for(var r=0,a=Object.keys(i);r<a.length;r++){var s=i[g=a[r]],l=this.numberOfRowsInSection(Number(g)),c=this._allHeigtCache[Number(g)].length-2;if(s.length+c!=l)throw new Error("insertRows section:"+g+" numberOfRowsInSection \u6570\u636e\u5dee\u5f02");for(var u=0,h=s;u<h.length;u++)if((y=h[u]).row>l)throw new Error("insertRows indexPath section:"+g+" row::"+y.row+" >= numberOfRowsInSection")}for(var p=0,f=Object.keys(i);p<f.length;p++)for(var g,v=0,_=i[g=f[p]];v<_.length;v++){var y=_[v],m=this.heightForCell(y);this._allHeigtCache[Number(g)].splice(y.row+1,0,{y:0,height:m})}var S=t[0];this.refreshCell(new d.ULIndexPath(S.section,S.row+1),!0)}},t.prototype.deleteRows=function(e){if(0!=e.length){for(var t=e.sort(function(e,t){return 1e6*(t.section-e.section)+(t.row-e.row)}),i={},n=0,o=t;n<o.length;n++){if((y=o[n]).section>=this._allHeigtCache.length)throw new Error("deleteRows section:"+y.section+" \u4e0d\u5b58\u5728");(s=i[""+y.section]||[]).push(y),i[""+y.section]=s}for(var r=0,a=Object.keys(i);r<a.length;r++){var s=i[g=a[r]],l=this.numberOfRowsInSection(Number(g)),c=this._allHeigtCache[Number(g)].length-2;if(c-s.length!=l)throw new Error("deleteRows section:"+g+" numberOfRowsInSection \u6570\u636e\u5dee\u5f02");for(var u=0,h=s;u<h.length;u++)if((y=h[u]).row>c)throw new Error("deleteRows indexPath section:"+g+" row::"+y.row+" >= showRowNum")}for(var p=0,f=Object.keys(i);p<f.length;p++)for(var g,v=0,_=i[g=f[p]];v<_.length;v++){var y=_[v];this._allHeigtCache[Number(g)].splice(y.row+1,1)}var m=t[t.length-1];this.refreshCell(new d.ULIndexPath(m.section,m.row+1),!0)}},t.prototype.reloadRows=function(e){for(var t=e.sort(function(e,t){return 1e6*(e.section-t.section)+(e.row-t.row)}),i=0,n=t;i<n.length;i++){if((a=n[i]).section>=this._allHeigtCache.length)throw new Error("reloadRows section:"+a.section+" \u4e0d\u5b58\u5728");if(a.row>=this._allHeigtCache[a.section].length-2)throw new Error("reloadRows section:"+a.section+" row::"+a.row+"  \u4e0d\u5b58\u5728")}for(var o=0,r=t;o<r.length;o++){var a=r[o],s=this.heightForCell(a);this._allHeigtCache[a.section][a.row+1]={y:0,height:s}}var l=t[0];this.refreshCell(new d.ULIndexPath(l.section,l.row+1),!0)},t.prototype.insertSections=function(e){if(0!=e.length){var t=e.sort(function(e,t){return e-t}),i=this.numberOfSectionsInTableView();if(this._allHeigtCache.length+e.length!=i)throw new Error("insertSections numberOfRowsInSection \u6570\u636e\u5dee\u5f02");for(var n=0,o=t;n<o.length;n++)if((s=o[n])>i)throw new Error("insertSections section:"+s+" numberOfRowsInSection \u6570\u636e\u5dee\u5f02");for(var r=0,a=t;r<a.length;r++){var s=a[r],l=[],c=this.heightForHeader(s);l.push({y:0,height:c});for(var u=0;u<this.numberOfRowsInSection(s);u++){var h=this.heightForCell(new d.ULIndexPath(s,u));l.push({y:0,height:h})}var p=this.heightForFooter(s);l.push({y:0,height:p}),this._allHeigtCache.splice(s,0,l)}this.refreshCell(new d.ULIndexPath(t[0],0),!0)}},t.prototype.deleteSections=function(e){if(0!=e.length){var t=e.sort(function(e,t){return t-e}),i=this.numberOfSectionsInTableView();if(this._allHeigtCache.length-e.length!=i)throw new Error("deleteSections numberOfRowsInSection \u6570\u636e\u5dee\u5f02");for(var n=0,o=t;n<o.length;n++)if((s=o[n])>i)throw new Error("deleteSections section:"+s+" numberOfRowsInSection \u6570\u636e\u5dee\u5f02");for(var r=0,a=t;r<a.length;r++){var s=a[r];this._allHeigtCache.splice(s,0)}this.refreshCell(new d.ULIndexPath(t[t.length-1],0),!0)}},t.prototype.reloadSections=function(e){if(0!=e.length){var t=e.sort(function(e,t){return e-t}),i=this.numberOfSectionsInTableView();if(this._allHeigtCache.length!=i)throw new Error("reloadSections numberOfRowsInSection \u6570\u636e\u5dee\u5f02");for(var n=0,o=t;n<o.length;n++)if((s=o[n])>i)throw new Error("reloadSections section:"+s+" numberOfRowsInSection \u6570\u636e\u5dee\u5f02");for(var r=0,a=t;r<a.length;r++){var s=a[r],l=[],c=this.heightForHeader(s);l.push({y:0,height:c});for(var u=0;u<this.numberOfRowsInSection(s);u++){var h=this.heightForCell(new d.ULIndexPath(s,u));l.push({y:0,height:h})}var p=this.heightForFooter(s);l.push({y:0,height:p}),this._allHeigtCache[s]=l}this.refreshCell(new d.ULIndexPath(t[0],0),!0)}},t.prototype.dequeueReusableCell=function(e){var t=this._reuseCells[e]||[];return t.length>0?t.shift():this._registerCells[e]?new(0,this._registerCells[e])(e):null},t.prototype.dequeueReusableHeaderFooterView=function(e){var t=this._reuseHeaderFooterViews[e]||[];return t.length>0?t.shift():this._registerFooterViews[e]?new(0,this._registerFooterViews[e])(e):null},t.prototype.deSelectRowAtIndexPath=function(e){this.didDeselectRowAtIndexPath(new d.ULIndexPath(e.section,e.row+1))},t.prototype.getAutoLayoutAdapteHeight=function(e){if(0==this._allHeigtCache.length){var t=this.frame;t.width=e,this.frame=t}return this.contentSize.height},t}(c.default);r.default=f,cc._RF.pop()},{}],ULTextField:[function(e,t,i){"use strict";cc._RF.push(t,"5b601hsCzhOIIQp/gY9RwId","ULTextField");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULApplication"),l=o("ULColor"),d=o("ULEventEnum"),c=o("ULRect"),u=o("ULControl"),h=o("ULLabel"),p=function(e){function t(t){void 0===t&&(t=c.default.Zero);var i=e.call(this,t)||this;return i.contentLabel=new h.default,i.editing=!1,i.enabled=!0,i.placeholder="",i.contentLabel.frame=i.bounds,i.addCustomSubView(),i.addEventLister(),i}return a(t,e),Object.defineProperty(t.prototype,"textColor",{get:function(){return this.contentLabel.textColor},set:function(e){this.contentLabel.textColor=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.contentLabel.font},set:function(e){this.contentLabel.font=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.contentLabel.text},set:function(e){this.contentLabel.text!=e&&(this.contentLabel.text=e,this.postValueChange(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textAlignment",{get:function(){return this.contentLabel.textAlignment},set:function(e){this.contentLabel.textAlignment=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleEdgeInsets",{get:function(){return this.contentLabel.titleEdgeInsets},set:function(e){this.contentLabel.titleEdgeInsets=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this.contentLabel.backgroundColor},set:function(e){this.contentLabel.backgroundColor=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEditing",{get:function(){return this.editing},enumerable:!1,configurable:!0}),t.prototype.addCustomSubView=function(){this.contentLabel.userInteractionEnabled=!1,this.contentLabel.backgroundColor=l.default.RGB(10,90,80),this.addSubView(this.contentLabel)},t.prototype.frameDidChange=function(){e.prototype.frameDidChange.call(this),this.contentLabel.frame=this.bounds},t.prototype.addEventLister=function(){var e=this;this.registerControlEvent(d.ULControlEvents.TouchDown,function(){if(!e.enabled)return!1;console.log("ULTextField strat edit"),s.default.registerKeyboardEvent({text:e.text,frameToWindow:e.frameToWindow,onFocus:e.onFocus.bind(e),onBlur:e.onBlur.bind(e),textDidChange:e.textDidChange.bind(e)})})},Object.defineProperty(t.prototype,"frameToWindow",{get:function(){return this.disPlayRect},enumerable:!1,configurable:!0}),t.prototype.onFocus=function(){this.editing=!0},t.prototype.textDidChange=function(e){this.text=e},t.prototype.onBlur=function(){this.editing=!1},t}(u.default);r.default=p,cc._RF.pop()},{}],ULTextView:[function(e,t,i){"use strict";cc._RF.push(t,"273a9/7+31G/KIaVZ5d25Su","ULTextView");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULColor"),l=o("ULFont"),d=o("ULRect"),c=o("ULTableView"),u=o("ULTableViewStoredTextCell"),h=o("ULView"),p=o("ULViewEnum"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._tableView=null,t._font=l.default.system(17),t._textColor=s.default.Black,t._text="",t._lineBreakMode=p.ULLineBreakMode.CharWrapping,t._textAlignment=p.ULTextAligment.Left,t._lineHeigt=20,t._titleEdgeInsets=new d.ULEdgeInsets(10,10,10,10),t.willRefreshDataSource=!0,t.dataSource=[],t}return a(t,e),Object.defineProperty(t.prototype,"tableView",{get:function(){return this._tableView||(this._tableView=new c.default(this.bounds,c.ULTableViewStyle.Group),this._tableView.registerCell(u.default,"ULTableViewStoredTextCell"),this._tableView.backgroundColor=s.default.Clear,this._tableView.delegate=this,this._tableView.dataSource=this),this._tableView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this._font},set:function(e){this._font.isEqual(e)||(this._font=e,this.willRefreshDataSource=!0,this.subViewNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textColor",{get:function(){return this._textColor},set:function(e){this._textColor.isEqual(e)||(this._textColor=e,this._tableView&&this.tableView.reloadData())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text!=e&&(this._text=e,this.adapteLayoutWillChange=!0,this.willRefreshDataSource=!0,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineBreakMode",{get:function(){return this._lineBreakMode},set:function(e){this._lineBreakMode!=e&&(this._lineBreakMode=e,this.willRefreshDataSource=!0,this.subViewNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textAlignment",{get:function(){return this._textAlignment},set:function(e){this._textAlignment!=e&&(this._textAlignment=e,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeigt",{get:function(){return Math.max(this.font.fontSize,this._lineHeigt)},set:function(e){this._lineHeigt!=e&&(this._lineHeigt=e,this._tableView&&this._tableView.reloadData())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleEdgeInsets",{get:function(){return this._titleEdgeInsets},set:function(e){this._titleEdgeInsets=e,this.willRefreshDataSource=!0,this.subViewNeedsRefresh()},enumerable:!1,configurable:!0}),t.prototype.frameWillChange=function(){this.willRefreshDataSource=!0,e.prototype.frameWillChange.call(this)},t.prototype.viewWillRefresh=function(t,i){this.tableView.superView||this.addSubView(this.tableView);var n=this.bounds,o=n.width-this.titleEdgeInsets.left-this.titleEdgeInsets.right,r=n.height-this.titleEdgeInsets.top-this.titleEdgeInsets.bottom;this.tableView.frame=d.default.Init(this.titleEdgeInsets.left,this.titleEdgeInsets.top,o,r),this.willRefreshDataSource&&(this.willRefreshDataSource=!1,this.dataSource=this.font.judgeTextLine(this.lineBreakMode,this.text,o,1e3),this.tableView.reloadData()),e.prototype.viewWillRefresh.call(this,t,i)},t.prototype.heightForCell=function(){return this.lineHeigt},t.prototype.numberOfRowsInSection=function(){return this.dataSource.length},t.prototype.cellForRowAtIndexPath=function(e,t){var i=e.dequeueReusableCell("ULTableViewStoredTextCell");return i.titleLabel.titleEdgeInsets=new d.ULEdgeInsets(0,0,0,0),i.titleLabel.font=this.font,i.titleLabel.textColor=this.textColor,i.titleLabel.textAlignment=this.textAlignment,i.titleLabel.lineBreakMode=this.lineBreakMode,i.titleLabel.text=this.dataSource[t.row],i},t.prototype.numberOfSectionsInTableView=function(){return 1},t.prototype.getAutoLayoutAdapteHeight=function(e){if(this.willRefreshDataSource){this.willRefreshDataSource=!1;var t=e-this.titleEdgeInsets.left-this.titleEdgeInsets.right;this.dataSource=this.font.judgeTextLine(this.lineBreakMode,this.text,t,1e3),this.tableView.reloadData()}return this.tableView.contentSize.height+this.titleEdgeInsets.top+this.titleEdgeInsets.bottom},t}(h.default);r.default=f,cc._RF.pop()},{}],ULTipsExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"92413rkB3dJi62QbS3ECAXI","ULTipsExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULKitPop"),l=o("ULColor"),d=o("ULFont"),c=o("ULLabel"),u=o("ULStatckView"),h=o("ULViewEnum"),p=o("ULWindow"),f=o("ULBaseExecutor"),g=o("ULGoldfingerExecutor"),v=function(e){function t(){var t=e.call(this)||this;return t.tipsSetting={},t._tipsWindow=null,t._stackView=null,t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tipsWindow",{get:function(){if(!this._tipsWindow){this._tipsWindow=new p.default,this._tipsWindow.windowLevel=s.ULWindowPriority.LoadingWindow,this._tipsWindow.backgroundColor=l.default.Clear,this._tipsWindow.makeKeyAndVisible();var e=this;setInterval(function(){e._tipsWindow.hidden=!e._tipsWindow.hidden},1e3)}return this._tipsWindow},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stackView",{get:function(){var e=this;if(!this._stackView){var t=new u.default;t.spacing=10,t.axis=u.ULStatckViewAxis.Vertical,t.backgroundColor=l.default.Clear,this._stackView=t,this.tipsWindow.addSubView(t),t.ul_makeConstraints(function(t){t.width.equalTo(e.tipsWindow).multipliedBy(.8),t.centerX.and.centerY.equalTo(e.tipsWindow)})}return this._stackView},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){g.default.registerItem(this)},t.prototype.addTipsMsg=function(e,t){var i=this.tipsSetting[e];i||((i=new c.default).font=d.default.boldSystem(20),i.textColor=l.default.Red,i.numberOfLine=2,i.backgroundColor=l.default.Clear,i.textAlignment=h.ULTextAligment.Center,this.tipsSetting[e]=i,this.stackView.addSubView(i)),i.text=t},t.prototype.removeTipsMsg=function(e){var t=this.tipsSetting[e];t&&(t.removeFromSuperView(),delete this.tipsSetting[e])},t.prototype.goldfingerView=function(e){var t=this;return new g.ULGoldfingerStackView("Tips \u6a21\u5757",e,function(e){var i=t.executeSync({type:f.ULBaseExecutionEnum.RegisterSequence,endType:f.ULBaseExecutionEndEnum.All,defaultValue:[],handle:function(e,t){return t.concat(e.getGoldfingerTipsItem())}});e.addStackLabels(i)})},t.addTipsMsg=function(e,i){t.instance.addTipsMsg(e,i)},t.removeTipsMsg=function(e){t.instance.removeTipsMsg(e)},t.registerItem=function(e){t.instance.register(e)},t.removeItem=function(e){t.instance.unRegister(e)},t}(f.default);r.default=v,cc._RF.pop()},{}],ULToastViewcontroller:[function(e,t,i){"use strict";cc._RF.push(t,"be00bZ8EclJkY8ZqzTOwb4g","ULToastViewcontroller");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULKitIndexedMap"),l=o("ULColor"),d=o("ULFont"),c=o("ULRect"),u=o("ULLabel"),h=o("ULStatckView"),p=o("ULViewEnum"),f=function(e){function t(t){var i=e.call(this)||this;return i._delegate=null,i._stackView=null,i._viewTag=1,i._dataSource=new s.ULKitBaseArray({onAdd:function(e){i.addData(e.message,e.viewTag)},onRemove:function(e){i.stackView.viewForTag(e.viewTag).removeFromSuperView(),0==i._dataSource.size()&&i._delegate.toastVCWillUnDisplay()}}),i._delegate=t,i}return a(t,e),Object.defineProperty(t.prototype,"stackView",{get:function(){if(!this._stackView){var e=new h.default;e.spacing=10,e.backgroundColor=l.default.Clear,e.axis=h.ULStatckViewAxis.Vertical,e.edgeInsets=new c.ULEdgeInsets(10,10,10,10),e.alignment=h.ULStatckViewAlignment.Center,e.dstribution=h.ULStatckViewDistribution.Fill,this._stackView=e}return this._stackView},enumerable:!1,configurable:!0}),t.prototype.viewDidLoad=function(){this.initWithUserInterface(),this.autoLayoutSetting()},t.prototype.initWithUserInterface=function(){this.view.userInteractionEnabled=!1,this.view.backgroundColor=l.default.Clear,this.view.addSubView(this.stackView)},t.prototype.autoLayoutSetting=function(){var e=this;this.stackView.ul_makeConstraints(function(t){t.centerX.equalTo(e.view),t.bottom.equalTo(e.view.layout_bottom).offset(-50),t.width.equalTo(e.view).multipliedBy(.8),t.height.lessThanOrEaualTo(e.view).multipliedBy(.8)})},t.prototype.addData=function(e,t){var i=new u.default;i.tag=t,i.text=e,i.numberOfLine=2,i.font=d.default.boldSystem(20),i.textColor=l.default.Black,i.textAlignment=p.ULTextAligment.Center,i.titleEdgeInsets=new c.ULEdgeInsets(10,10,10,10),this.stackView.addSubView(i)},t.prototype.showToastMessage=function(e,t){var i=this,n=t||1e3,o={message:e,viewTag:this._viewTag++};this._dataSource.add(o),setTimeout(function(){i._dataSource.remove(o)},n)},t}(o("ULViewController").default);r.default=f,cc._RF.pop()},{}],ULTools:[function(e,t,i){"use strict";cc._RF.push(t,"ad9a8TVuN9CloHwuWDw0g67","ULTools");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.secondsTime=function(){return(new Date).getTime()/1e3},e.milliTime=function(){return(new Date).getTime()},e.timeInDay=function(){var e=this.secondsTime(),t=new Date(1e3*e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),e-t.getTime()/1e3},e.timeDay=function(e){void 0===e&&(e=this.secondsTime());var t=new Date(1e3*e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()/1e3},e.timeDayHour=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0);var n=new Date;n.setHours(e),n.setMinutes(t),n.setSeconds(i),n.setMilliseconds(0);var o=n.getTime()/1e3;return this.secondsTime()>o&&(o+=86400),o},e.isOneDay=function(e,t){var i=new Date(1e3*e),n=new Date(1e3*t);return i.getFullYear()==n.getFullYear()&&i.getMonth()==n.getMonth()&&i.getDate()==n.getDate()},e.isOneMonth=function(e,t){var i=new Date(1e3*e),n=new Date(1e3*t);return i.getFullYear()==n.getFullYear()&&i.getMonth()==n.getMonth()},e.getObjSize=function(e){if(!e)return 0;if(Array.isArray(e))return e.length;var t=0;return this.forEachMap(e,function(){t++}),t},e.random=function(e,t){return null==e&&null==t?Math.random():null==t?Math.floor(Math.random()*e+1):Math.floor(Math.random()*(t-e+1)+e)},e.scaleInRange=function(e,t,i,n,o){return t<i?(e<t&&(e=t),e>i&&(e=i)):(e<i&&(e=i),e>t&&(e=t)),(e-t)/(i-t)*(o-n)+n},e.clampf=function(e,t,i){return e<t?t:e>i?i:e},e.calcWheelTarget=function(e,t){for(var i=0,n=0;n<e.length;n++){var o=e[n],r=parseInt(o[t]);if(isNaN(r))return null;i+=r}var a=this.random(i);for(n=0;n<e.length;n++){if(o=e[n],a<=(r=parseInt(o[t])))return o;a-=r}return null},e.forEachMap=function(e,t){if(e)for(var i=Object.keys(e),n=0;n<i.length;n++){var o=i[n],r=e[o];if(null!=r&&t(o,r))break}},e.formatTime=function(e,t){var i=Math.floor(e/3600),n=Math.floor(e/60)%60,o=Math.ceil(e)%60;return t.match("%h")&&(t=t.replace("%h",i.toString())),t.match("%H")&&(t=t.replace("%H",this.format("%02d",i))),t.match("%m")&&(t=t.replace("%m",n.toString())),t.match("%M")&&(t=t.replace("%M",this.format("%02d",n))),t.match("%s")&&(t=t.replace("%s",o.toString())),t.match("%S")&&(t=t.replace("%S",this.format("%02d",o))),t},e.formatDate=function(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()},n=t;for(var o in/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+o+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return n},e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)})},e.compressUuid=function(e){for(var t="0123456789abcdef".split(""),i={},n=0;n<t.length;n++)i[t[n]]=n;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),r={};for(n=0;n<o.length;n++)r[o[n]]=n;var a=(e=e.replace(/-/g,"")).split(""),s=[];for(s.push(a[0]),s.push(a[1]),n=2;n<a.length;n+=3){var l=i[a[n]],d=i[a[n+1]],c=i[a[n+2]];s.push(o[l<<2|d>>2]),s.push(o[(3&d)<<4|c])}return s.join("")},e.decompressUuid=function(e){var t=e.split("");if(t.length<22)return e;for(var i="0123456789abcdef".split(""),n={},o=0;o<i.length;o++)n[i[o]]=o;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),a={};for(o=0;o<r.length;o++)a[r[o]]=o;var s=[];for(s.push(t[0]),s.push(t[1]),o=2;o<t.length;o+=2){var l=a[t[o]],d=a[t[o+1]];s.push(i[l>>2]),s.push(i[(3&l)<<2|d>>4]),s.push(i[15&d])}return s.splice(8,0,"-"),s.splice(13,0,"-"),s.splice(18,0,"-"),s.splice(23,0,"-"),s.join("")},e.getType=function(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]},e.clone=function(e){var t,i=this.getType(e);if(window.cc&&e instanceof window.cc.Node)return e;if("object"===i)t={};else{if("array"!==i)return e;t=[]}if("array"===i)for(var n=0,o=e.length;n<o;n++)t.push(this.clone(e[n]));else if("object"===i)for(var r in e)t[r]=this.clone(e[r]);return t},e.toArray=function(e){return Array.isArray(e)?e:[]},e.sumNumberArray=function(e){if(!Array.isArray(e))return 0;for(var t=0,i=0;i<e.length;i++){var n=e[i];isNaN(n)||(t+=n)}return t},e.getRandomValueInArray=function(e){return Array.isArray(e)?e[this.random(e.length)-1]:null},e._convert=function(e,t){e.sign=t?"":e.negative?"-":e.sign;var i=e.min-e.argument.length+1-e.sign.length,n=new Array(i<0?0:i).join(e.pad);return e.left?"0"==e.pad||t?e.sign+e.argument+n.replace(/0/g," "):e.sign+e.argument+n:"0"==e.pad||t?e.sign+n+e.argument:n+e.sign+e.argument},e.format=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0===arguments)return null;if(arguments.length<1)return null;if("string"!=typeof arguments[0])return null;if("undefined"==typeof RegExp)return null;for(var i=arguments[0],n=new RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),o=new Array,r=new Array,a=0,s=0,l=0,d=0,c="",u=null;u=n.exec(i);)u[9]&&(a+=1),s=d,l=n.lastIndex-u[0].length,r[r.length]=i.substring(s,l),d=n.lastIndex,o[o.length]={match:u[0],left:!!u[3],sign:u[4]||"",pad:u[5]||" ",min:u[6]||0,precision:u[8],code:u[9]||"%",negative:parseInt(arguments[a])<0,argument:String(arguments[a])};if(r[r.length]=i.substring(d),0==o.length)return i;if(arguments.length-1<a)return null;u=null;var h=null,p=null;for(p=0;p<o.length;p++)"%"==o[p].code?h="%":"b"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(2)),h=this._convert(o[p],!0)):"c"==o[p].code?(o[p].argument=String(String.fromCharCode(Math.abs(parseInt(o[p].argument)))),h=this._convert(o[p],!0)):"d"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument))),h=this._convert(o[p])):"f"==o[p].code?(o[p].argument=String(Math.abs(parseFloat(o[p].argument)).toFixed(o[p].precision?o[p].precision:6)),h=this._convert(o[p])):"o"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(8)),h=this._convert(o[p])):"s"==o[p].code?(o[p].argument=o[p].argument.substring(0,o[p].precision?o[p].precision:o[p].argument.length),h=this._convert(o[p],!0)):"x"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(16)),h=this._convert(o[p])):"X"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(16)),h=this._convert(o[p]).toUpperCase()):h=o[p].match,c+=r[p],c+=h;return c+r[p]},e.stringToByte=function(e){var t,i,n=new Array;t=e.length;for(var o=0;o<t;o++)(i=e.charCodeAt(o))>=65536&&i<=1114111?(n.push(i>>18&7|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)):i>=2048&&i<=65535?(n.push(i>>12&15|224),n.push(i>>6&63|128),n.push(63&i|128)):i>=128&&i<=2047?(n.push(i>>6&31|192),n.push(63&i|128)):n.push(255&i);return n},e.byteToString=function(e){if("string"==typeof e)return e;for(var t="",i=e,n=0;n<i.length;n++){var o=i[n].toString(2),r=o.match(/^1+?(?=0)/);if(r&&8==o.length){for(var a=r[0].length,s=i[n].toString(2).slice(7-a),l=1;l<a;l++)s+=i[l+n].toString(2).slice(2);t+=String.fromCharCode(parseInt(s,2)),n+=a-1}else t+=String.fromCharCode(i[n])}return t},e.createRandomString=function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz123456789",i=t.length,n="",o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*i));return n},e.createRandomUserId=function(){var e=this.generateUUID();return this.compressUuid(e)},e.createRandomOrderId=function(){return(new Date).getTime()+this.createRandomString(7)},e.compareVersion=function(e,t){for(var i=e.split("."),n=t.split("."),o=Math.max(i.length,n.length);i.length<o;)i.push("0");for(;n.length<o;)n.push("0");for(var r=0;r<o;r++){var a=parseInt(i[r]),s=parseInt(n[r]);if(a>s)return 1;if(a<s)return-1}return 0},e.substrFromByte=function(t,i){for(var n=i,o=t.split(""),r="";o.length&&n>0;){var a=o.shift();(n-=e.stringToByte(a).length)>=0?r+=a:o.unshift(a)}return{remainStr:o.join(""),cutStr:r}},e.isLayaEngine=function(){return!!window.Laya},e.startsWith=function(e,t){return e.slice(0,Math.min(e.length,t.length))==t},e.isCreator2xEngine=function(){return!!(window.cc&&window.cc.ENGINE_VERSION&&this.startsWith(window.cc.ENGINE_VERSION,"2."))},e.isCreator3xEngine=function(){return!!(window.cc&&window.cc.ENGINE_VERSION&&this.startsWith(window.cc.ENGINE_VERSION,"3."))},e.cloneDeep=function(e){return Object.assign(Object.getPrototypeOf(e),e)},e.isString=function(t){return"string"==e.getType(t)},e.isNumber=function(t){return"number"==e.getType(t)},e.isStringOrNumber=function(t){var i=e.getType(t);return"number"==i||"string"==i},e.isObject=function(t){return"object"==e.getType(t)},e.isArray=function(t){return"array"==e.getType(t)},e.isFunc=function(t){return"function"==e.getType(t)},e.getStringValue=function(t,i,n){if(void 0===n&&(n=""),e.isObject(t)&&e.isString(i)){var o=t[i];if(e.isStringOrNumber(o))return o.toString()}else if(e.isArray(t)&&e.isNumber(i)){var r=t;if(r.length>Number(i)&&(o=r[i],e.isStringOrNumber(o)))return o.toString()}return n},e.getNumberValue=function(t,i,n){if(void 0===n&&(n=0),e.isObject(t)&&e.isString(i)){var o=t[i];if(e.isStringOrNumber(o))return isNaN(Number(o))?n:Number(o)}else if(e.isArray(t)&&e.isNumber(i)&&t.length>Number(i)&&(o=t[i],e.isStringOrNumber(o)))return isNaN(Number(o))?n:Number(o);return n},e.getArrayValue=function(t,i,n){if(void 0===n&&(n=[]),e.isObject(t)&&e.isString(i)){var o=t[i];if(e.isArray(o))return o}else if(e.isArray(t)&&e.isNumber(i)){var r=t;if(r.length>Number(i)&&(o=r[i],e.isArray(o)))return o}return n},e.getObjectValue=function(t,i,n){if(void 0===n&&(n={}),e.isObject(t)&&e.isString(i)){var o=t[i];if(e.isObject(o))return o}else if(e.isArray(t)&&e.isNumber(i)){var r=t;if(r.length>Number(i)&&(o=r[i],e.isObject(o)))return o}return n},e.equals=function(e,t){var i=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t);if(i.length!=n.length)return!1;for(var o=0;o<i.length;o++){var r=i[o],a=n[o];if(!e.hasOwnProperty(a))return!1;if(e instanceof Object){if(!this.equals(e[r],t[r]))return!1}else if(e[r]!==t[r])return!1;return!0}},e.getObjMessage=function(t){var i=[];if(e.isObject(t))for(var n=0,o=Object.keys(t);n<o.length;n++){var r=o[n],a=r+":"+JSON.stringify(t[r],null,2);i.push(a)}else if(e.isArray(t))for(var s=0,l=t;s<l.length;s++){a=l[s];var d=JSON.stringify(a,null,2);i.push(d)}return i},e.safeJsonParse=function(e,t){void 0===t&&(t={});var i=t;try{i=JSON.parse(e)}catch(e){}return i||t},e.judgeSubscribeHours=function(e,t){var i=(new Date).getHours()+1,n=new Date;n.setHours(i),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0);var o=n.getTime(),r=Number(e||"0");if(!isNaN(r)){var a=o-r;if(a>=0&&a<=36e5*t)return e}return o.toString()},e}();n.default=o,cc._RF.pop()},{}],ULTouchExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"d1b85pC6rJJl7iQyYQAoowz","ULTouchExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULRect"),l=o("ULLog"),d=o("ULTools"),c=o("ULBaseExecutor"),u=o("ULGameExecutor"),h=o("ULGoldfingerExecutor"),p=function(e){function t(){var t=e.call(this)||this;return t.Tag_CODE="lllrrr",t.Goldfinger_CODE="lrlrllrr",t._isStartWork=!1,t._checkTagString="",t._lastTouchTime=0,t.initExecutor(),t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStartWork",{get:function(){return this._isStartWork},set:function(e){!this._isStartWork&&e&&(this._isStartWork=!0,this.monitorTouchStart())},enumerable:!1,configurable:!0}),t.prototype.initExecutor=function(){},t.prototype.addListener=function(){u.default.registerListener(this)},t.prototype.onModuleLoadComplete=function(){this.isStartWork=!0},t.prototype.monitorTouchStart=function(){var e=this;this.executeSync({type:c.ULBaseExecutionEnum.ChainFlashback,endType:c.ULBaseExecutionEndEnum.One,handle:function(t){t.monitorTouchStart(e.onTouchStart.bind(e))}})},t.prototype.onTouchStart=function(e,t){var i=d.default.milliTime();if(!(i-this._lastTouchTime<10)){i-this._lastTouchTime>2e3&&(this._checkTagString=""),this._lastTouchTime=i;var n=.2*t.width,o=.2*t.height,r=s.default.Init(0,0,n,o),a=s.default.Init(t.width-n,0,n,o);if(r.containPoint(e))this._checkTagString+="l";else{if(!a.containPoint(e))return void(this._checkTagString="");this._checkTagString+="r"}l.default.log("ULTouchExecutor.onTouchStart :",this._checkTagString),this._checkTagString==this.Goldfinger_CODE?h.default.show():(this._checkTagString,this.Tag_CODE)}},t.registerItem=function(e){t.instance.register(e)},t}(c.default);r.default=p,cc._RF.pop()},{}],ULUrl:[function(e,t,i){"use strict";cc._RF.push(t,"9148czmEmND5oQJ3TwJLkhm","ULUrl");var n=i;Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e){var t,i=["href","origin","protocol","host","hostname","port","pathname","search","hash"],n=/(([^:]+:)\/\/(([^:\/\?#]+)(:\d+)?))(\/[^?#]*)?(\?[^#]*)?(#.*)?/.exec(e);if(n)for(t=i.length-1;t>=0;--t)this[i[t]]=n[t]?n[t]:""},cc._RF.pop()},{}],ULUserExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"cee02PQ59VEHYlZw88jzzBz","ULUserExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULRequestOpenIdChannelType=void 0;var s=o("ULKitPop"),l=o("ULHttp"),d=o("ULLog"),c=o("ULTools"),u=o("ULBaseExecutor"),h=o("ULConfigExecutor"),p=o("ULGameExecutor"),f=o("ULGoldfingerExecutor"),g=o("ULStorageExecutor"),v=o("ULSystemExecutor");(function(e){e.HeadLine="h5headline",e.Oppo="h5oppo",e.QQ="h5qq",e.Vivo="h5vivo",e.WeiXin="h5weixin",e.KuaiShou="h5kuaishou"})(r.ULRequestOpenIdChannelType||(r.ULRequestOpenIdChannelType={}));var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onUserLogin=function(e,t){this.executeConcurrencyAll(function(i){i.onUserLogin&&i.onUserLogin(e,t)}).catch(function(e){d.default.log("ULUserListenerExecutor onUserLogin err:",e.stack),p.default.reportErrMsg("ULUserListenerExecutor onUserLogin",e.stack)})},t.prototype.onVerifyWhiteUser=function(e){this.executeConcurrencyAll(function(t){t.onVerifyWhiteUser&&t.onVerifyWhiteUser(e)}).catch(function(e){d.default.log("ULUserListenerExecutor onVerifyWhiteUser err:",e.stack),p.default.reportErrMsg("ULUserListenerExecutor onVerifyWhiteUser",e.stack)})},t}(u.default),y=function(e){function t(){var t=e.call(this)||this;return t.listenerExecutor=new _,t.sdk_userId=null,t.channel_openId=null,t._userLoginPromise=null,t.initExecutor(),t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.sdkSwitch=function(){return 1==h.default.getNumberValue("n_sdk_login_mode",1)},t.prototype.initExecutor=function(){var e=c.default.format("mUserId_%s",h.default.getStringValue("s_sdk_megadata_game_id","")),t=g.default.getStorage(e);t&&(g.default.setStorage(e,""),g.default.setStorage("ulsdk_userid",t));var i=g.default.getStorage("ulsdk_userid");if(i){var n=i.lastIndexOf("_");-1!==n&&(i=i.substring(0,n),g.default.setStorage("ulsdk_userid",i)),this.sdk_userId=i}else this.sdk_userId=c.default.createRandomUserId(),g.default.setStorage("ulsdk_userid",this.sdk_userId)},t.prototype.addListener=function(){f.default.registerItem(this)},t.prototype.userLogin=function(e){var t=this;void 0===e&&(e=void 0);var i=this;return this._userLoginPromise=this._userLoginPromise||this.executeAsync({moduleName:e,type:u.ULBaseExecutionEnum.ChainFlashback,endType:u.ULBaseExecutionEndEnum.One,promiseHandle:function(e){return new Promise(function(t,n){e.userLogin().then(function(n){var o=i.channel_openId;i.channel_openId=n.openId,t(n),i.channel_openId!=o&&i.listenerExecutor.onUserLogin(e.moduleName,i.channel_openId)}).catch(function(e){n(e)})})}}).then(function(e){return t._userLoginPromise=null,e},function(e){return t._userLoginPromise=null,Promise.reject(e)}),this._userLoginPromise},t.prototype.userMessage=function(e){return void 0===e&&(e=void 0),this.executeAsync({moduleName:e,type:u.ULBaseExecutionEnum.ChainFlashback,endType:u.ULBaseExecutionEndEnum.One,promiseHandle:function(e){return e.getUserInfo()}})},t.prototype.requestOpenId=function(e,t){return l.default.postPromise({url:v.default.commonServerUrl+"/sdkserver/userlogin",data:JSON.stringify({token:t,channel:e.toString(),gameId:Number(v.default.gameId)}),requestHeader:{"Content-Type":"application/json"}}).then(function(e){if(1==c.default.getNumberValue(e,"code")){var t=c.default.getStringValue(e,"openId"),i={};return i.avatarUrl=c.default.getStringValue(e,"headImgUrl"),i.nickName=c.default.getStringValue(e,"nickName"),{openId:t,userInfo:i}}return Promise.reject(JSON.stringify(e))})},t.prototype.verifyWhiteUser=function(e){void 0===e&&(e=void 0);var i=this;return this.userLogin(e).then(function(e){return l.default.getPromise({url:v.default.commonServerUrl+"/sdkserver/checkwhiteuser",params:{gameId:v.default.gameId,userId:t.uuid,openId:e.openId,channelId:v.default.channelId,platform:"H5"}})}).then(function(e){var t=c.default.getNumberValue(e,"code",0);return i.listenerExecutor.onVerifyWhiteUser(1==t),Promise.resolve(1==t)})},t.prototype.goldfingerView=function(e){var i=this;return new f.ULGoldfingerStackView("\u7528\u6237\u7cfb\u7edf",e,function(e){var n=0,o=["\u9ed8\u8ba4"].concat(i.getAllRegisterModuleName()),r=[{name:"\u7528\u6237\u76f8\u5173\u5f00\u5173:",value:t.isSupport}],a=[{name:"\u8bf7\u9009\u62e9\u6e20\u9053:",value:o,width:150,handle:function(e){n=e}}],l=[{name:"\u767b\u5f55\u72b6\u6001:",handle:function(){s.default.showToast({title:t.isLogin?"\u7528\u6237\u5df2\u767b\u5f55":"\u7528\u6237\u672a\u767b\u5f55"})}},{name:"\u7528\u6237\u767b\u5f55:",handle:function(){var e=o[n],t=s.default.showInformationFlow({title:"\u767b\u5f55\u6d4b\u8bd5\u6d41\u7a0b"});t.sendMessage("\u5f00\u59cb\u767b\u5f55:"+e),i.userLogin("\u9ed8\u8ba4"==e?"":e).then(function(e){t.sendMessage("\u767b\u5f55\u6210\u529f:"+JSON.stringify(e,null,2))},function(e){t.sendMessage("\u767b\u5f55\u5931\u8d25 errMsg:\n"+e)})}},{name:"\u7528\u6237\u4fe1\u606f:",handle:function(){var e=o[n],t=s.default.showInformationFlow({title:"\u6d4b\u8bd5\u83b7\u53d6\u7528\u6237\u4fe1\u606f"});t.sendMessage("\u5f00\u59cb\u83b7\u53d6:"+e),i.userMessage("\u9ed8\u8ba4"==e?"":e).then(function(e){t.sendMessage("\u83b7\u53d6\u6210\u529f:"+JSON.stringify(e,null,2))},function(e){t.sendMessage("\u83b7\u53d6\u5931\u8d25 errMsg:\n"+e)})}},{name:"\u9a8c\u8bc1\u767d\u540d\u5355:",handle:function(){var e=0==n?void 0:o[n];i.verifyWhiteUser(e).then(function(e){s.default.showToast({title:e?"\u662f\u767d\u540d\u5355\u7528\u6237":"\u4e0d\u662f\u767d\u540d\u5355\u7528\u6237"})},function(e){s.default.showToast({title:"\u9a8c\u8bc1\u9519\u8bef\n"+e})})}}];e.addStackForSwitchs(r),e.addStackMenuViews(a),e.addStackButtons(l)})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"uuid",{get:function(){return t.instance.sdk_userId},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.removeItem=function(e){t.instance.unRegister(e)},t.registerListener=function(e){t.instance.listenerExecutor.register(e)},t.removeListener=function(e){t.instance.listenerExecutor.unRegister(e)},Object.defineProperty(t,"isLogin",{get:function(){return!!t.instance.channel_openId},enumerable:!1,configurable:!0}),t.getUserInfo=function(){return t.instance.executeAsync({type:u.ULBaseExecutionEnum.ChainFlashback,endType:u.ULBaseExecutionEndEnum.One,promiseHandle:function(e){return e.getUserInfo()}})},t.getOpenIdAsync=function(){var e=t.instance;return e.channel_openId?Promise.resolve(e.channel_openId):e.userLogin().then(function(e){return Promise.resolve(e.openId)})},t.requestOpenId=function(e,i){return t.instance.requestOpenId(e,i)},t.getLoginObjectAsync=function(){return t.instance.userLogin()},t.getUserMessageAsync=function(){return t.instance.userMessage()},t}(u.default);r.default=y,cc._RF.pop()},{}],ULVibrateExecutor:[function(e,t,i){"use strict";cc._RF.push(t,"baff1Z2ijZAOL4wsw/aW3uX","ULVibrateExecutor");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULColor"),l=o("ULFont"),d=o("ULRect"),c=o("ULEventEnum"),u=o("ULButton"),h=o("ULMenuView"),p=o("ULView"),f=o("ULBaseExecutor"),g=o("ULGoldfingerExecutor"),v=function(e){function t(){var t=e.call(this)||this;return t.addListener(),t}return a(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.addListener=function(){g.default.registerItem(this)},t.prototype.goldfingerView=function(e){var i=this;return new g.ULGoldfingerStackView("\u9707\u52a8\u529f\u80fd",e,function(n){var o=[{name:"\u9707\u52a8\u529f\u80fd\u5f00\u5173:",value:t.isSupport}],r=new p.default(d.default.Init(0,0,e,40));r.backgroundColor=s.default.Clear;var a=["\u9ed8\u8ba4"].concat(i.getAllRegisterModuleName()),f=new h.default(d.default.Init(0,0,160,40));f.dataSource=a,f.font=l.default.boldSystem(16);var g=new u.default(d.default.Init(0,0,160,40));g.center=new d.ULPoint({x:e/2,y:g.center.y}),g.setTitleForState("vibrateShort()",c.ULControlState.Normal),g.font=l.default.boldSystem(20),n.addSubView(g),g.registerControlEvent(c.ULControlEvents.TouchUpInside,function(){i.vibrateHandle(!1,0==f.selectedNum?void 0:a[f.selectedNum])});var v=new u.default(d.default.Init(e-160,0,160,40));v.setTitleForState("vibrateLong()",c.ULControlState.Normal),v.font=l.default.boldSystem(20),v.registerControlEvent(c.ULControlEvents.TouchUpInside,function(){i.vibrateHandle(!0,0==f.selectedNum?void 0:a[f.selectedNum])}),r.addSubView(f),r.addSubView(g),r.addSubView(v),n.addStackForSwitchs(o),n.addStackView(r)})},t.prototype.vibrateHandle=function(e,i){void 0===i&&(i=void 0),t.instance.executeSync({moduleName:i,type:f.ULBaseExecutionEnum.ChainFlashback,endType:f.ULBaseExecutionEndEnum.One,handle:function(t){e?t.vibrateLong():t.vibrateShort()}})},Object.defineProperty(t,"isSupport",{get:function(){return t.instance.checkIsSupport()},enumerable:!1,configurable:!0}),t.registerItem=function(e){t.instance.register(e)},t.vibrateLong=function(){t.instance.vibrateHandle(!0)},t.vibrateShort=function(){t.instance.vibrateHandle(!1)},t}(f.default);r.default=v,cc._RF.pop()},{}],ULViewAttribute:[function(e,t,i){"use strict";cc._RF.push(t,"15edeOAvctKjLk+gCktWuPI","ULViewAttribute");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){this.delegate=e,this.layoutAttribute=t}return e.prototype.isEqual=function(e){return this.delegate==e.delegate&&this.layoutAttribute==e.layoutAttribute},e}();n.default=o,cc._RF.pop()},{}],ULViewConstraint:[function(e,t,i){"use strict";cc._RF.push(t,"18e8b6RXhRAu5nuZ79gznqM","ULViewConstraint");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULConstraint"),l=o("ULLayoutConstraint"),d=o("ULViewAttribute"),c=function(e){function t(i){var n=e.call(this)||this;return n._id=t.CnId++,n.hasBeenInstall=!1,n.layoutConstraint=new l.ULLayoutConstraint,n.layoutConstraint.firstLayoutAttribute=i,n}return a(t,e),t.prototype.id=function(){return this._id},Object.defineProperty(t.prototype,"layoutConstant",{set:function(e){this.layoutConstraint.layoutConstant=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layoutMultiplier",{set:function(e){this.layoutConstraint.layoutMultiplier=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layoutPriority",{set:function(e){this.layoutConstraint.layoutPriority=e},enumerable:!1,configurable:!0}),t.prototype.addConstraintWithLayoutAttribute=function(e){return this.delegate.constraintAddLayoutAttribute(this,e)},t.prototype.equalToWithRelation=function(e,t){return this.layoutConstraint.layoutRelation=t,"number"==typeof e?this.offset(e):e instanceof d.default?this.layoutConstraint.secondLayoutAttribute=e:this.layoutConstraint.secondLayoutAttribute=new d.default(e.creatLayoutDelegate(),this.layoutConstraint.firstLayoutAttribute.layoutAttribute),this},t.prototype.isEqual=function(e){return this.layoutConstraint.isEqual(e.layoutConstraint)},t.prototype.checkEffective=function(){this.layoutConstraint.check()||this.uninstall()},t.prototype.install=function(){if(!this.hasBeenInstall){this.hasBeenInstall=!0;var e=this.layoutConstraint.firstLayoutAttribute.delegate;if(this.updateExisting)for(var t=0,i=[].concat(e.getInstallViewConstraints());t<i.length;t++){var n=i[t];this.isEqual(n)&&(n.installConstraint.uninstall(),e.getInstallViewConstraints().remove(n))}this.layoutConstraint.install(this),e.getInstallViewConstraints().add(this)}},t.prototype.uninstall=function(){this.layoutConstraint.firstLayoutAttribute.delegate.getInstallViewConstraints().remove(this),this.layoutConstraint.uninstall(this)},t.CnId=0,t}(s.default);r.default=c,cc._RF.pop()},{}],ULViewController:[function(e,t,i){"use strict";cc._RF.push(t,"93b48XmQUhE55G/RmZspIQx","ULViewController");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULScreen"),l=function(e){function t(t,i,n){var o=e.call(this,t)||this;return o.extendSuperViewSolver=!1,o.isDidLoad=!1,o._delegate=i,o._nextResponder=n,o}return a(t,e),Object.defineProperty(t.prototype,"nextResponder",{get:function(){return this._nextResponder},enumerable:!1,configurable:!0}),t.prototype.viewWillRefresh=function(){this.isDidLoad||(this.isDidLoad=!0,this._delegate.viewDidLoad())},t.prototype.viewWillDisplayToWindow=function(){this._delegate.viewWillAppear()},t.prototype.viewWillUnDisplayToWindow=function(){this._delegate.viewWillDisAppear()},t}(o("ULView").default),d=function(){function e(){this._window=null,this.view=new l(s.default.bounds,{viewDidLoad:this.viewDidLoad.bind(this),viewWillAppear:this.viewWillAppear.bind(this),viewWillDisAppear:this.viewWillDisAppear.bind(this)},this)}return e.prototype.viewDidLoad=function(){},e.prototype.viewWillAppear=function(){},e.prototype.viewWillDisAppear=function(){},Object.defineProperty(e.prototype,"window",{get:function(){return this._window},enumerable:!1,configurable:!0}),e.prototype.pushToWindow=function(e){this._window=e},e.prototype.popFromWindow=function(){this._window=null},Object.defineProperty(e.prototype,"nextResponder",{get:function(){return this.window},enumerable:!1,configurable:!0}),e.prototype.touchesBegan=function(){},e.prototype.touchesMoved=function(){},e.prototype.touchesEnded=function(){},e.prototype.touchesCancelled=function(){},e.prototype.popViewController=function(){this.window&&this.window.popViewController(this)},e}();r.default=d,cc._RF.pop()},{}],ULViewEnum:[function(e,t,i){"use strict";cc._RF.push(t,"185a8SG6StJX5K14d5m4ino","ULViewEnum");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.ULLineBreakMode=n.ULViewContentMode=n.ULTextAligment=void 0,function(e){e.Left="left",e.Center="center",e.Right="right"}(n.ULTextAligment||(n.ULTextAligment={})),function(e){e[e.ToFill=0]="ToFill",e[e.AspectFit=1]="AspectFit",e[e.AspectFill=2]="AspectFill",e[e.Center=3]="Center",e[e.Top=4]="Top",e[e.Bottom=5]="Bottom",e[e.Left=6]="Left",e[e.Right=7]="Right",e[e.TopLeft=8]="TopLeft",e[e.TopRight=9]="TopRight",e[e.BottomLeft=10]="BottomLeft",e[e.BottomRight=11]="BottomRight"}(n.ULViewContentMode||(n.ULViewContentMode={})),function(e){e[e.WordWrapping=0]="WordWrapping",e[e.CharWrapping=1]="CharWrapping",e[e.Clip=2]="Clip",e[e.TruncateHead=3]="TruncateHead",e[e.TruncateMiddle=4]="TruncateMiddle",e[e.TruncateTail=5]="TruncateTail"}(n.ULLineBreakMode||(n.ULLineBreakMode={})),cc._RF.pop()},{}],ULView:[function(e,t,i){"use strict";cc._RF.push(t,"660c8FNfExG/JEtwuuFyWZb","ULView");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ULPanelCtxManager"),l=o("ULColor"),d=o("ULLayoutBase"),c=o("ULRect"),u=function(e){function t(t){void 0===t&&(t=c.default.Zero);var i=e.call(this,t)||this;return i._superView=null,i._subViews=[],i.tag=0,i._alpha=1,i._hidden=!1,i._clipsToBounds=!0,i.userInteractionEnabled=!0,i.allowEventPass=!0,i._backgroundColor=l.default.White,i._willNeedsRefresh=!1,i._panel=null,i._isDisplay=!1,i._hadRefresh=!1,i._willHandleDid=!1,i._disPlayRect=c.default.Zero,i._clipRect=c.default.Zero,i._lastShowingViewList=[],i._showingViewList=[],i}return a(t,e),Object.defineProperty(t.prototype,"superView",{get:function(){return this._superView},enumerable:!1,configurable:!0}),t.prototype.setSuperView=function(e){this._superView!=e&&(this.supLayoutBaseWillChange(),this._superView=e,this.supLayoutBaseDidChange())},Object.defineProperty(t.prototype,"subViews",{get:function(){return[].concat(this._subViews)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supLayoutBase",{get:function(){return this.superView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subLayoutBases",{get:function(){return this.subViews},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){this._alpha!=e&&(this._alpha=e,this.subViewNeedsRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this._hidden},set:function(e){this._hidden=e,this.superView&&this.superView.subViewNeedsRefresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clipsToBounds",{get:function(){return this._clipsToBounds},set:function(e){this._clipsToBounds=e,this.subViewNeedsRefresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor.isEqual(e)||(this._backgroundColor=e,this.setNeedsRefresh())},enumerable:!1,configurable:!0}),t.prototype.addSubView=function(e){this.insertSubView(this._subViews.length,e)},t.prototype.insertSubView=function(e,t){if(t.superView!=this){t.removeFromSuperView();var i=Math.min(Math.max(e,0),this._subViews.length);this._subViews.splice(i,0,t),t.setSuperView(this),this.subViewNeedsRefresh()}else{var n=this._subViews.indexOf(t);if(n==e)return;n>=0&&this._subViews.splice(n,1);var o=Math.min(Math.max(e,0),this._subViews.length);this._subViews.splice(o,0,t)}},t.prototype.removeSubView=function(e){if(e.superView==this){e.setSuperView(null);var t=this._subViews.indexOf(e);t>=0&&this._subViews.splice(t,1),this.subViewNeedsRefresh()}},t.prototype.removeFromSuperView=function(){this.superView&&this.superView.removeSubView(this)},t.prototype.removeAllSubView=function(){for(var e=0,t=this._subViews;e<t.length;e++)t[e].removeFromSuperView()},t.prototype.viewForTag=function(e){for(var t=0,i=this._subViews;t<i.length;t++){var n=i[t];if(n.tag==e)return n}return null},t.prototype.frameWillChange=function(){},t.prototype.frameDidChange=function(){this.setNeedsRefresh()},t.prototype.setNeedsRefresh=function(){this.recyclePanel(),this.subViewNeedsRefresh()},t.prototype.subViewNeedsRefresh=function(){this._willNeedsRefresh||(this._willNeedsRefresh=!0,this.superView&&this.superView.subViewNeedsRefresh())},Object.defineProperty(t.prototype,"panel",{get:function(){if(!this._panel){var e=this.bounds;this._panel=s.ULPanelCtxManager.creatPanelCtx(),this._panel.width=e.width,this._panel.height=e.height,this._panel.clearRect(),this.drawRect(this._panel,e)}return this._panel},enumerable:!1,configurable:!0}),t.prototype.recyclePanel=function(){this._panel&&(this._panel.clearRect(),this._panel=null)},t.prototype.drawRect=function(e,t){this.backgroundColor.a<.01||(e.fillStyle=this.backgroundColor,e.fillRect(t.x,t.y,t.width,t.height))},t.prototype.drawMergePanel=function(e,t){this.prepareToDraw(t,t),this.checkLastShowingView(),this.beginDrawingLogic(e),this.afterCheckLastShowingView(),this.afterToDraw()},t.prototype.clearMergePanel=function(){this.checkLastShowingView(),this.afterCheckLastShowingView()},t.prototype.prepareToDraw=function(e,t){this._showingViewList=[];var i=this.frame,n=c.default.Init(t.x+i.x,t.y+i.y,i.width,i.height),o=c.default.intersectionRect(e,n),r=o.width>0&&o.height>0&&!this.hidden&&this.alpha>.01;this._disPlayRect=o,r&&(this._hadRefresh=!0,this._clipRect=o.rectFrom(n),this.viewWillRefresh(this._disPlayRect,this._clipRect),this.layoutIfNeeded()),r!=this._isDisplay&&(this._isDisplay=r,this._willHandleDid=!0,r?this.viewWillDisplayToWindow():this.viewWillUnDisplayToWindow());for(var a=0;a<this._subViews.length;a++){var s=this._subViews[a];s.prepareToDraw(r?this.clipsToBounds?o:e:c.default.Zero,n),s._hadRefresh&&this._showingViewList.push(s)}},t.prototype.checkLastShowingView=function(){for(var e=0;e<this._lastShowingViewList.length;e++){var t=this._lastShowingViewList[e];t.checkLastShowingView(),t._hadRefresh||(t._isDisplay=!1,t._willHandleDid=!0,t.viewWillUnDisplayToWindow())}},t.prototype.beginDrawingLogic=function(e){this.panel&&e.drawClipImage(this._panel,this._clipRect.x,this._clipRect.y,this._clipRect.width,this._clipRect.height,this._disPlayRect.x,this._disPlayRect.y,this._clipRect.width,this._clipRect.height);for(var t=0;t<this._subViews.length;t++){var i=this._subViews[t];i._hadRefresh&&i.beginDrawingLogic(e)}},t.prototype.afterCheckLastShowingView=function(){for(var e=0;e<this._lastShowingViewList.length;e++){var t=this._lastShowingViewList[e];t.afterCheckLastShowingView(),t._willHandleDid&&(t._willHandleDid=!1,t.viewDidUnDisplayToWindow())}this._lastShowingViewList=[]},t.prototype.afterToDraw=function(){this._willHandleDid&&(this._willHandleDid=!1,this._isDisplay?this.viewDidDisplayToWindow():this.viewDidUnDisplayToWindow());for(var e=0;e<this._subViews.length;e++)this._subViews[e].afterToDraw();this._willNeedsRefresh=!1,this._hadRefresh=!1,this._lastShowingViewList=this._showingViewList,this._showingViewList=[]},Object.defineProperty(t.prototype,"isDisplay",{get:function(){return this._isDisplay},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disPlayRect",{get:function(){return this._disPlayRect.copy()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clipRect",{get:function(){return this._clipRect.copy()},enumerable:!1,configurable:!0}),t.prototype.viewWillRefresh=function(){},t.prototype.viewWillDisplayToWindow=function(){},t.prototype.viewDidDisplayToWindow=function(){},t.prototype.viewWillUnDisplayToWindow=function(){},t.prototype.viewDidUnDisplayToWindow=function(){this.recyclePanel()},Object.defineProperty(t.prototype,"nextResponder",{get:function(){return this.superView},enumerable:!1,configurable:!0}),t.prototype.touchesBegan=function(e,t){this.allowEventPass&&this.nextResponder&&this.nextResponder.touchesBegan(e,t)},t.prototype.touchesMoved=function(e,t){this.allowEventPass&&this.nextResponder&&this.nextResponder.touchesMoved(e,t)},t.prototype.touchesEnded=function(e,t){this.allowEventPass&&this.nextResponder&&this.nextResponder.touchesEnded(e,t)},t.prototype.touchesCancelled=function(e,t){this.allowEventPass&&this.nextResponder&&this.nextResponder.touchesCancelled(e,t)},t.prototype.hitText=function(e,t){if(!this._isDisplay)return null;if(!this.pointInside(e,t))return null;for(var i=this._subViews,n=i.length-1;n>=0;n--){var o=i[n].hitText(e,t);if(o)return o}return this},t.prototype.pointInside=function(e){return!this._hidden&&!!this.userInteractionEnabled&&this._disPlayRect.containPoint(e)},t}(d.default);r.default=u,cc._RF.pop()},{}],ULWebSocket:[function(e,t,i){"use strict";cc._RF.push(t,"58b10UUCwZDD5oy03Kw6hqz","ULWebSocket");var n=i;Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e){if(this.socketingWS=null,this.isOpening=!1,this.socketMsgCache=[],this._isAutoClearCache=!1,this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,"WebSocket"in window){var t=this;try{var i=new WebSocket(e);this.socketingWS=i,i.onopen=function(){t.isOpening=!0,t.onopen&&t.onopen()},i.onmessage=function(){t.onmessage&&t.onmessage("")},i.onclose=function(){t.isOpening=!1,t.socketingWS=null,t.socketMsgCache=[],t.onclose&&t.onclose()},i.onerror=function(e){t.isOpening=!1,t.socketingWS=null,t.socketMsgCache=[],t.onerror&&t.onerror(JSON.stringify(e))}}catch(e){Promise.resolve().then(function(){t.onerror&&t.onerror(e.stack)})}}}return Object.defineProperty(e.prototype,"isAutoClearCache",{set:function(e){var t=this;e!=this._isAutoClearCache&&(this._isAutoClearCache=e,this._isAutoClearCache?this.intervalId=setInterval(function(){t.clearCache()},25):clearInterval(this.intervalId))},enumerable:!1,configurable:!0}),e.prototype.close=function(){this.isOpening&&this.socketingWS&&(this.socketingWS.close(),this.isOpening=!1,this.socketingWS=null)},e.prototype.send=function(e){if(this.socketingWS){var t=null;try{t=JSON.stringify(e)}catch(e){t=JSON.stringify({type:3,data:e.stack})}finally{!this.isOpening||this._isAutoClearCache?(this.socketMsgCache.push(t),this.isAutoClearCache=!0):this.socketingWS.send(t)}}},e.prototype.clearCache=function(){if(this.socketingWS&&this.socketMsgCache.length){if(this.isOpening){var e=this.socketMsgCache.shift();this.socketingWS.send(e)}}else this.isAutoClearCache=!1},e}();n.default=o,cc._RF.pop()},{}],ULWindow:[function(e,t,i){"use strict";cc._RF.push(t,"324c7lDcc5EyKa0rABzuGID","ULWindow");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ULPopViewControllerStyle=void 0;var s,l=o("ULApplication"),d=o("ULColor"),c=o("ULView"),u=o("ULScreen"),h=o("ULKitIndexedMap");(function(e){e[e.Default=0]="Default",e[e.Popup=1]="Popup"})(s=r.ULPopViewControllerStyle||(r.ULPopViewControllerStyle={}));var p=function(e){function t(t){void 0===t&&(t=u.default.bounds);var i=e.call(this,t)||this;return i.extendSuperViewSolver=!1,i._vcStack=new h.ULKitBaseArray({onAdd:function(){i.vcStackDidChange()},onRemove:function(){i.vcStackDidChange()}}),i.allowHit=!1,i.windowLevel=0,i.backgroundColor=d.default.Clear,i}return a(t,e),t.prototype.vcStackDidChange=function(){},Object.defineProperty(t.prototype,"viewControllers",{get:function(){var e=[];return this._vcStack.items.forEach(function(t){e.push(t.vc)}),e},enumerable:!1,configurable:!0}),t.prototype.viewWillRefresh=function(t,i){for(var n=this._vcStack.items,o=!0;n.length>0;){var r=n.pop();o?this.insertSubView(0,r.vc.view):this.removeSubView(r.vc.view),r.style==s.Default&&(o=!1)}e.prototype.viewWillRefresh.call(this,t,i)},t.prototype.hitText=function(t,i){var n=e.prototype.hitText.call(this,t,i);return n!=this||this.allowHit?n:null},t.prototype.makeKeyAndVisible=function(){l.default.registerWindow(this)},t.prototype.resignKeyWindow=function(){l.default.logoutWindow(this)},t.prototype.pushViewController=function(e,t){void 0===t&&(t=s.Default),this._vcStack.add({vc:e,style:t}),e.pushToWindow(this),this.subViewNeedsRefresh()},t.prototype.popViewController=function(e){for(;this._vcStack.size();){var t=this._vcStack.pop().vc;if(e.popFromWindow(this),this.removeSubView(t.view),t==e)break}},t.prototype.popLastViewController=function(){if(!(this._vcStack.size()<=1)){var e=this._vcStack.pop().vc;e.popFromWindow(this),this.removeSubView(e.view)}},t.prototype.popToViewController=function(e){for(;this._vcStack.size();){var t=this._vcStack[this._vcStack.size()-1].vc;if(t==e)break;this._vcStack.pop(),this.removeSubView(t.view),t.popFromWindow(this)}},t}(c.default);r.default=p,cc._RF.pop()},{}],ULiOSBridge:[function(e,t,i){"use strict";cc._RF.push(t,"b3adcFtv/ZF2pVcXuXk4cPW","ULiOSBridge");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("ULBase64"),a=n("ULTools"),s=function(e,t,i){void 0===i&&(i=!1),this.key=e,this.action=t,this.allTime=i},l=function(){function e(){this.code=1,this.actionCache={},window.sendMessageToGame=this.receiveFromOC.bind(this)}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.trimParameter=function(t){if(t instanceof Function)return e.registerCallback(t);if(t instanceof Array){for(var i=[],n=0,o=t;n<o.length;n++){var r=o[n];i.push(this.trimParameter(r))}return i}if(t instanceof Object){for(var a={},s=0,l=Object.keys(t);s<l.length;s++){var d=l[s];a[d]=this.trimParameter(t[d])}return a}return t},e.prototype.receiveFromOC=function(t,i){var n=r.default.decode(t),o=this.actionCache[n];if(o){o.allTime||e.removeCallback(n);var s=r.default.decode(i),l=a.default.safeJsonParse(s),d=a.default.isArray(l)&&l.length>0?o.action.apply(o,l):o.action();return JSON.stringify(d||"")}console.error("ULiOSBridge.receiveFromOC not contain key:"+n)},e.performToOC=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=this.instance.trimParameter(t);if(window.cc)return window.jsb&&window.jsb.reflection?window.jsb.reflection.callStaticMethod("ULBridgeMiddle","didReceiveSelName:parameter:",e,JSON.stringify(n)):window.cc.native.reflection.callStaticMethod("ULBridgeMiddle","didReceiveSelName:parameter:",e,JSON.stringify(n))},e.registerCallback=function(t,i){if(void 0===i&&(i=!1),t instanceof Function){var n=e.instance;n.code++;var o="ULiOSBridge_key:"+n.code,r=new s(o,t,i);return n.actionCache[o]=r,o}},e.removeCallback=function(t){delete e.instance.actionCache[t]},e}();o.default=l,cc._RF.pop()},{}],UnitTestCase:[function(e,t,i){"use strict";cc._RF.push(t,"1575fu8zohGiKKS7rO7tRc3","UnitTestCase");var n=i,o=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(){function e(){this.assertCount=0,this.assertFaildCount=0}return e.prototype.prepare=function(){},e.prototype.run=function(){},e.prototype.cleanup=function(){},e.prototype.assertEquals=function(e,t,i){this.assertCount++,i!=t?(cc.warn(ul.format("%s: \u65ad\u8a00\u5f02\u5e38\uff1a%s \u671f\u671b==[%s] \u5b9e\u9645\u503c\uff1a[%s]",this.name,e,i,t)),this.assertFaildCount++):this.isLogPassInfo()&&cc.log(ul.format("%s: \u65ad\u8a00\u901a\u8fc7: %s",this.name,e))},e.prototype.assertNotEquals=function(e,t,i){this.assertCount++,i==t?(cc.warn(ul.format("%s: \u65ad\u8a00\u5f02\u5e38\uff1a%s \u671f\u671b!=[%s] \u5b9e\u9645\u503c\uff1a[%s]",this.name,e,i,t)),this.assertFaildCount++):this.isLogPassInfo()&&cc.log(ul.format("%s: \u65ad\u8a00\u901a\u8fc7: %s",this.name,e))},e.prototype.isLogPassInfo=function(){return!1},o([a],e)}());n.default=s,cc._RF.pop()},{}],UpdaterScript:[function(e,t,i){"use strict";cc._RF.push(t,"24a3c2rF15LsLbFwlhUJVXe","UpdaterScript");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("Timer"),a=n("Const"),s=n("mgrDirector"),l=n("LayerColor"),d=function(){function e(e,t){this.patchInfo=null,this.localPid=null,this.patchs=null,this.patchIdx=null,this.TIMEOUT=5,this.requestPatchInfoXhr=null,this.timeoutTimer=null,this.bNeedRestart=!1,this.bGameStarted=!1;var i=new cc.Node;i.parent=e,this.nodeRoot=i,this.onUiMsgCallback=t}return e.prototype.startUpdate=function(){var e=this;cc.sys.isNative&&jsb.fileUtils.isFileExist("src/patch_info.json")?(cc.log("\u53d1\u73b0patch_info.json\uff0c\u51c6\u5907\u66f4\u65b0"),this.needPlayLogo()?this.playLogo(function(){e.prepareUpdate()}):this.prepareUpdate()):(cc.log("patch_info.json\u672a\u627e\u5230\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f"),this.startGame())},e.prototype.buildUi=function(){},e.prototype.sendUiMsg=function(e,t){this.onUiMsg(e,t)},e.prototype.onUiMsg=function(e,t){this.onUiMsgCallback&&this.onUiMsgCallback(e,t)},e.prototype.needPlayLogo=function(){if("true"==cc.sys.localStorage.getItem("B_SKIP_LOGO_ONCE"))return cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","false"),!1;var e=this.getLogoTextures();return!(!e||0==e.length)},e.prototype.getLogoTextures=function(){var e,t=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(t&&(e=JSON.parse(t)),!e)return null;var i=e.CONF;if(!i)return null;var n=i.LOGO_TEXTURES;return Array.isArray(n)?n:null},e.prototype.playLogo=function(e){var t=this;cc.log("-------------------------"),cc.log("-----   playLogo    -----"),cc.log("-------------------------");for(var i=this.getLogoTextures(),n=i.length-1;n>=0;n--){var o=i[n];cc.resources.get(o)||(cc.warn(ul.format("UpdaterScript.playLogo logoTexture not found! fileName=[%s]",o)),i.splice(n,1))}if(i.length<=0)e();else{this.sendUiMsg("UPDATER_UI_MSG_PLAY_LOGO_BEGIN");var r=this.nodeRoot.children||[],a=r.length;if(a>0){for(n=a-1;n>=0;n--){var d=r[n];d.stopAllActions(),d.destroy()}this.nodeRoot.removeAllChildren()}var c=new l.default(cc.color(0,0,0,255));for(c.parent=this.nodeRoot,c.setContentSize(s.default.size),n=0;n<i.length;n++){o=i[n];var u=s.default.createSpriteNode(o);u.parent=this.nodeRoot,u.opacity=0;var h=[];n>0&&h.push(cc.delayTime(3*n)),h.push(cc.fadeIn(.6)),h.push(cc.delayTime(1.8)),h.push(cc.fadeOut(.6)),n==i.length-1&&h.push(cc.callFunc(function(){t.sendUiMsg("UPDATER_UI_MSG_PLAY_LOGO_END"),c.destroy(),e()}));var p=cc.sequence(h);u.runAction(p)}}},e.prototype.startGame=function(e){if(this.bGameStarted)cc.warn("vUpdataerSceneBase.startGame already started!");else{if(this.bGameStarted=!0,e&&this.patchInfo){var t=cc.sys.localStorage.getItem("GAME_VERSION");if(t)a.default.GAME_VERSION=t;else{var i=this.patchInfo.VERSION;i&&(cc.sys.localStorage.setItem("GAME_VERSION",i),a.default.GAME_VERSION=i)}}if(this.releaseAssetsManager(),this.releaseRequestPatchInfoXhr(),this.bNeedRestart)return cc.log("-------------------------"),cc.log("-----  restarting   -----"),cc.log("-------------------------"),cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","true"),cc.audioEngine.stopAll(),void cc.game.restart();cc.sys.localStorage.setItem(a.default.FORCE_PATCH_CHANNEL_NAME_KEY,""),cc.log("-------------------------"),cc.log("-----   startGame   -----"),cc.log("-------------------------"),this.sendUiMsg("UPDATER_UI_MSG_ENTER_NEXT_SCENE")}},e.prototype.resetPatch=function(e,t,i,n){cc.log("-------------------------"),cc.log("-----  resetPatch   -----"),cc.log("-------------------------"),cc.log("resetTip",e);var o=this.getPatchPath();jsb.fileUtils.isDirectoryExist(o)&&jsb.fileUtils.removeDirectory(o),cc.sys.localStorage.setItem("PATCH_BID",t.toString()),cc.sys.localStorage.setItem("PATCH_PID",i.toString()),cc.sys.localStorage.setItem("PATCH_PACKAGE_PID",i.toString()),cc.sys.localStorage.setItem("PATCH_CHANNEL",n),cc.sys.localStorage.setItem("GAME_VERSION",""),this.bNeedRestart=!0},e.prototype.prepareUpdate=function(){var e=this;cc.log("-------------------------"),cc.log("----- prepareUpdate -----"),cc.log("-------------------------");var t,i=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(i&&(t=JSON.parse(i)),!t)return cc.warn("[warn] patch_info.json \u52a0\u8f7d\u5931\u8d25\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f\u3002"),void this.startGame();this.patchInfo=t;var n=cc.sys.localStorage.getItem("GAME_VERSION");n||(n=t.VERSION),a.default.GAME_VERSION=n;var o=t.B_ID,r=t.P_ID,s=t.CHANNEL,l=parseInt(cc.sys.localStorage.getItem("PATCH_BID")),d=parseInt(cc.sys.localStorage.getItem("PATCH_PID")),c=parseInt(cc.sys.localStorage.getItem("PATCH_PACKAGE_PID")),u=cc.sys.localStorage.getItem("PATCH_CHANNEL"),h=null,p=!1;o!=l?(h=ul.format("bid not match! package = %s, record = %d",o,l),l&&!isNaN(l)&&(p=!0)):s!=u?(h=ul.format("channel not match! package = %s, record = %d",s,u),u&&""!=u&&(p=!0)):r!=c?(h=ul.format("package pid not match! package = %s, record = %d",r,c),c&&!isNaN(c)&&(p=!0)):r>(isNaN(d)?0:d)&&(h=ul.format("package pid is higher! package = %s, record = %s",r,d),d&&!isNaN(d)&&(p=!0)),h&&(p&&function(){e.bNeedRestart=!0;var i=t.VERSION||"1101";cc.sys.localStorage.setItem("GAME_VERSION",i),a.default.GAME_VERSION=i}(),this.resetPatch(h,o,r,s));var f=null;(d=parseInt(cc.sys.localStorage.getItem("PATCH_PID")))?(f=d,cc.log("use record pid",f)):(f=t.P_ID||0,cc.log("use patch_info pid",f)),this.localPid=f;var g=this.getPatchPath();if(!jsb.fileUtils.createDirectory(g))return cc.log("patchPath create faild!",g),void this.startGame();this.buildUi(),this.checkNewVersion()},e.prototype.checkNewVersion=function(){var e=this;this.sendUiMsg("UPDATER_UI_MSG_GET_VERSION");var t=this.patchInfo,i=t.CHANNEL,n=cc.sys.localStorage.getItem(a.default.FORCE_PATCH_CHANNEL_NAME_KEY);n&&""!=n&&(i=n);var o=ul.format("http://%s/%s/%s/%s/%s",t.HOST,t.PATCH_PATH,t.APP,i,t.PATCH_INFO_FILENAME),r=cc.loader.getXMLHttpRequest();r.onreadystatechange=function(){if(4==r.readyState)if(r.status>=200&&r.status<207){e.stopTimeoutTimer();var t=void 0;try{t=JSON.parse(r.response)}catch(t){cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse except!",r.response),e.startGame()}t?(e.releaseRequestPatchInfoXhr(),e.onPatchInfoDownloadSuccess(t)):(cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse faild!",r.response),e.startGame())}else cc.warn("vUpdateScene.checkNewVersion network faild."),e.startGame()},r.open("GET",o),r.timeout=1e3*this.TIMEOUT,this.requestPatchInfoXhr=r,this.startTimeoutTimer(),r.send()},e.prototype.onPatchInfoDownloadSuccess=function(e){var t=this;cc.log("onPatchInfoDownloadSuccess",e),ul.dump(e);var i=parseInt(e.P_ID)||0,n=this.localPid;if(cc.log("pid:",n,i),e&&e.CONF&&cc.sys.localStorage.setItem("REMOTE_PATCH_INFO_CONF",JSON.stringify(e.CONF||{holder:"nothing"})),n>i)return cc.sys.localStorage.setItem("GAME_VERSION",""),cc.warn("local version is higher than remote version"),cc.warn("stop update!"),void this.startGame(!0);for(var o=[],a=0;a<e.PATCH_LIST.length;a++){var s=e.PATCH_LIST[a];s.pid>n&&(cc.log("ADD PATCH ->",s.pid,s.version),o.push(s))}this.patchInfo=e,o.length>0?(this.patchs=o,this.patchIdx=0,r.default.callLater(.016,function(){t.downloadPatchByIndexed()})):this.startGame(!0)},e.prototype.downloadPatchByIndexed=function(){this.releaseAssetsManager(),cc.log("downloadPatchByIndexed",this.patchIdx);var e=this.patchInfo,t=e.CHANNEL,i=cc.sys.localStorage.getItem(a.default.FORCE_PATCH_CHANNEL_NAME_KEY);i&&""!=i&&(t=i);var n=this.patchs[this.patchIdx],o=ul.format("http://%s/%s/%s/%s/%s/",e.HOST_CDN||e.HOST,e.PATCH_PATH,e.APP,t,e.B_ID);cc.log("packageUrl",ul.format("%s%d.zip",o,n.pid));var s={};s[ul.format("%d.zip",n.pid)]={size:0,md5:"",compressed:!0};var l=JSON.stringify({packageUrl:o,version:(this.localPid-1).toString()}),d=new jsb.Manifest(l,this.getPatchPath()),c=JSON.stringify({packageUrl:o,version:n.pid.toString(),assets:s}),u=new jsb.Manifest(c,this.getPatchPath()),h=new jsb.AssetsManager("",this.getPatchPath());h.setEventCallback(this.onAssetsManagerEvent.bind(this)),this.assetsManager=h;var p=new r.default(.016,-1,function(){cc.isValid(h)&&h.update()});this.assetsManagerTimer=p,h.loadLocalManifest(d,this.getPatchPath()),h.loadRemoteManifest(u),h.setVersionCompareHandle(function(e,t){return parseFloat(e)-parseFloat(t)}),h.setVerifyCallback(function(){return!0}),p.startAndBindToNode(this.nodeRoot)},e.prototype.onPatchDownloadSuccess=function(){var e=this.patchs[this.patchIdx];this.localPid=e.pid,cc.sys.localStorage.setItem("PATCH_PID",this.localPid.toString()),cc.log("save PATCH_PID",this.localPid),e.version&&(cc.sys.localStorage.setItem("GAME_VERSION",e.version),cc.log("save GAME_VERSION",e.version)),this.bNeedRestart=!0,cc.log("check patchIdx",this.patchIdx,this.patchs.length),this.patchIdx<this.patchs.length-1?(this.patchIdx++,this.downloadPatchByIndexed()):(this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_SUCCESS"),this.startGame(!0))},e.prototype.onAssetsManagerEvent=function(e){switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_NO_LOCAL_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_DOWNLOAD_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_PARSE_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:cc.log("onAssetsManagerEvent.NEW_VERSION_FOUND");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:cc.log("onAssetsManagerEvent.ALREADY_UP_TO_DATE");var t=this.patchs||[];this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1,patchCount:t.length,patchIdx:this.patchIdx||0}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:cc.log("onAssetsManagerEvent.UPDATE_PROGRESSION"),t=this.patchs||[],this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:e.getPercent()||0,filePercent:e.getPercentByFile()||0,patchCount:t.length,patchIdx:this.patchIdx||0});break;case jsb.EventAssetsManager.ASSET_UPDATED:cc.log("onAssetsManagerEvent.ASSET_UPDATED");break;case jsb.EventAssetsManager.ERROR_UPDATING:cc.log("onAssetsManagerEvent.ERROR_UPDATING"),this.startGame();break;case jsb.EventAssetsManager.UPDATE_FINISHED:cc.log("onAssetsManagerEvent.UPDATE_FINISHED"),t=this.patchs||[],this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1,patchCount:t.length,patchIdx:this.patchIdx||0}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_FAILED:cc.log("onAssetsManagerEvent.UPDATE_FAILED"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:cc.log("onAssetsManagerEvent.ERROR_DECOMPRESS"),this.startGame();break;default:cc.log("onAssetsManagerEvent.unknown code",e.getEventCode()),this.startGame()}},e.prototype.getPatchPath=function(){var e=jsb.fileUtils.getWritablePath(),t=e.substr(e.length-1,1);return"/"==t||"\\"==t?e+"patch/":e+"/patch/"},e.prototype.onTimeout=function(){this.startGame()},e.prototype.startTimeoutTimer=function(){var e=this,t=new r.default(this.TIMEOUT,1,function(){e.stopTimeoutTimer(),e.onTimeout()});this.timeoutTimer=t,t.startAndBindToNode(this.nodeRoot)},e.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},e.prototype.releaseRequestPatchInfoXhr=function(){this.requestPatchInfoXhr&&(this.requestPatchInfoXhr.abort(),this.requestPatchInfoXhr=null)},e.prototype.releaseAssetsManager=function(){this.assetsManagerTimer&&(this.assetsManagerTimer.stop(),this.assetsManagerTimer=null),this.assetsManager&&(this.assetsManager.setEventCallback(null),this.assetsManager=null)},e}();o.default=d,cc._RF.pop()},{}],ViewBase:[function(e,t,i){"use strict";cc._RF.push(t,"61455sbxEVAr5Ssh4NM0iMG","ViewBase");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("mgrCfg"),l=o("mgrDirector"),d=o("mgrSdk"),c=o("LifeCycleMonitor"),u=o("MsgHandler"),h=o("SyncMonitor"),p=o("Timer"),f=o("Tools"),g=o("UITools"),v=function(e){function t(i){void 0===i&&(i={});var n=e.call(this)||this;return n._customUuid=0,t.GLOBAL_CUSTOM_UUID++,n._customUuid=t.GLOBAL_CUSTOM_UUID,i||(i={}),n.context=i,n._msgHander=new u.default,n._monitor=new h.default(n),n._bindLifeCycle(),n}return a(t,e),t.prototype._onPreDestroy=function(){this.onDestroy(),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.getNodeCustomUuid=function(){return this._customUuid},t.prototype.isFullscreenView=function(){return!1},t.prototype.onLoad=function(){this.startProcMsg(),this._loadResource()},t.prototype.onResourceLoaded=function(){this.context.fOnLoadFinished&&this.context.fOnLoadFinished();var e=this._getResourceName();if(e){var t=e.substr(e.lastIndexOf("/")+1,100),i=s.default.get_from_ui_open_close_point_event_db(t);if(i&&i.pointEventId){for(var n="1",o=1;o<=3;o++){var r=i["followContextFiled"+o];if(!r)break;var a=this.context[r]||0;n?n+="_"+a:n=""+a}d.default.statisOnStageStart(i.pointEventId.toString(),n)}}this.registerListeners({MSG_SHOW_POINT_DEBUG_INFO:this.onMsgShowPointDebugInfo})},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.onDestroy=function(){this.stopProcMsg();var e=this._getResourceName();if(e){var t=e.substr(e.lastIndexOf("/")+1,100),i=s.default.get_from_ui_open_close_point_event_db(t);if(i&&i.pointEventId){for(var n="1",o=1;o<=3;o++){var r=i["followContextFiled"+o];if(!r)break;var a=this.context[r]||0;n?n+="_"+a:n=""+a}d.default.statisOnStageEnd(i.pointEventId.toString(),1,n)}}},t.prototype.registerListeners=function(e){var t=this;f.default.forEachMap(e,function(i,n){e[i]=n.bind(t)}),this._msgHander.registerListeners(e)},t.prototype.startProcMsg=function(){this._msgHander.startProcMsg()},t.prototype.stopProcMsg=function(){this._msgHander.stopProcMsg()},t.prototype.sendMsg=function(e,t){this._msgHander.sendMsg(e,t)},t.prototype._getPreloadRess=function(){return[]},t.prototype._getResourceName=function(){return""},t.prototype._getResourceBindingConfig=function(){return{}},t.prototype._loadResource=function(){var e=this,t=this._getResourceName();if(!t)return this.nodeResource=this,this.onResourceLoaded(),void this.registerAsyncValue("nodeResource",this);var i=this._getPreloadRess(),n="view/"+t;i.push({path:n,assetType:cc.Prefab}),l.default.preloadRess(i,function(){l.default.loadRes(n,cc.Prefab,function(t,i){if(t)cc.warn("\u8b66\u544a] view load prefab:",t);else{var n=cc.instantiate(i);if(!cc.isValid(e))return cc.warn("ViewBase._loadResource when nodeResource laod finished, this is unvaliad!"),void n.destroy();n.parent=e,0==n.x&&0==n.y||n.setPosition(0,0);var o=e._buildNodeMapping(n);f.default.forEachMap(e._getResourceBindingConfig(),function(t,i){var n=o[t];if(n){for(var r=i[0],a=t.substring(t.indexOf("_")+1),s=[{prefix:"LLT_",fun:g.default.widgetLeftTopMC.bind(g.default)},{prefix:"LL_",fun:g.default.widgetLeftMC.bind(g.default)},{prefix:"LLB_",fun:g.default.widgetLeftBottomMC.bind(g.default)},{prefix:"LRT_",fun:g.default.widgetRightTopMC.bind(g.default)},{prefix:"LR_",fun:g.default.widgetRightMC.bind(g.default)},{prefix:"LRB_",fun:g.default.widgetRightBottomMC.bind(g.default)},{prefix:"LT_",fun:g.default.widgetTopMC.bind(g.default)},{prefix:"LB_",fun:g.default.widgetBottomMC.bind(g.default)}],l=0;l<s.length;l++){var d=s[l];if(a.substring(0,d.prefix.length)==d.prefix){d.fun(n),a=a.replace(d.prefix,"");break}}var c=null;if(r==cc.Node)c=n;else{if(!(c=n.getComponent(r))){try{c=n.addComponent(r)}catch(e){}if(!c)return}var u=i[1];u&&""!=u&&c.registerOnTouchCallback instanceof Function&&e[u]instanceof Function&&c.registerOnTouchCallback(function(t){t.isClick()&&e.staticsButtonClick(a),e[u](t)})}e[a]=c}else cc.warn("ViewBase._loadResource node not found!",t)}),e.nodeResource=n,e.tryShowStatisticsInfo(),e.onResourceLoaded(),e.registerAsyncValue("nodeResource",n)}})})},t.prototype.staticsButtonClick=function(e){if(this[e]){var t=this._getResourceName();if(t){var i=t.substr(t.lastIndexOf("/")+1,100);console.log("----click button name=",i,e);var n=s.default.get_from_ui_button_click_point_event_db(i,e);if(n&&n.length>0)if(1==n.length)d.default.commonEvent(n[0].selfPointEventId);else for(var o=function e(t,i){return!!t&&(t.name==i||e(t.parent,i))},r=0;r<n.length;r++){var a=n[r];if(o(this,a.parentViewName)){d.default.commonEvent(a.selfPointEventId);break}}}}else console.log("-----\u5f53\u524d\u6ca1\u6709\u6b64\u6309\u94ae--buttonName=",e)},t.prototype.tryTipButtonStatisticsInfo=function(e){if(this[e]){var t=this._getResourceName();if(t){var i=t.substr(t.lastIndexOf("/")+1,100),n=s.default.get_from_ui_button_click_point_event_db(i,e);if(n&&n.length>0){var o=function(e){e&&e.selfPointEventId&&e.selfPointEventId};if(1==n.length)o(n[0]);else for(var r=function e(t,i){return!!t&&(t.name==i||e(t.parent,i))},a=0;a<n.length;a++){var l=n[a];if(r(this,l.parentViewName)){o(l);break}}}}}else console.log("-----\u5f53\u524d\u6ca1\u6709\u6b64\u6309\u94ae--buttonName=",e)},t.prototype.tryShowStatisticsInfo=function(){var e=this;if(d.default.bShowStatisticsInfo){var t=this._getResourceName();if(t){var i=t.substr(t.lastIndexOf("/")+1,100),n=function(t,n){if(!t.__testCustomButtonLabelName){var o=s.default.get("ui_button_click_point_event_db",i,n);if(o&&0!=o.length){var r=function(e){if(e&&e.selfPointEventId){var i=new cc.Node,n=i.addComponent(cc.Label);n.fontSize=18,n.verticalAlign=cc.Label.VerticalAlign.CENTER,i.color=cc.Color.RED,i.y=-t.height/2-10,n.string=""+e.selfPointEventId,t.__testCustomButtonLabelName=i,t.addChild(i)}};if(1==o.length)r(o[0]);else for(var a=function e(t,i){return!!t&&(t.name==i||e(t.parent,i))},l=0;l<o.length;l++){var d=o[l];if(a(e,d.parentViewName)){r(d);break}}}}};f.default.forEachMap(this._getResourceBindingConfig(),function(t){var i=t.split("_"),o=i[i.length-1];if(/button/.test(o)){var r=e[o];if(!r)return;n(r.node,o)}})}}},t.prototype.onMsgShowPointDebugInfo=function(){this.tryShowStatisticsInfo()},t.prototype._buildNodeMapping=function(e,t){t||(t={}),e.name&&(t[e.name]=e);for(var i=e.children,n=0;n<i.length;n++){var o=i[n];this._buildNodeMapping(o,t)}return t},t.prototype._bindLifeCycle=function(){var e=this.addComponent(c.default);e.setOnLoadCallback(this.onLoad.bind(this)),e.setStartCallback(this.start.bind(this)),e.setUpdateCallback(this.update.bind(this))},t.prototype.registerAsyncValue=function(e,t){return this._monitor.registerAsyncValue(e,t)},t.prototype.unregisterAsyncValue=function(e){return this._monitor.unregisterAsyncValue(e)},t.prototype.getCurrentAsyncValue=function(e){return this._monitor.getCurrentAsyncValue(e)},t.prototype.monitorAsyncValue=function(e,t,i){this._monitor.monitorAsyncValue(e,t,i)},t.prototype.monitorAsyncValueExists=function(e,t){this._monitor.monitorAsyncValueExists(e,t)},t.prototype.monitorAsyncValueValid=function(e,t){this._monitor.monitorAsyncValueValid(e,t)},t.prototype.isResourceLoaded=function(){return cc.isValid(this.nodeResource)},t.prototype.waitResourceLoaded=function(e){this.monitorAsyncValueValid("nodeResource",e)},t.prototype.isLoadingFinished=function(){return this.isResourceLoaded()},t.prototype.waitLoadingFinished=function(e){this.waitResourceLoaded(e)},t.prototype.isAllChildrenLoadingFinished=function(){if(this.isLoadingFinished()){var e=!0;return f.default.recursionChildren(this,function(i){if(i instanceof t&&!i.isLoadingFinished())return e=!1,!0}),e}},t.prototype.waitAllChildrenLoadingFinished=function(e){var t=this;e instanceof Function&&(this.isAllChildrenLoadingFinished()?e():p.default.callLoop(1/60,function(i){i.count>=1e3&&cc.warn("ViewBase.waitAllChildren timer loop so much!",t.name),t.isAllChildrenLoadingFinished()&&(i.stop(),e())},this))},t.requireResourceLoaded=function(e,t,i){if(!i.__b_marked){i.__b_marked=!0;var n=i.value;i.value=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.isResourceLoaded()?n.apply(this,t):this.waitResourceLoaded(function(){n.apply(e,t)})}}},t.requireAsyncValue=function(e,t){return function(i,n,o){if(!o.__b_marked){o.__b_marked=!0;var r=o.value;o.value=function(){for(var i=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this.getCurrentAsyncValue(e)!=t?this.monitorAsyncValue(e,t,function(){r.apply(i,n)}):r.apply(this,n)}}}},t.GLOBAL_CUSTOM_UUID=1,t}(cc.Node);r.default=v,cc._RF.pop()},{}],_template:[function(e,t,i){"use strict";cc._RF.push(t,"e5169SDbJZKlYybKwRjZVGG","_template");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=cc._decorator,c=d.ccclass,u=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},s([c],t)}(l.default));r.default=u,cc._RF.pop()},{}],cConfig:[function(e,t,i){"use strict";cc._RF.push(t,"00000AAAAAAAAAAAAAAAAAA","cConfig");var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.cConfig=void 0,n.cConfig=JSON.parse('{\n    "a_prj_upload_res_dirs": [\n        \n    ],\n    "b_sdk_oppoqg_debug": false,\n    "b_sdk_vivo_debug": false,\n    "creatorVersion": "2.4.0",\n    "i_channel_info_timeout": 3000,\n    "i_game_start_ready_timeout": 10000,\n    "i_net_timeout": 5000,\n    "i_prj_b2b_mode": 0,\n    "i_sdk_adv_banner_cd": 8000,\n    "i_sdk_adv_banner_timeout": 30000,\n    "i_sdk_adv_banner_valid_show_count": 2,\n    "i_sdk_adv_custom_valid_show_count": 2,\n    "i_sdk_adv_embedded_timeout": 30000,\n    "i_sdk_adv_inter_cd": 0,\n    "i_sdk_adv_inter_timeout": 30000,\n    "i_sdk_adv_native_clicked_report_mode": 0,\n    "i_sdk_adv_native_exposure_cd": 0,\n    "i_sdk_adv_native_life_time": 15000,\n    "i_sdk_adv_native_request_cd": 10000,\n    "i_sdk_adv_paster_timeout": 30000,\n    "i_sdk_adv_type_banner_cd": 0,\n    "i_sdk_adv_type_banner_daily_limit": 0,\n    "i_sdk_adv_type_embedded_cd": 0,\n    "i_sdk_adv_type_embedded_daily_limit": 0,\n    "i_sdk_adv_type_interstitial_cd": 0,\n    "i_sdk_adv_type_interstitial_daily_limit": 0,\n    "i_sdk_adv_type_paster_cd": 0,\n    "i_sdk_adv_type_paster_daily_limit": 0,\n    "i_sdk_adv_type_url_cd": 0,\n    "i_sdk_adv_type_url_daily_limit": 0,\n    "i_sdk_adv_type_video_cd": 0,\n    "i_sdk_adv_type_video_daily_limit": 0,\n    "i_sdk_adv_url_timeout": 30000,\n    "i_sdk_adv_video_timeout": 30000,\n    "i_sdk_age_level_info_mode": 0,\n    "i_sdk_banner_autoRefresh_mode": 0,\n    "i_sdk_banner_refresh_intervals": 30,\n    "i_sdk_channel_user_id_mode": 0,\n    "i_sdk_common_checktime_deferenceLimit": 300000,\n    "i_sdk_compress_res_mode": 1,\n    "i_sdk_content_security_check_support": 1,\n    "i_sdk_custom_autoRefresh_mode": 0,\n    "i_sdk_custom_refresh_intervals": 30,\n    "i_sdk_debug_mode": 0,\n    "i_sdk_debug_task_mode": 0,\n    "i_sdk_find_mini_game_mode": 0,\n    "i_sdk_headline_ad_failed_share_reward_success_count_limit": 3,\n    "i_sdk_headline_auto_upload": 1,\n    "i_sdk_headline_cuttemplate_default_interval": 2000,\n    "i_sdk_headline_favorite_mode": 0,\n    "i_sdk_headline_follow_support": 1,\n    "i_sdk_headline_getUserInfo_force": 1,\n    "i_sdk_headline_installShortcut_support": 1,\n    "i_sdk_headline_qrcode_preview": 1,\n    "i_sdk_headline_record_delay_time": 500,\n    "i_sdk_headline_record_support": 1,\n    "i_sdk_huawei_banner_auto_time": 30,\n    "i_sdk_huawei_banner_mode": 0,\n    "i_sdk_huawei_buyQuantity_debug_mode": 0,\n    "i_sdk_huawei_buyQuantity_mode": 0,\n    "i_sdk_installShortcut_mode": 1,\n    "i_sdk_jump_game_resource_mode": 0,\n    "i_sdk_jump_single_random_length": 5,\n    "i_sdk_jumplist_mode": 1,\n    "i_sdk_kuaishou_follow_support": 0,\n    "i_sdk_kuaishou_record_delay_time": 500,\n    "i_sdk_kuaishou_record_support": 1,\n    "i_sdk_megadata_encrypt": 1,\n    "i_sdk_megadata_mode": 1,\n    "i_sdk_megadata_upload_span": 5000,\n    "i_sdk_moreWonderful_mode": 0,\n    "i_sdk_moregame_mode": 1,\n    "i_sdk_native_autoRefresh_intervals": 30,\n    "i_sdk_native_autoRefresh_mode": 0,\n    "i_sdk_native_valid_show_count": 2,\n    "i_sdk_oppoqg_ad_ecd": 0,\n    "i_sdk_oppoqg_banner_mode": 0,\n    "i_sdk_oppoqg_jump_game_reward_time": 20000,\n    "i_sdk_oppoqg_not_show_banner_after_user_close_count_limit": 5,\n    "i_sdk_pay_mode": 0,\n    "i_sdk_phone_vibrate": 0,\n    "i_sdk_refresh_request_num": 18,\n    "i_sdk_sdk_rank_mode": 0,\n    "i_sdk_share_mode": 1,\n    "i_sdk_subscribe_mode": 1,\n    "i_sdk_support_open_url": 0,\n    "i_sdk_support_record_share": 1,\n    "i_sdk_trim_adv_err_switch": 1,\n    "i_sdk_vivo_banner_intervals": 30,\n    "i_sdk_vivo_custom_translucent_swicth": 1,\n    "i_sdk_weixin_ad_failed_share_reward_confirm_success_cycle": 72000,\n    "i_sdk_weixin_ad_failed_share_reward_fail_count": 2,\n    "i_sdk_weixin_ad_failed_share_reward_success_count_limit": 3,\n    "i_sdk_weixin_ad_failed_share_reward_success_radios": 70,\n    "i_sdk_weixin_ad_failed_share_reward_success_time_interval": 5000,\n    "i_sdk_weixin_auto_upload": 1,\n    "i_sdk_weixin_banner_intervals": 30,\n    "i_sdk_weixin_buyQuantity_debug_mode": 0,\n    "i_sdk_weixin_buyQuantity_mode": 0,\n    "i_sdk_weixin_currency_ratio": 10,\n    "i_sdk_weixin_env": 0,\n    "i_sdk_weixin_jump_game_reward_time": 20000,\n    "i_sdk_weixin_jump_game_reward_type": 0,\n    "i_sdk_weixin_qrcode_preview": 1,\n    "i_sdk_weixin_replace_grid_with_custom": 1,\n    "i_sdk_weixin_splashBanner_ecd": 0,\n    "layaVersion": "",\n    "nodejsExePath": "nodejs16.15.1/node.exe",\n    "nodejsGitAddr": "ude2/prj.ulnodejs",\n    "nodejsGitBranch": "v1",\n    "resProcessScriptPath": "D:/ulwork/ude2/prj.ulcocoscreator2.4.0/tools/publish-tools/res_processor.js",\n    "s_prj_name": "prj.game009",\n    "s_sdk_adv_info": {\n        "1": {\n            "group": [\n                "1"\n            ],\n            "type": "interstitial"\n        },\n        "2": {\n            "group": [\n                "2"\n            ],\n            "type": "banner"\n        },\n        "3": {\n            "group": [\n                "3"\n            ],\n            "type": "embedded"\n        },\n        "4": {\n            "group": [\n                "4"\n            ],\n            "type": "video"\n        },\n        "5": {\n            "group": [\n                "5"\n            ],\n            "type": "url"\n        }\n    },\n    "s_sdk_age_level_info": "",\n    "s_sdk_cdk_app_id": "0",\n    "s_sdk_cdk_url": "https://cdkey.ultralisk.cn/commoncdk/usecdk",\n    "s_sdk_common_affiche_title": "\u6700\u65b0\u516c\u544a",\n    "s_sdk_common_affiche_url": "",\n    "s_sdk_common_checktime_url": "https://copv7.ultralisk.cn/getservertime",\n    "s_sdk_common_copyright_str": "",\n    "s_sdk_common_login_url": "https://sdkserver.ultralisk.cn/userlogin",\n    "s_sdk_common_online_pay_url": "https://sdkpay.ultralisk.cn",\n    "s_sdk_cop_game_id": "94",\n    "s_sdk_daren_base_gameres_url": "https://gamesres.ultralisk.cn/h5_games_daren/",\n    "s_sdk_daren_git_addr": "ulsdk/h5_games_daren",\n    "s_sdk_daren_git_branch": "master",\n    "s_sdk_headline_appid": "ttc249b4f45d70c42702",\n    "s_sdk_headline_change_log": "",\n    "s_sdk_headline_douyin_find_me_url": "https://gamesres.ultralisk.cn/h5_games_res/common/find_me/douyin_icon/009.png",\n    "s_sdk_headline_get_token_url": "https://sdkserver.ultralisk.cn/ttgettoken",\n    "s_sdk_headline_get_video_info_url": "https://gate.snssdk.com/developer/api/get_video_info",\n    "s_sdk_headline_remote_server_root": "https://gamesres.ultralisk.cn/h5_games_res/game009/headline/v1",\n    "s_sdk_headline_share_video_tag": "{}",\n    "s_sdk_headline_sub_context": "0",\n    "s_sdk_headline_subscribe_url": "",\n    "s_sdk_headline_top_video_by_like_url": "https://gate.snssdk.com/developer/api/get_top_video_ids_by_like",\n    "s_sdk_headline_top_video_by_time_url": "https://gate.snssdk.com/developer/api/get_top_video_ids_by_time",\n    "s_sdk_headline_toutiao_find_me_url": "https://gamesres.ultralisk.cn/h5_games_res/common/find_me/douyin_icon/009.png",\n    "s_sdk_headline_version_name": "1.0.99",\n    "s_sdk_huawei_appid": "105818411",\n    "s_sdk_huawei_buyQuantity_url": "http://iaacback.leishouwin.cc/h5/huaweiupload",\n    "s_sdk_huawei_login_tip": "",\n    "s_sdk_huawei_merchant_id": "890086200300024295",\n    "s_sdk_huawei_merchant_name": "\u6210\u90fd\u53cc\u6668\u79d1\u6280\u6709\u9650\u516c\u53f8",\n    "s_sdk_huawei_minPlatform_version": "1056",\n    "s_sdk_huawei_package_name": "com.ultralisk.game009.huawei",\n    "s_sdk_huawei_preOrder_online_url": "http://sdkpay.ultralisk.cn/preorder",\n    "s_sdk_huawei_private_key": "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCE1fMb9mLSx6KryXENvnzA2ksE57vARotUJYOAG+eTA1hbigFBWZ04F85wQYq7lz44xHPTs1VS/xatN7SnBHUMufFM0GMmQNMDDz9yxE2PEAG7xL8/YEe/PC22tPvJbIMrlACIQg6eos+OIXA47qUcURp9NNPDxAB65hAKqGUD3UG4fFhSczV8j4zy5EAQ9nl2GDIJ8eOxiCsYQeIMGnSA3xdoOLypN5y0BMOP2p7lysZw6jRnOfLUialkj2/t6d1S9aJA7LL5svilIMH9Ty1DnKYDH0vGGmzwgtODvwDkLk8besryKL0oVjkybNjpBVogzP8+LzWK+RoTAOY2M7ArAgMBAAECggEAXzNatYqijr/G5OlNHfWMQUbxhwVxuL6WMmtkUFcvY1x9YbWJasWH+OCO8kL247TkQhkBjhKzrvTk0qXe0ehO3x0QQ+YBeTPyRvoRlfX8Q/DL3T+HdStSoErH1G7nGRes9nlu3DjDc4vpxspOPG9EZAP4QQ2wS1hYo7voeUrwgpBtnxsCG7//2P29Ov8m/KTBMKqmtapSfpwJ8J1ZU7h871ex5oScH4DSt0rn5RL6m34cpGILHx4r3OWKK2LBd1Xv71eepO2Qox7AFH30as1lr2ykt6E0xQnidjKrLMV5eqYdlub9gM2frRMXUianfilJ7Mw+vGmBv2VTbj7ykBC2UQKBgQDgIylzOz8gtyf8eBrWAFTs79h0lduWBMBWL9MLQ+MgxUgcTKBmOui2alB79sezNK9hZswvy0tj7696hCzkVFYX2Hdt1eJlwQV0Rt8d9Mq0igob4Bwknv6OLf6ucg++Z0L1nP6SeGejtWn4j8Dc5So8g6vYm6Eq1WMBkZi8mX3gqQKBgQCXuCBsSKS6EMfKP/mOzUKQzl6dUlUlTHgUEEuvKEOen0sVK6NmAIgr1DemVN5FgabhdAPN5EHS+Bhv8DlmqXq0GeBI62gxUo9FjQxFWaXR58YRIuX1WeGaRQUa0eaDuSHUnPdXz6Qcjqqry2RUdbMewgW4uVjcgyGrrJafccEKswKBgC5XVsSaZUzwUXYjpvjEDMsIM+q26TW1OccYEDxuBtHJuEURmsBIQcElbgqTVWq54+Dxjhn7oFTDQ7bDCT0UKtC3UsoExNBg/i2yUYMyD48QU1K8HVV9AgiHffa3YoXtd6ysjv3dox/37DcWEbwaLYdhefBJDSN8BwJWBgxId/wxAoGACM3Te9UfUfjFTzQ1LBc3JKYFEYYEkNyGH0vuyGRCwEKoHbthiPrA7CItdIZ6O3hRkcWkrt7u/uoMqPo8qnttNmRGApU+f5Y14ChWLPQNzkdv0/C9fWZQ1B3rNOo3QS+OCgNtyveuo0WYG836rXgDA+boZBbFVE57trWWK/xy4kcCgYAtyPNyafy1APHafjPW7leHnNfo4BuCHjL0Cd89f3IQpaxZCcDNEthV5DHPbXxdaz0o677caT4fU004Leu73sGki2USEWUFHR2yrkLfOcu6qVJJrPbAaPlF1jVL6faVdk6Xhjre/QCBSwxqm4vpSRjuum6TOYZKH7e2Doodb22zXw==",\n    "s_sdk_huawei_public_key": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAhNXzG/Zi0seiq8lxDb58wNpLBOe7wEaLVCWDgBvnkwNYW4oBQVmdOBfOcEGKu5c+OMRz07NVUv8WrTe0pwR1DLnxTNBjJkDTAw8/csRNjxABu8S/P2BHvzwttrT7yWyDK5QAiEIOnqLPjiFwOO6lHFEafTTTw8QAeuYQCqhlA91BuHxYUnM1fI+M8uRAEPZ5dhgyCfHjsYgrGEHiDBp0gN8XaDi8qTectATDj9qe5crGcOo0Zzny1ImpZI9v7endUvWiQOyy+bL4pSDB/U8tQ5ymAx9Lxhps8ILTg78A5C5PG3rK8ii9KFY5MmzY6QVaIMz/Pi81ivkaEwDmNjOwKwIDAQAB",\n    "s_sdk_huawei_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game009/huawei/v1",\n    "s_sdk_huawei_version_code": "117",\n    "s_sdk_huawei_version_name": "1.0.17",\n    "s_sdk_jump_game_statis_game_indexes": "",\n    "s_sdk_kuaishou_appid": "ks655555224960599999",\n    "s_sdk_kuaishou_remote_server_root": null,\n    "s_sdk_kuaishou_version_name": "1.0.0",\n    "s_sdk_lan_debug_address": "",\n    "s_sdk_megadata_close_table_type_ids": "",\n    "s_sdk_megadata_game_id": "313",\n    "s_sdk_megadata_server_jump_game_type_id": "jumpabtest",\n    "s_sdk_megadata_server_type_id": "313",\n    "s_sdk_megadata_test_url": "https://megadatav7.ultralisk.cn/batchtestmodedataupload",\n    "s_sdk_meizu_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game009/meizuqg/v1/",\n    "s_sdk_meizuqg_package_name": "com.ultralisk.game009.meizu",\n    "s_sdk_meizuqg_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game009/meizuqg/v1/",\n    "s_sdk_meizuqg_version_code": "103",\n    "s_sdk_meizuqg_version_name": "1.0.3",\n    "s_sdk_oppoqg_app_key": "whv4Arm1E3kG4KgccCckK44g",\n    "s_sdk_oppoqg_appid": "30824091",\n    "s_sdk_oppoqg_appsecret": "6aadDCf8601731029c9049184653085E",\n    "s_sdk_oppoqg_minPlatform_version": "1056",\n    "s_sdk_oppoqg_package_name": "com.ultralisk.game009.nearme.gamecenter",\n    "s_sdk_oppoqg_preOrder_online_url": "http://sdkpay.ultralisk.cn/preorder",\n    "s_sdk_oppoqg_pre_order_url": "https://jits.open.oppomobile.com/jitsopen/api/pay/v1.0/preOrder",\n    "s_sdk_oppoqg_private_key": "-----BEGIN RSA PRIVATE KEY-----MIICXgIBAAKBgQC46Giy1S4Zuys/c3QO6VZVWAOo1tussbIpqI0M7edU9OC732leFej2DmG3O9XRh9NlYjoAq4hyt7DxiZ6MyN8IdStZn4b0/e/CZKQA5WaCI5h71hUTwCJTzHZHvO+woDWaE2mOSsBfjAdwTsHUr32eCPzju/1zatys02W7ai4v+wIDAQABAoGAGjbAmRHF3ln9kJpCitajqae3pRkIvZvXgTZnAL09fXrV3WyX2IHMrA1v5vUxo+nYm1foly26Q2EtUaDL/HOBwshbwEtR5TR0g+kZBpA+S4wt/ujZPlALmZiGuQjjqwWFo9OfeskXer7vA5UWYemDMvy7XQ2TWoLNOzI+LaVvEPECQQDpEgY7XmrKeq8qkUFPsDjcEa7SZ2eEEOps0NKmewGvAaiavm7+8yCdS/ZPS7ZD6590TanFWy3gJtugw/vPa2tpAkEAyxlj8u+EYKchPBYehuRjm4W5SlJNAGrABqrJjM50jQ4aRVr1LbS6R0S77kTaZLTV/w8eYk1LS9cTCaY+JB+HwwJBAIXrlmscmG4ZynbCGe4JCtLg0jwRsHhBJAI8hx2jxlbhtBieXbbeypm3YSM1FNi4FdpFGczN1HFcwowAsLsBNSkCQQC9YgywQKYI1m+ILvwCPr+fCt/PrNS+mcw7q0/Lq8xEp6zZlUpgd1DoGfC/6pZXJ8UQVFG5ymd27bOD4O+7EWevAkEAzYHfclV/kP3V1aCR0KoXBHA4WIHKa+JaVuFMIDZqd/SsfsoKDn+Stsajl/e8LAwt9XXctYWNvGsVfCSfZ5Y3tw==-----END RSA PRIVATE KEY-----",\n    "s_sdk_oppoqg_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game009/oppoqg/v1",\n    "s_sdk_oppoqg_version_code": "120",\n    "s_sdk_oppoqg_version_name": "1.0.20",\n    "s_sdk_refresh_resource_type": "dir",\n    "s_sdk_user_data_get_url": "https://h5gameserver.ultralisk.cn/getuserdata",\n    "s_sdk_user_data_save_url": "https://h5gameserver.ultralisk.cn/savealluserdata",\n    "s_sdk_version": "3fa187016",\n    "s_sdk_vivo_app_id": "105532756",\n    "s_sdk_vivo_app_secret": "0",\n    "s_sdk_vivo_minPlatform_version": "1090",\n    "s_sdk_vivo_package_name": "com.ultralisk.game009.vivominigame",\n    "s_sdk_vivo_qg_url": "https://pay.vivo.com.cn/vivopay/order/request",\n    "s_sdk_vivo_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game009/vivo/v1",\n    "s_sdk_vivo_version_code": "127",\n    "s_sdk_vivo_version_name": "1.0.27",\n    "s_sdk_webreview_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/md5test/73a7a8d39be56ad2009/",\n    "s_sdk_weixin_appid": "wxf4fbdf901a997fe1",\n    "s_sdk_weixin_buyQuantity_url": "https://iaacback.leishouwin.cc/h5/wxgdtupload",\n    "s_sdk_weixin_change_log": "",\n    "s_sdk_weixin_find_me_url": "https://gamesres.ultralisk.cn/h5_games_res/common/find_me/weixin_icon/009.png",\n    "s_sdk_weixin_get_token_url": "https://sdkserver.ultralisk.cn/wxgettoken",\n    "s_sdk_weixin_grid_adunit_id": "0",\n    "s_sdk_weixin_mch_id": "0",\n    "s_sdk_weixin_offer_id": "0",\n    "s_sdk_weixin_remote_server_root": "https://gamesres.ultralisk.cn/h5_games_res/game009/weixin/v1",\n    "s_sdk_weixin_sub_context": "",\n    "s_sdk_weixin_subscribe_url": "https://subscrible.ultralisk.cn/wxsubscrible/postwxsubscribleusermsg",\n    "s_sdk_weixin_version_name": "1.0.29",\n    "srcRootPath": "assets/scripts/",\n    "t_customer_service_info": [\n        "kefu@ultralisk.cn"\n    ],\n    "t_sdk_adv_banner_tags_style_setting": {\n        \n    },\n    "t_sdk_adv_custom_args_style_setting": {\n        \n    },\n    "t_sdk_common_event_ids": {\n        "add_subscrible": "102",\n        "click_more_game_channel_system_button": "108",\n        "click_more_game_icon_list": "106",\n        "click_more_game_icon_reward": "105",\n        "click_more_game_icon_single": "104",\n        "click_share": "101",\n        "click_subscrible": "103",\n        "open_cdk": "107",\n        "open_share": "100"\n    },\n    "t_sdk_common_modify_tag_afterBuild": [\n        \n    ],\n    "t_sdk_common_modify_tag_beforeBuild": [\n        \n    ],\n    "t_sdk_compress_json_includes": [\n        \n    ],\n    "t_sdk_compress_json_includes_rem": "",\n    "t_sdk_compress_res_config": [\n        {\n            "cmds": "",\n            "rep": ".*2d/ui/common/.*//.png"\n        },\n        {\n            "cmds": "",\n            "rep": ".*2d/anim_node.*"\n        },\n        {\n            "cmds": "",\n            "rep": ".*2d/particle.*"\n        },\n        {\n            "cmds": "jpeg-recompress --strip -t 0.4 --min 80 | guetzil --quality 85",\n            "rep": ".*//.jpg"\n        },\n        {\n            "cmds": "autopng --quality 40-80 | optipng -strip all -o7 | zopflipng -y --lossy_8bit --lossy_transparent",\n            "rep": ".*//.png"\n        }\n    ],\n    "t_sdk_cop_default_cop": {\n        \n    },\n    "t_sdk_cop_simulate_city_data": {\n        "0": "\u672a\u77e5\u57ce\u5e02",\n        "1001": "\u6d77\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1002": "\u897f\u5b81",\n        "1003": "\u6d77\u4e1c",\n        "1004": "\u9ec4\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1005": "\u6d77\u897f\u8499\u53e4\u65cf\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1006": "\u6d77\u5317\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1007": "\u679c\u6d1b\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1008": "\u7389\u6811\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "101": "\u5317\u4eac",\n        "1101": "\u4e34\u590f\u56de\u65cf\u81ea\u6cbb\u5dde",\n        "1102": "\u7518\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1103": "\u767d\u94f6",\n        "1104": "\u9647\u5357",\n        "1105": "\u5b9a\u897f",\n        "1106": "\u5e73\u51c9",\n        "1107": "\u91d1\u660c",\n        "1108": "\u9152\u6cc9",\n        "1109": "\u5f20\u6396",\n        "1110": "\u5e86\u9633",\n        "1111": "\u5170\u5dde",\n        "1112": "\u6b66\u5a01",\n        "1113": "\u5609\u5cea\u5173",\n        "1114": "\u5929\u6c34",\n        "1201": "\u94f6\u5ddd",\n        "1202": "\u56fa\u539f",\n        "1203": "\u5434\u5fe0",\n        "1204": "\u4e2d\u536b",\n        "1205": "\u77f3\u5634\u5c71",\n        "1301": "\u5546\u6d1b",\n        "1302": "\u5b89\u5eb7",\n        "1303": "\u6986\u6797",\n        "1304": "\u94dc\u5ddd",\n        "1305": "\u54b8\u9633",\n        "1306": "\u897f\u5b89",\n        "1307": "\u6e2d\u5357",\n        "1308": "\u6c49\u4e2d",\n        "1309": "\u5b9d\u9e21",\n        "1310": "\u5ef6\u5b89",\n        "1401": "\u957f\u6625",\n        "1402": "\u767d\u57ce",\n        "1403": "\u677e\u539f",\n        "1404": "\u767d\u5c71",\n        "1405": "\u5409\u6797",\n        "1406": "\u5ef6\u8fb9\u671d\u9c9c\u65cf\u81ea\u6cbb\u5dde",\n        "1407": "\u56db\u5e73",\n        "1408": "\u8fbd\u6e90",\n        "1409": "\u901a\u5316",\n        "1501": "\u94dc\u9675",\n        "1502": "\u4eb3\u5dde",\n        "1503": "\u9ec4\u5c71",\n        "1504": "\u6c60\u5dde",\n        "1505": "\u5408\u80a5",\n        "1506": "\u6dee\u5317",\n        "1507": "\u6ec1\u5dde",\n        "1508": "\u5bbf\u5dde",\n        "1509": "\u6dee\u5357",\n        "1510": "\u868c\u57e0",\n        "1511": "\u516d\u5b89",\n        "1512": "\u961c\u9633",\n        "1513": "\u829c\u6e56",\n        "1514": "\u5ba3\u57ce",\n        "1515": "\u5b89\u5e86",\n        "1516": "\u9a6c\u978d\u5c71",\n        "1601": "\u6069\u65bd\u571f\u5bb6\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1602": "\u4ed9\u6843",\n        "1603": "\u6b66\u6c49",\n        "1604": "\u5b5d\u611f",\n        "1605": "\u54b8\u5b81",\n        "1606": "\u5341\u5830",\n        "1607": "\u5929\u95e8",\n        "1608": "\u9ec4\u5188",\n        "1609": "\u5b9c\u660c",\n        "1610": "\u8944\u9633",\n        "1611": "\u9ec4\u77f3",\n        "1612": "\u8346\u95e8",\n        "1613": "\u968f\u5dde",\n        "1614": "\u8346\u5dde",\n        "1615": "\u9102\u5dde",\n        "1616": "\u795e\u519c\u67b6\u6797\u533a",\n        "1617": "\u6f5c\u6c5f",\n        "1701": "\u682a\u6d32",\n        "1702": "\u90b5\u9633",\n        "1703": "\u5cb3\u9633",\n        "1704": "\u5f20\u5bb6\u754c",\n        "1705": "\u6000\u5316",\n        "1706": "\u8861\u9633",\n        "1707": "\u957f\u6c99",\n        "1708": "\u5e38\u5fb7",\n        "1709": "\u90f4\u5dde",\n        "1710": "\u6c38\u5dde",\n        "1711": "\u6e58\u897f\u571f\u5bb6\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1712": "\u6e58\u6f6d",\n        "1713": "\u76ca\u9633",\n        "1714": "\u5a04\u5e95",\n        "1801": "\u5b89\u987a",\n        "1802": "\u9ed4\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1803": "\u94dc\u4ec1",\n        "1804": "\u516d\u76d8\u6c34",\n        "1805": "\u8d35\u9633",\n        "1806": "\u9ed4\u4e1c\u5357\u82d7\u65cf\u4f97\u65cf\u81ea\u6cbb\u5dde",\n        "1807": "\u6bd5\u8282",\n        "1808": "\u9075\u4e49",\n        "1809": "\u9ed4\u897f\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1901": "\u592a\u539f",\n        "1902": "\u957f\u6cbb",\n        "1903": "\u8fd0\u57ce",\n        "1904": "\u664b\u4e2d",\n        "1905": "\u5ffb\u5dde",\n        "1906": "\u6714\u5dde",\n        "1907": "\u664b\u57ce",\n        "1908": "\u9633\u6cc9",\n        "1909": "\u5927\u540c",\n        "1910": "\u4e34\u6c7e",\n        "1911": "\u5415\u6881",\n        "2001": "\u6765\u5bbe",\n        "2002": "\u67f3\u5dde",\n        "2003": "\u5d07\u5de6",\n        "2004": "\u767e\u8272",\n        "2005": "\u6cb3\u6c60",\n        "2006": "\u9632\u57ce\u6e2f",\n        "2007": "\u8d3a\u5dde",\n        "2008": "\u8d35\u6e2f",\n        "2009": "\u5317\u6d77",\n        "201": "\u4e0a\u6d77",\n        "2010": "\u5357\u5b81",\n        "2011": "\u6842\u6797",\n        "2012": "\u7389\u6797",\n        "2013": "\u94a6\u5dde",\n        "2014": "\u68a7\u5dde",\n        "2101": "\u51c9\u5c71\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "2102": "\u6500\u679d\u82b1",\n        "2103": "\u4e50\u5c71",\n        "2104": "\u9042\u5b81",\n        "2105": "\u8d44\u9633",\n        "2106": "\u7ef5\u9633",\n        "2107": "\u81ea\u8d21",\n        "2108": "\u5fb7\u9633",\n        "2109": "\u96c5\u5b89",\n        "2110": "\u8fbe\u5dde",\n        "2111": "\u5e7f\u5143",\n        "2112": "\u5e7f\u5b89",\n        "2113": "\u963f\u575d\u85cf\u65cf\u7f8c\u65cf\u81ea\u6cbb\u5dde",\n        "2114": "\u7518\u5b5c\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "2115": "\u6210\u90fd",\n        "2116": "\u5357\u5145",\n        "2117": "\u6cf8\u5dde",\n        "2118": "\u5185\u6c5f",\n        "2119": "\u5b9c\u5bbe",\n        "2120": "\u5df4\u4e2d",\n        "2121": "\u7709\u5c71",\n        "2201": "\u90d1\u5dde",\n        "2202": "\u4e09\u95e8\u5ce1",\n        "2203": "\u6d1b\u9633",\n        "2204": "\u5f00\u5c01",\n        "2205": "\u4fe1\u9633",\n        "2206": "\u7126\u4f5c",\n        "2207": "\u8bb8\u660c",\n        "2208": "\u6fee\u9633",\n        "2209": "\u6d4e\u6e90",\n        "2210": "\u9e64\u58c1",\n        "2211": "\u5b89\u9633",\n        "2212": "\u9a7b\u9a6c\u5e97",\n        "2213": "\u65b0\u4e61",\n        "2214": "\u5357\u9633",\n        "2215": "\u6f2f\u6cb3",\n        "2216": "\u5e73\u9876\u5c71",\n        "2217": "\u5546\u4e18",\n        "2218": "\u5468\u53e3",\n        "2301": "\u77f3\u5bb6\u5e84",\n        "2302": "\u4fdd\u5b9a",\n        "2303": "\u6ca7\u5dde",\n        "2304": "\u8861\u6c34",\n        "2305": "\u5510\u5c71",\n        "2306": "\u90af\u90f8",\n        "2307": "\u5eca\u574a",\n        "2308": "\u79e6\u7687\u5c9b",\n        "2309": "\u90a2\u53f0",\n        "2310": "\u5f20\u5bb6\u53e3",\n        "2311": "\u627f\u5fb7",\n        "2401": "\u798f\u5dde",\n        "2402": "\u53a6\u95e8",\n        "2403": "\u5b81\u5fb7",\n        "2404": "\u8386\u7530",\n        "2405": "\u9f99\u5ca9",\n        "2406": "\u4e09\u660e",\n        "2407": "\u5357\u5e73",\n        "2408": "\u6cc9\u5dde",\n        "2409": "\u6f33\u5dde",\n        "2501": "\u5357\u660c",\n        "2502": "\u4e0a\u9976",\n        "2503": "\u8d63\u5dde",\n        "2504": "\u65b0\u4f59",\n        "2505": "\u9e70\u6f6d",\n        "2506": "\u629a\u5dde",\n        "2507": "\u840d\u4e61",\n        "2508": "\u5b9c\u6625",\n        "2509": "\u666f\u5fb7\u9547",\n        "2510": "\u5409\u5b89",\n        "2511": "\u4e5d\u6c5f",\n        "2601": "\u73e0\u6d77",\n        "2602": "\u4e1c\u839e",\n        "2603": "\u6c5f\u95e8",\n        "2604": "\u9633\u6c5f",\n        "2605": "\u60e0\u5dde",\n        "2606": "\u6c55\u5c3e",\n        "2607": "\u6885\u5dde",\n        "2608": "\u6e05\u8fdc",\n        "2609": "\u6e5b\u6c5f",\n        "2610": "\u63ed\u9633",\n        "2611": "\u5e7f\u5dde",\n        "2612": "\u4e91\u6d6e",\n        "2613": "\u6f6e\u5dde",\n        "2614": "\u6c55\u5934",\n        "2615": "\u97f6\u5173",\n        "2616": "\u6df1\u5733",\n        "2617": "\u4f5b\u5c71",\n        "2618": "\u4e2d\u5c71",\n        "2619": "\u8087\u5e86",\n        "2620": "\u8302\u540d",\n        "2621": "\u6cb3\u6e90",\n        "2701": "\u547c\u548c\u6d69\u7279",\n        "2702": "\u9521\u6797\u90ed\u52d2\u76df",\n        "2703": "\u4e4c\u5170\u5bdf\u5e03",\n        "2704": "\u901a\u8fbd",\n        "2705": "\u5305\u5934",\n        "2706": "\u963f\u62c9\u5584\u76df",\n        "2707": "\u5df4\u5f66\u6dd6\u5c14",\n        "2708": "\u5174\u5b89\u76df",\n        "2709": "\u9102\u5c14\u591a\u65af",\n        "2710": "\u4e4c\u6d77",\n        "2711": "\u547c\u4f26\u8d1d\u5c14",\n        "2712": "\u8d64\u5cf0",\n        "2801": "\u9e64\u5c97",\n        "2802": "\u9e21\u897f",\n        "2803": "\u54c8\u5c14\u6ee8",\n        "2804": "\u9ed1\u6cb3",\n        "2805": "\u4e03\u53f0\u6cb3",\n        "2806": "\u4f0a\u6625",\n        "2807": "\u5927\u5174\u5b89\u5cad\u5730\u533a",\n        "2808": "\u7261\u4e39\u6c5f",\n        "2809": "\u7ee5\u5316",\n        "2810": "\u9f50\u9f50\u54c8\u5c14",\n        "2811": "\u53cc\u9e2d\u5c71",\n        "2812": "\u5927\u5e86",\n        "2813": "\u4f73\u6728\u65af",\n        "2901": "\u846b\u82a6\u5c9b",\n        "2902": "\u8425\u53e3",\n        "2903": "\u4e39\u4e1c",\n        "2904": "\u6c88\u9633",\n        "2905": "\u629a\u987a",\n        "2906": "\u8fbd\u9633",\n        "2907": "\u5927\u8fde",\n        "2908": "\u978d\u5c71",\n        "2909": "\u76d8\u9526",\n        "2910": "\u961c\u65b0",\n        "2911": "\u672c\u6eaa",\n        "2912": "\u9526\u5dde",\n        "2913": "\u94c1\u5cad",\n        "2914": "\u671d\u9633",\n        "3001": "\u6dc4\u535a",\n        "3002": "\u4e34\u6c82",\n        "3003": "\u5a01\u6d77",\n        "3004": "\u83b1\u829c",\n        "3005": "\u65e5\u7167",\n        "3006": "\u6d4e\u5357",\n        "3007": "\u6cf0\u5b89",\n        "3008": "\u70df\u53f0",\n        "3009": "\u804a\u57ce",\n        "301": "\u5929\u6d25",\n        "3010": "\u4e1c\u8425",\n        "3011": "\u83cf\u6cfd",\n        "3012": "\u6ee8\u5dde",\n        "3013": "\u6f4d\u574a",\n        "3014": "\u5fb7\u5dde",\n        "3015": "\u9752\u5c9b",\n        "3016": "\u6d4e\u5b81",\n        "3017": "\u67a3\u5e84",\n        "3101": "\u5357\u4eac",\n        "3102": "\u5e38\u5dde",\n        "3103": "\u82cf\u5dde",\n        "3104": "\u65e0\u9521",\n        "3105": "\u76d0\u57ce",\n        "3106": "\u9547\u6c5f",\n        "3107": "\u8fde\u4e91\u6e2f",\n        "3108": "\u5bbf\u8fc1",\n        "3109": "\u5357\u901a",\n        "3110": "\u5f90\u5dde",\n        "3111": "\u6dee\u5b89",\n        "3112": "\u626c\u5dde",\n        "3113": "\u6cf0\u5dde",\n        "401": "\u91cd\u5e86",\n        "501": "\u5b81\u6ce2",\n        "502": "\u91d1\u534e",\n        "503": "\u5609\u5174",\n        "504": "\u7ecd\u5174",\n        "505": "\u6e56\u5dde",\n        "506": "\u8862\u5dde",\n        "507": "\u821f\u5c71",\n        "508": "\u676d\u5dde",\n        "509": "\u6e29\u5dde",\n        "510": "\u4e3d\u6c34",\n        "511": "\u53f0\u5dde",\n        "601": "\u510b\u5dde",\n        "602": "\u5b9a\u5b89\u53bf",\n        "603": "\u4e1c\u65b9",\n        "604": "\u4e94\u6307\u5c71",\n        "605": "\u5c6f\u660c\u53bf",\n        "606": "\u743c\u6d77",\n        "607": "\u6f84\u8fc8\u53bf",\n        "608": "\u743c\u4e2d\u9ece\u65cf\u82d7\u65cf\u81ea\u6cbb\u53bf",\n        "609": "\u4e09\u4e9a",\n        "610": "\u767d\u6c99\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "611": "\u6587\u660c",\n        "612": "\u9675\u6c34\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "613": "\u660c\u6c5f\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "614": "\u4fdd\u4ead\u9ece\u65cf\u82d7\u65cf\u81ea\u6cbb\u53bf",\n        "615": "\u4e34\u9ad8\u53bf",\n        "616": "\u6d77\u53e3",\n        "617": "\u4e07\u5b81",\n        "618": "\u4e50\u4e1c\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "701": "\u8fea\u5e86\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "702": "\u897f\u53cc\u7248\u7eb3\u50a3\u65cf\u81ea\u6cbb\u5dde",\n        "703": "\u4e34\u6ca7",\n        "704": "\u4fdd\u5c71",\n        "705": "\u7389\u6eaa",\n        "706": "\u5fb7\u5b8f\u50a3\u65cf\u666f\u9887\u65cf\u81ea\u6cbb\u5dde",\n        "707": "\u7ea2\u6cb3\u54c8\u5c3c\u65cf\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "708": "\u5927\u7406\u767d\u65cf\u81ea\u6cbb\u5dde",\n        "709": "\u4e3d\u6c5f",\n        "710": "\u6012\u6c5f\u5088\u50f3\u65cf\u81ea\u6cbb\u5dde",\n        "711": "\u666e\u6d31",\n        "712": "\u695a\u96c4\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "713": "\u6587\u5c71\u58ee\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "714": "\u6606\u660e",\n        "715": "\u66f2\u9756",\n        "716": "\u662d\u901a",\n        "801": "\u62c9\u8428",\n        "802": "\u660c\u90fd",\n        "803": "\u5c71\u5357",\n        "804": "\u963f\u91cc\u5730\u533a",\n        "805": "\u6797\u829d",\n        "806": "\u65e5\u5580\u5219",\n        "807": "\u90a3\u66f2\u5730\u533a",\n        "901": "\u5580\u4ec0\u5730\u533a",\n        "902": "\u963f\u514b\u82cf\u5730\u533a",\n        "903": "\u548c\u7530\u5730\u533a",\n        "904": "\u54c8\u5bc6",\n        "905": "\u77f3\u6cb3\u5b50",\n        "906": "\u5410\u9c81\u756a",\n        "907": "\u535a\u5c14\u5854\u62c9\u8499\u53e4\u81ea\u6cbb\u5dde",\n        "908": "\u5df4\u97f3\u90ed\u695e\u8499\u53e4\u81ea\u6cbb\u5dde",\n        "909": "\u660c\u5409\u56de\u65cf\u81ea\u6cbb\u5dde",\n        "910": "\u5854\u57ce\u5730\u533a",\n        "911": "\u514b\u5b5c\u52d2\u82cf\u67ef\u5c14\u514b\u5b5c\u81ea\u6cbb\u5dde",\n        "912": "\u963f\u52d2\u6cf0\u5730\u533a",\n        "913": "\u4e4c\u9c81\u6728\u9f50",\n        "914": "\u514b\u62c9\u739b\u4f9d",\n        "915": "\u4f0a\u7281\u54c8\u8428\u514b\u81ea\u6cbb\u5dde"\n    },\n    "t_sdk_cop_strategy_setting": {\n        \n    },\n    "t_sdk_exempt_advType_limit_arrays": [\n        \n    ],\n    "t_sdk_headline_jump_games": [\n        \n    ],\n    "t_sdk_headline_jump_games_video_type": [\n        \n    ],\n    "o_sdk_headline_pay_code": {\n        \n    },\n    "a_sdk_headline_share_list": [\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game009/share1.jpg",\n            "templateId": "3fhc2mwqmv2bog75e1",\n            "title": "\u5feb\u6765\u4f53\u9a8c\u53ec\u5524\u795e\u9f99\u8fdb\u5316\u7248"\n        }\n    ],\n    "a_sdk_headline_share_recorder_video_desc": [\n        [\n            "\u53ec\u5524\u795e\u9f99\u8fdb\u5316",\n            "\u6296\u97f3\u5c0f\u6e38\u620f",\n            "\u5f00\u5c40\u4e00\u6761\u9f99\uff0c\u8fdb\u5316\u51b2\u51b2\u51b2"\n        ],\n        [\n            "\u53ec\u5524\u795e\u9f99\u8fdb\u5316",\n            "\u6296\u97f3\u5c0f\u6e38\u620f",\n            "\u8fd8\u5728\u53ec\u5524\u795e\u9f99\uff1f\u73b0\u5728\u5df2\u7ecf\u53ef\u4ee5\u8fdb\u5316\u8d85\u795e\u517d\u5566\uff01"\n        ],\n        [\n            "\u53ec\u5524\u795e\u9f99\u8fdb\u5316",\n            "\u6296\u97f3\u5c0f\u6e38\u620f",\n            "\u5927\u80c6\u64cd\u4f5c\uff0c\u8f7b\u677e\u53ec\u5524\u795e\u9f99\uff01"\n        ]\n    ],\n    "t_sdk_headline_pay_code": {\n        \n    },\n    "s_game_name": "\u8d85\u7ea7\u795e\u9f99\u8fdb\u5316\u7248",\n    "t_sdk_headline_share_video_cuttemplateid": {\n        \n    },\n    "t_sdk_headline_subscribe_refresh_rule": {\n        \n    },\n    "t_sdk_headline_subscribe_templete_ids": {\n        \n    },\n    "t_sdk_headline_tt_navigate_to_mini_game_app_id_list": [\n        \n    ],\n    "t_sdk_huawei_pay_code": {\n        \n    },\n    "t_sdk_oppoqg_adv_tag_2_native_index": {\n        \n    },\n    "t_sdk_oppoqg_custom_adv_setting": {\n        \n    },\n    "t_sdk_oppoqg_jump_games": [\n        \n    ],\n    "t_sdk_oppoqg_native_index_2_native_id": {\n        \n    },\n    "t_sdk_oppoqg_pay_code": {\n        \n    },\n    "t_sdk_oppoqg_show_banner_box_adv_tags": [\n        \n    ],\n    "t_sdk_oppoqg_show_inter_box_adv_tags": [\n        \n    ],\n    "t_sdk_privacyPolicy_dataArray": [\n        {\n            "name": "\u9690\u79c1\u653f\u7b56",\n            "url": "https://gamesres.ultralisk.cn/notice/policy/oppopolicy.json"\n        }\n    ],\n    "t_sdk_record_duration_limit_object": {\n        "*": {\n            "max": 300,\n            "min": 3\n        },\n        "2": {\n            "max": 300,\n            "min": 15\n        }\n    },\n    "t_sdk_refresh_channels": [\n        "huawei",\n        "baishan"\n    ],\n    "t_sdk_show_native_banner_autoRefresh_tags": [\n        \n    ],\n    "t_sdk_show_native_banner_autoRefresh_tags_style_setting": {\n        \n    },\n    "t_sdk_trim_adv_err_object": {\n        "*": "\u5e7f\u544a\u64ad\u653e\u5931\u8d25\u4e86\uff0c\u91cd\u65b0\u8bd5\u8bd5\u770b\u5427\uff01",\n        "baidu": {\n            "code||errCode": {\n                "3010003": "\u60a8\u7684\u7f51\u7edc\u597d\u50cf\u4e0d\u591f\u6d41\u7545\uff0c\u8bf7\u66f4\u6362\u5230\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u518d\u64ad\u653e\u5e7f\u544a\u3002",\n                "3010005||3010006": "\u6b63\u5728\u4e3a\u60a8\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\uff0c\u4e0d\u8981\u91cd\u590d\u70b9\u51fb\u3002"\n            }\n        },\n        "headline||weixin||qq": {\n            "code||errCode": {\n                "1004": "\u6682\u65f6\u6ca1\u6709\u9002\u5408\u60a8\u89c2\u770b\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\uff01"\n            }\n        },\n        "oppoqg": {\n            "(this.errCode==1001 || this.errCode == 1004)&&errMsg": {\n                "/10001/||/10100/||/10101/||/10403/": "\u60a8\u7684\u7f51\u7edc\u597d\u50cf\u4e0d\u591f\u6d41\u7545\uff0c\u8bf7\u66f4\u6362\u5230\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u518d\u64ad\u653e\u5e7f\u544a\u3002",\n                "/10405/": "\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u592a\u4f4e\uff0c\u4e0d\u80fd\u64ad\u653e\u5e7f\u544a\u3002",\n                "/10406/": "\u9700\u8981\u8fde\u63a5\u5230 Wifi \u7f51\u7edc",\n                "/11002/": "\u8fd9\u4e2a\u5e7f\u544a\u53ea\u80fd\u5728OPPO\u624b\u673a\u4e0a\u64ad\u653e\uff0c\u8bf7\u786e\u8ba4\u60a8\u7684\u673a\u578b\u3002",\n                "/11003/": "\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u54271\uff01"\n            }\n        },\n        "vivo": {\n            "code||errCode": {\n                "-100||101||500": "\u60a8\u7684\u7f51\u7edc\u597d\u50cf\u4e0d\u591f\u6d41\u7545\uff0c\u8bf7\u66f4\u6362\u5230\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u518d\u64ad\u653e\u5e7f\u544a\u3002",\n                "-3||108||30005": "\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\uff01",\n                "30007": "\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\uff01",\n                "30010": "\u5e7f\u544a\u64ad\u653e\u5931\u8d25\u4e86\uff0c\u53ef\u80fd\u662f\u662f\u7531\u4e8e\u60a8\u7ecf\u5e38\u5173\u95ed\u5e7f\u544a\u9020\u6210\u7684\uff0c\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\u3002"\n            }\n        }\n    },\n    "t_sdk_vivo_custom_adv_setting": {\n        \n    },\n    "t_sdk_vivo_pay_code": {\n        \n    },\n    "t_sdk_vivo_share_list": [\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game009/share1.jpg",\n            "title": ""\n        }\n    ],\n    "t_sdk_vivo_show_banner_box_adv_tags": [\n        \n    ],\n    "t_sdk_webreview_cdk_goodsid": [\n        {\n            "count": 100,\n            "goodsid": 2\n        }\n    ],\n    "t_sdk_weixin_banner_splash_tags_setting": {\n        "*": {\n            "close": 0,\n            "show": 0\n        }\n    },\n    "t_sdk_weixin_custom_adv_setting": {\n        \n    },\n    "t_sdk_weixin_custom_tags_style_setting": {\n        \n    },\n    "t_sdk_weixin_grid_adunits": {\n        "list": "",\n        "list_roll": "",\n        "single": "",\n        "table": ""\n    },\n    "t_sdk_weixin_jump_games": [\n        {\n            "id": "wxc22ab8a3dd9ba848",\n            "index": "83",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/83.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/83.png"\n            ]\n        },\n        {\n            "id": "wx2ec0b7f791ec8c25",\n            "index": "86",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/86.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/86.png"\n            ]\n        },\n        {\n            "id": "wx64bd4e57ca56d886",\n            "index": "55v2",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/55v2.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/55v2.png"\n            ]\n        },\n        {\n            "id": "wxa44fb0b2873dbca0",\n            "index": "70",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/70.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/70.png"\n            ]\n        },\n        {\n            "id": "wx674c94b5a44a75de",\n            "index": "56",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/56.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/56.png"\n            ]\n        },\n        {\n            "id": "wxe3f7b8adbf57d2e4",\n            "index": "131",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/131.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/131.png"\n            ]\n        },\n        {\n            "id": "wxcf2f960c061944c6",\n            "index": "116",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/116.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/116.png"\n            ]\n        },\n        {\n            "id": "wx2cb70cded9b8c255",\n            "index": "117",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/117.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/117.png"\n            ]\n        },\n        {\n            "id": "wxe22e720e831505df",\n            "index": "110",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/110.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/110.png"\n            ]\n        },\n        {\n            "id": "wxe6ff4d6d0f759a9e",\n            "index": "100",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/100.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/100.png"\n            ]\n        },\n        {\n            "id": "wxa0ba65844f626111",\n            "index": "82",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/82.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/82.png"\n            ]\n        },\n        {\n            "id": "wx242593952fb2df7a",\n            "index": "80",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/80.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/80.png"\n            ]\n        },\n        {\n            "id": "wxc5fc8e29029ee33c",\n            "index": "119",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/119.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/119.png"\n            ]\n        },\n        {\n            "id": "wx7b9b74c53dd576ac",\n            "index": "74",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/74.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/74.png"\n            ]\n        }\n    ],\n    "t_sdk_weixin_navigate_to_mini_game_app_id_list": [\n        \n    ],\n    "t_sdk_weixin_pay_code": {\n        \n    },\n    "t_sdk_weixin_share_list": [\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game009/share1.jpg",\n            "title": ""\n        }\n    ],\n    "t_sdk_weixin_show_custom_tags": [\n        \n    ],\n    "t_sdk_weixin_subscribe_refresh_rule": {\n        \n    },\n    "t_sdk_weixin_subscribe_templete_ids": {\n        \n    },\n    "targetCreatorBranch": "v1",\n    "targetCreatorExePath": "creator/CocosCreator.exe",\n    "targetCreatorGitAddr": "ude2/prj.ulcocoscreator2.4.0",\n    "targetProjectBranch": "v1_dev_for_sdk_v8_h5_release",\n    "targetProjectGitAddr": "udecoop/prj.game009",\n    "tempCreatorProjectPaths": [\n        [\n            "assets/",\n            "assets/"\n        ],\n        [\n            "declare/",\n            "declare/"\n        ],\n        [\n            "packages/",\n            "packages/"\n        ],\n        [\n            "settings/",\n            "settings/"\n        ],\n        [\n            "jsconfig.json",\n            ""\n        ],\n        [\n            "project.json",\n            ""\n        ],\n        [\n            "tsconfig.json",\n            ""\n        ]\n    ],\n    "tempProjectName": "cc_proj",\n    "s_sdk_game_id": "1042",\n    "s_sdk_game_name": "\u53ec\u5524\u795e\u9f99\u8fdb\u5316",\n    "o_sdk_privacyPolicy_dataArray": [\n        {\n            "name": "\u96f7\u517d\u4e92\u52a8\u9690\u79c1\u653f\u7b56",\n            "url": "https://gamesres.ultralisk.cn/notice/policy/oppopolicy.json"\n        },\n        {\n            "name": "\u6700\u7ec8\u7528\u6237\u8bb8\u53ef\u534f\u8bae",\n            "url": "https://gamesres.ultralisk.cn/notice/policy/oppopolicy.json"\n        },\n        {\n            "name": "\u513f\u7ae5\u9690\u79c1\u4fdd\u62a4\u6307\u5f15",\n            "url": "https://gamesres.ultralisk.cn/notice/policy/mizhouxingfengchildprotectpolicy.txt"\n        }\n    ],\n    "autoUploadPack": false,\n    "B_OBFUSCATOR_CCONFIG": false,\n    "B_SHOW_LICENCE_INFO_ON_LOADING": false,\n    "build_cc_wechatgame_module_config": {\n        "bAutoUploadEnabled": true,\n        "bNakedPackage": true,\n        "nakedPackageSearchKeys": [\n            "main.fire",\n            "vLoadingScene",\n            "cfg/"\n        ],\n        "title": "\u53ec\u5524\u795e\u9f99\u8fdb\u5316",\n        "ttNavigateToMiniGameAppIdList": [\n            \n        ],\n        "wechatgame": {\n            "REMOTE_SERVER_ROOT": "https://gamesres.ultralisk.cn/h5_games_res/game009/headline/v1",\n            "appid": "ttc249b4f45d70c42702"\n        }\n    },\n    "i_sdk_licence_info_mode": 0,\n    "i_sdk_start_game_by_touch": 1,\n    "s_sdk_cop_channel_id": "147",\n    "s_sdk_channel_id": "147",\n    "s_sdk_cop_version": "115",\n    "s_sdk_licence_info": "",\n    "t_sdk_increment_fields": [\n        "s_sdk_headline_version_name"\n    ],\n    "_target_project_branch": "v1_dev_for_sdk_v8_h5_release",\n    "_target_project_log": "2023-10-08 10:29:40 +0800-lihongchuan-6ba3e65c9",\n    "_target_last_commit_time": 1696732180,\n    "_target_creator_branch": "v1",\n    "_target_creator_log": "2022-12-29 18:39:43 +0800-liuliang-522ee1b3",\n    "_target_creator_last_commit_time": 1672310383,\n    "prjVersion": "6ba3e65c9",\n    "rootPath": "D:/ulwork/ulsdk/",\n    "rootSdkPath": "D:/ulwork/ulsdk/prj.sdk.html.two/",\n    "gitRepoPath": "D:/ulwork/ulsdk/h5_games_res/",\n    "taskDate": "2023_10_08",\n    "taskTick": "2023_10_08_11_21_31",\n    "taskTickShort": "1008_112131",\n    "taskName": "headline",\n    "configName": "task_game009_zhsl_v1",\n    "targetPath": "D:/ulwork/ulsdk/h5_out/09_headline_1008_112131/",\n    "resCachePath": "D:/ulwork/ulsdk/h5_res_cache/prj.game009/",\n    "packagePath": "D:/ulwork/ulsdk/prj.games.html5.channels.packages/prj.game009/prj.game009_v1_dev_for_sdk_v8_h5_release_headline_1008_112131/",\n    "buildDisabled": false,\n    "creatorExePath": "D:/ulwork/ude2/prj.ulcocoscreator2.4.0/creator/CocosCreator.exe",\n    "nodejsExeAbsPath": "D:/ulwork/ude2/prj.ulnodejs/nodejs16.15.1/node.exe",\n    "taskJsonPath": "D:/ulwork/ulsdk/prj.games.html5.channels.tasks/task_game009_zhsl_v1/task.json",\n    "buildTempPath": "D://ulwork//ulsdk//prj.sdk.html.two//build_system//build_gradle/../../../h5_out/build_temp/",\n    "envCheckResult": [\n        \n    ],\n    "s_sdk_common_server_url": "https://common.ultralisk.cn",\n    "n_sdk_cop_mode": 1,\n    "s_sdk_cop_server_url": "https://copv7.ultralisk.cn",\n    "o_sdk_cop_simulate_city_data": {\n        "0": "\u672a\u77e5\u57ce\u5e02",\n        "1001": "\u6d77\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1002": "\u897f\u5b81",\n        "1003": "\u6d77\u4e1c",\n        "1004": "\u9ec4\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1005": "\u6d77\u897f\u8499\u53e4\u65cf\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1006": "\u6d77\u5317\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1007": "\u679c\u6d1b\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1008": "\u7389\u6811\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "101": "\u5317\u4eac",\n        "1101": "\u4e34\u590f\u56de\u65cf\u81ea\u6cbb\u5dde",\n        "1102": "\u7518\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1103": "\u767d\u94f6",\n        "1104": "\u9647\u5357",\n        "1105": "\u5b9a\u897f",\n        "1106": "\u5e73\u51c9",\n        "1107": "\u91d1\u660c",\n        "1108": "\u9152\u6cc9",\n        "1109": "\u5f20\u6396",\n        "1110": "\u5e86\u9633",\n        "1111": "\u5170\u5dde",\n        "1112": "\u6b66\u5a01",\n        "1113": "\u5609\u5cea\u5173",\n        "1114": "\u5929\u6c34",\n        "1201": "\u94f6\u5ddd",\n        "1202": "\u56fa\u539f",\n        "1203": "\u5434\u5fe0",\n        "1204": "\u4e2d\u536b",\n        "1205": "\u77f3\u5634\u5c71",\n        "1301": "\u5546\u6d1b",\n        "1302": "\u5b89\u5eb7",\n        "1303": "\u6986\u6797",\n        "1304": "\u94dc\u5ddd",\n        "1305": "\u54b8\u9633",\n        "1306": "\u897f\u5b89",\n        "1307": "\u6e2d\u5357",\n        "1308": "\u6c49\u4e2d",\n        "1309": "\u5b9d\u9e21",\n        "1310": "\u5ef6\u5b89",\n        "1401": "\u957f\u6625",\n        "1402": "\u767d\u57ce",\n        "1403": "\u677e\u539f",\n        "1404": "\u767d\u5c71",\n        "1405": "\u5409\u6797",\n        "1406": "\u5ef6\u8fb9\u671d\u9c9c\u65cf\u81ea\u6cbb\u5dde",\n        "1407": "\u56db\u5e73",\n        "1408": "\u8fbd\u6e90",\n        "1409": "\u901a\u5316",\n        "1501": "\u94dc\u9675",\n        "1502": "\u4eb3\u5dde",\n        "1503": "\u9ec4\u5c71",\n        "1504": "\u6c60\u5dde",\n        "1505": "\u5408\u80a5",\n        "1506": "\u6dee\u5317",\n        "1507": "\u6ec1\u5dde",\n        "1508": "\u5bbf\u5dde",\n        "1509": "\u6dee\u5357",\n        "1510": "\u868c\u57e0",\n        "1511": "\u516d\u5b89",\n        "1512": "\u961c\u9633",\n        "1513": "\u829c\u6e56",\n        "1514": "\u5ba3\u57ce",\n        "1515": "\u5b89\u5e86",\n        "1516": "\u9a6c\u978d\u5c71",\n        "1601": "\u6069\u65bd\u571f\u5bb6\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1602": "\u4ed9\u6843",\n        "1603": "\u6b66\u6c49",\n        "1604": "\u5b5d\u611f",\n        "1605": "\u54b8\u5b81",\n        "1606": "\u5341\u5830",\n        "1607": "\u5929\u95e8",\n        "1608": "\u9ec4\u5188",\n        "1609": "\u5b9c\u660c",\n        "1610": "\u8944\u9633",\n        "1611": "\u9ec4\u77f3",\n        "1612": "\u8346\u95e8",\n        "1613": "\u968f\u5dde",\n        "1614": "\u8346\u5dde",\n        "1615": "\u9102\u5dde",\n        "1616": "\u795e\u519c\u67b6\u6797\u533a",\n        "1617": "\u6f5c\u6c5f",\n        "1701": "\u682a\u6d32",\n        "1702": "\u90b5\u9633",\n        "1703": "\u5cb3\u9633",\n        "1704": "\u5f20\u5bb6\u754c",\n        "1705": "\u6000\u5316",\n        "1706": "\u8861\u9633",\n        "1707": "\u957f\u6c99",\n        "1708": "\u5e38\u5fb7",\n        "1709": "\u90f4\u5dde",\n        "1710": "\u6c38\u5dde",\n        "1711": "\u6e58\u897f\u571f\u5bb6\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1712": "\u6e58\u6f6d",\n        "1713": "\u76ca\u9633",\n        "1714": "\u5a04\u5e95",\n        "1801": "\u5b89\u987a",\n        "1802": "\u9ed4\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1803": "\u94dc\u4ec1",\n        "1804": "\u516d\u76d8\u6c34",\n        "1805": "\u8d35\u9633",\n        "1806": "\u9ed4\u4e1c\u5357\u82d7\u65cf\u4f97\u65cf\u81ea\u6cbb\u5dde",\n        "1807": "\u6bd5\u8282",\n        "1808": "\u9075\u4e49",\n        "1809": "\u9ed4\u897f\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1901": "\u592a\u539f",\n        "1902": "\u957f\u6cbb",\n        "1903": "\u8fd0\u57ce",\n        "1904": "\u664b\u4e2d",\n        "1905": "\u5ffb\u5dde",\n        "1906": "\u6714\u5dde",\n        "1907": "\u664b\u57ce",\n        "1908": "\u9633\u6cc9",\n        "1909": "\u5927\u540c",\n        "1910": "\u4e34\u6c7e",\n        "1911": "\u5415\u6881",\n        "2001": "\u6765\u5bbe",\n        "2002": "\u67f3\u5dde",\n        "2003": "\u5d07\u5de6",\n        "2004": "\u767e\u8272",\n        "2005": "\u6cb3\u6c60",\n        "2006": "\u9632\u57ce\u6e2f",\n        "2007": "\u8d3a\u5dde",\n        "2008": "\u8d35\u6e2f",\n        "2009": "\u5317\u6d77",\n        "201": "\u4e0a\u6d77",\n        "2010": "\u5357\u5b81",\n        "2011": "\u6842\u6797",\n        "2012": "\u7389\u6797",\n        "2013": "\u94a6\u5dde",\n        "2014": "\u68a7\u5dde",\n        "2101": "\u51c9\u5c71\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "2102": "\u6500\u679d\u82b1",\n        "2103": "\u4e50\u5c71",\n        "2104": "\u9042\u5b81",\n        "2105": "\u8d44\u9633",\n        "2106": "\u7ef5\u9633",\n        "2107": "\u81ea\u8d21",\n        "2108": "\u5fb7\u9633",\n        "2109": "\u96c5\u5b89",\n        "2110": "\u8fbe\u5dde",\n        "2111": "\u5e7f\u5143",\n        "2112": "\u5e7f\u5b89",\n        "2113": "\u963f\u575d\u85cf\u65cf\u7f8c\u65cf\u81ea\u6cbb\u5dde",\n        "2114": "\u7518\u5b5c\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "2115": "\u6210\u90fd",\n        "2116": "\u5357\u5145",\n        "2117": "\u6cf8\u5dde",\n        "2118": "\u5185\u6c5f",\n        "2119": "\u5b9c\u5bbe",\n        "2120": "\u5df4\u4e2d",\n        "2121": "\u7709\u5c71",\n        "2201": "\u90d1\u5dde",\n        "2202": "\u4e09\u95e8\u5ce1",\n        "2203": "\u6d1b\u9633",\n        "2204": "\u5f00\u5c01",\n        "2205": "\u4fe1\u9633",\n        "2206": "\u7126\u4f5c",\n        "2207": "\u8bb8\u660c",\n        "2208": "\u6fee\u9633",\n        "2209": "\u6d4e\u6e90",\n        "2210": "\u9e64\u58c1",\n        "2211": "\u5b89\u9633",\n        "2212": "\u9a7b\u9a6c\u5e97",\n        "2213": "\u65b0\u4e61",\n        "2214": "\u5357\u9633",\n        "2215": "\u6f2f\u6cb3",\n        "2216": "\u5e73\u9876\u5c71",\n        "2217": "\u5546\u4e18",\n        "2218": "\u5468\u53e3",\n        "2301": "\u77f3\u5bb6\u5e84",\n        "2302": "\u4fdd\u5b9a",\n        "2303": "\u6ca7\u5dde",\n        "2304": "\u8861\u6c34",\n        "2305": "\u5510\u5c71",\n        "2306": "\u90af\u90f8",\n        "2307": "\u5eca\u574a",\n        "2308": "\u79e6\u7687\u5c9b",\n        "2309": "\u90a2\u53f0",\n        "2310": "\u5f20\u5bb6\u53e3",\n        "2311": "\u627f\u5fb7",\n        "2401": "\u798f\u5dde",\n        "2402": "\u53a6\u95e8",\n        "2403": "\u5b81\u5fb7",\n        "2404": "\u8386\u7530",\n        "2405": "\u9f99\u5ca9",\n        "2406": "\u4e09\u660e",\n        "2407": "\u5357\u5e73",\n        "2408": "\u6cc9\u5dde",\n        "2409": "\u6f33\u5dde",\n        "2501": "\u5357\u660c",\n        "2502": "\u4e0a\u9976",\n        "2503": "\u8d63\u5dde",\n        "2504": "\u65b0\u4f59",\n        "2505": "\u9e70\u6f6d",\n        "2506": "\u629a\u5dde",\n        "2507": "\u840d\u4e61",\n        "2508": "\u5b9c\u6625",\n        "2509": "\u666f\u5fb7\u9547",\n        "2510": "\u5409\u5b89",\n        "2511": "\u4e5d\u6c5f",\n        "2601": "\u73e0\u6d77",\n        "2602": "\u4e1c\u839e",\n        "2603": "\u6c5f\u95e8",\n        "2604": "\u9633\u6c5f",\n        "2605": "\u60e0\u5dde",\n        "2606": "\u6c55\u5c3e",\n        "2607": "\u6885\u5dde",\n        "2608": "\u6e05\u8fdc",\n        "2609": "\u6e5b\u6c5f",\n        "2610": "\u63ed\u9633",\n        "2611": "\u5e7f\u5dde",\n        "2612": "\u4e91\u6d6e",\n        "2613": "\u6f6e\u5dde",\n        "2614": "\u6c55\u5934",\n        "2615": "\u97f6\u5173",\n        "2616": "\u6df1\u5733",\n        "2617": "\u4f5b\u5c71",\n        "2618": "\u4e2d\u5c71",\n        "2619": "\u8087\u5e86",\n        "2620": "\u8302\u540d",\n        "2621": "\u6cb3\u6e90",\n        "2701": "\u547c\u548c\u6d69\u7279",\n        "2702": "\u9521\u6797\u90ed\u52d2\u76df",\n        "2703": "\u4e4c\u5170\u5bdf\u5e03",\n        "2704": "\u901a\u8fbd",\n        "2705": "\u5305\u5934",\n        "2706": "\u963f\u62c9\u5584\u76df",\n        "2707": "\u5df4\u5f66\u6dd6\u5c14",\n        "2708": "\u5174\u5b89\u76df",\n        "2709": "\u9102\u5c14\u591a\u65af",\n        "2710": "\u4e4c\u6d77",\n        "2711": "\u547c\u4f26\u8d1d\u5c14",\n        "2712": "\u8d64\u5cf0",\n        "2801": "\u9e64\u5c97",\n        "2802": "\u9e21\u897f",\n        "2803": "\u54c8\u5c14\u6ee8",\n        "2804": "\u9ed1\u6cb3",\n        "2805": "\u4e03\u53f0\u6cb3",\n        "2806": "\u4f0a\u6625",\n        "2807": "\u5927\u5174\u5b89\u5cad\u5730\u533a",\n        "2808": "\u7261\u4e39\u6c5f",\n        "2809": "\u7ee5\u5316",\n        "2810": "\u9f50\u9f50\u54c8\u5c14",\n        "2811": "\u53cc\u9e2d\u5c71",\n        "2812": "\u5927\u5e86",\n        "2813": "\u4f73\u6728\u65af",\n        "2901": "\u846b\u82a6\u5c9b",\n        "2902": "\u8425\u53e3",\n        "2903": "\u4e39\u4e1c",\n        "2904": "\u6c88\u9633",\n        "2905": "\u629a\u987a",\n        "2906": "\u8fbd\u9633",\n        "2907": "\u5927\u8fde",\n        "2908": "\u978d\u5c71",\n        "2909": "\u76d8\u9526",\n        "2910": "\u961c\u65b0",\n        "2911": "\u672c\u6eaa",\n        "2912": "\u9526\u5dde",\n        "2913": "\u94c1\u5cad",\n        "2914": "\u671d\u9633",\n        "3001": "\u6dc4\u535a",\n        "3002": "\u4e34\u6c82",\n        "3003": "\u5a01\u6d77",\n        "3004": "\u83b1\u829c",\n        "3005": "\u65e5\u7167",\n        "3006": "\u6d4e\u5357",\n        "3007": "\u6cf0\u5b89",\n        "3008": "\u70df\u53f0",\n        "3009": "\u804a\u57ce",\n        "301": "\u5929\u6d25",\n        "3010": "\u4e1c\u8425",\n        "3011": "\u83cf\u6cfd",\n        "3012": "\u6ee8\u5dde",\n        "3013": "\u6f4d\u574a",\n        "3014": "\u5fb7\u5dde",\n        "3015": "\u9752\u5c9b",\n        "3016": "\u6d4e\u5b81",\n        "3017": "\u67a3\u5e84",\n        "3101": "\u5357\u4eac",\n        "3102": "\u5e38\u5dde",\n        "3103": "\u82cf\u5dde",\n        "3104": "\u65e0\u9521",\n        "3105": "\u76d0\u57ce",\n        "3106": "\u9547\u6c5f",\n        "3107": "\u8fde\u4e91\u6e2f",\n        "3108": "\u5bbf\u8fc1",\n        "3109": "\u5357\u901a",\n        "3110": "\u5f90\u5dde",\n        "3111": "\u6dee\u5b89",\n        "3112": "\u626c\u5dde",\n        "3113": "\u6cf0\u5dde",\n        "401": "\u91cd\u5e86",\n        "501": "\u5b81\u6ce2",\n        "502": "\u91d1\u534e",\n        "503": "\u5609\u5174",\n        "504": "\u7ecd\u5174",\n        "505": "\u6e56\u5dde",\n        "506": "\u8862\u5dde",\n        "507": "\u821f\u5c71",\n        "508": "\u676d\u5dde",\n        "509": "\u6e29\u5dde",\n        "510": "\u4e3d\u6c34",\n        "511": "\u53f0\u5dde",\n        "601": "\u510b\u5dde",\n        "602": "\u5b9a\u5b89\u53bf",\n        "603": "\u4e1c\u65b9",\n        "604": "\u4e94\u6307\u5c71",\n        "605": "\u5c6f\u660c\u53bf",\n        "606": "\u743c\u6d77",\n        "607": "\u6f84\u8fc8\u53bf",\n        "608": "\u743c\u4e2d\u9ece\u65cf\u82d7\u65cf\u81ea\u6cbb\u53bf",\n        "609": "\u4e09\u4e9a",\n        "610": "\u767d\u6c99\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "611": "\u6587\u660c",\n        "612": "\u9675\u6c34\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "613": "\u660c\u6c5f\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "614": "\u4fdd\u4ead\u9ece\u65cf\u82d7\u65cf\u81ea\u6cbb\u53bf",\n        "615": "\u4e34\u9ad8\u53bf",\n        "616": "\u6d77\u53e3",\n        "617": "\u4e07\u5b81",\n        "618": "\u4e50\u4e1c\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "701": "\u8fea\u5e86\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "702": "\u897f\u53cc\u7248\u7eb3\u50a3\u65cf\u81ea\u6cbb\u5dde",\n        "703": "\u4e34\u6ca7",\n        "704": "\u4fdd\u5c71",\n        "705": "\u7389\u6eaa",\n        "706": "\u5fb7\u5b8f\u50a3\u65cf\u666f\u9887\u65cf\u81ea\u6cbb\u5dde",\n        "707": "\u7ea2\u6cb3\u54c8\u5c3c\u65cf\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "708": "\u5927\u7406\u767d\u65cf\u81ea\u6cbb\u5dde",\n        "709": "\u4e3d\u6c5f",\n        "710": "\u6012\u6c5f\u5088\u50f3\u65cf\u81ea\u6cbb\u5dde",\n        "711": "\u666e\u6d31",\n        "712": "\u695a\u96c4\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "713": "\u6587\u5c71\u58ee\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "714": "\u6606\u660e",\n        "715": "\u66f2\u9756",\n        "716": "\u662d\u901a",\n        "801": "\u62c9\u8428",\n        "802": "\u660c\u90fd",\n        "803": "\u5c71\u5357",\n        "804": "\u963f\u91cc\u5730\u533a",\n        "805": "\u6797\u829d",\n        "806": "\u65e5\u5580\u5219",\n        "807": "\u90a3\u66f2\u5730\u533a",\n        "901": "\u5580\u4ec0\u5730\u533a",\n        "902": "\u963f\u514b\u82cf\u5730\u533a",\n        "903": "\u548c\u7530\u5730\u533a",\n        "904": "\u54c8\u5bc6",\n        "905": "\u77f3\u6cb3\u5b50",\n        "906": "\u5410\u9c81\u756a",\n        "907": "\u535a\u5c14\u5854\u62c9\u8499\u53e4\u81ea\u6cbb\u5dde",\n        "908": "\u5df4\u97f3\u90ed\u695e\u8499\u53e4\u81ea\u6cbb\u5dde",\n        "909": "\u660c\u5409\u56de\u65cf\u81ea\u6cbb\u5dde",\n        "910": "\u5854\u57ce\u5730\u533a",\n        "911": "\u514b\u5b5c\u52d2\u82cf\u67ef\u5c14\u514b\u5b5c\u81ea\u6cbb\u5dde",\n        "912": "\u963f\u52d2\u6cf0\u5730\u533a",\n        "913": "\u4e4c\u9c81\u6728\u9f50",\n        "914": "\u514b\u62c9\u739b\u4f9d",\n        "915": "\u4f0a\u7281\u54c8\u8428\u514b\u81ea\u6cbb\u5dde"\n    },\n    "o_sdk_cop_default_cop": {\n        \n    },\n    "n_sdk_start_game_by_touch": 1,\n    "n_sdk_age_level_info_mode": 0,\n    "n_sdk_adv_mode": 1,\n    "a_sdk_exempt_advType_limit_arrays": [\n        \n    ],\n    "o_sdk_mutuallyExclusive_advType_setting": {\n        \n    },\n    "o_sdk_headline_subscribe_setting": {\n        \n    },\n    "o_sdk_headline_subscribe_refresh_rule": {\n        \n    },\n    "s_sdk_headline_share_video_title": "",\n    "tempProjPath": "D:/ulwork/ulsdk/h5_out/09_headline_1008_112131/cc_proj/",\n    "moduleList": "common,build_cc_wechatgame,headline,statistics"\n}'),cc._RF.pop()},{}],init:[function(e,t,i){"use strict";cc._RF.push(t,"c811f+28JBJvILU83JHrwdf","init");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("mgrAchievement"),a=n("mgrAd"),s=n("mgrAdNative"),l=n("mgrAlertRouter"),d=n("mgrAlu"),c=n("mgrBannerInt"),u=n("mgrCfg"),h=n("mgrChannel"),p=n("mgrCop"),f=n("mgrDebug"),g=n("mgrDirector"),v=n("mgrFishRank"),_=n("mgrFishSkin"),y=n("mgrGame"),m=n("mgrGuide"),S=n("mgrNativeAdSdk"),b=n("mgrNetwork"),C=n("mgrPlayer"),I=n("mgrPool"),F=n("mgrRecord"),R=n("mgrReview"),w=n("mgrRole"),L=n("mgrSdk"),T=n("mgrShop"),x=n("mgrSound"),P=n("mgrTip"),A=n("mgrVideoRecorder"),E=n("mgrWordFilter");window.ul={},u.default.init(),F.default.init(),g.default.init(),I.default.init(),P.default.init(),E.default.init(),p.default.init(),d.default.init(),f.default.init(),C.default.init(),b.default.init(),T.default.init(),x.default.init(),L.default.init(),a.default.init(),S.default.init(),s.default.init(),c.default.init(),A.default.init(),l.default.init(),h.default.init(),R.default.init(),_.default.init(),v.default.init(),w.default.init(),y.default.init(),r.default.init(),m.default.init();var N=cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser&&/(iPhone OS 14)|(Version\/14(\.|[0-9])*)|(iOS 14)/.test(window.navigator.userAgent),D=cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser&&/(iPhone OS 15)|(Version\/15(\.|[0-9])*)|(iOS 15)/.test(window.navigator.userAgent);(N||D)&&(cc.MeshBuffer.prototype.checkAndSwitchBuffer=function(e){this.vertexOffset+e>65535&&(this.uploadData(),this._batcher._flush())},cc.MeshBuffer.prototype.forwardIndiceStartToOffset=function(){this.uploadData(),this.switchBuffer()}),cc._RF.pop()},{}],main:[function(e,t,i){"use strict";cc._RF.push(t,"99ca5HYPuhJE6hdQAgv4xEb","main");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("mgrDirector"),d=o("ULSDK"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.start=function(){console.log("cc.macro.MAX_ZINDEX: ",cc.macro.MAX_ZINDEX),console.log("cc.macro.MIN_ZINDEX: ",cc.macro.MIN_ZINDEX),l.default.refreshSceneSize(),d.ulsdk.initSdk({mode:0,callback:function(e){console.log("ulsdk.initSdk.result===",e),e.bSuccess&&l.default.enterScene("vLoadingScene")}})},s([u],t)}(cc.Component));r.default=h,cc._RF.pop()},{}],mgrAchievement:[function(e,t,i){"use strict";cc._RF.push(t,"4ce5b3KZpVOT7mHCSwy/wjw","mgrAchievement");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.AchievementState=void 0;var s,l=o("Manager"),d=o("Timer"),c=o("Tools"),u=o("sAchievement"),h=o("mgrCfg"),p=o("mgrPlayer"),f=o("mgrRecord"),g=o("mgrTip");(function(e){e[e.locked=1]="locked",e[e.unlocked=2]="unlocked",e[e.finished=3]="finished",e[e.received=4]="received"})(s=r.AchievementState||(r.AchievementState={}));var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_ACHIEVEMENT_STATE_CHANGED:this.onMsgAchievementStateChanged,MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged,MSG_STAGE_RATING_CHAGNED:this.onMsgStageRatingChanged,MSG_PET_LEVEL_CHANGED:this.onMsgPetLevelChanged,MSG_PET_ADVENTURE_CHANGED:this.onMsgPetAdventureChanged,MSG_PET_COMBINE_LOG_CHANGED:this.onMsgPetCombineLogChanged,MSG_PVE_COUNT_CHANGED:this.onMsgPveCountChanged,MSG_BAKERY_STORE_UPGRADE:this.onMsgBakeryStoreUpgrade,MSG_ARENA_LEVEL_CHANGE:this.onMsgArenaLevelChange,MSG_CAKE_STAGE_RATING_CHAGNED:this.onMsgCakeStageRatingChanged}),d.default.callLoop(1,this.onTimerLoop.bind(this),!0)},t.loadRecord=function(){var t=this;e.loadRecord.call(this);var i=(f.default.getData("achievement")||{}).achievementDatas||{};h.default.forDb_from_achievement_db(function(e,n){var o=new u.default(n.id),r=i[n.id];r?o.setState(r.state):o.setState(s.unlocked),t.achievements[n.id]=o}),this.refreshAchievement(null,!0)},t.saveRecord=function(){e.saveRecord.call(this);var t={};c.default.forEachMap(this.achievements,function(e,i){t[i.id]={state:i.state}});var i={achievementDatas:t};f.default.setData("achievement",i)},t.onTimerLoop=function(){this.tryRefreshAchievement()},t.refreshAchievement=function(e,t){var i=this,n=!1;c.default.forEachMap(this.achievements,function(o,r){var a=r.refreshState(e);n=n||a,a&&!t&&i.sendMsg("MSG_ACHIEVEMENT_STATE_CHANGED",{achievementId:r.id,state:r.state})}),n&&this.saveRecord()},t.obtainReward=function(e,t){var i=this.achievements[e];if(!i)return cc.warn(ul.format("mgrAchievement.obtainReward, achievement not found! aid = %s",e)),[null,null];if(i.state!=s.finished)return cc.warn(ul.format("mgrAchievement.obtainReward, achievement state id not finished! aid = %s",e)),[null,null];var n=i.template.rewardItemId,o=i.template.rewardAmount;return 0!=n&&p.default.addItemAmount(n,o,t),i.setState(s.received),this.saveRecord(),this.sendMsg("MSG_ACHIEVEMENT_STATE_CHANGED",{achievementId:i.id,state:i.state}),[n,o]},t.getAchievement=function(e){return this.achievements[e]||(cc.warn(ul.format("mgrAchievement.getAchievement achievement not found, aid = %s",e)),null)},t.getAchievementsByCategory=function(e){var t=[];return c.default.forEachMap(this.achievements,function(i,n){n.template.category==e&&t.push(n)}),t},t.tryRefreshAchievement=function(){var e=null;if(c.default.forEachMap(this.cmdQueue,function(t){e||(e=[]),e.push(t)}),e){this.cmdQueue={};for(var t=0;t<e.length;t++){var i=e[t];this.refreshAchievement(i)}}},t.isAchievementCompleted=function(e){if(!e)return!1;var t=this.getAchievement(e);if(!t)return!1;var i=t.state;return i==s.finished||i==s.received},t.isAchievementsAllCompleted=function(e){if(!e)return!1;for(var t=0;t<e.length;t++){var i=e[t];if(!this.isAchievementCompleted(i))return!1}return!0},t.getAchievementCanReceiveCount=function(e){var t=0;return c.default.forEachMap(this.achievements,function(i,n){n.template.category==e&&n.state==s.finished&&t++}),t},t.playAchievementTip=function(e){this.bAchievementTipEnabled&&g.default.showMsgTip(ul.format("\u6210\u5c31\u5b8c\u6210\uff1a%s",e.template.name))},t._setAchievementTipEnabled=function(e){this.bAchievementTipEnabled=e},t.getShowAchievementsByCategory=function(e){var t={};c.default.forEachMap(this.achievements,function(i,n){n.template.category==e&&(t[n.template.subCategory]||(t[n.template.subCategory]=[]),t[n.template.subCategory].push(n))});var i=[];return c.default.forEachMap(t,function(e,t){t=c.default.sortArrayByField(t,"id");for(var n=0;n<t.length;n++){var o=t[n];if(n<t.length-1){if(o.state<=s.finished){i.push(o);break}}else i.push(o)}}),i},t.getAchievementLevel=function(e){var i=t.getAchievement(e),n=i.template.category,o=i.template.subCategory,r=[];c.default.forEachMap(this.achievements,function(e,t){t.template.category==n&&t.template.subCategory==o&&r.push(t)}),r=c.default.sortArrayByField(r,"id");for(var a=0;a<r.length;a++)if(r[a].id==e)return[a+1,r.length];return[1,1]},t.getTaskAchievements=function(){var e={};c.default.forEachMap(this.achievements,function(t,i){1==i.template.category&&(e[i.template.subCategory]||(e[i.template.subCategory]=[]),e[i.template.subCategory].push(i))});var t=[],i=[],n=[];return c.default.forEachMap(e,function(e,o){o=c.default.sortArrayByField(o,"id");for(var r=0;r<o.length;r++){var a=o[r];if(a.state==s.unlocked){i.push(a);break}if(a.state==s.finished){t.push(a);break}a.state==s.received&&r==o.length-1&&n.push(a)}}),t.concat(i,n)},t.getBadageCount=function(){var e=0;return c.default.forEachMap(this.achievements,function(t,i){1==i.template.category&&i.state==s.finished&&e++}),e},t.onMsgAchievementStateChanged=function(e){var t=e,i=t.achievementId;if(t.state==s.finished){var n=this.achievements[i];n.template.bNeedTip&&this.playAchievementTip(n)}this.cmdQueue.MSG_ACHIEVEMENT_STATE_CHANGED=!0},t.onMsgItemAmountChanged=function(){this.cmdQueue.MSG_ITEM_AMOUNT_CHANGED=!0},t.onMsgStageRatingChanged=function(){this.cmdQueue.MSG_STAGE_RATING_CHAGNED=!0},t.onMsgPetLevelChanged=function(){this.cmdQueue.MSG_PET_LEVEL_CHANGED=!0},t.onMsgPetAdventureChanged=function(){this.cmdQueue.MSG_PET_ADVENTURE_CHANGED=!0},t.onMsgPetCombineLogChanged=function(){this.cmdQueue.MSG_PET_COMBINE_LOG_CHANGED=!0},t.onMsgPveCountChanged=function(){this.cmdQueue.MSG_PVE_COUNT_CHANGED=!0},t.onMsgBakeryStoreUpgrade=function(){this.cmdQueue.MSG_BAKERY_STORE_UPGRADE=!0},t.onMsgArenaLevelChange=function(){this.cmdQueue.MSG_ARENA_LEVEL_CHANGE=!0},t.onMsgCakeStageRatingChanged=function(){this.cmdQueue.MSG_CAKE_STAGE_RATING_CHAGNED=!0},t.achievements={},t.cmdQueue={},t.bAchievementTipEnabled=!0,t}(l.default);r.default=v,cc._RF.pop()},{}],mgrAdNative:[function(e,t,i){"use strict";cc._RF.push(t,"1c344DavilE8r1GFGV2oIzN","mgrAdNative");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.NATIVE_AD_TYPE=void 0;var s,l=o("Manager"),d=o("Timer"),c=o("Tools"),u=o("Const"),h=o("mgrAd"),p=o("mgrCfg"),f=o("mgrDirector"),g=o("mgrNativeAdSdk");(function(e){e[e.banner=1]="banner",e[e.insert=2]="insert",e[e.embed=3]="embed"})(s=r.NATIVE_AD_TYPE||(r.NATIVE_AD_TYPE={}));var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH:this.onMsgNativeDataRefresh})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.requestSomeNativeAdAtStart=function(){},t.getNativeDataByAdEventId=function(e){var t=p.default.get_from_ad_event_db(e);return t?g.default.getNativeDataByNativeType(t.advId):null},t.onNativeAdViewClenup=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),e&&this.getNativeDataByAdEventId(e)){if(t){var n=p.default.get_from_ad_event_db(e);n&&g.default.cleanNativeDataByNativeType(n.advId)}var o=p.default.get_from_ad_event_db(e);g.default.onCloseNativeAd(o.advId,this.nativeBannerRefreshFun[e].userData,e,i)}},t.__invokeRefreshData=function(e){var t=e.adEventId||0;if(t){var i=p.default.get_from_ad_event_db(t);i&&(i.nativeType!=s.embed&&i.nativeType!=s.banner||(cc.log("__invokeRefresh: adEventId = ",t),this.__invokeClientRefresh(t,!0)))}},t.__invokeClientRefresh=function(e,t){h.default.triggerAdEvent(e,null,t)},t.registerNativeBannerRefreshFun=function(e,t,i){var n=this,o=p.default.get_from_ad_event_db(e);cc.isValid(i)&&o&&(this.nativeBannerRefreshFun[e]={fun:t,node:i,userData:this.nativeBannerRefreshFun[e]?this.nativeBannerRefreshFun[e].userData:null},c.default.registerTouchHandler(i,function(t){if(t.isClick()){var i=n.getNativeDataByAdEventId(e);cc.log(n.nativeBannerRefreshFun),i&&n.nativeBannerRefreshFun[e]&&n.nativeBannerRefreshFun[e].userData&&(cc.log("on touch native !!!"),g.default.onClickNativeAd(o.advId,n.nativeBannerRefreshFun[e].userData,o.adTag))}}),i.addComponent(cc.Component).onDestroy=function(){d.default.callLater(.3,function(){var t=!!n.manualCloseAdEventIdCache[e];delete n.manualCloseAdEventIdCache[e],n.onNativeAdViewClenup(e,!0,t)})},h.default.triggerAdEvent(e),this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:o.advId,userData:{adEventId:e}}))},t.clickNative=function(e){var t=p.default.get_from_ad_event_db(e);g.default.onClickNativeAd(t.advId,this.nativeBannerRefreshFun[e].userData,t.adTag)},t.markManualCloseNative=function(e){this.manualCloseAdEventIdCache[e]=!0},t.refreshNativeBanner=function(e){var t=this.nativeBannerRefreshFun[e];if(t){if(cc.isValid(t.node)){var i=this.getNativeDataByAdEventId(e);try{t.fun(i)}catch(e){cc.log(e)}}}else cc.warn(ul.format(":)adEventId:%s isn't regist!!!"))},t.onMsgNativeDataRefresh=function(e){var t=this,i=e.userData.adEventId;cc.log("onMsgNativeDataRefresh",i);var n=this.getNativeDataByAdEventId(i);n||(n={}),this.nativeBannerRefreshFun[i]||(this.nativeBannerRefreshFun[i]={}),this.nativeBannerRefreshFun[i].userData=e.userData,cc.log("try down load image: "+n.url),this.__tryRefreshLogic(e.advId),n.url&&f.default.loadRes(n.url,cc.SpriteFrame,function(o,r){if(n){o&&console.warn(o),r instanceof cc.Texture2D&&(r=new cc.SpriteFrame(r)),n.spriteFrame=r;var a=p.default.get_from_ad_event_db(i);a&&a.nativeType==s.insert&&ul.length(n)>0&&(f.default.openDialog("vNativeDialog",{adEventId:i,userData:e.userData}).zIndex=u.default.GLOBAL_ORDER_NATIVE_AD),t.__tryRefreshLogic(e.advId)}})},t.__tryRefreshLogic=function(e){var t=this;this.sendMsg("MSG_NATIVE_DATA_REFRESH",{advId:e}),c.default.forEachMap(this.nativeBannerRefreshFun,function(i){var n=p.default.quietGet("ad_event_db",i);n&&e&&n.advId==e&&t.refreshNativeBanner(i)})},t.nativeBannerRefreshFun={},t.manualCloseAdEventIdCache={},t}(l.default);r.default=v,cc._RF.pop()},{}],mgrAd:[function(e,t,i){"use strict";cc._RF.push(t,"20276rxf1BCtI/uXv/IKIg9","mgrAd");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0}),r.ADV_ID=r.AD_MODE=void 0;var s,l=o("Manager"),d=o("Tools"),c=o("mgrAlu"),u=o("mgrCfg"),h=o("mgrGame"),p=o("mgrPlayer"),f=o("mgrRecord"),g=o("mgrSdk"),v=o("mgrSound"),_=o("mgrTip");(function(e){e[e.close=1]="close",e[e.relaxed=2]="relaxed",e[e.careful=3]="careful"})(r.AD_MODE||(r.AD_MODE={})),function(e){e.intert="1",e.banner="2",e.embed="3",e.video="4",e.h5="5"}(s=r.ADV_ID||(r.ADV_ID={}));var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_SDK_OPEN_ADV_RESULT:this.onMsgSdkOpenAdvResult,MSG_SDK_ADV_VALID_COUNT:this.onMsgSdkAdvValidCount}),d.default.isOneDay(this.todayNativeInsertLastScaleTime,d.default.time())||(this.todayNativeInsertScaleCount=0,this.todayNativeInsertScaleIntervalCount=0,this.todayNativeInsertLastScaleTime=d.default.time(),this.dailyAdSuccessedCountDict={})},t.loadRecord=function(){e.loadRecord.call(this);var t=f.default.getData("ad")||{};this.lastFinishedTimes=t.lastFinishedTimes||{},this.lastUnlockModeTimes=t.lastUnlockModeTimes||{},this.todayNativeInsertScaleCount=t.todayNativeInsertScaleCount||0,this.todayNativeInsertScaleIntervalCount=t.todayNativeInsertScaleIntervalCount||0,this.todayNativeInsertLastScaleTime=t.todayNativeInsertLastScaleTime||0,this.dailyAdSuccessedCountDict=t.dailyAdSuccessedCountDict||{}},t.saveRecord=function(){e.saveRecord.call(this);var t={lastFinishedTimes:this.lastFinishedTimes,lastUnlockModeTimes:this.lastUnlockModeTimes,todayNativeInsertScaleCount:this.todayNativeInsertScaleCount,todayNativeInsertScaleIntervalCount:this.todayNativeInsertScaleIntervalCount,todayNativeInsertLastScaleTime:this.todayNativeInsertLastScaleTime,dailyAdSuccessedCountDict:this.dailyAdSuccessedCountDict};f.default.setData("ad",t)},t.getAdEventRemainCount=function(e){var t=u.default.get_from_ad_event_db(e);return t&&this.isAdTypeValid(e)?t.remainCountCopKey?Math.max(0,g.default.getCopNumberValueByKey(t.remainCountCopKey)-(this.dailyAdSuccessedCountDict[t.id]||0)):t.remainCountItemId>0?p.default.getItemAmount(t.remainCountItemId):1:0},t.getAdEventRemainCd=function(e){var t=u.default.get_from_ad_event_db(e);if(!t)return 0;var i=t.cd;if(t.cdFromCopKey&&(i=g.default.getCopNumberValueByKey(t.cdFromCopKey)||0),i>0){var n=this.getLastFinishedTime(e)+i;return Math.max(0,n-d.default.time())}return 0},t.getLastFinishedTime=function(e){var t=u.default.get_from_ad_event_db(e);if(!t)return 0;var i=t.id;return t.cdGroup&&(i=t.cdGroup),this.lastFinishedTimes[i]||0},t.markFinished=function(e){var t=u.default.get_from_ad_event_db(e);if(t){var i=t.id;t.cdGroup&&(i=t.cdGroup),this.lastFinishedTimes[i]=d.default.time(),this.saveRecord()}},t.isAdTypeValid=function(e){var i=u.default.get_from_ad_event_db(e);if(!i)return!0;switch(i.advId){case s.video:return t.AD_VIDEO_VALID_COUNT>0}return!0},t.preCheckAdNoCd=function(e){var t=u.default.get_from_ad_event_db(e);if(!t)return!1;if(this.getAdEventRemainCount(e)<=0)return!1;if(!c.default.check(t.aluId))return!1;var i=t.ratio;return t.ratioFromCopKey&&(i=g.default.getCopNumberValueByKey(t.ratioFromCopKey)),!(d.default.random(100)>i||t.wipeItemId>0&&p.default.getItemAmount(t.wipeItemId)>0)},t.preCheckCanTriggerAdEvent=function(e){return!(!u.default.get_from_ad_event_db(e)||!this.preCheckAdNoCd(e)||this.getAdEventRemainCd(e)>0)},t.triggerAdEvent=function(e,t,i){var n=u.default.get_from_ad_event_db(e);if(n)if(cc.log("mgrAd.\u89e6\u53d1\u5e7f\u544a\u4e8b\u4ef6",e,t,i),i||this.preCheckCanTriggerAdEvent(e))if(this.getAdEventRemainCd(e)>0)_.default.showMsgTip("\u51b7\u5374\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5");else{var o={};d.default.forEachMap(n.param,function(e,t){o[e]=t}),t&&d.default.forEachMap(t,function(e,t){o[e]=t}),o.adEventId=e,o.serialNumber=this.AD_EVENT_SERIAL_NUMBER,this.AD_EVENT_SERIAL_NUMBER++,n.bPauseSound&&v.default.pauseSound("mgrAd"),n.bRecordCdWhenTrigger&&this.markFinished(e),cc.log("  \u5f00\u59cb\u5e7f\u544a",n.cmd,n.advId),n.advId==s.video&&(_.default.showLoadingTip("advertisement"),this.sendMsg("MSG_VIDEO_AD_EVENT_START",{adEventId:e})),g.default.openAdv(n.id,JSON.stringify(o),n.adTag),g.default.statisVideoPointEvent(e,2)}else cc.log("    preCheckCanTriggerAdEvent \u4e0d\u901a\u8fc7")},t.closeAdv=function(e){var t=u.default.get_from_ad_event_db(e);t&&g.default.closeAdv(t.advId)},t.closeAdvByType=function(e){var t=s[e];g.default.closeAdv(t)},t.onMsgSdkOpenAdvResult=function(e){var t=e;console.info("mgrAd.onMsgSdkOpenAdvResult"),ul.dump(t,"data");var i=JSON.parse(t.userData||"{}")||{},n=i.adEventId||0,o=u.default.get_from_ad_event_db(n);if(o){o.bPauseSound&&v.default.resumeSound("mgrAd");var r="video"==o.type;switch(r&&_.default.hideLoadingTip("advertisement"),t.code){case 0:t.msg&&r&&_.default.showMsgTip(t.msg),this.sendMsg("MSG_AD_EVENT_FAILED",{adEventId:n,userData:i});break;case 1:this.markFinished(n)}t.code==o.successCode&&r&&this._doAdEventSuccessdLogic(n,i)}else cc.log("[warn] ul.mgrAd.onMsgSdkOpenAdvResult adEventId not found!")},t._doAdEventSuccessdLogic=function(e,t){var i=parseInt(t.serialNumber)||0;if(this.successedAdEventSerialNumbers[i])cc.warn(ul.format("mgrAd.onMsgSdkOpenAdvResult ad already do successd! adEventId=%s, serialNumber=%d",e,i));else{this.successedAdEventSerialNumbers[i]=!0;var n=u.default.get_from_ad_event_db(e),o=[],r=t.rewards||n.param.rewards;r&&r.forEach(function(e){var t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=0;s=i?n?Math.random()*(n-i)+i:i:n,s=Math.floor(s),p.default.addItemAmount(t,s,"\u5e7f\u544a\u53d1\u5956"),r||o.push({itemId:t,amount:s,amountSteps:[[s,0]],customerContext:{bBanAdReward:!0},notBlue:a})});var a=null!=t.rewardBoxId?t.rewardBoxId:n.param.rewardBoxId;a&&p.default.openItemBox(a).forEach(function(e){var t=e[0],i=e[1];p.default.addItemAmount(t,i,"\u5e7f\u544a\u53d1\u5956"),o.push({itemId:t,amount:i,amountSteps:[[i,0]],customerContext:{bBanAdReward:!0}})}),o.length>0&&_.default.addGotItemTipGroup(o),n.remainCountCopKey&&""!=n.remainCountCopKey?(this.dailyAdSuccessedCountDict[n.id]=this.dailyAdSuccessedCountDict[n.id]||0,this.dailyAdSuccessedCountDict[n.id]+=1):n.remainCountItemId>0&&p.default.addItemAmount(n.remainCountItemId,-1,"\u5e7f\u544a\u64ad\u653e\u6b21\u6570"),this.sendMsg("MSG_AD_EVENT_SUCCESSD",{adEventId:e,userData:t})}},t.isVideoAdCareful=function(){return!0},t.onMsgSdkAdvValidCount=function(e){t.AD_VIDEO_VALID_COUNT=e.video,this.sendMsg("MSG_SDK_ADV_VALID_COUNT_REFRESH")},t.showViewEnterAd=function(e,t,i){1==g.default.getCopNumberValueByKey("b_int_banner_mute")?e&&this.preCheckCanTriggerAdEvent(e)?this.triggerAdEvent(e,null,!0):t&&_.default.showNativeBanner(t,i):(e&&this.triggerAdEvent(e),t&&_.default.showNativeBanner(t,i))},t.isHeadlineStrictAd=function(){return 1==g.default.getCopNumberValueByKey("b_headline_strict_ad")},t.randomGetAdCheckModeConfig=function(e){var t=[{text:"\u770b\u89c6\u9891",bDefaultChecked:!0,bCheckedTriggerAd:!0},{text:"\u4e0d\u770b\u89c6\u9891",bDefaultChecked:!0,bCheckedTriggerAd:!1},{text:"\u770b\u89c6\u9891",bDefaultChecked:!1,bCheckedTriggerAd:!0},{text:"\u4e0d\u770b\u89c6\u9891",bDefaultChecked:!1,bCheckedTriggerAd:!1}],i=ul.clone(t[d.default.random(0,t.length-1)]);return i.text=""+i.text+e,i},t.getAdIconSpr=function(){return 1==g.default.getCopNumberValueByKey("ad_flag_style")?"2d/ui/ad/a03":"2d/ui/ad/a01"},t.getLastUnlockModeTime=function(e){return u.default.get_from_ad_event_db(e)&&this.lastUnlockModeTimes[e]||0},t.markUnlockModeTime=function(e){u.default.get_from_ad_event_db(e)&&(this.lastUnlockModeTimes[e]=d.default.time(),this.saveRecord())},t.isCanTriggerTemplateAd=function(e){return h.default.getBeginGamePassTime()>g.default.getCopNumberValueByKey("time_can_trigger_template_ad")&&t.preCheckAdNoCd(e)},t.AD_VIDEO_VALID_COUNT=1,t.lastFinishedTimes={},t.AD_EVENT_SERIAL_NUMBER=0,t.successedAdEventSerialNumbers={},t.todayNativeInsertScaleCount=0,t.todayNativeInsertScaleIntervalCount=0,t.todayNativeInsertLastScaleTime=0,t.dailyAdSuccessedCountDict={},t.smashEggNextTime=0,t.lastUnlockModeTimes={},t}(l.default);r.default=y,cc._RF.pop()},{}],mgrAlertRouter:[function(e,t,i){"use strict";cc._RF.push(t,"57bf0ovGetOn6SbWn02bv3j","mgrAlertRouter");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Manager"),l=o("Tools"),d=o("mgrAlu"),c=o("mgrCfg"),u=o("mgrChannel"),h=o("mgrDirector"),p=o("mgrPlayer"),f=o("mgrRecord"),g=o("mgrSdk"),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),console.log("\u521d\u59cb\u5316loadRecord"),this.loadRecord()},t.loadRecord=function(){var t=this;e.loadRecord.call(this);var i=f.default.getData("alertRouter")||{};this.lastAlertTimeLog=i.lastAlertTimeLog||{},c.default.forDb("alert_router_db",function(e,i){for(var n=0;n<i.length;n++){var o=i[n];o.bRecordLastAlertTime?t.getLastAlertTime(o.routerId,o.index)>l.default.time()&&t.setLastAlertTime(o.routerId,o.index,l.default.time()):t.setLastAlertTime(o.routerId,o.index,0)}}),this.saveRecord()},t.saveRecord=function(){e.saveRecord.call(this);var t={lastAlertTimeLog:this.lastAlertTimeLog};f.default.setData("alertRouter",t)},t.getLastAlertTime=function(e,t){var i=this.lastAlertTimeLog[e];return i&&i[t]||0},t.setLastAlertTime=function(e,t,i){this.lastAlertTimeLog[e]||(this.lastAlertTimeLog[e]={}),this.lastAlertTimeLog[e][t]=i,console.log("\u67e5\u770blastAlertTimeLog",this.lastAlertTimeLog)},t.isCanShowOffline=function(){return!1},t.isCanShowSign=function(){return!1},t.isCanShowRoleCall=function(){return!0},t.isCanShowFindMe=function(){return u.default.isInstallShortCutTipShowed()},t.isCanShowDouyinFollow=function(){return!(p.default.getItemAmount(930)>0||!u.default._isSupportFollowOfficialAccount)},t.openOffline=function(){},t.openSign=function(){h.default.openDialog("vSignDialog")},t.openRoleCall=function(){h.default.openDialog("vRoleCallGuideDialog")},t.openFindMe=function(){u.default.markInstallShortCutTipShowed(),u.default.tryShowFindMeOrShortCut()},t.openDouyinFollow=function(){h.default.openDialog("vFollowDialog")},t.calcRouterDatas=function(e){for(var t=[],i=c.default.get("alert_router_db",e),n=0;n<i.length;n++){var o=ul.clone(i[n]);if(o.weight=g.default.getCopNumberValueByKey(o.weightFromCopKey),o.order=g.default.getCopNumberValueByKey(o.orderFromCopKey),o.cd=g.default.getCopNumberValueByKey(o.cdFromCopKey),o.conditionFunctionName)if(this[o.conditionFunctionName]instanceof Function){if(!this[o.conditionFunctionName](o))continue}else cc.warn("mgrAlertRouter conditionFunction not found",e,o.index,o.conditionFunctionName);if(o.openViewFunctionName&&this[o.openViewFunctionName]instanceof Function){var r=this.getLastAlertTime(e,o.index);l.default.time()-r<=o.cd||t.push(o)}else cc.warn("mgrAlertRouter openViewFunction not found",e,o.index,o.openViewFunctionName)}return l.default.sortArrayByField(t,["-order","index"])},t.tryAlertView=function(e){if(!d.default.check("pass_stage3")){for(var t=this.calcRouterDatas(e),i=0,n=0;n<t.length;n++)i+=t[n].weight;var o=l.default.random(Math.min(i,100)),r=null;for(n=0;n<t.length;n++){var a=t[n];if(o<=a.weight){r=a;break}o-=a.weight}r&&r.openViewFunctionName&&this[r.openViewFunctionName]instanceof Function&&(this[r.openViewFunctionName](),this.setLastAlertTime(r.routerId,r.index,l.default.time()),this.saveRecord())}},t}(s.default);r.default=v,cc._RF.pop()},{}],mgrAlu:[function(e,t,i){"use strict";cc._RF.push(t,"c63f19cgZJPEYIwxif9JNGD","mgrAlu");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Manager"),l=o("Tools"),d=o("mgrCfg"),c=o("mgrCop"),u={"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t}},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.calcCheckData=function(){var e={payChannel:this.getCheckPayChannel(),platform:this.getCheckPlatform(),stageProgress:0};return l.default.forEachMap(c.default.getCops(),function(t,i){var n=parseFloat(i);e[t]=isNaN(n)?i:n}),e},t.getCheckPayChannel=function(){return"unknown"},t.getCheckPlatform=function(){return"unknown"},t.check=function(e){if(!e)return!0;var t=d.default.get("alu_db",e);if(!t)return!1;for(var i=!0,n=this.calcCheckData(),o=0;o<t.conditions.length;o++){var r=t.conditions[o],a=u[r.operator];if(a){var s=a(n[r.key],r.value);i=r.bLogicOr?i||s:i&&s}else cc.warn("mgrAlu.check unknown operator",r.operator)}return i},t.checkIds=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(!this.check(i))return!1}return!0},t.OPERATOR_HANDLERS=u,t}(s.default);r.default=h,cc._RF.pop()},{}],mgrBannerInt:[function(e,t,i){"use strict";cc._RF.push(t,"3f0b7aBtZNIYZKNX5E7237k","mgrBannerInt");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Manager"),l=o("mgrRecord"),d=o("Const"),c=o("Tools"),u=o("mgrSdk"),h=o("mgrAd"),p=o("mgrCfg"),f=o("mgrAdNative"),g=o("mgrDirector"),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.bannerViewNameStack=[],this.currShowingBannerEventId=null,this.bannerDialog=null,this.lastOpenBannerTime=0,this.loadRecord(),this.registerListeners({MSG_RECORD_UPDATE:this.loadRecord,MSG_DIALOG_ONLOAD:this.onMsgDialogOpen,MSG_DIALOG_CLOSE:this.onMsgDialogClose,MSG_WARP_SCENE_START:this.onMsgWarpSceneStart,MSG_WARP_SCENE_COMPLETED:this.onMsgWarpSceneCompleted,MSG_USER_CLOSE_NATIVE_BANNER:this.onMsgUserCloseNativeBanner,MSG_NATIVE_DATA_REFRESH:this.onMsgNativeDataRefresh})},t.loadRecord=function(){l.default.getData("banner_record")},t.saveRecord=function(){l.default.setData("banner_record",{})},t.myLog=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.isBannerView=function(e){var t=p.default.get("ad_banner_int_ui_db",e);return!!(t&&t.bannerEventId&&h.default.preCheckAdNoCd(t.bannerEventId))},t.isViewBannerValid=function(e){return this.getAdInfoByViewName(e).bannerStatus==d.default.VIEW_BANNER_STATUS_OPEN},t.closeBannerOnce=function(e){this.closeBanner(e)},t.readaptViewBanner=function(e){this.adaptBanner(e)},t.onViewOpen=function(e){this.myLog("--------------e=");var t=e.viewName;if(t){var i=t.lastIndexOf(".");i>0&&(t=t.substr(i+1,100)),this.myLog("------------onViewOpen----viewName=",t);var n=!1,o=this.getAdInfoByViewName(t),r=o.bannerStatus,a=o.bannerEventId;if(r==d.default.VIEW_BANNER_STATUS_OPEN?a&&""!=a&&(n=!0):r==d.default.VIEW_BANNER_STATUS_CLOSE&&(n=!0),this.myLog("------------onViewOpen----bHandleStack=",n,r,a),n){var s=e.customUuid||0,l=e.zIndex||0,p=e.sceneFlag||o.sceneFlag||0;this.bannerViewNameStack.push({sceneFlag:p,viewName:t,bannerEventId:a,customUuid:s,zIndex:l}),this.bannerViewNameStack=c.default.sortArrayByField(this.bannerViewNameStack,["-sceneFlag","zIndex","customUuid"])}this.myLog("-------------onViewOpen bHandleStack=",n,a);var f=n,g=o.intEventId;this.myLog("-------1-----onViewOpen---intEventId=",g),g&&!e.bDisableInt&&(this.myLog("-------2-----onViewOpen---intEventId=",g),h.default.triggerAdEvent(g,null,!0),1==u.default.getCopNumberValueByKey("b_int_banner_mute")&&(this.myLog("-------3-----onViewOpen---intEventId=",g),this.closeBannerOnce(),f=!1)),this.myLog("--------4----onViewOpen---intEventId=",g),f&&this.adaptBanner()}},t.adaptBanner=function(e){var t=c.default.getTableCount(this.bannerViewNameStack||[]);if(0==t)return this.myLog("----1---adaptBanner---\u6ca1\u6709\u627e\u5230\u754c\u9762\uff0c\u5173\u95ed\u5904\u7406"),void this.closeBanner();this.myLog("---adaptBanner--this.bannerViewNameStack=",this.bannerViewNameStack);var i=this.bannerViewNameStack[t-1],n=i.viewName,o=i.bannerEventId;if(!e||o&&""!=o)(a=(r=this.getAdInfoByViewName(n)).bannerStatus)!=d.default.VIEW_BANNER_STATUS_NOTHING?o&&!this.isUserClosedNativeBanner(n)?(this.myLog("-------------adaptBanner showBanner"),this.showBanner(o,n)):(this.myLog("-------------adaptBanner closeBanner"),this.closeBanner()):this.myLog("-------------adaptBanner donothing");else{var r,a=(r=this.getAdInfoByViewName(n)).bannerStatus,s=r.bannerEventId;i.bannerEventId=s,a==d.default.VIEW_BANNER_STATUS_OPEN?s&&""!=s?(this.showBanner(s,n),this.myLog("-------adaptBanner-----------\u6253\u5f00banner bannerEventId=",s)):this.myLog("----1---adaptBanner---\u4e0d\u5904\u7406"):a==d.default.VIEW_BANNER_STATUS_CLOSE?(this.myLog("-------adaptBanner-----------\u5173\u95edbanner"),this.closeBanner()):this.myLog("----2---adaptBanner-----------\u4e0d\u505a\u5904\u7406")}},t.getAdInfoByViewName=function(e){if(!e||""==e)return{bannerStatus:d.default.VIEW_BANNER_STATUS_NOTHING,bannerEventId:null,intEventId:null};var t=p.default.get("ad_banner_int_ui_db",e);if(!t)return{bannerStatus:d.default.VIEW_BANNER_STATUS_CLOSE,bannerEventId:null,sceneFlag:0,intEventId:null};if(this.isCustomDisableBannerViewName(e))return{bannerStatus:d.default.VIEW_BANNER_STATUS_CLOSE,bannerEventId:null,sceneFlag:0,intEventId:null};var i=null,n=""==t.bannerEventId,o=!h.default.preCheckCanTriggerAdEvent(t.bannerEventId),r=h.default.preCheckAdNoCd(t.bannerMuteEventId),a=this.isUserClosedNativeBanner(e);return cc.log(n,o,r,a),i=t.bBannerDoNothing?{bannerStatus:d.default.VIEW_BANNER_STATUS_NOTHING,bannerEventId:null,sceneFlag:t.sceneFlag||0,intEventId:null}:!t.bannerEventId||""==t.bannerEventId||!h.default.preCheckCanTriggerAdEvent(t.bannerEventId)||t.bannerMuteEventId&&""!=t.bannerMuteEventId&&h.default.preCheckAdNoCd(t.bannerMuteEventId)||this.isUserClosedNativeBanner(e)?{bannerStatus:d.default.VIEW_BANNER_STATUS_CLOSE,bannerEventId:null,sceneFlag:t.sceneFlag||0,intEventId:null}:{bannerStatus:d.default.VIEW_BANNER_STATUS_OPEN,bannerEventId:t.bannerEventId,sceneFlag:t.sceneFlag||0,intEventId:null},t.intEventId&&""!=t.intEventId&&h.default.preCheckCanTriggerAdEvent(t.intEventId)&&(i.intEventId=t.intEventId),this.myLog("-----------------retData=",i),i},t.isUserClosedNativeBanner=function(e){if(!e)return!1;var t=this.userClosedNativeBannerTimeViewNameDict[e],i=u.default.getCopNumberValueByKey("banner_user_closed_valid_gap")||0;return!!(t&&c.default.time()-t<i)},t.onMsgDialogOpen=function(e){this.myLog("------------onMsgDialogOpen----=e"),this.onViewOpen(e)},t.onMsgDialogClose=function(e){this.myLog("------------onMsgDialogClose---=");var t=c.default.getTableCount(this.bannerViewNameStack);if(!(t<=0)){var i=e.customUuid;if(i){this.myLog("------------onMsgDialogClose----full viewName=",e.viewName,i);for(var n=!1,o=t-1;o>=0;o--)if(this.bannerViewNameStack[o].customUuid==i){this.bannerViewNameStack.splice(o,1),o==t-1&&(n=!0);break}this.myLog("--2-this.bannerViewNameStack=",this.bannerViewNameStack),n&&this.adaptBanner()}}},t.onMsgWarpSceneStart=function(){this.myLog("-------banner-----------\u6709scene\u5f00\u59cb\u5207\u6362"),this.cleanBanner()},t.onMsgWarpSceneCompleted=function(e){this.myLog("-------banner-----------\u6709scene\u7ed3\u675f\u5207\u6362"),this.cleanBanner(),e.sceneFlag=1,this.onViewOpen(e)},t.onMsgUserCloseNativeBanner=function(e){e.viewName&&(this.userClosedNativeBannerTimeViewNameDict[e.viewName]=c.default.time())},t.onMsgNativeDataRefresh=function(e){var t=this.currShowingBannerEventId;if(t&&e.advId==p.default.get("ad_event_db",t,"advId")&&(this.myLog("--------------onMsgNativeDataRefresh data="),this.bannerDialog&&cc.isValid(this.bannerDialog)))try{this.bannerDialog.refreshBanner()}catch(e){this.myLog("-----Error------- this.bannerDialog.refreshBanne=")}},t.cleanBanner=function(){this.myLog("-------banner-----------\u5173\u95ed\u6240\u6709banner"),this.closeBanner(),this.bannerViewNameStack=[]},t.showBanner=function(e,t){var i=u.default.getCopNumberValueByKey("banner_open_gap")||0;if(c.default.time()-this.lastOpenBannerTime<i)this.myLog("----------showBanner \u5728cd\u5185\uff0c\u4e0d\u5c55\u793a=",c.default.time()-this.lastOpenBannerTime,i);else{if(this.myLog("----------showBanner \u4e0d\u5728cd\u5185\uff0c\u6210\u529f\u5c55\u793a"),this.closeBanner(),this.currShowingBannerEventId=e,!this.bannerDialog){var n=g.default.createView("vNativeBanner");n.parent=g.default.getUIRoot(),n.zIndex=d.default.GLOBAL_ORDER_NATIVE_BANNER,this.bannerDialog=n}this.bannerDialog.show(e,t),this.lastOpenBannerTime=c.default.time()}},t.closeBanner=function(e){this.currShowingBannerEventId?(h.default.closeAdvByType("banner"),f.default.onNativeAdViewClenup(this.currShowingBannerEventId,!0,e),this.currShowingBannerEventId=null,this.cleanAllBannerObj(),this.myLog("-------banner-----------\u5173\u95edbanner bannerEventId=",this.currShowingBannerEventId)):this.myLog("-------banner-----------\u5173\u95edbanner \u524d\u9762\u6ca1\u6709\u6253\u5f00\u7684banner \u4e0d\u505a\u64cd\u4f5c");try{this.bannerDialog&&(this.bannerDialog.destroy(),this.myLog("----------------bannerDialog destroy"))}catch(e){this.myLog("-----------remove Error")}this.bannerDialog=null},t.isNativeBannerShowing=function(){return!(!this.bannerDialog||!cc.isValid(this.bannerDialog)||!(this.bannerDialog.y>-2e3&&this.bannerDialog.nativeDatas))},t.addCustomDisableBannerViewName=function(e){this.customBannerDisableViewNameDict[e]=!0},t.removeCustomDisableBannerViewName=function(e){this.customBannerDisableViewNameDict[e]=!1},t.isCustomDisableBannerViewName=function(e){return!!this.customBannerDisableViewNameDict[e]},t.addBannerObjDict=function(e,t){this.bannerAdObjDict[e]||(this.bannerAdObjDict[e]=t)},t.cleanBannerObj=function(e){this.bannerAdObjDict[e]&&(this.bannerAdObjDict[e].close(),this.bannerAdObjDict[e]=null)},t.cleanAllBannerObj=function(){for(var e in this.bannerAdObjDict){var t=this.bannerAdObjDict[e];t&&(t.close(),t=null)}},t.bannerViewNameStack=[],t.userClosedNativeBannerTimeViewNameDict=[],t.USER_CLOSE_NATIVE_BANNER_VALID_TIME=60,t.bannerAdObjDict={},t.customBannerDisableViewNameDict={},t}(s.default);r.default=v,cc._RF.pop()},{}],mgrCfg:[function(e,t,i){"use strict";cc._RF.push(t,"4efa6oODZxF+Ji7gcSaoIFq","mgrCfg");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Manager"),l=o("CfgParser"),d=o("Tools"),c=o("mgrAlu"),u=[["ad_banner_int_ui_db","m"],["ad_event_db","m"],["alu_db","m"],["anim_node_db","m"],["alert_router_db","ma"],["cop_db","m"],["cop_process_db","m"],["guide_db","ma"],["item_template_db","m"],["item_recover_db","m"],["particle_db","m"],["big_mode_skill_db","m"],["sound_db","m"],["spine_db","m"],["item_change_point_event_db","m"],["ui_open_close_point_event_db","m"],["ui_button_click_point_event_db","mma"],["follow_rewards_db","ma"],["fish_db","m"],["fish_12_db","m"],["fish_13_db","m"],["fish_xiuxian_db","m"],["fish_skin_db","m"],["xiuxian_weapon_db","m"],["xiuxian_weapon_effect_db","m"],["rank_name_db","m"]],h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),cc.log("mgrCfg.onLoad")},t.getDb=function(e){var t=this.allDbs[e||""];return t||cc.warn("[\u8b66\u544a] mgrCfg.getDb db not found! dbName=["+e+"]"),t},t.getDbAndSortByField=function(e,t){var i=this.getDb(e);if(!i)return[];var n=[];return d.default.forEachMap(i,function(e,t){n.push(t)}),t="string"==typeof t?[t]:t,d.default.sortArrayByField(n,t)},t.get=function(e,t,i,n,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!0);var r=this.getDb(e);if(!r)return null;var a=r[t];return null==a?(o||cc.warn("[\u8b66\u544a] mgrCfg.get ["+e+".csv]\u4e2d\u6570\u636e\u672a\u627e\u5230, key1=["+t+"]"),a):null!=i&&null==(a=a[i])?(o||cc.warn("[\u8b66\u544a] mgrCfg.get ["+e+".csv]\u4e2d\u6570\u636e\u672a\u627e\u5230, key1=["+t+"], key2=["+i+"]"),a):null!=n&&null==(a=a[n])?(o||cc.warn("[\u8b66\u544a] mgrCfg.get ["+e+".csv]\u4e2d\u6570\u636e\u672a\u627e\u5230, key1=["+t+"], key2=["+i+"], key3=["+n+"]"),a):a},t.quietGet=function(e,t,i,n){return void 0===i&&(i=null),void 0===n&&(n=null),this.get(e,t,i,n,!0)},t.forDb=function(e,t){var i=this.getDb(e);i&&d.default.forEachMap(i,t)},t.getLoadUrls=function(){var e=[];return e.push("cfg/mergeForm"),e},t.processDb=function(){var e=cc.loader.getRes("cfg/mergeForm");if(e){for(var t=e.json,i=0;i<u.length;i++){var n=u[i],o=n[0],r=n[1],a=o,s=t[a];if(s){var d=l.default.parseCfgByJsonObj(o,s,r);d?this.allDbs[o]=d:cc.warn("\u8b66\u544a] \u914d\u7f6e\u8868\u52a0\u8f7d\u5931\u8d25\uff01",o)}else cc.warn("mgrCfg processDb error, data is null, url:"+a)}this._processDb()}else cc.warn("mgrCfg processDb error, data is null, url:cfg/mergeForm")},t._processDb=function(){this._combineItemTemplatedb(),this._processAchievementDb(),this._processAluDb()},t._combineItemTemplatedb=function(){this.getDb("item_template_db")},t._processAchievementDb=function(){d.default.forEachMap(this.getDb("achievement_target_db"),function(e,t){for(var i={},n=0;n<t.cmds.length;n++)i[t.cmds[n]]=!0;t.cmdHash=i})},t._processAluDb=function(){for(var e=[],t=[],i=[],n=[],o=1;o<=5;o++)e.push("logic_or_"+o),t.push("key_"+o),i.push("operator_"+o),n.push("value_"+o);var r=c.default.OPERATOR_HANDLERS,a={};this.forDb("alu_db",function(o,s){var l=[],d={id:s.id,name:s.name,conditions:l};a[s.id]=d;for(var c=0;c<5;c++){var u=1==s[e[c]],h=s[t[c]],p=s[i[c]],f=s[n[c]];if(h)if(null==r[p])cc.warn(ul.format("\u903b\u8f91\u8fd0\u7b97\u7b26\u914d\u7f6e\u3010alu_db\u3011\u4e2d sysmbol\u672a\u627e\u5230\uff1a%s",p));else{var g=parseFloat(f),v={bLogicOr:u,key:h,operator:p,value:f=isNaN(g)?f:g};l.push(v)}}}),this.allDbs.alu_db=a},t.get_from_alu_db=function(e,t,i){return this.get("alu_db",e,t,i)},t.forDb_from_alu_db=function(e){this.forDb("alu_db",e)},t.get_from_cop_db=function(e,t,i){return this.get("cop_db",e,t,i)},t.forDb_from_cop_db=function(e){this.forDb("cop_db",e)},t.get_from_cop_process_db=function(e,t,i){return this.get("cop_process_db",e,t,i)},t.forDb_from_cop_process_db=function(e){this.forDb("cop_process_db",e)},t.get_from_achievement_db=function(e,t,i){return this.get("achievement_db",e,t,i)},t.forDb_from_achievement_db=function(e){this.forDb("achievement_db",e)},t.get_from_achievement_target_db=function(e,t,i){return this.get("achievement_target_db",e,t,i)},t.forDb_from_achievement_target_db=function(e){this.forDb("achievement_target_db",e)},t.get_from_spine_db=function(e,t,i){return this.get("spine_db",e,t,i)},t.forDb_from_spine_db=function(e){this.forDb("spine_db",e)},t.get_from_anim_node_db=function(e,t,i){return this.get("anim_node_db",e,t,i)},t.forDb_from_anim_node_db=function(e){this.forDb("anim_node_db",e)},t.get_from_particle_db=function(e,t,i){return this.get("particle_db",e,t,i)},t.forDb_from_particle_db=function(e){this.forDb("particle_db",e)},t.get_from_stage_db=function(e,t,i){return this.get("stage_db",e,t,i)},t.forDb_from_stage_db=function(e){this.forDb("stage_db",e)},t.get_from_follow_rewards_db=function(e,t,i){return this.get("follow_rewards_db",e,t,i)},t.forDb_from_follow_rewards_db=function(e){this.forDb("follow_rewards_db",e)},t.get_from_ad_event_db=function(e,t,i){return this.get("ad_event_db",e,t,i)},t.forDb_from_ad_event_db=function(e){this.forDb("ad_event_db",e)},t.get_from_ad_banner_int_ui_db=function(e,t,i){return this.get("ad_banner_int_ui_db",e,t,i)},t.forDb_from_ad_banner_int_ui_db=function(e){this.forDb("ad_banner_int_ui_db",e)},t.get_from_shop_db=function(e,t,i){return this.get("shop_db",e,t,i)},t.forDb_from_shop_db=function(e){this.forDb("shop_db",e)},t.get_from_shop_template_db=function(e,t,i){return this.get("shop_template_db",e,t,i)},t.forDb_from_shop_template_db=function(e){this.forDb("shop_template_db",e)},t.get_from_alert_router_db=function(e,t,i){return this.get("alert_router_db",e,t,i)},t.forDb_from_alert_router_db=function(e){this.forDb("alert_router_db",e)},t.get_from_item_change_point_event_db=function(e,t,i){return this.get("item_change_point_event_db",e,t,i)},t.forDb_from_item_change_point_event_db=function(e){this.forDb("item_change_point_event_db",e)},t.get_from_ui_button_click_point_event_db=function(e,t,i){return this.get("ui_button_click_point_event_db",e,t,i)},t.forDb_from_ui_button_click_point_event_db=function(e){this.forDb("ui_button_click_point_event_db",e)},t.get_from_ui_open_close_point_event_db=function(e,t,i){return this.get("ui_open_close_point_event_db",e,t,i)},t.forDb_from_ui_open_close_point_event_db=function(e){this.forDb("ui_open_close_point_event_db",e)},t.get_from_random_name_part1_db=function(e,t,i){return this.get("random_name_part1_db",e,t,i)},t.forDb_from_random_name_part1_db=function(e){this.forDb("random_name_part1_db",e)},t.get_from_random_name_part2_db=function(e,t,i){return this.get("random_name_part2_db",e,t,i)},t.forDb_from_random_name_part2_db=function(e){this.forDb("random_name_part2_db",e)},t.get_from_item_template_db=function(e,t,i){return this.get("item_template_db",e,t,i)},t.forDb_from_item_template_db=function(e){this.forDb("item_template_db",e)},t.get_from_item_recover_db=function(e,t,i){return this.get("item_recover_db",e,t,i)},t.forDb_from_item_recover_db=function(e){this.forDb("item_recover_db",e)},t.get_from_guide_db=function(e,t,i){return this.get("guide_db",e,t,i)},t.forDb_from_guide_db=function(e){this.forDb("guide_db",e)},t.get_from_sound_db=function(e,t,i){return this.get("sound_db",e,t,i)},t.forDb_from_sound_db=function(e){this.forDb("sound_db",e)},t.get_from_fish_db=function(e,t,i){return this.get("fish_db",e,t,i)},t.forDb_from_fish_db=function(e){this.forDb("fish_db",e)},t.get_from_dragon_db=function(e,t,i){return this.get("dragon_db",e,t,i)},t.forDb_from_dragon_db=function(e){this.forDb("dragon_db",e)},t.get_from_fish_skin_db=function(e,t,i){return this.get("fish_skin_db",e,t,i)},t.forDb_from_fish_skin_db=function(e){this.forDb("fish_skin_db",e)},t.get_from_rank_name_db=function(e,t,i){return this.get("rank_name_db",e,t,i)},t.forDb_from_rank_name_db=function(e){this.forDb("rank_name_db",e)},t.get_from_big_mode_skill_db=function(e,t,i){return this.get("big_mode_skill_db",e,t,i)},t.forDb_from_big_mode_skill_db=function(e){this.forDb("big_mode_skill_db",e)},t.get_from_fish_13_db=function(e,t,i){return this.get("fish_13_db",e,t,i)},t.forDb_from_fish_13_db=function(e){this.forDb("fish_13_db",e)},t.get_from_fish_xiuxian_db=function(e,t,i){return this.get("fish_xiuxian_db",e,t,i)},t.forDb_from_fish_xiuxian_db=function(e){this.forDb("fish_xiuxian_db",e)},t.get_from_xiuxian_weapon_db=function(e,t,i){return this.get("xiuxian_weapon_db",e,t,i)},t.forDb_from_xiuxian_weapon_db=function(e){this.forDb("xiuxian_weapon_db",e)},t.get_from_xiuxian_weapon_effect_db=function(e,t,i){return this.get("xiuxian_weapon_effect_db",e,t,i)},t.forDb_from_xiuxian_weapon_effect_db=function(e){this.forDb("xiuxian_weapon_effect_db",e)},t.get_from_fish_12_db=function(e,t,i){return this.get("fish_12_db",e,t,i)},t.forDb_from_fish_12_db=function(e){this.forDb("fish_12_db",e)},t.allDbs={},t}(s.default);r.default=h,cc._RF.pop()},{}],mgrChannel:[function(e,t,i){"use strict";cc._RF.push(t,"f0e8b4Oik1Hpqh/4Og+D1la","mgrChannel");var n,o,r=e,a=i,s=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(a,"__esModule",{value:!0});var l,d=r("Manager"),c=r("Timer"),u=r("Tools"),h=r("Const"),p=r("mgrDirector"),f=r("mgrGuide"),g=r("mgrPlayer"),v=r("mgrRecord"),_=r("mgrSdk"),y=r("mgrTip"),m=r("mgrVideoRecorder");(function(e){e.toutiao="toutiao",e.douyin="douyin",e.baidu="baidu",e.oppoqg="oppoqg",e.funheadline="funheadline",e.game4399="4399minigame",e.huawei="huawei",e.iqiyi="iqiyi",e.kaixin="kaixin",e.qq="qq",e.weixin="weixin",e.xiaomi="xiaomiqg",e.uc="uc",e.vivo="vivo",e.debug="debug"})(l||(l={}));var S=((n={})[l.toutiao]="2d/ui/findme/toutiao",n[l.douyin]="2d/ui/findme/douyin",n[l.weixin]="2d/ui/findme/weixin",n),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_SDK_INSTALL_SHORTCUT_RESULT:this.onMsgSdkInstallShortCutResult,MSG_SDK_APP_SHARE_RESULT:this.onMsgSdkAppShareResult,MSG_SDK_WX_GZH_ENTER:this.onMsgWxgzhEnter,MSG_SDK_JUMP_OTHER_GAME_REWARD_RESULT:this.onMsgSdkJumpOtherGameRewardResult,MSG_SDK_GET_SHORTCUT_STATE_RESULT:this.onMsgSdkGetShortCutStateResult})},t.loadRecord=function(){e.loadRecord.call(this);var t=v.default.getData("channel")||{};this._userOpenVideoRecord=t._userOpenVideoRecord||!0,this._isGetWxgzhReward=t._isGetWxgzhReward||!1,this.bTakedInstallShortCut=t.bTakedInstallShortCut||!1,this.bInstallShortCutTipShowed=t.bInstallShortCutTipShowed||!1},t.saveRecord=function(){e.saveRecord.call(this);var t={_userOpenVideoRecord:this._userOpenVideoRecord,_isGetWxgzhReward:this._isGetWxgzhReward,bTakedInstallShortCut:this.bTakedInstallShortCut,bInstallShortCutTipShowed:this.bInstallShortCutTipShowed};v.default.setData("channel",t)},t.setChannelName=function(e){this._channelName=e||l.debug},t.isChannel4399=function(){return this._channelName==l.game4399},t.isChannelBaidu=function(){return this._channelName==l.baidu},t.isChannelFunHeadline=function(){return this._channelName==l.funheadline},t.isChannelHeadline=function(){return this.isChannelPlatformToutiao()||this.isChannelPlatformDouyin()},t.isChannelPlatformToutiao=function(){return this._channelName==l.toutiao},t.isChannelPlatformDouyin=function(){return this._channelName==l.douyin},t.isChannelIqiyi=function(){return this._channelName==l.iqiyi},t.isChannelKaixin=function(){return this._channelName==l.kaixin},t.isChannelOppoqg=function(){return this._channelName==l.oppoqg},t.isChannelQQ=function(){return this._channelName==l.qq},t.isChannelVivo=function(){return this._channelName==l.vivo},t.isChannelWeixin=function(){return this._channelName==l.weixin},t.isChannelXiaomi=function(){return this._channelName==l.xiaomi},t.isChannelUc=function(){return this._channelName==l.uc},t.isChannelHuawei=function(){return this._channelName==l.huawei},t.canGameInterPush=function(){return!0},t.canGameInterPush1=function(e){if(void 0===e&&(e=-1),e>=0){var t="b_open_jump_other_game_number"+e;return 1==_.default.getCopNumberValueByKey(t)}return this.canGameInterPush()&&1==_.default.getCopNumberValueByKey("b_jump_other_game")},t.canGameInterPush2=function(){return this.canGameInterPush()&&1==_.default.getCopNumberValueByKey("b_jump_other_game2")},t.canGameInterPush3=function(e){var t=_.default.getCopByKey("b_jump_other_banner").split(";");return this.canGameInterPush()&&"1"==t[e]},t.canGameInterPush4=function(){return this.canGameInterPush()&&1==_.default.getCopNumberValueByKey("b_jump_other_game4")},t.canGameWelware=function(){return this.canGameInterPush()&&1==_.default.getCopNumberValueByKey("b_welfare")},t.setInterPushConfig=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];n&&t.push({gameId:n.index,url:n.url})}this.interPushConfig=t},t.getInterPushConfig=function(){return this.interPushConfig||[]},t.canShowAdH5=function(){return this._isShowUrlAdIcon},t.canShowFindMe=function(){return!!S[this._channelName]&&this._isSupportFindMinigames},t.getFindMeImage=function(){return S[this._channelName]},t.canAddToMyFavorite=function(){return this.isChannelBaidu()},t.takeWxgzhReward=function(){return this._isNeedAlertWxgzhReward=!1,this._isGetWxgzhReward=!0,g.default.addItemAmount(h.default.ITEM_ID_ENERGY,3,"\u5fae\u4fe1\u516c\u4f17\u53f7\u5956\u52b1"),y.default.addGotItemTip(h.default.ITEM_ID_ENERGY,3),this.saveRecord(),3},t.isNeedAlertWxgzh=function(){return this._isNeedAlertWxgzhReward},t.onMsgWxgzhEnter=function(e){e.bInit?this._isGetWxgzhReward||(this._isNeedAlertWxgzhReward=!0):this._isGetWxgzhReward||this.takeWxgzhReward()},t.setUserOpenVideoRecord=function(e){this._userOpenVideoRecord=!!e,this.saveRecord()},t.getUserOpenVideoRecord=function(){return this._userOpenVideoRecord},t.haveVideoRecord=function(){return 1==_.default.getCopNumberValueByKey("b_record_video")&&t._isSupportRecordShare},t.canUseVideoRecord=function(){return this.haveVideoRecord()&&this._userOpenVideoRecord},t.getShareVideoRewardAmount=function(){return g.default.getItemAmount(h.default.ITEM_ID_VIDEO_SHARE_COUNT)<=0?0:2},t.onMsgSdkShareVideoResult=function(e){e.bSuccessful?(y.default.showMsgTip("\u5f55\u5c4f\u5206\u4eab\u6210\u529f"),g.default.getItemAmount(h.default.ITEM_ID_VIDEO_SHARE_COUNT)>0&&(this.getShareVideoRewardAmount(),g.default.addItemAmount(h.default.ITEM_ID_VIDEO_SHARE_COUNT,-1,"\u5f55\u5c4f\u5206\u4eab\u6210\u529f"))):this.sendMsg("MSG_SHARE_VIDEO_FAIL")},t.doClickShare=function(){t.canUseVideoRecord()&&m.default.canVideoShare()?m.default.lastRecordVideoTime>=m.default.minRecordTimeAuto?m.default.shareGameVideo():y.default.showMsgTip("\u5f55\u5c4f\u65f6\u95f4\u4e0d\u8db3\uff0c\u4e0d\u80fd\u5206\u4eab"):t.canShare()&&_.default.openShare()},t.isOpenPay=function(){return this._isPayEnabled},t.getShareDesc=function(){return["\u6bcf\u65e5\u524d\u4e09\u6b21\u5206\u4eab\u53ef\u83b7\u5f97","\u4f53\u529b",this.getShareRewardAmount()]},t.tryShowShare=function(){var e=this.getShareDesc(),t=e[0],i=e[1],n=e[2],o=t+"\n"+i+" "+u.default.formatNumToStr(n);y.default.alertCloseablePrompt("\u5206\u4eab",o,"\u53d6\u6d88","\u5206\u4eab",function(){_.default.openShare()})},t.canShare=function(){var e=1==_.default.getCopNumberValueByKey("b_share");return!f.default.isGuiding()&&e&&t._isShareEnabled},t.getShareRewardAmount=function(){return g.default.getItemAmount(h.default.ITEM_ID_SHARE_COUNT)<=0?0:2},t.onMsgShareResult=function(e){e.bSuccessful?c.default.callLater(1,function(){y.default.showMsgTip("\u5206\u4eab\u6210\u529f"),g.default.getItemAmount(h.default.ITEM_ID_SHARE_COUNT)}):y.default.showMsgTip("\u5206\u4eab\u5931\u8d25")},t.isInstallShortCutTipShowed=function(){return this.bInstallShortCutTipShowed},t.markInstallShortCutTipShowed=function(){this.bInstallShortCutTipShowed=!0,this.saveRecord()},t.tryShowFindMeOrShortCut=function(){this._isSupportInstallShortcut&&!this.isTakedInstallShortCutReward()?this._isInstallShortcutHasPrompt?_.default.installShortcut():p.default.openDialog("vInstallShortCutComfirmDialog"):this.canShowFindMe()&&p.default.openDialog("vFindMeDialog")},t.getInstallShortCutRewardCount=function(){return 3},t.isTakedInstallShortCutReward=function(){return this.bTakedInstallShortCut},t.onMsgSdkInstallShortCutResult=function(e){var t=e.code||0,i=e.msg||"";i&&y.default.showMsgTip(i),this.bTakedInstallShortCut||1!=t&&2!=t||(this.bTakedInstallShortCut=!0,this.saveRecord(),this.sendMsg("MSG_SDK_INSTALL_SHORT_CUT_SUC"),y.default.showMsgTip("\u6dfb\u52a0\u684c\u9762\u6210\u529f"))},t.onMsgSdkGetShortCutStateResult=function(e){var t=e,i=t.state,n=!!t.bHasPrompt;this._isSupportInstallShortcut=1==i,this._isInstallShortcutHasPrompt=n,this.sendMsg("MSG_SHORT_CUT_STATE_CHANGED")},t.onMsgSdkAppShareResult=function(e){e.bSuccessful&&y.default.showMsgTip("\u5e94\u7528\u5206\u4eab\u6210\u529f!!!")},t.onMsgSdkJumpOtherGameRewardResult=function(e){var t=e;t.bSuccessful,t.rewards},t.showCrossRecommend=function(){var e=cc.view.getFrameSize();if(t._isSupportRecommendationBtn&&!f.default.isGuiding()){if(!cc.isValid(this))return;p.default.fullHeight>=h.default.RESOLUTION_RANGE.maxHeight?_.default.openCrossRecommend(10,Math.floor(.05*e.height),0):_.default.openCrossRecommend(10,10,0)}},t.hideCrossRecommend=function(){t._isSupportRecommendationBtn&&_.default.closeCrossRecommend()},t._userOpenVideoRecord=!0,t._isGetWxgzhReward=!1,t._isNeedAlertWxgzhReward=!1,t.bTakedInstallShortCut=!1,t.bInstallShortCutTipShowed=!1,t._isThirdExit=!1,t._isAbout=!1,t._isMoreGame=!1,t._isULMoreGame=!1,t._isJumpLeisureEnabled=!1,t._isPayEnabled=!1,t._isShareEnabled=!1,t._isUseSdkRank=!1,t._channelName=l.debug,t._isShowUrlAdIcon=!1,t._isSupportRecordShare=!1,t._isSupportClipboardData=!1,t._isSupportInstallShortcut=!1,t._isInstallShortcutHasPrompt=!1,t.interPushConfig=[],t._isSupportFindMinigames=!1,t._isSupportRecommendationBtn=!1,t._is4399Watermark=!1,t.findmeImageUrl="",t._isSupportFollowOfficialAccount=!1,t._isSupportVibrate=!1,t._isSupportInviteComment=!1,t}(d.default);a.default=b,cc._RF.pop()},{}],mgrCop:[function(e,t,i){"use strict";cc._RF.push(t,"b7f11LUJONC1ZkDAiQLLAgk","mgrCop");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("mgrCfg"),c=o("Tools"),u=cc._decorator.ccclass,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadLocalCop(),cc.log("mgrCop.onLoad")},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.loadLocalCop=function(){var e={};d.default.forDb("cop_db",function(t,i){e[t]=i.defaultValue}),this.processCop(e),this.localCop=e,cc.log("localCop:",e)},t.processCop=function(e){cc.log("mgrCop.processCop"),d.default.forDb("cop_process_db",function(t,i){var n=e[t];if(null!=n){var o=n.split(i.splitChar)||[];cc.log("  process",t,o);for(var r=0;r<i.outputFieldNames.length;r++){var a=i.outputFieldNames[r],s=o[r];null==s?cc.warn(ul.format("mgrCop.processCop fieldValue not found! index = %d, fieldName = %s",r,a)):e[a]=s}}})},t.get=function(e){var t=this.remoteCop[e];return null!=t?t:this.localCop[e]},t.getNumberValue=function(e){var t=this.get(e);if(null==t)return 0;var i=parseFloat(t);return isNaN(i)?0:i},t.getBooleanValue=function(e){var t=this.get(e);return null!=t&&("1"==(t=t.toLowerCase())||"true"==t)},t.getCops=function(){var e={};return 0==c.default.getObjSize(this.localCop)&&this.loadLocalCop(),c.default.forEachMap(this.localCop,function(t,i){e[t]=i}),c.default.forEachMap(this.remoteCop,function(t,i){e[t]=i}),e},t.isReceivedSdkCop=function(){return!!this.bReceivedSdkCop},t.getArrCopByIndex=function(e,t){return this.get(e).split(";")[t]||null},t.setRemoteValue=function(e,t){null!=e?(this.remoteCop[e]=t,this.processCop(this.remoteCop)):cc.warn("mgrCop.setRemoteValue key not found!")},t.onReceiveSdkCop=function(e){cc.log("mgrCop.onReceiveSdkCop"),this.remoteCop=JSON.parse(e||"{}")||{},this.processCop(this.remoteCop),this.bReceivedSdkCop=!0,this.sendMsg("MSG_COP_CHANGED")},t.localCop={},t.remoteCop={},t.sdkCop={},t.bReceivedSdkCop=!1,s([u],t)}(l.default);r.default=h,cc._RF.pop()},{}],mgrDebug:[function(e,t,i){"use strict";cc._RF.push(t,"94b92qCPm9LRpz8RaZNPuEq","mgrDebug");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("Tools"),c=o("Const"),u=o("LayerColor"),h=o("mgrAd"),p=o("mgrCfg"),f=o("mgrDirector"),g=o("mgrFishSkin"),v=o("mgrPlayer"),_=o("mgrSdk"),y=o("mgrTip"),m=cc._decorator.ccclass,S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return a(t,e),i=t,t.onLoad=function(){e.onLoad.call(this),this.registerKeyboardListener(),this.registerListeners({MSG_NETWORK_RESPONSE:this.onMsgNetworkResponse,MSG_SHOW_POINT_DEBUG_INFO:this.onMsgShowPointDebugInfo.bind(this)})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.onKeyDown=function(e){var t;switch(e){case"a":var n=y.default.getTipRootNode(),o=n.getChildByName("nodeCircle");o&&o.destroy(),(o=new cc.Node).name="nodeCircle",o.parent=n;for(var r=function(e,t,i){var n=new u.default(cc.Color.WHITE);n.parent=o,n.position=cc.v2(t,i),n.setContentSize(20,20),n.setAnchorPoint(.5,.5);var r=new cc.Node;r.parent=n,r.color=cc.Color.BLACK,r.setAnchorPoint(.5,.5);var a=r.addComponent(cc.Label);a.string=e.toString(),a.fontSize=18,a.verticalAlign=cc.Label.VerticalAlign.CENTER,a.horizontalAlign=cc.Label.HorizontalAlign.CENTER},a=[{radius:0,count:1,beginAngle:-90},{radius:50,count:6,beginAngle:-120},{radius:100,count:12,beginAngle:-90},{radius:150,count:18,beginAngle:-100}],s=1,l=0;l<a.length;l++)for(var c=a[l],m=0;m<c.count;m++){var S=c.beginAngle+360/c.count*m;r(s,(t=d.default.calcPointOnArc(0,0,c.radius,S))[0],t[1]),s++}break;case"b":console.log(p.default.getDb("ad_event_db")),console.log("item17",v.default.getItemAmount(17));break;case"ctrl_b":break;case"c":cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().enabledAccumulator=!0,f.default.enterScene("vCombineScene");break;case"d":f.default.openDialog("vWelfareDialog");break;case"e":case"f":case"g":case"ctrl_g":case"h":case"i":case"j":case"k":case"l":case"m":case"n":case"o":case"p":case"q":case"r":case"s":break;case"t":f.default.warpSceneWithEffect("vDevTestScene");break;case"u":case"v":case"w":case"x":break;case"y":f.default.openDialog("vDebugInfoDialog");break;case"z":break;case"1":y.default.showMsgTip("\u663e\u793a\u6253\u70b9\u4fe1\u606f"),i.bShowStatisticsInfo=!0,_.default.bShowStatisticsInfo=!0,this.sendMsg("MSG_SHOW_POINT_DEBUG_INFO",{state:i.bShowStatisticsInfo?1:0});break;case"2":y.default.showMsgTip("\u5173\u95ed\u6253\u70b9\u4fe1\u606f"),i.bShowStatisticsInfo=!1,_.default.bShowStatisticsInfo=!1,this.sendMsg("MSG_SHOW_POINT_DEBUG_INFO",{state:i.bShowStatisticsInfo?1:0});break;case"3":case"4":case"5":break;case"ctrl_1":g.default.setCurSkinId(1),cc.log("spineId:",g.default.getPlayerInitFishSpineId());break;case"ctrl_2":g.default.setCurSkinId(2),cc.log("spineId:",g.default.getPlayerInitFishSpineId());break;case"ctrl_3":g.default.setCurSkinId(3),cc.log("spineId:",g.default.getPlayerInitFishSpineId());break;case"ctrl_4":break;case"ctrl_5":h.default.triggerAdEvent("video_trigger_defence2",null,!0)}},t.onMsgShowPointDebugInfo=function(e){this.bShowStatisticsInfo=!!e.state,_.default.bShowStatisticsInfo=!!e.state,this.bShowStatisticsInfo?this.uiTipInfoDialog||(this.uiTipInfoDialog=f.default.createView("vStatisticsInfo"),this.uiTipInfoDialog.parent=f.default.getRoot()):this.uiTipInfoDialog&&cc.isValid(this.uiTipInfoDialog)&&(this.uiTipInfoDialog.destroy(),this.uiTipInfoDialog=null)},t.registerKeyboardListener=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onSystemKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onSystemKeyUp,this)},t.onSystemKeyDown=function(e){var t=e.keyCode;switch(t){case cc.macro.KEY.alt:this.bPressedAlt=!0;break;case cc.macro.KEY.ctrl:this.bPressedCtrl=!0;break;case cc.macro.KEY.shift:this.bPressedShift=!0;break;default:var i=this._genKeyDesc(t);this.onKeyDown(i),cc.log("key down ",i),this.sendMsg("MSG_ON_KEY_DOWN",i)}},t.onSystemKeyUp=function(e){var t=e.keyCode;switch(t){case cc.macro.KEY.alt:this.bPressedAlt=!1;break;case cc.macro.KEY.ctrl:this.bPressedCtrl=!1;break;case cc.macro.KEY.shift:this.bPressedShift=!1;break;default:var i=this._genKeyDesc(t);cc.log("key up ",i),this.sendMsg("MSG_ON_KEY_UP",i)}},t._genKeyDesc=function(e){var t="";for(var i in this.bPressedCtrl&&(t+="ctrl_"),this.bPressedAlt&&(t+="alt_"),this.bPressedShift&&(t+="shift_"),cc.macro.KEY)if(cc.macro.KEY[i]==e.toString()){t+=i;break}return t},t.debugUnlockAll1=function(){},t.debugUnlockAll2=function(){y.default.showMsgTip("\u52a0\u5404\u79cd\u6b21\u6570");for(var e=[[c.default.ITEM_ID_STAGE_COUNT,100],[c.default.ITEM_ID_RANK_COUNT,100],[c.default.ITEM_ID_CHARM_LIFE_COUNT,100],[c.default.ITEM_ID_APPOINTMENT_COUNT,100]],t=0;t<e.length;t++){var i=e[t];v.default.addItemAmount(i[0],i[1],"demo")}},t.onMsgNetworkResponse=function(e){var t=e;cc.log("onMsgNetworkResponse",t)},t.bPressedCtrl=!1,t.bPressedAlt=!1,t.bPressedShift=!1,t.bUnlockAllStage=!1,t.bShowStatisticsInfo=!1,t.rankTime=null,i=s([m],t)}(l.default);r.default=S,cc._RF.pop()},{}],mgrDirector:[function(e,t,i){"use strict";cc._RF.push(t,"0aa037Qgl5NHKS0i0g0xTPb","mgrDirector");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("EffectGoneWithWind"),c=o("TaskManager"),u=o("Timer"),h=o("Tools"),p=o("DialogBase"),f=o("ViewBase"),g=o("Const"),v=o("LayerColor"),_=o("mgrCfg"),y=o("mgrPool"),m=o("mgrSdk"),S=o("mgrSound"),b=o("mgrTip"),C=cc._decorator.ccclass,I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return a(t,e),i=t,t.processRemoteResLoad=function(){var e=this;if(!(this.curLoadingRemoteResInfo||this.RemoteResLoadQueue.length<=0)){this.curLoadingRemoteResInfo=this.RemoteResLoadQueue.shift(),cc.log("\u5f00\u59cb\u52a0\u8f7d\u8fdc\u7a0b\u8d44\u6e90:"+this.curLoadingRemoteResInfo.url);try{window.qg?this.loadRemoteResQg(this.curLoadingRemoteResInfo.url,function(t,i){if(e.curLoadingRemoteResInfo.bHaveCaller&&(!e.curLoadingRemoteResInfo.caller||!cc.isValid(e.curLoadingRemoteResInfo.caller)))return cc.log("\u8fdc\u7a0b\u8d44\u6e90:"+e.curLoadingRemoteResInfo.url+" \u8c03\u7528\u8005\u9500\u6bc1"),void(e.curLoadingRemoteResInfo=null);if(t)cc.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25: \u653e\u5728\u961f\u5c3e\u91cd\u8bd5: "+e.curLoadingRemoteResInfo.url),e.RemoteResLoadQueue.push(e.curLoadingRemoteResInfo),e.curLoadingRemoteResInfo=null;else{cc.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u6210\u529f: "+e.curLoadingRemoteResInfo.url);var n=new cc.SpriteFrame(i);e.curLoadingRemoteResInfo.callback(t,n),e.curLoadingRemoteResInfo=null}}):cc.loader.load({url:this.curLoadingRemoteResInfo.url,type:"png"},function(t,i){if(e.curLoadingRemoteResInfo.bHaveCaller&&(!e.curLoadingRemoteResInfo.caller||!cc.isValid(e.curLoadingRemoteResInfo.caller)))return cc.log("\u8fdc\u7a0b\u8d44\u6e90:"+e.curLoadingRemoteResInfo.url+" \u8c03\u7528\u8005\u9500\u6bc1"),void(e.curLoadingRemoteResInfo=null);if(t)cc.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25: \u653e\u5728\u961f\u5c3e\u91cd\u8bd5: "+e.curLoadingRemoteResInfo.url),e.RemoteResLoadQueue.push(e.curLoadingRemoteResInfo),e.curLoadingRemoteResInfo=null;else{cc.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u6210\u529f: "+e.curLoadingRemoteResInfo.url);var n=new cc.SpriteFrame(i);e.curLoadingRemoteResInfo.callback(t,n),e.curLoadingRemoteResInfo=null}})}catch(e){cc.log(e),cc.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25: \u653e\u5728\u961f\u5c3e\u91cd\u8bd5: "+this.curLoadingRemoteResInfo.url),this.RemoteResLoadQueue.push(this.curLoadingRemoteResInfo),this.curLoadingRemoteResInfo=null}}},t.onLoad=function(){e.onLoad.call(this),cc.view.setResizeCallback(this.onViewResize.bind(this)),cc.log("mgrDirector.onLoad && \u5f00\u542f\u8fdc\u7a0b\u8d44\u6e90\u5904\u7406"),u.default.callLoop(.016,this.processRemoteResLoad.bind(this),!0)},t.loadNode=function(e,t,i,n){var o=e;this.loadRes(o,cc.Prefab,function(e,t){if(e)return cc.warn("\u8b66\u544a] mgrDirector.loadNode load prefab:",e),void i(null);var n=cc.instantiate(t);i(n)},t,!0,n)},t.createView=function(e,t){var i=o(e);if(i){var n=i.default;(t=t||{}).__viewName=e;var r=new n(t);return r.name=e,r}cc.warn("mgrDirector.createView module not found!",e)},t.removeCurScene=function(){for(var e=this.getSceneRoot(),t=0;t<e.children.length;t++)e.children[t].destroy();var i=this.getUIRoot();for(t=0;t<i.children.length;t++)i.children[t].destroy();p.default.clearViews()},t.enterScene=function(e,t){this.removeCurScene(),this.sendMsg("MSG_WARP_SCENE_START");var i=this.getSceneRoot();(t=t||{}).warpDelayTime=0,t.viewName=e,this.createView(e,t).parent=i,this.sendMsg("MSG_WARP_SCENE_COMPLETED",t)},t.warpSceneWithEffect1=function(e,t,n){var o=this,r=this.getRoot(),a=new cc.Node;a.setContentSize(i.fullSize),r.addChild(a,g.default.GLOBAL_ORDER_WARP+5),h.default.registerTouchHandler(a,function(){console.log(" touch loading mask ")});var s=new d.default("test_gone_with_wind");r.addChild(s,g.default.GLOBAL_ORDER_WARP+2+5);var l=new v.default(cc.color(0,0,0,255));l.setContentSize(i.fullSize),r.addChild(l,g.default.GLOBAL_ORDER_WARP+1+5);var c=this.createView("vWarpSceneNode");c.setFinishCb(function(){c.destroy(),n&&n(),h.default.unregisterTouchHandler(a),a.destroy(),o.sendMsg("MSG_WARP_SCENE_COMPLETED",t)}),r.addChild(c,g.default.GLOBAL_ORDER_WARP+3+5),this.removeCurScene(),this.sendMsg("MSG_WARP_SCENE_START"),c.setEnterCb(function(){var i=o.getSceneRoot();(t=t||{}).fOnLoadFinished=function(){c.loadFinish()},t.viewName=e,o.createView(e,t).parent=i,s.destroy(),l.destroy()})},t.warpSceneWithEffect=function(e,t,n){var o=this,r=this.getRoot(),a=new v.default(cc.color(0,0,0,255));a.setContentSize(i.fullSize),r.addChild(a,g.default.GLOBAL_ORDER_WARP+1),h.default.registerTouchHandler(a,function(){console.log(" touch loading mask ")}),b.default.showLoadingTip("warp_scene"),(t=t||{}).warpDelayTime=.5,t.fOnLoadFinished=function(){b.default.hideLoadingTip("warp_scene"),cc.tween(a).to(s,{opacity:0}).call(function(){n&&n(),h.default.unregisterTouchHandler(a),a.destroy()}).start();var i=t;i.viewName=e,o.sendMsg("MSG_WARP_SCENE_COMPLETED",i)},t.fOnLoadingProgressUpate=function(e,t){b.default.updateLoadingProgress(Math.round(100*e/t)+"%")};var s=.2;cc.tween(a).set({opacity:0}).to(s,{opacity:255}).call(function(){o.removeCurScene(),o.sendMsg("MSG_WARP_SCENE_START");var i=o.getSceneRoot();o.createView(e,t).parent=i}).start()},t.playWarpEffect=function(e){var t=this.getRoot(),n=new cc.Node;n.setContentSize(i.fullSize),t.addChild(n,g.default.GLOBAL_ORDER_WARP),h.default.registerTouchHandler(n,function(){console.log(" touch loading mask ")});var o=new d.default("test_gone_with_wind");t.addChild(o,g.default.GLOBAL_ORDER_WARP+2);var r=new v.default(cc.color(0,0,0,255));r.setContentSize(i.fullSize),t.addChild(r,g.default.GLOBAL_ORDER_WARP+1);var a=this.createView("vWarpSceneNode");a.setFinishCb(function(){a.destroy(),r.destroy(),o.playStage2(function(){e&&e(),h.default.unregisterTouchHandler(n),n.destroy()})}),t.addChild(a,g.default.GLOBAL_ORDER_WARP+3),a.setEnterCb(function(){a.loadFinish()})},t.playWarpEffect1=function(e,t){void 0===t&&(t=1);var n=this.getRoot(),o=new d.default("test_gone_with_wind");n.addChild(o,g.default.GLOBAL_ORDER_WARP+2);var r=new v.default(cc.color(0,0,0,255));r.setContentSize(i.fullSize),n.addChild(r,g.default.GLOBAL_ORDER_WARP+1),b.default.showLoadingTip("warp_scene"),n.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){b.default.hideLoadingTip("warp_scene"),r.destroy(),o.playStage2(function(){e&&e()})})))},t.refreshCurrentSceneSize=function(e){this.getSceneRoot()._resolution_range=e,this.refreshSceneSize()},t.refreshSceneSize=function(){var e=this.getSceneRoot()._resolution_range||g.default.RESOLUTION_RANGE,t=this.getCanvas(),i=cc.view.getFrameSize(),n=i.width/i.height,o=e.maxWidth,r=e.minWidth,a=e.maxHeight,s=e.minHeight,l=r,d=s,c=l,u=d,h=t.getComponent(cc.Canvas);if(!h.getComponent(cc.Widget)){var p=h.addComponent(cc.Widget);p.left=0,p.right=0,p.top=0,p.bottom=0,p.isAlignLeft=!0,p.isAlignRight=!0,p.isAlignBottom=!0,p.isAlignTop=!0}n<=r/s?n<r/a?(cc.log("\u8d85\u9ad8",n),l=r,d=a,u=r/n,t.setContentSize(l,d),h.designResolution=cc.size(l,d),h.fitHeight=!0,h.fitWidth=!0):(h.fitHeight=!1,h.fitWidth=!0,u=d=r/n,h.designResolution=cc.size(l,d),cc.log("\u9ad8 cc.view",cc.view)):n>o/s?(cc.log("\u8d85\u5bbd",n),l=o,d=s,c=s*n,t.setContentSize(l,d),h.designResolution=cc.size(l,d),h.fitHeight=!0,h.fitWidth=!0):(h.fitHeight=!0,h.fitWidth=!1,c=l=s*n,h.designResolution=cc.size(l,d),cc.log("\u5bbd cc.view",cc.view)),this._width=l,this._height=d,this._fullWidth=c,this._fullHeight=u,console.log("refreshSize size : "+this.size),console.log("refreshSize fullSize : "+this.fullSize)},t.onViewResize=function(){this.refreshSceneSize(),this.sendMsg("MSG_VIEW_RESIZE")},t.openDialog=function(e,t,i){if(console.log("\u6253\u5f00\u754c\u9762\uff1a",e),cc.log("openDialog begin ",p.default.CUR_VIEWS),console.log("\u6253\u5f00",e),!p.default.CUR_VIEWS[e]||"vGotItemDialog"==e){b.default.showLoadingTip("open_dialog"),(t=t||{}).fOnLoadFinished=function(){b.default.hideLoadingTip("open_dialog")},t.fOnLoadingProgressUpate=function(e,t){b.default.updateLoadingProgress(Math.round(100*e/t)+"%")};var n=this.createView(e,t);return n instanceof p.default?(n.openDialog(i),n):(cc.warn("mgrDirecotr.openDialog view not a dialog!",e),cc.isValid(n)&&n.destroy(),null)}cc.warn("dialog "+e+" have already create")},t.openDialogWithEffect=function(e,t,n){var o=this;if(cc.log("openDialog begin ",p.default.CUR_VIEWS),console.log("\u6253\u5f00",e),console.log("\u6253\u5f00\u754c\u9762\uff1a",e),p.default.CUR_VIEWS[e]&&"vGotItemDialog"!=e)cc.warn("dialog "+e+" have already create");else{var r=this.getRoot(),a=new cc.Node;a.setContentSize(i.fullSize),r.addChild(a,g.default.GLOBAL_ORDER_WARP+5),h.default.registerTouchHandler(a,function(){console.log(" touch loading mask ")});var s=new v.default(cc.color(0,0,0,100));s.setContentSize(i.fullSize),r.addChild(s,g.default.GLOBAL_ORDER_WARP+1+5);var l=this.createView("vWarpSceneNode");l.setFinishCb(function(){l.destroy(),h.default.unregisterTouchHandler(a),a.destroy()}),r.addChild(l,g.default.GLOBAL_ORDER_WARP+3+5),l.setEnterCb(function(){n&&n(),(t=t||{}).fOnLoadFinished=function(){l.loadFinish()},o.createView(e,t).openDialog(!0),s.destroy()})}},t.preloadRes=function(e,t,i){var n=this,o=function(){i&&i(!0)};t!=sp.Skeleton&&t!=cc.AudioClip&&t!=cc.ParticleAsset&&t!=cc.Animation&&cc.loader.getRes(e,t)?o():t==sp.Skeleton?y.default.preload("spine",e,o):t==cc.ParticleAsset?y.default.preload("particle",e,o):t==cc.Animation?y.default.preload("animNode",e,o):t==cc.AudioClip?S.default.preload(e,o):this.loadRes(e,t,function(r){if(r)return cc.log("---error-url=",e),void n.preloadRes(e,t,i);o()})},t.preloadRess1=function(e,t){for(var i=this,n=new c.default(function(e,t){b.default.updateLoadingProgress(Math.round(100*e/t)+"%")}),o=[],r=function(t){var n=e[t];o.push(function(e){i.preloadRes(n.path,n.assetType,e)})},a=0;a<e.length;a++)r(a);n.push(o),n.start(function(){t&&t()})},t.preloadRess=function(e,t){for(var i=[],n=0;n<e.length;n++){var o=e[n],r=o.path,a=o.assetType;switch(o.assetType){case sp.Skeleton:r=_.default.get_from_spine_db(o.path).jsonFileName,a=sp.SkeletonData;break;case cc.ParticleAsset:r=_.default.get_from_particle_db(o.path).filename;break;case cc.Animation:r=_.default.get_from_anim_node_db(o.path).prefabFileName,a=cc.Prefab;break;case cc.AudioClip:r=_.default.get_from_sound_db(o.path).fileName}cc.loader.getRes(r,a)||i.push(o)}i.length<=0?t&&t():this.preloadRess1(i,t)},t.loadResArray=function(e,t){var i=this;cc.loader.loadResArray(e,function(e,t){var i=0;t&&(i=e/t),b.default.updateLoadingProgress(Math.round(100*i)+"%")},function(n){if(n)return cc.warn("loadResArray error : ",n.message),void i.loadResArray(e,t);t&&t()})},Object.defineProperty(t,"size",{get:function(){return new cc.Size(this._width,this._height)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"fullSize",{get:function(){return new cc.Size(this._fullWidth,this._fullHeight)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"fullWidth",{get:function(){return this._fullWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t,"fullHeight",{get:function(){return this._fullHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t,"center",{get:function(){var e=this.size;return cc.v2(e.width/2,e.height/2)},enumerable:!1,configurable:!0}),t.getCanvas=function(){return cc.director.getScene().getChildByName("Canvas")},t.getRoot=function(){return this.getCanvas().getChildByName("root")},t.getSceneRoot=function(){return this.getRoot().getChildByName("sceneRoot")},t.getUIRoot=function(){return this.getRoot().getChildByName("UIRoot")},t.getMask=function(){var e=this.getRoot(),t=e.getChildByName("__mask");return t||((t=new cc.Node).parent=e,t.zIndex=g.default.GLOBAL_ORDER_MASK,t.name="__mask",t.setContentSize(this.size),h.default.registerTouchHandler(t,function(){cc.log("-- touch mask --")}),t.active=!1),t},t.registerRootClick=function(){this.getRoot().on(cc.Node.EventType.TOUCH_START,function(e){var t=e.getLocation();b.default.playAnimNodeOnce("131_shubiao_dianji",t.x,t.y)},null,!0)},t.isDeviceOverHeight=function(){var e=cc.view.getFrameSize();return e.width/e.height<.5},t.refreshFullscreenViewState=function(){for(var e=[],t=this.getSceneRoot().children,i=0;i<t.length;i++)(n=t[i])instanceof f.default&&cc.isValid(n)&&n.isFullscreenView()&&e.push({node:n,order:n.zIndex});for(t=this.getUIRoot().children,i=0;i<t.length;i++){var n;(n=t[i])instanceof f.default&&cc.isValid(n)&&n.isFullscreenView()&&e.push({node:n,order:n.zIndex+1e4})}for(i=0;i<e.length;i++)e[i].node.active=i>=e.length-1},t.getBottomSurplusHeight=function(e){if(!e&&1!=m.default.getCopNumberValueByKey("b_surplus_bottom_height"))return 0;var t=g.default.RESOLUTION_RANGE_ALLOW,i=cc.view.getFrameSize(),n=i.width/i.height,o=t.maxWidth,r=t.minWidth,a=t.maxHeight,s=t.minHeight;cc.log("-------------deviceSize=",i);var l=r/n;cc.log("-----------------ratio=",n,r/s,r/a),n<=r/s?n<r/a?(l=a,cc.log("---------------------------------------1=",l)):cc.log("---------------------------------------2=",l):n>o/s?(l=o/n,cc.log("---------------------------------------3=",l)):cc.log("---------------------------------------4="),l=Math.floor(l);var d=Math.max(Math.floor((l-this.height)/2),0);return cc.log("---------------designHeight,height=",l,this.height,d),d},t.createSpriteNode=function(e){var t=new cc.Node;return t.addComponent(cc.Sprite).loadSpriteFrame(e),t},t.tryGetRes=function(e,t){return cc.loader.getRes(e,t)},t.loadRes=function(e,t,i,n,o,r){var a=this,s=cc.loader.getRes(e,t);if(null==s){void 0!==o&&null!=o||(o=!(!n||!cc.isValid(n)));var l=function(e,t){r&&r(e,t)};if(/http/.test(e)||/https/.test(e))cc.log("\u6dfb\u52a0\u65b0\u7684\u8fdc\u7a0b\u52a0\u8f7d:"+e),this.RemoteResLoadQueue.push({url:e,callback:i,caller:n,bHaveCaller:o});else{var d=t;cc.loader.loadRes(e,d,l,function(r,s){a.__load_res_completeCallback(r,s,e,t,l,i,n,o)})}}else i(null,s)},t.__load_res_completeCallback=function(e,t,i,n,o,r,a,s){e?(a&&cc.isValid(a)||!s)&&(console.log("\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25:"+i+":",e),this.loadRes(i,n,r,a,s,o)):r(e,t)},t.loadRemoteResQg=function(e,t){var i=this;if(this.__cachedRemoteTexture[e])t(null,this.__cachedRemoteTexture[e]);else{var n=new Image,o=function o(){n.removeEventListener("load",o),n.removeEventListener("error",r),cc.log("IMAGE \u52a0\u8f7d\u6210\u529f!!",e);var a=new cc.Texture2D;a.initWithElement(n),i.__cachedRemoteTexture[e]=a,t(null,a)},r=function i(){n.removeEventListener("load",o),n.removeEventListener("error",i),cc.log("IMAGE \u52a0\u8f7d\u5931\u8d25!!",e),t({error:"error"},null)};n.addEventListener("load",o),n.addEventListener("error",r),n.src=e}},t.RemoteResLoadQueue=[],t.curLoadingRemoteResInfo=null,t.__cachedRemoteTexture={},t._width=576,t._height=1024,t._fullWidth=576,t._fullHeight=1024,i=s([C],t)}(l.default);r.default=I,cc._RF.pop()},{}],mgrFishRank:[function(e,t,i){"use strict";cc._RF.push(t,"f522aWpJttAzbDnjHR0KeMJ","mgrFishRank");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("Tools"),c=o("mgrCfg"),u=cc._decorator,h=u.ccclass,p=(u.property,[{playerCountRange:[3,3],scoreRange:[25,30],beginTimeRange:[0,.25],endTimeRange:[.75,1],interpolationRateRange:[.5,1.5]},{playerCountRange:[7,7],scoreRange:[15,25],beginTimeRange:[0,.1],endTimeRange:[.5,1],interpolationRateRange:[.5,1.5]},{playerCountRange:[88,88],scoreRange:[0,15],beginTimeRange:[.1,.5],endTimeRange:[.5,1],interpolationRateRange:[.5,1.5]}]),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this);var t=[];c.default.forDb_from_rank_name_db(function(e,i){t.push(i.name)}),this.names=t},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.calcRandomName=function(){return this.names[d.default.random(this.names.length)-1]},t.initRank=function(){this.pvpDatas=[];for(var e=0;e<p.length;e++)for(var t=p[e],i=d.default.random(t.playerCountRange[0],t.playerCountRange[1]),n=0;n<i;n++){var o=d.default.random(t.scoreRange[0],t.scoreRange[1]),r=d.default.random(100*t.beginTimeRange[0],100*t.beginTimeRange[1])/100,a=d.default.random(100*t.endTimeRange[0],100*t.endTimeRange[1])/100,s=d.default.random(100*t.interpolationRateRange[0],100*t.interpolationRateRange[1])/100,l=this.calcRandomName();this.pvpDatas.push({name:l,rank:0,targetScore:o,curScore:0,beginTime:r,endTime:a,interpolationRate:s})}this.pvpDatas.push({name:"\u6211",rank:0,targetScore:0,curScore:0,beginTime:0,endTime:0,interpolationRate:0}),this.tryUpdateRank()},t.updateScoreByTime=function(e){for(var t=0;t<this.pvpDatas.length;t++){var i=this.pvpDatas[t];if(!(i.targetScore<=0)){var n=d.default.scaleInRange(e,i.beginTime,i.endTime,0,1);n=Math.pow(n,i.interpolationRate);var o=Math.ceil(n*i.targetScore);i.curScore=o}}this.tryUpdateRank()},t.tryUpdateRank=function(){this.pvpDatas=d.default.sortArrayByField(this.pvpDatas,["-curScore","-targetScore"]);for(var e=0;e<this.pvpDatas.length;e++)this.pvpDatas[e].rank=e+1},t.getPlayerData=function(){for(var e=0;e<this.pvpDatas.length;e++){var t=this.pvpDatas[e];if("\u6211"==t.name)return t}return null},t.getPvpDatas=function(){return ul.clone(this.pvpDatas)},t.setPlayerScore=function(e){var t=this.getPlayerData();t&&(t.curScore=e,this.tryUpdateRank())},t.names=[],s([h],t)}(l.default);r.default=f,cc._RF.pop()},{}],mgrFishSkin:[function(e,t,i){"use strict";cc._RF.push(t,"b6f71iJkbNBvqcdydTn0mJK","mgrFishSkin");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("mgrCfg"),c=o("mgrPlayer"),u=o("mgrRecord"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=u.default.getData("mgrFishSkin")||{};this.curSkinId=t.curSkinId||1,cc.log("mgrFishSkin.loadRecord",this.curSkinId)},t.saveRecord=function(){e.saveRecord.call(this);var t={curSkinId:this.curSkinId};u.default.setData("mgrFishSkin",t)},t.getCurSkinId=function(){return this.curSkinId},t.setCurSkinId=function(e){d.default.get_from_fish_skin_db(e)&&(this.curSkinId=e,this.saveRecord())},t.isSkinUnlocked=function(e){var t=d.default.get_from_fish_skin_db(e);return!!t&&(!t.itemId||c.default.getItemAmount(t.itemId)>0)},t.getPlayerInitFishSpineId=function(){var e=this.getCurSkinId(),t=d.default.get_from_fish_skin_db(e);return t?t.spineId:d.default.get_from_fish_db(1).spineId},s([p],t)}(l.default));r.default=f,cc._RF.pop()},{}],mgrGame:[function(e,t,i){"use strict";cc._RF.push(t,"d82295baR5PSJ8QMyGyxXr7","mgrGame");var n,o,r=e,a=i,s=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(a,"__esModule",{value:!0}),a.GameMsgStrs=a.GameMsgIds=void 0;var l=r("Manager"),d=r("Tools"),c=r("GameHero"),u=r("mgrCfg"),h=r("mgrRecord"),p=r("mgrSdk");a.GameMsgIds=cc.Enum({end:1,passwordBack:3,passwordDialog:4,dead:5,water:6,map1:7,btnPause:8,map2:9,waterSwitch:10,btnRestart:11}),a.GameMsgStrs=((n={})[a.GameMsgIds.end]="GAME_END",n[a.GameMsgIds.passwordBack]="GAME_PASSWORD_BACK",n[a.GameMsgIds.passwordDialog]="GAME_PASSWORD_DIALOG",n[a.GameMsgIds.dead]="GAME_DEAD",n[a.GameMsgIds.water]="GAME_WATER",n[a.GameMsgIds.map1]="GAME_MAP1",n[a.GameMsgIds.btnPause]="GAME_BTN_PAUSE",n[a.GameMsgIds.map2]="GAME_MAP2",n[a.GameMsgIds.waterSwitch]="GAME_WATER_SWITCH",n[a.GameMsgIds.btnRestart]="GAME_BTN_RESTART",n);var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.onLoad=function(){e.onLoad.call(this),this._beginTime=d.default.time(),this.loadRecord(),this.registerListeners({})},t.loadRecord=function(){e.loadRecord.call(this);var t=h.default.getData("mgrGame")||{};this.skillLevelData=t&&t._skillLevelData||[]},t.saveRecord=function(){e.saveRecord.call(this);var t={_skillLevelData:this.skillLevelData};h.default.setData("mgrGame",t)},t.isTargetHero=function(e){return!!e.node.getComponent(c.default)},t.isAtBottom=function(e,t){var i=e.convertToWorldSpaceAR(cc.Vec2.ZERO),n=t.convertToWorldSpaceAR(cc.Vec2.ZERO);if(n.y+(1-t.anchorY)*t.height-0-10<i.y+(0-e.anchorY)*e.height){var o=i.x+(0-e.anchorX)*e.width,r=i.x+(1-e.anchorX)*e.width,a=n.x+(0-t.anchorX)*t.width;if(n.x+(1-t.anchorX)*t.width-0>o&&a+0<r)return!0}return!1},t.getSkillLevel=function(e){for(var t=0;t<this.skillLevelData.length;++t)if(this.skillLevelData[t].id==e)return this.skillLevelData[t].level;return 1},t.skillLevelUp=function(e){for(var t=0;t<this.skillLevelData.length;++t)if(this.skillLevelData[t].id==e)return this.skillLevelData[t].level++,void this.saveRecord();this.skillLevelData.push({id:e,level:2})},t.isMaxSkill=function(e){for(var t=u.default.get("big_mode_skill_db",e).maxLevle,i=0;i<this.skillLevelData.length;++i)if(this.skillLevelData[i].id==e)return this.skillLevelData[i].level>=t;return!1},t.getCurSkillData=function(){var e=this.getSkillLevel(this.curSkillId),t=u.default.get("big_mode_skill_db",this.curSkillId).maxLevle;return[this.curSkillId,this.bAdSkillLevel?t:e]},t.getMap025Arr=function(){for(var e=[],t=0;t<3;t++){var i=this.map025Arr[t];i?e.push(i):e.push(cc.v2(0,1e3))}return e},t.addMap025Arr=function(e){this.map025Arr.length>=3&&this.map025Arr.shift(),this.map025Arr.push(e)},t.resetMap025Arr=function(){this.map025Arr=[]},t.tryFishStopRun=function(){this.bFishStopRun=!0,this.fishStopRunTime=30},t.tryFishInvincibleStop=function(e){void 0===e&&(e=30),this.bFishStopInvincible=!0,this.fishStopInvincibleTime=e,console.log("\u5f00\u542f\u65e0\u654c\u6a21\u5f0f")},t.closeFishInvincible=function(){this.bFishStopInvincible=!1,this.fishStopInvincibleTime=0,console.log("\u5173\u95ed\u65e0\u654c\u6a21\u5f0f")},t.tryFishWeaponEffect=function(e){this.bFishWeaponEffected=!0,this.fishWeaponEffectTime=e,console.log("\u5f00\u542f\u4fee\u4ed9\u6b66\u5668\u6280\u80fd")},t.closeFishWeaponEffct=function(){this.bFishWeaponEffected=!1,this.fishWeaponEffectTime=0,this.sendMsg("WEAPON_SKILL_EFF_CLOSE")},t.getBeginGamePassTime=function(){var e=d.default.time()-this._beginTime;return cc.log("game pass time ",e),e},t.markTrigGameSucToBottom=function(){this._lastTrigGameSucToBottomTime=d.default.time()},t.isTrigGameSucToBottomCd=function(){var e=d.default.time(),t=p.default.getCopNumberValueByKey("btn_to_banner_recover_cd"),i=e-this._lastTrigGameSucToBottomTime;return cc.log("cd pass time ",i),i>=t},t.getGameSucToBottomInfo=function(e){if(1!=p.default.getCopNumberValueByKey(e))return cc.log("canGameSucToBottom no, \u6ca1\u6709\u5f00\u542f"),[!1,!1];var t=this.getBeginGamePassTime();if(p.default.getCopNumberValueByKey("btn_to_banner_no_recover_dur")>t)return cc.log("canGameSucToBottom yes, \u6e38\u620f\u5f00\u59cb\u540e\u65f6\u95f4\u4e0d\u8db3"),[!0,!1];if(this.isTrigGameSucToBottomCd()){var i=p.default.getCopNumberValueByKey("btn_to_banner_recover_ratio");return d.default.random(100)>i?(cc.log("canGameSucToBottom yes, \u6062\u590d\u7684\u6982\u7387\u672a\u901a\u8fc7"),[!0,!1]):(this.markTrigGameSucToBottom(),cc.log("canGameSucToBottom no, \u89e6\u53d1\u6062\u590d\u4e86"),[!0,!0])}return cc.log("canGameSucToBottom yes, \u6062\u590d\u7684cd\u672a\u5230"),[!0,!1]},t.bFishStopRun=!1,t.bFishStopInvincible=!1,t.fishStopRunTime=0,t.fishStopInvincibleTime=0,t.skillLevelData=[],t.bAdSkillLevel=!1,t._beginTime=0,t._lastTrigGameSucToBottomTime=0,t.fishWeaponEffectTime=0,t.bFishWeaponEffected=!1,t.MAX_CONFIG_FISH_ID_SHOW=1e8,t.MAX_CONFIG_FISH_ID_SCALE=2048,t.map025Arr=[],t}(l.default);a.default=f,cc._RF.pop()},{}],mgrGuide:[function(e,t,i){"use strict";cc._RF.push(t,"34ba4z71MpL9rGp2+Hmp1Rj","mgrGuide");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.GuideMaskType=void 0;var l=o("Manager"),d=o("mgrRecord"),c=o("Tools"),u=o("mgrCfg"),h=o("mgrDirector"),p=o("mgrTip"),f=o("Const"),g=o("mgrSdk"),v=cc._decorator,_=v.ccclass;v.property,function(e){e[e.none_passAll=0]="none_passAll",e[e.none_blockkAll=1]="none_blockkAll",e[e.none_passHole=2]="none_passHole",e[e.mask_passAll=3]="mask_passAll",e[e.mask_blockAll=4]="mask_blockAll",e[e.mask_passHole=5]="mask_passHole"}(r.GuideMaskType||(r.GuideMaskType={}));var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_GUIDE_POINT:this.onMsgGuidePoint.bind(this),MSG_GUIDE_BEGIN:this.onMsgGuideBegin.bind(this),MSG_GUIDE_END:this.onMsgGuideEnd.bind(this)})},t.loadRecord=function(){e.loadRecord.call(this);for(var t=(d.default.getData("guide")||{}).completedGuideIds||[],i={},n=0;n<t.length;n++)i[t[n]]=!0;this.completedGuideIds=i,this.refreshAvailableGuideIds()},t.saveRecord=function(){e.saveRecord.call(this);var t=[];c.default.forEachMap(this.completedGuideIds,function(e,i){1==i&&t.push(parseInt(e))});var i={completedGuideIds:t};d.default.setData("guide",i)},t.refreshAvailableGuideIds=function(){var e=this,t=[];u.default.forDb("guide_db",function(i){var n=parseInt(i);e.completedGuideIds[n]||t.push(n)}),t.sort(),this.availableGuideIds=t,cc.log("refreshAvailableGuideIds",t)},t.forceFinishAllGuides=function(){console.log("mgrGuide forceFinishAllGuides");var e={};u.default.forDb("guide_db",function(t){var i=parseInt(t);e[i]=!0}),this.completedGuideIds=e,this.saveRecord(),this.refreshAvailableGuideIds()},t.registerGuideNode=function(e,t){if(!this.registeredNodes[e]||this.registeredNodes[e]!=t)if(cc.isValid(t)){if(this.registeredNodes[e]&&this.unregisterGuideNode(e),this.registeredNodes[e]=t,this.sendMsg("MSG_GUIDE_POINT",{id:ul.format("%s.register",e)}),null!=this.reactiveGuideId&&null!=this.reactiveGuideStep&&0==this.bStart){var i=u.default.get("guide_db",this.reactiveGuideId,this.reactiveGuideStep);if(this.getGuideNodes(i.nodeNames).length<=0&&i.nodeNames.length>0)return;this.startGuide(this.reactiveGuideId,this.reactiveGuideStep),this.reactiveGuideId=null,this.reactiveGuideStep=null}}else cc.warn(ul.format("mgrGuide.registerGuideNode node is invalid! name = %s.",e))},t.unregisterGuideNode=function(e){var t=this.registeredNodes[e];if(t){var i=t.__guide_trigger_node;cc.isValid(i)&&(i.removeComponent(cc.Component),i.destroy(),t.__guide_trigger_node=null),this.sendMsg("MSG_GUIDE_POINT",{id:ul.format("%s.unregister",e)}),this.registeredNodes[e]=null}},t.getGuideNode=function(e){var t=this.registeredNodes[e];return cc.isValid(t)?t:null},t.getGuideNodes=function(e){var t=[];if(!e)return t;for(var i=0;i<e.length;i++){var n=e[i],o=this.getGuideNode(n);o&&t.push(o)}return t},t.isGuiding=function(){return cc.isValid(this.guideView)||null!=this.activeGuideId},t.isGuideCompleted=function(e){return 1==this.completedGuideIds[e]},t.cancelGuide=function(){cc.warn(" \u53d6\u6d88\u5f15\u5bfc",this.activeGuideId,this.activeGuideStep),this.activeGuideId,this.activeGuideStep,this.activeGuideId=null,this.activeGuideStep=null,this.bStart=!1,cc.isValid(this.guideView)&&(this.guideView.hideAndRemove(),this.guideView=null)},t.startGuide=function(e,t){cc.log("\u5f00\u59cb\u5f15\u5bfc",e,t),this.activeGuideId=e,this.activeGuideStep=t,this.bStart=!0;var i=u.default.get("guide_db",e,t);if(i){var n=this.getGuideNodes(i.nodeNames),o=null,r=f.default.GLOBAL_ORDER_DIALOG;(o=this._searchParentFromCanvas(n[0]))||(o=h.default.getRoot()),o.convertToNodeSpaceAR(cc.v2(h.default.width/2,h.default.height/2));var a=h.default.createView("vGuideView",{guideId:e,step:t});if(a.parent=o,a.zIndex=r,a.show(),this.guideView=a,i.startMsg.length>=1){var s=i.startMsg,l=s[0],d=s[1];this.sendMsg(l,d)}i&&i.reportStage1&&g.default.statisOnStageEnd(i.reportStage1+"",1,"0"),i&&i.reportStage2&&g.default.statisOnStageStart(i.reportStage2+"","0")}},t._searchParentFromCanvas=function(e){if(!cc.isValid(e))return null;for(var t=h.default.getSceneRoot(),i=h.default.getUIRoot(),n=e.parent;n;){if(n==t||n==i)return n;n=(e=n).parent}return null},t.completeGuide=function(e,t){var i=u.default.get("guide_db",e);if(i){var n=u.default.quietGet("guide_db",e,t);if(n&&n.endReportEventId&&g.default.commonEvent(n.endReportEventId,n.endReportEventDesc),n&&n.reportStage3&&g.default.statisOnStageEnd(n.reportStage3+"",1,"0"),n&&n.reportStage4&&g.default.statisOnStageStart(n.reportStage4+"","0"),t>=i.length-1)i[0].bRepeat||(this.completedGuideIds[e]=!0,this.saveRecord(),this.refreshAvailableGuideIds()),this.cancelGuide(),this.doSendEndMsg(e,t);else{this.cancelGuide(),this.doSendEndMsg(e,t),this.activeGuideId=e,this.activeGuideStep=t+1,this.bStart=!1;var o=u.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(o.startTrigger.length<=0){if(this.getGuideNodes(o.nodeNames).length<o.nodeNames.length){var r=this.activeGuideId,a=this.activeGuideStep;return this.cancelGuide(),this.reactiveGuideId=r,void(this.reactiveGuideStep=a)}this.startGuide(this.activeGuideId,this.activeGuideStep)}}}else this.cancelGuide()},t.doSendEndMsg=function(e,t){var i=u.default.quietGet("guide_db",e,t);if(i&&i.endMsg.length>=1){var n=i.endMsg,o=n[0],r=n[1];cc.log("-----sendmg",o,r),this.sendMsg(o,r)}},t.onGuidePoint=function(e,t){this.bDebugCloseGuide||(null!=this.activeGuideId&&null!=this.activeGuideStep&&this._tryStopGuide(e,t),null!=this.activeGuideId&&null!=this.activeGuideStep||this._tryStartGuide(e,t))},t._tryStartGuide=function(e,t){for(var i=0;i<this.availableGuideIds.length;i++)for(var n=this.availableGuideIds[i],o=u.default.get("guide_db",n),r=0;r<o.length;r++){var a=o[r];if(a.bStartStep&&this._checkGuideCanStart(a,e,t))return void this.startGuide(a.id,a.step);a.startTrigger&&""!=a.startTrigger&&e==a.startTrigger[0][0]&&(this.reactiveGuideId=a.id,this.reactiveGuideStep=a.step)}},t._tryStopGuide=function(e,t){var i=u.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(this.bStart){if(this._checkTrigger(i.cancelTrigger,e,t))return void this.cancelGuide();if(this._checkTrigger(i.completeTrigger,e,t)){if(this.completeGuide(this.activeGuideId,this.activeGuideStep),this.activeGuideId&&this.activeGuideStep&&!this.bStart){var n=u.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(this._checkGuideCanStart(n,e,t))return void this.startGuide(n.id,n.step)}return}}else if(this._checkGuideCanStart(i,e,t))return void this.startGuide(i.id,i.step)},t._checkTrigger=function(e,t,i){for(var n=function(n){var o=e[n],r=o[0],a=o[1];if(r==t){var s=!0;if(a&&Object.keys(a).length>0&&c.default.forEachMap(a,function(e,t){if(i[e]!=t)return s=!1,!0}),s)return{value:!0}}},o=0;o<e.length;o++){var r=n(o);if("object"==typeof r)return r.value}return!1},t._checkGuideCanStart=function(e,t,i){return!(!this._checkTrigger(e.startTrigger,t,i)||e.nodeNames.length>0&&this.getGuideNodes(e.nodeNames).length<=0)},t._debugCancelDebug=function(){this.bDebugCloseGuide=!0,this.cancelGuide(),p.default.showMsgTip("\u53d6\u6d88\u65b0\u624b\u5f15\u5bfc")},t.onGuideNodeUnregister=function(e){var t=this.activeGuideId,i=this.activeGuideStep;if(null!=t&&null!=i)for(var n=u.default.get("guide_db",t,i),o=0;o<n.nodeNames.length;o++)if(n.nodeNames[o]==e)return cc.warn("mgrGuide.onGuideNodeUnregister active guild's node unregister! cancel it!",t,i,e),void this.cancelGuide()},t.onMsgGuidePoint=function(e){var t=e,i=t.id;this.onGuidePoint(i,t)},t.onMsgGuideBegin=function(){},t.onMsgGuideEnd=function(){},t.getbDebugCloseGuide=function(){return this.bDebugCloseGuide},t.registeredNodes={},t.bStart=!1,t.bDebugCloseGuide=!1,t.completedGuideIds={},t.availableGuideIds=[],s([_],t)}(l.default);r.default=y,cc._RF.pop()},{}],mgrNativeAdSdk:[function(e,t,i){"use strict";cc._RF.push(t,"2f65fl3V6tMLZeJMg2kVkmO","mgrNativeAdSdk");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Manager"),l=o("mgrAdNative"),d=o("mgrSdk"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_SDK_OPEN_NATIVE_ADV_RESULT:this.onMsgOpenNativeAdvResult.bind(this),MSG_SDK_CLICK_NATIVE_ADV_RESULT:this.onMsgClickNativeAdvResult.bind(this),MSG_SDK_CLOSE_NATIVE_ADV_RESULT:this.onMsgCloseNativeAdvResult.bind(this)})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.getNativeDataByNativeType=function(e){return this.cacheNativeDatas[e]},t.cleanNativeDataByNativeType=function(e){this.cacheNativeDatas[e]=null,console.log("\u539f\u751f\u7f13\u5b58\u6e05\u9664\u6210\u529f\uff01\uff01\uff01 advId = ",e)},t.onClickNativeAd=function(e,t,i){this.getNativeDataByNativeType(e)?d.default.clickNativeAdv(e,JSON.stringify(t),i):cc.warn(" inbuild sdk: onClickNativeAd: nativeData not found! advId= ",e)},t.onCloseNativeAd=function(e,t,i,n){cc.log("inbuild sdk: onCloseNativeAd: advId=",e),d.default.closeNativeAdv(e,JSON.stringify(t),n)},t._onReceiveNativeData=function(e,t,i){e&&t&&(this.NATIVE_DATA_SERIAL_NUMBER++,t.serialNumber=this.NATIVE_DATA_SERIAL_NUMBER,t.advId=e,this.cacheNativeDatas[e]=t,this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:e,userData:i}))},t.onMsgOpenNativeAdvResult=function(e){cc.log("inbuild sdk: onMsgOpenNativeAdvResult",e);var t=e.code,i=(e.msg,e.advId),n=JSON.parse(e.userData||"{}")||{},o=e.nativeData;1==t?this._onReceiveNativeData(i,o,n):(this.cacheNativeDatas[i]=null,this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:i,userData:n}))},t.onMsgClickNativeAdvResult=function(e){parseInt(e.code),e.msg;var t=e.advId,i=JSON.parse(e.userData||"{}")||{};cc.log("inbuild sdk: onMsgClickNativeAdvResult",i),this.sendMsg("MSG_NATIVE_AD_SDK_CLICK_SUCCESS",{advId:t,userData:i}),this.cacheNativeDatas[t]=null,l.default.__invokeRefreshData(i),this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:t,userData:i}),this.onCloseNativeAd(t,i,i.adEventId,!1)},t.onMsgCloseNativeAdvResult=function(e){parseInt(e.code),e.msg,e.advId,JSON.parse(e.userData||"{}")},t.cacheNativeDatas={},t.NATIVE_DATA_SERIAL_NUMBER=0,t}(s.default);r.default=c,cc._RF.pop()},{}],mgrNative:[function(e,t){"use strict";cc._RF.push(t,"7b44bW+OKBEzaO/DYUMTOrS","mgrNative"),cc._RF.pop()},{}],mgrNetwork:[function(e,t,i){"use strict";cc._RF.push(t,"9b767SvZMFC+4wHhZmfMvXC","mgrNetwork");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("NetworkAdapterHttp"),c=o("NetworkAdapterHttpUlServer"),u=o("NetworkManager"),h=o("Timer"),p=o("Tools"),f=o("Const"),g=o("mgrChannel"),v=cc._decorator.ccclass,_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this);var t=new c.NetworkAdapterHttpUlServer;t.setHost(f.default.SERVER_HOST),t.setUrlFormat(f.default.SERVER_URL_FORMAT),t.setUlServerArg("ultralisk","pc",f.default.SERVER_APP_ID.toString(),"ultralisk"),t.setTimeout(5),this.networkManager=new u.NetworkManager(t),h.default.callLoop(1/60,this.onTimerSpan.bind(this),!0)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.onTimerSpan=function(e){var t=e.span;this.networkManager.update(t)},t.send=function(e,t,i){if(!g.default.isChannel4399()){null==t&&(t={});var n={};n.cmd=e,null!=t&&p.default.forEachMap(t,function(e,t){n[e]=t}),this.networkManager.addTask(n,this.onResponse.bind(this),this.onFaild.bind(this),this.onRequest.bind(this),i)}},t.onRequest=function(e){e.isBackgroundEnabled()||this.showWaiting(e)},t.onResponse=function(e){this.networkManager.getTasks().length<=1&&this.hideWaiting(),this.sendMsg("MSG_NETWORK_RESPONSE",{requestData:e.getRequestData(),responseData:e.getResponseData()})},t.onFaild=function(e){var t=this;this.showFaild(),h.default.callLater(.1,function(){t.retryTask(e)})},t.stopAllTasks=function(){for(var e=[],t=this.networkManager.getTasks(),i=0;i<t.length;i++){var n=t[i];e.push({requestData:n.getRequestData()})}for(this.networkManager.stopAllTasks(),this.hideWaiting(),this.hideFaild(),i=0;i<e.length;i++){var o=e[i];this.sendMsg("MSG_NETWORK_STOP_TASK",o)}},t.retryTask=function(e){this.networkManager.retryTask(e)},t.showWaiting=function(){},t.hideWaiting=function(){},t.showFaild=function(){},t.hideFaild=function(){},t.tryCheckNetwork=function(e,t){if(cc.sys.isBrowser)e();else{var i,n=ul.format("http://%s/cc_patch/fake_version.txt","h005up.ultralisk.cn"),o=new d.NetworkAdapterHttp;o.setReceiveCallback(function(){cc.log("ReceiveCallback"),i&&i.stop(),e&&e()}),o.setFaildCallback(function(){cc.log("FaildCallback"),i&&i.stop(),t&&t()}),o.send({url:n}),(i=new h.default(.1,50,function(e){cc.log("mgrNetwork.tryCheckNetwork onTimerLoop",e.count),e.count>=50&&t&&t()})).start()}},s([v],t)}(l.default);r.default=_,cc._RF.pop()},{}],mgrPlayer:[function(e,t,i){"use strict";cc._RF.push(t,"2d698uw/VFAtrVpD4XImhCp","mgrPlayer");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("Timer"),c=o("Tools"),u=o("mgrCfg"),h=o("mgrRecord"),p=o("mgrSdk"),f=o("mgrWordFilter"),g=cc._decorator.ccclass,v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),cc.log("mgrPlayer.onLoad",this._playerName),this.loadRecord(),d.default.callLoop(1,this.onTimerLoop.bind(this),!0),this.registerListeners({MSG_AVATAR_PARTS_CHANGED:this.onMsgAvatarPartsChanged.bind(this),MSG_AVATAR_REFRESHED:this.onMsgAvatarRefreshed.bind(this)})},t.loadRecord=function(){e.loadRecord.call(this);var t=h.default.getData("player")||{};this._playerName=t.playerName||"",this._items=t.items||{},this._recoverCostTimes=t.recoverCostTimes||{},this._lastDailyRefreshTime=t.lastDailyRefreshTime||0,this.uid=t.uid,this._beginGameTime=t.beginGameTime,this._beginGameTime||(this._beginGameTime=c.default.time(),this.saveRecord());var i=this._items;u.default.forDb("item_template_db",function(e,t){var n=t.id;null==i[n]&&(i[n]=t.defaultAmount)}),this.refreshDailyData(),this.refreshRecoverItem()},t.saveRecord=function(){e.saveRecord.call(this);var t={playerName:this._playerName,items:this._items,lastDailyRefreshTime:this._lastDailyRefreshTime,recoverCostTimes:this._recoverCostTimes,uid:this.uid,beginGameTime:this._beginGameTime};h.default.setData("player",t)},t.onTimerLoop=function(){this.refreshDailyData(),this.refreshRecoverItem()},t.getName=function(){return this._playerName||(this._playerName=this.calcRandomName(),this.saveRecord()),this._playerName},t.setName=function(e){this._playerName=e,this.saveRecord(),this.sendMsg("MSG_PLAYER_NAME_CHANGED")},t.getUid=function(){return this.uid||(this.uid=ul.format("%s%03d",ul.formatDate(new Date,"yyyyMMddhhmmss"),c.default.random(999)),this.saveRecord()),this.uid},t.setUid=function(){},t.getItemAmount=function(e){return this._items[e]||0},t._setItemAmount=function(e,t){if(null!=e&&null!=t){var i=this.getItemAmount(e);if(i!=t){this._items[e]=Math.max(t,0);var n={itemId:e,amountDelta:t-i};this.sendMsg("MSG_ITEM_AMOUNT_CHANGED",n),this.saveRecord()}}else cc.warn("\u8b66\u544a] mgrPlayer.setItemAmount arg is wrong!",e,t)},t.addItemAmount=function(e,t,i){if(null!=e&&null!=t){if(t>0){var n=u.default.get("item_template_db",e);if(!n)return void cc.warn("\u8b66\u544a] mgrPlayer.addItemAmount itemId \u4e0d\u5b58\u5728! itemId: ",e);n.sellItemId}var o=this.getItemAmount(e);this._setItemAmount(e,o+t),u.default.forDb_from_item_change_point_event_db(function(n,o){if(o.desc==i&&o.pointEventId)return p.default.coinChange(e,t,o.pointEventId),!0})}else cc.warn("\u8b66\u544a] mgrPlayer.addItemAmount arg is wrong!",e,t)},t.refreshDailyData=function(){c.default.isOneDay(c.default.time(),this._lastDailyRefreshTime)||(this._lastDailyRefreshTime=c.default.time(),this.saveRecord())},t.refreshRecoverItem=function(){var e=this,t=c.default.time();u.default.forDb("item_recover_db",function(i,n){var o=n.id,r=e.getItemAmount(o),a=e.getRecoverMaxAmount(o),s=e._getRecoverCostTime(o),l=0;if(1==n.mode){if(a<=r)return void(0!=s&&e._setRecoverCostTime(o,0));if(t<s&&(s=t,e._setRecoverCostTime(o,s)),s<=0){if(a<=r)return;s=t,e._setRecoverCostTime(o,s)}var d=t-s,u=e._getRecoverTime(o);if((l=Math.floor(d/u))<=0)return;s+=u*l}else{if(2!=n.mode)return void cc.warn("\u8b66\u544a] mgrPlayer.refreshRecoverItem \u672a\u77e5mode",n.mode);if(s<=0)return void e._setRecoverCostTime(o,t);if(c.default.isOneDay(t,s))return;l=1,s=t}a<=(r+=e._getRecoverAmount(o)*l)&&(r=Math.min(r,a),s=0),e._setItemAmount(o,r),e._setRecoverCostTime(o,s)})},t.getRecoverMaxAmount=function(e){var t=u.default.get("item_recover_db",e);return 0!=t.maxAmountRefItemId?this.getItemAmount(t.maxAmountRefItemId):t.maxAmount},t._getRecoverTime=function(e){return u.default.get("item_recover_db",e,"recoverTime")},t._getRecoverAmount=function(e){var t=u.default.get_from_item_recover_db(e);return t.recoverCopValue?p.default.getCopNumberValueByKey(t.recoverCopValue):t.recoverAmount},t._getRecoverCostTime=function(e){return this._recoverCostTimes[e]||0},t._setRecoverCostTime=function(e,t){this._recoverCostTimes[e]=t,this.saveRecord()},t.getRecoverRemainTime=function(e){var t=u.default.get("item_recover_db",e);if(1==t.mode){var i=this._getRecoverCostTime(e);if(i<=0)return null;var n=c.default.time()-i,o=this._getRecoverTime(e);return o<n?0:o-n}if(2==t.mode){if(this.getItemAmount(e)>=this.getRecoverMaxAmount(e))return null;var r=new Date;return r.setDate(r.getDate()+1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.getTime()/1e3-c.default.time()}return cc.warn("\u8b66\u544a] mgrPlayer.refreshRecoverItem \u672a\u77e5mode",t.mode),null},t.openItemBox=function(e){var t=u.default.get("item_box_db",e);return this.openItemBoxByBoxData(t)},t.openItemBoxByBoxData=function(e){var t=[];if(e.triggerRatio<1e4&&c.default.random(1e4)>e.triggerRatio)return t;var i=e.ratioType;if(1==i){for(var n=0;n<e.items.length;n++)if((r=e.items[n]).ratio>=1e4||c.default.random(1e4)<=r.ratio){var o=c.default.random(r.minAmount,r.maxAmount);t.push([r.itemId,o])}}else if(2==i)(r=c.default.calcWheelTarget(e.items,"ratio"))&&(o=c.default.random(r.minAmount,r.maxAmount),t.push([r.itemId,o]));else if(3==i)for(n=0;n<e.items.length;n++){var r=e.items[n];o=c.default.random(r.minAmount,r.maxAmount),t.push([r.itemId,o])}return t},t.calcRandomName=function(){for(var e=u.default.getDb("random_name_part1_db"),t=u.default.getDb("random_name_part2_db"),i="",n=0;n<1e3;n++){var o=e[c.default.random(e.length)-1].word+t[c.default.random(t.length)-1].word;if(!f.default.hasSymbol(o)&&f.default.checkStr(o)){i=o;break}}return i},t.getBeginGameTime=function(){return this._beginGameTime},t.getCurPlayerPartIds=function(){return this.curPlayerPartIds},t.refreshCurPlayerPartIds=function(e){this.curPlayerPartIds=e,cc.log("mgrPlayer.refreshCurPlayerPartIds()",this.curPlayerPartIds)},t.onMsgAvatarPartsChanged=function(e){var t=e.bMainPlayerRole,i=e.partIds;t&&i&&this.refreshCurPlayerPartIds(i)},t.onMsgAvatarRefreshed=function(e){var t=e.bMainPlayerRole,i=e.partIds;t&&i&&this.refreshCurPlayerPartIds(i)},t._items={},t._playerName="",t._lastDailyRefreshTime=null,t._recoverCostTimes={},t.uid="",t._beginGameTime=0,t.curPlayerPartIds=[],s([g],t)}(l.default);r.default=v,cc._RF.pop()},{}],mgrPool:[function(e,t,i){"use strict";cc._RF.push(t,"97f69CulKBN3pqAzZZQdVGA","mgrPool");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("PoolManager"),c=o("mgrCfg"),u=o("Spine"),h=o("Particle"),p=o("mgrDirector"),f=o("AnimNode"),g=o("Timer"),v=o("DragonBone"),_=cc._decorator.ccclass,y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.poolManager=new d.default,this._regsiterPoolConfig()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t._regsiterPoolConfig=function(){this.poolManager.register("spine",function(e,t){return c.default.get("spine_db",e)?new u.default(e,t):(t&&t(e),null)},function(e){e instanceof u.default&&e.reset()},function(e){e instanceof u.default&&(e.stopAllActions(),e.unregisterEventCallback())},function(){},100),this.poolManager.register("animNode",function(e,t){return c.default.get("anim_node_db",e)?new f.default(e,t):(t&&t(e),null)},function(e){e instanceof f.default&&e.reset()},function(e){e instanceof f.default&&(e.stopAllActions(),e.unregisterEventCallback())},function(){},100),this.poolManager.register("particle",function(e,t){return c.default.get("particle_db",e)?new h.default(e,t):(t&&t(e),null)},function(e){e instanceof h.default&&e.reset()},function(){},function(){},100),this.poolManager.register("view",function(e,t){return t&&t(e),p.default.createView(e)},function(){},function(){},function(){},100),this.poolManager.register("dragonBone",function(e,t){return c.default.get("dragon_db",e)?new v.default(e,t):(t&&t(e),null)},function(e){e instanceof v.default&&e.reset()},function(e){e instanceof v.default&&(e.stopAllActions(),e.unregisterEventCallback())},function(){},100)},t.preload=function(e,t,i){var n=this;if(this.contain(e,t))i&&i(t);else{var o=null;o=this.poolManager.get(e,t,function(){g.default.callLater(1/60,function(){o&&n.put(o),i&&i(t)})})}},t.get=function(e,t,i){return void 0===i&&(i=null),this.poolManager.get(e,t,i)},t.put=function(e){this.poolManager.put(e)},t.clean=function(e,t){this.poolManager.clean(e,t)},t.contain=function(e,t){return this.poolManager.contain(e,t)},s([_],t)}(l.default);r.default=y,cc._RF.pop()},{}],mgrRecord:[function(e,t,i){"use strict";cc._RF.push(t,"b01ccp08MRNpa9et5mKMFwU","mgrRecord");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("Timer"),c=o("Const"),u=o("mgrSdk"),h=cc._decorator.ccclass,p="record_game"+c.default.gameId,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this._readRecord(),d.default.callLoop(1,this.onTimerSpan.bind(this),!0),this.registerListeners({MSG_SDK_RECORD_GET:this.onMsgSdkRecordGet})},t.onTimerSpan=function(){this.bNeedFlush&&(this.bNeedFlush=!1,this._writeRecord(),this.bNeedUpdateServer=!0)},t.forceRecord=function(){if(!this._loginId)return this._writeRecord(),void console.warn("---------\x3e>> mgrRecord forceRecord  _loginId is null");this.record.loginId=this._loginId,this._writeRecord(),this.saveServerRecord()},t.getLoginId=function(){return this._loginId},t.setLoginId=function(e){if(this._loginId=e,e){u.default.getServerRecord(),this._timerRef&&(this._timerRef.stop(),this._timerRef=null);var t=new d.default(60,-1,this.onTimerSpan2.bind(this));t.start(!0),this._timerRef=t}},t.onTimerSpan2=function(){this.bNeedUpdateServer&&this._loginId&&(this.bNeedUpdateServer=!1,this.saveServerRecord())},t.saveServerRecord=function(){console.log("mgrRecord saveServerRecord id "+this.record.loginId);var e=ul.clone(this.record);e.offline_arena=null,e.offline_part_rank=null,u.default.saveServerRecord(JSON.stringify(e))},t._readRecord=function(e){if(e||(e=cc.sys.localStorage.getItem(p)),!e)return cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u672a\u627e\u5230\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord();var t=JSON.parse(e);return t?1!=t.__version__?(cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u7248\u672c\u6539\u53d8\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord()):void(this.record=t):(cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u6570\u636e\u635f\u574f\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord())},t._writeRecord=function(){var e=JSON.stringify(this.record);cc.log("_writeRecord len",e.length),cc.sys.localStorage.setItem(p,e)},t._requestFlush=function(){this._bDebugBanWrite||(this.bNeedFlush=!0)},t._setDebugBanWrite=function(e){this._bDebugBanWrite=e},t.getData=function(e){return this.record[e]},t.setData=function(e,t){this.record[e]=t,this.record.__age__=(this.record.__age__||0)+1,this._requestFlush()},t.resetRecord=function(){this.record={},this.record.__age__=0,this.record.__version__=1,this._requestFlush(),this.sendMsg("MSG_RECORD_RESET")},t.onMsgSdkRecordGet=function(e){var t=e.userData,i=null;try{t&&(i=JSON.parse(t))}catch(e){console.log(e.message)}var n=this._loginId;if(!i)return console.log(" --------\x3e>>> mgrRecord recordData is null "),this.record.loginId=n,void this._writeRecord();var o=this.getData("loginId"),r=i.loginId;if(r&&r!=o)console.log(" --------\x3e>>> mgrRecord recordData id not same "),console.log(" --------\x3e>>> mgrRecord recordData is cover "),this.record=i,this._writeRecord(),this.sendMsg("MSG_RECORD_RESET"),this.sendMsg("MSG_RECORD_UI_REFRESH");else{var a=this.record.__age__||0,s=i.__age__||0;console.log(" --------\x3e>>> mgrRecord recordData id is same "),s>a&&(console.log(" --------\x3e>>> mgrRecord recordData is cover "),this.record=i,this.record.loginId=n,this._writeRecord(),this.sendMsg("MSG_RECORD_RESET"),this.sendMsg("MSG_RECORD_UI_REFRESH"))}},t.record={},t.bNeedFlush=!1,t._bDebugBanWrite=!1,t.bNeedUpdateServer=!1,t._loginId="",t._timerRef=null,s([h],t)}(l.default);r.default=f,cc._RF.pop()},{}],mgrReview:[function(e,t,i){"use strict";cc._RF.push(t,"dd743rXomVK9qgoulZf82I8","mgrReview");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Manager"),l=o("Tools"),d=o("mgrCop"),c=o("mgrNetwork"),u=o("mgrRecord"),h=o("mgrSdk"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=u.default.getData("review")||{};this.lastAlertTime=t.lastAlertTime||0,this.lastReviewTime=t.lastReviewTime||0},t.saveRecord=function(){e.saveRecord.call(this);var t={lastAlertTime:this.lastAlertTime||0,lastReviewTime:this.lastReviewTime||0};u.default.setData("review",t)},t.isReview=function(){return 0==this.lastReviewTime},t.tryShowReviewDialog=function(){l.default.random(100)>d.default.getNumberValue("pop_review_ratio")||(0==this.lastReviewTime?l.default.isOneDay(l.default.time(),this.lastAlertTime||0)?cc.log("[warn] mgrReview.tryShowReviewDialog today already alerted"):this.showReviewDialog():cc.log("[warn] mgrReview.tryShowReviewDialog already reviewd"))},t.showReviewDialog=function(){var e=this;c.default.tryCheckNetwork(function(){e.lastAlertTime=l.default.time(),e.lastReviewTime=l.default.time(),e.saveRecord(),h.default.sendMsgToSdk({cmd:"/c/openInviteComment",data:{}})},function(){cc.log("[warn] mgrReview.showReviewDialog network faild!")})},t.markUnreview=function(){this.lastAlertTime=0,this.lastReviewTime=0,this.saveRecord()},t}(s.default);r.default=p,cc._RF.pop()},{}],mgrRole:[function(e,t,i){"use strict";cc._RF.push(t,"2a054SkgVREvYIjf/PK2v4x","mgrRole");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Manager"),l=o("Tools"),d=o("mgrRecord"),c=o("mgrSdk"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.loadRecord=function(){e.loadRecord.call(this);var t=d.default.getData("role")||{};this._lastTime=t._lastTime||0,this._curDayCount=t._curDayCount||1,this._partRewards=t._partRewards||[],this._firstFreeStart=t._firstFreeStart||{},this._countFindSame=t._countFindSame||0,this._lastGouTime=t._lastGouTime||0,this._promptExtraLastTimes=t._promptExtraLastTimes||{}},t.saveRecord=function(){e.saveRecord.call(this);var t={_lastTime:this._lastTime,_curDayCount:this._curDayCount,_partRewards:this._partRewards,_firstFreeStart:this._firstFreeStart,_countFindSame:this._countFindSame,_lastGouTime:this._lastGouTime,_promptExtraLastTimes:this._promptExtraLastTimes};d.default.setData("role",t)},t.tryReset=function(){var e=l.default.time();l.default.isOneDay(e,this._lastTime)||(this._lastTime=e,this._curDayCount++,this.saveRecord())},t.setFirstFreeStartState=function(e,t,i){0==c.default.getCopNumberValueByKey(i)||(this._firstFreeStart[e]=t,this.saveRecord())},t.getFirstFreeStartState=function(e,t){return 0==c.default.getCopNumberValueByKey(t)||(console.log("getFirstFreeStartState Name",e),this._firstFreeStart[e])},t.isLastGouModeCd=function(){var e=c.default.getCopNumberValueByKey("b_ad_check_mode_cd"),t=l.default.time()-this._lastGouTime,i=t>e;return console.log("isGouModeCd passTime",t),console.log("isGouModeCd cd",e),i},t.setLastGouModeShowTime=function(e){this._lastGouTime=e,this.saveRecord()},t.onMsgAdEventSuccessd=function(e){e.adEventId},t._lastTime=0,t._curDayCount=1,t._firstFreeStart={},t._countFindSame=0,t._lastGouTime=0,t}(s.default);r.default=u,cc._RF.pop()},{}],mgrSdk:[function(e,t,i){"use strict";cc._RF.push(t,"467e7ztU4NEF4z8bAbZNEzP","mgrSdk");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Manager"),l=o("Tools"),d=o("ULSDK"),c=o("Const"),u=o("mgrAd"),h=o("mgrBannerInt"),p=o("mgrCfg"),f=o("mgrChannel"),g=o("mgrCop"),v=o("mgrGuide"),_=o("mgrPlayer"),y=o("mgrRecord"),m=o("mgrShop"),S=o("mgrSound"),b=o("mgrTip"),C=o("mgrVideoRecorder"),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.registerCmdCallback=function(e,t){this.cmdCallbacks[e]=t},t.unregisterCmdCallback=function(e){this.cmdCallbacks[e]=null},t.dispatchCmd=function(e,t){var i=this.cmdCallbacks[e];i?i(t):cc.warn("mgrSdk: dispatchCmd: "+e+",can't find callback!")},t.registerAllCmds=function(){this.registerCmdCallback("/c/channelInfoResult",this.sdkback_channelInfoResult.bind(this)),this.registerCmdCallback("/c/payResult",this.sdkback_payResult.bind(this)),this.registerCmdCallback("/c/prePayResult",this.sdkback_prePayResult.bind(this)),this.registerCmdCallback("/c/shareResult",this.sdkback_shareResult.bind(this)),this.registerCmdCallback("/c/lifeCycle",this.sdkback_lifeCycle.bind(this)),this.registerCmdCallback("/c/copInfoResult",this.sdkback_copInfoResult.bind(this)),this.registerCmdCallback("/c/megadataServer",this.sdkback_megadataServer.bind(this)),this.registerCmdCallback("/c/useCdkey",this.sdkback_useCdkey.bind(this)),this.registerCmdCallback("/c/openAdvResult",this.sdkback_openAdvResult.bind(this)),this.registerCmdCallback("/c/openNativeAdvResult",this.sdkback_openNativeAdvResult.bind(this)),this.registerCmdCallback("/c/clickNativeAdvResult",this.sdkback_clickNativeAdvResult.bind(this)),this.registerCmdCallback("/c/clickAdvResult",this.sdkback_clickAdvResult.bind(this)),this.registerCmdCallback("/c/closeAdvResult",this.sdkback_closeAdvResult.bind(this)),this.registerCmdCallback("/c/closeNativeAdvResult",this.sdkback_closeNativeAdvResult.bind(this)),this.registerCmdCallback("/c/userLoginResult",this.sdkback_userLoginResult.bind(this)),this.registerCmdCallback("/c/userLoginReportResult",this.sdkback_userLoginReportResult.bind(this)),this.registerCmdCallback("/c/userIsLoginResult",this.sdkback_userIsLoginResult.bind(this)),this.registerCmdCallback("/c/loginOutResult",this.sdkback_loginOutResult.bind(this)),this.registerCmdCallback("/c/advValidCountResult",this.sdkback_advValidCountResult.bind(this)),this.registerCmdCallback("/c/saveRankDataResult",this.sdkback_saveRankDataResult.bind(this)),this.registerCmdCallback("/c/getRankDataResult",this.sdkback_getRankDataResult.bind(this)),this.registerCmdCallback("/c/recorderGameVideoResult",this.sdkback_recorderGameVideoResult.bind(this)),this.registerCmdCallback("/c/shareGameVideoResult",this.sdkback_shareGameVideoResult.bind(this)),this.registerCmdCallback("/c/jumpOtherGameResult",this.sdkback_jumpOtherGameResult.bind(this)),this.registerCmdCallback("/c/extraBonus",this.sdkback_extraBonus.bind(this)),this.registerCmdCallback("/c/openRecommendationResult",this.sdkback_openRecommendationResult.bind(this)),this.registerCmdCallback("/c/closeRecommendationResult",this.sdkback_closeRecommendationResult.bind(this)),this.registerCmdCallback("/c/saveUserDataResult",this.sdkback_saveUserDataResult.bind(this)),this.registerCmdCallback("/c/getUserDataResult",this.sdkback_getUserDataResult.bind(this)),this.registerCmdCallback("/c/addGameToMyFavoriteResult",this.sdkback_addGameToMyFavoriteResult.bind(this)),this.registerCmdCallback("/c/getUserInfoMsgResult",this.sdkback_getUserInfoMsgResult.bind(this)),this.registerCmdCallback("/c/appShareResult",this.sdkback_appShareResult.bind(this)),this.registerCmdCallback("/c/installShortcutResult",this.sdkback_installShortcutResult.bind(this)),this.registerCmdCallback("/c/getShortcutStateResult",this.sdkback_getShortcutStateResult.bind(this)),this.registerCmdCallback("/c/setClipboardDataResult",this.sdkback_setClipboardDataResult.bind(this)),this.registerCmdCallback("/c/getClipboardDataResult",this.sdkback_getClipboardDataResult.bind(this)),this.registerCmdCallback("/c/pauseSound",this.sdkback_pauseSound.bind(this)),this.registerCmdCallback("/c/resumeSound",this.sdkback_resumeSound.bind(this)),this.registerCmdCallback("/c/postMegadataResult",this.sdkback_postMegadataResult.bind(this)),this.registerCmdCallback("/c/openJumpResult",this.sdkback_openJumpResult.bind(this)),this.registerCmdCallback("/c/jumpOtherGameRewardResult",this.sdkback_jumpOtherGameRewardResult.bind(this)),this.registerCmdCallback("/c/getBaseChannelInfoResult",this.sdkback_getBaseChannelInfoResult.bind(this)),this.registerCmdCallback("/c/followOfficialAccountResult",this.sdkback_followOfficialAccountResult.bind(this)),this.registerCmdCallback("/c/getFollowOfficialAccountStateResult",this.sdkback_getFollowOfficialAccountStateResult.bind(this)),this.registerCmdCallback("/c/showPointDebugInfo",this.sdkback_showPointDebugInfo.bind(this)),this.registerCmdCallback("/c/jumpNewGuide",this.sdkback_jumpNewGuide.bind(this)),this.registerCmdCallback("/c/openGridAdResult",this.sdkback_openGridAdResult.bind(this)),this.registerCmdCallback("/c/closeGridAdResult",this.sdkback_closeGridAdResult.bind(this)),this.registerCmdCallback("/c/phoneVibrateResult",this.sdkback_phoneVibrateResult.bind(this)),this.registerCmdCallback("/c/getUserNumInRankResult",this.sdkback_onGetUserNumInRankResult.bind(this)),this.registerCmdCallback("/c/getUserInfoByIdInRankResult",this.sdkback_onGetUserInfoByIdInRankResult.bind(this)),this.registerCmdCallback("/c/getUserInfoListByRankIdResult",this.sdkback_onGetUserInfoList.bind(this)),this.registerCmdCallback("/c/reportUserInfoInRankResult",this.sdkback_onReportUserInfoInRankResult.bind(this))},t.init=function(){e.init.call(this),console.log("mgrSdk.init")},t.onLoad=function(){e.onLoad.call(this)},t.onLoadingComplete=function(){console.log("onLoadingComplete.setVersion...."),this.bInit=!0,this.loadRemoteConfig(),this.setPauseSoundListener(),this.setResumeSoundListener()},t.getCopNumberValueByKey=function(e){return g.default.getNumberValue(e)},t.getCopByKey=function(e){return g.default.get(e)},t.registerKeyboardListener=function(){cc.sys.isBrowser||cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onSystemKeyUp,this)},t.onSystemKeyUp=function(e){var t=e.keyCode;cc.log("mgrSdk.onSystemKeyUp",t),t!=cc.macro.KEY.back&&t!=cc.macro.KEY.escape||this.onClickBack()},t.onMsgSdkLifeCycle=function(e){"onBackPressed"==e.lifeCycle&&this.onClickBack()},t.onClickBack=function(){var e=this;if(f.default._isThirdExit)this.thirdExitGame();else{if(this.__back_prompt_dialog)return this.__back_prompt_dialog.closeDialog(),void(this.__back_prompt_dialog=null);var t=b.default.alertPrompt2("\u63d0\u793a","\u662f\u5426\u9000\u51fa\u6e38\u620f","\u53d6\u6d88","\u9000\u51fa\u6e38\u620f",function(){e.__back_prompt_dialog&&(e.__back_prompt_dialog.closeDialog(),e.__back_prompt_dialog=null)},function(){cc.game.end()});t.parent.zIndex=c.default.GLOBAL_ORDER_CLOSE_PROMPT,this.__back_prompt_dialog=t}},t.sendMsgToSdk=function(e){c.default.useSdkV5&&(console.info("--- ulsdkv6 params",ul.clone(e)),e=this.parseRequestToUlsdk5(e),console.info("--- ulsdkv5 params",e)),this.bInit||e.cmd},t.onMsgNativeCallback=function(e){if(c.default.useSdkV5){console.info("--- ulsdkv5 responseData",ul.clone(e.responseData));var t=this.parseResponseToUlsdk6(e.responseData);console.info("--- ulsdkv6 responseData",t)}var i=e.responseData,n=i.cmd,o=i.data||{};console.log("mgrSdk.onMsgNativeCallback",n,o),this.dispatchCmd(n,o)},t.sdkback_channelInfoResult=function(e){console.info("mgrSdk:  copInfo",e.copInfo),g.default.onReceiveSdkCop(e.copInfo),ul.dump(e.copInfo),f.default._cardType=e.cardType,f.default._isThirdExit=e.isThirdExit,f.default._isAbout=e.isAbout,f.default._isMoreGame=e.isMoreGame,f.default._isULMoreGame=e.isULMoreGame,f.default._isShowUrlAdIcon=e.isShowUrlAdIcon,f.default._isJumpLeisureEnabled=e.isJumpLeisureEnabled,null==e.isPayEnabled||null==e.isPayEnabled?f.default._isPayEnabled=!0:f.default._isPayEnabled=e.isPayEnabled,f.default._isShareEnabled=e.isShareEnabled,f.default._isUseSdkRank=e.isUseSdkRank,f.default._isSupportRecordShare=e.isSupportRecordShare,f.default._isSupportClipboardData=e.isSupportClipboardData,f.default._isSupportInstallShortcut=e.isSupportInstallShortcut,f.default._isSupportFindMinigames=e.isSupportFindMinigames,f.default._isSupportRecommendationBtn=e.isSupportRecommendationBtn,f.default._is4399Watermark=e.is4399Watermark,f.default._isSupportFollowOfficialAccount=e.isSupportFollowOfficialAccount,f.default.findmeImageUrl=e.findMinigamesImageUrl,f.default.setInterPushConfig(e.jumpInfo||[]),m.default.setSdkPayInfo(e.payInfo),_.default.setUid(e.uuid),c.default.sdcardPath=e.sdcardPath,c.default.packageVersion=e.packageVersion,c.default.copChannelId=e.copChannelId,c.default.ulsdkVersion=e.ulsdkVersion,c.default.cdkChannelId=e.cdkChannelId,f.default.setChannelName(e.appName),this.uuid=e.uuid,this.sendMsg("MSG_SDK_CHANNEL_INFO_RESULT")},t.sdkback_payResult=function(e){var t=e.code,i=e.msg,n=e.payId,o=e.userData,r=1==t;b.default.closeWaitingDialog(),b.default.showMsgTip(i),this.sendMsg("MSG_SDK_PAY_RESULT",{payId:n,userData:o,code:t,msg:i,bSuccessful:r})},t.sdkback_prePayResult=function(e){var t=e.code,i=e.msg,n=e.payId,o=e.userData,r=1==t;this.sendMsg("MSG_SDK_PRE_PAY_RESULT",{code:t,msg:i,payId:n,userData:o,bSuccessful:r})},t.sdkback_shareResult=function(e){var t=e.code,i=e.msg,n=1==t;this.sendMsg("MSG_SDK_SHARE_RESULT",{bSuccessful:n,code:t,msg:i})},t.sdkback_lifeCycle=function(e){var t=e.lifeCycle||"";this.sendMsg("MSG_SDK_LIFE_CYCLE",{lifeCycle:t})},t.sdkback_copInfoResult=function(e){var t=e.copInfo;g.default.onReceiveSdkCop(t)},t.sdkback_megadataServer=function(e){var t=e.code;e.message,0==t?cc.log("\u5927\u6570\u636e\u7edf\u8ba1: \u5931\u8d25"):1==t&&cc.log("\u5927\u6570\u636e\u7edf\u8ba1: \u6210\u529f")},t.sdkback_useCdkey=function(e){var t=e.code,i=e.data||[];if(b.default.closeWaitingDialog(),e.message&&b.default.showMsgTip(e.message),1==t){for(var n=[],o=0;o<i.length;o++){var r=i[o],a=r.goodsid,s=r.count;_.default.addItemAmount(a,s,"cdk"),n.push({itemId:a,amount:s})}this.sendMsg("MSG_SDK_USE_CDK_SUCCESSFUL",{items:n})}},t.sdkback_openAdvResult=function(e){this.sendMsg("MSG_SDK_OPEN_ADV_RESULT",e)},t.sdkback_openNativeAdvResult=function(e){this.sendMsg("MSG_SDK_OPEN_NATIVE_ADV_RESULT",e)},t.sdkback_clickNativeAdvResult=function(e){this.sendMsg("MSG_SDK_CLICK_NATIVE_ADV_RESULT",e)},t.sdkback_clickAdvResult=function(e){this.sendMsg("MSG_SDK_CLICK_ADV_RESULT",e)},t.sdkback_closeAdvResult=function(e){this.sendMsg("MSG_SDK_ADV_CLOSE_RESULT",e)},t.sdkback_closeNativeAdvResult=function(e){this.sendMsg("MSG_SDK_CLOSE_NATIVE_ADV_RESULT",e)},t.sdkback_userLoginResult=function(e){var t=e.code,i=e.userData,n=1==t;this.sendMsg("MSG_SDK_USER_LOGIN_RESULT",{bSuccessful:n,userData:i,code:t})},t.sdkback_userLoginReportResult=function(e){var t=e.code,i=e.userData,n=1==t;this.sendMsg("MSG_SDK_USER_LOGIN_REPORT_RESULT",{bSuccessful:n,userData:i,code:t})},t.sdkback_userIsLoginResult=function(e){var t=!1;1==e.code?(console.log("\u767b\u5f55\u67e5\u8be2: \u5df2\u767b\u5f55"),t=!0):(console.log("\u767b\u5f55\u67e5\u8be2: \u672a\u767b\u5f55"),t=!1),this.sendMsg("MSG_SDK_USER_IS_LOGIN_RESULT",{bLogin:t})},t.sdkback_loginOutResult=function(e){var t=e.code,i=!1;1==t?(console.log("\u767b\u51fa\u6210\u529f"),i=!0):0==t&&(console.log("\u767b\u51fa\u5931\u8d25"),i=!1),this.sendMsg("MSG_SDK_USER_LOGIN_OUT_RESULT",{bSuccessful:i})},t.sdkback_advValidCountResult=function(e){this.sendMsg("MSG_SDK_ADV_VALID_COUNT",e)},t.sdkback_saveRankDataResult=function(e){var t=e.code,i=e.msg,n=!1;1==t?(n=!0,console.log("\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u6210\u529f")):(n=!1,console.log("\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u5931\u8d25")),this.sendMsg("MSG_SDK_SAVE_RANK_DATA_RESUTL",{bSuccessful:n,msg:i})},t.sdkback_getRankDataResult=function(e){var t=!1;1==e.code?(console.log("\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u6210\u529f!"),t=!0):(console.log("\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u5931\u8d25!"),t=!1),this.sendMsg("MSG_SDK_GET_RANK_DATA_RESULT",{bSuccessful:t})},t.sdkback_recorderGameVideoResult=function(e){var t=e.code,i=!1,n=e.msg,o=e.action;1==t?(i=!0,console.log("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u6210\u529f:"+o),C.default.setRecordStatus(C.default.RECORDING)):2==t?(i=!0,console.log("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u6210\u529fpause:"+o)):3==t?(i=!0,console.log("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u6210\u529fresume:"+o),C.default.setRecordStatus(C.default.RECORDING)):4==t?(i=!0,console.log("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u6210\u529fstop:"+o),C.default.setRecordStatus(C.default.RECORD_FINISH)):(console.log("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u5931\u8d25:"+o),b.default.showMsgTip("\u5f55\u5c4f\u65f6\u95f4\u4e0d\u8db3!"),i=!1,C.default.setRecordStatus(C.default.PRE_RECORD)),this.sendMsg("MSG_SDK_RECORD_GAME_VIDEO_RESULT",{bSuccessful:i,msg:n,action:o})},t.sdkback_shareGameVideoResult=function(e){var t=e.code,i=e.msg,n=e.userData,o=!1;1==t?(console.log("\u5f55\u5c4f\u5206\u4eab\u6210\u529f!"),o=!0):console.log("\u5f55\u5c4f\u5206\u4eab\u5931\u8d25!"),this.sendMsg("MSG_SDK_SHARE_VIDEO_RESULT",{msg:i,userData:n,bSuccessful:o})},t.sdkback_openJumpResult=function(e){var t=e.jumpInfo,i=e.code,n=e.msg,o=e.type,r=e.userData;1==i?this.sendMsg("MSG_SDK_OPEN_JUMP_RESULT",{jumpInfo:t,type:o,msg:n,userData:r}):console.info("\u6fc0\u52b1\u4e92\u63a8\u6570\u636e\u8bf7\u6c42\u5931\u8d25!")},t.sdkback_jumpOtherGameRewardResult=function(e){var t=e.code,i=e.msg,n=e.userData,o=e.rewards,r=!1;1==t?(console.info("\u6fc0\u52b1\u4e92\u63a8\u8df3\u8f6c\u6210\u529f!"),r=!0):console.info("\u6fc0\u52b1\u4e92\u63a8\u8df3\u8f6c\u5931\u8d25!"),this.sendMsg("MSG_SDK_JUMP_OTHER_GAME_REWARD_RESULT",{bSuccessful:r,msg:i,userData:n,rewards:o})},t.requestBaseChannelInfo=function(){this.sendMsgToSdk({cmd:"/c/getBaseChannelInfo"})},t.sdkback_getBaseChannelInfoResult=function(e){e&&(this.baseChannelInfo={gameName:e.gameName||"",gameLanguage:e.gameLanguage||"",channelName:e.channelName||"",appName:e.appName||"",isShowLicenceInfo:!!e.isShowLicenceInfo,licenceInfo:e.licenceInfo||"",isShowAgeLevelInfo:!!e.isShowAgeLevelInfo,ageLevelInfo:e.ageLevelInfo||"",bStartGameByTouch:!!e.isStartGameByTouch},this.sendMsg("MSG_SDK_BASE_CHANNEL_INFO_CHANGED",{baseChannelInfo:this.baseChannelInfo}))},t.getBaseChannelInfo=function(){return this.baseChannelInfo?this.baseChannelInfo:null},t.sdkback_jumpOtherGameResult=function(e){var t=e.code,i=e.msg,n=e.userData,o=!1;1==t?(console.log("\u8df3\u8f6c\u5176\u4ed6\u6e38\u620f\u6210\u529f!"),o=!0):console.log("\u8df3\u8f6c\u5176\u4ed6\u6e38\u620f\u5931\u8d25!"),this.sendMsg("MSG_SDK_JUMP_OTHER_GAME_RESULT",{bSuccessful:o,msg:i,userData:n})},t.sdkback_extraBonus=function(e){var t=e.code,i=e.msg,n=1==e.isInitGame;this.sendMsg("MSG_SDK_WX_GZH_ENTER",{msg:i,code:t,bInit:n})},t.sdkback_openRecommendationResult=function(e){var t=e.code,i=e.msg,n=!1;1==t?(console.log("\u5f00\u542f\u4ea4\u53c9\u63a8\u8350\u6210\u529f!"),n=!0):console.log("\u5f00\u542f\u4ea4\u53c9\u63a8\u8350\u5931\u8d25!"),this.sendMsg("MSG_SDK_OPEN_RECOMMEND_RESULT",{bSuccessful:n,msg:i})},t.sdkback_closeRecommendationResult=function(e){var t,i=e.code,n=e.msg;t=1==i,this.sendMsg("MSG_SDK_CLOSE_RECOMEND_RESULT",{code:i,bSuccessful:t,msg:n})},t.sdkback_saveUserDataResult=function(e){var t,i=e.code,n=e.msg;t=1==i,this.sendMsg("MSG_SDK_SAVE_USER_DATA_RESULT",{code:i,bSuccessful:t,msg:n})},t.sdkback_getUserDataResult=function(e){var t=e.code,i=e.msg,n=e.userData,o=1==t;this.sendMsg("MSG_SDK_GET_USER_DATA_RESULT",{code:t,bSuccessful:o,msg:i,storageData:n})},t.sdkback_addGameToMyFavoriteResult=function(e){var t=e.code,i=e.userData,n=e.msg,o=1==t;this.sendMsg("MSG_SDK_ADD_GAME_TO_MY_FAVORITE_RESULT",{code:t,bSuccessful:o,userData:i,msg:n})},t.sdkback_getUserInfoMsgResult=function(e){var t=e.code,i=e.msg,n=1==t;if(this.sendMsg("MSG_SDK_GET_USER_INFO_MSG_RESULT",{code:t,bSuccessful:n,msg:i}),1==e.code){if(!e.userInfo)return;this.avatarUrl=e.userInfo.avatarUrl,this.nickName=e.userInfo.nickName}},t.sdkback_appShareResult=function(e){var t=e.code,i=e.msg,n=1==t;this.sendMsg("MSG_SDK_APP_SHARE_RESULT",{code:t,msg:i,bSuccessful:n})},t.sdkback_installShortcutResult=function(e){var t=e.code,i=1==t,n=e.msg,o=e.userData;this.sendMsg("MSG_SDK_INSTALL_SHORTCUT_RESULT",{code:t,bSuccessful:i,msg:n,userData:o})},t.sdkback_getShortcutStateResult=function(e){e.code;var t=e.state,i=!!e.bHasPrompt,n=e.userData;this.sendMsg("MSG_SDK_GET_SHORTCUT_STATE_RESULT",{state:t,bHasPrompt:i,userData:n})},t.sdkback_setClipboardDataResult=function(e){var t=e.code,i=1==t,n=e.msg,o=e.clipboardData,r=e.userData;this.sendMsg("MSG_SDK_SET_CLIPBOARD_DATA_RESULT",{code:t,msg:n,bSuccessful:i,clipboardData:o,userData:r})},t.sdkback_getClipboardDataResult=function(e){var t=e.code,i=1==t,n=e.msg,o=e.clipboardData,r=e.userData;this.sendMsg("MSG_SDK_GET_CLIPBOARD_DATA_RESULT",{code:t,bSuccessful:i,msg:n,clipboardData:o,userData:r})},t.sdkback_pauseSound=function(){S.default.pauseSound("sdk")},t.sdkback_resumeSound=function(){S.default.resumeSound("sdk")},t.sdkback_postMegadataResult=function(){},t.sdkback_jumpNewGuide=function(){console.log("\u91d1\u624b\u6307 \u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc"),v.default._debugCancelDebug()},t.sdkback_phoneVibrateResult=function(){},t.sdkback_openGridAdResult=function(e){1==e.code?this.sendMsg("MSG_OPEN_GRID_AD_SUC",{userData:e.userData,type:e.type}):this.sendMsg("MSG_OPEN_GRID_AD_FAIL",{userData:e.userData,type:e.type})},t.sdkback_closeGridAdResult=function(e){e.code},t.sdkback_onGetUserNumInRankResult=function(e){e&&1==e.code?this.sendMsg("SDK_GET_RANK_USER_NUM",e):this.sendMsg("SDK_GET_RANK_USER_NUM")},t.sdkback_onGetUserInfoByIdInRankResult=function(e){e&&1==e.code?this.sendMsg("SDK_GET_RANK_USER_INFO_RESULT",e):this.sendMsg("SDK_GET_RANK_USER_INFO_RESULT")},t.sdkback_onGetUserInfoList=function(e){e&&1==e.code?this.sendMsg("SDK_GET_RANK_USER_INFO_LIST_RESULT",e):this.sendMsg("SDK_GET_RANK_USER_INFO_LIST_RESULT")},t.sdkback_onReportUserInfoInRankResult=function(e){0!=e.code?console.log("\u4e0a\u62a5\u7528\u6237\u6570\u636e\u6210\u529f",e):console.log("\u4e0a\u62a5\u7528\u6237\u6570\u636e\u5931\u8d25",e)},t.setVersion=function(e){this.sendMsgToSdk({cmd:"/c/setVersion",data:e})},t.openMoreGame=function(){this.sendMsgToSdk({cmd:"/c/openMoreGame"})},t.openULMoreGame=function(){this.sendMsgToSdk({cmd:"/c/openUlMoreGame"})},t.openMoreWonderful=function(){this.sendMsgToSdk({cmd:"/c/jumpLeisureSubject",data:{}})},t.callPhone=function(e){this.sendMsgToSdk({cmd:"/c/callPhone",data:{phoneNum:e}})},t.ulWebView=function(e){this.sendMsgToSdk({cmd:"/c/ulWebView",data:{url:e}})},t.thirdExitGame=function(){this.sendMsgToSdk({cmd:"/c/exitGame",data:{}})},t.megadataServer=function(e){this.sendMsgToSdk({cmd:"/c/megadataServer",data:e})},t.useCdk=function(e){console.log("mgrSdk useCdk cdk: ",e),b.default.isWaitingDialogOpened()?b.default.showMsgTip("\u9886\u53d6\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u9886\u53d6"):(b.default.openWaitingDialog("\u63d0\u793a","\u9886\u53d6\u4e2d..."),this.sendMsgToSdk({cmd:"/c/useCdkey",data:{userId:_.default.getUid(),cdkStr:e,channelId:0}}))},t.clickNativeAdv=function(e,t,i){void 0===t&&(t="{}"),this.sendMsgToSdk({cmd:"/c/clickNativeAdv",data:{advId:e,userData:t,tag:i}})},t.closeAdv=function(e,t){void 0===t&&(t="{}"),this.sendMsgToSdk({cmd:"/c/closeAdv",data:{advId:e,userData:t}})},t.closeNativeAdv=function(e,t,i){void 0===t&&(t="{}");var n=i?1:0;this.sendMsgToSdk({cmd:"/c/closeNativeAdv",data:{advId:e,closeType:n,userData:t}})},t.userLogin=function(e){void 0===e&&(e="{}"),console.log("mgrsdk userLogin"),t.sendMsgToSdk({cmd:"/c/userLogin"})},t.userLoginReport=function(e,i,n){t.sendMsgToSdk({cmd:"/c/userLoginReport",data:{playerLevel:e,coin:i,userData:n}})},t.userIsLogin=function(){t.sendMsgToSdk({cmd:"/c/userIsLogin"})},t.loginOut=function(){t.sendMsgToSdk({cmd:"/c/loginOut"})},t.saveRankData=function(e,i,n,o,r){t.sendMsgToSdk({cmd:"/c/saveRankData",startTime:e,endTime:i,rankName:n,score:o,order:r})},t.getRankListSdk=function(e,i,n,o){console.log("getRankListSdk"),t.sendMsgToSdk({cmd:"/c/getRankData",data:{dataNum:e,rankName:i,order:n,rankType:o}})},t.openJump=function(e,t,i){void 0===i&&(i=0),console.info("mgrSdk openJump"),this.sendMsgToSdk({cmd:"/c/openJump",data:{gameIndex:e,type:t,count:i}})},t.jumpOtherGame=function(e,t,i){void 0===i&&(i="{}"),console.log("mgrSdk jumpOtherGame"),this.sendMsgToSdk({cmd:"/c/jumpOtherGame",data:{gameIndex:e,type:t,userData:i}})},t.openCrossRecommend=function(e,t,i){void 0===i&&(i=0),console.log("mgrSdk openCrossRecommend"),this.sendMsgToSdk({cmd:"/c/openRecommendation",data:{typeId:i,style:{left:e,top:t}}})},t.closeCrossRecommend=function(){console.log("mgrSdk closeCrossRecommend"),this.sendMsgToSdk({cmd:"/c/closeRecommendation",data:null})},t.saveServerRecord=function(e){console.log("mgrSdk saveServerRecord"),this.sendMsgToSdk({cmd:"/c/saveUserData",data:{userData:e}})},t.getServerRecord=function(){console.log("mgrSdk getServerRecord"),this.sendMsgToSdk({cmd:"/c/getUserData",data:null})},t.getUserInfoMsg=function(){this.sendMsgToSdk({cmd:"/c/getUserInfoMsgResult"})},t.setClipboardData=function(e,t){void 0===t&&(t="{}"),this.sendMsgToSdk({cmd:"/c/setClipboardData",data:{clipboardData:e,userData:t}})},t.getClipboardData=function(e){void 0===e&&(e="{}"),this.sendMsgToSdk({cmd:"/c/getClipboardData",data:{userData:e}})},t.statisCommonEvent=function(e,i,n){t.commonEvent(e,i,n)},t.parseRequestToUlsdk5=function(e){var t=e.cmd,i=this.getUlsdk5CmdByUlsdk6CmdForRequest(t);if(!i)return e;var n=e.data||{};if("setVersion"==i);else if("/c/openPay"==i){var o=m.default.getShopIdByPayId(n.payId);n.payInfo={payId:n.payId,shopId:o},n.userInfo=n.userData}else if("/c/megadataServer"==i)switch(n[0]){case"gameLevelStart":i="/d/gameLevelStart",n={levelName:n[1]||""};break;case"gameLevelComplete":i="/d/gameLevelComplete",n={levelName:n[1]||"",isPass:n[2]||"",reason:n[3]||""};break;case"gameCoinLost":i="/d/gameCoinLost";var r=n[1].toString();n={reason:n[3]||"",coinName:r||"",lostNum:n[2]||0,totalNum:0};break;case"gameCoinAdd":i="/d/gameCoinAdd",r=n[1].toString(),n={reason:n[3]||"",coinName:r||"",gainNum:n[2]||0,totalNum:0};break;case"itemBuy":i="/d/itemBuy",o=parseInt(n[1]);var a=p.default.get("shop_template_db",o),s=parseInt(n[2])||0,l=a.price*s,d=p.default.get("item_template_db",a.priceUnit);n={goodsName:a.name||"",goodsType:a.category.toString(),buyAmount:s,lostCoinNum:l,coinName:d.name,buyLocation:n[3]||""};break;case"buyAction":break;case"commonEvent":case"commonEventMultiField":i="/d/commonEvent",n={eventName:n[1]||""}}else if("/adv/openAdv"==i){var c=JSON.parse(n.userData)||{},u=c.adEventId,h=p.default.get("ad_event_db",u)||{},f=this.getUlsdk5TypeStrByUlsdk6AdvId(n.advId);n.type=f,n.displayTime=h.displayTime>0&&h.displayTime||null,n.gravity=""!=h.gravity&&h.gravity||null,n.userData=JSON.stringify(c),n.advId=n.advId||"",n.nativeType=h.nativeType||null,n.code=h.code||null}return e.data=n,e.cmd=i,e},t.parseResponseToUlsdk6=function(e){var t=e.cmd;if(!t)return e;var i=this.getUlsdk6CmdByUlsdk5CmdForResponse(t);if(!i)return e;var n=e.data||{};if("/c/channelInfoResult"==i){n.copInfo=n.configInfo;var o={};n.payCode&&l.default.forEachMap(n.payCode,function(e,t){o[e]={payCode:e,proName:t.proName,price:t.price}})}else if("/c/payResult"==i||"/c/prePayResult"==i){var r=n.payData||{};n.payId=r.payInfo.payId,n.userData=r.userInfo}else if("/c/openAdvResult"==i){n.code=1==n.code?1:0;var a=(JSON.parse(n.userData||"[]")||{}).adEventId||0,s=p.default.quietGet("ad_event_db",a);n.advId=s&&s.advId||0}return e.data=n,e.cmd=i,e},t.getUlsdk6CmdByUlsdk5CmdForResponse=function(e){return{"/c/channelInfoResult":"/c/channelInfoResult","/c/payResult":"/c/payResult","/c/prePayResult":"/c/prePayResult","/cdk/useCdkey":"/c/useCdkey","/adv/advShowResult":"/c/openAdvResult","/d/exitGame":"/c/exitGame"}[e]},t.getUlsdk5CmdByUlsdk6CmdForRequest=function(e){return{"/c/setVersion":"setVersion","/c/openPay":"/c/openPay","/c/exitGame":"/d/exitGame","/c/megadataServer":"/c/megadataServer","/c/useCdkey":"/cdk/useCdkey","/c/openAdv":"/adv/openAdv"}[e]},t.getUlsdk5TypeStrByUlsdk6AdvId=function(e){switch(e){case u.ADV_ID.intert:return"interstitial";case u.ADV_ID.video:return"video";case u.ADV_ID.embed:return"";case u.ADV_ID.banner:return"banner";case u.ADV_ID.h5:return"urladv"}return""},t.sdkback_followOfficialAccountResult=function(e){1==e.code?(this.followState=c.FOLLOW_STATE.FOLLOWED,this.sendMsg("FOLLOW_OFFICIAL_ACCOUNT_SUC",e),t.commonEvent(27002,"\u5173\u6ce8\u5956\u52b1","1")):(b.default.showMsgTip("\u6ca1\u6709\u5173\u6ce8\u6210\u529f\u54e6\uff0c\u8bf7\u91cd\u65b0\u5173\u6ce8"),t.commonEvent(27002,"\u5173\u6ce8\u5956\u52b1","0"))},t.sdkback_getFollowOfficialAccountStateResult=function(e){var t=e.code,i=e.state;1==t&&(this.followState=i,console.log("\u5173\u6ce8\u72b6\u6001",this.followState),this.sendMsg("GET_FOLLOW_OFFICIAL_ACCOUNT_STATE_SUC",e))},t.sdkback_showPointDebugInfo=function(e){var t=e.state;console.log("\u6253\u70b9\u72b6\u6001",t),this.sendMsg("MSG_SHOW_POINT_DEBUG_INFO",e)},t.openGrid=function(e,t,i,n,o,r){console.log("mgrsdk openGrid====",e,t,i,n),this.sendMsgToSdk({cmd:"/c/openGridAd",data:{userData:{adEventId:i},style:{x:e,y:t,width:o,height:r},type:n}})},t.closeGridAd=function(e){console.log("mgrsdk closeGridAd===",e),this.sendMsgToSdk({cmd:"/c/closeGridAd",data:{userData:{},type:e}})},t.getRandomName=function(){return"\u73a9\u5bb6"+l.default.random(1e6,9999999)},t.getPlayerName=function(){var e=t.nickName;return e||(e=y.default.getData("player_name")),e||(e=this.getRandomName()),y.default.setData("player_name",e),e},t.sdkVersion=function(){return d.ulsdk.VERSION},t.initSdk=function(e){d.ulsdk.initSdk(e)},t.login=function(e){d.ulsdk.login(e)},t.loadRemoteConfig=function(){var e=this;d.ulsdk.loadRemoteConfig(function(i){i&&(console.log("mgrSdk.loadRemoteConfig.config===",i),console.log("mgrSdk.loadRemoteConfig.copInfo===",i.copInfo),g.default.onReceiveSdkCop(i.copInfo),f.default._isPayEnabled=i.isSupportPay,f.default._isSupportRecordShare=i.isSupportRecordShare,f.default._isSupportInstallShortcut=i.isSupportInstallShortcut,f.default._isSupportFollowOfficialAccount=i.isSupportFollowOfficialAccount,f.default._isShareEnabled=i.isSupportNormalShare,f.default._isSupportFollowOfficialAccount=i.isSupportFollowOfficialAccount,f.default._isSupportFindMinigames=i.isSupportFavoriteGuide,f.default._isSupportVibrate=i.isSupportVibrate,f.default._isShowUrlAdIcon=i.isSupportOpenUrl,f.default._isSupportInviteComment=i.isSupportInviteComment,f.default._isJumpLeisureEnabled=i.isSupportJumpLeisureEnabled,m.default.setSdkPayInfo(i.payInfo),_.default.setUid(e.getLocalConfig().uuid),c.default.packageVersion=e.getLocalConfig().packageVersion,c.default.ulsdkVersion=e.getLocalConfig().ulsdkVersion,f.default.setChannelName(e.getLocalConfig().appName),t.uuid=e.getLocalConfig().uuid,f.default._isSupportRecordShare&&C.default.setRecorder(),e.sendMsg("MSG_SDK_CHANNEL_INFO_RESULT"))})},t.getLocalConfig=function(){return d.ulsdk.getLocalConfig()},t.setOnShowListener=function(e){d.ulsdk.onShow(e)},t.setOnHideListener=function(e){d.ulsdk.onHide(e)},t.openPay=function(e){var t=this;b.default.openWaitingDialog("\u63d0\u793a","\u652f\u4ed8\u4e2d...");var i={payId:e,callback:function(i){var n=i.bSuccess;b.default.closeWaitingDialog(),t.sendMsg("MSG_SDK_PAY_RESULT",{payId:e,bSuccessful:n})}};d.ulsdk.openPay(i)},t.reOpenPay=function(e){d.ulsdk.reOpenPay(e)},t.setPrePayListener=function(){var e=this;d.ulsdk.setPrePayListener(function(t){var i=t.payId;e.sendMsg("MSG_SDK_PRE_PAY_RESULT",{payId:i,bSuccessful:!0}),e.deliverGoodsEvent({payId:t.payId,orderId:t.orderId})})},t.deliverGoodsEvent=function(e){d.ulsdk.deliverGoodsEvent(e)},t.setResumeSoundListener=function(){d.ulsdk.setResumeSoundListener(function(){S.default.resumeSound("sdk")})},t.setPauseSoundListener=function(){d.ulsdk.setPauseSoundListener(function(){S.default.pauseSound("sdk")})},t.statisOnStageStart=function(e,t){var i={levelName:e,reason:t,bNewGuide:v.default.isGuiding()};return d.ulsdk.levelStart(i)},t.statisOnStageEnd=function(e,t,i){var n={levelName:e,bSuccess:1==t,reason:i,bNewGuide:v.default.isGuiding()};return d.ulsdk.levelComplete(n)},t.coinChange=function(e,t,i){var n={coinType:e.toString(),bAdd:t>0,bNewGuide:v.default.isGuiding(),changeNumber:t,reason:i};return d.ulsdk.coinChange(n)},t.itemBuy=function(e,t,i){var n={goodsName:e.toString(),goodsNumber:t,reason:i,bNewGuide:v.default.isGuiding()};return d.ulsdk.itemBuy(n)},t.buyAction=function(e,t,i){var n={result:i,produceName:t,reason:e,bNewGuide:v.default.isGuiding()};return d.ulsdk.buyAction(n)},t.commonEvent=function(e,t,i){var n={eventId:e,param1:t,param2:i,bNewGuide:v.default.isGuiding()};return d.ulsdk.commonEvent(n)},t.statisVideoPointEvent=function(e,t){var i={advId:p.default.get_from_ad_event_db(e).advId,status:t,bNewGuide:v.default.isGuiding()};return d.ulsdk.videoPointEvent(i)},t.patchInfo=function(e){return d.ulsdk.patchInfo(e)},t.setStorage=function(e){d.ulsdk.setStorage(e)},t.setStorageSync=function(e){return d.ulsdk.setStorageSync(e)},t.getStorage=function(e,t){d.ulsdk.getStorage(e,t)},t.getStorageSync=function(e){return d.ulsdk.getStorageSync(e)},t.removeStorage=function(e,t){d.ulsdk.removeStorage(e,t)},t.removeStorageSync=function(e){return d.ulsdk.removeStorageSync(e)},t.clearStorage=function(e){d.ulsdk.clearStorage(e)},t.clearStorageSync=function(){return d.ulsdk.clearStorageSync()},t.setClearStorageListener=function(e){d.ulsdk.setClearStorageListener(e)},t.setCoverStorageListener=function(e){d.ulsdk.setCoverStorageListener(e)},t.getCloudStorage=function(e){d.ulsdk.getCloudStorage(e)},t.setCloudStorage=function(e){d.ulsdk.setCloudStorage(e)},t.wipeAccount=function(e){d.ulsdk.wipeAccount(e)},t.showPrivacy=function(e){d.ulsdk.showPrivacy(e)},t.openPermissionSetting=function(e){d.ulsdk.openPermissionSetting(e)},t.openAdvancedSetting=function(){d.ulsdk.openAdvancedSetting(function(){})},t.setJumpNewGuideListener=function(e){d.ulsdk.setJumpNewGuideListener(e)},t.openInviteComment=function(){d.ulsdk.openInviteComment(function(){})},t.openShare=function(){var e=this;d.ulsdk.openShare(function(t){var i=t.bSuccess,n=i?1:0;e.sendMsg("MSG_SDK_SHARE_RESULT",{bSuccessful:i,code:n,msg:""})})},t.openAdv=function(e,t){var i=this;void 0===t&&(t="{}");var n=p.default.get_from_ad_event_db(e),o=n.advId;console.log("mgrSdk.openAdv.advId===",o);var r={advId:o,onShow:function(){console.log("mgrSdk.openAdv.onShow....",o)},onError:function(){console.log("mgrSdk.openAdv.onError....",o);var e={userData:t,code:0};i.sendMsg("MSG_SDK_OPEN_ADV_RESULT",e)},onClick:function(){console.log("mgrSdk.openAdv.onClick....",o);var e={userData:t,code:1};i.sendMsg("MSG_SDK_CLICK_ADV_RESULT",e)},onClose:function(){console.log("mgrSdk.openAdv.onClose....",o);var e={userData:t,code:0};i.sendMsg("MSG_SDK_ADV_CLOSE_RESULT",e),i.sendMsg("MSG_SDK_OPEN_ADV_RESULT",e)},onReward:function(){console.log("mgrSdk.openAdv.onReward....",o);var e={userData:t,code:1};i.sendMsg("MSG_SDK_OPEN_ADV_RESULT",e)}},a=d.ulsdk.openAdv(r);return a&&"banner"==n.type&&h.default.addBannerObjDict(e,a),a},t.getAdvState=function(e){d.ulsdk.getAdvState(e)},t.useCdkey=function(e){var t=this;if(b.default.isWaitingDialogOpened())b.default.showMsgTip("\u9886\u53d6\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u9886\u53d6");else{b.default.openWaitingDialog("\u63d0\u793a","\u9886\u53d6\u4e2d...");var i={cdkStr:e,callback:function(e){var i=e.bSuccess,n=e.data||[];if(b.default.closeWaitingDialog(),i){for(var o=[],r=0;r<n.length;r++){var a=n[r],s=parseInt(a.goodsId),l=a.goodsNum;_.default.addItemAmount(s,l,"cdk"),o.push({itemId:s,amount:l})}t.sendMsg("MSG_SDK_USE_CDK_SUCCESSFUL",{items:o})}}};d.ulsdk.useCdkey(i)}},t.getRecorder=function(){if(f.default._isSupportRecordShare)return d.ulsdk.getRecorder();console.warn("\u5f53\u524d\u4e0d\u652f\u6301\u5f55\u5c4f\u5206\u4eab...")},t.shareGameVideo=function(e){d.ulsdk.shareGameVideo(e)},t.setRankData=function(e){d.ulsdk.setRankData(e)},t.getRankDataList=function(e){d.ulsdk.getRankDataList(e)},t.addGameToMyFavorite=function(e){d.ulsdk.addGameToMyFavorite(e)},t.getChannelUserInfo=function(e){d.ulsdk.getChannelUserInfo(e)},t.setAppShareListener=function(e){d.ulsdk.setAppShareListener(e)},t.installShortcut=function(){var e=this;d.ulsdk.installShortcut(function(t){var i=t.bSuccess;e.sendMsg("MSG_SDK_INSTALL_SHORTCUT_RESULT",{code:i?1:0,bSuccessful:i,msg:"",userData:null})})},t.getShortcutState=function(){var e=this;f.default._isSupportInstallShortcut?d.ulsdk.getShortcutState(function(t){var i=t.state;e.sendMsg("MSG_SDK_GET_SHORTCUT_STATE_RESULT",{state:i})}):console.warn("\u5f53\u524d\u4e0d\u652f\u6301\u6dfb\u52a0\u684c\u9762...")},t.setCheckDebugWhiteUserListener=function(e){d.ulsdk.setCheckDebugWhiteUserListener(e)},t.setChangePatchInfoListener=function(e){d.ulsdk.setChangePatchInfoListener(e)},t.getJoinGroupNum=function(e){d.ulsdk.getJoinGroupNum(e)},t.joinGroup=function(e){d.ulsdk.joinGroup(e)},t.openUrl=function(e){d.ulsdk.openUrl(e)},t.phoneVibrate=function(e,t,i){void 0===e&&(e=d.PhoneVibrateType.short),void 0===t&&(t=d.PhoneVibrateIntensity.medium),void 0===i&&(i=function(){});var n={type:e,intensity:t,callback:i};d.ulsdk.phoneVibrate(n)},t.getFollowOfficialAccountState=function(){var e=this;d.ulsdk.getFollowOfficialAccountState(function(t){var i=t.bSuccess,n=t.state;i&&(e.followState=n,console.log("\u5173\u6ce8\u72b6\u6001",e.followState),e.sendMsg("GET_FOLLOW_OFFICIAL_ACCOUNT_STATE_SUC",t))})},t.followOfficialAccount=function(){var e=this;d.ulsdk.followOfficialAccount(function(i){i.bSuccess?(e.followState=c.FOLLOW_STATE.FOLLOWED,e.sendMsg("FOLLOW_OFFICIAL_ACCOUNT_SUC",i),t.commonEvent(27002,"\u5173\u6ce8\u5956\u52b1","1")):(b.default.showMsgTip("\u6ca1\u6709\u5173\u6ce8\u6210\u529f\u54e6\uff0c\u8bf7\u91cd\u65b0\u5173\u6ce8"),t.commonEvent(27002,"\u5173\u6ce8\u5956\u52b1","0"))})},t.jumpToShareVideoView=function(e){d.ulsdk.jumpToShareVideoView(e)},t.getSubscribeState=function(e){d.ulsdk.getSubscribeState(e)},t.addSubscribe=function(e){d.ulsdk.addSubscribe(e)},t.jumpLeisureSubject=function(){d.ulsdk.jumpLeisureSubject(function(){})},t.checkTimeChange=function(e){d.ulsdk.checkTimeChange(e)},t.checkNetwork=function(e){d.ulsdk.checkNetwork(e)},t.getUserInfoByIdInRank=function(e){d.ulsdk.getUserInfoByIdInRank(e)},t.getUserInfoListByRankId=function(e){d.ulsdk.getUserInfoListByRankId(e)},t.reportUserInfoInRank=function(e){d.ulsdk.reportUserInfoInRank(e)},t.modifyScoreByArray=function(e){d.ulsdk.modifyScoreByArray(e)},t.getUserNumInRank=function(e){d.ulsdk.getUserNumInRank(e)},t.contentSecurityCheck=function(e){d.ulsdk.contentSecurityCheck(e)},t.DEBUG=!0,t.bInit=!0,t.__back_prompt_dialog=null,t.bShowStatisticsInfo=!1,t.baseChannelInfo=null,t.uuid="0",t.cmdCallbacks={},t.followState=2,t}(s.default);r.default=I,cc._RF.pop()},{}],mgrShader:[function(e,t,i){"use strict";cc._RF.push(t,"4dace++EHhE4KMIei5OY2iS","mgrShader");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Manager"),l=o("mgrDirector"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.setGray=function(e){if(e instanceof cc.Label){var t=e.node.getComponent(cc.LabelOutline);if(!this.textColorCache[e.node.uuid]){var i=null;t&&(i=t.color);var n={color:e.node.color,outlineColor:i};this.textColorCache[e.node.uuid]=n}var o=this.textColorCache[e.node.uuid].color,r=this.textColorCache[e.node.uuid].outlineColor,a=.2126*o.getR()+.7152*o.getG()+.0722*o.getB();return e.node.color=cc.color(a,a,a),void(t&&(a=.2126*r.getR()+.7152*r.getG()+.0722*r.getB(),t.color=cc.color(a,a,a)))}e.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite"))},t.setNormal=function(e){if(e instanceof cc.Label){var t=this.textColorCache[e.node.uuid]||{};e.node.color=t.color||e.node.color;var i=e.node.getComponent(cc.LabelOutline);i&&(i.color=t.outlineColor||i.color)}else e.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))},t.setSprToColor=function(e,t){var i=cc.MaterialVariant.create(l.default.tryGetRes("em/material/sprite_tocolor",cc.Material),e);e.setMaterial(0,i),i.setProperty("toColor",t)},t.textColorCache={},t}(s.default);r.default=d,cc._RF.pop()},{}],mgrShop:[function(e,t,i){"use strict";cc._RF.push(t,"5912dgiR6xC2LqgHfLrNM7b","mgrShop");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("Tools"),c=o("Const"),u=o("mgrAd"),h=o("mgrAlu"),p=o("mgrCfg"),f=o("mgrDirector"),g=o("mgrGuide"),v=o("mgrPlayer"),_=o("mgrRecord"),y=o("mgrSdk"),m=o("mgrTip"),S=cc._decorator.ccclass,b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_SDK_PAY_RESULT:this.onMsgSdkPayResult,MSG_SDK_PRE_PAY_RESULT:this.onMsgSdkPrePayResult,MSG_SDK_USE_CDK_SUCCESSFUL:this.onMsgSdkUseCdkSuccessful})},t.loadRecord=function(){e.loadRecord.call(this);var t=_.default.getData("shop")||{};this._lastTime=t._lastTime||0},t.saveRecord=function(){e.saveRecord.call(this);var t={_lastTime:this._lastTime};_.default.setData("shop",t)},t.getAllShopItemListByCategory=function(e){if(!e)return[];for(var t={},i=0;i<e.length;i++){var n=e[i];t[n]=!0}var o=[];return p.default.forDb_from_shop_template_db(function(e,i){t[i.category]&&h.default.check(i.aluId)&&o.push(i)}),o=d.default.sortArrayByField(o,["-order","id"])},t.requestBuy=function(e){var t=p.default.get_from_shop_template_db(e);if(t){var i=t.price,n=t.priceUnit;if(0!=n){if(!p.default.get_from_item_template_db(n))return!1;v.default.getItemAmount(n)<i?(this.tipItemNotEnough(n),this.tryOpenShop(n)):(v.default.addItemAmount(n,-i,"\u8d2d\u4e70\u6d88\u8017"),this.responseBuy(e))}else y.default.openPay(t.payId)}},t.responseBuy=function(e){var t=p.default.get_from_shop_template_db(e);if(t){for(var i=0;i<t.items.length;i++){var n=t.items[i],o=n[0],r=n[1],a=n[2];v.default.addItemAmount(o,r,"\u8d2d\u4e70"),a||m.default.addGotItemTip(o,r,null)}this.sendMsg("MSG_SHOP_BUY_SUCCESSED",{shopId:e}),y.default.itemBuy(e,1,"")}},t.getShopIdByPayId=function(e){var t;return p.default.forDb_from_shop_template_db(function(i,n){if(n.payId==e)return t=n.id,!0}),t},t.tipItemNotEnough=function(e){void 0===e&&(e=c.default.ITEM_ID_GOLD);var t=p.default.get_from_item_template_db(e);t&&(e==c.default.ITEM_ID_GOLD||c.default.ITEM_ID_DIAMONDS,m.default.showMsgTip(ul.format("[%s]\u4e0d\u8db3",t.name)))},t.tryOpenShop=function(e){void 0===e&&(e=c.default.ITEM_ID_GOLD),g.default.isGuiding()||this.canSupplyItem(e)&&f.default.openDialog("vAdFreeEnergyDialog")},t.canSupplyItem=function(e){return void 0===e&&(e=c.default.ITEM_ID_GOLD),!(e!=c.default.ITEM_ID_ENERGY||!u.default.preCheckAdNoCd("vi_free_energy"))},t.goWidthRouterId=function(e,t){void 0===t&&(t=0),1==e?f.default.warpSceneWithEffect("vStageScene"):2==e?f.default.warpSceneWithEffect("vMakeClothScene"):3==e?f.default.warpSceneWithEffect("vPvpChooseScene"):4==e?f.default.openDialog("vSignDialog"):5==e&&f.default.warpSceneWithEffect("vPvpChooseScene")},t.setSdkPayInfo=function(e){var t=this;d.default.forEachMap(e,function(e,i){t.sdkPayInfo[i.payCode]={payCode:i.payCode,price:i.price,proName:i.proName}})},t.onMsgSdkPayResult=function(e){if(e.bSuccessful){var t=this.getShopIdByPayId(e.payId);this.responseBuy(t),_.default.forceRecord(),y.default.buyAction("",t+"",2)}},t.onMsgSdkPrePayResult=function(e){if(e.bSuccessful){m.default.showMsgTip("\u8865\u53d1\u8ba2\u5355...");var t=this.getShopIdByPayId(e.payId);this.responseBuy(t),_.default.forceRecord(),y.default.buyAction("\u8865\u53d1\u8ba2\u5355",t+"",2)}},t.onMsgSdkUseCdkSuccessful=function(e){if(e&&e.items)for(var t=0;t<e.items.length;t++){var i=e.items[t];m.default.addGotItemTip(i.itemId,i.amount)}},t.sdkPayInfo={},t._lastTime=0,s([S],t)}(l.default);r.default=b,cc._RF.pop()},{}],mgrSound:[function(e,t,i){"use strict";cc._RF.push(t,"d62efGiv1FBWZE+W4nbmQMF","mgrSound");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0}),r.SOUND_TYPE_EFFECT=r.SOUND_TYPE_MUSIC=void 0;var l=o("Manager"),d=o("Timer"),c=o("Tools"),u=o("mgrCfg"),h=o("mgrDirector"),p=o("mgrRecord"),f=cc._decorator.ccclass;r.SOUND_TYPE_MUSIC=1,r.SOUND_TYPE_EFFECT=2;var g=!(void 0===window.KSGameGlobal),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return a(t,e),i=t,t.onLoad=function(){var t=this;e.onLoad.call(this),this.loadRecord(),g||(cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("cc.game.EVENT_HIDE"),i.pauseSound("mgrSound")}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.log("cc.game.EVENT_SHOW"),i.resumeSound("mgrSound")})),this.registerListeners({MSG_SCENE_LOADED:this.onMsgSceneLoaded}),this._createRootNode(),this._createMusicSource(),g||d.default.callLoop(1,function(){t._musicSource&&t._bMusicPlaying&&t._musicSource&&t._musicSource.clip&&t._musicSource.getCurrentTime()+2>=t._musicSource.getDuration()&&t._musicSource.rewind()},!0)},t.loadRecord=function(){e.loadRecord.call(this);var t=p.default.getData("sound")||{};this.musicVolume=null!=t.musicVolume?t.musicVolume:1,this.effectVolume=null!=t.effectVolume?t.effectVolume:1,this.setMusicVomue(this.musicVolume,!0),this.setEffectVolume(this.effectVolume,!0)},t.saveRecord=function(){e.saveRecord.call(this);var t={musicVolume:this.musicVolume,effectVolume:this.effectVolume};p.default.setData("sound",t)},t.onMsgSceneLoaded=function(){this._musicSource&&(cc.log("mgrSound.onMsgSceneLoaded",this._musicSource),this.playingMusicAudioClip&&!this._musicSource.isPlaying&&this._musicSource.play())},t._createRootNode=function(){var e=cc.director.getScene().getChildByName("sound");e||((e=new cc.Node).name="sound",e.parent=cc.director.getScene(),cc.game.addPersistRootNode(e)),this._nodeRoot=e},t._createMusicSource=function(){var e=new cc.Node;e.parent=this._nodeRoot;var t=e.addComponent(cc.AudioSource);this._musicSource=t},t._playMusic=function(e,t){if(this._musicSource){var i=this._musicSource;i.clip=t,i.loop=!0,i.volume=this.musicVolume,i.setCurrentTime(0),i.play(),this.playingMusicAudioClip=t,this._bMusicPlaying=!!this.musicVolume}else this.playingMusicAudioClip=null},t._stopMusic=function(e){this._musicSource&&this._musicSource.stop(),null!=this.playingMusicAudioClip&&(this.playingMusicAudioClip=null),e||(this.playingMusicSoundId=null),this._bMusicPlaying=!1},t._playEffect=function(e,t,i){void 0===i&&(i=!1);var n=this._effectSources[e];n||(n=[],this._effectSources[e]=n);for(var o=null,r=0;r<n.length;r++){var a=n[r];if(!a.isPlaying){o=a;break}}if(!o){var s=new cc.Node;s.parent=this._nodeRoot,o=s.addComponent(cc.AudioSource),n.push(o)}o.clip=t,o.loop=!!i,o.volume=this.effectVolume,o.setCurrentTime(0),o.play()},t._stopEffects=function(){c.default.forEachMap(this._effectSources,function(e,t){for(var i=0;i<t.length;i++)t[i].stop()})},t._stopEffect=function(e){var t=this._effectSources[e];if(t)for(var i=0;i<t.length;i++){var n=t[i];n.isPlaying&&n.stop()}},t.play=function(e){var t=this;cc.log("play",e);var i=u.default.get("sound_db",e);if(i)if(i.type==r.SOUND_TYPE_MUSIC){if(e==this.playingMusicSoundId){if(null!=this.playingMusicAudioClip)return;if(this.bMusicLoading)return void cc.log("mgrSound.play music loading",e)}if(null!=this.playingMusicAudioClip&&this._stopMusic(!1),this.playingMusicSoundId=e,this.musicVolume>0)if(o=this.allAudioClips[e])this._playMusic(e,o);else{var n=this.getUrl(e);if(!n)return cc.warn("mgrSound.play load url not found faild!",i.id),void(this.playingMusicSoundId=null);this.bMusicLoading=!0,h.default.loadRes(n,cc.AudioClip,function(i,o){if(t.bMusicLoading=!1,i)return cc.warn("mgrSound.play load audio faild!",n),void(t.playingMusicSoundId=null);t.allAudioClips[e]=o,e==t.playingMusicSoundId&&t.musicVolume>0&&t._playMusic(e,o)})}}else{if(this.effectVolume<=0)return;var o;if(i.bStopAllEffect&&this._stopEffects(),o=this.allAudioClips[e])this._playEffect(e,o,i.bLoop);else{var a=this.getUrl(e);if(!a)return;h.default.loadRes(a,cc.AudioClip,function(n,o){n||(t.allAudioClips[e]=o,t._playEffect(e,o,i.bLoop))})}}},t.stop=function(e){if(this.allAudioClips[e]){var t=u.default.get("sound_db",e);t&&(t.type==r.SOUND_TYPE_MUSIC?this._stopMusic(!1):this._stopEffect(e))}},t.getUrl=function(e){var t=u.default.get("sound_db",e);if(!t)return"";var i=t.fileName.split(".");return 2!=i.length?t.fileName:i[0]},t.stopAll=function(){this._stopEffects(),this._stopMusic(!1)},t.pauseSound=function(e){console.info("\u6682\u505c\u58f0\u97f3"),this.pauseSoundTagDict[e]=!0,this.lastMusicVol||(this.lastMusicVol=this.getMusicVolmue()),this.lastSoundVol||(this.lastSoundVol=this.getEffectVolume()),this.setMusicVomue(0,!0),this.setEffectVolume(0,!0)},t.resumeSound=function(e){for(var t in console.info("\u6062\u590d\u58f0\u97f3"),this.pauseSoundTagDict[e]=!1,this.pauseSoundTagDict)if(this.pauseSoundTagDict[t])return;this.lastMusicVol&&(this.setMusicVomue(this.lastMusicVol,!0),this.lastMusicVol=null),this.lastSoundVol&&(this.setEffectVolume(this.lastSoundVol,!0),this.lastSoundVol=null)},t.getPlayingMusicSoundId=function(){return this.playingMusicSoundId},t.getMusicVolmue=function(){return this.musicVolume},t.setMusicVomue=function(e,t){this.musicVolume=e,e<=0?this._stopMusic(!0):this.playingMusicSoundId&&this.play(this.playingMusicSoundId),t||this.saveRecord()},t.getEffectVolume=function(){return this.effectVolume},t.setEffectVolume=function(e,t){this.effectVolume=e,e<=0&&this._stopEffects(),t||this.saveRecord()},t.preload=function(e,t){var i=this,n=this.getUrl(e);n&&!cc.loader.getRes(n,cc.AudioClip)?h.default.loadRes(n,cc.AudioClip,function(n,o){n||(i.allAudioClips[e]=o),t&&t(e)}):t&&t(e)},t.isSoundPlaying=function(e){var t=u.default.get("sound_db",e);if(!t)return!1;if(t.type==r.SOUND_TYPE_MUSIC)return this._musicSource&&this._musicSource.isPlaying||!1;var i=this._effectSources[e];if(!i)return!1;if(i.length<=0)return!1;for(var n=0;n<i.length;n++)if(i[n].isPlaying)return!0;return!1},t.playingMusicSoundId=null,t.playingMusicAudioClip=null,t.bMusicLoading=!1,t.musicVolume=1,t.effectVolume=1,t.allAudioClips={},t.lastMusicVol=null,t.lastSoundVol=null,t._nodeRoot=null,t._musicSource=null,t._effectSources={},t.pauseSoundTagDict={},i=s([f],t)}(l.default);r.default=v,cc._RF.pop()},{}],mgrText:[function(e,t,i){"use strict";cc._RF.push(t,"ef6686BEbZOV7JvEBZVSsF+","mgrText");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("mgrCfg"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this.textMapping={},this.processTextDb()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.processTextDb=function(){var e=this;d.default.forDb("text_db",function(t,i){e.textMapping[t]=i.text})},t.get=function(e){var t=this.textMapping[e];return t||(t=e),t},t.format=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=this.textMapping[e];return n?ul.format.apply(ul,s([n],t)):ul.format("%%s%",e)},t}(l.default);r.default=c,cc._RF.pop()},{}],mgrTip:[function(e,t,i){"use strict";cc._RF.push(t,"5653cyPaHRLGYVjQSV6Sg4n","mgrTip");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=o("Timer"),c=o("Tools"),u=o("Const"),h=o("LayerColor"),p=o("mgrCfg"),f=o("mgrChannel"),g=o("mgrDirector"),v=o("mgrGuide"),_=o("mgrPool"),y=o("mgrSdk"),m=cc._decorator.ccclass,S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return a(t,e),i=t,t.onLoad=function(){e.onLoad.call(this),this.msgTipQueue=[],this.iconTipQueue={}},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.showPicker=function(){},t.alertPrompt0=function(e,t){return this._alertPrompt(e,t,[],[])},t.alertPrompt=function(e,t,i,n){return this._alertPrompt(e,t,[i],[n])},t.alertPrompt2=function(e,t,i,n,o,r,a){return void 0===a&&(a=!1),this._alertPrompt(e,t,[i,n],[o,r],a)},t.alertPrompt3=function(e,t,i,n,o,r,a,s){return this._alertPrompt(e,t,[i,n,o],[r,a,s])},t._alertPrompt=function(e,t,i,n,o){void 0===o&&(o=!1);var r=g.default.createView("vPromptDialog",{title:e,content:t,btnTexts:i,callbacks:n,bAd:o});return r.openDialog(),r},t.alertCloseablePrompt=function(e,t,i,n,o,r){void 0===r&&(r=!1);var a=null;return 1==y.default.getCopNumberValueByKey("b_native_banner_button_show11")?(a=g.default.createView("vPromptDialogWithNativeBannerButton",{title:e,content:t,btnText:n,callback:o,bAd:r})).openDialog():a=this.alertPrompt2(e,t,i,n,null,o),a},t.showMsgTip=function(e,t,i,n,o){t=t||cc.v2(.5*g.default.width,.75*g.default.height);for(var r=0;r<this.msgTipQueue.length;r++)if(this.msgTipQueue[r].text==e)return;if(this.msgTipQueue.push({text:e,startPosition:t,color:i,outlineColor:n,deltaY:o}),!this.msgTipTimer){var a=new d.default(1,-1,this._onMsgTipTimerLoop.bind(this));a.start(!0),this.msgTipTimer=a,this._onMsgTipTimerLoop(a)}},t._onMsgTipTimerLoop=function(e){if(this.msgTipQueue.length<=0)return e.stop(),void(this.msgTipTimer=null);var t=this.msgTipQueue.shift(),i=g.default.createView("vMsgTip");i.setText(t.text),t.color&&i.setColorEx(t.color,t.outlineColor),i.play(t.startPosition,t.deltaY)},t.getTipRootNode=function(){var e=g.default.getUIRoot(),t=e.getChildByName("__tip_root__");return cc.isValid(t)||((t=new cc.Node).parent=e,t.name="__tip_root__",t.zIndex=u.default.GLOBAL_ORDER_TIP),t},t.getTipIconRootNode=function(){var e=g.default.getUIRoot(),t=e.getChildByName("__tip_icon_root__");return cc.isValid(t)||((t=new cc.Node).parent=e,t.name="__tip_icon_root__",t.zIndex=u.default.GLOBAL_ORDER_TIP_ICON),t},t.addGotItemTip=function(e,t,i,n){this.defaultGotItemQueue.push({itemId:e,amount:t,amountSteps:i,customerContext:n}),this._tryShowGotItemDialog()},t.insertGotItemTip=function(e,t,i,n){this.defaultGotItemQueue.unshift({itemId:e,amount:t,amountSteps:i,customerContext:n}),this._tryShowGotItemDialog()},t.addGotItemTipGroup=function(e){var t=this,i=null;c.default.forEachMap(this.gotItemQueues,function(e,n){if(n!=t.defaultGotItemQueue&&n.length<=0)return i=n,!0}),i||(i=[],this.gotItemQueues.push(i));for(var n=0;n<e.length;n++){var o=e[n];i.push(o)}this._tryShowGotItemDialog()},t._tryShowGotItemDialog=function(){for(var e=this,t=function(t){var n=i.gotItemQueues[t];if(!i.gotItemDialogShowingFlags[t]&&n.length>0){i.gotItemDialogShowingFlags[t]=!0;var o=n.shift(),r={};o.customerContext&&c.default.forEachMap(o.customerContext,function(e,t){r[e]=t}),r.itemId=o.itemId,r.amount=o.amount,r.amountSteps=o.amountSteps,r.fOnDialogClose=function(){e.gotItemDialogShowingFlags[t]=!1,o.customerContext&&"function"==typeof o.customerContext.fOnDialogClose&&o.customerContext.fOnDialogClose(),e._tryShowGotItemDialog()},g.default.openDialog("vGotItemDialog",r)}},i=this,n=0;n<this.gotItemQueues.length;n++)t(n)},t.isAllGotItemTipDisplayed=function(){var e=!1;if(c.default.forEachMap(this.gotItemDialogShowingFlags,function(t,i){if(i)return e=!0,!0}),e)return!1;for(var t=0;t<this.gotItemQueues.length;t++)if(this.gotItemQueues[t].length>0)return!1;return!0},t.showItemDetailDialog=function(e,t,i){null==t&&(t=1),(i=i||{}).itemId=e,i.amount=t,g.default.openDialog("vItemDetailDialog",i)},t.isWaitingDialogOpened=function(){return null!=this.waitingDialog},t.openWaitingDialog=function(e,t,i){var n=this;if(!this.isWaitingDialogOpened()){var o=g.default.createView("vPromptDialog",{title:e||"\u63d0\u793a",content:t||"\u8bf7\u7a0d\u5019...",btnTexts:[i||"\u53d6\u6d88"],fOnDialogClose:function(){n.waitingDialog=null}});o.openDialog(!0),this.waitingDialog=o}},t.closeWaitingDialog=function(){this.waitingDialog&&(this.waitingDialog.closeDialog(!0),this.waitingDialog=null)},t.showLoadingTip=function(e,t,i,n){void 0===t&&(t=cc.v2()),void 0===i&&(i=150),void 0===n&&(n=.2);var o=this.__loadingTipRouters.length>0;if(-1==this.__loadingTipRouters.indexOf(e)&&this.__loadingTipRouters.push(e),!o){var r=g.default.createView("vLoadingTip",{delay:n,opacity:i});r.parent=g.default.getRoot(),r.zIndex=u.default.GLOBAL_ORDER_WARP+4,this.__loadingTipNode=r,0!=n&&(r.opacity=0,d.default.callLater(n,function(){r.runAction(cc.fadeIn(.2))},r)),c.default.registerTouchHandler(r,function(){console.log(" touch loading mask ")})}},t.hideLoadingTip=function(e){var t=this.__loadingTipRouters.indexOf(e);if(t>=0&&this.__loadingTipRouters.splice(t,1),!(this.__loadingTipRouters.length>0))return this.__loadingTipNode&&this.__loadingTipNode.destroy(),this.__loadingTipNode=null,!0},t.isShowingLoadingTip=function(){return!!this.__loadingTipNode},t.updateLoadingProgress=function(e){this.isShowingLoadingTip()&&this.__loadingTipNode.setText(e)},t.playParticleOnce=function(e,t,i,n,o){var r=_.default.get("particle",e);if(r)return r.parent=o||this.getTipRootNode(),r.setPosition(r.parent.convertToNodeSpaceAR(cc.v2(t,i))),null!=n&&(r.scale=n),r.setAutoRemoveOnFinish(!0),r},t.playSpineOnce=function(e,t,i,n,o,r){void 0===r&&(r="mov_1");var a=_.default.get("spine",e);a&&(a.parent=o||this.getTipRootNode(),a.setPosition(a.parent.convertToNodeSpaceAR(cc.v2(t,i))),null!=n&&(a.scale=n),a.play(r,!1),a.registerEventCallback(function(e){"cpmplete"==e.name&&(a.removeFromParent(),_.default.put(a),a=null)}))},t.playAnimNodeOnce=function(e,t,i,n,o,r,a){var s=new cc.Node,l=_.default.get("animNode",e);l&&(s.parent=r||this.getTipRootNode(),l.parent=s,s.setPosition(s.parent.convertToNodeSpaceAR(cc.v2(t,i))),n&&(s.scaleX=n),o&&(s.scaleY=o),a&&(s.angle=-a),l.play(),l.registerEventCallback(function(e){"finished"==e.name&&(l.removeFromParent(),s.destroy())}))},t.setCountBadgeValue=function(e,t,i,n,o){void 0===i&&(i=-5),void 0===n&&(n=-5);var r=e.__mark;if(t>0){r||(r=g.default.createView("vMark"),e.addChild(r,99),e.__mark=r),i=i||0,n=n||0,o=o||1;var a=e.getContentSize();r.setPosition(a.width/2*.8+i,a.height/2*.8+n),r.scale=o,r.setCount(t)}else r&&(e.removeChild(r),r.destroy(),e.__mark=null)},t.setBadgeEnabled=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),t?this.addBadge(e,i,n):this.removeBadge(e)},t.addBadge=function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),!e.__sprite_badge){t=t||0,i=i||0,e.getContentSize();var n=g.default.createSpriteNode("2d/ui/common/redPoint.png");n.parent=e,n.zIndex=3e4,n.setPosition(t,i),n.runAction(cc.repeatForever(cc.spawn(cc.sequence(cc.rotateTo(.1,10),cc.rotateTo(.1,-10),cc.rotateTo(.1,10),cc.rotateTo(.1,0)),cc.sequence(cc.moveBy(.1,cc.v2(0,-2)),cc.moveBy(.1,cc.v2(1,0)),cc.moveBy(.1,cc.v2(0,2)),cc.moveBy(.1,cc.v2(-1,0)))))),e.__sprite_badge=n}},t.removeBadge=function(e){e.__sprite_badge&&(e.__sprite_badge.removeFromParent(),e.__sprite_badge=null)},t.showCoinGetEffect=function(e,t,i,n,o){var r=this;void 0===e&&(e=u.default.ITEM_ID_GOLD);var a=Math.ceil(5*Math.random())+5;i&&i>0&&(a=i);for(var s=-1,l=function(){var i=new cc.Node;i.parent=n||g.default.getRoot(),t||(t=i.parent.convertToWorldSpaceAR(cc.v2(0,0)));var a=i.parent.convertToNodeSpaceAR(t);i.setPosition(a),s=-s;var l=cc.v2(a.x+s*c.default.random(60,200),a.y+c.default.random(-30,80)),d=_.default.get("particle","xingguanglizi");d.scale=.2,d.parent=i;var h=new cc.Node;h.parent=i;var f=h.addComponent(cc.Sprite),y=p.default.get_from_item_template_db(e).icon;f.loadSpriteFrame(y,function(){h.setContentSize(36,36)});var m=50;g.default.isDeviceOverHeight()&&(m=100);var S=cc.v2(0,g.default.height/2-m),b=null;switch(e){case u.default.ITEM_ID_GOLD:b=v.default.getGuideNode("vHubScene.nodeGoldIcon");break;case u.default.ITEM_ID_DIAMONDS:b=v.default.getGuideNode("vHubScene.nodeDiamondsIcon")}b&&(S=i.parent.convertToNodeSpaceAR(c.default.getNodeWorldPosAR(b))),o&&(S=i.parent.convertToNodeSpaceAR(o));var C=2*(Math.random()-.5),I=[l,cc.v2(i.position.x/2+200*C,(i.position.y+S.y)/2+100*C),S];i.runAction(cc.sequence(cc.spawn(cc.jumpTo(.4,l,c.default.random(40,70),1),cc.sequence(cc.scaleTo(.1,.2,1.2),cc.scaleTo(.1,1,1)).repeat(2)),cc.callFunc(function(){i.anchorY=0}),cc.spawn(cc.jumpTo(.3,l,25,1),cc.sequence(cc.scaleTo(.15,.7,1.3),cc.scaleTo(.15,1,1))),cc.delayTime(.8*Math.random()),cc.spawn(cc.bezierTo(.8,I),cc.sequence(cc.scaleTo(.1,.12,1.56),cc.scaleTo(.1,1.2,1.2)).repeat(4),cc.sequence(cc.delayTime(.6),cc.fadeOut(.2))),cc.callFunc(function(){e==u.default.ITEM_ID_GOLD&&r.sendMsg("MSG_GOLD_FLY_END"),e==u.default.ITEM_ID_DIAMONDS&&r.sendMsg("MSG_DIAMOND_FLY_END")}),cc.destroySelf()))},d=1;d<=a;d++)l()},t.showCoinGetEffect1=function(e,t,n,o,r){var a=new cc.Node;a.parent=o||g.default.getRoot(),t||(t=a.parent.convertToWorldSpaceAR(cc.v2(0,0)));var s,l=a.parent.convertToNodeSpaceAR(t);a.setPosition(l),e==u.default.ITEM_ID_GOLD&&(s=cc.instantiate(cc.loader.getRes("2d/anim_node/85_jinbi_trail/85_jinbi_trail",cc.Prefab))),e==u.default.ITEM_ID_DIAMONDS&&(s=cc.instantiate(cc.loader.getRes("2d/anim_node/85_zuanshi_trail/85_zuanshi_trail",cc.Prefab))),s.parent=a;var d=50;g.default.isDeviceOverHeight()&&(d=100),n=n||cc.v2(-240,g.default.height/2+d);var h=null;switch(e){case u.default.ITEM_ID_GOLD:h=v.default.getGuideNode("vHubScene.nodeGoldIcon");break;case u.default.ITEM_ID_DIAMONDS:h=v.default.getGuideNode("vHubScene.nodeDiamondsIcon")}h&&(n=a.parent.convertToNodeSpaceAR(c.default.getNodeWorldPosAR(h))),a.runAction(cc.sequence(cc.moveTo(.7,n),cc.callFunc(function(){r&&r();var e=a.parent.convertToWorldSpaceAR(n);i.playAnimNodeOnce("85_jinbi_boom",e.x,e.y)}),cc.fadeOut(.4),cc.destroySelf()))},t.playNodeGhost=function(e,t){void 0===t&&(t=2.5);var i=cc.instantiate(e);i.parent=e.parent;var n=e.scale;i.scale=n*t,i.opacity=150,i.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,1*n),cc.fadeOut(.5)),cc.callFunc(function(){i.destroy()})))},t.screenShot=function(){var e=g.default.fullSize,t=cc.game._renderContext,i=new cc.RenderTexture;i.initWithSize(e.width,e.height,t.STENCIL_INDEX8);var n=g.default.getCanvas().getChildByName("Main Camera").getComponent(cc.Camera),o=n.targetTexture;return n.targetTexture=i,n.render(),n.targetTexture=o,i},t.screenShotNode=function(e,t,i){var n=g.default.getCanvas(),o=n.getChildByName("ScreenShotCamera").getComponent(cc.Camera),r=n.getChildByName("ScreenShotParent"),a=e.parent;e.parent=r;var s=e.x,l=e.y;e.x=0,e.y=0,o.orthoSize=i/2;var d=new cc.RenderTexture,c=cc.game._renderContext;d.initWithSize(t,i,c.STENCIL_INDEX8);var u=o.targetTexture;return o.targetTexture=d,o.render(),o.targetTexture=u,e.parent=a,e.x=s,e.y=l,d},t.playLight=function(e,t,i){void 0===e&&(e=cc.Color.BLACK);var n=this.getTipRootNode(),o=new cc.Node;o.setContentSize(g.default.fullSize),o.parent=n,c.default.registerTouchHandler(o,function(){console.log(" touch loading mask ")});var r=new h.default(e);r.setContentSize(g.default.fullSize),r.parent=n,r.opacity=0,cc.tween(r).to(.2,{opacity:255}).call(function(){t&&t()}).to(.2,{opacity:0}).call(function(){i&&i(),c.default.unregisterTouchHandler(o),o.destroy(),r.destroy()}).start()},t.showGetItems=function(e,t){g.default.openDialog("vGotItemDialog",{ids:e,fOnDialogClose:function(){t&&t()}})},t.showJumpOtherGameBanner=function(e,t,i){void 0===i&&(i=cc.v2(0,0)),f.default.canGameInterPush3(t)&&(this.jumpOtherGameBanner&&cc.isValid(this.jumpOtherGameBanner)||(this.jumpOtherGameBanner=g.default.createView("vGuessYouLike",i),console.log("vGuessYouLike"),this.jumpOtherGameBanner.parent=e))},t.hideJumpOtherGameBanner=function(){this.jumpOtherGameBanner&&cc.isValid(this.jumpOtherGameBanner)&&this.jumpOtherGameBanner.destroy(),this.jumpOtherGameBanner=null},t.showJumpOtherGameVertical=function(e){f.default.canGameInterPush4()&&(g.default.createView("vGuessYouLikeVertical").parent=e)},t.hideJumpOtherGameVertical=function(){},t.showNativeBanner=function(e,t,i){void 0===i&&(i=cc.v2(0,0)),this.nativeAdBanner&&cc.isValid(this.nativeAdBanner)||(this.nativeAdBanner=g.default.createView("vNativeBanner",{adEventId:e}),this.nativeAdBanner.parent=t),this.nativeAdBanner.y=-g.default.height/2+this.nativeAdBanner.height/2+i.y,this.nativeAdBanner.x=i.x,this.nativeAdBanner.active=!0},t.hideNativeBanner=function(){this.nativeAdBanner&&cc.isValid(this.nativeAdBanner)&&this.nativeAdBanner.destroy(),this.nativeAdBanner=null},t.defaultGotItemQueue=[],t.gotItemQueues=[i.defaultGotItemQueue],t.gotItemDialogShowingFlags={},t.waitingDialog=null,t.__loadingTipRouters=[],i=s([m],t)}(l.default);r.default=S,cc._RF.pop()},{}],mgrUnitTest:[function(e,t){"use strict";cc._RF.push(t,"d38b3oLvxpNuaKnX1HT6A6J","mgrUnitTest"),cc._RF.pop()},{}],mgrVideoRecorder:[function(e,t,i){"use strict";cc._RF.push(t,"7352cBigwZOmLMbPavz6o5l","mgrVideoRecorder");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Manager"),l=o("Timer"),d=(o("ULSDK"),o("mgrChannel")),c=o("mgrSdk"),u=o("mgrTip"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),l.default.callLoop(1,this.onTimerLoop.bind(this),!0)},t.onTimerLoop=function(){this.bRecordVideo&&(this.lastRecordVideoTime+=1,this.lastRecordVideoTime>=this.maxRecordTime&&this.stopRecordGameVideo())},t.isOpenVideoRecord=function(){return this.isCopOpenVideoRecord()},t.isCopOpenVideoRecord=function(){return 1==c.default.getCopNumberValueByKey("b_record_video")&&d.default._isSupportRecordShare},t.getLastRecordVideoTime=function(){return this.lastRecordVideoTime||0},t.tryStartRecordGameVideo=function(e,t){void 0===e&&(e=60),void 0===t&&(t="2"),console.log("mgrRecord.tryStartRecordGameVideo===",this.recordStatus,this.recordGameVideoActioningName),this.recordStatus!=this.RECORDING&&this.startRecordGameVideo(e,t)},t.startRecordGameVideo=function(e,t){void 0===t&&(t="2"),console.log("mgrRecord.startRecordGameVideo===",this.recordStatus,this.recordGameVideoActioningName),this.lastRecordVideoTime=0,this.startRecorder(e,t),this.recordGameVideoActioningName="start",this.bRecordVideo=!0},t.stopRecordGameVideo=function(){console.log("mgrRecord.stopRecordGameVideo===",this.recordStatus,this.recordGameVideoActioningName),this.recordStatus!=this.PRE_RECORD&&this.recordStatus!=this.RECORD_FINISH&&(this.lastRecordVideoTime<this.minRecordTime?u.default.showMsgTip("\u5f55\u5236\u65f6\u95f4\u4e0d\u8db3"+this.minRecordTime+"\u79d2\uff0c\u4e0d\u80fd\u591f\u5206\u4eab"):(this.stopRecorder(),this.recordGameVideoActioningName="stop",this.bRecordVideo=!1))},t.pauseRecordGameVideo=function(){console.log("mgrRecord.pauseRecordGameVideo==",this.recordStatus,this.recordGameVideoActioningName),this.pauseRecorder(),this.recordGameVideoActioningName="pause",this.bRecordVideo=!1},t.resumeRecordGameVideo=function(){console.log("mgrRecord.resumeRecordGameVideo==",this.recordStatus,this.recordGameVideoActioningName),this.resumeRecorder(),this.recordGameVideoActioningName="resume",this.bRecordVideo=!0},t.setRecordStatus=function(e){this.recordStatus=e,this.sendMsg("MSG_VIDEO_RECORDER_STATE_CHANGE")},t.getRecordStatus=function(){return this.recordStatus},t.isRecording=function(){return this.bRecordVideo&&this.recordStatus==this.RECORDING},t.canVideoShare=function(){return this.recordStatus==this.RECORD_FINISH&&this.lastRecordVideoTime>=this.minRecordTimeAuto},t.setRecorder=function(){},t.startRecorder=function(){},t.pauseRecorder=function(){},t.resumeRecorder=function(){},t.stopRecorder=function(){},t.shareGameVideo=function(){},t.jumpShareRecorder=function(){},t.lastRecordVideoTime=0,t.bRecordVideo=!1,t.recordStatus=1,t.minRecordTime=3,t.minRecordTimeAuto=15,t.maxRecordTime=300,t.PRE_RECORD=1,t.RECORDING=2,t.RECORD_FINISH=3,t.recorder=null,t}(s.default);r.default=h,cc._RF.pop()},{}],mgrWordFilter:[function(e,t,i){"use strict";cc._RF.push(t,"a1118JdzxdJhYgV0aWBnGCX","mgrWordFilter");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Manager"),d=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.onLoad=function(){e.onLoad.call(this),this._loadWords()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t._loadWords=function(){this.badwords||this._processBadwords([])},t._processBadwords=function(e){this.badwords=e},t.checkStr=function(e){if(!e)return!0;for(var t=this.badwords,i=0;i<t.length;i++)if(e.match(t[i]))return!1;return!0},t.filterStr=function(e,t){t=t||this.REP_STR;for(var i=this.badwords,n=0;n<i.length;n++)e=e.replace(i[n],t);return e},t.hasSymbol=function(e){return!!e.match(this.REP_NO_SYMBOL)},t.filterSymbol=function(e){return e?e=e.replace(this.REP_NO_SYMBOL,""):""},t.REP_STR="**",t.REP_NO_SYMBOL=/[\!\@\#\$\%\^\&\*\(\)\`\~\<\>\,\.\/\?\;\:\'\"\[\]\{\}\\\|\-\=\_\+\n\r\t\b ]/g,s([d],t)}(l.default);r.default=c,cc._RF.pop()},{}],pako:[function(e,t,i){(function(n){"use strict";cc._RF.push(t,"0bd097cNztKsLyWpbhTknAf","pako");var o=e,r=t,a=i;(function(e){!function(t){"object"==typeof a&&void 0!==r?r.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).pako=t()}(function(){return function e(t,i,n){function r(s,l){if(!i[s]){if(!t[s]){var d="function"==typeof o&&o;if(!l&&d)return d(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){return r(t[s][1][e]||e)},u,u.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof o&&o,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){var n=e("./zlib/deflate"),o=e("./utils/common"),r=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,d=0,c=-1,u=0,h=8;function p(e){if(!(this instanceof p))return new p(e);this.options=o.assign({level:c,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==d)throw new Error(a[i]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?r.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(i=n.deflateSetDictionary(this.strm,f))!==d)throw new Error(a[i]);this._dict_set=!0}}function f(e,t){var i=new p(t);if(i.push(e,!0),i.err)throw i.msg||a[i.err];return i.result}p.prototype.push=function(e,t){var i,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=r.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new o.Buf8(c),s.next_out=0,s.avail_out=c),1!==(i=n.deflate(s,a))&&i!==d)return this.onEnd(i),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(r.buf2binstring(o.shrinkBuf(s.output,s.next_out))):this.onData(o.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==i);return 4===a?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===d):2!==a||(this.onEnd(d),s.avail_out=0,!0)},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=p,i.deflate=f,i.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},i.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(e,t,i){var n=e("./zlib/inflate"),o=e("./utils/common"),r=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),d=e("./zlib/gzheader"),c=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,t.windowBits);if(i!==a.Z_OK)throw new Error(s[i]);if(this.header=new d,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=r.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=n.inflateSetDictionary(this.strm,t.dictionary))!==a.Z_OK))throw new Error(s[i])}function h(e,t){var i=new u(t);if(i.push(e,!0),i.err)throw i.msg||s[i.err];return i.result}u.prototype.push=function(e,t){var i,s,l,d,u,h=this.strm,p=this.options.chunkSize,f=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?h.input=r.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new o.Buf8(p),h.next_out=0,h.avail_out=p),(i=n.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&f&&(i=n.inflateSetDictionary(this.strm,f)),i===a.Z_BUF_ERROR&&!0===g&&(i=a.Z_OK,g=!1),i!==a.Z_STREAM_END&&i!==a.Z_OK)return this.onEnd(i),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&i!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=r.utf8border(h.output,h.next_out),d=h.next_out-l,u=r.buf2string(h.output,l),h.next_out=d,h.avail_out=p-d,d&&o.arraySet(h.output,h.output,l,d,0),this.onData(u)):this.onData(o.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(g=!0)}while((h.avail_in>0||0===h.avail_out)&&i!==a.Z_STREAM_END);return i===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),h.avail_out=0,!0)},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=u,i.inflate=h,i.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},i.ungzip=h},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(e,t,i){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)o(i,n)&&(e[n]=i[n])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,i,n,o){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+n),o);else for(var r=0;r<n;r++)e[o+r]=t[i+r]},flattenChunks:function(e){var t,i,n,o,r,a;for(n=0,t=0,i=e.length;t<i;t++)n+=e[t].length;for(a=new Uint8Array(n),o=0,t=0,i=e.length;t<i;t++)r=e[t],a.set(r,o),o+=r.length;return a}},a={arraySet:function(e,t,i,n,o){for(var r=0;r<n;r++)e[o+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(n)},{}],4:[function(e,t,i){var n=e("./common"),o=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){r=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&r||!e.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var i="",a=0;a<t;a++)i+=String.fromCharCode(e[a]);return i}a[254]=a[254]=1,i.string2buf=function(e){var t,i,o,r,a,s=e.length,l=0;for(r=0;r<s;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(o=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(o-56320),r++),l+=i<128?1:i<2048?2:i<65536?3:4;for(t=new n.Buf8(l),a=0,r=0;a<l;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(o=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(o-56320),r++),i<128?t[a++]=i:i<2048?(t[a++]=192|i>>>6,t[a++]=128|63&i):i<65536?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t},i.buf2binstring=function(e){return l(e,e.length)},i.binstring2buf=function(e){for(var t=new n.Buf8(e.length),i=0,o=t.length;i<o;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,n,o,r,s=t||e.length,d=new Array(2*s);for(n=0,i=0;i<s;)if((o=e[i++])<128)d[n++]=o;else if((r=a[o])>4)d[n++]=65533,i+=r-1;else{for(o&=2===r?31:3===r?15:7;r>1&&i<s;)o=o<<6|63&e[i++],r--;r>1?d[n++]=65533:o<65536?d[n++]=o:(o-=65536,d[n++]=55296|o>>10&1023,d[n++]=56320|1023&o)}return l(d,n)},i.utf8border=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;i>=0&&128==(192&e[i]);)i--;return i<0?t:0===i?t:i+a[e[i]]>t?i:t}},{"./common":3}],5:[function(e,t){t.exports=function(e,t,i,n){for(var o=65535&e|0,r=e>>>16&65535|0,a=0;0!==i;){i-=a=i>2e3?2e3:i;do{r=r+(o=o+t[n++]|0)|0}while(--a);o%=65521,r%=65521}return o|r<<16|0}},{}],6:[function(e,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(e,t){var i=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t,n,o){var r=i,a=o+n;e^=-1;for(var s=o;s<a;s++)e=e>>>8^r[255&(e^t[s])];return-1^e}},{}],8:[function(e,t,i){var n,o=e("../utils/common"),r=e("./trees"),a=e("./adler32"),s=e("./crc32"),l=e("./messages"),d=0,c=4,u=0,h=-2,p=-1,f=1,g=4,v=2,_=8,y=9,m=286,S=30,b=19,C=2*m+1,I=15,F=3,R=258,w=R+F+1,L=42,T=103,x=113,P=666,A=1,E=2,N=3,D=4;function k(e,t){return e.msg=l[t],t}function M(e){return(e<<1)-(e>4?9:0)}function O(e){for(var t=e.length;--t>=0;)e[t]=0}function B(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(o.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function U(e,t){r._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,B(e.strm)}function V(e,t){e.pending_buf[e.pending++]=t}function G(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function H(e,t,i,n){var r=e.avail_in;return r>n&&(r=n),0===r?0:(e.avail_in-=r,o.arraySet(t,e.input,e.next_in,r,i),1===e.state.wrap?e.adler=a(e.adler,t,r,i):2===e.state.wrap&&(e.adler=s(e.adler,t,r,i)),e.next_in+=r,e.total_in+=r,r)}function j(e,t){var i,n,o=e.max_chain_length,r=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-w?e.strstart-(e.w_size-w):0,d=e.window,c=e.w_mask,u=e.prev,h=e.strstart+R,p=d[r+a-1],f=d[r+a];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(d[(i=t)+a]===f&&d[i+a-1]===p&&d[i]===d[r]&&d[++i]===d[r+1]){r+=2,i++;do{}while(d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&r<h);if(n=R-(h-r),r=h-R,n>a){if(e.match_start=t,a=n,n>=s)break;p=d[r+a-1],f=d[r+a]}}}while((t=u[t&c])>l&&0!=--o);return a<=e.lookahead?a:e.lookahead}function W(e){var t,i,n,r,a,s=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-w)){o.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=i=e.hash_size;do{n=e.head[--t],e.head[t]=n>=s?n-s:0}while(--i);t=i=s;do{n=e.prev[--t],e.prev[t]=n>=s?n-s:0}while(--i);r+=s}if(0===e.strm.avail_in)break;if(i=H(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=i,e.lookahead+e.insert>=F)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+F-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<F)););}while(e.lookahead<w&&0!==e.strm.avail_in)}function z(e,t){for(var i,n;;){if(e.lookahead<w){if(W(e),e.lookahead<w&&t===d)return A;if(0===e.lookahead)break}if(i=0,e.lookahead>=F&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-w&&(e.match_length=j(e,i)),e.match_length>=F)if(n=r._tr_tally(e,e.strstart-e.match_start,e.match_length-F),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=F){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(U(e,!1),0===e.strm.avail_out))return A}return e.insert=e.strstart<F-1?e.strstart:F-1,t===c?(U(e,!0),0===e.strm.avail_out?N:D):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?A:E}function K(e,t){for(var i,n,o;;){if(e.lookahead<w){if(W(e),e.lookahead<w&&t===d)return A;if(0===e.lookahead)break}if(i=0,e.lookahead>=F&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=F-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-w&&(e.match_length=j(e,i),e.match_length<=5&&(e.strategy===f||e.match_length===F&&e.strstart-e.match_start>4096)&&(e.match_length=F-1)),e.prev_length>=F&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-F,n=r._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-F),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=F-1,e.strstart++,n&&(U(e,!1),0===e.strm.avail_out))return A}else if(e.match_available){if((n=r._tr_tally(e,0,e.window[e.strstart-1]))&&U(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return A}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=r._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<F-1?e.strstart:F-1,t===c?(U(e,!0),0===e.strm.avail_out?N:D):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?A:E}function Y(e,t){for(var i,n,o,a,s=e.window;;){if(e.lookahead<=R){if(W(e),e.lookahead<=R&&t===d)return A;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=F&&e.strstart>0&&(n=s[o=e.strstart-1])===s[++o]&&n===s[++o]&&n===s[++o]){a=e.strstart+R;do{}while(n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&o<a);e.match_length=R-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=F?(i=r._tr_tally(e,1,e.match_length-F),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(U(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===c?(U(e,!0),0===e.strm.avail_out?N:D):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?A:E}function J(e,t){for(var i;;){if(0===e.lookahead&&(W(e),0===e.lookahead)){if(t===d)return A;break}if(e.match_length=0,i=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(U(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===c?(U(e,!0),0===e.strm.avail_out?N:D):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?A:E}function q(e,t,i,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=o}function X(e){e.window_size=2*e.w_size,O(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=F-1,e.match_available=0,e.ins_h=0}function Q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*C),this.dyn_dtree=new o.Buf16(2*(2*S+1)),this.bl_tree=new o.Buf16(2*(2*b+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(I+1),this.heap=new o.Buf16(2*m+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*m+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Z(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=v,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?L:x,e.adler=2===t.wrap?0:1,t.last_flush=d,r._tr_init(t),u):k(e,h)}function $(e){var t=Z(e);return t===u&&X(e.state),t}function ee(e,t,i,n,r,a){if(!e)return h;var s=1;if(t===p&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>y||i!==_||n<8||n>15||t<0||t>9||a<0||a>g)return k(e,h);8===n&&(n=9);var l=new Q;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+F-1)/F),l.window=new o.Buf8(2*l.w_size),l.head=new o.Buf16(l.hash_size),l.prev=new o.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new o.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=i,$(e)}n=[new q(0,0,0,0,function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(W(e),0===e.lookahead&&t===d)return A;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+i;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,U(e,!1),0===e.strm.avail_out))return A;if(e.strstart-e.block_start>=e.w_size-w&&(U(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===c?(U(e,!0),0===e.strm.avail_out?N:D):(e.strstart>e.block_start&&(U(e,!1),e.strm.avail_out),A)}),new q(4,4,8,4,z),new q(4,5,16,8,z),new q(4,6,32,32,z),new q(4,4,16,16,K),new q(8,16,32,32,K),new q(8,16,128,128,K),new q(8,32,128,256,K),new q(32,128,258,1024,K),new q(32,258,258,4096,K)],i.deflateInit=function(e,t){return ee(e,t,_,15,8,0)},i.deflateInit2=ee,i.deflateReset=$,i.deflateResetKeep=Z,i.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,u):h},i.deflate=function(e,t){var i,o,a,l;if(!e||!e.state||t>5||t<0)return e?k(e,h):h;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||o.status===P&&t!==c)return k(e,0===e.avail_out?-5:h);if(o.strm=e,i=o.last_flush,o.last_flush=t,o.status===L)if(2===o.wrap)e.adler=0,V(o,31),V(o,139),V(o,8),o.gzhead?(V(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),V(o,255&o.gzhead.time),V(o,o.gzhead.time>>8&255),V(o,o.gzhead.time>>16&255),V(o,o.gzhead.time>>24&255),V(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),V(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(V(o,255&o.gzhead.extra.length),V(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=s(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(V(o,0),V(o,0),V(o,0),V(o,0),V(o,0),V(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),V(o,3),o.status=x);else{var p=_+(o.w_bits-8<<4)<<8;p|=(o.strategy>=2||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(p|=32),p+=31-p%31,o.status=x,G(o,p),0!==o.strstart&&(G(o,e.adler>>>16),G(o,65535&e.adler)),e.adler=1}if(69===o.status)if(o.gzhead.extra){for(a=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),B(e),a=o.pending,o.pending!==o.pending_buf_size));)V(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),B(e),a=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,V(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),0===l&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),B(e),a=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,V(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),0===l&&(o.status=T)}else o.status=T;if(o.status===T&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&B(e),o.pending+2<=o.pending_buf_size&&(V(o,255&e.adler),V(o,e.adler>>8&255),e.adler=0,o.status=x)):o.status=x),0!==o.pending){if(B(e),0===e.avail_out)return o.last_flush=-1,u}else if(0===e.avail_in&&M(t)<=M(i)&&t!==c)return k(e,-5);if(o.status===P&&0!==e.avail_in)return k(e,-5);if(0!==e.avail_in||0!==o.lookahead||t!==d&&o.status!==P){var f=2===o.strategy?J(o,t):3===o.strategy?Y(o,t):n[o.level].func(o,t);if(f!==N&&f!==D||(o.status=P),f===A||f===N)return 0===e.avail_out&&(o.last_flush=-1),u;if(f===E&&(1===t?r._tr_align(o):5!==t&&(r._tr_stored_block(o,0,0,!1),3===t&&(O(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),B(e),0===e.avail_out))return o.last_flush=-1,u}return t!==c?u:o.wrap<=0?1:(2===o.wrap?(V(o,255&e.adler),V(o,e.adler>>8&255),V(o,e.adler>>16&255),V(o,e.adler>>24&255),V(o,255&e.total_in),V(o,e.total_in>>8&255),V(o,e.total_in>>16&255),V(o,e.total_in>>24&255)):(G(o,e.adler>>>16),G(o,65535&e.adler)),B(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?u:1)},i.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==L&&69!==t&&73!==t&&91!==t&&t!==T&&t!==x&&t!==P?k(e,h):(e.state=null,t===x?k(e,-3):u):h},i.deflateSetDictionary=function(e,t){var i,n,r,s,l,d,c,p,f=t.length;if(!e||!e.state)return h;if(2===(s=(i=e.state).wrap)||1===s&&i.status!==L||i.lookahead)return h;for(1===s&&(e.adler=a(e.adler,t,f,0)),i.wrap=0,f>=i.w_size&&(0===s&&(O(i.head),i.strstart=0,i.block_start=0,i.insert=0),p=new o.Buf8(i.w_size),o.arraySet(p,t,f-i.w_size,i.w_size,0),t=p,f=i.w_size),l=e.avail_in,d=e.next_in,c=e.input,e.avail_in=f,e.next_in=0,e.input=t,W(i);i.lookahead>=F;){n=i.strstart,r=i.lookahead-(F-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+F-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--r);i.strstart=n,i.lookahead=F-1,W(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=F-1,i.match_available=0,e.next_in=d,e.input=c,e.avail_in=l,i.wrap=s,u},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(e,t){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(e,t){t.exports=function(e,t){var i,n,o,r,a,s,l,d,c,u,h,p,f,g,v,_,y,m,S,b,C,I,F,R,w;i=e.state,n=e.next_in,R=e.input,o=n+(e.avail_in-5),r=e.next_out,w=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),l=i.dmax,d=i.wsize,c=i.whave,u=i.wnext,h=i.window,p=i.hold,f=i.bits,g=i.lencode,v=i.distcode,_=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;e:do{f<15&&(p+=R[n++]<<f,f+=8,p+=R[n++]<<f,f+=8),m=g[p&_];t:for(;;){if(p>>>=S=m>>>24,f-=S,0==(S=m>>>16&255))w[r++]=65535&m;else{if(!(16&S)){if(0==(64&S)){m=g[(65535&m)+(p&(1<<S)-1)];continue t}if(32&S){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}b=65535&m,(S&=15)&&(f<S&&(p+=R[n++]<<f,f+=8),b+=p&(1<<S)-1,p>>>=S,f-=S),f<15&&(p+=R[n++]<<f,f+=8,p+=R[n++]<<f,f+=8),m=v[p&y];i:for(;;){if(p>>>=S=m>>>24,f-=S,!(16&(S=m>>>16&255))){if(0==(64&S)){m=v[(65535&m)+(p&(1<<S)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(C=65535&m,f<(S&=15)&&(p+=R[n++]<<f,(f+=8)<S&&(p+=R[n++]<<f,f+=8)),(C+=p&(1<<S)-1)>l){e.msg="invalid distance too far back",i.mode=30;break e}if(p>>>=S,f-=S,C>(S=r-a)){if((S=C-S)>c&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(I=0,F=h,0===u){if(I+=d-S,S<b){b-=S;do{w[r++]=h[I++]}while(--S);I=r-C,F=w}}else if(u<S){if(I+=d+u-S,(S-=u)<b){b-=S;do{w[r++]=h[I++]}while(--S);if(I=0,u<b){b-=S=u;do{w[r++]=h[I++]}while(--S);I=r-C,F=w}}}else if(I+=u-S,S<b){b-=S;do{w[r++]=h[I++]}while(--S);I=r-C,F=w}for(;b>2;)w[r++]=F[I++],w[r++]=F[I++],w[r++]=F[I++],b-=3;b&&(w[r++]=F[I++],b>1&&(w[r++]=F[I++]))}else{I=r-C;do{w[r++]=w[I++],w[r++]=w[I++],w[r++]=w[I++],b-=3}while(b>2);b&&(w[r++]=w[I++],b>1&&(w[r++]=w[I++]))}break}}break}}while(n<o&&r<s);n-=b=f>>3,p&=(1<<(f-=b<<3))-1,e.next_in=n,e.next_out=r,e.avail_in=n<o?o-n+5:5-(n-o),e.avail_out=r<s?s-r+257:257-(r-s),i.hold=p,i.bits=f}},{}],11:[function(e,t,i){var n=e("../utils/common"),o=e("./adler32"),r=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),l=1,d=2,c=0,u=-2,h=1,p=12,f=30,g=852,v=592;function _(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(g),t.distcode=t.distdyn=new n.Buf32(v),t.sane=1,t.back=-1,c):u}function S(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,m(e)):u}function b(e,t){var i,n;return e&&e.state?(n=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?u:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,S(e))):u}function C(e,t){var i,n;return e?(n=new y,e.state=n,n.window=null,(i=b(e,t))!==c&&(e.state=null),i):u}var I,F,R=!0;function w(e){if(R){var t;for(I=new n.Buf32(512),F=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,I,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(d,e.lens,0,32,F,0,e.work,{bits:5}),R=!1}e.lencode=I,e.lenbits=9,e.distcode=F,e.distbits=5}function L(e,t,i,o){var r,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),o>=a.wsize?(n.arraySet(a.window,t,i-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((r=a.wsize-a.wnext)>o&&(r=o),n.arraySet(a.window,t,i-o,r,a.wnext),(o-=r)?(n.arraySet(a.window,t,i-o,o,0),a.wnext=o,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0}i.inflateReset=S,i.inflateReset2=b,i.inflateResetKeep=m,i.inflateInit=function(e){return C(e,15)},i.inflateInit2=C,i.inflate=function(e,t){var i,g,v,y,m,S,b,C,I,F,R,T,x,P,A,E,N,D,k,M,O,B,U,V,G=0,H=new n.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;(i=e.state).mode===p&&(i.mode=13),m=e.next_out,v=e.output,b=e.avail_out,y=e.next_in,g=e.input,S=e.avail_in,C=i.hold,I=i.bits,F=S,R=b,B=c;e:for(;;)switch(i.mode){case h:if(0===i.wrap){i.mode=13;break}for(;I<16;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}if(2&i.wrap&&35615===C){i.check=0,H[0]=255&C,H[1]=C>>>8&255,i.check=r(i.check,H,2,0),C=0,I=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&C)<<8)+(C>>8))%31){e.msg="incorrect header check",i.mode=f;break}if(8!=(15&C)){e.msg="unknown compression method",i.mode=f;break}if(I-=4,O=8+(15&(C>>>=4)),0===i.wbits)i.wbits=O;else if(O>i.wbits){e.msg="invalid window size",i.mode=f;break}i.dmax=1<<O,e.adler=i.check=1,i.mode=512&C?10:p,C=0,I=0;break;case 2:for(;I<16;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}if(i.flags=C,8!=(255&i.flags)){e.msg="unknown compression method",i.mode=f;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=f;break}i.head&&(i.head.text=C>>8&1),512&i.flags&&(H[0]=255&C,H[1]=C>>>8&255,i.check=r(i.check,H,2,0)),C=0,I=0,i.mode=3;case 3:for(;I<32;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}i.head&&(i.head.time=C),512&i.flags&&(H[0]=255&C,H[1]=C>>>8&255,H[2]=C>>>16&255,H[3]=C>>>24&255,i.check=r(i.check,H,4,0)),C=0,I=0,i.mode=4;case 4:for(;I<16;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}i.head&&(i.head.xflags=255&C,i.head.os=C>>8),512&i.flags&&(H[0]=255&C,H[1]=C>>>8&255,i.check=r(i.check,H,2,0)),C=0,I=0,i.mode=5;case 5:if(1024&i.flags){for(;I<16;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}i.length=C,i.head&&(i.head.extra_len=C),512&i.flags&&(H[0]=255&C,H[1]=C>>>8&255,i.check=r(i.check,H,2,0)),C=0,I=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((T=i.length)>S&&(T=S),T&&(i.head&&(O=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,g,y,T,O)),512&i.flags&&(i.check=r(i.check,g,T,y)),S-=T,y+=T,i.length-=T),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===S)break e;T=0;do{O=g[y+T++],i.head&&O&&i.length<65536&&(i.head.name+=String.fromCharCode(O))}while(O&&T<S);if(512&i.flags&&(i.check=r(i.check,g,T,y)),S-=T,y+=T,O)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===S)break e;T=0;do{O=g[y+T++],i.head&&O&&i.length<65536&&(i.head.comment+=String.fromCharCode(O))}while(O&&T<S);if(512&i.flags&&(i.check=r(i.check,g,T,y)),S-=T,y+=T,O)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;I<16;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}if(C!==(65535&i.check)){e.msg="header crc mismatch",i.mode=f;break}C=0,I=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=p;break;case 10:for(;I<32;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}e.adler=i.check=_(C),C=0,I=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=m,e.avail_out=b,e.next_in=y,e.avail_in=S,i.hold=C,i.bits=I,2;e.adler=i.check=1,i.mode=p;case p:if(5===t||6===t)break e;case 13:if(i.last){C>>>=7&I,I-=7&I,i.mode=27;break}for(;I<3;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}switch(i.last=1&C,I-=1,3&(C>>>=1)){case 0:i.mode=14;break;case 1:if(w(i),i.mode=20,6===t){C>>>=2,I-=2;break e}break;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=f}C>>>=2,I-=2;break;case 14:for(C>>>=7&I,I-=7&I;I<32;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}if((65535&C)!=(C>>>16^65535)){e.msg="invalid stored block lengths",i.mode=f;break}if(i.length=65535&C,C=0,I=0,i.mode=15,6===t)break e;case 15:i.mode=16;case 16:if(T=i.length){if(T>S&&(T=S),T>b&&(T=b),0===T)break e;n.arraySet(v,g,y,T,m),S-=T,y+=T,b-=T,m+=T,i.length-=T;break}i.mode=p;break;case 17:for(;I<14;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}if(i.nlen=257+(31&C),C>>>=5,I-=5,i.ndist=1+(31&C),C>>>=5,I-=5,i.ncode=4+(15&C),C>>>=4,I-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=f;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;I<3;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}i.lens[j[i.have++]]=7&C,C>>>=3,I-=3}for(;i.have<19;)i.lens[j[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,U={bits:i.lenbits},B=s(0,i.lens,0,19,i.lencode,0,i.work,U),i.lenbits=U.bits,B){e.msg="invalid code lengths set",i.mode=f;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;E=(G=i.lencode[C&(1<<i.lenbits)-1])>>>16&255,N=65535&G,!((A=G>>>24)<=I);){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}if(N<16)C>>>=A,I-=A,i.lens[i.have++]=N;else{if(16===N){for(V=A+2;I<V;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}if(C>>>=A,I-=A,0===i.have){e.msg="invalid bit length repeat",i.mode=f;break}O=i.lens[i.have-1],T=3+(3&C),C>>>=2,I-=2}else if(17===N){for(V=A+3;I<V;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}I-=A,O=0,T=3+(7&(C>>>=A)),C>>>=3,I-=3}else{for(V=A+7;I<V;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}I-=A,O=0,T=11+(127&(C>>>=A)),C>>>=7,I-=7}if(i.have+T>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=f;break}for(;T--;)i.lens[i.have++]=O}}if(i.mode===f)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=f;break}if(i.lenbits=9,U={bits:i.lenbits},B=s(l,i.lens,0,i.nlen,i.lencode,0,i.work,U),i.lenbits=U.bits,B){e.msg="invalid literal/lengths set",i.mode=f;break}if(i.distbits=6,i.distcode=i.distdyn,U={bits:i.distbits},B=s(d,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,U),i.distbits=U.bits,B){e.msg="invalid distances set",i.mode=f;break}if(i.mode=20,6===t)break e;case 20:i.mode=21;case 21:if(S>=6&&b>=258){e.next_out=m,e.avail_out=b,e.next_in=y,e.avail_in=S,i.hold=C,i.bits=I,a(e,R),m=e.next_out,v=e.output,b=e.avail_out,y=e.next_in,g=e.input,S=e.avail_in,C=i.hold,I=i.bits,i.mode===p&&(i.back=-1);break}for(i.back=0;E=(G=i.lencode[C&(1<<i.lenbits)-1])>>>16&255,N=65535&G,!((A=G>>>24)<=I);){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}if(E&&0==(240&E)){for(D=A,k=E,M=N;E=(G=i.lencode[M+((C&(1<<D+k)-1)>>D)])>>>16&255,N=65535&G,!(D+(A=G>>>24)<=I);){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}C>>>=D,I-=D,i.back+=D}if(C>>>=A,I-=A,i.back+=A,i.length=N,0===E){i.mode=26;break}if(32&E){i.back=-1,i.mode=p;break}if(64&E){e.msg="invalid literal/length code",i.mode=f;break}i.extra=15&E,i.mode=22;case 22:if(i.extra){for(V=i.extra;I<V;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}i.length+=C&(1<<i.extra)-1,C>>>=i.extra,I-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;E=(G=i.distcode[C&(1<<i.distbits)-1])>>>16&255,N=65535&G,!((A=G>>>24)<=I);){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}if(0==(240&E)){for(D=A,k=E,M=N;E=(G=i.distcode[M+((C&(1<<D+k)-1)>>D)])>>>16&255,N=65535&G,!(D+(A=G>>>24)<=I);){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}C>>>=D,I-=D,i.back+=D}if(C>>>=A,I-=A,i.back+=A,64&E){e.msg="invalid distance code",i.mode=f;break}i.offset=N,i.extra=15&E,i.mode=24;case 24:if(i.extra){for(V=i.extra;I<V;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}i.offset+=C&(1<<i.extra)-1,C>>>=i.extra,I-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=f;break}i.mode=25;case 25:if(0===b)break e;if(T=R-b,i.offset>T){if((T=i.offset-T)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=f;break}T>i.wnext?(T-=i.wnext,x=i.wsize-T):x=i.wnext-T,T>i.length&&(T=i.length),P=i.window}else P=v,x=m-i.offset,T=i.length;T>b&&(T=b),b-=T,i.length-=T;do{v[m++]=P[x++]}while(--T);0===i.length&&(i.mode=21);break;case 26:if(0===b)break e;v[m++]=i.length,b--,i.mode=21;break;case 27:if(i.wrap){for(;I<32;){if(0===S)break e;S--,C|=g[y++]<<I,I+=8}if(R-=b,e.total_out+=R,i.total+=R,R&&(e.adler=i.check=i.flags?r(i.check,v,R,m-R):o(i.check,v,R,m-R)),R=b,(i.flags?C:_(C))!==i.check){e.msg="incorrect data check",i.mode=f;break}C=0,I=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;I<32;){if(0===S)break e;S--,C+=g[y++]<<I,I+=8}if(C!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=f;break}C=0,I=0}i.mode=29;case 29:B=1;break e;case f:B=-3;break e;case 31:return-4;case 32:default:return u}return e.next_out=m,e.avail_out=b,e.next_in=y,e.avail_in=S,i.hold=C,i.bits=I,(i.wsize||R!==e.avail_out&&i.mode<f&&(i.mode<27||4!==t))&&L(e,e.output,e.next_out,R-e.avail_out)?(i.mode=31,-4):(F-=e.avail_in,R-=e.avail_out,e.total_in+=F,e.total_out+=R,i.total+=R,i.wrap&&R&&(e.adler=i.check=i.flags?r(i.check,v,R,e.next_out-R):o(i.check,v,R,e.next_out-R)),e.data_type=i.bits+(i.last?64:0)+(i.mode===p?128:0)+(20===i.mode||15===i.mode?256:0),(0===F&&0===R||4===t)&&B===c&&(B=-5),B)},i.inflateEnd=function(e){if(!e||!e.state)return u;var t=e.state;return t.window&&(t.window=null),e.state=null,c},i.inflateGetHeader=function(e,t){var i;return e&&e.state?0==(2&(i=e.state).wrap)?u:(i.head=t,t.done=!1,c):u},i.inflateSetDictionary=function(e,t){var i,n=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?u:11===i.mode&&o(1,t,n,0)!==i.check?-3:L(e,t,n,n)?(i.mode=31,-4):(i.havedict=1,c):u},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(e,t){var i=e("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,s,l,d,c,u,h){var p,f,g,v,_,y,m,S,b,C=h.bits,I=0,F=0,R=0,w=0,L=0,T=0,x=0,P=0,A=0,E=0,N=null,D=0,k=new i.Buf16(16),M=new i.Buf16(16),O=null,B=0;for(I=0;I<=15;I++)k[I]=0;for(F=0;F<l;F++)k[t[s+F]]++;for(L=C,w=15;w>=1&&0===k[w];w--);if(L>w&&(L=w),0===w)return d[c++]=20971520,d[c++]=20971520,h.bits=1,0;for(R=1;R<w&&0===k[R];R++);for(L<R&&(L=R),P=1,I=1;I<=15;I++)if(P<<=1,(P-=k[I])<0)return-1;if(P>0&&(0===e||1!==w))return-1;for(M[1]=0,I=1;I<15;I++)M[I+1]=M[I]+k[I];for(F=0;F<l;F++)0!==t[s+F]&&(u[M[t[s+F]]++]=F);if(0===e?(N=O=u,y=19):1===e?(N=n,D-=257,O=o,B-=257,y=256):(N=r,O=a,y=-1),E=0,F=0,I=R,_=c,T=L,x=0,g=-1,v=(A=1<<L)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){m=I-x,u[F]<y?(S=0,b=u[F]):u[F]>y?(S=O[B+u[F]],b=N[D+u[F]]):(S=96,b=0),p=1<<I-x,R=f=1<<T;do{d[_+(E>>x)+(f-=p)]=m<<24|S<<16|b|0}while(0!==f);for(p=1<<I-1;E&p;)p>>=1;if(0!==p?(E&=p-1,E+=p):E=0,F++,0==--k[I]){if(I===w)break;I=t[s+u[F]]}if(I>L&&(E&v)!==g){for(0===x&&(x=L),_+=R,P=1<<(T=I-x);T+x<w&&!((P-=k[T+x])<=0);)T++,P<<=1;if(A+=1<<T,1===e&&A>852||2===e&&A>592)return 1;d[g=E&v]=L<<24|T<<16|_-c|0}}return 0!==E&&(d[_+E]=I-x<<24|64<<16|0),h.bits=L,0}},{"../utils/common":3}],13:[function(e,t){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(e,t,i){var n=e("../utils/common"),o=0,r=1;function a(e){for(var t=e.length;--t>=0;)e[t]=0}var s=0,l=29,d=256,c=d+1+l,u=30,h=19,p=2*c+1,f=15,g=16,v=7,_=256,y=16,m=17,S=18,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],R=new Array(2*(c+2));a(R);var w=new Array(2*u);a(w);var L=new Array(512);a(L);var T=new Array(256);a(T);var x=new Array(l);a(x);var P,A,E,N=new Array(u);function D(e,t,i,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}function k(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function M(e){return e<256?L[e]:L[256+(e>>>7)]}function O(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function B(e,t,i){e.bi_valid>g-i?(e.bi_buf|=t<<e.bi_valid&65535,O(e,e.bi_buf),e.bi_buf=t>>g-e.bi_valid,e.bi_valid+=i-g):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function U(e,t,i){B(e,i[2*t],i[2*t+1])}function V(e,t){var i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1}function G(e){16===e.bi_valid?(O(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function H(e,t){var i,n,o,r,a,s,l=t.dyn_tree,d=t.max_code,c=t.stat_desc.static_tree,u=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,v=t.stat_desc.max_length,_=0;for(r=0;r<=f;r++)e.bl_count[r]=0;for(l[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<p;i++)(r=l[2*l[2*(n=e.heap[i])+1]+1]+1)>v&&(r=v,_++),l[2*n+1]=r,n>d||(e.bl_count[r]++,a=0,n>=g&&(a=h[n-g]),s=l[2*n],e.opt_len+=s*(r+a),u&&(e.static_len+=s*(c[2*n+1]+a)));if(0!==_){do{for(r=v-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[v]--,_-=2}while(_>0);for(r=v;0!==r;r--)for(n=e.bl_count[r];0!==n;)(o=e.heap[--i])>d||(l[2*o+1]!==r&&(e.opt_len+=(r-l[2*o+1])*l[2*o],l[2*o+1]=r),n--)}}function j(e,t,i){var n,o,r=new Array(f+1),a=0;for(n=1;n<=f;n++)r[n]=a=a+i[n-1]<<1;for(o=0;o<=t;o++){var s=e[2*o+1];0!==s&&(e[2*o]=V(r[s]++,s))}}function W(){var e,t,i,n,o,r=new Array(f+1);for(i=0,n=0;n<l-1;n++)for(x[n]=i,e=0;e<1<<b[n];e++)T[i++]=n;for(T[i-1]=n,o=0,n=0;n<16;n++)for(N[n]=o,e=0;e<1<<C[n];e++)L[o++]=n;for(o>>=7;n<u;n++)for(N[n]=o<<7,e=0;e<1<<C[n]-7;e++)L[256+o++]=n;for(t=0;t<=f;t++)r[t]=0;for(e=0;e<=143;)R[2*e+1]=8,e++,r[8]++;for(;e<=255;)R[2*e+1]=9,e++,r[9]++;for(;e<=279;)R[2*e+1]=7,e++,r[7]++;for(;e<=287;)R[2*e+1]=8,e++,r[8]++;for(j(R,c+1,r),e=0;e<u;e++)w[2*e+1]=5,w[2*e]=V(e,5);P=new D(R,b,d+1,c,f),A=new D(w,C,0,u,f),E=new D(new Array(0),I,0,h,v)}function z(e){var t;for(t=0;t<c;t++)e.dyn_ltree[2*t]=0;for(t=0;t<u;t++)e.dyn_dtree[2*t]=0;for(t=0;t<h;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*_]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function K(e){e.bi_valid>8?O(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Y(e,t,i,o){K(e),o&&(O(e,i),O(e,~i)),n.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function J(e,t,i,n){var o=2*t,r=2*i;return e[o]<e[r]||e[o]===e[r]&&n[t]<=n[i]}function q(e,t,i){for(var n=e.heap[i],o=i<<1;o<=e.heap_len&&(o<e.heap_len&&J(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!J(t,n,e.heap[o],e.depth));)e.heap[i]=e.heap[o],i=o,o<<=1;e.heap[i]=n}function X(e,t,i){var n,o,r,a,s=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],o=e.pending_buf[e.l_buf+s],s++,0===n?U(e,o,t):(U(e,(r=T[o])+d+1,t),0!==(a=b[r])&&B(e,o-=x[r],a),U(e,r=M(--n),i),0!==(a=C[r])&&B(e,n-=N[r],a))}while(s<e.last_lit);U(e,_,t)}function Q(e,t){var i,n,o,r=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,d=-1;for(e.heap_len=0,e.heap_max=p,i=0;i<l;i++)0!==r[2*i]?(e.heap[++e.heap_len]=d=i,e.depth[i]=0):r[2*i+1]=0;for(;e.heap_len<2;)r[2*(o=e.heap[++e.heap_len]=d<2?++d:0)]=1,e.depth[o]=0,e.opt_len--,s&&(e.static_len-=a[2*o+1]);for(t.max_code=d,i=e.heap_len>>1;i>=1;i--)q(e,r,i);o=l;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],q(e,r,1),n=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=n,r[2*o]=r[2*i]+r[2*n],e.depth[o]=(e.depth[i]>=e.depth[n]?e.depth[i]:e.depth[n])+1,r[2*i+1]=r[2*n+1]=o,e.heap[1]=o++,q(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],H(e,t),j(r,d,e.bl_count)}function Z(e,t,i){var n,o,r=-1,a=t[1],s=0,l=7,d=4;for(0===a&&(l=138,d=3),t[2*(i+1)+1]=65535,n=0;n<=i;n++)o=a,a=t[2*(n+1)+1],++s<l&&o===a||(s<d?e.bl_tree[2*o]+=s:0!==o?(o!==r&&e.bl_tree[2*o]++,e.bl_tree[2*y]++):s<=10?e.bl_tree[2*m]++:e.bl_tree[2*S]++,s=0,r=o,0===a?(l=138,d=3):o===a?(l=6,d=3):(l=7,d=4))}function $(e,t,i){var n,o,r=-1,a=t[1],s=0,l=7,d=4;for(0===a&&(l=138,d=3),n=0;n<=i;n++)if(o=a,a=t[2*(n+1)+1],!(++s<l&&o===a)){if(s<d)do{U(e,o,e.bl_tree)}while(0!=--s);else 0!==o?(o!==r&&(U(e,o,e.bl_tree),s--),U(e,y,e.bl_tree),B(e,s-3,2)):s<=10?(U(e,m,e.bl_tree),B(e,s-3,3)):(U(e,S,e.bl_tree),B(e,s-11,7));s=0,r=o,0===a?(l=138,d=3):o===a?(l=6,d=3):(l=7,d=4)}}function ee(e){var t;for(Z(e,e.dyn_ltree,e.l_desc.max_code),Z(e,e.dyn_dtree,e.d_desc.max_code),Q(e,e.bl_desc),t=h-1;t>=3&&0===e.bl_tree[2*F[t]+1];t--);return e.opt_len+=14+3*(t+1),t}function te(e,t,i,n){var o;for(B(e,t-257,5),B(e,i-1,5),B(e,n-4,4),o=0;o<n;o++)B(e,e.bl_tree[2*F[o]+1],3);$(e,e.dyn_ltree,t-1),$(e,e.dyn_dtree,i-1)}function ie(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return r;for(t=32;t<d;t++)if(0!==e.dyn_ltree[2*t])return r;return o}a(N);var ne=!1;function oe(e,t,i,n){B(e,(s<<1)+(n?1:0),3),Y(e,t,i,!0)}i._tr_init=function(e){ne||(W(),ne=!0),e.l_desc=new k(e.dyn_ltree,P),e.d_desc=new k(e.dyn_dtree,A),e.bl_desc=new k(e.bl_tree,E),e.bi_buf=0,e.bi_valid=0,z(e)},i._tr_stored_block=oe,i._tr_flush_block=function(e,t,i,n){var o,r,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=ie(e)),Q(e,e.l_desc),Q(e,e.d_desc),a=ee(e),o=e.opt_len+3+7>>>3,(r=e.static_len+3+7>>>3)<=o&&(o=r)):o=r=i+5,i+4<=o&&-1!==t?oe(e,t,i,n):4===e.strategy||r===o?(B(e,2+(n?1:0),3),X(e,R,w)):(B(e,4+(n?1:0),3),te(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),X(e,e.dyn_ltree,e.dyn_dtree)),z(e),n&&K(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(T[i]+d+1)]++,e.dyn_dtree[2*M(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){B(e,2,3),U(e,_,R),G(e)}},{"../utils/common":3}],15:[function(e,t){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(e,t){var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")})}).call(void 0,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],sAchievement:[function(e,t,i){"use strict";cc._RF.push(t,"2e26eNZ+xdEfJTn72iLqHxo","sAchievement");var n=e,o=i;Object.defineProperty(o,"__esModule",{value:!0});var r=n("mgrCfg"),a=n("mgrAchievement"),s=n("mgrPlayer"),l=["data1","data2","data3","data4"],d=function(){function e(e){this.id=e,this.template=r.default.get("achievement_db",e),this.count=0,this.maxCount=0,this.state=a.AchievementState.unlocked}return e.prototype.setState=function(e){this.state=e},e.prototype.refreshCount=function(e){var t=this.template.targetType,i=r.default.get("achievement_target_db",t);if(i){if(!e||i.cmdHash[e]){var n=this[i.calcCountHandlerName];if("function"==typeof n){var o=n.bind(this)(),s=o[0],l=o[1],d=null!=this.count&&this.count!=s;this.count=s,this.maxCount=l,d&&a.default.sendMsg("MSG_ACHIEVEMENT_COUNT_CHANGED",{achievementId:this.id})}else cc.warn(ul.format("sAchievement.refreshCount handler not found! handler = %s",i.calcCountHandlerName))}}else cc.warn(ul.format("sAchievement.refreshCount target not found! targetType = %s",t))},e.prototype.refreshState=function(e){return(this.state==a.AchievementState.unlocked||0==this.maxCount)&&(this.refreshCount(e),this.state==a.AchievementState.unlocked&&this.maxCount<=this.count&&(this.state=a.AchievementState.finished,!0))},e.prototype._calcCount1=function(){var e=this.template;return e.data1,[e.data2<=0?1:0,1]},e.prototype._calcCount2=function(){var e=this.template,t=0,i=e.data1,n=e.data2,o=e.data3,a=r.default.quietGet("stage_chapter_db",i);if(t=0,a)for(var s=0;s<a.stageIds.length;s++)a.stageIds[s],o<=0&&t++;else cc.warn("sAchievement._calcCount2 chapter not found!",i);return[t,n]},e.prototype._calcCount4=function(){var e=this.template,t=e.data1,i=e.data2;return[s.default.getItemAmount(t),i]},e.prototype._calcCount5=function(){var e=this.template,t=e.data1,i=e.data2;return[this.__getItemAmountByFlag(t),i]},e.prototype._calcCount7=function(){return[0,1]},e.prototype._calcCount10=function(){var e=0,t=1,i=this.template.data1,n=r.default.quietGet("suit_db",i);if(n){for(var o=0;o<n.partIds.length;o++){var a=n.partIds[o];s.default.getItemAmount(a)>0&&e++}t=n.partIds.length}else cc.warn("sAchievement._calcCount10 suit not found!",i);return[e,t]},e.prototype._calcCount20=function(){for(var e=this.template,t=0,i=0,n=0;n<l.length;n++){var o=e[l[n]];o&&(i++,a.default.isAchievementCompleted(o)&&t++)}return[t,i]},e.prototype._calcCount21=function(){var e=0,t=0,i=this.template.customData.itemIds;if(i){t=i.length;for(var n=0;n<i.length;n++){var o=i[n];s.default.getItemAmount(o)>0&&e++}}return[e,t]},e.prototype._calcCount22=function(){return[0,1]},e.prototype.__getItemAmountByFlag=function(e){var t=0;return r.default.forDb("item_template_db",function(i,n){n.flag==e&&s.default.getItemAmount(n.id)>0&&(t+=1)}),t},e}();o.default=d,cc._RF.pop()},{}],singlePageReuseList:[function(e,t,i){"use strict";cc._RF.push(t,"1336eaYdjJLlb1bHngS59ci","singlePageReuseList");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Const"),d=o("mgrDirector"),c=o("Tools"),u=cc._decorator,h=u.ccclass,p=(u.property,function(e){function t(){var t=e.call(this)||this;return t.layoutType=null,t.creator=null,t.settor=null,t.destoryer=null,t.root=null,t.child1=null,t.child2=null,t.defaultActionInterval=.2,t.bIsLoop=!0,t.space=null,t.datas=[],t.moveCallFn=null,t.canTouch=!0,t.buildUi(),t}return a(t,e),t.prototype.destroy=function(){if(e.prototype.destroy.call(this),this.destoryer)for(var t=1;t<=2;t++)this.destoryer(this["child"+t.toString()],this.datas[t-1]);return!0},t.prototype.setDatas=function(e,t){this.datas=e,t||this.skipToPage(this.curIndex)},t.prototype.getDatas=function(){return this.datas},t.prototype.setMoveCallFn=function(e){this.moveCallFn=e},t.prototype.setSettor=function(e){return this.settor=e,this},t.prototype.setCreator=function(e){return this.creator=e,this},t.prototype.setDestroyer=function(e){return this.destoryer=e,this},t.prototype.setLayoutType=function(e){return this.layoutType=e,this},t.prototype.setSpace=function(e){return this.space=e,this},t.prototype.getCurIndex=function(){return this.curIndex},t.prototype.getMaxIndex=function(){return this.datas.length-1},t.prototype.buildUi=function(){var e,t=this;this.root=new cc.Node,this.root.setContentSize(d.default.size),this.root.parent=this,c.default.registerTouchHandler(this.root,function(i){if(t.canTouch)if("began"==i.name)e=i.getLocation();else if("ended"==i.name){var n=i.getLocation().x-e.x;n>60?t.moveToLastPage():n<-60&&t.moveToNextPage()}}),this.curIndex=-1,this.lastIndex=0,this.focusChildIndex=1,this.unfocusChildIndex=2},t.prototype.moveToNextPage=function(){this.lastIndex=this.curIndex,this.curIndex++,this.curIndex>this.datas.length-1&&0==this.bIsLoop&&(this.curIndex=this.datas.length-1),this.moveToCurPage()},t.prototype.setCurPage=function(e){this.curIndex=e},t.prototype.moveToLastPage=function(){this.lastIndex=this.curIndex,this.curIndex--,this.curIndex<0&&0==this.bIsLoop&&(this.curIndex=0),this.moveToCurPage()},t.prototype.moveToPage=function(e){this.lastIndex=this.curIndex,this.setCurPage(e),this.moveToCurPage()},t.prototype.skipToPage=function(e){this.lastIndex=this.curIndex,this.setCurPage(e),this.moveToCurPage()},t.prototype.setLoop=function(e){this.bIsLoop=e},t.prototype.moveToCurPage=function(){this.space||(this.layoutType==cc.Layout.Type.HORIZONTAL?this.space=l.default.RESOLUTION_RANGE.maxWidth:this.space=l.default.RESOLUTION_RANGE.maxHeight),null==this.child1&&(this.child1=new cc.Node,this.child1.parent=this.root,this.creator(this.child1)),null==this.child2&&(this.child2=new cc.Node,this.child2.parent=this.root,this.creator(this.child2));var e=new cc.Vec2,t=new cc.Vec2,i=new cc.Vec2,n=new cc.Vec2,o=this["child"+this.focusChildIndex.toString()],r=this["child"+this.unfocusChildIndex.toString()];if(this.lastIndex==this.curIndex)e.y=0,t.y=0,i.y=0,n.y=0,e.x=0,t.x=this.space,i.x=0,n.x=this.space;else{var a=this.focusChildIndex;this.focusChildIndex=this.unfocusChildIndex,this.unfocusChildIndex=a,this.lastIndex<this.curIndex?this.layoutType==cc.Layout.Type.HORIZONTAL?(e.y=0,t.y=0,i.y=0,n.y=0,e.x=this.space,t.x=0,i.x=0,n.x=-1*this.space):(e.x=0,t.x=0,i.x=0,n.x=0,e.y=this.space,t.y=0,i.y=0,n.y=-1*this.space):this.layoutType==cc.Layout.Type.HORIZONTAL?(e.y=0,t.y=0,i.y=0,n.y=0,e.x=-1*this.space,t.x=0,i.x=0,n.x=this.space):(e.x=0,t.x=0,i.x=0,n.x=0,e.y=-1*this.space,t.y=0,i.y=0,n.y=this.space)}o.setPosition(e),r.setPosition(t);var s=this.curIndex%this.datas.length;s<0&&(s+=this.datas.length);var d=this.lastIndex%this.datas.length;d<0&&(d+=this.datas.length),this.settor(o,this.datas[s]),s!=d&&this.settor(r,this.datas[d]),o.stopAllActions(),o.runAction(cc.moveTo(this.defaultActionInterval,i)),r.stopAllActions(),r.runAction(cc.moveTo(this.defaultActionInterval,n)),this.moveCallFn&&"function"==typeof this.moveCallFn&&this.moveCallFn(this)},t.prototype.getFocusChild=function(){return this["child"+this.unfocusChildIndex.toString()]},t.prototype.getUnFocusChild=function(){return this["child"+this.focusChildIndex.toString()]},t.prototype.setTouchEnable=function(e){this.canTouch=e},s([h],t)}(cc.Node));r.default=p,cc._RF.pop()},{}],ul:[function(e,t){"use strict";function i(e,t){e.sign=t?"":e.negative?"-":e.sign;var i=e.min-e.argument.length+1-e.sign.length,n=new Array(i<0?0:i).join(e.pad);return e.left?"0"==e.pad||t?e.sign+e.argument+n.replace(/0/g," "):e.sign+e.argument+n:"0"==e.pad||t?e.sign+n+e.argument:n+e.sign+e.argument}function n(e,t){var i="";t||(t=0);for(var o="",r=0;r<t+1;r++)o+="    ";if("object"==typeof e)for(var a in e){var s=e[a];"object"==typeof s?(i+=o+"'"+a+"' ...\n",i+=n(s,t+1)):i+=o+"'"+a+"' => \""+s+'"\n'}else i="===>"+e+"<===("+typeof e+")";return i}function o(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]}cc._RF.push(t,"2f20f/O6ERNBZxpEn6hffbG","ul"),ul.format=function(){if(void 0===arguments)return null;if(arguments.length<1)return null;if("string"!=typeof arguments[0])return null;if("undefined"==typeof RegExp)return null;for(var e=arguments[0],t=new RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),n=new Array,o=new Array,r=0,a=0,s=0,l=0,d="",c=null;c=t.exec(e);)c[9]&&(r+=1),a=l,s=t.lastIndex-c[0].length,o[o.length]=e.substring(a,s),l=t.lastIndex,n[n.length]={match:c[0],left:!!c[3],sign:c[4]||"",pad:c[5]||" ",min:c[6]||0,precision:c[8],code:c[9]||"%",negative:parseInt(arguments[r])<0,argument:String(arguments[r])};if(o[o.length]=e.substring(l),0==n.length)return e;if(arguments.length-1<r)return null;c=null;var u=null,h=null;for(h=0;h<n.length;h++)"%"==n[h].code?u="%":"b"==n[h].code?(n[h].argument=String(Math.abs(parseInt(n[h].argument)).toString(2)),u=i(n[h],!0)):"c"==n[h].code?(n[h].argument=String(String.fromCharCode(Math.abs(parseInt(n[h].argument)))),u=i(n[h],!0)):"d"==n[h].code?(n[h].argument=String(Math.abs(parseInt(n[h].argument))),u=i(n[h])):"f"==n[h].code?(n[h].argument=String(Math.abs(parseFloat(n[h].argument)).toFixed(n[h].precision?n[h].precision:6)),u=i(n[h])):"o"==n[h].code?(n[h].argument=String(Math.abs(parseInt(n[h].argument)).toString(8)),u=i(n[h])):"s"==n[h].code?(n[h].argument=n[h].argument.substring(0,n[h].precision?n[h].precision:n[h].argument.length),u=i(n[h],!0)):"x"==n[h].code?(n[h].argument=String(Math.abs(parseInt(n[h].argument)).toString(16)),u=i(n[h])):"X"==n[h].code?(n[h].argument=String(Math.abs(parseInt(n[h].argument)).toString(16)),u=i(n[h]).toUpperCase()):u=n[h].match,d+=o[h],d+=u;return d+o[h]},ul.formatDate=function(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t},ul.dump=function(e,t){var i=n(e);console.log("dump-begin",t),console.log(i),console.log("dump-end")},ul.actionFloat=function(e,t,i,n){var o=cc.delayTime(e);return o.update=function(e){n(t*(1-e)+i*e)},o},ul.clone=function e(t){var i,n=o(t);if(t instanceof cc.Node)return t;if("object"===n)i={};else{if("array"!==n)return t;i=[]}if("array"===n)for(var r=0,a=t.length;r<a;r++)i.push(e(t[r]));else if("object"===n)for(var s in t)i[s]=e(t[s]);return i},ul.length=function(e){var t=o(e);if("array"===t)return e.length;if("object"===t){var i=0;for(var n in e)e[n]&&i++;return i}return 0},ul.clamp=function(e,t,i){return e<t&&(e=t),e>i&&(e=i),e},cc._RF.pop()},{}],vAd2048AddNumDialog:[function(e,t,i){"use strict";cc._RF.push(t,"c9dderCXXFKB6gF/IV4rslI","vAd2048AddNumDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrAd"),c=o("mgrSdk"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.labelBtn2=null,t.labelContent=null,t.labelTitle=null,t.nodeBtns=null,t.spriteAd=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vAd2048AddNumDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[s.default,"onTouchButton1"],CC_button2:[s.default,"onTouchButton2"],CC_labelBtn2:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeBtns:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),c.default.statisVideoPointEvent("video_2048_start_add_100",1),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onMsgAdEventSuccessd=function(e){"video_2048_start_add_100"==e.adEventId&&(this.context.adSucCallback&&this.context.adSucCallback(),this.closeDialog())},t.prototype.onMsgAdEventFailed=function(){this.context.normalCallback&&this.context.normalCallback(),this.closeDialog()},t.prototype.onTouchButton1=function(e){e.isClick()&&(this.context.normalCallback&&this.context.normalCallback(),this.closeDialog())},t.prototype.onTouchButton2=function(e){e.isClick()&&d.default.triggerAdEvent("video_2048_start_add_100")},t}(l.default);r.default=u,cc._RF.pop()},{}],vAdPromptDialog:[function(e,t,i){"use strict";cc._RF.push(t,"dc081oQ3iVNC7iuTr3rbjEf","vAdPromptDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrAd"),c=o("mgrChannel"),u=o("mgrSdk"),h=o("mgrTip"),p=o("vJumpOtherGame"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.labelBtn1=null,t.labelBtn2=null,t.labelContent=null,t.labelTitle=null,t.nodeBtns=null,t.nodeJumpOtherGame=null,t.spriteAd=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vAdPromptDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[s.default,"onTouchButton1"],CC_button2:[s.default,"onTouchButton2"],CC_labelBtn1:[cc.Label],CC_labelBtn2:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeBtns:[cc.Node],CC_nodeJumpOtherGame:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),u.default.statisVideoPointEvent(this.context.adEventId,1),h.default.showJumpOtherGameBanner(this,0,cc.v2(0,250)),this.labelContent.string=this.context.content||"\u5185\u5bb9",this.labelBtn1.string=this.context.btn1Str||this.labelBtn1.string,this.labelBtn2.string=this.context.btn2Str||this.labelBtn2.string,this.nodeJumpOtherGame.active=c.default.canGameInterPush1(3),this.nodeJumpOtherGame.active&&0==this.nodeJumpOtherGame.children.length&&((new p.default).parent=this.nodeJumpOtherGame),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.context.adEventId&&(this.context.confirm(),this.closeDialog())},t.prototype.onTouchButton1=function(e){e.isClick()&&(this.context.refuse(),this.closeDialog())},t.prototype.onTouchButton2=function(e){e.isClick()&&d.default.triggerAdEvent(this.context.adEventId,null,!0)},t}(l.default);r.default=f,cc._RF.pop()},{}],vAdReviveXiuxian:[function(e,t,i){"use strict";cc._RF.push(t,"534821GtnpJFrxUlo+mABD+","vAdReviveXiuxian");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("DialogBase"),c=o("ViewBase"),u=o("Const"),h=o("mgrAd"),p=o("mgrBannerInt"),f=o("mgrChannel"),g=o("mgrDirector"),v=o("mgrGame"),_=o("mgrSdk"),y=o("mgrSound"),m=o("vJumpOtherGame"),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.buttonNative=null,t.labelBtn1=null,t.labelBtn2=null,t.labelContent=null,t.nodeBtnNative=null,t.nodeBtns=null,t.nodeFish=null,t.nodeJumpOtherGame=null,t.nodeWhole=null,t.spriteAd=null,t.bXiuxian=!1,t._bToBottom=!1,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vAdReviveXiuxian"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[l.default,"onTouchButton1"],CC_button2:[l.default,"onTouchButton2"],CC_buttonNative:[l.default,"onTouchButtonNative"],CC_labelBtn1:[cc.Label],CC_labelBtn2:[cc.Label],CC_labelContent:[cc.Label],CC_nodeBtnNative:[cc.Node],CC_nodeBtns:[cc.Node],CC_nodeFish:[cc.Node],CC_nodeJumpOtherGame:[cc.Node],CC_nodeWhole:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){var t=this,i=_.default.getCopNumberValueByKey("btn_to_banner_recover_delay"),n=v.default.getGameSucToBottomInfo("b_btn_to_banner2"),o=n[0],r=n[1];o?r?i<=0?this._bToBottom=!1:(this._bToBottom=!0,cc.tween(this).delay(i).call(function(){t._bToBottom=!1,p.default.removeCustomDisableBannerViewName("vAdReviveXiuxian");var e=t.getDialogName();t.sendMsg("MSG_DIALOG_ONLOAD",{viewName:e,dialog:t,customUuid:t.getNodeCustomUuid(),zIndex:t.context.globalDialogzIndex||u.default.GLOBAL_ORDER_DIALOG,bDisableInt:t.context.bDisableInt}),t.refreshWhole()}).start()):this._bToBottom=!0:this._bToBottom=!1,this._bToBottom?p.default.addCustomDisableBannerViewName("vAdReviveXiuxian"):p.default.removeCustomDisableBannerViewName("vAdReviveXiuxian"),e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.bXiuxian=this.context.bXiuxian,_.default.statisVideoPointEvent(this.context.adEventId,1);var t=null;if(this.bXiuxian){var i=100/(t=this.context.fishNode).width;t.setScale(i),this.nodeFish.addChild(t),this.nodeFish.setPosition(0,this.nodeFish.y)}this.labelContent.string=this.context.content||"\u5185\u5bb9",this.labelBtn1.string=this.context.btn1Str||this.labelBtn1.string,this.labelBtn2.string=this.context.btn2Str||this.labelBtn2.string,this.nodeJumpOtherGame.active=f.default.canGameInterPush1(3),this.nodeJumpOtherGame.active&&0==this.nodeJumpOtherGame.children.length&&((new m.default).parent=this.nodeJumpOtherGame),y.default.play(112),this.refreshWhole(),this.nodeBtnNative.active=this.isCopNativeBannerOpen()&&p.default.isNativeBannerShowing(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_NATIVE_BAR_SHOW:this.onMsgNativeBar})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.context.adEventId&&(this.context.confirm(),this.closeDialog())},t.prototype.refreshWhole=function(){this.nodeWhole.y=this._bToBottom?-250-(g.default.fullHeight/2-u.default.RESOLUTION_RANGE_ALLOW.minHeight/2):0},t.prototype.onTouchButton1=function(e){e.isClick()&&(this.context.refuse(),this.closeDialog())},t.prototype.onTouchButton2=function(e){e.isClick()&&h.default.triggerAdEvent(this.context.adEventId,null,!0)},t.prototype.onTouchButtonNative=function(e){e.isClick()&&(this.nodeBtnNative.active=!1,this.sendMsg("MSG_EXTRA_NATIVE_BANNER_CLICK"))},t.prototype.onMsgNativeBar=function(e){this.nodeBtnNative.active=e.show&&this.isCopNativeBannerOpen()},t.prototype.isCopNativeBannerOpen=function(){return 1==_.default.getCopNumberValueByKey("b_native_banner_button_show3")},s([c.default.requireResourceLoaded],t.prototype,"refreshWhole",null),t}(d.default);r.default=S,cc._RF.pop()},{}],vAdRevive:[function(e,t,i){"use strict";cc._RF.push(t,"8df51UbdktIB4GjMakULxhS","vAdRevive");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("Tools"),c=o("DialogBase"),u=o("ViewBase"),h=o("Const"),p=o("mgrAd"),f=o("mgrBannerInt"),g=o("mgrCfg"),v=o("mgrChannel"),_=o("mgrDirector"),y=o("mgrFishSkin"),m=o("mgrGame"),S=o("mgrSdk"),b=o("Fish"),C=o("vJumpOtherGame"),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.buttonNative=null,t.labelBtn1=null,t.labelBtn2=null,t.labelContent=null,t.labelResultFish=null,t.nodeBtnNative=null,t.nodeBtns=null,t.nodeFish=null,t.nodeJumpOtherGame=null,t.nodeWhole=null,t.spriteAd=null,t.bIron=!1,t.bBeast=!1,t.bString=!1,t.bLife=!1,t.bQueen=!1,t.bGoddess=!1,t.bAnchor=!1,t.bDevice=!1,t.bGun=!1,t.bMoto=!1,t.bSnacks=!1,t.bDNA=!1,t.bXiuxian=!1,t.bHouse=!1,t.bInsect=!1,t.bQiQiang=!1,t.bQiQiangLuomu=!1,t.bBarbecue=!1,t.b2048=!1,t.bFirearms=!1,t.bStar=!1,t.bDaugther=!1,t.bLuoBo=!1,t._bToBottom=!1,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vAdRevive"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[l.default,"onTouchButton1"],CC_button2:[l.default,"onTouchButton2"],CC_buttonNative:[l.default,"onTouchButtonNative"],CC_labelBtn1:[cc.Label],CC_labelBtn2:[cc.Label],CC_labelContent:[cc.Label],CC_labelResultFish:[cc.Label],CC_nodeBtnNative:[cc.Node],CC_nodeBtns:[cc.Node],CC_nodeFish:[cc.Node],CC_nodeJumpOtherGame:[cc.Node],CC_nodeWhole:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){var t=this,i=S.default.getCopNumberValueByKey("btn_to_banner_recover_delay"),n=m.default.getGameSucToBottomInfo("b_btn_to_banner2"),o=n[0],r=n[1];o?r?i<=0?this._bToBottom=!1:(this._bToBottom=!0,cc.tween(this).delay(i).call(function(){t._bToBottom=!1,f.default.removeCustomDisableBannerViewName("vAdRevive");var e=t.getDialogName();t.sendMsg("MSG_DIALOG_ONLOAD",{viewName:e,dialog:t,customUuid:t.getNodeCustomUuid(),zIndex:t.context.globalDialogzIndex||h.default.GLOBAL_ORDER_DIALOG,bDisableInt:t.context.bDisableInt}),t.refreshWhole()}).start()):this._bToBottom=!0:this._bToBottom=!1,this._bToBottom?f.default.addCustomDisableBannerViewName("vAdRevive"):f.default.removeCustomDisableBannerViewName("vAdRevive"),e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.bIron=this.context.bIron,this.bBeast=this.context.bBeast,this.bString=this.context.bString,this.bLife=this.context.bLife,this.bQueen=this.context.bQueen,this.bGoddess=this.context.bGoddess,this.bAnchor=this.context.bAnchor,this.bDevice=this.context.bDevice,this.bGun=this.context.bGun,this.bMoto=this.context.bMoto,this.bSnacks=this.context.bSnacks,this.bDNA=this.context.bDNA,this.bXiuxian=this.context.bXiuxian,this.bHouse=this.context.bHouse,this.bInsect=this.context.bInsect,this.bQiQiang=this.context.bQiQiang,this.bQiQiangLuomu=this.context.bQiQiangLuomu,this.bBarbecue=this.context.bBarbecue,this.b2048=this.context.b2048,this.bFirearms=this.context.bFirearms,this.bStar=this.context.bStar,this.bDaugther=this.context.bDaugther,this.bLuoBo=this.context.bLuoBo,S.default.statisVideoPointEvent(this.context.adEventId,1);var t=null;if(this.bBeast){var i=200/(t=this.context.fishNode).width;t.setScale(i),this.nodeFish.addChild(t),this.nodeFish.setPosition(0,this.nodeFish.y)}else if(this.bString||this.bLife||this.bQueen||this.bGoddess||this.bAnchor||this.bDevice||this.bMoto||this.bSnacks||this.bDNA||this.bXiuxian||this.bHouse||this.bInsect||this.bQiQiang||this.bQiQiangLuomu||this.bBarbecue||this.bFirearms||this.bStar||this.bLuoBo)i=100/(t=this.context.fishNode).width,t.setScale(i),this.nodeFish.addChild(t),this.nodeFish.setPosition(0,this.nodeFish.y);else if(this.bGun||this.bDaugther)i=50/(t=this.context.fishNode).width,t.setScale(i),this.nodeFish.addChild(t),this.nodeFish.setPosition(0,this.nodeFish.y);else if(this.b2048)this.nodeFish.setPosition(0,this.nodeFish.y),this.labelResultFish.string=d.default.formatNumFish2048(this.context.fishId);else{var n=g.default.get_from_fish_db(this.context.fishId),o=n.spineId;1==this.context.fishId&&(o=y.default.getPlayerInitFishSpineId());var r=g.default.get_from_spine_db(o);t=new b.default({fishId:n.id,bPlayer:!0,bIron:this.bIron}),this.bIron&&this.nodeFish.setPosition(0,this.nodeFish.y),this.nodeFish.addChild(t),this.nodeFish.angle=-90,this.nodeFish.scale=1/r.scaleY*.9}this.labelContent.string=this.context.content||"\u5185\u5bb9",this.labelBtn1.string=this.context.btn1Str||this.labelBtn1.string,this.labelBtn2.string=this.context.btn2Str||this.labelBtn2.string,this.nodeJumpOtherGame.active=v.default.canGameInterPush1(3),this.nodeJumpOtherGame.active&&0==this.nodeJumpOtherGame.children.length&&((new C.default).parent=this.nodeJumpOtherGame),this.refreshWhole(),this.nodeBtnNative.active=this.isCopNativeBannerOpen()&&f.default.isNativeBannerShowing(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_NATIVE_BAR_SHOW:this.onMsgNativeBar})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.context.adEventId&&(this.context.confirm(),this.closeDialog())},t.prototype.refreshWhole=function(){this.nodeWhole.y=this._bToBottom?-250-(_.default.fullHeight/2-h.default.RESOLUTION_RANGE_ALLOW.minHeight/2):0},t.prototype.onTouchButton1=function(e){e.isClick()&&(this.context.refuse(),this.closeDialog())},t.prototype.onTouchButton2=function(e){e.isClick()&&p.default.triggerAdEvent(this.context.adEventId,null,!0)},t.prototype.onTouchButtonNative=function(e){e.isClick()&&(this.nodeBtnNative.active=!1,this.sendMsg("MSG_EXTRA_NATIVE_BANNER_CLICK"))},t.prototype.onMsgNativeBar=function(e){this.nodeBtnNative.active=e.show&&this.isCopNativeBannerOpen()},t.prototype.isCopNativeBannerOpen=function(){return 1==S.default.getCopNumberValueByKey("b_native_banner_button_show3")},s([u.default.requireResourceLoaded],t.prototype,"refreshWhole",null),t}(c.default);r.default=I,cc._RF.pop()},{}],vAdSkinDialog:[function(e,t,i){"use strict";cc._RF.push(t,"1909bU4ZCtOhIyVqpyI8lxZ","vAdSkinDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("Tools"),c=o("DialogBase"),u=o("ViewBase"),h=o("mgrAd"),p=o("mgrCfg"),f=o("mgrFishSkin"),g=o("mgrPlayer"),v=o("mgrSdk"),_=o("mgrTip"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAd=null,t.buttonClose=null,t.labelBtn1=null,t.labelBtn2=null,t.labelTitle=null,t.nodeBtns=null,t.nodeJumpOtherGame=null,t.nodeSkin2=null,t.nodeSkin3=null,t.spriteAd=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vAdSkinDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAd:[l.default,"onTouchButtonAd"],CC_buttonClose:[l.default,"onTouchButtonClose"],CC_labelBtn1:[cc.Label],CC_labelBtn2:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeBtns:[cc.Node],CC_nodeJumpOtherGame:[cc.Node],CC_nodeSkin2:[cc.Node],CC_nodeSkin3:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this);var t=[];f.default.isSkinUnlocked(2)||t.push(2),f.default.isSkinUnlocked(3)||t.push(3),this.skinId=d.default.extractOne(t),this.fillData(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),h.default.preCheckAdNoCd("video_unlock_skin")&&v.default.statisVideoPointEvent("video_unlock_skin",1)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){cc.log("skinId",this.skinId),this.nodeSkin2.active=2==this.skinId,this.nodeSkin3.active=3==this.skinId},t.prototype.onTouchButtonAd=function(e){e.isClick()&&h.default.triggerAdEvent("video_unlock_skin",null,!0)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgAdEventSuccessd=function(e){if("video_unlock_skin"==e.adEventId){var t=this.skinId,i=p.default.get_from_fish_skin_db(t);g.default.addItemAmount(i.itemId,1,"\u89e3\u9501\u76ae\u80a4"),f.default.setCurSkinId(t),_.default.showMsgTip("\u89e3\u9501\u6210\u529f\uff01"),this.closeDialog()}},s([u.default.requireResourceLoaded],t.prototype,"fillData",null),t}(c.default);r.default=y,cc._RF.pop()},{}],vAdStartDialog:[function(e,t,i){"use strict";cc._RF.push(t,"2329deUmTFE8qjVZaIto2Oi","vAdStartDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("DialogBase"),c=o("ViewBase"),u=o("Const"),h=o("mgrAd"),p=o("mgrBannerInt"),f=o("mgrCfg"),g=o("mgrChannel"),v=o("mgrDirector"),_=o("mgrFishSkin"),y=o("mgrGame"),m=o("mgrSdk"),S=o("Fish"),b=o("vJumpOtherGame"),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.buttonNative=null,t.labelBtn1=null,t.labelBtn2=null,t.labelContent=null,t.nodeBtnNative=null,t.nodeBtns=null,t.nodeFish=null,t.nodeJumpOtherGame=null,t.nodeWhole=null,t.spriteAd=null,t.bIron=!1,t._bToBottom=!1,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vAdStartDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[l.default,"onTouchButton1"],CC_button2:[l.default,"onTouchButton2"],CC_buttonNative:[l.default,"onTouchButtonNative"],CC_labelBtn1:[cc.Label],CC_labelBtn2:[cc.Label],CC_labelContent:[cc.Label],CC_nodeBtnNative:[cc.Node],CC_nodeBtns:[cc.Node],CC_nodeFish:[cc.Node],CC_nodeJumpOtherGame:[cc.Node],CC_nodeWhole:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){var t=this,i=m.default.getCopNumberValueByKey("btn_to_banner_recover_delay"),n=y.default.getGameSucToBottomInfo("b_btn_to_banner2"),o=n[0],r=n[1];o?r?i<=0?this._bToBottom=!1:(this._bToBottom=!0,cc.tween(this).delay(i).call(function(){t._bToBottom=!1,p.default.removeCustomDisableBannerViewName("vAdStartDialog");var e=t.getDialogName();t.sendMsg("MSG_DIALOG_ONLOAD",{viewName:e,dialog:t,customUuid:t.getNodeCustomUuid(),zIndex:t.context.globalDialogzIndex||u.default.GLOBAL_ORDER_DIALOG,bDisableInt:t.context.bDisableInt}),t.refreshWhole()}).start()):this._bToBottom=!0:this._bToBottom=!1,this._bToBottom?p.default.addCustomDisableBannerViewName("vAdStartDialog"):p.default.removeCustomDisableBannerViewName("vAdStartDialog"),e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.bIron=this.context.bIron,m.default.statisVideoPointEvent(this.context.adEventId,1);var t=f.default.get_from_fish_db(this.context.fishId),i=t.spineId;1==this.context.fishId&&(i=_.default.getPlayerInitFishSpineId());var n=f.default.get_from_spine_db(i),o=new S.default({fishId:t.id,bPlayer:!0,bIron:this.bIron});this.bIron&&this.nodeFish.setPosition(0,this.nodeFish.y),this.nodeFish.addChild(o),this.nodeFish.angle=-90,this.nodeFish.scale=1/n.scaleY*.9,this.labelContent.string=this.context.content||"\u5185\u5bb9",this.labelBtn1.string=this.context.btn1Str||this.labelBtn1.string,this.labelBtn2.string=this.context.btn2Str||this.labelBtn2.string,this.nodeJumpOtherGame.active=g.default.canGameInterPush1(3),this.nodeJumpOtherGame.active&&0==this.nodeJumpOtherGame.children.length&&((new b.default).parent=this.nodeJumpOtherGame),this.refreshWhole(),this.nodeBtnNative.active=this.isCopNativeBannerOpen()&&p.default.isNativeBannerShowing(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_NATIVE_BAR_SHOW:this.onMsgNativeBar})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.context.adEventId&&(this.context.confirm(),this.closeDialog())},t.prototype.refreshWhole=function(){this.nodeWhole.y=this._bToBottom?-400-(v.default.fullHeight/2-u.default.RESOLUTION_RANGE_ALLOW.minHeight/2):0},t.prototype.onTouchButton1=function(e){e.isClick()&&(this.context.refuse(),this.closeDialog())},t.prototype.onTouchButton2=function(e){e.isClick()&&h.default.triggerAdEvent(this.context.adEventId,null,!0)},t.prototype.onTouchButtonNative=function(e){e.isClick()&&(this.nodeBtnNative.active=!1,this.sendMsg("MSG_EXTRA_NATIVE_BANNER_CLICK"))},t.prototype.onMsgNativeBar=function(e){this.nodeBtnNative.active=e.show&&this.isCopNativeBannerOpen()},t.prototype.isCopNativeBannerOpen=function(){return 1==m.default.getCopNumberValueByKey("b_native_banner_button_show2")},s([c.default.requireResourceLoaded],t.prototype,"refreshWhole",null),t}(d.default);r.default=C,cc._RF.pop()},{}],vAddTimeAd2048Dialog:[function(e,t,i){"use strict";cc._RF.push(t,"a5443fUmy5MOJKY0GiFMS/W","vAddTimeAd2048Dialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrAd"),c=o("mgrSdk"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAd=null,t.buttonClose=null,t.labelBtn2=null,t.nodeBtns=null,t.spriteAd=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vAddTimeAd2048Dialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAd:[s.default,"onTouchButtonAd"],CC_buttonClose:[s.default,"onTouchButtonClose"],CC_labelBtn2:[cc.Label],CC_nodeBtns:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),c.default.statisVideoPointEvent("video_2048_add_time",1),this.spriteAd.loadSpriteFrame(d.default.getAdIconSpr()),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onMsgAdEventSuccessd=function(e){"video_2048_add_time"==e.adEventId&&(this.context.fOnChoosed(!0),this.closeDialog())},t.prototype.onTouchButtonAd=function(e){e.isClick()&&d.default.triggerAdEvent("video_2048_add_time",null,!0)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.context.fOnChoosed(!1),this.closeDialog())},t}(l.default);r.default=u,cc._RF.pop()},{}],vAgeTipDialog:[function(e,t,i){"use strict";cc._RF.push(t,"51083l2O0JAspZnrXcMtVL6","vAgeTipDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrSdk"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.labelContent=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vAgeTipDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[s.default,"onTouchButton1"],CC_labelContent:[cc.Label]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelContent.string=d.default.getLocalConfig().ageLevelInfo},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.onTouchButton1=function(e){e.isClick()&&this.closeDialog()},t}(l.default);r.default=c,cc._RF.pop()},{}],vAnchorSuccessDialog:[function(e,t,i){"use strict";cc._RF.push(t,"bc9a93GKZdPA45NlyCnuHgR","vAnchorSuccessDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonConfirm=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vAnchorSuccessDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonConfirm:[s.default,"onTouchButtonConfirm"]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.onTouchButtonConfirm=function(e){e.isClick()&&this.closeDialog()},t}(o("DialogBase").default);r.default=l,cc._RF.pop()},{}],vBigSkillDialog:[function(e,t,i){"use strict";cc._RF.push(t,"af14eI9PiFOHZjsjlrinBfc","vBigSkillDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("ReuseLayouterVBox"),c=o("ReuseList"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("vBigSkillItem"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.nodeSkillList=null,t.skillDatas=[],t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vBigSkillDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_nodeSkillList:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){var t=this;e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd});var i=new c.default;i.setLayouter((new d.default).setCellSize(372,200).setGap(10).setPending(5)),i.setCreator(function(e){var i=new g.default({fonTrtStart:function(e){t.tryStartGame(e)}});i.parent=e,e.item=i}),i.setSetter(function(e,t){e.item.fillData(t)}),i.parent=this.nodeSkillList,i.setContentSize(this.nodeSkillList.getContentSize()),this.skillList=i;var n=h.default.getDb("big_mode_skill_db");for(var o in n)this.skillDatas.push(n[o]);this.skillList.setDatas(this.skillDatas)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.tryStartGame=function(e){var t=this;f.default.isMaxSkill(e)||!u.default.preCheckAdNoCd("video_big_skill_try_use")?(f.default.curSkillId=e,f.default.bAdSkillLevel=!1,cc.director.getCollisionManager().enabled=!0,p.default.enterScene("vGameSkillScene"),this.closeDialog()):p.default.openDialog("vFreeMaxSkillDialog",{id:e,fonClose:function(){f.default.curSkillId=e,f.default.bAdSkillLevel=!1,cc.director.getCollisionManager().enabled=!0,p.default.enterScene("vGameSkillScene"),t.closeDialog()}})},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgAdEventSuccessd=function(e){var t=e,i=t.adEventId;"video_big_skill_up"==i?(console.log("\u5927\u62db\u5347\u7ea7",t),f.default.skillLevelUp(e.userData.skillId),this.skillList.setDatas(this.skillDatas)):"video_big_skill_try_use"==i&&(f.default.curSkillId=e.userData.skillId,f.default.bAdSkillLevel=!0,cc.director.getCollisionManager().enabled=!0,p.default.enterScene("vGameSkillScene"),this.closeDialog())},t}(l.default);r.default=v,cc._RF.pop()},{}],vBigSkillItem:[function(e,t,i){"use strict";cc._RF.push(t,"58e863EG0ZCbpib0/2DadzW","vBigSkillItem");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("ViewBase"),d=o("mgrAd"),c=o("mgrDirector"),u=o("mgrGame"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonUpLevel=null,t.buttonUse=null,t.labelDesc=null,t.labelLevel=null,t.labelUpDesc=null,t.spriteIcon=null,t.spriteName=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vBigSkillItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonUpLevel:[s.default,"onTouchButtonUpLevel"],CC_buttonUse:[s.default,"onTouchButtonUse"],CC_labelDesc:[cc.Label],CC_labelLevel:[cc.Label],CC_labelUpDesc:[cc.Label],CC_spriteIcon:[cc.Sprite],CC_spriteName:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.data&&this.fillData(this.data)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){if(this.data=e,this.isResourceLoaded()){this.spriteName.loadSpriteFrame(this.data.name),this.spriteIcon.loadSpriteFrame(this.data.icon),this.labelUpDesc.string=this.data.upDesc;var t=u.default.getSkillLevel(this.data.id),i=this.data.numLevel[t-1],n=this.data.company;n=n.replace("s%",i.toString());var o=this.data.desc.split(";"),r=this.data.numLevel[t];if(o.length>1?this.labelDesc.getComponent(cc.RichText).string="<color=#ffffff > "+o[0]+" < /c><color=#13ff00>"+n+"<color=#ffffff> "+o[1]+"</c >":this.labelDesc.getComponent(cc.RichText).string="<color=#ffffff > "+o[0]+" < /c><color=#13ff00>"+n+"</c >",r){var a=this.data.upDesc.replace("s%",r.toString());this.labelUpDesc.string="\u4e0b\u7ea7:"+a}else this.labelUpDesc.string="\u5df2\u6ee1\u7ea7";this.labelLevel.string="\u7b49\u7ea7: "+u.default.getSkillLevel(this.data.id),this.buttonUpLevel.node.active=!u.default.isMaxSkill(this.data.id)&&d.default.preCheckAdNoCd("video_big_skill_up")}},t.prototype.onTouchButtonUpLevel=function(e){e.isClick()&&c.default.openDialog("vBigSkillLevleAdDialog",{data:this.data})},t.prototype.onTouchButtonUse=function(e){e.isClick()&&this.context&&this.context.fonTrtStart&&this.context.fonTrtStart(this.data.id)},t}(l.default);r.default=h,cc._RF.pop()},{}],vBigSkillLevleAdDialog:[function(e,t,i){"use strict";cc._RF.push(t,"2be09XbnhtP7rEiJoaIZGOU","vBigSkillLevleAdDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrAd"),c=o("mgrSdk"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAd=null,t.buttonClose=null,t.labelBtn2=null,t.nodeBtns=null,t.spriteAd=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vBigSkillLevleAdDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAd:[s.default,"onTouchButtonAd"],CC_buttonClose:[s.default,"onTouchButtonClose"],CC_labelBtn2:[cc.Label],CC_nodeBtns:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),c.default.statisVideoPointEvent("video_big_skill_up",1),this.spriteAd.loadSpriteFrame(d.default.getAdIconSpr())},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonAd=function(e){e.isClick()&&(d.default.triggerAdEvent("video_big_skill_up",{skillId:this.context.data.id},!0),this.closeDialog())},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t}(l.default);r.default=u,cc._RF.pop()},{}],vCdkDialog:[function(e,t,i){"use strict";cc._RF.push(t,"18455JXpl5Kgpb+KBBoEcot","vCdkDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrSdk"),c=o("mgrTip"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonSure=null,t.editboxInput=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vCdkDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_buttonSure:[s.default,"onTouchButtonSure"],CC_editboxInput:[cc.EditBox]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_SDK_USE_CDK_SUCCESSFUL:this.onMsgSdkUseCdkSuccessful})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonSure=function(e){if(e.isClick()){var t=this.editboxInput.string;t?d.default.useCdk(t):c.default.showMsgTip("\u8bf7\u8f93\u5165\u5151\u6362\u7801")}},t.prototype.onMsgSdkUseCdkSuccessful=function(){this.closeDialog()},t}(l.default);r.default=u,cc._RF.pop()},{}],vChanelWelfareDialog:[function(e,t,i){"use strict";cc._RF.push(t,"3bf42rMDGBBVLqNHR4Z3bPb","vChanelWelfareDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("ReuseLayouterVGrid"),c=o("ReuseList"),u=o("Const"),h=o("mgrPlayer"),p=o("mgrSdk"),f=o("vChanelWelfareItem"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.nodeBtnClose=null,t.nodeList=null,t.spritePartIcon1=null,t.spritePartIcon2=null,t.curPartIds=[],t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vChanelWelfareDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_nodeBtnClose:[cc.Node],CC_nodeList:[cc.Node],CC_spritePartIcon1:[cc.Sprite],CC_spritePartIcon2:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.refresh(),this.registerListeners({MSG_SDK_OPEN_JUMP_RESULT:this.onMsgSdkOpenJumpResult.bind(this),MSG_SDK_JUMP_OTHER_GAME_REWARD_RESULT:this.onMsgSdkJumpOtherGameRewardResult.bind(this)}),p.default.openJump(""+u.default.gameId,"reward")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new c.default;e.setLayouter((new d.default).setCellSize(372,88).setCols(1).setGap(0,5).setPending(5)),e.setCreator(function(e){var t=new f.default;t.parent=e,e.item=t}),e.setSetter(function(e,t){e.item.fillData(t)}),e.parent=this.nodeList,e.setContentSize(this.nodeList.getContentSize()),this.list=e},t.prototype.refresh=function(){},t.prototype.onMsgSdkOpenJumpResult=function(e){if(console.log("vChanelWelfareDialog\tonMsgSdkOpenJumpResult"),"reward"==e.type){var t=e.jumpInfo;this.list.setDatas(t)}},t.prototype.onMsgSdkJumpOtherGameRewardResult=function(e){e.bSuccessful&&(console.log("onMsgSdkJumpOtherGameRewardResult bSuccessful"),p.default.openJump(""+u.default.gameId,"reward"),h.default.addItemAmount(999,1,"\u798f\u5229\u4efb\u52a1\u7269\u54c1"),this.refresh())},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t}(l.default);r.default=g,cc._RF.pop()},{}],vChanelWelfareItem:[function(e,t,i){"use strict";cc._RF.push(t,"4a098pQitlJda0DDbAkbX7d","vChanelWelfareItem");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("ViewBase"),d=o("mgrSdk"),c=o("mgrShader"),u=o("mgrTip"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGo=null,t.labelBtnName=null,t.labelGameDes=null,t.labelGameName=null,t.spriteBtnBg=null,t.spriteGameIcon=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vChanelWelfareItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonGo:[s.default,"onTouchButtonGo"],CC_labelBtnName:[cc.Label],CC_labelGameDes:[cc.Label],CC_labelGameName:[cc.Label],CC_spriteBtnBg:[cc.Sprite],CC_spriteGameIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(this.context.jumpInfo)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){this.context.jumpInfo=e,this.refresh()},t.prototype.refresh=function(){if(this.isResourceLoaded()){var e=this.context.jumpInfo;e&&(e.url&&this.spriteGameIcon.loadSpriteFrameAndKeepSize(e.url),console.log("vChanelWelfareItem"),e.appName&&(this.labelGameName.string=e.appName),e.bReceived?(this.labelBtnName.string="\u5df2\u4f53\u9a8c",c.default.setGray(this.labelBtnName),c.default.setGray(this.spriteBtnBg)):(this.labelBtnName.string="\u7acb\u5373\u4f53\u9a8c",c.default.setNormal(this.labelBtnName),c.default.setNormal(this.spriteBtnBg)))}},t.prototype.onTouchButtonGo=function(e){e.isClick()&&(this.context.jumpInfo.bReceived?u.default.showMsgTip("\u5c1d\u8bd5\u4e00\u4e0b\u5176\u4ed6\u6e38\u620f\u5427"):this.context.jumpInfo&&this.context.jumpInfo.index&&d.default.jumpOtherGame(this.context.jumpInfo.index,"reward"))},t}(l.default);r.default=h,cc._RF.pop()},{}],vCombineScene:[function(e,t,i){"use strict";cc._RF.push(t,"2c843EYYeFOWZCg3kMGkhhd","vCombineScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrDirector"),p=o("mgrFishSkin"),f=o("mgrSdk"),g=o("mgrSound"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.st_init=1,t.st_ready=2,t.st_drop=3,t.st_fail=4,t.st_win=5,t.maxFishId=1,t.reamainTime=0,t.readyFish=null,t.buttonBack=null,t.nodeEvent=null,t.nodeGameRoot=null,t.nodeSensor=null,t.nodeTemplate=null,t.nodeTemplate1=null,t.nodeTemplate10=null,t.nodeTemplate11=null,t.nodeTemplate1_skin2=null,t.nodeTemplate1_skin3=null,t.nodeTemplate2=null,t.nodeTemplate3=null,t.nodeTemplate4=null,t.nodeTemplate5=null,t.nodeTemplate6=null,t.nodeTemplate7=null,t.nodeTemplate8=null,t.nodeTemplate9=null,t.spriteLine=null,t}return a(t,e),t.prototype._getResourceName=function(){return"scene/vCombineScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_nodeEvent:[cc.Node],CC_nodeGameRoot:[cc.Node],CC_nodeSensor:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate1_skin2:[cc.Node],CC_nodeTemplate1_skin3:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_spriteLine:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_ready,"inReady","exeReady","outReady"),this.registerState(this.st_drop,"inDrop","exeDrop","outDrop"),this.registerState(this.st_win,"inWin","exeWin","outWin"),this.registerState(this.st_fail,"inFail","exeFail","outFail"),this.setNextState(this.st_init),this.nodeTemplate.active=!1,u.default.isCanTriggerTemplateAd("single_template_mode3")&&u.default.triggerAdEvent("single_template_mode3"),u.default.isCanTriggerTemplateAd("vertical_template_mode3")&&u.default.triggerAdEvent("vertical_template_mode3"),this.registerListeners({MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode3"),u.default.closeAdv("vertical_template_mode3")},t.prototype.addFish=function(e,t,i,n){console.log("add fish",e,t,i),this.maxFishId=Math.max(this.maxFishId,e);var o=this["nodeTemplate"+e];if(1==e&&1!=p.default.getCurSkinId()&&(o=this["nodeTemplate1_skin"+p.default.getCurSkinId()]),o){var r=cc.instantiate(o);r.active=!0,r.parent=this.nodeGameRoot,r.position=this.nodeGameRoot.convertToNodeSpaceAR(cc.v2(t,i)),r.angle=n,r.scale=.9*r.scale,r.fishId=e;var a=r.getComponent(cc.RigidBody);return a&&(a.enabledContactListener=!0,a.syncPosition(!0),a.syncRotation(!0),a.onBeginContact=this.onFishContact.bind(this)),r}},t.prototype.inInit=function(){cc.log("vCombineScene.inInit"),d.default.registerTouchHandler(this.nodeEvent,this.onTouchNodeEvent.bind(this)),this.nodeSensor.getComponent(cc.RigidBody).onBeginContact=this.onSensorContact.bind(this),this.setNextState(this.st_ready)},t.prototype.exeInit=function(){},t.prototype.outInit=function(){cc.log("vCombineScene.outInit")},t.prototype.inReady=function(){var e;cc.log("vCombineScene.inReady");var t=((e={})[1]=[{level:1,weight:1}],e[2]=[{level:1,weight:2},{level:2,weight:1}],e[3]=[{level:1,weight:3},{level:2,weight:2},{level:3,weight:1}],e[4]=[{level:1,weight:4},{level:2,weight:3},{level:3,weight:2},{level:4,weight:1}],e[5]=[{level:1,weight:5},{level:2,weight:4},{level:3,weight:3},{level:4,weight:2},{level:5,weight:1}],e[6]=[{level:1,weight:6},{level:2,weight:5},{level:3,weight:4},{level:4,weight:3},{level:5,weight:2},{level:6,weight:1}],e[7]=[{level:1,weight:7},{level:2,weight:6},{level:3,weight:5},{level:4,weight:4},{level:5,weight:3},{level:6,weight:2},{level:7,weight:1}],e[8]=[{level:1,weight:7},{level:2,weight:6},{level:3,weight:5},{level:4,weight:4},{level:5,weight:3},{level:6,weight:2},{level:7,weight:1}],e[9]=[{level:1,weight:7},{level:2,weight:6},{level:3,weight:5},{level:4,weight:4},{level:5,weight:3},{level:6,weight:2},{level:7,weight:1}],e[10]=[{level:1,weight:7},{level:2,weight:6},{level:3,weight:5},{level:4,weight:4},{level:5,weight:3},{level:6,weight:2},{level:7,weight:1}],e)[this.maxFishId];if(t){var i=d.default.calcWheelTarget(t,"weight");console.log("v",i);var n=i.level,o=this.addFish(n,288,950,d.default.random(-10,10));this.readyFish=o,o.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static}},t.prototype.exeReady=function(){cc.isValid(this.readyFish)&&this.readyFish.fishId||this.setNextState(this.st_drop)},t.prototype.outReady=function(){cc.log("vCombineScene.outReady")},t.prototype.inDrop=function(){cc.log("vCombineScene.inDrop"),this.reamainTime=.3},t.prototype.exeDrop=function(e){this.reamainTime-=e,this.reamainTime<=0&&this.setNextState(this.st_ready)},t.prototype.outDrop=function(){cc.log("vCombineScene.outDrop")},t.prototype.inWin=function(){cc.log("vCombineScene.inWin");var e=null;g.default.play(102);for(var t=0;t<this.nodeGameRoot.children.length;t++){var i=this.nodeGameRoot.children[t];if(11==i.fishId){e=i;break}}e&&(e.removeComponent(cc.PhysicsBoxCollider),e.removeComponent(cc.RigidBody),e.runAction(cc.spawn(cc.moveTo(.3,cc.v2(0,0)),cc.rotateTo(.3,180)))),f.default.statisOnStageEnd("80005",1,"\u5173\u5361\u7ed3\u675f"),f.default.statisCommonEvent(80001),l.default.callLater(2,function(){h.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\uff0c\u4f60\u6210\u529f\u53ec\u5524\u4e86\u795e\u9f99\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){h.default.enterScene("vHubScene")}]})},this)},t.prototype.exeWin=function(){},t.prototype.outWin=function(){},t.prototype.inFail=function(){cc.log("vCombineScene.inFail"),this.spriteLine.node.runAction(cc.sequence(cc.tintTo(.5,255,0,0),cc.tintTo(.5,255,255,255),cc.tintTo(.5,255,0,0),cc.tintTo(.5,255,255,255))),f.default.statisOnStageEnd("80005",0,"\u5173\u5361\u7ed3\u675f"),f.default.statisCommonEvent(80001),l.default.callLater(2,function(){h.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u53ec\u5524\u795e\u9f99\u5931\u8d25\u3002",btnTexts:["\u786e\u5b9a"],callbacks:[function(){h.default.enterScene("vHubScene")}]})},this)},t.prototype.exeFail=function(){},t.prototype.outFail=function(){cc.log("vCombineScene.outFail")},t.prototype.onTouchButtonBack=function(e){if(e.isClick()){var t=[function(){},function(){h.default.enterScene("vHubScene")}];h.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:t})}},t.prototype.onTouchNodeEvent=function(e){if((!e.isClick()||this.getState()==this.st_ready)&&this.getState()==this.st_ready){var t=this.readyFish;if(cc.isValid(t))if("began"==e.name){var i=t.parent.convertToNodeSpaceAR(e.getLocation()),n=d.default.clampf(i.x,-238,238);t.x=n,(o=t.getComponent(cc.RigidBody)).syncPosition(!0)}else if("moved"==e.name)i=t.parent.convertToNodeSpaceAR(e.getLocation()),n=d.default.clampf(i.x,-238,238),t.x=n,(o=t.getComponent(cc.RigidBody)).syncPosition(!0);else{var o;(o=t.getComponent(cc.RigidBody)).syncPosition(!0),o.type=cc.RigidBodyType.Dynamic,o.linearVelocity=cc.v2(0,-600),this.setNextState(this.st_drop)}}},t.prototype.onFishContact=function(e,t,i){var n=t.node,o=i.node;if(cc.isValid(n)&&cc.isValid(o)){var r=n.fishId,a=o.fishId;if(r&&a&&(n.contactCount=(n.contactCount||0)+1,r==a)){console.log("combine fish",r,d.default.distance(n.x,n.y,o.x,o.y));var s=(n.x+o.x)/2,l=(n.y+o.y)/2,c=n.parent.convertToWorldSpaceAR(cc.v2(s,l)),u=r+1;this.addFish(u,c.x,c.y,d.default.random(360)),u>=11&&this.setNextState(this.st_win),n.fishId=null,n.destroy(),o.fishId=null,o.destroy()}}},t.prototype.onSensorContact=function(e,t,i){cc.log("onSensorContact",e,t,i);var n=i.node;if(cc.isValid(n)){var o=n.contactCount;cc.log("  onSensorContact",n.fishId,o),o>1&&this.setNextState(this.st_fail)}},t.prototype.onMsgOnKeyDown=function(e){cc.log("vCombineScene.onMsgOnKeyDown",e),"w"==e?this.setNextState(this.st_win):"f"==e&&this.setNextState(this.st_fail)},t}(c.default);r.default=v,cc._RF.pop()},{}],vDebugInfoDialog:[function(e,t,i){"use strict";cc._RF.push(t,"47a90qBLBVD9os4hYdSvxl6","vDebugInfoDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Timer"),l=o("Tools"),d=o("DebugMenu"),c=o("DialogBase"),u=o("ReuseLayouterVBox"),h=o("ReuseList"),p=o("Const"),f=o("mgrCop"),g=o("mgrDebug"),v=o("mgrDirector"),_=o("mgrPlayer"),y=o("mgrRecord"),m=o("mgrSdk"),S=o("mgrTip"),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeInfo=null,t.nodeMenu=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vDebugInfoDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeInfo:[cc.Node],CC_nodeMenu:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(v.default.size),this.nodeInfo.getComponent(cc.Widget).updateAlignment(),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isShadowEnabled=function(){return!1},t.prototype.buildUi=function(){var e=this,t=new d.default([["\u5173\u95ed",function(){e.closeDialog(!0)}],["time",function(){S.default.showMsgTip(ul.format("time:%s",l.default.time()))}],["\u4f7f\u7528\u6d4b\u8bd5Patch",function(){var e=cc.sys.localStorage.getItem("PATCH_CHANNEL");if(e&&""!=e){var t=ul.format("%s_test_patch",e);cc.sys.localStorage.setItem(p.default.FORCE_PATCH_CHANNEL_NAME_KEY,t||"")}else S.default.showMsgTip("\u672a\u627e\u5230\u6b63\u5e38PATCH CHANNEL\u503c")}],["\u91cd\u7f6e\u5b58\u6863 \u5ef6\u8fdf",function(){S.default.alertPrompt2("\u8b66\u544a","\u5ef6\u8fdf0.5\u79d2\u6e05\u7406\u5b58\u6863\u540e\u65e0\u6cd5\u6062\u590d\uff0c\u5e76\u4e14\u9700\u8981\u91cd\u542f\uff01\uff01\uff01","\u53d6\u6d88","\u6e05\u7406",null,function(){y.default.resetRecord(),S.default.showMsgTip("ojbk"),s.default.callLater(.5,function(){cc.audioEngine.stopAll(),cc.game.restart()},e)})}],["\u91cd\u7f6e\u5b58\u6863 \u7acb\u5373",function(){S.default.alertPrompt2("\u8b66\u544a","\u7acb\u5373\u6e05\u7406\u5b58\u6863\u540e\u65e0\u6cd5\u6062\u590d\uff0c\u5e76\u4e14\u9700\u8981\u91cd\u542f\uff01\uff01\uff01","\u53d6\u6d88","\u6e05\u7406",null,function(){y.default.resetRecord(),cc.audioEngine.stopAll(),cc.game.restart()})}],["log->console",function(){cc.log=console.log,cc.log("cc.log is refrence to cc.info")}],["\u663e\u793a\u6253\u70b9\u4fe1\u606f",function(){g.default.bShowStatisticsInfo=!0,m.default.bShowStatisticsInfo=!0,e.sendMsg("MSG_SHOW_POINT_DEBUG_INFO",{state:g.default.bShowStatisticsInfo?1:0})}],["\u5173\u95ed\u6253\u70b9\u4fe1\u606f",function(){g.default.bShowStatisticsInfo=!1,m.default.bShowStatisticsInfo=!1,e.sendMsg("MSG_SHOW_POINT_DEBUG_INFO",{state:g.default.bShowStatisticsInfo?1:0})}],["\u89e3\u9501\u6240\u6709\u90e8\u4ef6",function(){g.default.debugUnlockAll1()}],["\u83b7\u5f97\u5927\u91cf\u5404\u79cd\u6b21\u6570",function(){g.default.debugUnlockAll2()}]],200,50,4);t.parent=this.nodeMenu,t.x=5,t.y=-5;var i=this.nodeInfo,n=new h.default;n.parent=i,n.setLayouter((new u.default).setCellSize(i.getContentSize().width-8,16).setGap(4).setPending(4)),n.setCreator(function(e){var t=new cc.Node;t.parent=e;var i=t.addComponent(cc.Label);i.fontSize=16,i.lineHeight=16,i.horizontalAlign=cc.Label.HorizontalAlign.LEFT,i.verticalAlign=cc.Label.VerticalAlign.CENTER,i.overflow=cc.Label.Overflow.SHRINK,t.setContentSize(e.getContentSize()),e.label=i}),n.setSetter(function(e,t){e.label.string=t}),n.setContentSize(i.getContentSize());var o=n.addComponent(cc.Widget);o.top=0,o.bottom=0,o.right=0,o.left=0,o.alignMode=cc.Widget.AlignMode.ALWAYS;var r=["\u8c03\u8bd5\u4fe1\u606f\uff1a"];r.push(ul.format("GAME_VERSION = [%s]",p.default.GAME_VERSION)),r.push(ul.format("uid = [%s]",_.default.getUid()));var a=f.default.getCops(),c=Object.keys(a);c.sort(),r.push(""),r.push("cop:");for(var v=0;v<c.length;v++){var b=c[v],C=a[b];r.push(ul.format("  [%s] = [%s]",b,C))}r.push(""),r.push("ultralisk \u6210\u90fd\u96f7\u517d\u4e92\u52a8 \u7248\u6743\u6240\u6709"),n.setDatas(r)},t}(c.default);r.default=b,cc._RF.pop()},{}],vDevTestScene:[function(e,t,i){"use strict";cc._RF.push(t,"d7728C3+aJAF5R+DNx/55Ou","vDevTestScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("SceneBase"),d=o("mgrDirector"),c=o("Const"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBack=null,t.labelTitle=null,t.layoutBg=null,t.nodeButtonItemTemplate=null,t.nodeScrollViewContent=null,t.scrollViewList=null,t}return a(t,e),t.prototype._getResourceName=function(){return"scene/vDevTestScene"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBack:[s.default,"onTouchButtonBack"],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_nodeButtonItemTemplate:[cc.Node],CC_nodeScrollViewContent:[cc.Node],CC_scrollViewList:[cc.ScrollView]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelTitle.string=this.name,this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){for(var e=[["_Game1","vGameScene",{stageId:1}],["_Game2","vGameScene",{stageId:2}],["_Game3","vGameScene",{stageId:3}],["_Game4","vGameScene",{stageId:4}],["_Game5","vGameScene",{stageId:5}],["_Game6","vGameScene",{stageId:6}],["_Game7","vGameScene",{stageId:7}],["_Game8","vGameScene",{stageId:8}],["_Game9","vGameScene",{stageId:9}],["_Game10","vGameScene",{stageId:10}],["_Game11","vGameScene",{stageId:11}],["_Game12","vGameScene",{stageId:12}],["_Game13","vGameScene",{stageId:13}],["_Game14","vGameScene",{stageId:14}],["_Game15","vGameScene",{stageId:15}],["_Game16","vGameScene",{stageId:16}],["_Game17","vGameScene",{stageId:17}],["_Game18","vGameScene",{stageId:18}],["_Game19","vGameScene",{stageId:19}],["_Game20","vGameScene",{stageId:20}],["_stageChoose","vStageChooseDialog"],["_debugInfo","vDebugInfoDialog"],["AnimNode","TestAnimNode"],["Particle","TestParticle",{resolutionRange:{minWidth:2500,maxWidth:2500,minHeight:768,maxHeight:768}}],["Sound","TestSound"],["Spine","TestSpine"]],t=0;t<e.length;t++){var i=e[t],n=i[0],o=i[1],r=i[2],a=cc.instantiate(this.nodeButtonItemTemplate);a.getChildByName("Label").getComponent(cc.Label).string=n,a.parent=this.nodeScrollViewContent,a.name=o,a.context=r,a.getComponent(s.default).registerOnTouchCallback(this.onTouchButtonItem.bind(this))}this.nodeButtonItemTemplate.active=!1,this.scrollViewList.cancelInnerEvents=!1},t.prototype.onTouchButtonBack=function(e){e.isClick()&&d.default.warpSceneWithEffect("vHubScene")},t.prototype.onTouchButtonItem=function(e){if(e.isClick()){e.target.context&&e.target.context.resolutionRange?d.default.refreshCurrentSceneSize(e.target.context.resolutionRange):d.default.refreshCurrentSceneSize(c.default.RESOLUTION_RANGE);var t=cc.instantiate(this.buttonBack.node);d.default.warpSceneWithEffect(e.target.name,e.target.context),t.parent=d.default.getUIRoot(),t.zIndex=1e3,t.getContentSize(),t.getComponent(s.default).registerOnTouchCallback(function(e){e.isClick()&&d.default.warpSceneWithEffect("vDevTestScene")})}},t}(l.default);r.default=u,cc._RF.pop()},{}],vEditorInputBox:[function(e,t,i){"use strict";cc._RF.push(t,"93b1eWsHLpCB6Xz0EUcpJpa","vEditorInputBox");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ViewBase"),d=o("Tools"),c=o("mgrDebug"),u=cc._decorator,h=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editbox=null,t.label=null,t.spriteArrow=null,t._interval=1,t}return a(t,e),t.prototype._getResourceName=function(){return"_devtest/vEditorInputBox"},t.prototype._getResourceBindingConfig=function(){return{CC_editbox:[cc.EditBox],CC_label:[cc.Label],CC_spriteArrow:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this);var t=this.context;null!=t.title&&(this.title=t.title),null!=t.value&&this.setValue(t.value,!0),null!=t.interval&&(this.interval=t.interval),this.editbox.node.on("text-changed",this.onTextChangedEditbox.bind(this)),d.default.registerTouchHandler(this.spriteArrow.node,this.onTouchSpriteArrow.bind(this)),this.setContentSize(this.nodeResource.getContentSize())},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},Object.defineProperty(t.prototype,"title",{set:function(e){this.label.string=e+":"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var e=this.editbox.string;return""==e?0:parseFloat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"interval",{get:function(){return this._interval},set:function(e){this._interval=e},enumerable:!1,configurable:!0}),t.prototype.setValue=function(e,t){this.isResourceLoaded()&&(this.editbox.string=e.toString(),t||this.context.onValueChanged instanceof Function&&this.context.onValueChanged(this.value))},t.prototype.onTextChangedEditbox=function(){this.context.onValueChanged instanceof Function&&this.context.onValueChanged(this.value)},t.prototype.onTouchSpriteArrow=function(e){if("began"==e.name)this._beganValue=this.value;else if("moved"==e.name){var t=e.getStartLocation(),i=e.getLocation().y-t.y,n=Math.floor(i/10);c.default.bPressedCtrl&&(n/=10),this.setValue(this._beganValue+n*this.interval)}},s([h],t)}(l.default));r.default=p,cc._RF.pop()},{}],vEditorNodeController:[function(e,t,i){"use strict";cc._RF.push(t,"94ce1fsb3JM0ZjfNjoezwIW","vEditorNodeController");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},l=function(e,t,i,n){function o(e){return e instanceof i?e:new i(function(t){t(e)})}return new(i||(i=Promise))(function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?i(e.value):o(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())})},d=function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var c=o("ScleableButton"),u=o("ViewBase"),h=o("vEditorInputBox"),p=o("Tools"),f=o("mgrDebug"),g=cc._decorator,v=g.ccclass,_=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAnchorBottom=null,t.buttonAnchorCenter=null,t.buttonAnchorLeft=null,t.buttonAnchorLeftBottom=null,t.buttonAnchorLeftTop=null,t.buttonAnchorRight=null,t.buttonAnchorRightBottom=null,t.buttonAnchorRightTop=null,t.buttonAnchorTop=null,t.buttonEqualScale=null,t.labelPos=null,t.nodeGraphics=null,t.nodeInputBoxApx=null,t.nodeInputBoxApy=null,t.nodeInputBoxOrder=null,t.nodeInputBoxRot=null,t.nodeInputBoxScaleX=null,t.nodeInputBoxScaleY=null,t.nodeInputBoxSkewX=null,t.nodeInputBoxSkewY=null,t.nodeInputBoxX=null,t.nodeInputBoxY=null,t.nodePosDrag=null,t.bEqualScale=!1,t._buttonAnchors=[],t}return a(t,e),t.prototype._getResourceName=function(){return"_devtest/vEditorNodeController"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAnchorBottom:[c.default,"onTouchButtonAnchorBottom"],CC_buttonAnchorCenter:[c.default,"onTouchButtonAnchorCenter"],CC_buttonAnchorLeft:[c.default,"onTouchButtonAnchorLeft"],CC_buttonAnchorLeftBottom:[c.default,"onTouchButtonAnchorLeftBottom"],CC_buttonAnchorLeftTop:[c.default,"onTouchButtonAnchorLeftTop"],CC_buttonAnchorRight:[c.default,"onTouchButtonAnchorRight"],CC_buttonAnchorRightBottom:[c.default,"onTouchButtonAnchorRightBottom"],CC_buttonAnchorRightTop:[c.default,"onTouchButtonAnchorRightTop"],CC_buttonAnchorTop:[c.default,"onTouchButtonAnchorTop"],CC_buttonEqualScale:[c.default,"onTouchButtonEqualScale"],CC_labelPos:[cc.Label],CC_nodeGraphics:[cc.Node],CC_nodeInputBoxApx:[cc.Node],CC_nodeInputBoxApy:[cc.Node],CC_nodeInputBoxOrder:[cc.Node],CC_nodeInputBoxRot:[cc.Node],CC_nodeInputBoxScaleX:[cc.Node],CC_nodeInputBoxScaleY:[cc.Node],CC_nodeInputBoxSkewX:[cc.Node],CC_nodeInputBoxSkewY:[cc.Node],CC_nodeInputBoxX:[cc.Node],CC_nodeInputBoxY:[cc.Node],CC_nodePosDrag:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this);var t=this.addComponent(cc.Widget);t.isAlignRight=!0,t.right=10,t.isAlignVerticalCenter=!0,t.verticalCenter=0,t.alignMode=cc.Widget.AlignMode.ALWAYS},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.setContentSize(this.nodeResource.getContentSize())},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.onEnterFrame(t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){return l(this,void 0,void 0,function(){var e,t,i,n,o,r=this;return d(this,function(){for(e=[{parent:this.nodeInputBoxX,title:"posX",interval:1,onChanged:function(e){r.target.x=e,r.onValueChanged()}},{parent:this.nodeInputBoxY,title:"posY",interval:1,onChanged:function(e){r.target.y=e,r.onValueChanged()}},{parent:this.nodeInputBoxScaleX,title:"sx",interval:.1,onChanged:function(e){r.target.scaleX=e,r.bEqualScale&&(r.target.scaleY=e),r.onValueChanged()}},{parent:this.nodeInputBoxScaleY,title:"sy",interval:.1,onChanged:function(e){r.target.scaleY=e,r.bEqualScale&&(r.target.scaleX=e),r.onValueChanged()}},{parent:this.nodeInputBoxRot,title:"rot",interval:1,onChanged:function(e){r.target.angle=e,r.onValueChanged()}},{parent:this.nodeInputBoxOrder,title:"order",interval:1,onChanged:function(e){r.target.zIndex=e,r.onValueChanged()}},{parent:this.nodeInputBoxSkewX,title:"skewX",interval:1,onChanged:function(e){r.target.skewX=e,r.onValueChanged()}},{parent:this.nodeInputBoxSkewY,title:"skewY",interval:1,onChanged:function(e){r.target.skewY=e,r.onValueChanged()}},{parent:this.nodeInputBoxApx,title:"apx",interval:.1,onChanged:function(e){r.target.anchorX=e,r.onValueChanged()}},{parent:this.nodeInputBoxApy,title:"apy",interval:.1,onChanged:function(e){r.target.anchorY=e,r.onValueChanged()}}],n=0;n<e.length;n++)o=e[n],(t=new h.default({title:o.title,interval:o.interval,onValueChanged:o.onChanged})).parent=o.parent,t.setPosition(0,0),t.setContentSize(o.parent.getContentSize()),o.parent.inputBox=t;for(i=[{button:this.buttonAnchorBottom,apx:.5,apy:0},{button:this.buttonAnchorCenter,apx:.5,apy:.5},{button:this.buttonAnchorLeft,apx:0,apy:.5},{button:this.buttonAnchorLeftBottom,apx:0,apy:0},{button:this.buttonAnchorLeftTop,apx:0,apy:1},{button:this.buttonAnchorRight,apx:1,apy:.5},{button:this.buttonAnchorRightBottom,apx:1,apy:0},{button:this.buttonAnchorRightTop,apx:1,apy:1},{button:this.buttonAnchorTop,apx:.5,apy:1}],n=0;n<i.length;n++)(o=i[n]).button.apx=o.apx,o.button.apy=o.apy,this._buttonAnchors.push(o.button);return p.default.registerTouchHandler(this.labelPos.node,this.onTouchLabelPos.bind(this)),p.default.registerTouchHandler(this.nodePosDrag,this.onTouchPosDrag.bind(this)),this.graphics=this.nodeGraphics.addComponent("cc.Graphics"),this.graphics.strokeColor=cc.color(255,0,0,191),[2]})})},t.prototype.setTarget=function(e){this.target=e,this.active=null!=e,e&&this.fillTarget()},t.prototype.fillTarget=function(){if(this.isResourceLoaded()){var e=this.target;if(e){this.nodeInputBoxX.inputBox.setValue(e.x,!0),this.nodeInputBoxY.inputBox.setValue(e.y,!0),this.nodeInputBoxRot.inputBox.setValue(e.angle,!0),this.bEqualScale?(this.buttonEqualScale.getComponentInChildren(cc.Label).string="\u7b49\u6bd4\u7f29\u653e",this.buttonEqualScale.node.color=cc.color(0,255,0,255)):(this.buttonEqualScale.getComponentInChildren(cc.Label).string="\u975e\u7b49\u6bd4\u7f29\u653e",this.buttonEqualScale.node.color=cc.color(255,255,255,255)),this.nodeInputBoxScaleX.inputBox.setValue(e.scaleX,!0),this.nodeInputBoxScaleY.inputBox.setValue(e.scaleY,!0),this.nodeInputBoxSkewX.inputBox.setValue(e.skewX,!0),this.nodeInputBoxSkewY.inputBox.setValue(e.skewY,!0),this.nodeInputBoxOrder.inputBox.setValue(e.zIndex,!0),this.nodeInputBoxApx.inputBox.setValue(e.anchorX,!0),this.nodeInputBoxApy.inputBox.setValue(e.anchorY,!0);for(var t=0;t<this._buttonAnchors.length;t++){var i=this._buttonAnchors[t];i.apx==e.anchorX&&i.apy==e.anchorY?i.node.color=cc.color(0,255,0,255):i.node.color=cc.color(255,255,255,255)}}}},t.prototype.onValueChanged=function(){this.fillTarget(),this.context.onValueChanged instanceof Function&&this.context.onValueChanged()},t.prototype.onEnterFrame=function(){if(this.active){var e=this.target;if(e){var t=e.parent.convertToWorldSpaceAR(e.position),i=this.nodeGraphics.convertToWorldSpaceAR(cc.v2(0,0)),n=this.nodeGraphics.convertToNodeSpaceAR(t),o=this.nodeGraphics.convertToNodeSpaceAR(i);this.graphics.clear(),this.graphics.moveTo(n.x,n.y),this.graphics.lineTo(o.x,o.y),this.graphics.stroke()}}},t.prototype.onTouchButtonAnchorBottom=function(e){if(e.isClick()){var t=e.target.getComponent(c.default);this.target.setAnchorPoint(t.apx,t.apy),this.fillTarget()}},t.prototype.onTouchButtonAnchorCenter=function(e){if(e.isClick()){var t=e.target.getComponent(c.default);this.target.setAnchorPoint(t.apx,t.apy),this.fillTarget()}},t.prototype.onTouchButtonAnchorLeft=function(e){if(e.isClick()){var t=e.target.getComponent(c.default);this.target.setAnchorPoint(t.apx,t.apy),this.fillTarget()}},t.prototype.onTouchButtonAnchorLeftBottom=function(e){if(e.isClick()){var t=e.target.getComponent(c.default);this.target.setAnchorPoint(t.apx,t.apy),this.fillTarget()}},t.prototype.onTouchButtonAnchorLeftTop=function(e){if(e.isClick()){var t=e.target.getComponent(c.default);this.target.setAnchorPoint(t.apx,t.apy),this.fillTarget()}},t.prototype.onTouchButtonAnchorRight=function(e){if(e.isClick()){var t=e.target.getComponent(c.default);this.target.setAnchorPoint(t.apx,t.apy),this.fillTarget()}},t.prototype.onTouchButtonAnchorRightBottom=function(e){if(e.isClick()){var t=e.target.getComponent(c.default);this.target.setAnchorPoint(t.apx,t.apy),this.fillTarget()}},t.prototype.onTouchButtonAnchorRightTop=function(e){if(e.isClick()){var t=e.target.getComponent(c.default);this.target.setAnchorPoint(t.apx,t.apy),this.fillTarget()}},t.prototype.onTouchButtonAnchorTop=function(e){if(e.isClick()){var t=e.target.getComponent(c.default);this.target.setAnchorPoint(t.apx,t.apy),this.fillTarget()}},t.prototype.onTouchButtonEqualScale=function(e){e.isClick()&&(this.bEqualScale=!this.bEqualScale,this.fillTarget())},t.prototype.onTouchLabelPos=function(e){var t=this.target;if(t)if("began"==e.name)this._beganX=t.x,this._beganY=t.y;else if("moved"==e.name){var i=e.getStartLocation(),n=e.getLocation(),o=n.x-i.x,r=n.y-i.y,a=Math.floor(o),s=Math.floor(r);f.default.bPressedCtrl&&(a/=10,s/=10);var l=this._beganX+a,d=this._beganY+s;t.setPosition(l,d)}else this.onValueChanged()},t.prototype.onTouchPosDrag=function(e){var t=this.target;if(t)if("began"==e.name)this._beganX=t.x,this._beganY=t.y;else if("moved"==e.name){var i=e.getStartLocation(),n=e.getLocation(),o=n.x-i.x,r=n.y-i.y,a=Math.floor(o),s=Math.floor(r);f.default.bPressedCtrl&&(a/=10,s/=10);var l=this._beganX+a,d=this._beganY+s;t.setPosition(l,d)}else this.onValueChanged()},s([v],t)}(u.default));r.default=_,cc._RF.pop()},{}],vEditorSaveImg:[function(e,t,i){"use strict";cc._RF.push(t,"d9ab2GWcYBFcZhakKt00ld+","vEditorSaveImg");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("ViewBase"),d=o("vEditorInputBox"),c=o("Tools"),u=o("mgrTip"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonHide=null,t.buttonSave=null,t.buttonShow=null,t.nodeBtns=null,t.nodeInputHeight=null,t.nodeInputScale=null,t.nodeInputWidth=null,t.nodeInputX=null,t.nodeInputY=null,t.nodeMask=null,t.nodeMaskParent=null,t.nodeRoot=null,t._targetNode=null,t._targetNodeParent=null,t._finalScale=1,t._bShow=!1,t}return a(t,e),t.prototype._getResourceName=function(){return"_devtest/vEditorSaveImg"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonHide:[s.default,"onTouchButtonHide"],CC_buttonSave:[s.default,"onTouchButtonSave"],CC_buttonShow:[s.default,"onTouchButtonShow"],CC_nodeBtns:[cc.Node],CC_nodeInputHeight:[cc.Node],CC_nodeInputScale:[cc.Node],CC_nodeInputWidth:[cc.Node],CC_nodeInputX:[cc.Node],CC_nodeInputY:[cc.Node],CC_nodeMask:[cc.Node],CC_nodeMaskParent:[cc.Node],CC_nodeRoot:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.init(),this.refreshShow()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){for(var e=[{parent:this.nodeInputX,title:"posX",interval:1,onChanged:this.changeX.bind(this)},{parent:this.nodeInputY,title:"posY",interval:1,onChanged:this.changeY.bind(this)},{parent:this.nodeInputWidth,title:"width",interval:1,onChanged:this.changeWidth.bind(this)},{parent:this.nodeInputHeight,title:"height",interval:1,onChanged:this.changeHeight.bind(this)},{parent:this.nodeInputScale,title:"scale",interval:.1,onChanged:this.finalScale.bind(this)}],t=0;t<e.length;t++){var i=e[t],n=new d.default({title:i.title,interval:i.interval,onValueChanged:i.onChanged});n.parent=i.parent,n.setPosition(0,0),n.setContentSize(i.parent.getContentSize()),i.parent.inputBox=n}c.default.registerTouchHandler(this.nodeMask,this.onTouchMask.bind(this))},t.prototype.init=function(){this.buttonShow.node.active=!1;var e=this.context.info||{},t=e.x||0,i=e.y||0,n=e.width||50,o=e.height||50,r=e.scale||1;this._targetNode=this.context.targetNode,this._targetNodeParent=this.context.targetNodeParent;var a=c.default.getNodeWorldPosAR(this._targetNodeParent),s=this.nodeMaskParent.parent.convertToNodeSpaceAR(a);this.nodeMaskParent.setPosition(s),this.nodeInputX.inputBox.setValue(t),this.nodeInputY.inputBox.setValue(i),this.nodeInputWidth.inputBox.setValue(n),this.nodeInputHeight.inputBox.setValue(o),this.nodeInputScale.inputBox.setValue(r)},t.prototype.changeX=function(e){this._targetNode.x=e},t.prototype.changeY=function(e){this._targetNode.y=e},t.prototype.changeWidth=function(e){this.nodeMask.width=e},t.prototype.changeHeight=function(e){this.nodeMask.height=e},t.prototype.finalScale=function(e){this._finalScale=e,this._targetNode.scale=e},t.prototype.refreshShow=function(){var e=this._bShow;this.buttonHide.node.active=e,this.buttonSave.node.active=e,this.buttonShow.node.active=!e,this.nodeRoot.active=e},t.prototype.onTouchMask=function(e){"moved"==e.name&&(this.nodeInputX.inputBox.setValue(this._targetNode.x+e.getDeltaX()),this.nodeInputY.inputBox.setValue(this._targetNode.y+e.getDeltaY()))},t.prototype.onTouchButtonHide=function(e){e.isClick()&&(this._bShow=!1,this.refreshShow())},t.prototype.onTouchButtonShow=function(e){e.isClick()&&(this._bShow=!0,this.refreshShow())},t.prototype.onTouchButtonSave=function(e){e.isClick()&&(this.context.savePreCb&&this.context.savePreCb(),this.saveImg(),this.context.savePostCb&&this.context.savePostCb(),this.refreshShow())},t.prototype.saveImg=function(){var e=u.default.screenShotNode(this._targetNodeParent,this.nodeMask.width,this.nodeMask.height),t=document.createElement("canvas"),i=e.width,n=e.height;t.width=i,t.height=n;for(var o=t.getContext("2d"),r=e.readPixels(),a=4*i,s=0;s<n;s++){for(var l=n-1-s,d=o.createImageData(i,1),c=l*i*4,h=0;h<a;h++)d.data[h]=r[c+h];o.putImageData(d,0,s)}var p=t.toDataURL("image/png"),f=document.createElement("a"),g=new MouseEvent("click");f.download="test",f.href=p,f.dispatchEvent(g)},t.prototype.filpYImage=function(e,t,i){for(var n=new Uint8Array(t*i*4),o=4*t,r=0;r<i;r++)for(var a=(i-1-r)*t*4,s=r*t*4,l=0;l<o;l++)n[s+l]=e[a+l];return n},t}(l.default);r.default=h,cc._RF.pop()},{}],vFightPowerBean:[function(e,t,i){"use strict";cc._RF.push(t,"dcf15f1lLhMIb/9W9YYqmLB","vFightPowerBean");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tools"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelName=null,t.spriteColor=null,t.fightPower=0,t.fightPowerRange=[[1,20],[1e3,1500],[3e4,1e5]],t}return a(t,e),t.prototype._getResourceName=function(){return"node/vFightPowerBean"},t.prototype._getResourceBindingConfig=function(){return{CC_labelName:[cc.Label],CC_spriteColor:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this);var t=this.context.type;this.fightPower=s.default.random(this.fightPowerRange[t-1][0],this.fightPowerRange[t-1][1]),this.spriteColor.loadSpriteFrame("2d/ui/xiuxian/circle/circle0"+s.default.random(1,6)+".png"),this.context.infoScale&&this.setScale(this.context.infoScale)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.getWorldAABBPoints=function(){var e=this.width,t=this.height,i=0-e/2,n=0-t/2;return[this.convertToWorldSpaceAR(cc.v2(i,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n+t)),this.convertToWorldSpaceAR(cc.v2(i,n+t))]},t.prototype.getFightPower=function(){return this.fightPower},t.prototype.setFightPower=function(e){this.fightPower=e},t}(o("ViewBase").default);r.default=l,cc._RF.pop()},{}],vFindMeDialog:[function(e,t,i){"use strict";cc._RF.push(t,"67d02mEkaJI7JHL0AslEWmS","vFindMeDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrChannel"),c=o("mgrDirector"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.nodeDouyin=null,t.nodeParent=null,t.nodeToutiao=null,t.nodeWeixin=null,t.spriteBg=null,t.spriteIcon1=null,t.spriteIcon2=null,t.spriteIcon3=null,t.spriteIcon4=null,t.spriteIcon5=null,t.spriteIcon6=null,t.spriteIcon7=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vFindMeDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_nodeDouyin:[cc.Node],CC_nodeParent:[cc.Node],CC_nodeToutiao:[cc.Node],CC_nodeWeixin:[cc.Node],CC_spriteBg:[cc.Sprite],CC_spriteIcon1:[cc.Sprite],CC_spriteIcon2:[cc.Sprite],CC_spriteIcon3:[cc.Sprite],CC_spriteIcon4:[cc.Sprite],CC_spriteIcon5:[cc.Sprite],CC_spriteIcon6:[cc.Sprite],CC_spriteIcon7:[cc.Sprite]}},t.prototype._getPreloadRess=function(){return[{path:d.default.getFindMeImage(),assetType:cc.SpriteFrame}]},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){var e=this;this.spriteBg.loadSpriteFrame(d.default.getFindMeImage(),function(){cc.isValid(e)&&e.nodeParent.setContentSize(e.spriteBg.node.width,e.spriteBg.node.height)});for(var t=[this.spriteIcon1,this.spriteIcon2,this.spriteIcon3,this.spriteIcon4,this.spriteIcon5,this.spriteIcon6,this.spriteIcon7],i=0;i<t.length;i++)t[i].node.opacity=0;d.default.findmeImageUrl&&c.default.loadRes(d.default.findmeImageUrl,null,function(e){if(console.log("---------down int image completed"),e)console.warn(e);else for(var i=0;i<t.length;i++){var n=t[i];n.loadSpriteFrameAndKeepSize(d.default.findmeImageUrl),n.node.opacity=255}}),this.nodeDouyin.active=d.default.isChannelPlatformDouyin(),this.nodeToutiao.active=d.default.isChannelPlatformToutiao(),this.nodeWeixin.active=d.default.isChannelWeixin()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t}(l.default);r.default=u,cc._RF.pop()},{}],vFishDujieDialog:[function(e,t,i){"use strict";cc._RF.push(t,"d0906k4fzxPlbhYbrSKOVuK","vFishDujieDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("DialogBase"),l=o("mgrPool"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeEff=null,t.nodeFail=null,t.nodeFailTip1=null,t.nodeFailTip2=null,t.nodeFailTip3=null,t.nodeFailTip4=null,t.nodeSuc=null,t.nodeSucTip1=null,t.nodeSucTip2=null,t.nodeSucTip3=null,t.nodeSucTip4=null,t.nodeTitleBg=null,t.nodeWhole=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vFishDujieDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeEff:[cc.Node],CC_nodeFail:[cc.Node],CC_nodeFailTip1:[cc.Node],CC_nodeFailTip2:[cc.Node],CC_nodeFailTip3:[cc.Node],CC_nodeFailTip4:[cc.Node],CC_nodeSuc:[cc.Node],CC_nodeSucTip1:[cc.Node],CC_nodeSucTip2:[cc.Node],CC_nodeSucTip3:[cc.Node],CC_nodeSucTip4:[cc.Node],CC_nodeTitleBg:[cc.Node],CC_nodeWhole:[cc.Node]}},t.prototype._getPreloadRess=function(){return[{path:"2d/anim_node/40_jiesuan_flower_loop/40_jiesuan_flower_loop",assetType:cc.Prefab},{path:"2d/anim_node/81_fksk_huaban/81_huaban",assetType:cc.Prefab}]},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeTitleBg.x=-800,this.bSuc=this.context.bSuc,cc.tween(this.nodeTitleBg).to(.3,{x:0},{easing:cc.easing.backOut}).start(),this.bSuc?(this.nodeFail.active=!1,this.nodeSucTip1.scale=2,this.nodeSucTip2.scale=2,this.nodeSucTip3.scale=2,this.nodeSucTip4.scale=2,this.nodeSucTip1.opacity=0,this.nodeSucTip2.opacity=0,this.nodeSucTip3.opacity=0,this.nodeSucTip4.opacity=0,this.nodeSuc.active=!0,this.sucAni(),l.default.get("animNode","40_jiesuan_flower_loop").parent=this.nodeEff):(this.nodeSuc.active=!1,this.nodeFailTip1.scale=2,this.nodeFailTip2.scale=2,this.nodeFailTip3.scale=2,this.nodeFailTip4.scale=2,this.nodeFailTip1.opacity=0,this.nodeFailTip2.opacity=0,this.nodeFailTip3.opacity=0,this.nodeFailTip4.opacity=0,this.nodeFail.active=!0,this.failAni(),l.default.get("animNode","81_fksk_huaban").parent=this.nodeEff)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){this.context.fOnClose&&this.context.fOnClose(),e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.sucAni=function(){var e=this;this.nodeSucTip1.runAction(cc.sequence(cc.callFunc(function(){e.nodeSucTip1.opacity=255}),cc.scaleTo(.2,1,1),cc.callFunc(function(){e.nodeSucTip2.runAction(cc.sequence(cc.callFunc(function(){e.nodeSucTip2.opacity=255}),cc.scaleTo(.2,1,1),cc.callFunc(function(){e.nodeSucTip3.runAction(cc.sequence(cc.callFunc(function(){e.nodeSucTip3.opacity=255}),cc.scaleTo(.2,1,1),cc.callFunc(function(){e.nodeSucTip4.runAction(cc.sequence(cc.callFunc(function(){e.nodeSucTip4.opacity=255}),cc.scaleTo(.2,1,1),cc.delayTime(1),cc.callFunc(function(){e.closeDialog()})))})))})))})))},t.prototype.failAni=function(){var e=this;this.nodeFailTip1.runAction(cc.sequence(cc.callFunc(function(){e.nodeFailTip1.opacity=255}),cc.scaleTo(.2,1,1),cc.callFunc(function(){e.nodeFailTip2.runAction(cc.sequence(cc.callFunc(function(){e.nodeFailTip2.opacity=255}),cc.scaleTo(.2,1,1),cc.callFunc(function(){e.nodeFailTip3.runAction(cc.sequence(cc.callFunc(function(){e.nodeFailTip3.opacity=255}),cc.scaleTo(.2,1,1),cc.callFunc(function(){e.nodeFailTip4.runAction(cc.sequence(cc.callFunc(function(){e.nodeFailTip4.opacity=255}),cc.scaleTo(.2,1,1),cc.delayTime(1),cc.callFunc(function(){e.closeDialog()})))})))})))})))},t}(s.default);r.default=d,cc._RF.pop()},{}],vFishRankItem:[function(e,t,i){"use strict";cc._RF.push(t,"72610kXrMFMM7esl2qXbmHw","vFishRankItem");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ViewBase"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelName=null,t.labelRank=null,t.labelScore=null,t.spritePlayerBg=null,t.spriteRank1=null,t.spriteRank2=null,t.spriteRank3=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vFishRankItem"},t.prototype._getResourceBindingConfig=function(){return{CC_labelName:[cc.Label],CC_labelRank:[cc.Label],CC_labelScore:[cc.Label],CC_spritePlayerBg:[cc.Sprite],CC_spriteRank1:[cc.Sprite],CC_spriteRank2:[cc.Sprite],CC_spriteRank3:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.setContentSize(this.nodeResource.getContentSize())},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){this.spriteRank1.node.active=1==e.rank,this.spriteRank2.node.active=2==e.rank,this.spriteRank3.node.active=3==e.rank,this.labelRank.node.active=e.rank>3,this.labelRank.string=e.rank.toString(),this.labelName.string=e.name,this.labelScore.string=e.curScore.toString(),this.spritePlayerBg.node.active="\u6211"==e.name},s([l.default.requireResourceLoaded],t.prototype,"fillData",null),t}(l.default);r.default=d,cc._RF.pop()},{}],vFishRankPanel:[function(e,t,i){"use strict";cc._RF.push(t,"ab5eefglslCf46v6DnJtL7G","vFishRankPanel");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("Timer"),d=o("ViewBase"),c=o("mgrFishRank"),u=o("vFishRankItem"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeItems=null,t.nodePlayerItem=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vFishRankPanel"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeItems:[cc.Node],CC_nodePlayerItem:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){var t=this;e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData(),l.default.callLoop(.1,function(){t.fillData()},this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){this.listItems=[];for(var e=0;e<7;e++){var t=new u.default;t.parent=this.nodeItems,this.listItems.push(t)}var i=new u.default;i.parent=this.nodePlayerItem,this.playerItem=i},t.prototype.fillData=function(){for(var e=c.default.getPvpDatas(),t=0;t<this.listItems.length;t++){var i=this.listItems[t],n=e[t];n?(i.active=!0,i.fillData(n)):i.active=!1}var o=c.default.getPlayerData();o&&o.rank>7?(this.playerItem.active=!0,this.playerItem.fillData(o)):this.playerItem.active=!1},s([d.default.requireResourceLoaded],t.prototype,"fillData",null),t}(d.default);r.default=h,cc._RF.pop()},{}],vFishRankResultDialog:[function(e,t,i){"use strict";cc._RF.push(t,"11dbbI4NgpIxIkpstrLv6q4","vFishRankResultDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonResultConfirm=null,t.labelScore=null,t.spriteFail=null,t.spriteSuccess=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vFishRankResultDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonResultConfirm:[s.default,"onTouchButtonResultConfirm"],CC_labelScore:[cc.Label],CC_spriteFail:[cc.Sprite],CC_spriteSuccess:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.spriteSuccess.node.active=!!this.context.bWin,this.spriteFail.node.active=!this.context.bWin,this.labelScore.string=ul.format("\u60a8\u6700\u7ec8\u7684\u6392\u540d\uff1a%d",this.context.rank||0)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonResultConfirm=function(e){e.isClick()&&this.closeDialog()},t}(o("DialogBase").default);r.default=l,cc._RF.pop()},{}],vFishResultDialog:[function(e,t,i){"use strict";cc._RF.push(t,"bb01fT79GBC2okve44rQYQ0","vFishResultDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("Tools"),c=o("DialogBase"),u=o("ViewBase"),h=o("Const"),p=o("mgrBannerInt"),f=o("mgrCfg"),g=o("mgrDirector"),v=o("mgrFishSkin"),_=o("mgrGame"),y=o("mgrSdk"),m=o("Fish"),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonNative=null,t.buttonResultConfirm=null,t.labelDesc=null,t.labelResultFish=null,t.nodeBtnNative=null,t.nodeResultFish=null,t.nodeWhole=null,t.bIron=!1,t.bBeast=!1,t.bString=!1,t.bLife=!1,t.bQueen=!1,t.bGoddess=!1,t.bAnchor=!1,t.bDevice=!1,t.bGun=!1,t.bMoto=!1,t.bSnacks=!1,t.bDNA=!1,t.bXiuxian=!1,t.bHouse=!1,t.bInsect=!1,t.bQiQiang=!1,t.bQiQiangLuomu=!1,t.bBarbecue=!1,t.b2048=!1,t.bFirearms=!1,t.bStar=!1,t.bDaugther=!1,t.bLuoBo=!1,t._bToBottom=!1,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vFishResultDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonNative:[l.default,"onTouchButtonNative"],CC_buttonResultConfirm:[l.default,"onTouchButtonResultConfirm"],CC_labelDesc:[cc.Label],CC_labelResultFish:[cc.Label],CC_nodeBtnNative:[cc.Node],CC_nodeResultFish:[cc.Node],CC_nodeWhole:[cc.Node]}},t.prototype.onLoad=function(){var t=this,i=y.default.getCopNumberValueByKey("btn_to_banner_recover_delay"),n=_.default.getGameSucToBottomInfo("b_btn_to_banner4"),o=n[0],r=n[1];o?r?i<=0?this._bToBottom=!1:(this._bToBottom=!0,cc.tween(this).delay(i).call(function(){t._bToBottom=!1,p.default.removeCustomDisableBannerViewName("vFishResultDialog");var e=t.getDialogName();t.sendMsg("MSG_DIALOG_ONLOAD",{viewName:e,dialog:t,customUuid:t.getNodeCustomUuid(),zIndex:t.context.globalDialogzIndex||h.default.GLOBAL_ORDER_DIALOG,bDisableInt:t.context.bDisableInt}),t.refreshWhole()}).start()):this._bToBottom=!0:this._bToBottom=!1,this._bToBottom?p.default.addCustomDisableBannerViewName("vFishResultDialog"):p.default.removeCustomDisableBannerViewName("vFishResultDialog"),e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.bIron=this.context.bIron,this.bBeast=this.context.bBeast,this.bString=this.context.bString,this.bLife=this.context.bLife,this.bQueen=this.context.bQueen,this.bGoddess=this.context.bGoddess,this.bAnchor=this.context.bAnchor,this.bDevice=this.context.bDevice,this.bGun=this.context.bGun,this.bMoto=this.context.bMoto,this.bSnacks=this.context.bSnacks,this.bDNA=this.context.bDNA,this.bXiuxian=this.context.bXiuxian,this.bHouse=this.context.bHouse,this.bInsect=this.context.bInsect,this.bQiQiang=this.context.bQiQiang,this.bQiQiangLuomu=this.context.bQiQiangLuomu,this.bBarbecue=this.context.bBarbecue,this.b2048=this.context.b2048,this.bFirearms=this.context.bFirearms,this.bStar=this.context.bStar,this.bDaugther=this.context.bDaugther,this.bLuoBo=this.context.bLuoBo,this.bIron?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u4f60\u6ca1\u80fd\u5efa\u7acb\u94a2\u94c1\u6d2a\u6d41\u3002":this.bBeast?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u4f60\u6ca1\u6709\u53ec\u5524\u51fa\u6700\u5f3a\u7684\u795e\u517d\u3002":this.bString?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u4f60\u6ca1\u6709\u83b7\u5f97\u6700\u5f3a\u7684\u4e32\u4e32\u3002":this.bLife?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u4f60\u6ca1\u6709\u6210\u4e3a\u8d62\u5bb6\u3002":this.bQueen?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u518c\u5c01\u7687\u540e\u5931\u8d25\uff01":this.bGoddess?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u53ec\u5524\u8d2d\u7269\u5973\u795e\u5931\u8d25\uff01":this.bAnchor?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u53ec\u5524\u4e3b\u64ad\u5931\u8d25\uff01":this.bDevice?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u53ec\u5524\u6e38\u620f\u673a\u5931\u8d25\uff01":this.bGun?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u53ec\u5524\u7ec8\u6781\u6b66\u5668\u5931\u8d25\uff01":this.bMoto?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u53ec\u5524\u673a\u8f66\u5931\u8d25\uff01":this.bSnacks?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u53ec\u5524\u96f6\u98df\u5931\u8d25\uff01":this.bDNA?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u53ec\u5524\u4eba\u7c7b\u5931\u8d25\uff01":this.bXiuxian?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u4fee\u4ed9\u5931\u8d25\uff01":this.bHouse?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u6ca1\u80fd\u6210\u4e3a\u623f\u4ea7\u5927\u4ea8\uff01":this.bInsect?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u4f60\u88ab\u5403\u6389\u4e86\uff01":this.bQiQiang?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u6ca1\u6709\u8fbe\u5230\u4eba\u751f\u5dc5\u5cf0\uff01":this.bQiQiangLuomu?this.labelDesc.string="\u4f60\u7684\u4eba\u751f\u624d\u521a\u521a\u5f00\u59cb\uff0c\u8fd8\u6ca1\u6709\u7ed3\u675f\uff01":this.bBarbecue?this.labelDesc.string="\u5c0f\u997c\u64b8\u5927\u4e32\uff0c\u7f8e\u5473\u7b49\u4f60\u6765\u6311\u6218":this.b2048?this.context.fishId>_.default.MAX_CONFIG_FISH_ID_SHOW?this.labelDesc.string="\u591a\u8d22\u591a\u4ebf\uff0c\u518d\u52aa\u628a\u529b":this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u6ca1\u6709\u53ec\u5524\u5230\u5c0f\u76ee\u6807":this.bFirearms?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u67aa\u738b\u5019\u9009\u5c06\u53e6\u6709\u5176\u4eba":this.bStar?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u5b87\u5b99\u7684\u6218\u4e89\u624d\u521a\u521a\u5f00\u59cb":this.bDaugther?this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u672a\u517b\u6210\u53ef\u7231\u5973\u513f":this.bLuoBo&&(this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u672a\u5408\u6210\u8d85\u7ea7\u841d\u535c\u6b66\u5668");var t=null;if(this.bBeast){var i=200/(t=this.context.fishNode).width;t.setScale(i),this.nodeResultFish.addChild(t)}else if(this.bString||this.bLife||this.bQueen||this.bGoddess||this.bAnchor||this.bDevice||this.bMoto||this.bSnacks||this.bDNA||this.bXiuxian||this.bHouse||this.bInsect||this.bQiQiang||this.bQiQiangLuomu||this.bBarbecue||this.bFirearms||this.bStar||this.bLuoBo)i=100/(t=this.context.fishNode).width,t.setScale(i),this.nodeResultFish.addChild(t);else if(this.bGun||this.bDaugther)i=50/(t=this.context.fishNode).width,t.setScale(i),this.nodeResultFish.addChild(t);else if(this.b2048)this.labelResultFish.string=d.default.formatNumFish2048(this.context.fishId);else{var n=f.default.get_from_fish_db(this.context.fishId),o=n.spineId;1==this.context.fishId&&(o=v.default.getPlayerInitFishSpineId());var r=f.default.get_from_spine_db(o);t=new m.default({fishId:n.id,bPlayer:!0,bIron:this.bIron}),this.nodeResultFish.addChild(t),this.nodeResultFish.angle=0,this.nodeResultFish.scale=1/r.scaleY*.9}this.refreshWhole(),this.nodeBtnNative.active=this.isCopNativeBannerOpen()&&p.default.isNativeBannerShowing(),this.registerListeners({MSG_NATIVE_BAR_SHOW:this.onMsgNativeBar})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.refreshWhole=function(){this.nodeWhole.y=this._bToBottom?-290-(g.default.fullHeight/2-h.default.RESOLUTION_RANGE_ALLOW.minHeight/2):0},t.prototype.onTouchButtonResultConfirm=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonNative=function(e){e.isClick()&&(this.nodeBtnNative.active=!1,this.sendMsg("MSG_EXTRA_NATIVE_BANNER_CLICK"))},t.prototype.onMsgNativeBar=function(e){this.nodeBtnNative.active=e.show&&this.isCopNativeBannerOpen()},t.prototype.isCopNativeBannerOpen=function(){return 1==y.default.getCopNumberValueByKey("b_native_banner_button_show4")},s([u.default.requireResourceLoaded],t.prototype,"refreshWhole",null),t}(c.default);r.default=S,cc._RF.pop()},{}],vFishSkinDialog:[function(e,t,i){"use strict";cc._RF.push(t,"f730bSGwKNCJbWZ5I7qwRO3","vFishSkinDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("DialogBase"),c=o("ViewBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrFishSkin"),f=o("mgrPlayer"),g=o("mgrSdk"),v=o("mgrTip"),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonSkin1=null,t.buttonSkin2=null,t.buttonSkin3=null,t.labelButton1=null,t.labelButton2=null,t.labelButton3=null,t.nodeSkin1=null,t.nodeSkin2=null,t.nodeSkin3=null,t.spriteButtonAdFlag1=null,t.spriteButtonAdFlag2=null,t.spriteButtonAdFlag3=null,t.spriteCurFlag1=null,t.spriteCurFlag2=null,t.spriteCurFlag3=null,t.spriteSkin1=null,t.spriteSkin2=null,t.spriteSkin3=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vFishSkinDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[l.default,"onTouchButtonClose"],CC_buttonSkin1:[l.default,"onTouchButtonSkin1"],CC_buttonSkin2:[l.default,"onTouchButtonSkin2"],CC_buttonSkin3:[l.default,"onTouchButtonSkin3"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelButton3:[cc.Label],CC_nodeSkin1:[cc.Node],CC_nodeSkin2:[cc.Node],CC_nodeSkin3:[cc.Node],CC_spriteButtonAdFlag1:[cc.Sprite],CC_spriteButtonAdFlag2:[cc.Sprite],CC_spriteButtonAdFlag3:[cc.Sprite],CC_spriteCurFlag1:[cc.Sprite],CC_spriteCurFlag2:[cc.Sprite],CC_spriteCurFlag3:[cc.Sprite],CC_spriteSkin1:[cc.Sprite],CC_spriteSkin2:[cc.Sprite],CC_spriteSkin3:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),u.default.preCheckAdNoCd("video_unlock_skin")&&g.default.statisVideoPointEvent("video_unlock_skin",1)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){1==p.default.getCurSkinId()?(this.spriteCurFlag1.node.active=!0,this.buttonSkin1.node.active=!1):(this.spriteCurFlag1.node.active=!1,this.buttonSkin1.node.active=!0,this.spriteButtonAdFlag1.node.active=!1,this.labelButton1.string="\u5207\u6362"),2==p.default.getCurSkinId()?(this.spriteCurFlag2.node.active=!0,this.buttonSkin2.node.active=!1):p.default.isSkinUnlocked(2)?(this.spriteCurFlag2.node.active=!1,this.buttonSkin2.node.active=!0,this.spriteButtonAdFlag2.node.active=!1,this.labelButton2.string="\u5207\u6362"):(this.spriteCurFlag2.node.active=!1,this.buttonSkin2.node.active=!0,this.spriteButtonAdFlag2.node.active=!0,this.labelButton2.string="\u7acb\u5373\u83b7\u53d6"),3==p.default.getCurSkinId()?(this.spriteCurFlag3.node.active=!0,this.buttonSkin3.node.active=!1):p.default.isSkinUnlocked(3)?(this.spriteCurFlag3.node.active=!1,this.buttonSkin3.node.active=!0,this.spriteButtonAdFlag3.node.active=!1,this.labelButton3.string="\u5207\u6362"):(this.spriteCurFlag3.node.active=!1,this.buttonSkin3.node.active=!0,this.spriteButtonAdFlag3.node.active=!0,this.labelButton3.string="\u7acb\u5373\u83b7\u53d6")},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonSkin1=function(e){e.isClick()&&(p.default.setCurSkinId(1),v.default.showMsgTip("\u5df2\u5207\u6362"),this.closeDialog())},t.prototype.onTouchButtonSkin2=function(e){e.isClick()&&(p.default.isSkinUnlocked(2)?(p.default.setCurSkinId(2),v.default.showMsgTip("\u5df2\u5207\u6362"),this.closeDialog()):(this.adSkinId=2,u.default.triggerAdEvent("video_unlock_skin")))},t.prototype.onTouchButtonSkin3=function(e){e.isClick()&&(p.default.isSkinUnlocked(3)?(p.default.setCurSkinId(3),v.default.showMsgTip("\u5df2\u5207\u6362"),this.closeDialog()):(this.adSkinId=3,u.default.triggerAdEvent("video_unlock_skin")))},t.prototype.onMsgAdEventSuccessd=function(e){if("video_unlock_skin"==e.adEventId){var t=this.adSkinId,i=h.default.get_from_fish_skin_db(t);f.default.addItemAmount(i.itemId,1,"\u89e3\u9501\u76ae\u80a4"),p.default.setCurSkinId(t),v.default.showMsgTip("\u89e3\u9501\u6210\u529f\uff01"),this.closeDialog()}},s([c.default.requireResourceLoaded],t.prototype,"fillData",null),t}(d.default);r.default=_,cc._RF.pop()},{}],vFishXiuxianResultDialog:[function(e,t,i){"use strict";cc._RF.push(t,"3e2965IYG9BfLW8q8/JXCY2","vFishXiuxianResultDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("DialogBase"),c=o("ViewBase"),u=o("Const"),h=o("mgrBannerInt"),p=o("mgrCfg"),f=o("mgrDirector"),g=o("mgrGame"),v=o("mgrSdk"),_=o("mgrSound"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonNative=null,t.buttonResultConfirm=null,t.labelDesc=null,t.labelTip1=null,t.labelTip2=null,t.nodeBtnNative=null,t.nodeResultFish=null,t.nodeWhole=null,t.bXiuxian=!1,t._bToBottom=!1,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vFishXiuxianResultDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonNative:[l.default,"onTouchButtonNative"],CC_buttonResultConfirm:[l.default,"onTouchButtonResultConfirm"],CC_labelDesc:[cc.Label],CC_labelTip1:[cc.Label],CC_labelTip2:[cc.Label],CC_nodeBtnNative:[cc.Node],CC_nodeResultFish:[cc.Node],CC_nodeWhole:[cc.Node]}},t.prototype.onLoad=function(){var t=this,i=v.default.getCopNumberValueByKey("btn_to_banner_recover_delay"),n=g.default.getGameSucToBottomInfo("b_btn_to_banner4"),o=n[0],r=n[1];o?r?i<=0?this._bToBottom=!1:(this._bToBottom=!0,cc.tween(this).delay(i).call(function(){t._bToBottom=!1,h.default.removeCustomDisableBannerViewName("vFishXiuxianResultDialog");var e=t.getDialogName();t.sendMsg("MSG_DIALOG_ONLOAD",{viewName:e,dialog:t,customUuid:t.getNodeCustomUuid(),zIndex:t.context.globalDialogzIndex||u.default.GLOBAL_ORDER_DIALOG,bDisableInt:t.context.bDisableInt}),t.refreshWhole()}).start()):this._bToBottom=!0:this._bToBottom=!1,this._bToBottom?h.default.addCustomDisableBannerViewName("vFishXiuxianResultDialog"):h.default.removeCustomDisableBannerViewName("vFishXiuxianResultDialog"),e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.bXiuxian=this.context.bXiuxian,this.fishId=this.context.fishId;var t=p.default.get_from_fish_xiuxian_db(this.fishId);if(1==t.sceneType){var i=p.default.get_from_fish_xiuxian_db(5);this.labelTip1.string=""+i.upgradeTypeNeedFightPower,this.labelTip2.string="\u98de\u5347\u7075\u754c"}else 2==t.sceneType?(i=p.default.get_from_fish_xiuxian_db(10),this.labelTip1.string=""+i.upgradeTypeNeedFightPower,this.labelTip2.string="\u98de\u5347\u4ed9\u754c"):3==t.sceneType&&(i=p.default.get_from_fish_xiuxian_db(15),this.labelTip1.string=""+i.upgradeTypeNeedFightPower,this.labelTip2.string="\u6210\u4e3a\u4ed9\u5c0a");this.bXiuxian&&(this.labelDesc.string="\u5f88\u9057\u61be\uff0c\u4fee\u4ed9\u5931\u8d25\uff01");var n=null;if(this.bXiuxian){var o=100/(n=this.context.fishNode).width;n.setScale(o),this.nodeResultFish.addChild(n)}this.refreshWhole(),_.default.play(112),this.nodeBtnNative.active=this.isCopNativeBannerOpen()&&h.default.isNativeBannerShowing(),this.registerListeners({MSG_NATIVE_BAR_SHOW:this.onMsgNativeBar})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.refreshWhole=function(){this.nodeWhole.y=this._bToBottom?-290-(f.default.fullHeight/2-u.default.RESOLUTION_RANGE_ALLOW.minHeight/2):0},t.prototype.onTouchButtonResultConfirm=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonNative=function(e){e.isClick()&&(this.nodeBtnNative.active=!1,this.sendMsg("MSG_EXTRA_NATIVE_BANNER_CLICK"))},t.prototype.onMsgNativeBar=function(e){this.nodeBtnNative.active=e.show&&this.isCopNativeBannerOpen()},t.prototype.isCopNativeBannerOpen=function(){return 1==v.default.getCopNumberValueByKey("b_native_banner_button_show4")},s([c.default.requireResourceLoaded],t.prototype,"refreshWhole",null),t}(d.default);r.default=y,cc._RF.pop()},{}],vFollowDialog:[function(e,t,i){"use strict";cc._RF.push(t,"5987av5L69BnYpTXWfAxWEt","vFollowDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("Const"),c=o("mgrCfg"),u=o("mgrGuide"),h=o("mgrPlayer"),p=o("mgrPool"),f=o("mgrSdk"),g=o("mgrTip"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonFollow=null,t.labelFollow=null,t.bFollowed=!1,t.followState=-1,t.spineClick=null,t.LABEL_FOLLOW_SHOW="\u5df2\u5173\u6ce8",t.LABEL_NOT_FOLLOW_SHOW="\u5173\u6ce8\u9886\u53d6",t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vFollowDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_buttonFollow:[s.default,"onTouchButtonFollow"],CC_labelFollow:[cc.Label]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData(),f.default.getFollowOfficialAccountState(),u.default.registerGuideNode("vFollowDialog.buttonFollow",this.buttonFollow.node),this.registerListeners({FOLLOW_OFFICIAL_ACCOUNT_SUC:this.onMsgFollowOfficialAccountSuccess,GET_FOLLOW_OFFICIAL_ACCOUNT_STATE_SUC:this.onMsgGetFollowOfficialAccountSuccess})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),cc.isValid(this.spineClick)&&(this.spineClick.removeFromParent(),p.default.put(this.spineClick),this.spineClick=null)},t.prototype.buildUi=function(){},t.prototype.fillData=function(){-1==this.followState?(this.labelFollow.string=this.LABEL_NOT_FOLLOW_SHOW,h.default.getItemAmount(d.default.ITEM_ID_FOLLOW_DOUYIN_COUNT)>0&&(this.labelFollow.string=this.LABEL_NOT_FOLLOW_SHOW)):1==this.followState?this.labelFollow.string=this.LABEL_FOLLOW_SHOW:2==this.followState?this.labelFollow.string=this.LABEL_NOT_FOLLOW_SHOW:3==this.followState&&(this.labelFollow.string=this.LABEL_NOT_FOLLOW_SHOW,h.default.getItemAmount(d.default.ITEM_ID_FOLLOW_DOUYIN_COUNT)>0&&(this.labelFollow.string=this.LABEL_NOT_FOLLOW_SHOW)),this.labelFollow.string=this.LABEL_NOT_FOLLOW_SHOW,h.default.getItemAmount(d.default.ITEM_ID_FOLLOW_DOUYIN_COUNT)>0&&(this.labelFollow.string=this.LABEL_FOLLOW_SHOW),cc.log("vFoolowDialog.fillData()",h.default.getItemAmount(d.default.ITEM_ID_FOLLOW_DOUYIN_COUNT),this.labelFollow.string),0!=f.default.getCopNumberValueByKey("b_fallow_show_arrow")&&this.labelFollow.string==this.LABEL_NOT_FOLLOW_SHOW&&this.addArrowToNode(this.buttonFollow.node)},t.prototype.getRewards=function(){var e=c.default.get("follow_rewards_db",1);if(e)for(var t=0;t<e.length;t++){var i=e[t];h.default.addItemAmount(i.itemId,i.amount,"\u5173\u6ce8\u6296\u97f3\u6210\u529f \u9886\u53d6\u5956\u52b1"),g.default.addGotItemTip(i.itemId,i.amount)}h.default.addItemAmount(d.default.ITEM_ID_FOLLOW_DOUYIN_COUNT,1,"\u5173\u6ce8\u6296\u97f3\u6210\u529f \u9886\u53d6\u5956\u52b1")},t.prototype.addArrowToNode=function(e){if(e){var t=p.default.get("spine","ui_guide_click");t.parent=e,t.play("mov_1",!0),this.spineClick=t}},t.prototype.onTouchButtonFollow=function(e){e.isClick()&&(1!=this.followState?f.default.followOfficialAccount():this.closeDialog())},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgFollowOfficialAccountSuccess=function(){cc.log("followState---- ",this.followState),h.default.getItemAmount(d.default.ITEM_ID_FOLLOW_DOUYIN_COUNT)<=0&&(this.getRewards(),this.bFollowed=!0,this.fillData()),this.closeDialog()},t.prototype.onMsgGetFollowOfficialAccountSuccess=function(e){this.bFollowed=e.state==d.FOLLOW_STATE.FOLLOWED,this.followState=e.state,cc.log("followState---- ",this.followState,e.code),this.fillData()},t}(l.default);r.default=v,cc._RF.pop()},{}],vFreeMaxSkillDialog:[function(e,t,i){"use strict";cc._RF.push(t,"19a21XyW29JlrPrCsomniNM","vFreeMaxSkillDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrAd"),c=o("mgrCfg"),u=o("mgrGame"),h=o("mgrSdk"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAd=null,t.buttonClose=null,t.labelLeftDesc=null,t.labelLevel=null,t.labelRightDesc=null,t.nodeBtns=null,t.nodeLeft=null,t.nodeLevle=null,t.nodeRight=null,t.spriteAd=null,t.spriteLeftIcon=null,t.spriteLeftName=null,t.spriteRightIcon=null,t.spriteRightName=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vFreeMaxSkillDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAd:[s.default,"onTouchButtonAd"],CC_buttonClose:[s.default,"onTouchButtonClose"],CC_labelLeftDesc:[cc.Label],CC_labelLevel:[cc.Label],CC_labelRightDesc:[cc.Label],CC_nodeBtns:[cc.Node],CC_nodeLeft:[cc.Node],CC_nodeLevle:[cc.Node],CC_nodeRight:[cc.Node],CC_spriteAd:[cc.Sprite],CC_spriteLeftIcon:[cc.Sprite],CC_spriteLeftName:[cc.Sprite],CC_spriteRightIcon:[cc.Sprite],CC_spriteRightName:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),h.default.statisVideoPointEvent("video_big_skill_try_use",1),this.bulidUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.bulidUi=function(){this.spriteAd.loadSpriteFrame(d.default.getAdIconSpr()),this.nodeLeft._postion=this.nodeLeft.getPosition(),this.nodeRight._postion=this.nodeRight.getPosition(),this.nodeLevle._postion=this.nodeLevle.getPosition(),this.nodeLeft.x=-700,this.nodeRight.x=-700,this.nodeLevle.x=-700,this.nodeLeft.scale=0,this.nodeRight.scale=0,this.nodeLevle.scale=0,cc.tween(this.nodeLeft).to(.3,{scale:1.2,x:this.nodeLeft._postion.x}).to(.2,{scale:1}).start(),cc.tween(this.nodeLevle).delay(.4).to(.3,{scale:1.2,x:this.nodeLevle._postion.x}).to(.2,{scale:1}).start(),cc.tween(this.nodeRight).delay(.8).to(.3,{scale:1.2,x:this.nodeRight._postion.x}).to(.2,{scale:1}).start();var e=c.default.get("big_mode_skill_db",this.context.id),t=u.default.getSkillLevel(e.id),i=e.numLevel[t-1],n=e.company;n=n.replace("s%",i.toString());var o=e.desc.split(";");o.length>1?this.labelLeftDesc.getComponent(cc.RichText).string="<color=#ffffff > "+o[0]+" < /c><color=#13ff00>"+n+"<color=#ffffff> "+o[1]+"</c >":this.labelLeftDesc.getComponent(cc.RichText).string="<color=#ffffff > "+o[0]+" < /c><color=#13ff00>"+n+"</c >",this.spriteLeftIcon.loadSpriteFrame(e.icon),this.spriteLeftName.loadSpriteFrame(e.name),this.labelLevel.string="\u7b49\u7ea7\uff1a+"+(e.maxLevle-t);var r=e.numLevel[e.maxLevle-1],a=e.company;a=a.replace("s%",r.toString());var s=e.desc.split(";");s.length>1?this.labelRightDesc.getComponent(cc.RichText).string="<color=#ffffff > "+s[0]+" < /c><color=#13ff00>"+a+"<color=#ffffff> "+s[1]+"</c >":this.labelRightDesc.getComponent(cc.RichText).string="<color=#ffffff > "+s[0]+" < /c><color=#13ff00>"+a+"</c >",this.spriteRightIcon.loadSpriteFrame(e.icon),this.spriteRightName.loadSpriteFrame(e.name),cc.tween(this.buttonAd.node).repeatForever(cc.sequence(cc.scaleTo(.8,.95),cc.scaleTo(.8,1.05))).start()},t.prototype.onTouchButtonAd=function(e){e.isClick()&&(d.default.triggerAdEvent("video_big_skill_try_use",{skillId:this.context.id},!0),this.closeDialog())},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.context&&this.context.fonClose&&this.context.fonClose(),this.closeDialog())},t}(l.default);r.default=p,cc._RF.pop()},{}],vGame2048Scene:[function(e,t,i){"use strict";cc._RF.push(t,"a8704jw0vREtZmO9gk4Pswd","vGame2048Scene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrDirector"),p=o("mgrGame"),f=o("mgrPool"),g=o("mgrSdk"),v=o("mgrSound"),_=o("mgrTip"),y=o("FishString2048"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.riverFlowerArr=[],t.pauseFlags={},t.defenceCompletedTime=0,t.buttonBack=null,t.nodeLayoutLeft=null,t.nodeLeftTop=null,t.nodeLayoutRight=null,t.nodeBackCount=null,t.labelBackCount=null,t.labelRankScore=null,t.labelRankTime=null,t.labelTime=null,t.nodeBeginBg=null,t.nodeBg=null,t.nodeEvent=null,t.nodeGame=null,t.nodePlayerContainer=null,t.nodePoolRiverContainer=null,t.nodeRank=null,t.nodeRankPanelRoot1=null,t.nodeRightButtons=null,t.nodeSurvival=null,t.nodeTemplate=null,t.nodeTemplate0=null,t.progressBarRankTimeDown=null,t.progressBarTimeDown=null,t._hadShare=!1,t.st_init=1,t.st_waitStart=2,t.st_moving=3,t.st_arrivedMaxFish=4,t.st_dead=5,t.st_restart=20,t.st_finish=31,t.LONG_FISH_DISTANCE=1e3,t.GEN_FISH_DISTANCE=500,t.MAX_RIVER_FISH_COUNT=100,t.playerFish=null,t.rivierFishArr=[],t.eatedFishArr=[],t.INIT_FISH_ID=1,t.CONFIG_RIVER_ROW_COUNT=4,t.CONFIG_RIVER_COLUMN_COUNT=5,t.RIVER_W=1,t.RIVER_H=1,t.LINE_WH=1320,t.playerCurrFishId=1,t.MAX_FISH_SCALE=3,t.TYPE_REFRESH_REVER_FISH_NORMAL=0,t.TYPE_REFRESH_REVER_FISH_INIT=1,t.TYPE_REFRESH_REVER_FISH_LEVELUP=2,t.lastShowAdDialogTime=0,t.rankScore=0,t.FISH_INIT_MOVE_FPS=220,t.FISH_INIT_RIDUS=20,t.leftTime=90,t.MAX_RIVER_NUMBER_VALUE=2048,t.MAX_TIME=90,t.FISH_POOL_ARR=[],t.longzhuFishNumber=0,t}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGame2048Scene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_LT_nodeBackCount:[cc.Node],CC_labelBackCount:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate0:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode24")&&u.default.triggerAdEvent("single_template_mode24"),u.default.isCanTriggerTemplateAd("vertical_template_mode24")&&u.default.triggerAdEvent("vertical_template_mode24"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){var i=this;e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||this.leftTime<=0||this.bGameOver||(t<1&&this.leftTime>0&&(this.leftTime=Math.max(0,this.leftTime-t),this.labelBackCount.string="\u5012\u8ba1\u65f6\uff1a"+d.default.formatTime(Math.ceil(this.leftTime),"%M:%S"),this.leftTime<=0&&(this.bAddedOnceTime?(this.bDisableRevival=!0,this.diePlayerFish(),this.setNextState(this.st_dead),this.leftTime=this.MAX_TIME):(this.bAddedOnceTime=!0,this.pauseGame("time_is_ended"),h.default.openDialog("vAddTimeAd2048Dialog",{fOnChoosed:function(e){e?(i.leftTime=30,i.resumeGame("time_is_ended")):(i.resumeGame("time_is_ended"),i.bDisableRevival=!0,i.diePlayerFish(),i.setNextState(i.st_dead),i.leftTime=i.MAX_TIME)}})))),this.adaptFishParams(),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof y.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/2,this.nodeBg.y=-t.y/2},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode24"),u.default.closeAdv("vertical_template_mode24"),p.default.bFishStopRun=!1},t.prototype.refreshBtns=function(){this.nodeRankPanelRoot1.active=!1,p.default.fishStopRunTime=0},t.prototype.inInit=function(){this.adaptGameStageScale(!0),this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),this.playerFish.scale*=3,v.default.play(102),g.default.statisOnStageEnd("80027",1,"\u5173\u5361\u80dc\u5229"),g.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),h.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u8fbe\u52301\u4ebf\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerCurrFishId,i=function(){g.default.statisOnStageEnd("80027",0,"\u5173\u5361\u7ed3\u675f"),g.default.statisCommonEvent(80001),h.default.openDialog("vFishResultDialog",{fishId:t,b2048:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(!this.bDisableRevival&&u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);n.setScale(.5),n.getComponentInChildren(cc.Label).string=d.default.formatNumToStrWanYi(t),h.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,b2048:!0,btn1Str:"\u4e0d\u5403\u4e86",btn2Str:"\u5403\u8d77\u6765",content:"\u63a5\u7740\u7ee7\u7eed\u5403\u8d77\u6765",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1,null!=e.playerFish&&(e._addFishToStandbyByFishId(e.playerFish),e.playerFish=null);var i=e.rivierFishArr;if(i.length>0){for(var n=i.length-1;n>=0;n--)e._addFishToStandbyByFishId(i[n]);e.rivierFishArr=[]}e.playerCurrFishId=t,e.setPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.resetSurvival(),this.resetRank(),p.default.fishStopRunTime=0,p.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={},null!=this.playerFish&&(this._addFishToStandbyByFishId(this.playerFish),this.playerFish=null);var e=this.rivierFishArr;if(e.length>0){for(var t=e.length-1;t>=0;t--)this._addFishToStandbyByFishId(e[t]);this.rivierFishArr=[]}this.playerCurrFishId=1,this.bDisableRevival=!1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),h.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;g.default.statisOnStageEnd("80027",1,"\u5173\u5361\u80dc\u5229"),g.default.statisCommonEvent(80001),_.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i;this.nodeBg.width=r,this.nodeBg.height=a;for(var s=0;s<o;s++){var l=h.default.createSpriteNode("2d/ui/2048/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=h.default.createSpriteNode("2d/ui/2048/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=h.default.createSpriteNode("2d/ui/2048/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var p=h.default.createSpriteNode("2d/ui/2048/art_02.png");p.width=i,p.height=i,this.nodePoolRiverContainer.addChild(p),p.angle=-90,p.x=o*i+.5*i-r/2+e/2,p.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=h.default.createSpriteNode("2d/ui/2048/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=h.default.createSpriteNode("2d/ui/2048/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=h.default.createSpriteNode("2d/ui/2048/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=h.default.createSpriteNode("2d/ui/2048/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.setPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.removeFromParent(),e.stopAutoMove(),this.FISH_POOL_ARR.push(e)},t.prototype.setPlayerFish=function(e){if(this.bGameOver)return!1;cc.warn("setPlayerFish",e);var t=this.nodePlayerContainer;if(null==this.playerFish){var i=new y.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),fAdaptFishText:this.adaptFishText.bind(this),fAdaptFishScale:this.adaptFishScale.bind(this),bIgnoreScaleX:!0});i.angle=-this.currDirRot,t.addChild(i),this.playerFish=i}else this.playerFish.setFishId(e);return!0},t.prototype.diePlayerFish=function(){this.bGameOver||(null!=this.playerFish&&(this._addFishToStandbyByFishId(this.playerFish),this.playerFish=null),this.bGameOver=!0)},t.prototype.adaptFishParams=function(){var e=this.rivierFishArr;if(e.length>0){if(null==this.playerFish)return;for(var t=this.playerFish.getFishId(),i=e.length-1;i>=0;i--){var n,o=e[i];n=0==o.opFlag?t>=o.getFishId()?cc.color(22,196,9):cc.color(239,60,54):1==o.opFlag?cc.color(209,152,0):2==o.opFlag?cc.color(165,0,242):3==o.opFlag?cc.color(22,60,255):4==o.opFlag?cc.color(85,0,242):cc.color(0,0,255),o.setFishColor(n)}}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=1/this.getFishScaleByFishId(this.playerCurrFishId),a=(this.GEN_FISH_DISTANCE,this.GEN_FISH_DISTANCE,Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e,i){var n;if(void 0===i&&(i=0),!e){var o=t.genRandomRiverFishData();o&&(e=o.deltaLevel,i=o.opFlag)}if(e){for(var s=0,c=0,u=t.getRiverWH(),h=u[0],p=u[1],f=(t.GEN_FISH_DISTANCE+t.FISH_INIT_RIDUS*t.getFishScaleByFishId(e))/r,g=0;g<1e3;){var v=d.default.random(360);if(s=(n=d.default.calcPointOnArc(l.x,l.y,f,v))[0],c=n[1],!(s<-h/2||s>h/2||c<-p/2||c>p/2))break;g++}var _,m=t.getPlayerNumberIndex(!0);t.FISH_POOL_ARR.length>0?((_=t.FISH_POOL_ARR.shift()).setFishId(e,i),_.playerFishIndexWhenAdd=m,_.bPlayer=!1):((_=new y.default({fishId:e,opFlag:i,bPlayer:!1,playerFishIndexWhenAdd:m,fCreateFishNode:t.createFishNode.bind(t),fAdaptFishText:t.adaptFishText.bind(t),fAdaptFishScale:t.adaptFishScale.bind(t),bIgnoreScaleX:!0})).setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit")),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(s,c),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<2;u++)c();var h=this.rivierFishArr;if(h.length>0)for(var p=h.length-1;p>=0;p--){var f=h[p];f.getFishId()<this.playerCurrFishId-1&&(this._addFishToStandbyByFishId(f),h.splice(p,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void(d.default.random(100)<20&&c());for(u=0;u<5;u++)c()}},t.prototype.getPlayerNumberIndex=function(e){void 0===e&&(e=!1);for(var t=[1,2,4,16,256,512,1024,2048],i=-1,n=0;n<t.length;n++){if(this.playerCurrFishId==t[n]){i=n;break}if(this.playerCurrFishId<t[n]){i=Math.max(0,n-1);break}}return e&&i<0&&(i=t.length-1),i},t.prototype.genRandomRiverFishData=function(){var e=[1,2,4,16,256,512,1024,2048],t=[],i=this.getPlayerNumberIndex();0==i?((t=[{deltaLevel:100,weight:10,maxCount:2,opFlag:1},{deltaLevel:50,weight:10,maxCount:2,opFlag:1},{deltaLevel:20,weight:20,maxCount:6,opFlag:1},{deltaLevel:2,weight:50,maxCount:5,opFlag:2},{deltaLevel:2,weight:50,maxCount:5,opFlag:3},{deltaLevel:2,weight:50,maxCount:5,opFlag:4},{deltaLevel:10,weight:50,maxCount:5,opFlag:4}]).push({deltaLevel:e[i],weight:300,maxCount:8,opFlag:0}),t.push({deltaLevel:e[i+1],weight:50,maxCount:6,opFlag:0}),t.push({deltaLevel:e[i+2],weight:10,maxCount:5,opFlag:0})):i<0?((t=[{deltaLevel:1,weight:100,maxCount:50,opFlag:0},{deltaLevel:2,weight:100,maxCount:50,opFlag:0},{deltaLevel:4,weight:100,maxCount:50,opFlag:0},{deltaLevel:6,weight:100,maxCount:50,opFlag:0},{deltaLevel:8,weight:100,maxCount:50,opFlag:0},{deltaLevel:16,weight:100,maxCount:50,opFlag:0},{deltaLevel:256,weight:100,maxCount:20,opFlag:0},{deltaLevel:512,weight:100,maxCount:20,opFlag:0},{deltaLevel:100,weight:10,maxCount:1,opFlag:1},{deltaLevel:2,weight:50,maxCount:6,opFlag:2},{deltaLevel:2,weight:100,maxCount:5,opFlag:3},{deltaLevel:10,weight:100,maxCount:1,opFlag:4},{deltaLevel:20,weight:100,maxCount:1,opFlag:4},{deltaLevel:100,weight:100,maxCount:2,opFlag:4}]).push({deltaLevel:e[e.length-1],weight:100,maxCount:10,opFlag:0}),t.push({deltaLevel:e[e.length-1],weight:100,maxCount:10,opFlag:0})):((t=[{deltaLevel:100,weight:10,maxCount:2,opFlag:1},{deltaLevel:50,weight:50,maxCount:2,opFlag:1},{deltaLevel:20,weight:50,maxCount:4,opFlag:1},{deltaLevel:10,weight:50,maxCount:4,opFlag:1},{deltaLevel:2,weight:50,maxCount:5,opFlag:2},{deltaLevel:2,weight:10,maxCount:5,opFlag:3},{deltaLevel:2,weight:50,maxCount:5,opFlag:4},{deltaLevel:10,weight:50,maxCount:5,opFlag:4}]).push({deltaLevel:e[i-1],weight:100,maxCount:15,opFlag:0}),t.push({deltaLevel:e[i],weight:100,maxCount:10,opFlag:0}),t.push({deltaLevel:e[i+1],weight:200,maxCount:10,opFlag:0}));for(var n={},o=0;o<this.rivierFishArr.length;o++){var r=this.rivierFishArr[o];n[s=r.opFlag+"-"+r.getFishId()]=(n[s]||0)+1}for(o=t.length-1;o>=0;o--){var a=t[o],s="",l=n[s=a.opFlag+"-"+a.deltaLevel];l&&l>=a.maxCount&&t.splice(o,1)}var c=d.default.calcWheelTarget(t,"weight");return c?{deltaLevel:c.deltaLevel,opFlag:c.opFlag}:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=h.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=h.default.createSpriteNode(d.default.random(100)>50?"2d/ui/2048/art_04.png":"2d/ui/2048/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var p=h.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");p.zIndex=500,p=h.default.createSpriteNode(d.default.random(100)>50?"2d/ui/2048/art_04.png":"2d/ui/2048/art_05.png"),r.addChild(p),p.setPosition(0,0),p.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(p)},t.prototype.checkPlayerWithRiverFish=function(){var e=this;if(null!=this.playerFish){for(var t,i,n=this.playerFish.getWorldAABBPoints(),o=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(this.playerFish.x,this.playerFish.y)),r=(this.nodePoolRiverContainer.convertToNodeSpaceAR(o),this.rivierFishArr),a=function(o){var a=r[o],l=a.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(n,l)){if(t=a.opFlag,i=function(){if(p.default.bFishStopInvincible){e.animNodeDie&&cc.isValid(e.animNodeDie)&&(e.animNodeDie.removeFromParent(),f.default.put(e.animNodeDie),e.animNodeDie=null);var t=f.default.get("animNode","009_flash02");return t.parent=e.nodePoolRiverContainer,t.position=new cc.Vec2(a.x,a.y),t.play(),e.animNodeDie=t,a.removeFromParent(),a.stopAutoMove(),r.splice(o,1),void e._addFishToStandbyByFishId(a)}e.defenceCompletedTime>d.default.time()||e.diePlayerFish()},0==t&&s.playerFish.getFishId()<a.getFishId())return i(),{value:void 0};if(s.playerPkRiverFish(a),0==s.playerFish.getFishId())return i(),{value:void 0};s.animNodeDie&&cc.isValid(s.animNodeDie)&&(s.animNodeDie.removeFromParent(),f.default.put(s.animNodeDie),s.animNodeDie=null);var c=f.default.get("animNode","009_flash02");c.parent=s.nodePoolRiverContainer,c.position=new cc.Vec2(a.x,a.y),c.play(),s.animNodeDie=c,a.removeFromParent(),a.stopAutoMove(),r.splice(o,1),s._addFishToStandbyByFishId(a),s.updateFishShieldScale()}},s=this,l=r.length-1;l>=0;l--){var c=a(l);if("object"==typeof c)return c.value}this.removeOldOpflagFish()}},t.prototype.removeOldOpflagFish=function(){var e=this.rivierFishArr;if(e.length>0)for(var t=this.getPlayerNumberIndex(!0),i=e.length-1;i>=0;i--){var n=e[i];4==n.opFlag&&n.playerFishIndexWhenAdd<=t-2&&(e.splice(i,1),n.removeFromParent(),this._addFishToStandbyByFishId(n))}},t.prototype.checkRiverFishEachOther=function(){for(var e=1/this.getFishScaleByFishId(this.playerCurrFishId),t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((this.LONG_FISH_DISTANCE+this.FISH_INIT_RIDUS*this.getFishScaleByFishId(r.getFishId()))/e,2);if(!(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a))return;cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=1/this.getFishScaleByFishId(this.playerCurrFishId)),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],p=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(h.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-h.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>p/2-h.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-h.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(p/2-h.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(h.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=f.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);h.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_INIT_MOVE_FPS*this.getFishScaleByFishId(this.playerCurrFishId)},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,g.default.statisOnStageStart("80027","\u5173\u5361\u5f00\u59cb"),p.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.leftTime=this.MAX_TIME,this.nodeBackCount.active=!0,this.bAddedOnceTime=!1;var n=function(e){null!=i.playerFish&&(i._addFishToStandbyByFishId(i.playerFish),i.playerFish=null);var t=i.rivierFishArr;if(t.length>0){for(var n=t.length-1;n>=0;n--)i._addFishToStandbyByFishId(t[n]);i.rivierFishArr=[]}i.playerCurrFishId=e,i.setPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);u.default.preCheckAdNoCd("video_2048_start_add_100")?(this.pauseGame("prompt"),h.default.openDialog("vAd2048AddNumDialog",{adSucCallback:function(){i.resumeGame("prompt"),i.INIT_FISH_ID=100,n(i.INIT_FISH_ID)},normalCallback:function(){i.resumeGame("prompt"),n(i.INIT_FISH_ID)}})):n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=f.default.get("animNode","009_shield");e&&(e.parent=this.nodePlayerContainer,e.play(),e.scale=1,this.animNodeShield=e)},t.prototype.updateFishShieldScale=function(){this.animNodeShield&&(this.animNodeShield.scale=1)},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),f.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.createFishNode=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var n=cc.instantiate(this.nodeTemplate0);return n.x=0,n.y=0,n.scale=1,this.adaptFishText(n,e,t,i),this.adaptFishScale(n,e,t),n},t.prototype.adaptFishText=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=!1);var o=e.getComponentInChildren(cc.Label);1==i?o.string="+"+t.toString():2==i?o.string="_"+t.toString():3==i?o.string="x"+t.toString():4==i?o.string="\xf7"+t.toString():t==p.default.MAX_CONFIG_FISH_ID_SHOW?o.string="1\u4ebf":o.string=t.toString()},t.prototype.adaptFishScale=function(e,t,i){if(void 0===i&&(i=0),e){0!=i&&(t=this.playerCurrFishId);var n=e.getComponentInChildren(cc.Label),o=cc.misc.clampf(t,1,p.default.MAX_CONFIG_FISH_ID_SCALE)/p.default.MAX_CONFIG_FISH_ID_SCALE*this.MAX_FISH_SCALE;4==i&&(o=o*d.default.random(50,100)/100),n.node.scale=1+o,e.setContentSize(n.node.width*n.node.scale,n.node.height*n.node.scale)}},t.prototype.getFishScaleByFishId=function(e){return 1+cc.misc.clampf(e,1,p.default.MAX_CONFIG_FISH_ID_SCALE)/p.default.MAX_CONFIG_FISH_ID_SCALE*this.MAX_FISH_SCALE},t.prototype.playerPkRiverFish=function(e){if(null!=this.playerFish){var t=e.getFishId(),i=e.opFlag;1==i?this.playerFish.addFishNumber(t):2==i?this.playerFish.addFishNumber(-Math.abs(t)):3==i?this.playerFish.mulFishNumber(t):4==i?this.playerFish.divFishNumber(t):this.playerFish.addFishNumber(t),this.playerCurrFishId=this.playerFish.getFishId()}},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){g.default.statisOnStageEnd("80027",0,"\u5173\u5361\u7ed3\u675f"),g.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];h.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(e){var t=e.adEventId;"video_trigger_snow"==t?this.resumeGame("adv"):"video_trigger_defence2"==t&&this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?(this.resumeGame("adv"),p.default.tryFishStopRun()):"video_trigger_defence2"==t&&(this.resumeGame("adv"),p.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=m,cc._RF.pop()},{}],vGameAnchorScene:[function(e,t,i){"use strict";cc._RF.push(t,"57851NEaW9FAKQ/uz1PfcdE","vGameAnchorScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameAnchorScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode15")&&u.default.triggerAdEvent("single_template_mode15"),u.default.isCanTriggerTemplateAd("vertical_template_mode15")&&u.default.triggerAdEvent("vertical_template_mode15"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode15"),u.default.closeAdv("vertical_template_mode15")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80015",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vAnchorSuccessDialog",{fOnDialogClose:function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80015",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bAnchor:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bAnchor:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80015",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/anchor/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/anchor/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/anchor/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/anchor/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/anchor/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/anchor/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/anchor/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/anchor/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/anchor/art_04.png":"2d/ui/anchor/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/anchor/art_04.png":"2d/ui/anchor/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bAnchor:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80015","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80015",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameBarbecueScene:[function(e,t,i){"use strict";cc._RF.push(t,"87cb9CU7RlPI5P+0k4UseMf","vGameBarbecueScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("CustomTween"),d=o("Timer"),c=o("Tools"),u=o("FSMSceneBase"),h=o("mgrAd"),p=o("mgrCfg"),f=o("mgrDirector"),g=o("mgrGame"),v=o("mgrPool"),_=o("mgrSdk"),y=o("mgrSound"),m=o("mgrTip"),S=o("FishString12"),b=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeRole1=null,n.nodeRole10=null,n.nodeRole11=null,n.nodeRole12=null,n.nodeRole13=null,n.nodeRole14=null,n.nodeRole15=null,n.nodeRole16=null,n.nodeRole17=null,n.nodeRole2=null,n.nodeRole3=null,n.nodeRole4=null,n.nodeRole5=null,n.nodeRole6=null,n.nodeRole7=null,n.nodeRole8=null,n.nodeRole9=null,n.nodeRoleHolder1=null,n.nodeRoleHolder10=null,n.nodeRoleHolder11=null,n.nodeRoleHolder12=null,n.nodeRoleHolder13=null,n.nodeRoleHolder14=null,n.nodeRoleHolder15=null,n.nodeRoleHolder16=null,n.nodeRoleHolder17=null,n.nodeRoleHolder2=null,n.nodeRoleHolder3=null,n.nodeRoleHolder4=null,n.nodeRoleHolder5=null,n.nodeRoleHolder6=null,n.nodeRoleHolder7=null,n.nodeRoleHolder8=null,n.nodeRoleHolder9=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate12=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t[12]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i[12]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameBarbecueScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeRole1:[cc.Node],CC_nodeRole10:[cc.Node],CC_nodeRole11:[cc.Node],CC_nodeRole12:[cc.Node],CC_nodeRole13:[cc.Node],CC_nodeRole14:[cc.Node],CC_nodeRole15:[cc.Node],CC_nodeRole16:[cc.Node],CC_nodeRole17:[cc.Node],CC_nodeRole2:[cc.Node],CC_nodeRole3:[cc.Node],CC_nodeRole4:[cc.Node],CC_nodeRole5:[cc.Node],CC_nodeRole6:[cc.Node],CC_nodeRole7:[cc.Node],CC_nodeRole8:[cc.Node],CC_nodeRole9:[cc.Node],CC_nodeRoleHolder1:[cc.Node],CC_nodeRoleHolder10:[cc.Node],CC_nodeRoleHolder11:[cc.Node],CC_nodeRoleHolder12:[cc.Node],CC_nodeRoleHolder13:[cc.Node],CC_nodeRoleHolder14:[cc.Node],CC_nodeRoleHolder15:[cc.Node],CC_nodeRoleHolder16:[cc.Node],CC_nodeRoleHolder17:[cc.Node],CC_nodeRoleHolder2:[cc.Node],CC_nodeRoleHolder3:[cc.Node],CC_nodeRoleHolder4:[cc.Node],CC_nodeRoleHolder5:[cc.Node],CC_nodeRoleHolder6:[cc.Node],CC_nodeRoleHolder7:[cc.Node],CC_nodeRoleHolder8:[cc.Node],CC_nodeRoleHolder9:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate12:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),h.default.isCanTriggerTemplateAd("single_template_mode26")&&h.default.triggerAdEvent("single_template_mode26"),h.default.isCanTriggerTemplateAd("vertical_template_mode26")&&h.default.triggerAdEvent("vertical_template_mode26");for(var t=0;t<this.nodeTemplate12.getChildByName("string12").childrenCount;t++)this.nodeTemplate12.getChildByName("string12").children[t].active=!1;this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(g.default.fishStopRunTime-=t,g.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),g.default.fishStopRunTime<=0&&(g.default.fishStopRunTime=0,g.default.bFishStopRun=!1),g.default.fishStopInvincibleTime<=0?(g.default.fishStopInvincibleTime=0,g.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(g.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof S.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),h.default.closeAdv("single_template_mode26"),h.default.closeAdv("vertical_template_mode26")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,g.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;p.default.forDb_from_fish_12_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){c.default.unregisterTouchHandler(this.nodeEvent),c.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}c.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.roleMoveToCenter=function(e){for(var t,i,n=function(n){if(t=o.playerFishId2FishDict[12][0].fish.nodeRes.getChildByName("string12").children[n],!o["nodeRoleHolder"+(n+1)])return"continue";i=o["nodeRoleHolder"+(n+1)].position;var r=n;t.active=!0,l.default.roke(t),cc.tween(t).to(2,{x:i.x,y:i.y}).call(function(){11==r&&e&&e()}).start()},o=this,r=0;r<this.playerFishId2FishDict[12][0].fish.nodeRes.getChildByName("string12").childrenCount;r++)n(r)},t.prototype.inArrivedMaxFish=function(){var e=this;y.default.play(102),_.default.statisOnStageEnd("80026",1,"\u5173\u5361\u80dc\u5229"),_.default.statisCommonEvent(80001),this.pauseGame("roleMoveToCenter"),this.roleMoveToCenter(function(){d.default.callLater(2,function(){f.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u5c0f\u997c\u5927\u8471\u8638\u9171\u6599\uff0c\u6dc4\u6dc4\u70e7\u70e4\u6709\u4e00\u5957\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("roleMoveToCenter"),e.setNextState(e.st_restart)}]})},e)})},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){_.default.statisOnStageEnd("80026",0,"\u5173\u5361\u7ed3\u675f"),_.default.statisCommonEvent(80001);var i=e.createFishNode(t);f.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bBarbecue:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(h.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);f.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bBarbecue:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=c.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,g.default.fishStopRunTime=0,g.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),f.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;_.default.statisOnStageEnd("80026",1,"\u5173\u5361\u80dc\u5229"),_.default.statisCommonEvent(80001),m.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=f.default.createSpriteNode("2d/ui/barbecue/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=f.default.createSpriteNode("2d/ui/barbecue/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=f.default.createSpriteNode("2d/ui/barbecue/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=f.default.createSpriteNode("2d/ui/barbecue/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var p=f.default.createSpriteNode("2d/ui/barbecue/art_03.png");this.nodePoolRiverContainer.addChild(p),p.x=-this.RIVER_W/2+e/2,p.y=this.RIVER_H/2+t/2;var g=f.default.createSpriteNode("2d/ui/barbecue/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=f.default.createSpriteNode("2d/ui/barbecue/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=f.default.createSpriteNode("2d/ui/barbecue/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=c.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new S.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),v.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=v.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new S.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new S.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new S.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),v.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=v.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),d=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=p.default.get_from_fish_12_db(e),o=0,s=0,d=t.getRiverWH(),u=d[0],h=d[1],f=(700+n.radius*n.scale)/r;;){var v=c.default.random(360);if(o=(i=c.default.calcPointOnArc(l.x,l.y,f,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-h/2||s>h/2))break}var _=new S.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t)});_.clearPendant(),g.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=c.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)d();var h=this.rivierFishArr;if(h.length>0)for(var f=h.length-1;f>=0;f--){var v=h[f];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),h.splice(f,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void d();for(u=0;u<10;u++)d()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=c.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+c.default.random(900),d=800*a-i/2+c.default.random(800),u=f.default.createSpriteNode(c.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=f.default.createSpriteNode(c.default.random(100)>50?"2d/ui/barbecue/art_04.png":"2d/ui/barbecue/art_05.png"),r.addChild(u),u.setPosition(l,d),u.scale=c.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=f.default.createSpriteNode(c.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=f.default.createSpriteNode(c.default.random(100)>50?"2d/ui/barbecue/art_04.png":"2d/ui/barbecue/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=c.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;c.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),d=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(d),this.rivierFishArr),h=u.length-1;h>=0;h--){var p=u[h],_=p.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<p.getFishId()){if(g.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),v.default.put(this.animNodeDie),this.animNodeDie=null),(y=v.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(p.x,p.y),y.play(),this.animNodeDie=y,p.removeFromParent(),p.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(p);if(this.defenceCompletedTime>c.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),v.default.put(this.animNodeDie),this.animNodeDie=null),p.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);f.default.openDialog("vSnowDialog",{fishNode:m,bBarbecue:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=v.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(p.x,p.y),y.play(),this.animNodeDie=y,p.removeFromParent(),p.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(p),this.addPlayerFish(p.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(c.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),d=o-1;d>=0;d--){var u=n[d];if(c.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(d,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var d=this.getRiverWH(),u=d[0],h=d[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(f.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-f.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-f.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-f.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-f.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(f.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var p=-u/2,g=+u/2;this.nodePoolRiverContainer.x=c.default.clamp(this.nodePoolRiverContainer.x,p,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=v.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=c.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);f.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=h.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&_.default.statisVideoPointEvent("video_trigger_defence2",1),_.default.statisOnStageStart("80026","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,g.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=c.default.time()+2,i.setNextState(i.st_moving)};if(e||!h.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return c.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=v.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),v.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){_.default.statisOnStageEnd("80026",0,"\u5173\u5361\u7ed3\u675f"),_.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];f.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),h.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),h.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?g.default.tryFishStopRun():"video_trigger_defence2"==t&&(g.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(u.default);r.default=b,cc._RF.pop()},{}],vGameDNAScene:[function(e,t,i){"use strict";cc._RF.push(t,"b94e9oz66BCbrKe8zTUqkvs","vGameDNAScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString13"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate12=null,n.nodeTemplate13=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t[12]=.39,t[13]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i[12]=200/.55,i[13]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameDNAScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate12:[cc.Node],CC_nodeTemplate13:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode20")&&u.default.triggerAdEvent("single_template_mode20"),u.default.isCanTriggerTemplateAd("vertical_template_mode20")&&u.default.triggerAdEvent("vertical_template_mode20"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode20"),u.default.closeAdv("vertical_template_mode20")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}console.warn("this.playerFishHolderNodeArr-=======",this.playerFishHolderNodeArr);var c=0;h.default.forDb_from_fish_13_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80020",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u8fdb\u5316\u6210\u4eba\u7c7b\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80020",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bDNA:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bDNA:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80020",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/dna/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/dna/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/dna/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/dna/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/dna/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/dna/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/dna/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/dna/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_13_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/dna/art_04.png":"2d/ui/dna/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/dna/art_04.png":"2d/ui/dna/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bDNA:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80020","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80020",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameDaughterScene:[function(e,t,i){"use strict";cc._RF.push(t,"5e6bcMGDbFMSJsuSfyot4fY","vGameDaughterScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameDaughterScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode24")&&u.default.triggerAdEvent("single_template_mode24"),u.default.isCanTriggerTemplateAd("vertical_template_mode24")&&u.default.triggerAdEvent("vertical_template_mode24"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++)this.nodePlayerContainer.children[t],m.default},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/2,this.nodeBg.y=-t.y/2},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode24"),u.default.closeAdv("vertical_template_mode24")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c>10?10:c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80030",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u5973\u513f\u517b\u6210\u4e86\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80030",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bDaugther:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bDaugther:!0,btn1Str:"\u4e0d\u517b\u4e86",btn2Str:"\u7ee7\u7eed\u517b",content:"\u7ee7\u7eed\u517b\u6210\u5973\u513f",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80030",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u505a\u5230\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i;this.nodeBg.width=r,this.nodeBg.height=a;for(var s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/daugther/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/daugther/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/daugther/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/daugther/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/daugther/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/daugther/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/daugther/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/daugther/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({bQiQiang:!0,fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({bQiQiang:!0,fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({bQiQiang:!0,fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({bQiQiang:!0,fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({bQiQiang:!0,fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<2;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void(d.default.random(100)<10&&c());for(u=0;u<5;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/daugther/art_04.png":"2d/ui/daugther/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/daugther/art_04.png":"2d/ui/daugther/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bQiQiang:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80030","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80030",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameDeviceScene:[function(e,t,i){"use strict";cc._RF.push(t,"b696cJJSXpGZriG3Pyjldbo","vGameDeviceScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameDeviceScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode16")&&u.default.triggerAdEvent("single_template_mode16"),u.default.isCanTriggerTemplateAd("vertical_template_mode16")&&u.default.triggerAdEvent("vertical_template_mode16"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode16"),u.default.closeAdv("vertical_template_mode16")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80016",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u62ff\u5230\u4e86\u65b0\u6b3e\u6e38\u620f\u673a\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80016",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bDevice:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bDevice:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80016",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/device/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/device/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/device/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/device/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/device/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/device/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/device/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/device/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/device/art_04.png":"2d/ui/device/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/device/art_04.png":"2d/ui/device/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bDevice:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80016","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80016",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameFirearmsScene:[function(e,t,i){"use strict";cc._RF.push(t,"dd2f2lrD6VONrtYsZWegK7C","vGameFirearmsScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameFirearmsScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode28")&&u.default.triggerAdEvent("single_template_mode28"),u.default.isCanTriggerTemplateAd("vertical_template_mode28")&&u.default.triggerAdEvent("vertical_template_mode28"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/2,this.nodeBg.y=-t.y/2},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode28"),u.default.closeAdv("vertical_template_mode28")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c>11?11:c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80028",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u6210\u4e3a\u7b2c77\u4ee3\u67aa\u738b\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80028",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bFirearms:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bFirearms:!0,btn1Str:"\u6211\u8ba4\u8f93",btn2Str:"\u7ad9\u8d77\u6765",content:"\u4e00\u4ee3\u67aa\u738b\u600e\u80fd\u5c31\u6b64\u653e\u5f03\uff1f",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80028",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i;this.nodeBg.width=r,this.nodeBg.height=a;for(var s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/firearms/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/firearms/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/firearms/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/firearms/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/firearms/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/firearms/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/firearms/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/firearms/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],f=(700+n.radius*n.scale)/r;;){var g=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,f,g))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var v=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});v.clearPendant(),v.setMoveFunc(t.doFishMove.bind(t)),v.setContextField("playerPos",l),v.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),v.parent&&console.warn("---aparent exit"),a.addChild(v),v.angle=d.default.random(0,360),v.setPosition(o,s),v.starAutoMove(),t.rivierFishArr.push(v)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<2;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var f=p.length-1;f>=0;f--){var g=p[f];g.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(g),p.splice(f,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void(d.default.random(100)<10&&c());for(u=0;u<5;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){var e=this.getRiverWH(),t=e[0],i=e[1];Math.floor(i),Math.floor(t),this.nodePoolRiverContainer},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bFirearms:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80028","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80028",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameGoddessScene:[function(e,t,i){"use strict";cc._RF.push(t,"93142OulXRHhK4xouDnom3H","vGameGoddessScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameGoddessScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode14")&&u.default.triggerAdEvent("single_template_mode14"),u.default.isCanTriggerTemplateAd("vertical_template_mode14")&&u.default.triggerAdEvent("vertical_template_mode14"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode14"),u.default.closeAdv("vertical_template_mode14")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80014",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vGoddessSuccessDialog",{fOnDialogClose:function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80014",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bGoddess:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bGoddess:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80014",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/goddess/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/goddess/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/goddess/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/goddess/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/goddess/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/goddess/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/goddess/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/goddess/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t)});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/goddess/art_04.png":"2d/ui/goddess/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/goddess/art_04.png":"2d/ui/goddess/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bGoddess:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80014","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80014",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameGunScene:[function(e,t,i){"use strict";cc._RF.push(t,"8a7de+czFRJWJ+R9aU/4ha9","vGameGunScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameGunScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode17")&&u.default.triggerAdEvent("single_template_mode17"),u.default.isCanTriggerTemplateAd("vertical_template_mode17")&&u.default.triggerAdEvent("vertical_template_mode17"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode17"),u.default.closeAdv("vertical_template_mode17")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80017",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u6210\u529f\u53ec\u5524\u7ec8\u6781\u6b66\u5668\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80017",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bGun:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bGun:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80017",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/gun/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/gun/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/gun/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/gun/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/gun/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/gun/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/gun/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/gun/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t)});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/gun/art_04.png":"2d/ui/gun/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/gun/art_04.png":"2d/ui/gun/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bGun:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80017","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80017",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameHouseScene:[function(e,t,i){"use strict";cc._RF.push(t,"aec23MiNN5IooCDhmumAGIw","vGameHouseScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=o("vPropChai"),b=o("vPropDigger"),C=function(e){function t(){var t,i,n,o,r,a=null!==e&&e.apply(this,arguments)||this;return a.riverFlowerArr=[],a.pauseFlags={},a.defenceCompletedTime=0,a.buttonBack=null,a.nodeLayoutLeft=null,a.nodeLeftTop=null,a.nodeLayoutRight=null,a.buttonUseShield=null,a.labelInvincibleStopTipTime=null,a.labelRankScore=null,a.labelRankTime=null,a.labelTime=null,a.nodeBeginBg=null,a.nodeBg=null,a.nodeEvent=null,a.nodeGame=null,a.nodeInvincible=null,a.nodePlayerContainer=null,a.nodePoolRiverContainer=null,a.nodeRank=null,a.nodeRankPanelRoot1=null,a.nodeRightButtons=null,a.nodeSurvival=null,a.nodeTemplate=null,a.nodeTemplate1=null,a.nodeTemplate10=null,a.nodeTemplate11=null,a.nodeTemplate2=null,a.nodeTemplate3=null,a.nodeTemplate4=null,a.nodeTemplate5=null,a.nodeTemplate6=null,a.nodeTemplate7=null,a.nodeTemplate8=null,a.nodeTemplate9=null,a.nodeVideoInvincibleTip=null,a.progressBarRankTimeDown=null,a.progressBarTimeDown=null,a._hadShare=!1,a.st_init=1,a.st_waitStart=2,a.st_moving=3,a.st_arrivedMaxFish=4,a.st_dead=5,a.st_restart=20,a.st_finish=31,a.MAX_RIVER_FISH_COUNT=100,a.standbyFishId2FishDict={},a.playerFishUsedHolderIndexDict={},a.playerFishHolderNodeArr=[],a.playerFishId2FishDict={},a.rivierFishArr=[],a.eatedFishArr=[],a.INIT_FISH_ID=1,a.CONFIG_RIVER_ROW_COUNT=4,a.CONFIG_RIVER_COLUMN_COUNT=5,a.RIVER_W=1,a.RIVER_H=1,a.LINE_WH=1320,a.playerMaxLevelFishId=0,a.TYPE_REFRESH_REVER_FISH_NORMAL=0,a.TYPE_REFRESH_REVER_FISH_INIT=1,a.TYPE_REFRESH_REVER_FISH_LEVELUP=2,a.lastShowAdDialogTime=0,a.bGameing=!1,a.bOpenSnowAdv=!1,a.rankScore=0,a.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),a.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.65,i[2]=200/.65,i[3]=200/.65,i[4]=200/.6,i[5]=200/.6,i[6]=200/.55,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),a.PROP_2_SCALE_DICT=((n={})[1]=.4,n[2]=.5,n[3]=.6,n[4]=.7,n[5]=.8,n[6]=.9,n[7]=1,n[8]=1.2,n[9]=1.6,n[10]=2,n[11]=2.2,n),a.DIGGER_DIS_2_DICT=((o={})[1]=1.2,o[2]=1.4,o[3]=1.6,o[4]=1.8,o[5]=2,o[6]=2.2,o[7]=2.6,o[8]=3,o[9]=3.6,o[10]=4,o[11]=4.6,o),a.DIGGER_2_DICT=((r={})[1]=.8,r[2]=1,r[3]=1.2,r[4]=1.4,r[5]=2,r[6]=2.4,r[7]=2.8,r[8]=3.2,r[9]=3.6,r[10]=4,r[11]=4.5,r),a.propArr=[],a.MAX_PROP_COUNT=3,a.diggerArr=[],a.cleanTimer=null,a.checkGap=0,a.longzhuFishNumber=0,a.createSnowFishTime=0,a.createSnowFishCd=10,a}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameHouseScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode22")&&u.default.triggerAdEvent("single_template_mode22"),u.default.isCanTriggerTemplateAd("vertical_template_mode22")&&u.default.triggerAdEvent("vertical_template_mode22"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode22"),u.default.closeAdv("vertical_template_mode22")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){var e=this;d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var t=this.rivierFishArr;for(var i in t){var n=t[i];n&&n.setContextField("bDisableDisCheckWithPlayer",!0)}this.cleanTimer=l.default.callLoop(.2,function(){e.createPropChai(),e.propArr.length>e.MAX_PROP_COUNT&&e.cleanDistanceProp()},this)},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.checkGap+=e,this.checkGap>.112&&(this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.checkPlayerWithProp(),this.checkRiverFishWithDigger(),this.checkGap=0),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}this.cleanTimer&&(this.cleanTimer.stop(),this.cleanTimer=null),d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80022",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u6210\u4e3a\u623f\u4ea7\u5927\u4ea8",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80022",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bHouse:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bHouse:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80022",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/house/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/house/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/house/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/house/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/house/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/house/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/house/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/house/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({bHouse:!0,fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({bHouse:!0,fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({bHouse:!0,fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({bHouse:!0,fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({bHouse:!0,fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=5e3,r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,u.opacity=122,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=5e3,r.addChild(h),h.setPosition(0,0),h.opacity=122,h.scale=d.default.random(5,10)/12,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bHouse:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.checkPlayerWithProp=function(){var e=this.playerFishId2FishDict;for(var t in e)for(var i=e[t],n=i.length-1;n>=0;n--){var o=i[n].fish.getWorldAABBPoints(),r=this.propArr;if(r.length>0)for(var a=r.length-1;a>=0;a--){var s=r[a];if(s){var l=s.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(o,l)){this.propArr.splice(a,1),s.active=!1,s.removeFromParent(),s.destroy(),s=null,this.createDigger();break}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80022","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.createPropChai=function(){var e;if(!(this.propArr.length>this.MAX_PROP_COUNT)){for(var t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],i=(this.nodePoolRiverContainer,this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0))),n=this.nodePoolRiverContainer.convertToNodeSpaceAR(i),o=h.default.get_from_fish_db(this.playerMaxLevelFishId),r=0,a=0,s=this.getRiverWH(),l=s[0],c=s[1],u=(700+o.radius*o.scale)/t;;){var p=d.default.random(360);if(r=(e=d.default.calcPointOnArc(n.x,n.y,u,p))[0],a=e[1],!(r<-l/2+200||r>l/2-200||a<-c/2+200||a>c/2-200))break}var f=new S.default({propScale:this.PROP_2_SCALE_DICT[this.playerMaxLevelFishId]});f.parent=this.nodePoolRiverContainer;var g=d.default.random()>.5?d.default.random(400):-d.default.random(400),v=d.default.random()>.5?d.default.random(400):-d.default.random(400);f.setPosition(r+g,a+v),this.propArr.push(f)}},t.prototype.cleanDistanceProp=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.propArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)&&r){var a=Math.pow((1400+r.width)/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9053\u5177\u62c6");var s=r;n.splice(o,1),s.removeFromParent(),s.destroy(),s=null}}}},t.prototype.createDigger=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e),i=new b.default({diggerIndex:1,propScale:this.DIGGER_2_DICT[this.playerMaxLevelFishId]});i.parent=this.nodePoolRiverContainer,i.setPosition(t);var n=new b.default({diggerIndex:2,propScale:this.DIGGER_2_DICT[this.playerMaxLevelFishId]});n.parent=this.nodePoolRiverContainer,n.setPosition(t);var o=new b.default({diggerIndex:3,propScale:this.DIGGER_2_DICT[this.playerMaxLevelFishId]});o.parent=this.nodePoolRiverContainer,o.setPosition(t);var r=new b.default({diggerIndex:4,propScale:this.DIGGER_2_DICT[this.playerMaxLevelFishId]});r.parent=this.nodePoolRiverContainer,r.setPosition(t),this.diggerArr.push(i),this.diggerArr.push(n),this.diggerArr.push(o),this.diggerArr.push(r),this.diggerFly(i,1),this.diggerFly(n,2),this.diggerFly(o,3),this.diggerFly(r,4)},t.prototype.diggerFly=function(e,t){var i=this,n=this.DIGGER_DIS_2_DICT[this.playerMaxLevelFishId],o=400*n,r=400*n;1==t?o=-400*n:2==t||(3==t?(o=-400*n,r=-400*n):4==t&&(r=-400*n)),e.runAction(cc.sequence(cc.moveBy(2,cc.v2(o,r)),cc.callFunc(function(){e.removeFromParent(),e.destroy(),e=null,i.diggerArr=[]})))},t.prototype.checkRiverFishWithDigger=function(){if(!(this.diggerArr.length<=0))for(var e=this.rivierFishArr,t=e.length-1;t>=0;t--){var i=e[t],n=i.getWorldAABBPoints(),o=this.diggerArr;if(o.length>0)for(var r=o.length-1;r>=0;r--){var a=o[r];if(a){var s=a.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(n,s)&&i.fishId>this.playerMaxLevelFishId){var l=i;e.splice(t,1),l.removeFromParent(),l.stopAutoMove(),this._addFishToStandbyByFishId(l);break}}}}},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80022",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=C,cc._RF.pop()},{}],vGameInsectScene:[function(e,t,i){"use strict";cc._RF.push(t,"ad2c9EYRnhJPp5rPLPqQmY8","vGameInsectScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameInsectScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode23")&&u.default.triggerAdEvent("single_template_mode23"),u.default.isCanTriggerTemplateAd("vertical_template_mode23")&&u.default.triggerAdEvent("vertical_template_mode23"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode23"),u.default.closeAdv("vertical_template_mode23")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80023",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u6210\u4e3a\u6606\u866b\u9738\u4e3b\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80023",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bInsect:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bInsect:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80023",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/insect/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/insect/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/insect/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/insect/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/insect/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/insect/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/insect/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/insect/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/insect/art_04.png":"2d/ui/insect/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/insect/art_04.png":"2d/ui/insect/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bInsect:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80023","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80023",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameLifeScene:[function(e,t,i){"use strict";cc._RF.push(t,"5328fbDF6RLELwXKFgOrhGN","vGameLifeScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameLifeScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode12")&&u.default.triggerAdEvent("single_template_mode12"),u.default.isCanTriggerTemplateAd("vertical_template_mode12")&&u.default.triggerAdEvent("vertical_template_mode12"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode12"),u.default.closeAdv("vertical_template_mode12")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80012",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u4f4f\u8fdb\u4e86\u5927\u522b\u5885\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80012",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bLife:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bLife:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80012",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/life/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/life/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/life/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/life/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/life/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/life/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/life/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/life/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t)});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/life/art_04.png":"2d/ui/life/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/life/art_04.png":"2d/ui/life/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bLife:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80012","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80012",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameLuoBoScene:[function(e,t,i){"use strict";cc._RF.push(t,"8a14fV5VSRMxZYh9X+qy6pk","vGameLuoBoScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameLuoBoScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode24")&&u.default.triggerAdEvent("single_template_mode24"),u.default.isCanTriggerTemplateAd("vertical_template_mode24")&&u.default.triggerAdEvent("vertical_template_mode24"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/2,this.nodeBg.y=-t.y/2},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode24"),u.default.closeAdv("vertical_template_mode24")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c>10?10:c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80031",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u5c31\u662f\u841d\u535c\u67aa\u52c7\u58eb\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80031",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bLuoBo:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bLuoBo:!0,btn1Str:"\u4e0d\u5408\u4e86",btn2Str:"\u7ee7\u7eed\u5408",content:"\u7ee7\u7eed\u5408\u6210\u8d85\u7ea7\u841d\u535c\u6b66\u5668",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80031",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u505a\u5230\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i;this.nodeBg.width=r,this.nodeBg.height=a;for(var s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/luobo/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/luobo/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/luobo/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/luobo/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/luobo/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/luobo/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/luobo/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/luobo/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({bQiQiang:!0,fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({bQiQiang:!0,fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({bQiQiang:!0,fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({bQiQiang:!0,fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.angle=-this.currDirRot,t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({bQiQiang:!0,fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<2;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void(d.default.random(100)<10&&c());for(u=0;u<5;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/luobo/art_04.png":"2d/ui/luobo/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/luobo/art_04.png":"2d/ui/luobo/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bQiQiang:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80031","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80031",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameMotoScene:[function(e,t,i){"use strict";cc._RF.push(t,"3ee13GVYFdJ3qIJgTnaIhhb","vGameMotoScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameMotoScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode18")&&u.default.triggerAdEvent("single_template_mode18"),u.default.isCanTriggerTemplateAd("vertical_template_mode18")&&u.default.triggerAdEvent("vertical_template_mode18"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode18"),u.default.closeAdv("vertical_template_mode18")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80018",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u62ff\u5230\u4e86\u65b0\u6b3e\u673a\u8f66\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80018",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bMoto:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bMoto:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80018",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/moto/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/moto/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/moto/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/moto/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/moto/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/moto/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/moto/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/moto/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/moto/art_04.png":"2d/ui/moto/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/moto/art_04.png":"2d/ui/moto/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bMoto:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80018","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80018",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameQiQiangLuomuScene:[function(e,t,i){"use strict";cc._RF.push(t,"3142aLgpsVHkrvQ2Y+aLBOl","vGameQiQiangLuomuScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameQiQiangLuomuScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode25")&&u.default.triggerAdEvent("single_template_mode25"),u.default.isCanTriggerTemplateAd("vertical_template_mode25")&&u.default.triggerAdEvent("vertical_template_mode25"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++)this.nodePlayerContainer.children[t],m.default},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/2,this.nodeBg.y=-t.y/2},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode25"),u.default.closeAdv("vertical_template_mode25")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c>11?11:c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80025",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u8bfb\u5b59\u5b50\u5175\u6cd5\uff0c\u54c1\u542f\u5f3a\u4eba\u751f\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80025",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bQiQiangLuomu:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bQiQiangLuomu:!0,btn1Str:"\u4e0d\u635e\u4e86",btn2Str:"\u635e\u8d77\u6765",content:"\u6709\u672c\u4e8b\u5c31\u628a\u81ea\u5df1\u635e\u8d77\u6765",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80025",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i;this.nodeBg.width=r,this.nodeBg.height=a;for(var s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/qiqiangluomu/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/qiqiangluomu/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/qiqiangluomu/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/qiqiangluomu/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/qiqiangluomu/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/qiqiangluomu/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/qiqiangluomu/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/qiqiangluomu/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({bQiQiangLuomu:!0,fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({bQiQiangLuomu:!0,fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({bQiQiangLuomu:!0,fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({bQiQiangLuomu:!0,fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({bQiQiangLuomu:!0,fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<2;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<=this.playerMaxLevelFishId&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void(d.default.random(100)<20&&c());for(u=0;u<5;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:80,maxCount:6},{deltaLevel:-1,weight:60,maxCount:3},{deltaLevel:0,weight:50,maxCount:6},{deltaLevel:1,weight:400,maxCount:8},{deltaLevel:2,weight:500,maxCount:10}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/qiqiangluomu/art_04.png":"2d/ui/qiqiangluomu/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/qiqiangluomu/art_04.png":"2d/ui/qiqiangluomu/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bQiQiangLuomu:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80025","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80025",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameQiQiangScene:[function(e,t,i){"use strict";cc._RF.push(t,"9f1d54oEpJFOKMwUdijzs0T","vGameQiQiangScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameQiQiangScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode24")&&u.default.triggerAdEvent("single_template_mode24"),u.default.isCanTriggerTemplateAd("vertical_template_mode24")&&u.default.triggerAdEvent("vertical_template_mode24"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++)this.nodePlayerContainer.children[t],m.default},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/2,this.nodeBg.y=-t.y/2},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode24"),u.default.closeAdv("vertical_template_mode24")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c>10?10:c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80024",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u8fbe\u5230\u4eba\u751f\u5dc5\u5cf0\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80024",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bQiQiang:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bQiQiang:!0,btn1Str:"\u4e0d\u635e\u4e86",btn2Str:"\u635e\u8d77\u6765",content:"\u6709\u672c\u4e8b\u5c31\u628a\u81ea\u5df1\u635e\u8d77\u6765",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80024",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i;this.nodeBg.width=r,this.nodeBg.height=a;for(var s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/qiqiang/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/qiqiang/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/qiqiang/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/qiqiang/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/qiqiang/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/qiqiang/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/qiqiang/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/qiqiang/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({bQiQiang:!0,fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({bQiQiang:!0,fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({bQiQiang:!0,fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({bQiQiang:!0,fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({bQiQiang:!0,fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<2;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void(d.default.random(100)<10&&c());for(u=0;u<5;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/qiqiang/art_04.png":"2d/ui/qiqiang/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/qiqiang/art_04.png":"2d/ui/qiqiang/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bQiQiang:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80024","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80024",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameQueenScene:[function(e,t,i){"use strict";cc._RF.push(t,"c5e18hvZM9DBZ4LOLCbZQW6","vGameQueenScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameQueenScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode13")&&u.default.triggerAdEvent("single_template_mode13"),u.default.isCanTriggerTemplateAd("vertical_template_mode13")&&u.default.triggerAdEvent("vertical_template_mode13"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode13"),u.default.closeAdv("vertical_template_mode13")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80013",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vQueenSuccessDialog",{fOnDialogClose:function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80013",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bQueen:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bQueen:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80013",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/queen/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/queen/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/queen/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/queen/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/queen/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/queen/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/queen/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/queen/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t)});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/queen/art_04.png":"2d/ui/queen/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/queen/art_04.png":"2d/ui/queen/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bQueen:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80013","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80013",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameScene141:[function(e,t,i){"use strict";cc._RF.push(t,"9f255wHcm5D0KXCB9rwBr3F","vGameScene141");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("Fish141"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameScene141"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode8")&&u.default.triggerAdEvent("single_template_mode8"),u.default.isCanTriggerTemplateAd("vertical_template_mode8")&&u.default.triggerAdEvent("vertical_template_mode8"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,this.nodeVideoInvincibleTip.active=!1,this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg())},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.currDirRot=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode8"),u.default.closeAdv("vertical_template_mode8")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;_.default.play(102),v.default.statisOnStageEnd("80009",1,"\u5173\u5361\u80dc\u5229"),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u53ec\u5524\u51fa\u8fdc\u53e4\u5de8\u9cb2\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80009",0,"\u5173\u5361\u7ed3\u675f");var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bBeast:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bBeast:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80009",1,"\u5173\u5361\u80dc\u5229"),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/beast/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/beast/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/beast/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/beast/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/beast/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/beast/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/beast/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/beast/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)});r.currDirRot=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).currDirRot=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.currDirRot=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.currDirRot=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t)});_.clearPendant(),f.default.bFishStopRun||_.bHaveLongZhu()||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.currDirRot=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode("2d/ui/beast/art_04.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode("2d/ui/beast/art_04.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.rectRect(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bBeast:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.rectRect(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80009","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this.nodeTemplate.getChildByName("fish"+e);if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80009",0,"\u5173\u5361\u7ed3\u675f"),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameScene:[function(e,t,i){"use strict";cc._RF.push(t,"1add6DWIehMb73NbA/h4lNX","vGameScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrCop"),f=o("mgrDirector"),g=o("mgrFishRank"),v=o("mgrFishSkin"),_=o("mgrGame"),y=o("mgrPlayer"),m=o("mgrPool"),S=o("mgrSdk"),b=o("mgrSound"),C=o("Fish"),I=o("vFishRankPanel"),F=1,R=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.gameMode=F,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseMagnet=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.labelVudeoStopTipTime=null,n.nodeBall1=null,n.nodeBall2=null,n.nodeBall3=null,n.nodeBall4=null,n.nodeBall5=null,n.nodeBall6=null,n.nodeBall7=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodeItems=null,n.nodePlayerContainer=null,n.nodePlayerItem=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRankPanelRoot2=null,n.nodeRightButtons=null,n.nodeSeven=null,n.nodeStopRun=null,n.nodeSurvival=null,n.nodeVideoInvincibleTip=null,n.nodeVideoStopTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.bIron=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.countDownValue=0,n.countDownCumulative=0,n.longzhuGroup=[],n.bCreateLongzhuFish=!0,n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseMagnet:[s.default,"onTouchButtonUseMagnet"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_labelVudeoStopTipTime:[cc.Label],CC_nodeBall1:[cc.Node],CC_nodeBall2:[cc.Node],CC_nodeBall3:[cc.Node],CC_nodeBall4:[cc.Node],CC_nodeBall5:[cc.Node],CC_nodeBall6:[cc.Node],CC_nodeBall7:[cc.Node],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodeItems:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePlayerItem:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRankPanelRoot2:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSeven:[cc.Node],CC_nodeStopRun:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_nodeVideoStopTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),u.default.isCanTriggerTemplateAd("single_template_mode1")&&u.default.triggerAdEvent("single_template_mode1"),u.default.isCanTriggerTemplateAd("vertical_template_mode1")&&u.default.triggerAdEvent("vertical_template_mode1"),this.refreshVideoRecordState(),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)}),this.refreshPoint()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isPause()||(t<1&&(_.default.fishStopRunTime-=t,_.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),_.default.fishStopRunTime<=0?(_.default.fishStopRunTime=0,_.default.bFishStopRun=!1,this.nodeVideoStopTip.active=!1):(this.nodeVideoStopTip.active=!0,this.labelVudeoStopTipTime.string=Math.floor(_.default.fishStopRunTime).toString()),_.default.fishStopInvincibleTime<=0?(_.default.fishStopInvincibleTime=0,_.default.bFishStopInvincible=!1,this.nodeVideoInvincibleTip.active=!1,this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(_.default.fishStopInvincibleTime).toString()),7==this.gameMode&&(this.labelRankScore.string=this.rankScore.toString()))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode1"),u.default.closeAdv("vertical_template_mode1")},t.prototype.refreshBtns=function(){this.buttonUseMagnet.node.active=!1,this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeStopRun.active=!1,this.nodeInvincible.active=!1,_.default.fishStopRunTime=0},t.prototype.refreshPoint=function(){y.default.getItemAmount(20)>=p.default.getNumberValue("unlock_mode1_count")||S.default.statisVideoPointEvent("video_unlock_mode1",1),y.default.getItemAmount(21)>=p.default.getNumberValue("unlock_mode2_count")||S.default.statisVideoPointEvent("video_unlock_mode2",1),y.default.getItemAmount(22)>=p.default.getNumberValue("unlock_mode3_count")||S.default.statisVideoPointEvent("video_unlock_mode3",1),y.default.getItemAmount(23)>=p.default.getNumberValue("unlock_mode4_count")||S.default.statisVideoPointEvent("video_unlock_mode4",1),y.default.getItemAmount(24)>=p.default.getNumberValue("unlock_mode5_count")||S.default.statisVideoPointEvent("video_unlock_mode5",1),y.default.getItemAmount(25)>=p.default.getNumberValue("unlock_mode6_count")||S.default.statisVideoPointEvent("video_unlock_mode6",1)},t.prototype.refreshVideoRecordState=function(){},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.bIron=!1,this.context.gameMode&&(this.context.gameMode==F?this.gameStart():2==this.context.gameMode?(this.gameMode=2,this.gameStart(!0)):3==this.context.gameMode?(this.gameMode=3,this.nodeSurvival.active=!0,this.gameStart(!0)):4==this.context.gameMode?(this.gameMode=4,this.initLongZhuState(),this.gameStart(!0)):7==this.context.gameMode?(this.gameMode=7,this.initRankState(),this.gameStart(!0)):8==this.context.gameMode&&(this.nodeBg.getComponent(cc.Sprite).loadSpriteFrame("2d/ui/iron/art_01"),this.gameMode=8,this.bIron=!0,this.gameStart(!0)))},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}if(3==this.gameMode){var n=this.rivierFishArr;if(n.length>0){for(var o=n.length-1;o>=0;o--)this._addFishToStandbyByFishId(n[o]);this.rivierFishArr=[]}}},t.prototype.refreshCountDown=function(e){3==this.gameMode&&(this.progressBarTimeDown.progress<=0?(this.progressBarTimeDown.progress=0,this.labelTime.string="0\u79d2",this.setNextState(this.st_finish)):(this.countDownValue=this.countDownValue+e/90,this.countDownCumulative=this.countDownCumulative+e,this.progressBarTimeDown.progress=1-this.countDownValue,this.labelTime.string=Math.ceil(90-this.countDownCumulative).toString()+"\u79d2")),7==this.gameMode&&(this.progressBarRankTimeDown.progress<=0?(this.progressBarRankTimeDown.progress=0,this.labelRankTime.string="0\u79d2",this.setNextState(this.st_finish)):(this.countDownValue=this.countDownValue+e/90,this.countDownCumulative=this.countDownCumulative+e,this.progressBarRankTimeDown.progress=1-this.countDownValue,this.labelRankTime.string=Math.ceil(90-this.countDownCumulative).toString()+"\u79d2"),g.default.updateScoreByTime(this.countDownValue))},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.refreshCountDown(e),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;b.default.play(102),S.default.statisOnStageEnd((8e4+this.gameMode).toString(),1,"\u5173\u5361\u80dc\u5229"),S.default.statisCommonEvent(80001),l.default.callLater(2,function(){if(7==e.gameMode){var t=g.default.getPlayerData();e.pauseGame("prompt"),f.default.openDialog("vFishRankResultDialog",{bWin:t.rank<=5,rank:t.rank,fOnDialogClose:function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}})}else{e.pauseGame("prompt");var i="\u606d\u559c\u4f60\uff0c\u4f60\u5df2\u7ecf\u8fbe\u5230\u6700\u5927\u7ea7";8==e.context.gameMode&&(i="\u606d\u559c\u4f60\u5efa\u7acb\u4e86\u94a2\u94c1\u6d2a\u6d41"),f.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:i,btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})}},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){if(S.default.statisOnStageEnd((8e4+e.gameMode).toString(),0,"\u5173\u5361\u7ed3\u675f"),S.default.statisCommonEvent(80001),7==e.gameMode){var i=g.default.getPlayerData();f.default.openDialog("vFishRankResultDialog",{bWin:!1,rank:i.rank,fOnDialogClose:function(){e.setNextState(e.st_restart)}})}else f.default.openDialog("vFishResultDialog",{fishId:t,bIron:e.bIron,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")?(this.pauseGame("adv"),f.default.openDialog("vAdRevive",{adEventId:"video_trigger_reborn",fishId:t,bIron:this.bIron,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})):i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.countDownValue=0,this.countDownCumulative=0,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.countDownValue=0,this.countDownCumulative=0,this.rankScore=0},t.prototype.resetLongZhu=function(){this.nodeSeven.active=!1,this.bCreateLongzhuFish=!0,this.buttonUseMagnet.node.active=!1},t.prototype.updateLongZhu=function(e){return!!this.longzhuGroup&&(e||(e=d.default.extractOne(this.longzhuGroup)),e.active=!0,console.log("\u66f4\u65b0\u9f99\u73e0\u72b6\u6001:",this.longzhuGroup.length),!!(this.bCreateLongzhuFish&&this.longzhuGroup&&this.longzhuGroup.length<1)&&(this.callGodDragon(),this.buttonUseMagnet.node.active=!1,!0))},t.prototype.callGodDragon=function(){var e=this;return console.log("\u53ec\u5524\u795e\u9f99:"),this.pauseGame("prompt"),f.default.openDialog("vAdPromptDialog",{adEventId:"video_vHubScene_defence",btn1Str:"\u53d6\u6d88",btn2Str:"\u786e\u5b9a",content:"\u4e03\u9897\u9f99\u73e0\u5df2\u7ecf\u96c6\u9f50\uff0c\u662f\u5426\u7acb\u523b\u53ec\u5524\u795e\u9f99?",refuse:function(){e.resumeGame("prompt"),e.bCreateLongzhuFish=!1},confirm:function(){e.addPlayerMaxFish(e.maxConfigFishId),e.setNextState(e.st_arrivedMaxFish),e.resumeGame("prompt")}}),!0},t.prototype.initLongZhuState=function(){this.buttonUseMagnet.node.active=!0,this.buttonUseMagnet.node.active=u.default.preCheckAdNoCd("video_vHubScene_magnet"),this.buttonUseMagnet.node.active&&S.default.statisVideoPointEvent("video_vHubScene_magnet",1),this.nodeSeven.active=!0,this.longzhuGroup=[];for(var e=1;e<=7;e++){var t=this["nodeBall"+e];t.active=!0;var i=t.getChildByName("active");i.active=!1,this.longzhuGroup.push(i)}var n=this.rivierFishArr;if(n.length>0){for(var o=n.length-1;o>=0;o--)this._addFishToStandbyByFishId(n[o]);this.rivierFishArr=[]}},t.prototype.initRankState=function(){this.nodeRank.active=!0,this.nodeRankPanelRoot1.active=!0,g.default.initRank(),this.rankScore=0,this.nodeRankPanelRoot2.destroyAllChildren(),(new I.default).parent=this.nodeRankPanelRoot2,this.labelRankScore.string=""},t.prototype.triggerMagnetSkill=function(){var e=this;if(cc.log("\u89e6\u53d1\u78c1\u94c1"),!(this.longzhuGroup.length<=0)){var t=d.default.extractOne(this.longzhuGroup);this.pauseGame("magnet");var i=new cc.Node;i.parent=this,i.position=cc.v2(0,-650);var n=new cc.Node;n.parent=i,n.addComponent(cc.Sprite).loadSpriteFrame("2d/ui/hub/longzhu/art1");var o=this.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.v2(0,0)));i.runAction(cc.sequence(cc.spawn(cc.moveTo(.5,0,0).easing(cc.easeIn(1.5)),cc.scaleTo(.5,1,1).easing(cc.easeIn(1.5))),cc.spawn(cc.moveTo(1.5,0,20),cc.scaleTo(1.5,3,3)),cc.spawn(cc.moveTo(.5,o.x,o.y).easing(cc.easeBackIn()),cc.scaleTo(.5,1,1).easing(cc.easeBackIn())),cc.callFunc(function(){e.resumeGame("magnet"),e.updateLongZhu(t)}),cc.fadeOut(.3),cc.removeSelf()))}},t.prototype.tryTriggerAdSkinDialog=function(){v.default.isSkinUnlocked(2)&&v.default.isSkinUnlocked(3)||u.default.preCheckCanTriggerAdEvent("video_unlock_skin")&&d.default.random(100)<=p.default.getNumberValue("alert_ad_skin_ratio")&&f.default.openDialog("vAdSkinDialog")},t.prototype.inRestart=function(){this.refreshPoint(),this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetLongZhu(),this.resetRank(),this.nodeStopRun.active=!1,this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,_.default.fishStopRunTime=0,_.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),f.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;if(S.default.statisOnStageEnd((8e4+this.gameMode).toString(),1,"\u5173\u5361\u80dc\u5229"),S.default.statisCommonEvent(80001),7==this.gameMode){var t=g.default.getPlayerData();f.default.openDialog("vFishRankResultDialog",{bWin:t.rank<=5,rank:t.rank,fOnDialogClose:function(){e.setNextState(e.st_restart)}})}else f.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u4f60\u80dc\u5229\u4e86\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.setNextState(e.st_restart)}]})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=f.default.createSpriteNode("2d/ui/fish/borer01.png");8==this.context.gameMode&&(l=f.default.createSpriteNode("2d/ui/iron/art_02.png")),l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=f.default.createSpriteNode("2d/ui/fish/borer01.png");8==this.context.gameMode&&(d=f.default.createSpriteNode("2d/ui/iron/art_02.png")),d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=f.default.createSpriteNode("2d/ui/fish/borer01.png");8==this.context.gameMode&&(u=f.default.createSpriteNode("2d/ui/iron/art_02.png")),u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=f.default.createSpriteNode("2d/ui/fish/borer01.png");8==this.context.gameMode&&(h=f.default.createSpriteNode("2d/ui/iron/art_02.png")),h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var p=f.default.createSpriteNode("2d/ui/fish/borer02.png");8==this.context.gameMode&&(p=f.default.createSpriteNode("2d/ui/iron/art_03.png")),this.nodePoolRiverContainer.addChild(p),p.x=-this.RIVER_W/2+e/2,p.y=this.RIVER_H/2+t/2;var g=f.default.createSpriteNode("2d/ui/fish/borer02.png");8==this.context.gameMode&&(g=f.default.createSpriteNode("2d/ui/iron/art_03.png")),this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=f.default.createSpriteNode("2d/ui/fish/borer02.png");8==this.context.gameMode&&(v=f.default.createSpriteNode("2d/ui/iron/art_03.png")),this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=f.default.createSpriteNode("2d/ui/fish/borer02.png");8==this.context.gameMode&&(_=f.default.createSpriteNode("2d/ui/iron/art_03.png")),this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new C.default({fishId:e,bPlayer:!0,bIron:this.bIron});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),m.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=m.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new C.default({fishId:e,bPlayer:!0,bIron:this.bIron})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new C.default({fishId:n,bPlayer:!0,bIron:this.bIron})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new C.default({fishId:n,bPlayer:!0,bIron:this.bIron})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),8==this.context.gameMode&&(d.setPosition(0,-1e3),cc.tween(d).to(2,{y:2e3}).start()),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),m.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=m.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.angle=-this.currDirRot,t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],f=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,f,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var y=null;7==t.gameMode&&(y=g.default.calcRandomName());var m=new C.default({fishId:e,bPlayer:!1,rankName:y,bIron:t.bIron});if(m.clearPendant(),4==t.gameMode&&t.bCreateLongzhuFish){for(var S=0,b=0;b<t.rivierFishArr.length;b++)t.rivierFishArr[b].haveLongzhu&&S++;S<10&&m.createLongZhu()}else 7==t.gameMode&&m.createLongZhu();_.default.bFishStopRun||m.bHaveLongZhu()||t.createSnowFishTime>t.createSnowFishCd&&(m.createSnow(),t.createSnowFishTime=0),m.setMoveFunc(t.doFishMove.bind(t)),m.setContextField("playerPos",l),m.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),m.parent&&console.warn("---aparent exit"),a.addChild(m),m.angle=d.default.random(0,360),m.setPosition(o,s),m.starAutoMove(),t.rivierFishArr.push(m)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var f=p.length-1;f>=0;f--){var v=p[f];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(f,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}];if(this.gameMode==F);else if(2==this.gameMode)e=[{deltaLevel:-1,weight:50,maxCount:50},{deltaLevel:0,weight:50,maxCount:50}];else if(3==this.gameMode){console.log("\u751f\u5b58\u6a21\u5f0f\uff0c\u751f\u6210\u9c7c");var t=this.progressBarTimeDown.progress;e=t>=.8?[{deltaLevel:1,weight:50,maxCount:50}]:t>=.6?[{deltaLevel:1,weight:50,maxCount:30},{deltaLevel:2,weight:50,maxCount:30}]:t>=.4?[{deltaLevel:1,weight:50,maxCount:25},{deltaLevel:2,weight:50,maxCount:25},{deltaLevel:3,weight:50,maxCount:25}]:t>=.2?[{deltaLevel:1,weight:50,maxCount:20},{deltaLevel:2,weight:50,maxCount:20},{deltaLevel:3,weight:50,maxCount:20},{deltaLevel:4,weight:50,maxCount:20}]:[{deltaLevel:1,weight:50,maxCount:20},{deltaLevel:2,weight:50,maxCount:20},{deltaLevel:3,weight:50,maxCount:20},{deltaLevel:4,weight:50,maxCount:20},{deltaLevel:5,weight:50,maxCount:20}]}else this.gameMode;_.default.bFishStopRun||this.createSnowFishTime>this.createSnowFishCd&&(e=2==this.gameMode?[{deltaLevel:-1,weight:50,maxCount:24},{deltaLevel:0,weight:50,maxCount:20}]:[{deltaLevel:-1,weight:50,maxCount:24},{deltaLevel:0,weight:50,maxCount:20},{deltaLevel:1,weight:50,maxCount:16},{deltaLevel:2,weight:50,maxCount:12}]);for(var i={},n=0;n<this.rivierFishArr.length;n++){var o=this.rivierFishArr[n];i[o.getFishId()]=(i[o.getFishId()]||0)+1}for(n=e.length-1;n>=0;n--){var r=e[n];if((s=this.playerMaxLevelFishId+r.deltaLevel)<1||s>=this.maxConfigFishId)e.splice(n,1);else{var a=i[s];a&&a>=r.maxCount&&e.splice(n,1)}}var s,l=d.default.calcWheelTarget(e,"weight");return l?s=this.playerMaxLevelFishId+l.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=f.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,8==this.context.gameMode&&((u=f.default.createSpriteNode("2d/ui/iron/art_04.png")).zIndex=0),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),h=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),p=h.length-1;p>=0;p--){var v=h[p],y=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,y)){if(t<v.getFishId()){if(_.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),m.default.put(this.animNodeDie),this.animNodeDie=null),(S=m.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,S.position=new cc.Vec2(v.x,v.y),S.play(),this.animNodeDie=S,v.removeFromParent(),v.stopAutoMove(),h.splice(p,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),m.default.put(this.animNodeDie),this.animNodeDie=null);var S,b=!1;return 4==this.gameMode?v.bHaveLongZhu()&&(b=this.updateLongZhu()):7==this.gameMode&&(this.rankScore++,this.labelRankScore.string=this.rankScore.toString(),g.default.setPlayerScore(this.rankScore)),v.bHaveSnow()&&u.default.preCheckAdNoCd("video_trigger_snow")&&(this.pauseGame("prompt"),f.default.openDialog("vSnowDialog",{bIron:this.bIron,closeCallback:function(){e.resumeGame("prompt")}})),(S=m.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,S.position=new cc.Vec2(v.x,v.y),S.play(),this.animNodeDie=S,v.removeFromParent(),v.stopAutoMove(),h.splice(p,1),this._addFishToStandbyByFishId(v),b||this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else if(3!=this.gameMode)for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(f.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-f.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-f.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-f.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-f.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(f.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var p=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,p,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=m.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);f.default.width,isNaN(this.currDirRot)&&console.log("12"),o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&S.default.statisVideoPointEvent("video_trigger_defence2",1),S.default.statisOnStageStart((8e4+this.gameMode).toString(),"\u5173\u5361\u5f00\u59cb"),this.nodeStopRun.active=!0,this.nodeInvincible.active=!0,_.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=u.default.preCheckAdNoCd("video_trigger_defence2");var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);h.default.get_from_fish_db(4),this.pauseGame("prompt"),f.default.openDialog("vAdStartDialog",{adEventId:"video_vHubScene_start",fishId:4,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u6211\u8981\u8bd5\u8bd5",content:"\u670b\u53cb~\u5f3a\u9f99\u5f00\u5c40\u6240\u5411\u62ab\u9761,\u503c\u5f97\u62e5\u6709\uff01",refuse:function(){i.resumeGame("prompt"),n(t)},confirm:function(){i.resumeGame("prompt"),i.defenceCompletedTime=d.default.time()+2,n(4)}})},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=m.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),m.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){S.default.statisOnStageEnd((8e4+t.gameMode).toString(),0,"\u5173\u5361\u7ed3\u675f"),S.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];f.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e,i=t.adEventId;"video_vHubScene_level_start"==i&&t.userData.fishId||"video_vHubScene_stop_run"==i||("video_vHubScene_buffet"==i?(y.default.addItemAmount(17,1,"\u5e7f\u544a\u6b21\u6570"),this.refreshBtns()):"video_vHubScene_magnet"==i?this.triggerMagnetSkill():"video_unlock_mode1"==i?(y.default.addItemAmount(20,1,"\u89e3\u9501\u6a21\u5f0f1"),this.refreshBtns()):"video_unlock_mode2"==i?(y.default.addItemAmount(21,1,"\u89e3\u9501\u6a21\u5f0f2"),this.refreshBtns()):"video_unlock_mode3"==i?(y.default.addItemAmount(22,1,"\u89e3\u9501\u6a21\u5f0f3"),this.refreshBtns()):"video_unlock_mode4"==i?(y.default.addItemAmount(23,1,"\u89e3\u9501\u6a21\u5f0f4"),this.refreshBtns()):"video_unlock_mode5"==i?(y.default.addItemAmount(24,1,"\u89e3\u9501\u6a21\u5f0f5"),this.refreshBtns()):"video_unlock_mode6"==i?(y.default.addItemAmount(25,1,"\u89e3\u9501\u6a21\u5f0f6"),this.refreshBtns()):"video_trigger_snow"==i?_.default.tryFishStopRun():"video_trigger_defence2"==i&&(_.default.tryFishInvincibleStop(),this.createFishShield()))},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){this.refreshVideoRecordState()},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(e){"m"==e&&4==this.gameMode&&this.triggerMagnetSkill()},t}(c.default);r.default=R,cc._RF.pop()},{}],vGameSkillScene:[function(e,t,i){"use strict";cc._RF.push(t,"c7f15bvVcBB8qhJf6TSTesK","vGameSkillScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("Fish141"),S=o("GoldFish"),b=o("LayerColor"),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBack=null,t.nodeLayoutLeft=null,t.nodeLeftTop=null,t.nodeLayoutRight=null,t.buttonUseShield=null,t.labelGaintGoldFishItem=null,t.labelGaintGoldFishTime=null,t.labelInvincibleStopTipTime=null,t.labelRankScore=null,t.labelRankTime=null,t.labelTime=null,t.nodeBeginBg=null,t.nodeBg=null,t.nodeEffect=null,t.nodeEvent=null,t.nodeFlower=null,t.nodeGaintGoldFish=null,t.nodeGame=null,t.nodeInvincible=null,t.nodePlayerContainer=null,t.nodePoolRiverContainer=null,t.nodeRank=null,t.nodeRankPanelRoot1=null,t.nodeRightButtons=null,t.nodeSurvival=null,t.nodeTemplate=null,t.nodeVideoInvincibleTip=null,t.progressBarRankTimeDown=null,t.progressBarTimeDown=null,t._hadShare=!1,t.st_init=1,t.st_waitStart=2,t.st_moving=3,t.st_arrivedMaxFish=4,t.st_dead=5,t.st_restart=20,t.st_finish=31,t.MAX_RIVER_FISH_COUNT=100,t.standbyFishId2FishDict={},t.playerFishArr=[],t.rivierFishArr=[],t.goldFishArr=[],t.eatedFishArr=[],t.INIT_FISH_ID=1,t.CONFIG_RIVER_ROW_COUNT=4,t.CONFIG_RIVER_COLUMN_COUNT=5,t.RIVER_W=1,t.RIVER_H=1,t.LINE_WH=1320,t.playerMaxLevelFishId=0,t.playerHistoryMaxFishId=0,t.TYPE_REFRESH_REVER_FISH_NORMAL=0,t.TYPE_REFRESH_REVER_FISH_INIT=1,t.TYPE_REFRESH_REVER_FISH_LEVELUP=2,t.lastShowAdDialogTime=0,t.bGameing=!1,t.bOpenSnowAdv=!1,t.rankScore=0,t.riverFlowerArr=[],t.pauseFlags={},t.defenceCompletedTime=0,t.skillId=0,t.skillLevel=0,t.autoGenGoldFishRemainCount=0,t.autoGenGoldFishGapTime=0,t.autoGenGoldFishRemainTime=0,t.hitGenGoldFishCount=0,t.autoGenGoldFishCircleIndex=0,t.gaintGoldFishItemCount=0,t.gaintGoldFishItemMaxCount=15,t.gaintGoldFishTime=0,t.gaintGoldFishRemainTime=0,t.gaintGoldFishItems=[],t.lastPlayGoldFishArriveEffectTime=0,t.bSkillTitleEffectPlayed=!1,t.FISH_ID_2_SCALE_DICT={},t.FISH_ID_2_MOVE_FPS={},t.FISH_ID_2_LAYOUT_RADIUS={},t.longzhuFishNumber=0,t.createSnowFishTime=0,t.createSnowFishCd=10,t}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameSkillScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelGaintGoldFishItem:[cc.Label],CC_labelGaintGoldFishTime:[cc.Label],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEffect:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeFlower:[cc.Node],CC_nodeGaintGoldFish:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode11")&&u.default.triggerAdEvent("single_template_mode11"),u.default.isCanTriggerTemplateAd("vertical_template_mode11")&&u.default.triggerAdEvent("vertical_template_mode11"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isPause()||this.nodePlayerContainer&&(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,this.nodeVideoInvincibleTip.active=!1,this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateGoldFish(),this.updateBg())},t.prototype.updatePlayerFishRot=function(){if(this.nodePlayerContainer){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.currDirRot=e)}this.gaintGoldFish&&(this.gaintGoldFish.angle=180+e)}},t.prototype.updateGoldFish=function(){for(var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e),i=0;i<this.goldFishArr.length;i++)this.goldFishArr[i].setTargetPos(t)},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode11"),u.default.closeAdv("vertical_template_mode11")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){for(var e=1;e<=23;e++){var t=.025*Math.pow(1.3,e-1),i=1/t*d.default.scaleInRange(e,1,23,.6,1.5);23==e&&(i=1/t*3);var n=200/i,o=75*t;this.FISH_ID_2_SCALE_DICT[e]=i,this.FISH_ID_2_MOVE_FPS[e]=n,this.FISH_ID_2_LAYOUT_RADIUS[e]=o}var r=f.default.getCurSkillData(),a=r[0],s=r[1];cc.log("vGameSkillScene, skill:",a,s);var l=h.default.get_from_big_mode_skill_db(a);if(l)switch(this.skillId=a,this.skillLevel=s,l.id){case 1:this.autoGenGoldFishRemainCount=l.numLevel[s-1]||1,this.autoGenGoldFishGapTime=.025,this.playSkillTitleEffect();break;case 2:this.autoGenGoldFishRemainCount=1e8;var c=l.numLevel[s-1]||1;this.autoGenGoldFishGapTime=1/c,this.playSkillTitleEffect();break;case 3:this.hitGenGoldFishCount=l.numLevel[s-1]||1;break;case 4:this.gaintGoldFishTime=l.numLevel[s-1]||1}this.adaptGameStageScale(!0),this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart(0!=this.skillId)},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.refreshRiverGaintGoldFishItem(),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.updateSkill(e),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.updateSkill=function(e){var t,i=!1;if(this.autoGenGoldFishGapTime>0&&this.autoGenGoldFishRemainCount>0&&(this.autoGenGoldFishRemainTime-=e,this.autoGenGoldFishRemainTime<=0)){this.autoGenGoldFishRemainCount--;var n,o,r=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),a=this.nodePoolRiverContainer.convertToNodeSpaceAR(r),s=10*this.FISH_ID_2_LAYOUT_RADIUS[this.playerMaxLevelFishId],l=Math.floor(1/this.autoGenGoldFishGapTime),c=-360/l*(this.autoGenGoldFishCircleIndex%l);n=(t=d.default.calcPointOnArc(a.x,a.y,s,c))[0],o=t[1],this.createGoldFish(1,cc.v2(n,o)),this.autoGenGoldFishRemainTime=this.autoGenGoldFishGapTime,this.autoGenGoldFishCircleIndex++}if(this.gaintGoldFishTime>0)if(this.nodeGaintGoldFish.active=!0,this.labelGaintGoldFishItem.string=ul.format("%d/%d",this.gaintGoldFishItemCount,this.gaintGoldFishItemMaxCount),this.gaintGoldFishItemCount>=this.gaintGoldFishItemMaxCount&&(this.gaintGoldFishRemainTime+=this.gaintGoldFishTime,this.gaintGoldFishItemCount-=this.gaintGoldFishItemMaxCount),this.gaintGoldFishRemainTime>0){this.gaintGoldFishRemainTime-=e,this.gaintGoldFish||(this.gaintGoldFish=this.createFishNode(1,"goldFish"),this.gaintGoldFish.parent=this.nodePlayerContainer,this.gaintGoldFish.zIndex=9999,this.playSkillTitleEffect(),_.default.play(104));var u=Math.min(this.playerMaxLevelFishId+2,23),h=.025*Math.pow(1.3,u-1);this.gaintGoldFish.scale=h,this.labelGaintGoldFishTime.string=ul.format("%d\u79d2",Math.ceil(this.gaintGoldFishRemainTime)),i=!0,this.tryPlayGoldFishArriveEffect()}else this.labelGaintGoldFishTime.string="",this.gaintGoldFish&&(this.gaintGoldFish.destroy(),this.gaintGoldFish=null);else this.nodeGaintGoldFish.active=!1;this.goldFishArr.length>0&&(i=!0),i?this.showEdgeEffect():this.hideEdgeEffect()},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;_.default.play(102),this.gaintGoldFish&&(this.gaintGoldFish.destroy(),this.gaintGoldFish=null),v.default.statisOnStageEnd("80011",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u53ec\u5524\u51fa\u8fdc\u53e4\u5de8\u9cb2\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerHistoryMaxFishId,i=function(){v.default.statisOnStageEnd("80011",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bBeast:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bBeast:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1,e.clearPlayerFishs(),e.clearRiverFishs(),e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={},this.clearPlayerFishs(),this.clearRiverFishs(),this.playerMaxLevelFishId=1,this.playerHistoryMaxFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80011",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/beast/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.zIndex=2,l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/beast/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.zIndex=2,d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/beast/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.zIndex=2,u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/beast/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.zIndex=2,h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/beast/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2,f.zIndex=2;var g=p.default.createSpriteNode("2d/ui/beast/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90,g.zIndex=2;var v=p.default.createSpriteNode("2d/ui/beast/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180,v.zIndex=2;var _=p.default.createSpriteNode("2d/ui/beast/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270,_.zIndex=2;var y=new b.default(cc.color(52,62,87,255));y.setContentSize(this.RIVER_W+6e3,3e3),y.position=cc.v2(0,-this.RIVER_H/2-500),y.setAnchorPoint(.5,1),y.parent=this.nodePoolRiverContainer,y.zIndex=1;var m=new b.default(cc.color(52,62,87,255));m.setContentSize(this.RIVER_W+6e3,3e3),m.position=cc.v2(0,this.RIVER_H/2+500),m.setAnchorPoint(.5,0),m.parent=this.nodePoolRiverContainer,m.zIndex=1;var S=new b.default(cc.color(52,62,87,255));S.setContentSize(3e3,this.RIVER_H+6e3),S.position=cc.v2(-this.RIVER_W/2-500,0),S.setAnchorPoint(1,.5),S.parent=this.nodePoolRiverContainer,S.zIndex=1;var C=new b.default(cc.color(52,62,87,255));C.setContentSize(3e3,this.RIVER_H+6e3),C.position=cc.v2(this.RIVER_W/2+500,0),C.setAnchorPoint(0,.5),C.parent=this.nodePoolRiverContainer,C.zIndex=1},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype.addPlayerFish=function(e){var t=this;if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);for(var i=this.nodePlayerContainer,n=this.playerFishArr,o={},r=1;r<=23;r++)o[r]=0;for(r=0;r<n.length;r++){var a=n[r];o[a.fishId]=o[a.fishId]+1}o[e]++;for(var s=1;s<=22;s++)o[s]>=3&&(o[s]-=3,o[s+1]++);if((o[23]||0)>0){for(r=1;r<23;r++)o[r]=0;o[23]=1}if(d.default.forEachMap(o,function(e,o){for(var r=parseInt(e),a=0,s=0;s<n.length;s++)(d=n[s]).fishId==r&&(a+=1);if(a>o)for(var l=a;l>o;l--)for(s=n.length-1;s>=0;s--){var d;if((d=n[s]).fishId==r){d.destroy(),n.splice(s,1),cc.warn("remove fish",r);break}}else if(a<o)for(s=a;s<o;s++){var c=new m.default({fishId:r,bPlayer:!0,fCreateFishNode:t.createFishNode.bind(t)});c.parent=i,c.currDirRot=-t.currDirRot,n.push(c),cc.warn("add fish",r)}}),(n=d.default.sortArrayByField(n,"-fishId"))[0].fishId>this.playerMaxLevelFishId){var l=this.nodePlayerContainer.convertToWorldSpaceAR(cc.v2(0,0));y.default.playAnimNodeOnce("009_flash01",l.x,l.y)}return this.playerMaxLevelFishId=n[0].fishId,this.playerHistoryMaxFishId=Math.max(this.playerHistoryMaxFishId,this.playerMaxLevelFishId),23==this.playerMaxLevelFishId&&(this.bArrivedMaxFish=!0),this.playerFishArr=n,this.layoutPlayerFishs(),!0},t.prototype.layoutPlayerFishs=function(){for(var e=this.playerFishArr,t=0;t<e.length;t++){var i=e[t],n=this.calcPlayerFishPos(t);i.stopAllActions(),i.runAction(cc.moveTo(.3,n)),i.zIndex=1e3-t}},t.prototype.calcPlayerFishPos=function(e){for(var t,i,n,o=this.playerFishArr[0].fishId,r=this.FISH_ID_2_LAYOUT_RADIUS[o],a=[{radiusRatio:0,count:1,beginAngle:-90},{radiusRatio:1,count:6,beginAngle:-120},{radiusRatio:1.8,count:18,beginAngle:-90},{radiusRatio:2.4,count:36,beginAngle:-95}],s=0;s<a.length;s++){var l=a[s];if(!(e>=l.count)){var c=l.beginAngle+360/l.count*e;return i=(t=d.default.calcPointOnArc(0,0,l.radiusRatio*r,c))[0],n=t[1],cc.v2(i,n)}e-=l.count}return cc.v2(0,0)},t.prototype.diePlayerFish=function(e){if(cc.warn("diePlayerFish",e.fishId),!this.bGameOver){for(var t=0;t<this.playerFishArr.length;t++){var i=this.playerFishArr[t];i==e&&(i.destroy(),this.playerFishArr.splice(t,1))}this.playerFishArr.length>0?(this.playerMaxLevelFishId=this.playerFishArr[0].fishId,this.layoutPlayerFishs()):(this.playerMaxLevelFishId=1,this.bGameOver=!0)}},t.prototype.adaptFishParams=function(){},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=0,o=0,s=t.getRiverWH(),c=s[0],u=s[1],h=(700+t.FISH_ID_2_LAYOUT_RADIUS[e])/r,p=0;p<10;p++){var g=d.default.random(360);if(n=(i=d.default.calcPointOnArc(l.x,l.y,h,g))[0],o=i[1],!(n<-c/2||n>c/2||o<-u/2||o>u/2))break}var v=.2*t.FISH_ID_2_MOVE_FPS[e],_=new m.default({fishId:e,bPlayer:!1,autoMoveSpeed:v,fCreateFishNode:t.createFishNode.bind(t)});_.clearPendant(),f.default.bFishStopRun||_.bHaveLongZhu()||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.currDirRot=d.default.random(0,360),_.setPosition(n,o),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var h=this.rivierFishArr;if(h.length>0)for(var p=h.length-1;p>=0;p--){var g=h[p];g.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(g),h.splice(p,1))}}else if(e==this.TYPE_REFRESH_REVER_FISH_INIT)for(u=0;u<10;u++)c();else c()},t.prototype.refreshRiverGaintGoldFishItem=function(){var e,t=this;if(!(this.gaintGoldFishTime<=0)){for(var i=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],n=(this.nodePoolRiverContainer,this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0))),o=this.nodePoolRiverContainer.convertToNodeSpaceAR(n),r=function(e){var n=a.gaintGoldFishItems[e],r=a.FISH_ID_2_LAYOUT_RADIUS[a.playerHistoryMaxFishId],s=Math.pow((1400+r)/i,2),l=Math.pow((50+r)/i,2),c=d.default.distanceSQ(o.x,o.y,n.x,n.y);if(c>=s)cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9053\u5177"),n.destroy(),a.gaintGoldFishItems.splice(e,1);else if(c<=l){cc.log("\u5403\u6389\u9053\u5177"),a.playDieEffect(n.x,n.y,a.playerMaxLevelFishId);var u=cc.instantiate(n);u.parent=a.nodeGaintGoldFish,u.scale=.5,u.position=a.nodeGaintGoldFish.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.v2(0,0)));var h=cc.v2(0,0);u.runAction(cc.sequence(cc.jumpTo(.5,h,100,1),cc.callFunc(function(){t.gaintGoldFishItemCount++,u.destroy()}))),n.destroy(),a.gaintGoldFishItems.splice(e,1)}},a=this,s=this.gaintGoldFishItems.length-1;s>=0;s--)r(s);if(this.gaintGoldFishItems.length<5){var l=0,c=0,u=this.getRiverWH(),h=u[0],p=u[1],f=(700+this.FISH_ID_2_LAYOUT_RADIUS[this.playerMaxLevelFishId])/i;for(s=0;s<10;s++){var g=d.default.random(360);if(l=(e=d.default.calcPointOnArc(o.x,o.y,f,g))[0],c=e[1],!(l<-h/2||l>h/2||c<-p/2||c>p/2))break}l&&c&&((y=new cc.Node).addComponent(cc.Sprite).loadSpriteFrame("2d/ui/bigskill/art_09"),y.parent=this.nodePoolRiverContainer,y.setAnchorPoint(.5,.5),y.x=l,y.y=c,this.gaintGoldFishItems.push(y),cc.log("\u521b\u5efa\u9053\u5177",l,c))}var v=Math.max(this.playerMaxLevelFishId-1,this.playerMaxLevelFishId),_=.025*Math.pow(1.3,v-1);for(s=this.gaintGoldFishItems.length-1;s>=0;s--){var y;(y=this.gaintGoldFishItems[s]).scale=_}}},t.prototype.playDieEffect=function(e,t){var i=this.nodePoolRiverContainer.convertToWorldSpaceAR(cc.v2(e,t));y.default.playAnimNodeOnce("009_flash02",i.x,i.y)},t.prototype.showEdgeEffect=function(){if(!this.edgeEffect){var e=g.default.get("animNode","009_screen");e.parent=this.nodeEffect,e.play();var t=p.default.width,i=(p.default.height,cc.view.getFrameSize().width),n=cc.view.getFrameSize().height,o=p.default.width,r=n/i*t;e.scaleX=o/576,e.scaleY=r/1024,this.edgeEffect=e}},t.prototype.hideEdgeEffect=function(){this.edgeEffect&&(this.edgeEffect.removeFromParent(),g.default.put(this.edgeEffect),this.edgeEffect=null)},t.prototype.tryPlayGoldFishArriveEffect=function(){if(!(d.default.time()-this.lastPlayGoldFishArriveEffectTime<=.3)){var e=this.nodePlayerContainer.convertToWorldSpaceAR(cc.v2(0,0));y.default.playAnimNodeOnce("009_flash03",e.x,e.y,.5,.5),this.lastPlayGoldFishArriveEffectTime=d.default.time(),_.default.play(103)}},t.prototype.playSkillTitleEffect=function(){var e=this.skillId;if(e){var t=h.default.get_from_big_mode_skill_db(e),i=g.default.get("animNode",t.titleAnimId);i.parent=this.nodeEffect,i.y=.25*p.default.height,i.play(),i.runAction(cc.sequence(cc.delayTime(2),cc.fadeOut(.3),cc.callFunc(function(){i.destroy()}))),this.bSkillTitleEffectPlayed=!0}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=23)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=(this.nodePoolRiverContainer,0);r<n;r++)for(var a=0;a<o;a++){var s=900*a-t/2+d.default.random(900),l=800*r-i/2+d.default.random(800),c=new cc.Node;c.parent=this.nodePoolRiverContainer,c.scale=.025;var u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,(u=p.default.createSpriteNode("2d/ui/beast/art_04.png")).parent=c,c.setPosition(s,l),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(c)}var h=new cc.Node;h.parent=this.nodePoolRiverContainer,h.scale=.025;var f=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");f.zIndex=500,(f=p.default.createSpriteNode("2d/ui/beast/art_04.png")).parent=h,h.setPosition(0,0),f.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){for(var e,t=this,i=0;i<this.playerFishArr.length;i++)for(var n=this.playerFishArr[i],o=n.getWorldAABBPoints(),r=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(n.x,n.y)),a=this.nodePoolRiverContainer.convertToNodeSpaceAR(r),s=this.rivierFishArr,l=s.length-1;l>=0;l--){var c=s[l],u=c.getWorldAABBPoints();if(cc.Intersection.rectRect(o,u)){if(!(this.gaintGoldFishRemainTime>0)&&this.playerMaxLevelFishId<c.getFishId()){if(f.default.bFishStopInvincible){this.playDieEffect(c.x,c.y,c.fishId),c.removeFromParent(),c.stopAutoMove(),s.splice(l,1),this._addFishToStandbyByFishId(c);continue}if(this.defenceCompletedTime>d.default.time())continue;this.playDieEffect(a.x,a.y,n.fishId),this.diePlayerFish(n);continue}if(c.bHaveSnow()){this.pauseGame("prompt");var h=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:h,bBeast:!0,closeCallback:function(){t.resumeGame("prompt")}})}var g=c.x,v=c.y;if(this.playDieEffect(c.x,c.y,c.fishId),c.removeFromParent(),c.stopAutoMove(),s.splice(l,1),this._addFishToStandbyByFishId(c),this.addPlayerFish(c.getFishId()),this.updateFishShieldScale(),this.hitGenGoldFishCount>0){for(var _=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),y=this.nodePoolRiverContainer.convertToNodeSpaceAR(_),m=10*this.FISH_ID_2_LAYOUT_RADIUS[this.playerMaxLevelFishId],S=d.default.angle(y.x,y.y,g,v),b=void 0,C=void 0,I=0;I<this.hitGenGoldFishCount;I++)b=(e=d.default.calcPointOnArc(y.x,y.y,m,S+d.default.random(-15,15)))[0],C=e[1],this.createGoldFish(3,cc.v2(b,C));this.bSkillTitleEffectPlayed||this.playSkillTitleEffect()}return}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=this.FISH_ID_2_LAYOUT_RADIUS[r.fishId],s=Math.pow((1400+a)/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=s){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var l=r;n.splice(o,1),l.removeFromParent(),l.stopAutoMove(),this._addFishToStandbyByFishId(l)}else for(var c=r.getWorldAABBPoints(),u=o-1;u>=0;u--){var h=n[u];if(d.default.distanceSQ(r.x,r.y,h.x,h.y)<=16e4){var p=h.getWorldAABBPoints();if(cc.Intersection.rectRect(c,p))return l=null,h.getFishId()<r.getFishId()?(l=h,n.splice(u,1)):(l=r,n.splice(o,1)),l.removeFromParent(),l.stopAutoMove(),void this._addFishToStandbyByFishId(l)}}}}},t.prototype.adaptGameStageScale=function(e){var t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1];if(!(this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01)){var i=d.default.scaleInRange(t,this.FISH_ID_2_SCALE_DICT[1],this.FISH_ID_2_SCALE_DICT[23],1.2,.8),n=1/t*d.default.scaleInRange(t,this.FISH_ID_2_SCALE_DICT[1],this.FISH_ID_2_SCALE_DICT[23],1,.5);if(e){this.nodeGame.stopAllActions(),this.nodeGame.scale=t,this.nodeBg.stopAllActions(),this.nodeBg.scale=i;for(var o=0;o<this.riverFlowerArr.length;o++)(r=this.riverFlowerArr[o]).stopAllActions(),r.scale=n}else for(this.nodeGame.stopAllActions(),this.nodeGame.runAction(cc.scaleTo(1,t)),cc.log("bgScale",i),this.nodeBg.stopAllActions(),this.nodeBg.runAction(cc.scaleTo(1,i)),cc.log("useScale",t),cc.log("flowerScale",n),o=0;o<this.riverFlowerArr.length;o++){var r;(r=this.riverFlowerArr[o]).stopAllActions(),r.runAction(cc.scaleTo(1,n))}}},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.gaintGoldFishRemainTime>0?this.FISH_ID_2_MOVE_FPS[Math.min(this.playerMaxLevelFishId+3,23)]:this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80011","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){i.clearPlayerFishs(),i.clearRiverFishs(),i.playerMaxLevelFishId=e,i.playerHistoryMaxFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=1/this.FISH_ID_2_SCALE_DICT[e.fishId]*.6,t.zIndex=9999,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=1/this.FISH_ID_2_SCALE_DICT[e.fishId]*.6}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.clearPlayerFishs=function(){for(var e=0;e<this.playerFishArr.length;e++)this.playerFishArr[e].destroy();this.playerFishArr=[]},t.prototype.clearRiverFishs=function(){for(var e=0;e<this.rivierFishArr.length;e++)this.rivierFishArr[e].destroy();this.rivierFishArr=[]},t.prototype.getPlayerBestBigFish=function(){return this.playerFishArr[0]},t.prototype.createFishNode=function(e,t){void 0===t&&(t="fish");var i=this.nodeTemplate.getChildByName(t+e);if(!i)return null;var n=cc.instantiate(i);n.x=0,n.y=0;var o=.025*Math.pow(1.3,e-1);n.scale=o;var r=n.getChildByName("bg");return cc.isValid(r)&&r.destroy(),n},t.prototype.createGoldFish=function(e,t,i){var n=this,o=this.createFishNode(e,"goldFish"),r=Math.max(this.playerMaxLevelFishId-5,e),a=.025*Math.pow(1.3,r-1);o.scale=a;var s=2*this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId],l=new S.default({fishId:e,nodeRes:o,moveSpeed:s,fOnArrive:function(){if(cc.isValid(l)){for(var t=0;t<n.goldFishArr.length;t++)n.goldFishArr[t]==l&&n.goldFishArr.splice(t,1);l.destroy(),n.addPlayerFish(e),n.tryPlayGoldFishArriveEffect(),i instanceof Function&&i()}}});l.parent=this.nodePoolRiverContainer,l.position=t,this.goldFishArr.push(l)},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80011",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(e){if("m"==e)this.addPlayerFish(1);else if("n"==e){var t=Math.min(23,this.playerFishArr[0].fishId+1);cc.log("targetFishId",t),this.clearPlayerFishs();for(var i=1;i<t;i++)this.addPlayerFish(i),this.addPlayerFish(i);this.addPlayerFish(t)}else if("b"==e){if(this.playerFishArr.length>0){var n=d.default.randomArr(this.playerFishArr);this.diePlayerFish(n)}}else"q"==e?(this.autoGenGoldFishRemainCount+=500,this.autoGenGoldFishGapTime=.025):"w"==e?(this.autoGenGoldFishRemainCount=1e8,this.autoGenGoldFishGapTime=.05):"e"==e?this.hitGenGoldFishCount=20:"r"==e&&(this.gaintGoldFishTime=10,this.gaintGoldFishItemCount++)},t}(c.default);r.default=C,cc._RF.pop()},{}],vGameSnacksScene:[function(e,t,i){"use strict";cc._RF.push(t,"db6e3QH/6tEJYgQ+T6+U4Jn","vGameSnacksScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameSnacksScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode19")&&u.default.triggerAdEvent("single_template_mode19"),u.default.isCanTriggerTemplateAd("vertical_template_mode19")&&u.default.triggerAdEvent("vertical_template_mode19"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode19"),u.default.closeAdv("vertical_template_mode19")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80019",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u62ff\u5230\u4e86\u7ec8\u6781\u96f6\u98df\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80019",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bSnacks:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bSnacks:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80019",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/snacks/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/snacks/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/snacks/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/snacks/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/snacks/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/snacks/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/snacks/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/snacks/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/snacks/art_04.png":"2d/ui/snacks/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/snacks/art_04.png":"2d/ui/snacks/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bSnacks:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80019","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80019",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameStarScene:[function(e,t,i){"use strict";cc._RF.push(t,"e2d39d7XUxEFYhQxk98x+Rc","vGameStarScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameStarScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),_.default.play(3),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode29")&&u.default.triggerAdEvent("single_template_mode29"),u.default.isCanTriggerTemplateAd("vertical_template_mode29")&&u.default.triggerAdEvent("vertical_template_mode29"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/2,this.nodeBg.y=-t.y/2},t.prototype.onDestroy=function(){_.default.play(1),e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode29"),u.default.closeAdv("vertical_template_mode29")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c>11?11:c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80029",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u606d\u559c\uff0c\u4f60\u5c31\u662f\u5b87\u5b99\u4e4b\u795e\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80029",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bStar:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bStar:!0,btn1Str:"\u6211\u8ba4\u8f93",btn2Str:"\u7ad9\u8d77\u6765",content:"\u4e00\u4ee3\u5b87\u5b99\u9738\u4e3b\u600e\u80fd\u5c31\u6b64\u653e\u5f03\uff1f",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80029",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i;this.nodeBg.width=r,this.nodeBg.height=a;for(var s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/star/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/star/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/star/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/star/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/star/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/star/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/star/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/star/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],f=(700+n.radius*n.scale)/r;;){var g=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,f,g))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var v=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});v.clearPendant(),v.setMoveFunc(t.doFishMove.bind(t)),v.setContextField("playerPos",l),v.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),v.parent&&console.warn("---aparent exit"),a.addChild(v),v.angle=d.default.random(0,360),v.setPosition(o,s),v.starAutoMove(),t.rivierFishArr.push(v)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<2;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var f=p.length-1;f>=0;f--){var g=p[f];g.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(g),p.splice(f,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void(d.default.random(100)<10&&c());for(u=0;u<5;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/star/art_04.png":"2d/ui/star/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/star/art_04.png":"2d/ui/star/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bStar:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80029","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80029",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameStringScene:[function(e,t,i){"use strict";cc._RF.push(t,"d0be4Fg5MhGdqAresXOKZRB","vGameStringScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("FishString"),S=function(e){function t(){var t,i,n=null!==e&&e.apply(this,arguments)||this;return n.riverFlowerArr=[],n.pauseFlags={},n.defenceCompletedTime=0,n.buttonBack=null,n.nodeLayoutLeft=null,n.nodeLeftTop=null,n.nodeLayoutRight=null,n.buttonUseShield=null,n.labelInvincibleStopTipTime=null,n.labelRankScore=null,n.labelRankTime=null,n.labelTime=null,n.nodeBeginBg=null,n.nodeBg=null,n.nodeEvent=null,n.nodeGame=null,n.nodeInvincible=null,n.nodePlayerContainer=null,n.nodePoolRiverContainer=null,n.nodeRank=null,n.nodeRankPanelRoot1=null,n.nodeRightButtons=null,n.nodeSurvival=null,n.nodeTemplate=null,n.nodeTemplate1=null,n.nodeTemplate10=null,n.nodeTemplate11=null,n.nodeTemplate2=null,n.nodeTemplate3=null,n.nodeTemplate4=null,n.nodeTemplate5=null,n.nodeTemplate6=null,n.nodeTemplate7=null,n.nodeTemplate8=null,n.nodeTemplate9=null,n.nodeVideoInvincibleTip=null,n.progressBarRankTimeDown=null,n.progressBarTimeDown=null,n._hadShare=!1,n.st_init=1,n.st_waitStart=2,n.st_moving=3,n.st_arrivedMaxFish=4,n.st_dead=5,n.st_restart=20,n.st_finish=31,n.MAX_RIVER_FISH_COUNT=100,n.standbyFishId2FishDict={},n.playerFishUsedHolderIndexDict={},n.playerFishHolderNodeArr=[],n.playerFishId2FishDict={},n.rivierFishArr=[],n.eatedFishArr=[],n.INIT_FISH_ID=1,n.CONFIG_RIVER_ROW_COUNT=4,n.CONFIG_RIVER_COLUMN_COUNT=5,n.RIVER_W=1,n.RIVER_H=1,n.LINE_WH=1320,n.playerMaxLevelFishId=0,n.TYPE_REFRESH_REVER_FISH_NORMAL=0,n.TYPE_REFRESH_REVER_FISH_INIT=1,n.TYPE_REFRESH_REVER_FISH_LEVELUP=2,n.lastShowAdDialogTime=0,n.bGameing=!1,n.bOpenSnowAdv=!1,n.rankScore=0,n.FISH_ID_2_SCALE_DICT=((t={})[1]=.9*1.3,t[2]=.9*1.3,t[3]=1.04,t[4]=.7*1.3,t[5]=.78,t[6]=.754,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t),n.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.55,i[8]=200/.55,i[9]=200/.55,i[10]=200/.55,i[11]=200/.55,i),n.longzhuFishNumber=0,n.createSnowFishTime=0,n.createSnowFishCd=10,n}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameStringScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode9")&&u.default.triggerAdEvent("single_template_mode9"),u.default.isCanTriggerTemplateAd("vertical_template_mode9")&&u.default.triggerAdEvent("vertical_template_mode9"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,this.nodeVideoInvincibleTip.active=!1,this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),this.updatePlayerFishRot(),this.updateBg())},t.prototype.updatePlayerFishRot=function(){for(var e=-this.currDirRot;e<0;)e+=360;for(var t=0;t<this.nodePlayerContainer.children.length;t++){var i=this.nodePlayerContainer.children[t];i instanceof m.default&&(i.angle=e)}},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode9"),u.default.closeAdv("vertical_template_mode9")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}var c=0;h.default.forDb_from_fish_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!0)}},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.adaptFishParams(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;_.default.play(102),v.default.statisOnStageEnd("80010",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u83b7\u5f97\u4e86\u6781\u54c1\u5927\u9f99\u867e\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=function(){v.default.statisOnStageEnd("80010",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var i=e.createFishNode(t);p.default.openDialog("vFishResultDialog",{fishNode:i,fishId:t,bString:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var n=this.createFishNode(t);p.default.openDialog("vAdRevive",{fishNode:n,adEventId:"video_trigger_reborn",fishId:t,bString:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),i()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving)}})}else i()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80010",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/string/art_02.png");l.width=i,l.height=i,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/string/art_02.png");d.width=i,d.height=i,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/string/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2,u.y=c*i+.5*i-a/2+t/2,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/string/art_02.png");h.width=i,h.height=i,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2,h.y=c*i+.5*i-a/2+t/2}this.RIVER_W=r+i,this.RIVER_H=a+i;var f=p.default.createSpriteNode("2d/ui/string/art_03.png");this.nodePoolRiverContainer.addChild(f),f.x=-this.RIVER_W/2+e/2,f.y=this.RIVER_H/2+t/2;var g=p.default.createSpriteNode("2d/ui/string/art_03.png");this.nodePoolRiverContainer.addChild(g),g.x=this.RIVER_W/2+e/2,g.y=this.RIVER_H/2+t/2,g.angle=-90;var v=p.default.createSpriteNode("2d/ui/string/art_03.png");this.nodePoolRiverContainer.addChild(v),v.x=this.RIVER_W/2+e/2,v.y=-this.RIVER_H/2+t/2,v.angle=-180;var _=p.default.createSpriteNode("2d/ui/string/art_03.png");this.nodePoolRiverContainer.addChild(_),_.x=-this.RIVER_W/2+e/2,_.y=-this.RIVER_H/2+t/2,_.angle=-270},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2)(d=new m.default({fishId:e,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).angle=-this.currDirRot,i.addChild(d),(s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[e].push({fish:d,holderIndex:s.holderIndex}));else for(var n=e;n<=this.maxConfigFishId;n++){if(n!=this.maxConfigFishId){var o=this.playerFishId2FishDict[n];if(o.length>=2){for(var r=o.length-1;r>=0;r--)this._addFishToStandbyByFishId(o[r].fish),delete this.playerFishUsedHolderIndexDict[o[r].holderIndex];this.playerFishId2FishDict[n]=[];continue}(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d);var a=this.playerMaxLevelFishId>n?this.playerMaxLevelFishId:n,s=this._getValidPlayerFishHolderIndex(a,n);this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),o.push({fish:d,holderIndex:s.holderIndex});break}for(var l=1;l<=this.maxConfigFishId;l++)if((h=this.playerFishId2FishDict[l]).length>0){for(r=h.length-1;r>=0;r--)this._addFishToStandbyByFishId(h[r].fish),delete this.playerFishUsedHolderIndexDict[h[r].holderIndex];this.playerFishId2FishDict[l]=[]}var d;(d=new m.default({fishId:n,bPlayer:!0,fCreateFishNode:this.createFishNode.bind(this)})).stopAutoMove(),d.angle=-this.currDirRot,i.addChild(d),s=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,d.setPosition(s.node.x,s.node.y),this.playerFishId2FishDict[n].push({fish:d,holderIndex:s.holderIndex}),this.bArrivedMaxFish=!0;break}var c=0;for(n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){c=n;break}if(c&&this.playerMaxLevelFishId<c){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var u=g.default.get("animNode","009_flash01");if(u.parent=this.nodePlayerContainer,u.play(),this.animNodeLevelUp=u,this.playerMaxLevelFishId=c,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},n=1;n<=this.maxConfigFishId;n++){var h;if((h=this.playerFishId2FishDict[n]).length>0){for(r=h.length-1;r>=0;r--){var p=h[r];s=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,n),this.playerFishUsedHolderIndexDict[s.holderIndex]=!0,p.fish.setPosition(s.node.x,s.node.y),p.holderIndex=s.holderIndex}this.playerFishId2FishDict[n]=h}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new m.default({fishId:e,bPlayer:!1,fCreateFishNode:t.createFishNode.bind(t)});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){for(var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}],t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/string/art_04.png":"2d/ui/string/art_05.png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/string/art_04.png":"2d/ui/string/art_05.png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[r],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),h=u.length-1;h>=0;h--){var v=u[h],_=v.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,_)){if(t<v.getFishId()){if(f.default.bFishStopInvincible)return this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),void this._addFishToStandbyByFishId(v);if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}var y;if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),v.bHaveSnow()){this.pauseGame("prompt");var m=this.createFishNode(6);p.default.openDialog("vSnowDialog",{fishNode:m,bString:!0,closeCallback:function(){e.resumeGame("prompt")}})}return(y=g.default.get("animNode","009_flash02")).parent=this.nodePoolRiverContainer,y.position=new cc.Vec2(v.x,v.y),y.play(),this.animNodeDie=y,v.removeFromParent(),v.stopAutoMove(),u.splice(h,1),this._addFishToStandbyByFishId(v),this.addPlayerFish(v.getFishId()),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getFishId()<r.getFishId()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else e.x+=s,e.y+=a}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80010","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID)},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80010",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=S,cc._RF.pop()},{}],vGameXiuxianScene:[function(e,t,i){"use strict";cc._RF.push(t,"957c2jp5PhDJo4P5sgLzRu5","vGameXiuxianScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrPool"),v=o("mgrSdk"),_=o("mgrSound"),y=o("mgrTip"),m=o("vFightPowerBean"),S=o("FishXiuxian"),b=o("vWeapon"),C=function(e){function t(){var t,i,n,o,r,a,s=null!==e&&e.apply(this,arguments)||this;return s.riverFlowerArr=[],s.pauseFlags={},s.defenceCompletedTime=0,s.buttonBack=null,s.nodeLayoutLeft=null,s.nodeLeftTop=null,s.nodeLayoutRight=null,s.buttonUseShield=null,s.labelCountDown=null,s.labelDujiePower1=null,s.labelDujiePower2=null,s.labelDujieTip=null,s.labelInvincibleStopTipTime=null,s.labelRankScore=null,s.labelRankTime=null,s.labelTime=null,s.labelWeaponEffCountDown=null,s.labelWeaponTip=null,s.nodeBeginBg=null,s.nodeBg=null,s.nodeDujieBg=null,s.nodeDujieEff=null,s.nodeDujieTip=null,s.nodeEvent=null,s.nodeGame=null,s.nodeGotWeaponDialog=null,s.nodeInvincible=null,s.nodePlayerContainer=null,s.nodePoolRiverContainer=null,s.nodeRank=null,s.nodeRankPanelRoot1=null,s.nodeRightButtons=null,s.nodeSurvival=null,s.nodeTemplate=null,s.nodeTemplate1=null,s.nodeTemplate10=null,s.nodeTemplate11=null,s.nodeTemplate12=null,s.nodeTemplate13=null,s.nodeTemplate14=null,s.nodeTemplate15=null,s.nodeTemplate2=null,s.nodeTemplate3=null,s.nodeTemplate4=null,s.nodeTemplate5=null,s.nodeTemplate6=null,s.nodeTemplate7=null,s.nodeTemplate8=null,s.nodeTemplate9=null,s.nodeVideoInvincibleTip=null,s.nodeWeaponEffTip=null,s.nodeWeaponTip=null,s.progressBarDujie=null,s.progressBarRankTimeDown=null,s.progressBarTimeDown=null,s.spriteDuLeiJie=null,s.spriteWeaponEffBg=null,s.spriteWeaponEffTip1=null,s.spriteWeaponEffTip2=null,s.spriteWeaponEffTip3=null,s.spriteWeaponEffTip4=null,s._hadShare=!1,s.st_init=1,s.st_waitStart=2,s.st_moving=3,s.st_arrivedMaxFish=4,s.st_dead=5,s.st_restart=20,s.st_finish=31,s.MAX_RIVER_FISH_COUNT=100,s.standbyFishId2FishDict={},s.playerFishUsedHolderIndexDict={},s.playerFishHolderNodeArr=[],s.playerFishId2FishDict={},s.rivierFishArr=[],s.eatedFishArr=[],s.INIT_FISH_ID=1,s.CONFIG_RIVER_ROW_COUNT=4,s.CONFIG_RIVER_COLUMN_COUNT=5,s.RIVER_W=1,s.RIVER_H=1,s.LINE_WH=1320,s.playerMaxLevelFishId=0,s.TYPE_REFRESH_REVER_FISH_NORMAL=0,s.TYPE_REFRESH_REVER_FISH_INIT=1,s.TYPE_REFRESH_REVER_FISH_LEVELUP=2,s.lastShowAdDialogTime=0,s.bOpenSnowAdv=!1,s.curRoleFightPower=0,s.curWeaponPower=0,s.curGotBeanFightPower=0,s.curMapSceneType=1,s.rankScore=0,s.FISH_ID_2_SCALE_DICT=((t={})[1]=.7*1.3,t[2]=.7*1.3,t[3]=.65*1.3,t[4]=.65*1.3,t[5]=.78,t[6]=.55*1.3,t[7]=.65,t[8]=.45*1.3,t[9]=.52,t[10]=.39,t[11]=.39,t[12]=.39,t[13]=.39,t[14]=.39,t[15]=.39,t),s.FISH_ID_2_MOVE_FPS=((i={})[1]=200/.9,i[2]=200/.9,i[3]=250,i[4]=200/.7,i[5]=200/.6,i[6]=200/.58,i[7]=200/.45,i[8]=200/.45,i[9]=200/.45,i[10]=200/.35,i[11]=200/.35,i[12]=200/.35,i[13]=200/.35,i[14]=200/.35,i[15]=200/.35,i),s.FISH_INFOS_2_SCALE_DICT=((n={})[1]=1,n[2]=1,n[3]=1,n[4]=1,n[5]=1,n[6]=1,n[7]=1.2,n[8]=1.2,n[9]=1.5,n[10]=1.5,n[11]=2.5,n[12]=3,n[13]=2.8,n[14]=3,n[15]=3.2,n),s.WEAPON_2_SCALE_DICT=((o={})[1]=.3,o[2]=.3,o[3]=.3,o[4]=.4,o[5]=.5,o[6]=.6,o[7]=.7,o[8]=.7,o[9]=.7,o[10]=1,o[11]=1.2,o[12]=1.2,o[13]=1.2,o[14]=1.2,o[15]=1.2,o),s.WEAPON_EFF_2_SCALE_DICT=((r={})[1]=3,r[2]=3,r[3]=3,r[4]=3,r[5]=3,r[6]=4,r[7]=4,r[8]=4,r[9]=4,r[10]=4,r[11]=3,r[12]=3,r[13]=3,r[14]=3,r[15]=3,r),s.WEAPON_SKILL_EFF_2_SCALE_DICT=((a={})[1]=1.3,a[2]=1.3,a[3]=1.3,a[4]=1.3,a[5]=1.3,a[6]=1.3,a[7]=1.3,a[8]=1.3,a[9]=1.3,a[10]=1.3,a[11]=1.3,a[12]=1.3,a[13]=1.3,a[14]=1.3,a[15]=1.3,a),s.fightPowerBeansArr=[],s.weaponArr=[],s.curWeaponId=0,s.bDujie=!1,s.MAX_WEAPON_COUNT=5,s.MAX_BEAN_COUNT=200,s.type=0,s.hitEffArr=["009_flash03","009_flash03","009_flash03"],s.DU_JIE_COUNT_DOWN_TIME=5,s.cleanTimer=null,s.checkGap=0,s.bCanEatHighLevel=!1,s.b10Invincible=!1,s.bAddView=!1,s.bAddSpeed=!1,s.bEnemyReduceSpeed=!1,s.reduceSpeedEnemy=null,s.longzhuFishNumber=0,s.createSnowFishTime=0,s.createSnowFishCd=10,s}return a(t,e),t.prototype._getResourceName=function(){return"scene/vGameXiuxianScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_buttonUseShield:[s.default,"onTouchButtonUseShield"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelCountDown:[cc.Label],CC_labelDujiePower1:[cc.Label],CC_labelDujiePower2:[cc.Label],CC_labelDujieTip:[cc.Label],CC_labelInvincibleStopTipTime:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_labelWeaponEffCountDown:[cc.Label],CC_labelWeaponTip:[cc.Label],CC_nodeBeginBg:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeDujieBg:[cc.Node],CC_nodeDujieEff:[cc.Node],CC_nodeDujieTip:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeGotWeaponDialog:[cc.Node],CC_nodeInvincible:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankPanelRoot1:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate12:[cc.Node],CC_nodeTemplate13:[cc.Node],CC_nodeTemplate14:[cc.Node],CC_nodeTemplate15:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node],CC_nodeVideoInvincibleTip:[cc.Node],CC_nodeWeaponEffTip:[cc.Node],CC_nodeWeaponTip:[cc.Node],CC_progressBarDujie:[cc.ProgressBar],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar],CC_spriteDuLeiJie:[cc.Sprite],CC_spriteWeaponEffBg:[cc.Sprite],CC_spriteWeaponEffTip1:[cc.Sprite],CC_spriteWeaponEffTip2:[cc.Sprite],CC_spriteWeaponEffTip3:[cc.Sprite],CC_spriteWeaponEffTip4:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),_.default.play(2),this.type=this.context.type||1,this.spriteWeaponEffBg.node._oriPosY=this.spriteWeaponEffBg.node.y,this.refreshBtns(),this.registerState(this.st_init,"inInit","exeInit","outInit"),this.registerState(this.st_waitStart,"inWaitStart","exeWaitStart","outWaitStart"),this.registerState(this.st_moving,"inMoving","exeMoving","outMoving"),this.registerState(this.st_arrivedMaxFish,"inArrivedMaxFish","exeArrivedMaxFish","outArrivedMaxFish"),this.registerState(this.st_dead,"inDead","exeDead","outDead"),this.registerState(this.st_restart,"inRestart","exeRestart","outRestart"),this.registerState(this.st_finish,"inFinish","exeFinish","outFinish"),this.setNextState(this.st_init),u.default.isCanTriggerTemplateAd("single_template_mode21")&&u.default.triggerAdEvent("single_template_mode21"),u.default.isCanTriggerTemplateAd("vertical_template_mode21")&&u.default.triggerAdEvent("vertical_template_mode21"),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this)})},t.prototype._getPreloadRess=function(){return[{path:"2d/anim_node/009_flash01/009_flash01",assetType:cc.Prefab},{path:"2d/anim_node/009_flash01/009_flash03",assetType:cc.Prefab},{path:"2d/anim_node/70_jiesuan/70_jiesuan",assetType:cc.Prefab},{path:"2d/anim_node/41_jiesuan_glow_loop/41_jiesuan_glow_loop",assetType:cc.Prefab},{path:"2d/anim_node/009_lightning/009_lightning",assetType:cc.Prefab},{path:"2d/anim_node/009_lightning_gold/009_lightning_gold",assetType:cc.Prefab},{path:"2d/anim_node/009_lightning_purple/009_lightning_purple",assetType:cc.Prefab},{path:"85_star_trail_01",assetType:cc.ParticleAsset}]},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.isPause()||(t<1&&(f.default.fishStopRunTime-=t,f.default.fishStopInvincibleTime-=t,f.default.fishWeaponEffectTime-=t,this.bOpenSnowAdv&&(this.createSnowFishTime+=t)),f.default.fishStopRunTime<=0&&(f.default.fishStopRunTime=0,f.default.bFishStopRun=!1),f.default.fishStopInvincibleTime<=0?(f.default.fishStopInvincibleTime=0,f.default.bFishStopInvincible=!1,(this.nodeVideoInvincibleTip||cc.isValid(this.nodeVideoInvincibleTip))&&(this.nodeVideoInvincibleTip.active=!1),this.clearFishShield(),this.bOpenSnowAdv&&(this.buttonUseShield.node.active=!0)):(this.nodeVideoInvincibleTip.active=!0,this.buttonUseShield.node.active=!1,this.labelInvincibleStopTipTime.string=Math.floor(f.default.fishStopInvincibleTime).toString()),f.default.fishWeaponEffectTime<=0?(f.default.closeFishWeaponEffct(),this.bCanEatHighLevel=!1,this.b10Invincible=!1,this.bAddView=!1,this.bAddSpeed=!1,this.bEnemyReduceSpeed=!1,this.labelWeaponEffCountDown.node.active=!1):(this.labelWeaponEffCountDown.node.active=!0,this.labelWeaponEffCountDown.string=this.curWeaponEffData.desc+"\uff1a"+Math.floor(f.default.fishWeaponEffectTime)+"\u79d2"),this.updateBg()))},t.prototype.updatePlayerFishRot=function(){},t.prototype.updateBg=function(){var e=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),t=this.nodePoolRiverContainer.convertToNodeSpaceAR(e);this.nodeBg.x=-t.x/5,this.nodeBg.y=-t.y/5},t.prototype.onDestroy=function(){_.default.play(1),e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode21"),u.default.closeAdv("vertical_template_mode21")},t.prototype.refreshBtns=function(){this.buttonUseShield.node.active=!1,this.nodeRankPanelRoot1.active=!1,this.nodeInvincible.active=!1,f.default.fishStopRunTime=0},t.prototype.inInit=function(){var e=this;this.adaptGameStageScale(!0);var t=this.nodePlayerContainer.children;for(var i in t){var n=t[i],o=parseInt(n.name.substring(4)),r=n.children;for(var a in r){var s=r[a],l=parseInt(s.name),d=this.playerFishHolderNodeArr.length;this.playerFishHolderNodeArr.push({holderIndex:d,maxFishId:o,fishId:l,node:s})}}console.warn("this.playerFishHolderNodeArr-=======",this.playerFishHolderNodeArr);var c=0;h.default.forDb_from_fish_xiuxian_db(function(t,i){c=Math.max(i.id,c),e.playerFishId2FishDict[i.id]=[],e.standbyFishId2FishDict[i.id]=[]}),this.maxConfigFishId=c,this.initRevier(),this.addRiverFlower(),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),this.setNextState(this.st_waitStart),this.gameStart()},t.prototype.exeInit=function(){},t.prototype.outInit=function(){},t.prototype.inWaitStart=function(){},t.prototype.exeWaitStart=function(){},t.prototype.outWaitStart=function(){},t.prototype.inMoving=function(){var e=this;d.default.unregisterTouchHandler(this.nodeEvent),d.default.registerTouchHandler(this.nodeEvent,this.onTouchSpriteBg.bind(this));var t=this.rivierFishArr;for(var i in t){var n=t[i];n&&n.setContextField("bDisableDisCheckWithPlayer",!0)}this.cleanTimer=l.default.callLoop(.2,function(){e.createFightPowerBean(),e.createWeapon(),e.fightPowerBeansArr.length>e.MAX_BEAN_COUNT&&e.cleanDistanceFightPowerBean(),e.weaponArr.length>e.MAX_WEAPON_COUNT&&e.cleanDistanceWeapon()},this)},t.prototype.exeMoving=function(e){this.bGameOver||this.bArrivedMaxFish||this.isPause()||(this.checkGap+=e,this.doFishMove(this.nodePoolRiverContainer,this.currDirRot,this.getMoveFps(),e,!0),this.checkGap>.112&&(this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_NORMAL),this.checkPlayerWithRiverFish(),this.checkRiverFishEachOther(),this.checkPlayerWithPowerBean(),this.checkRiverFishWithFightPowerBean(),this.checkPlayerWithWeapon(),this.checkRiverFishWithWeapon(),this.checkGap=0),this.adaptGameStageScale(),this.bGameOver?this.setNextState(this.st_dead):this.bArrivedMaxFish&&this.setNextState(this.st_arrivedMaxFish))},t.prototype.outMoving=function(){var e=this.rivierFishArr;for(var t in e){var i=e[t];i&&i.setContextField("bDisableDisCheckWithPlayer",!1)}this.cleanTimer&&(this.cleanTimer.stop(),this.cleanTimer=null),d.default.unregisterTouchHandler(this.nodeEvent)},t.prototype.inArrivedMaxFish=function(){var e=this;this.currDirRot=0,this.updatePlayerFishRot(),_.default.play(102),v.default.statisOnStageEnd("80021",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),l.default.callLater(2,function(){e.pauseGame("prompt"),p.default.openDialog("vPromptFishXiuxianDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u4fee\u4ed9\u6210\u529f\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){e.resumeGame("prompt"),e.setNextState(e.st_restart)}]})},this)},t.prototype.exeArrivedMaxFish=function(){},t.prototype.outArrivedMaxFish=function(){},t.prototype.inDead=function(){var e=this,t=this.playerMaxLevelFishId,i=h.default.get_from_fish_xiuxian_db(t),n=function(){v.default.statisOnStageEnd("80021",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001);var n=e.createFishNode(t);n.getChildByName("string"+t).getComponent(cc.Sprite).loadSpriteFrame(i["mode"+e.type+"Icon"]),n.getChildByName("spriteName").getComponent(cc.Sprite).loadSpriteFrame(i.nameIcon),p.default.openDialog("vFishXiuxianResultDialog",{fishNode:n,fishId:t,bXiuxian:!0,fOnDialogClose:function(){e.setNextState(e.st_restart)}})};if(u.default.preCheckCanTriggerAdEvent("video_trigger_reborn")){this.pauseGame("adv");var o=this.createFishNode(t);o.getChildByName("string"+t).getComponent(cc.Sprite).loadSpriteFrame(i["mode"+this.type+"Icon"]),o.getChildByName("spriteName").getComponent(cc.Sprite).loadSpriteFrame(i.nameIcon),p.default.openDialog("vAdReviveXiuxian",{fishNode:o,adEventId:"video_trigger_reborn",fishId:t,bXiuxian:!0,btn1Str:"\u4e0b\u6b21\u4e00\u5b9a",btn2Str:"\u539f\u5730\u590d\u6d3b",content:"\u54ea\u91cc\u8dcc\u5012\u5c31\u5728\u54ea\u91cc\u722c\u8d77\u6765\uff01",refuse:function(){e.resumeGame("adv"),n()},confirm:function(){e.resumeGame("adv"),e.bGameOver=!1;for(var i=1;i<=e.maxConfigFishId;i++){var n=e.playerFishId2FishDict[i];if(n.length>0){for(var o=n.length-1;o>=0;o--)e._addFishToStandbyByFishId(n[o].fish),delete e.playerFishUsedHolderIndexDict[n[o].holderIndex];e.playerFishId2FishDict[i]=[]}}var r=e.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)e._addFishToStandbyByFishId(r[o]);e.rivierFishArr=[]}if(e.fightPowerBeansArr.length>0){for(o=e.fightPowerBeansArr.length-1;o>=0;o--){var a=e.fightPowerBeansArr[o];a.active=!1,a.destroy(),a=null}e.fightPowerBeansArr=[]}if(e.curWeaponPower=0,e.curWeaponId=0,e.bCanEatHighLevel=!1,e.bAddSpeed=!1,e.bAddView=!1,e.b10Invincible=!1,e.bEnemyReduceSpeed=!1,f.default.closeFishWeaponEffct(),e.weaponArr.length>0){for(o=e.weaponArr.length-1;o>=0;o--){var s=e.weaponArr[o];s.active=!1,s.destroy(),s=null}e.weaponArr=[]}e.playerFishUsedHolderIndexDict={},e.playerMaxLevelFishId=t,e.addPlayerFish(t);var l=e.playerFishId2FishDict[t];r.length>0&&l[0].fish.setRoleFightPower(e.curRoleFightPower),e.adaptGameStageScale(!0),e.refreshRiverFish(e.TYPE_REFRESH_REVER_FISH_LEVELUP),e.defenceCompletedTime=d.default.time()+2,e.setNextState(e.st_moving);for(var c=0;c<10;c++)e.createFightPowerBean()}})}else n()},t.prototype.exeDead=function(){},t.prototype.outDead=function(){},t.prototype.resetSurvival=function(){this.nodeSurvival.active=!1,this.progressBarTimeDown.progress=1,this.longzhuFishNumber=0},t.prototype.resetRank=function(){this.nodeRank.active=!1,this.nodeRankPanelRoot1.active=!1,this.progressBarRankTimeDown.progress=1,this.rankScore=0},t.prototype.inRestart=function(){this.defenceCompletedTime=0,this.nodeLayoutLeft.active=!0,this.bOpenSnowAdv=!1,this.resetSurvival(),this.resetRank(),this.nodeInvincible.active=!1,this.buttonUseShield.node.active=!1,f.default.fishStopRunTime=0,f.default.fishStopInvincibleTime=0,this.clearFishShield(),this.nodeBeginBg.active=!0,this.bArrivedMaxFish=!1,this.bGameOver=!1,this.pauseFlags={};for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0){for(var i=t.length-1;i>=0;i--)this._addFishToStandbyByFishId(t[i].fish),delete this.playerFishUsedHolderIndexDict[t[i].holderIndex];this.playerFishId2FishDict[e]=[]}}var n=this.rivierFishArr;if(n.length>0){for(i=n.length-1;i>=0;i--)this._addFishToStandbyByFishId(n[i]);this.rivierFishArr=[]}if(this.fightPowerBeansArr.length>0){for(i=this.fightPowerBeansArr.length-1;i>=0;i--){var o=this.fightPowerBeansArr[i];o.active=!1,o.destroy(),o=null}this.fightPowerBeansArr=[]}if(this.weaponArr.length>0){for(i=this.weaponArr.length-1;i>=0;i--){var r=this.weaponArr[i];r.active=!1,r.destroy(),r=null}this.weaponArr=[]}this.playerFishUsedHolderIndexDict={},this.playerMaxLevelFishId=1,this.nodePoolRiverContainer.setPosition(0,0),this.nodePlayerContainer.setPosition(0,0),this.adaptGameStageScale(!0),this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_INIT),p.default.enterScene("vHubScene",{tryTriggerAdSkin:!0})},t.prototype.exeRestart=function(){},t.prototype.outRestart=function(){},t.prototype.inFinish=function(){var e=this;v.default.statisOnStageEnd("80021",1,"\u5173\u5361\u80dc\u5229"),v.default.statisCommonEvent(80001),y.default.alertPrompt("\u63d0\u793a","\u4f60\u80dc\u5229\u4e86\uff01","\u786e\u5b9a",function(){e.setNextState(e.st_restart)})},t.prototype.exeFinish=function(){},t.prototype.outFinish=function(){},t.prototype.buildScene=function(){},t.prototype.onTimerLoop=function(){},t.prototype.initRevier=function(){for(var e=this.nodePoolRiverContainer.width,t=this.nodePoolRiverContainer.height,i=this.LINE_WH,n=this.CONFIG_RIVER_ROW_COUNT,o=this.CONFIG_RIVER_COLUMN_COUNT,r=o*i,a=n*i,s=0;s<o;s++){var l=p.default.createSpriteNode("2d/ui/xiuxian/art_02.png");l.width=i,l.height=i,l.scaleX=4,l.scaleY=2,this.nodePoolRiverContainer.addChild(l),l.x=s*i+.5*i-r/2+e/2,l.y=0*i-.5*i-a/2+t/2-300,console.log("----imageTop.xy=",l.x,l.y),l.angle=180;var d=p.default.createSpriteNode("2d/ui/xiuxian/art_02.png");d.width=i,d.height=i,d.scaleX=4,d.scaleY=2,this.nodePoolRiverContainer.addChild(d),d.angle=0,d.x=s*i+.5*i-r/2+e/2,d.y=n*i+.5*i-a/2+t/2+300}for(var c=0;c<n;c++){var u=p.default.createSpriteNode("2d/ui/xiuxian/art_02.png");u.width=i,u.height=i,this.nodePoolRiverContainer.addChild(u),u.angle=90,u.x=0*i-.5*i-r/2+e/2-600,u.y=c*i+.5*i-a/2+t/2+600,u.scaleX=3.5,u.scaleY=4,console.log("----imageLeft.xy=",u.x,u.y);var h=p.default.createSpriteNode("2d/ui/xiuxian/art_02.png");h.width=i,h.height=i,h.scaleX=3.5,h.scaleY=4,this.nodePoolRiverContainer.addChild(h),h.angle=-90,h.x=o*i+.5*i-r/2+e/2+600,h.y=c*i+.5*i-a/2+t/2+600}this.RIVER_W=r+i,this.RIVER_H=a+i},t.prototype.restartGame=function(){this.lastTouchBgPos=null,this.currDirRot=d.default.random(360),this.playerFishUsedHolderIndexDict={},this.addPlayerFish(this.INIT_FISH_ID)},t.prototype._addFishToStandbyByFishId=function(e){e.destroy()},t.prototype._getValidPlayerFishHolderIndex=function(e,t){for(var i=this.playerFishHolderNodeArr,n=0;n<i.length;n++)if(!this.playerFishUsedHolderIndexDict[n]){var o=i[n];if(o.maxFishId==(e||1)&&o.fishId==t)return o}return null},t.prototype.addPlayerMaxFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;for(var i=this.nodePlayerContainer,n=1;n<=this.maxConfigFishId;n++)if((c=this.playerFishId2FishDict[n]).length>0){for(var o=c.length-1;o>=0;o--)this._addFishToStandbyByFishId(c[o].fish),delete this.playerFishUsedHolderIndexDict[c[o].holderIndex];this.playerFishId2FishDict[n]=[]}var r=new S.default({weaponSkillScale:this.WEAPON_SKILL_EFF_2_SCALE_DICT[this.playerMaxLevelFishId],infoScale:this.FISH_INFOS_2_SCALE_DICT[this.playerMaxLevelFishId],fishId:e,bPlayer:!0,type:this.type,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});r.angle=-this.currDirRot,i.addChild(r);var a=this._getValidPlayerFishHolderIndex(this.maxConfigFishId,e);this.playerFishUsedHolderIndexDict[a.holderIndex]=!0,r.setPosition(a.node.x,a.node.y),this.playerFishId2FishDict[e].push({fish:r,holderIndex:a.holderIndex}),this.bArrivedMaxFish=!0;for(var s=0,l=this.maxConfigFishId;l>=1;l--)if(this.playerFishId2FishDict[l].length>0){s=l;break}if(s&&this.playerMaxLevelFishId<s){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var d=g.default.get("animNode","009_flash01");if(d.parent=this.nodePlayerContainer,d.play(),this.animNodeLevelUp=d,this.playerMaxLevelFishId=s,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},l=1;l<=this.maxConfigFishId;l++){var c;if((c=this.playerFishId2FishDict[l]).length>0){for(o=c.length-1;o>=0;o--){var u=c[o],h=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,l);this.playerFishUsedHolderIndexDict[h.holderIndex]=!0,u.fish.setPosition(h.node.x,h.node.y),u.holderIndex=h.holderIndex}this.playerFishId2FishDict[l]=c}}}return!0},t.prototype.addPlayerFish=function(e,t){if(this.bArrivedMaxFish||this.bGameOver)return!1;cc.warn("addPlayerFish",e);var i=this.nodePlayerContainer;if(this.playerFishId2FishDict[e].length<2){var n=new S.default({weaponSkillScale:this.WEAPON_SKILL_EFF_2_SCALE_DICT[this.playerMaxLevelFishId],infoScale:this.FISH_INFOS_2_SCALE_DICT[this.playerMaxLevelFishId],fishId:e,bPlayer:!0,type:this.type,fCreateFishNode:this.createFishNode.bind(this),bIgnoreScaleX:!0});n.angle=-this.currDirRot,i.addChild(n),(c=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,e))&&(this.playerFishUsedHolderIndexDict[c.holderIndex]=!0,n.setPosition(c.node.x,c.node.y),this.playerFishId2FishDict[e].push({fish:n,holderIndex:c.holderIndex})),this.curRoleFightPower=n.getRoleFightPower()}for(var o=0,r=this.maxConfigFishId;r>=1;r--)if(this.playerFishId2FishDict[r].length>0){o=r;break}if(o&&this.playerMaxLevelFishId<o){this.animNodeLevelUp&&(this.animNodeLevelUp.removeFromParent(),g.default.put(this.animNodeLevelUp),this.animNodeLevelUp=null);var a=g.default.get("animNode","009_flash01");if(a.parent=this.nodePlayerContainer,a.play(),this.animNodeLevelUp=a,this.playerMaxLevelFishId=o,!this.bArrivedMaxFish)for(t||this.refreshRiverFish(this.TYPE_REFRESH_REVER_FISH_LEVELUP),this.playerFishUsedHolderIndexDict={},r=1;r<=this.maxConfigFishId;r++){var s=this.playerFishId2FishDict[r];if(s.length>0){for(var l=s.length-1;l>=0;l--){var d=s[l],c=this._getValidPlayerFishHolderIndex(this.playerMaxLevelFishId,r);this.playerFishUsedHolderIndexDict[c.holderIndex]=!0,d.fish.setPosition(c.node.x,c.node.y),d.holderIndex=c.holderIndex}this.playerFishId2FishDict[r]=s}}}return!0},t.prototype.diePlayerFish=function(e,t){if(!this.bGameOver){this._addFishToStandbyByFishId(e),delete this.playerFishUsedHolderIndexDict[t];for(var i=0,n=this.maxConfigFishId;n>=1;n--)if(this.playerFishId2FishDict[n].length>0){i=n;break}if(i<this.playerMaxLevelFishId){this.bGameOver=!0;for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}}}},t.prototype.adaptFishParams=function(){for(var e=1;e<=this.maxConfigFishId;e++){var t=this.playerFishId2FishDict[e];if(t.length>0)for(var i=t.length-1;i>=0;i--)t[i].fish.zIndex=1e3+3*e+t.length-i}},t.prototype.refreshRiverFish=function(e){var t=this,i=this.getRiverWH(),n=i[0],o=i[1],r=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],a=(Math.floor(o),Math.floor(n),this.nodePoolRiverContainer),s=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),l=this.nodePoolRiverContainer.convertToNodeSpaceAR(s),c=function(e){var i;if(e||(e=t.genRandomRiverFishId()),e){for(var n=h.default.get_from_fish_xiuxian_db(e),o=0,s=0,c=t.getRiverWH(),u=c[0],p=c[1],g=(700+n.radius*n.scale)/r;;){var v=d.default.random(360);if(o=(i=d.default.calcPointOnArc(l.x,l.y,g,v))[0],s=i[1],!(o<-u/2||o>u/2||s<-p/2||s>p/2))break}var _=new S.default({weaponSkillScale:t.WEAPON_SKILL_EFF_2_SCALE_DICT[t.playerMaxLevelFishId],infoScale:t.FISH_INFOS_2_SCALE_DICT[t.playerMaxLevelFishId],fishId:e,bPlayer:!1,type:t.type,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});_.clearPendant(),f.default.bFishStopRun||t.createSnowFishTime>t.createSnowFishCd&&(_.createSnow(),t.createSnowFishTime=0),_.setMoveFunc(t.doFishMove.bind(t)),_.setContextField("playerPos",l),_.setContextField("fIsGameRunning",function(){return t.getState()==t.st_moving}),_.parent&&console.warn("---aparent exit"),a.addChild(_),_.angle=d.default.random(0,360),_.setPosition(o,s),_.starAutoMove(),t.rivierFishArr.push(_)}};if(e==this.TYPE_REFRESH_REVER_FISH_LEVELUP){for(var u=0;u<3;u++)c();var p=this.rivierFishArr;if(p.length>0)for(var g=p.length-1;g>=0;g--){var v=p[g];v.getFishId()<this.playerMaxLevelFishId-1&&(this._addFishToStandbyByFishId(v),p.splice(g,1))}}else{if(e!=this.TYPE_REFRESH_REVER_FISH_INIT)return void c();for(u=0;u<10;u++)c()}},t.prototype.genRandomRiverFishId=function(){var e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:100,maxCount:8},{deltaLevel:2,weight:100,maxCount:6},{deltaLevel:3,weight:50,maxCount:4}];3!=this.playerMaxLevelFishId&&8!=this.playerMaxLevelFishId||(e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:50,maxCount:4},{deltaLevel:1,weight:125,maxCount:8},{deltaLevel:2,weight:125,maxCount:6}]),4!=this.playerMaxLevelFishId&&9!=this.playerMaxLevelFishId||(e=[{deltaLevel:-2,weight:500,maxCount:10},{deltaLevel:-1,weight:200,maxCount:8},{deltaLevel:0,weight:100,maxCount:4},{deltaLevel:1,weight:250,maxCount:8}]),5!=this.playerMaxLevelFishId&&10!=this.playerMaxLevelFishId||(e=[{deltaLevel:-2,weight:600,maxCount:10},{deltaLevel:-1,weight:300,maxCount:8},{deltaLevel:0,weight:100,maxCount:4}]);for(var t={},i=0;i<this.rivierFishArr.length;i++){var n=this.rivierFishArr[i];t[n.getFishId()]=(t[n.getFishId()]||0)+1}for(i=e.length-1;i>=0;i--){var o=e[i];if((a=this.playerMaxLevelFishId+o.deltaLevel)<1||a>=this.maxConfigFishId)e.splice(i,1);else{var r=t[a];r&&r>=o.maxCount&&e.splice(i,1)}}var a,s=d.default.calcWheelTarget(e,"weight");return s?a=this.playerMaxLevelFishId+s.deltaLevel:null},t.prototype.addRiverFlower=function(){for(var e=this.getRiverWH(),t=e[0],i=e[1],n=Math.floor(i)/800,o=Math.floor(t)/900,r=this.nodePoolRiverContainer,a=0;a<n;a++)for(var s=0;s<o;s++){var l=900*s-t/2+d.default.random(900),c=800*a-i/2+d.default.random(800),u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");u.zIndex=500,u=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/xiuxian/art_04_"+this.curMapSceneType+".png":"2d/ui/xiuxian/art_05_"+this.curMapSceneType+".png"),r.addChild(u),u.setPosition(l,c),u.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(u)}var h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/fish/flower01.png":"2d/ui/fish/flower02.png");h.zIndex=500,h=p.default.createSpriteNode(d.default.random(100)>50?"2d/ui/xiuxian/art_04_"+this.curMapSceneType+".png":"2d/ui/xiuxian/art_05_"+this.curMapSceneType+".png"),r.addChild(h),h.setPosition(0,0),h.scale=d.default.random(5,10)/10,this.riverFlowerArr.push(h)},t.prototype.changeRiverFlower=function(){this.nodeBg.getComponent(cc.Sprite).loadSpriteFrame("2d/ui/xiuxian/art_01_"+this.curMapSceneType+".jpg");for(var e=0;e<this.riverFlowerArr.length;e++){var t=this.riverFlowerArr[e];t.removeFromParent(),t.destroy(),t=null}this.addRiverFlower()},t.prototype.checkPlayerWithRiverFish=function(){var e=this,t=0;d.default.forEachMap(this.playerFishId2FishDict,function(e,i){if(i.length>0){var n=i[0].fish;t=Math.max(t,n.getFishId())}});var i=this.playerFishId2FishDict;for(var n in i)if(parseInt(n)==this.playerMaxLevelFishId)for(var o=i[n],r=o.length-1;r>=0;r--)for(var a=o[0],s=a.fish,l=s.getWorldAABBPoints(),c=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(s.x,s.y)),u=(this.nodePoolRiverContainer.convertToNodeSpaceAR(c),this.rivierFishArr),v=u.length-1;v>=0;v--){var y=u[v],m=y.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,m)){var S=!1;if(this.bCanEatHighLevel&&s.getFishId()+1==y.getFishId()&&(S=!0),_.default.play(110),!S&&s.getRoleFightPower()<y.getRoleFightPower()){if(f.default.bFishStopInvincible)return void(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null));if(this.defenceCompletedTime>d.default.time())return;return o.splice(r,1),void this.diePlayerFish(s,a.holderIndex)}if(this.animNodeDie&&cc.isValid(this.animNodeDie)&&(this.animNodeDie.removeFromParent(),g.default.put(this.animNodeDie),this.animNodeDie=null),y.bHaveSnow()){this.pauseGame("prompt");var b=h.default.get_from_fish_xiuxian_db(6),C=this.createFishNode(6);C.getChildByName("string6").getComponent(cc.Sprite).loadSpriteFrame(b["mode"+this.type+"Icon"]),C.getChildByName("spriteName").getComponent(cc.Sprite).loadSpriteFrame(b.nameIcon),p.default.openDialog("vSnowDialog",{fishNode:C,bXiuxian:!0,closeCallback:function(){e.resumeGame("prompt")}})}var I=g.default.get("animNode",this.hitEffArr[this.type-1]);return I.parent=this.nodePoolRiverContainer,I.position=new cc.Vec2(y.x,y.y),I.scale=s.getStringScale()>1?s.getStringScale():1,I.play(),this.animNodeDie=I,s.addRoleFightPower(y.getRoleFightPower()),this.curRoleFightPower+=y.getRoleFightPower(),y.removeFromParent(),y.stopAutoMove(),u.splice(v,1),this._addFishToStandbyByFishId(y),this.tryPlayerFishUpgrade(),void this.updateFishShieldScale()}}},t.prototype.checkRiverFishEachOther=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.rivierFishArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.getRidus())/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u9c7c");var s=r;n.splice(o,1),s.removeFromParent(),s.stopAutoMove(),this._addFishToStandbyByFishId(s)}else for(var l=r.getWorldAABBPoints(),c=o-1;c>=0;c--){var u=n[c];if(d.default.distanceSQ(r.x,r.y,u.x,u.y)<=16e4){var h=u.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(l,h))return s=null,u.getRoleFightPower()<r.getRoleFightPower()?(s=u,n.splice(c,1)):(s=r,n.splice(o,1)),s.removeFromParent(),s.stopAutoMove(),void this._addFishToStandbyByFishId(s)}}}}},t.prototype.checkPlayerWithPowerBean=function(){var e=this.playerFishId2FishDict;for(var t in e)if(parseInt(t)==this.playerMaxLevelFishId)for(var i=e[t],n=i.length-1;n>=0;n--){var o=i[0].fish,r=o.getWorldAABBPoints(),a=this.fightPowerBeansArr;if(a.length>0)for(var s=a.length-1;s>=0;s--){var l=a[s];if(l){var d=l.getWorldAABBPoints();cc.Intersection.polygonPolygon(r,d)&&(_.default.play(110),o.addRoleFightPower(l.getFightPower()),this.curRoleFightPower+=l.getFightPower(),this.curGotBeanFightPower+=l.getFightPower(),this.fightPowerBeansArr.splice(s,1),l.active=!1,l.removeFromParent(),l.destroy(),l=null,this.tryPlayerFishUpgrade())}}}},t.prototype.checkPlayerWithWeapon=function(){for(var e=this.playerFishId2FishDict[this.playerMaxLevelFishId],t=e.length-1;t>=0;t--){var i=e[0].fish,n=i.getWorldAABBPoints(),o=this.weaponArr;if(o.length>0)for(var r=o.length-1;r>=0;r--){var a=o[r];if(a){var s=a.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(n,s)){this.curWeaponId=a.getWeaponId(),i.changeWeapon(a.getWeaponId()),this.curWeaponPower+=a.getFightPower(),this.weaponArr.splice(r,1),a.active=!1,a.removeFromParent(),a.destroy(),a=null,this.showWeaponInfoTip(this.curWeaponId);break}}}}},t.prototype.showWeaponInfoTip=function(e){var t=this;this.pauseGame("gotWeapon"),this.labelWeaponEffCountDown.node.active=!1;var i=h.default.get_from_xiuxian_weapon_db(e),n=h.default.get_from_xiuxian_weapon_effect_db(i.weaponEffect);this.curWeaponEffData=n,this.labelWeaponTip.string=""+i.name,this.nodeWeaponEffTip.x=-800,this.spriteWeaponEffBg.loadSpriteFrame(n.effTipBg),this.spriteWeaponEffBg.node.y=this.spriteWeaponEffBg.node._oriPosY,this.spriteWeaponEffBg.node.y+=n.effTipBgOffsetY;for(var o=n.effTipSprIcon,r=0;r<o.length;r++){var a=o[r];this["spriteWeaponEffTip"+(r+1)].node.stopAllActions(),this["spriteWeaponEffTip"+(r+1)].loadSpriteFrame(a),this["spriteWeaponEffTip"+(r+1)].node.scale=2,this["spriteWeaponEffTip"+(r+1)].node.opacity=0}this.nodeGotWeaponDialog.stopAllActions(),this.nodeGotWeaponDialog.scale=0,this.nodeGotWeaponDialog.active=!0,this.nodeWeaponTip.active=!0,this.nodeGotWeaponDialog.runAction(cc.sequence(cc.scaleTo(.1,1,1).easing(cc.easeBackOut()),cc.delayTime(.7),cc.callFunc(function(){t.nodeWeaponTip.active=!1,t.nodeWeaponEffTip.runAction(cc.sequence(cc.moveTo(.1,0,t.nodeWeaponEffTip.y),cc.callFunc(function(){_.default.play(111),t.spriteWeaponEffTip1.node.runAction(cc.sequence(cc.callFunc(function(){t.spriteWeaponEffTip1.node.opacity=255}),cc.scaleTo(.05,1,1),cc.callFunc(function(){_.default.play(111),t.spriteWeaponEffTip2.node.runAction(cc.sequence(cc.callFunc(function(){t.spriteWeaponEffTip2.node.opacity=255}),cc.scaleTo(.05,1,1),cc.callFunc(function(){_.default.play(111),t.spriteWeaponEffTip3.node.runAction(cc.sequence(cc.callFunc(function(){t.spriteWeaponEffTip3.node.opacity=255}),cc.scaleTo(.05,1,1),cc.callFunc(function(){_.default.play(111),t.spriteWeaponEffTip4.node.runAction(cc.sequence(cc.callFunc(function(){t.spriteWeaponEffTip4.node.opacity=255}),cc.scaleTo(.05,1,1),cc.delayTime(.7),cc.callFunc(function(){t.nodeGotWeaponDialog.scale=0,t.nodeGotWeaponDialog.active=!1,t.resumeGame("gotWeapon"),t.refreshWeaponEffect()})))})))})))})))})))})))},t.prototype.refreshWeaponEffect=function(){var e=h.default.get_from_xiuxian_weapon_db(this.curWeaponId),t=h.default.get_from_xiuxian_weapon_effect_db(e.weaponEffect);f.default.tryFishWeaponEffect(t.effTime),this.b10Invincible&&(f.default.closeFishInvincible(),this.clearFishShield()),this.bCanEatHighLevel=!1,this.b10Invincible=!1,this.bAddView=!1,this.bAddSpeed=!1,this.bEnemyReduceSpeed=!1,1==e.weaponEffect?this.bEnemyReduceSpeed=!0:2==e.weaponEffect?this.bAddSpeed=!0:3==e.weaponEffect?this.bAddView=!0:4==e.weaponEffect?this.animNodeShield||(f.default.tryFishInvincibleStop(t.effTime),this.createFishShield(),this.b10Invincible=!0):5==e.weaponEffect&&(this.bCanEatHighLevel=!0)},t.prototype.checkRiverFishWithFightPowerBean=function(){for(var e=this.rivierFishArr,t=e.length-1;t>=0;t--){var i=e[t].getWorldAABBPoints(),n=this.fightPowerBeansArr;if(n.length>0)for(var o=n.length-1;o>=0;o--){var r=n[o];if(r){var a=r.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(i,a)){this.fightPowerBeansArr.splice(o,1),r.active=!1,r.removeFromParent(),r.destroy(),r=null;break}}}}},t.prototype.checkRiverFishWithWeapon=function(){for(var e=this.rivierFishArr,t=e.length-1;t>=0;t--){var i=e[t].getWorldAABBPoints(),n=this.weaponArr;if(n.length>0)for(var o=n.length-1;o>=0;o--){var r=n[o];if(r){var a=r.getWorldAABBPoints();if(cc.Intersection.polygonPolygon(i,a)){this.weaponArr.splice(o,1),r.active=!1,r.removeFromParent(),r.destroy(),r=null;break}}}}},t.prototype.tryPlayerFishUpgrade=function(){var e=this,t=h.default.get_from_fish_xiuxian_db(this.playerMaxLevelFishId);if(t.bCanUpgradeType&&this.curRoleFightPower>t.startDujieFightPower)this.tryDujie(this.playerMaxLevelFishId);else{var i=0;h.default.forDb_from_fish_xiuxian_db(function(t,n){e.curRoleFightPower>=n.needFightPower&&(i=n.rankType)});var n=h.default.get_from_fish_xiuxian_db(i);if(i>this.playerMaxLevelFishId){for(var o=1;o<=this.maxConfigFishId;o++){var r=this.playerFishId2FishDict[o];if(r.length>0){for(var a=r.length-1;a>=0;a--)this._addFishToStandbyByFishId(r[a].fish),delete this.playerFishUsedHolderIndexDict[r[a].holderIndex];this.playerFishId2FishDict[o]=[]}}this.playerMaxLevelFishId=i,this.addPlayerFish(i),_.default.play(107),n.bCanUpgradeType&&(this.curMapSceneType<3?(this.labelDujieTip.string=n.rankName+"\u671f\u8981\u5ea6\u8fc7\u5929\u52ab\u98de\u5347"+["\u7075\u754c","\u4ed9\u754c"][this.curMapSceneType-1]+"\uff0c\u8bf7\u63d0\u5347\u4fee\u4e3a",this.nodeDujieTip.active=!0,l.default.callLater(5,function(){e.nodeDujieTip.active=!1},this)):(this.labelDujieTip.string="\u6e21\u8fc7\u4ed9\u52ab\u65b9\u53ef\u4e07\u52ab\u4e0d\u706d\uff0c\u5f97\u6210\u4ed9\u5c0a",this.nodeDujieTip.active=!0,l.default.callLater(5,function(){e.nodeDujieTip.active=!1},this)));var s=this.playerFishId2FishDict[i];if(s.length>0){var d=s[0].fish;d.setRoleFightPower(this.curRoleFightPower),d.changeWeapon(this.curWeaponId,!0,!0),d.setWeaponFightPower(this.curWeaponPower)}}}},t.prototype.tryDujie=function(e){var t=this;this.pauseGame("dujie"),this.bDujie=!0,this.nodeDujieBg.active=!0,this.spriteDuLeiJie.node.active=!0,g.default.get("animNode",["009_lightning","009_lightning_purple","009_lightning_gold"][this.curMapSceneType-1]).parent=this.nodeDujieEff,_.default.play(106);var i=h.default.get_from_fish_xiuxian_db(e),n=this.DU_JIE_COUNT_DOWN_TIME;this.progressBarDujie.progress=1;var o=this.curRoleFightPower+this.curWeaponPower-i.upgradeTypeNeedFightPower,r=0;o>=0&&(r=o/(this.curRoleFightPower+this.curWeaponPower)),this.progressBarDujie.node.active=!0,this.labelDujiePower1.string=""+(this.curRoleFightPower+this.curWeaponPower),this.labelDujiePower2.string=""+(this.curRoleFightPower+this.curWeaponPower),d.default.labelChangeAnim(this.labelDujiePower1,o,4.5),cc.tween(this.progressBarDujie).to(4.5,{progress:r}).delay(.5).call(function(){t.progressBarDujie.node.active=!1}).start(),l.default.callLoop(1,function(o){if(n--,t.labelWeaponEffCountDown.node.active=!1,n<=0)if(o.stop(),o=null,t.spriteDuLeiJie.node.active=!1,t.nodeDujieBg.active=!1,t.curRoleFightPower+t.curWeaponPower>=i.upgradeTypeNeedFightPower){_.default.play(109);for(var r=1;r<=t.maxConfigFishId;r++){var a=t.playerFishId2FishDict[r];if(a.length>0){for(var s=a.length-1;s>=0;s--)t._addFishToStandbyByFishId(a[s].fish),delete t.playerFishUsedHolderIndexDict[a[s].holderIndex];t.playerFishId2FishDict[r]=[]}}3==t.curMapSceneType?p.default.openDialog("vFishDujieDialog",{bSuc:!0,fOnClose:function(){var i=t.nodePlayerContainer;e+=1;var n=new S.default({weaponSkillScale:t.WEAPON_SKILL_EFF_2_SCALE_DICT[t.playerMaxLevelFishId],infoScale:t.FISH_INFOS_2_SCALE_DICT[t.playerMaxLevelFishId],fishId:e,bPlayer:!0,type:t.type,fCreateFishNode:t.createFishNode.bind(t),bIgnoreScaleX:!0});n.stopAutoMove(),n.angle=-t.currDirRot,i.addChild(n);var o=t._getValidPlayerFishHolderIndex(t.maxConfigFishId,e);t.playerFishUsedHolderIndexDict[o.holderIndex]=!0,n.setPosition(0,0),t.playerFishId2FishDict[e].push({fish:n,holderIndex:o.holderIndex}),g.default.get("animNode","70_jiesuan").parent=n,t.bArrivedMaxFish=!0,l.default.callLater(1.5,function(){p.default.openDialog("vPromptFishXiuxianDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\u4fee\u4ed9\u6210\u529f\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){t.resumeGame("dujie"),t.setNextState(t.st_restart),t.bDujie=!1}]})},t)}}):p.default.openDialog("vFishDujieDialog",{bSuc:!0,fOnClose:function(){var i=e+1;t.playerMaxLevelFishId=i,t.curWeaponId=0,t.curWeaponPower=0,t.bCanEatHighLevel=!1,t.bAddSpeed=!1,t.bAddView=!1,t.b10Invincible=!1,t.bEnemyReduceSpeed=!1,f.default.closeFishWeaponEffct(),t.addPlayerFish(i);var n=h.default.get_from_fish_xiuxian_db(i);t.curMapSceneType=n.sceneType,t.changeRiverFlower(),t.curRoleFightPower=n.needFightPower;var o=t.playerFishId2FishDict[i];if(o.length>0&&(o[0].fish.setRoleFightPower(t.curRoleFightPower),t.labelCountDown.node.active=!1,t.resumeGame("dujie"),t.bDujie=!1),t.weaponArr.length>0){for(var r=t.weaponArr.length-1;r>=0;r--){var a=t.weaponArr[r];a.active=!1,a.destroy(),a=null}t.weaponArr=[]}var s=t.rivierFishArr;if(s.length>0){for(r=s.length-1;r>=0;r--)t._addFishToStandbyByFishId(s[r]);t.rivierFishArr=[]}g.default.get("animNode","70_jiesuan").parent=t.nodeDujieEff}})}else{y.default.showMsgTip("\u4fee\u4e3a\u4e0d\u8db3\uff0c\u6e21\u52ab\u5931\u8d25~"),_.default.play(108),t.playerMaxLevelFishId=e;var d=t.playerMaxLevelFishId,c=h.default.get_from_fish_xiuxian_db(d),u=function(){v.default.statisOnStageEnd("80021",0,"\u5173\u5361\u7ed3\u675f");var e=t.createFishNode(d);e.getChildByName("string"+d).getComponent(cc.Sprite).loadSpriteFrame(c["mode"+t.type+"Icon"]),e.getChildByName("spriteName").getComponent(cc.Sprite).loadSpriteFrame(c.nameIcon),p.default.openDialog("vFishXiuxianResultDialog",{fishNode:e,fishId:d,bXiuxian:!0,fOnDialogClose:function(){t.setNextState(t.st_restart),t.bDujie=!1,t.resumeGame("dujie")}})};p.default.openDialog("vFishDujieDialog",{bSuc:!1,fOnClose:function(){u()}})}},this)},t.prototype.cleanDistanceWeapon=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.weaponArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)&&r){var a=Math.pow((1400+r.width)/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u6b66\u5668");var s=r;n.splice(o,1),s.removeFromParent(),s.destroy(),s=null}}}},t.prototype.cleanDistanceFightPowerBean=function(){for(var e=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],t=this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.nodePoolRiverContainer.convertToNodeSpaceAR(t),n=this.fightPowerBeansArr,o=n.length-1;o>=0;o--){var r=n[o];if(!(o-1<0)){var a=Math.pow((1400+r.width)/e,2);if(d.default.distanceSQ(i.x,i.y,r.x,r.y)>=a){cc.log("\u5220\u9664\u8ddd\u79bb\u73a9\u5bb6\u592a\u8fdc\u7684\u8c46\u5b50");var s=r;n.splice(o,1),s.removeFromParent(),s.destroy(),s=null}}}},t.prototype.adaptGameStageScale=function(e){var t=1;e||(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]||this.FISH_ID_2_SCALE_DICT[1]),this.bAddView&&(t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId]/1.5),this.nodeGame.getNumberOfRunningActions()>0||Math.abs(this.nodeGame.scale-t)<.01||cc.tween(this.nodeGame).to(1,{scaleX:t,scaleY:t}).start()},t.prototype.doFishMove=function(e,t,i,n,o){if(!this.isPause()){var r=i*Math.min(n,.1);if(r){var a=r,s=r;if(0==t||360==t)a=-r,s=0;else if(90==t)a=0,s=-r;else if(180==t)a=r,s=0;else if(270==t)a=0,s=r;else if(t>0&&t<90)a=-(90-(l=t-0))/90*r,s=-l/90*r;else if(t>90&&t<180)a=(l=t-90)/90*r,s=-(90-l)/90*r;else if(t>180&&t<270)a=(90-(l=t-180))/90*r,s=l/90*r;else{var l;a=-(l=t-270)/90*r,s=(90-l)/90*r}(isNaN(s)||isNaN(a))&&console.log("12");var c=this.getRiverWH(),u=c[0],h=c[1];if(o){this.nodePlayerContainer.y>0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(0,this.nodePlayerContainer.y)):this.nodePlayerContainer.y<0?a<=0?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(0,this.nodePlayerContainer.y)):(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a>h/2-p.default.height/2?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.max(-p.default.height/2,this.nodePlayerContainer.y)):this.nodePoolRiverContainer.y+a<-(h/2-p.default.height/2)?(this.nodePlayerContainer.y+=-a,this.nodePlayerContainer.y=Math.min(p.default.height/2,this.nodePlayerContainer.y)):(this.bAddSpeed?this.nodePoolRiverContainer.y+=1.5*a:this.nodePoolRiverContainer.y+=a,this.nodePlayerContainer.y=0),this.bAddSpeed?this.nodePoolRiverContainer.x+=1.5*s:this.nodePoolRiverContainer.x+=s;var f=-u/2,g=+u/2;this.nodePoolRiverContainer.x=d.default.clamp(this.nodePoolRiverContainer.x,f,g)}else this.bEnemyReduceSpeed?(e.x+=.5*s,e.y+=.5*a):(e.x+=s,e.y+=a)}}},t.prototype.getRiverWH=function(){return[this.RIVER_W-120,this.RIVER_H]},t.prototype.onTouchSpriteBg=function(e){var t=e.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(t);if("began"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null),this.bTouchBg=!0,this.beginTouchBgPos=this.nodeGame.convertToNodeSpaceAR(t),this.lastTouchBgPos=t;var n=g.default.get("animNode","009_star");n.parent=this.nodePlayerContainer,n.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()),this.touchParticle=n}else if(this.bTouchBg&&"moved"==e.name){cc.isValid(this.touchParticle)&&(this.touchParticle.position=this.nodePlayerContainer.convertToNodeSpaceAR(e.getLocation()));var o=d.default.getAngle(i.x-this.beginTouchBgPos.x,i.y-this.beginTouchBgPos.y);p.default.width,o=o||0,this.currDirRot=o<0?360+o:o}else"cancelled"!=e.name&&"ended"!=e.name||(this.bTouchBg=!1,cc.isValid(this.touchParticle)&&(this.touchParticle.destroy(),this.touchParticle=null));this.bTouchBg&&(this.lastTouchBgPos=t)},t.prototype.getMoveFps=function(){return this.FISH_ID_2_MOVE_FPS[this.playerMaxLevelFishId]},t.prototype.gameStart=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=1),this.restartGame(),this.buttonBack.node.active=!0,this.buttonUseShield.node.active=u.default.preCheckAdNoCd("video_trigger_defence2")&&!0,this.buttonUseShield.node.active&&v.default.statisVideoPointEvent("video_trigger_defence2",1),v.default.statisOnStageStart("80021","\u5173\u5361\u5f00\u59cb"),this.nodeInvincible.active=!0,f.default.fishStopRunTime=0,this.nodeBeginBg.active=!1,this.nodeLayoutLeft.active=!1,this.bOpenSnowAdv=!0,this.curWeaponPower=0,this.curWeaponId=0,this.bCanEatHighLevel=!1,this.bAddSpeed=!1,this.bAddView=!1,this.b10Invincible=!1,this.bEnemyReduceSpeed=!1,f.default.closeFishWeaponEffct(),this.curGotBeanFightPower=0;var n=function(e){for(var t=1;t<=i.maxConfigFishId;t++){var n=i.playerFishId2FishDict[t];if(n.length>0){for(var o=n.length-1;o>=0;o--)i._addFishToStandbyByFishId(n[o].fish),delete i.playerFishUsedHolderIndexDict[n[o].holderIndex];i.playerFishId2FishDict[t]=[]}}var r=i.rivierFishArr;if(r.length>0){for(o=r.length-1;o>=0;o--)i._addFishToStandbyByFishId(r[o]);i.rivierFishArr=[]}i.playerFishUsedHolderIndexDict={},i.playerMaxLevelFishId=e,i.addPlayerFish(e),i.adaptGameStageScale(!0),i.refreshRiverFish(i.TYPE_REFRESH_REVER_FISH_LEVELUP),i.defenceCompletedTime=d.default.time()+2,i.setNextState(i.st_moving)};if(e||!u.default.preCheckCanTriggerAdEvent("video_vHubScene_start"))return 1!=t&&n(t),void n(this.INIT_FISH_ID);n(this.INIT_FISH_ID);for(var o=0;o<10;o++)this.createFightPowerBean()},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.createFishShield=function(){var e=this.getPlayerBestBigFish(),t=g.default.get("animNode","009_shield");t&&(t.parent=this.nodePlayerContainer,t.play(),t.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale,this.animNodeShield=t)},t.prototype.updateFishShieldScale=function(){if(this.animNodeShield){var e=this.getPlayerBestBigFish();e&&(this.animNodeShield.scale=e.fishTemplate.shieldScale*e.fishTemplate.scale)}},t.prototype.clearFishShield=function(){this.animNodeShield&&cc.isValid(this.animNodeShield)&&(this.animNodeShield.removeFromParent(),g.default.put(this.animNodeShield),this.animNodeShield=null)},t.prototype.getPlayerBestBigFish=function(){for(var e=null,t=this.maxConfigFishId;t>0;t--){var i=this.playerFishId2FishDict[t];if(i&&i.length>0){e=i[0].fish;break}}return console.log("\u6700\u5927\u9c7cID\uff1a",e.fishId),e},t.prototype.createFishNode=function(e){var t=this["nodeTemplate"+e];if(!t)return null;var i=cc.instantiate(t);return i.x=0,i.y=0,i.scale=1,i},t.prototype.createFightPowerBean=function(){var e;if(!(this.fightPowerBeansArr.length>this.MAX_BEAN_COUNT)){for(var t=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],i=(this.nodePoolRiverContainer,this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0))),n=this.nodePoolRiverContainer.convertToNodeSpaceAR(i),o=h.default.get_from_fish_xiuxian_db(this.playerMaxLevelFishId),r=0,a=0,s=this.getRiverWH(),l=s[0],c=s[1],u=(d.default.random(500,700)+o.radius*o.scale)/t;;){var p=d.default.random(360);if(r=(e=d.default.calcPointOnArc(n.x,n.y,u,p))[0],a=e[1],!(r<-l/2||r>l/2||a<-c/2||a>c/2))break}var f=new m.default({type:this.curMapSceneType,infoScale:this.FISH_INFOS_2_SCALE_DICT[this.playerMaxLevelFishId]});f.parent=this.nodePoolRiverContainer,f.setPosition(r,a),this.fightPowerBeansArr.push(f)}},t.prototype.createFightPowerBeanByDeadFish=function(e){if(!(this.fightPowerBeansArr.length>this.MAX_BEAN_COUNT))for(var t=d.default.random(2,5),i=e.getRoleFightPower(),n=Math.floor(i/t),o=0;o<t;o++){var r=new m.default({type:this.curMapSceneType,infoScale:this.FISH_INFOS_2_SCALE_DICT[this.playerMaxLevelFishId]});r.parent=this.nodePoolRiverContainer,r.setPosition((o%2==0?1:-1)*e.x+10*o,e.y),r.setFightPower(n),this.fightPowerBeansArr.push(r)}},t.prototype.createWeaponByDeadFish=function(e){var t=e.getWeaponId();if(t){var i=new b.default({weaponId:t,weaponScale:this.WEAPON_2_SCALE_DICT[this.playerMaxLevelFishId]});i.parent=this.nodePoolRiverContainer;var n=e.nodeRes.width+d.default.random(70,100);i.setPosition(e.x+(d.default.random()>.5?n:-n),e.y+(d.default.random()>.5?n:-n)),this.weaponArr.push(i)}},t.prototype.createWeapon=function(){var e,t=this;if(!(this.weaponArr.length>this.MAX_WEAPON_COUNT)){for(var i=this.FISH_ID_2_SCALE_DICT[this.playerMaxLevelFishId],n=(this.nodePoolRiverContainer,this.nodePlayerContainer.convertToWorldSpaceAR(new cc.Vec2(0,0))),o=this.nodePoolRiverContainer.convertToNodeSpaceAR(n),r=h.default.get_from_fish_xiuxian_db(this.playerMaxLevelFishId),a=0,s=0,l=this.getRiverWH(),c=l[0],u=l[1],p=(d.default.random(650,850)+r.radius*r.scale)/i;;){var f=d.default.random(360);if(a=(e=d.default.calcPointOnArc(o.x,o.y,p,f))[0],s=e[1],!(a<-c/2+200||a>c/2-200||s<-u/2+200||s>u/2-200))break}var g=[];h.default.forDb_from_xiuxian_weapon_db(function(e,i){i.sceneType==t.curMapSceneType&&g.push(i)});var v=d.default.calcWheelTarget(g,"weight"),_=new b.default({weaponId:v.id,bShowFightPower:!0,bShowEff:!0,effScale:this.WEAPON_EFF_2_SCALE_DICT[this.playerMaxLevelFishId],weaponScale:this.WEAPON_2_SCALE_DICT[this.playerMaxLevelFishId]});_.parent=this.nodePoolRiverContainer;var y=d.default.random()>.5?d.default.random(400):-d.default.random(400),m=d.default.random()>.5?d.default.random(400):-d.default.random(400);_.setPosition(a+y,s+m),this.weaponArr.push(_)}},t.prototype.onTouchButtonBack=function(e){var t=this;if(e.isClick()){this.pauseGame("prompt");var i=[function(){t.resumeGame("prompt")},function(){v.default.statisOnStageEnd("80021",0,"\u5173\u5361\u7ed3\u675f"),v.default.statisCommonEvent(80001),t.setNextState(t.st_restart),t.resumeGame("prompt")}];p.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:i})}},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){this.resumeGame("adv");var t=e.adEventId;"video_trigger_snow"==t?f.default.tryFishStopRun():"video_trigger_defence2"==t&&(f.default.tryFishInvincibleStop(),this.createFishShield())},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgOnKeyDown=function(){},t}(c.default);r.default=C,cc._RF.pop()},{}],vGoddessSuccessDialog:[function(e,t,i){"use strict";cc._RF.push(t,"a5fbcarlmVLzaphuUTEz9CF","vGoddessSuccessDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonConfirm=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vGoddessSuccessDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonConfirm:[s.default,"onTouchButtonConfirm"]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.onTouchButtonConfirm=function(e){e.isClick()&&this.closeDialog()},t}(o("DialogBase").default);r.default=l,cc._RF.pop()},{}],vGotItemDialog:[function(e,t,i){"use strict";cc._RF.push(t,"c5e75nVVFlNsKBjMpEmvHDz","vGotItemDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("CustomTween"),c=o("Timer"),u=o("Tools"),h=o("DialogBase"),p=o("ViewBase"),f=o("mgrAd"),g=o("mgrBannerInt"),v=o("mgrCfg"),_=o("mgrChannel"),y=o("mgrCop"),m=o("mgrRole"),S=o("mgrSdk"),b=o("mgrTip"),C=o("mgrVideoRecorder"),I="video_vGotItemDialog_extra",F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAdCheckModel=null,t.buttonClose=null,t.buttonExtra=null,t.buttonExtraGrayPack=null,t.buttonNative=null,t.buttonOk=null,t.buttonShare=null,t.labelAdCheckModelTip=null,t.nodeAdCheckModeContainer=null,t.nodeBtnAdIcon=null,t.nodeBtnAdIconGrayPack=null,t.nodeBtnExtra=null,t.nodeBtnExtraGrayPack=null,t.nodeBtnNative=null,t.nodeGrayPack=null,t.nodeJumpOtherGameBanner=null,t.nodeMultiple=null,t.nodeSingle=null,t.nodeWhitePack=null,t.spriteAdCheckModeCheckFlag=null,t.spriteIcon=null,t.bGrayPack=!1,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vGotItemDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAdCheckModel:[l.default,"onTouchButtonAdCheckModel"],CC_buttonClose:[l.default,"onTouchButtonClose"],CC_buttonExtra:[l.default,"onTouchButtonExtra"],CC_buttonExtraGrayPack:[l.default,"onTouchButtonExtraGrayPack"],CC_buttonNative:[l.default,"onTouchButtonNative"],CC_buttonOk:[l.default,"onTouchButtonOk"],CC_buttonShare:[l.default,"onTouchButtonShare"],CC_labelAdCheckModelTip:[cc.Label],CC_nodeAdCheckModeContainer:[cc.Node],CC_nodeBtnAdIcon:[cc.Node],CC_nodeBtnAdIconGrayPack:[cc.Node],CC_nodeBtnExtra:[cc.Node],CC_nodeBtnExtraGrayPack:[cc.Node],CC_nodeBtnNative:[cc.Node],CC_nodeGrayPack:[cc.Node],CC_nodeJumpOtherGameBanner:[cc.Node],CC_nodeMultiple:[cc.Node],CC_nodeSingle:[cc.Node],CC_nodeWhitePack:[cc.Node],CC_spriteAdCheckModeCheckFlag:[cc.Sprite],CC_spriteIcon:[cc.Sprite]}},t.prototype._getPreloadRess=function(){return[]},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){var t=this;e.prototype.onResourceLoaded.call(this),this.fillData(),this.fillAd(),this.nodeBtnNative.active=g.default.isNativeBannerShowing()&&this.isCopNativeBannerOpen(),this.checkGrayPack(),this.registerListeners({MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_NATIVE_BAR_SHOW:this.onMsgNativeBar,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),y.default.getBooleanValue("jump_other_game_banner")&&b.default.showJumpOtherGameBanner(this.nodeJumpOtherGameBanner,cc.v2(0,30)),c.default.callLater(.1,function(){var e=u.default.getNodeWorldPosAR(t);b.default.playParticleOnce("131_star_once_01",e.x,e.y+300,1)},this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.checkGrayPack=function(){var e=this.isCopNativeBannerOpen();this.nodeGrayPack.active=e,this.nodeWhitePack.active=!e,this.bGrayPack=e},t.prototype.fillData=function(){var e=this.context.itemId,t=(this.context.amount,this.context.ids);if(t&&1==t.length&&(e=t[0]),e){if(this.nodeSingle.active=!0,this.nodeMultiple.active=!1,!(a=v.default.get_from_item_template_db(e)))return;this.spriteIcon.loadSpriteFrameAndKeepSize(a.icon)}else{this.nodeSingle.active=!1,this.nodeMultiple.active=!0;var i=this.nodeMultiple.children[0],n=this.nodeMultiple.getComponent(cc.Layout);n.spacingX=10,t&&t.length<=3&&(n.type=cc.Layout.Type.HORIZONTAL,2==t.length&&(n.spacingX=30));for(var o=0;o<t.length;o++){var r=t[o],a=v.default.get_from_item_template_db(r),s=cc.instantiate(i);s.parent=this.nodeMultiple,s.children[3].getComponent(cc.Sprite).loadSpriteFrame(a.icon),s.children[0].active=o%3==0,s.children[1].active=o%3==1,s.children[2].active=o%3==2}i.active=!1}this.buttonShare.node.active=_.default.canUseVideoRecord()&&C.default.canVideoShare()||_.default.canShare(),d.default.scaleForever(this.buttonShare.node),cc.log("vGotItemDialog",e)},t.prototype.fillAd=function(){var e=f.default.preCheckAdNoCd(I),t=(this.isCopNativeBannerOpen(),this.bGrayPack?this.nodeBtnExtraGrayPack:this.nodeBtnExtra);if(t.active=e&&!this.context.bFromAd,e&&S.default.statisVideoPointEvent(I,1),t.active&&1==S.default.getCopNumberValueByKey("b_ad_check_mode")&&m.default.isLastGouModeCd()){if(m.default.setLastGouModeShowTime(u.default.time()),this.nodeAdCheckModeContainer.active=!0,!this.adCheckModeConfig){var i=f.default.randomGetAdCheckModeConfig("\u9886\u53d6");this.labelAdCheckModelTip.string=i.text,this.spriteAdCheckModeCheckFlag.node.active=!!i.bDefaultChecked,this.adCheckModeConfig=i,this.onTouchButtonAdCheckModel({isClick:function(){return!0}})}}else this.nodeAdCheckModeContainer.active=!1},t.prototype.doClose=function(){this.closeDialog()},t.prototype.onTouchButtonOk=function(e){e.isClick()&&(this.adCheckModeConfig&&this.nodeBtnExtra.active&&(this.adCheckModeConfig.bCheckedTriggerAd&&this.spriteAdCheckModeCheckFlag.node.active||!this.spriteAdCheckModeCheckFlag.node.active&&!this.adCheckModeConfig.bCheckedTriggerAd)?f.default.triggerAdEvent(I,null,!0):this.doClose())},t.prototype.onTouchButtonShare=function(e){e.isClick()},t.prototype.onTouchButtonAdCheckModel=function(e){e.isClick()&&(this.spriteAdCheckModeCheckFlag.node.active=!this.spriteAdCheckModeCheckFlag.node.active)},t.prototype.onTouchButtonExtra=function(e){e.isClick()&&f.default.triggerAdEvent(I,null,!0)},t.prototype.onTouchButtonNative=function(e){e.isClick()&&(this.nodeBtnNative.active=!1,this.sendMsg("MSG_EXTRA_NATIVE_BANNER_CLICK"))},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonExtraGrayPack=function(e){e.isClick()&&f.default.triggerAdEvent(I,null,!0)},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this.buttonShare.node.active=!1)},t.prototype.onMsgSdkShareVideoResult=function(e){e.bSuccessful&&(this.buttonShare.node.active=!1)},t.prototype.onMsgNativeBar=function(e){this.isCopNativeBannerOpen()?this.nodeBtnNative.active=e.show:this.nodeBtnNative.active=!1},t.prototype.isCopNativeBannerOpen=function(){return 1==S.default.getCopNumberValueByKey("b_native_banner_button_show2")},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==I&&this.doClose()},s([p.default.requireResourceLoaded],t.prototype,"checkGrayPack",null),s([p.default.requireResourceLoaded],t.prototype,"fillData",null),s([p.default.requireResourceLoaded],t.prototype,"fillAd",null),t}(h.default);r.default=F,cc._RF.pop()},{}],vGuessYouLikeItem:[function(e,t,i){"use strict";cc._RF.push(t,"8023bhnsptCy7x4I22b1IB4","vGuessYouLikeItem");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteIcon=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vGuessYouLikeItem"},t.prototype._getResourceBindingConfig=function(){return{CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){this.context.info=e,this.refresh()},t.prototype.refresh=function(){if(this.isResourceLoaded()){var e=this.context.info;e&&e.url&&this.spriteIcon.loadSpriteFrameAndKeepSize(e.url)}},t.prototype.getTouchRect=function(){return this.isResourceLoaded()?this.spriteIcon.node.getBoundingBoxToWorld():null},t}(o("ViewBase").default);r.default=s,cc._RF.pop()},{}],vGuessYouLikeVertical:[function(e,t,i){"use strict";cc._RF.push(t,"bd232+52i9H+6kvFou99hav","vGuessYouLikeVertical");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tools"),l=o("ViewBase"),d=o("Const"),c=o("mgrSdk"),u=o("vGuessYouLikeItem"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layoutBox=null,t.nodeBg=null,t.nodeMask=null,t.spriteBg=null,t._items=[],t._bFilled=!1,t._bDirRight=!0,t._bFirstStroll=!0,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vGuessYouLikeVertical"},t.prototype._getResourceBindingConfig=function(){return{CC_layoutBox:[cc.Layout],CC_nodeBg:[cc.Node],CC_nodeMask:[cc.Node],CC_spriteBg:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.spriteBg.node.active=!0,this.y=200,this.x=0,this.registerListeners({MSG_SDK_OPEN_JUMP_RESULT:this.onMsgSdkOpenJumpResult}),c.default.openJump(""+d.default.gameId,"list"),s.default.registerTouchHandler(this.layoutBox.node,this.onTouchNodeBg.bind(this))},t.prototype.openGridList=function(e,t,i){c.default.openGrid(e,t,i,"list")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillInfo=function(e){if(e&&0!=e.length&&!this._bFilled){this._bFilled=!0;for(var t=0;t<e.length;t++){var i=new u.default;i.setContentSize(77.5,100),i.parent=this.layoutBox.node,i.fillData(e[t]),this._items.push(i),i.runAction(cc.sequence(cc.hide(),cc.delayTime(.05*t),cc.show()))}this.layoutBox.updateLayout(),this.startRoll()}},t.prototype.startRoll=function(){var e=this;if(this.stopAllActions(),this._bFilled){var t=this.layoutBox.node,i=t.parent.height,n=t.height;if(n!=i){var o=i/2-n/2,r=-o;if(o>0&&(r=-(o=-o)),this._bFirstStroll&&(this._bFirstStroll=!1,n>i?(t.y=r,this._bDirRight=!1):(t.y=o,this._bDirRight=!0)),t.y<o)this._bDirRight=!0,t.runAction(cc.sequence(cc.moveTo(.2,0,o),cc.callFunc(function(){e.startRoll()})));else if(t.y>r)this._bDirRight=!1,t.runAction(cc.sequence(cc.moveTo(.2,0,r),cc.callFunc(function(){e.startRoll()})));else if(this._bDirRight){var a=(r-t.y)/60;t.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(a,0,r),cc.delayTime(.5),cc.callFunc(function(){e._bDirRight=!1,e.startRoll()})))}else a=Math.abs(o-t.y)/60,t.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(a,0,o),cc.delayTime(.5),cc.callFunc(function(){e._bDirRight=!0,e.startRoll()})));this.spriteBg.node.active=!0}}},t.prototype.stopRoll=function(){this.layoutBox.node.stopAllActions()},t.prototype.onTouchNodeBg=function(e){switch(e.name){case"began":this.stopRoll();break;case"moved":this.layoutBox.node.y+=e.getDeltaY();break;default:this.startRoll()}if(e.isClick())for(var t=e.getLocation(),i=0;i<this._items.length;i++){var n=this._items[i],o=n.getTouchRect();if(o&&o.contains(t)){var r=n.context.info;if(!r)continue;return void c.default.jumpOtherGame(r.index,"list")}}},t.prototype.onMsgSdkOpenJumpResult=function(e){"list"==e.type&&(this.fillInfo(e.jumpInfo),console.log("onMsgSdkOpenJumpResult table"))},t}(l.default);r.default=h,cc._RF.pop()},{}],vGuessYouLike:[function(e,t,i){"use strict";cc._RF.push(t,"ff0d2Bpq/BEuJzLe15oG0ER","vGuessYouLike");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ViewBase"),l=o("mgrDirector"),d=o("Tools"),c=o("vGuessYouLikeItem"),u=o("mgrSdk"),h=o("Const"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layoutBox=null,t.nodeBg=null,t.nodeMask=null,t._items=[],t._bFilled=!1,t._bDirRight=!0,t._bFirstStroll=!0,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vGuessYouLike"},t.prototype._getResourceBindingConfig=function(){return{CC_layoutBox:[cc.Layout],CC_nodeBg:[cc.Node],CC_nodeMask:[cc.Node]}},t.prototype._getPreloadRess=function(){return[{path:"view/node/vGuessYouLikeItem",assetType:cc.Prefab}]},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.width=l.default.width,this.y=-l.default.height/2+200,this.context&&(this.y+=this.context.y,this.x+=this.context.x),this.registerListeners({MSG_SDK_OPEN_JUMP_RESULT:this.onMsgSdkOpenJumpResult}),u.default.openJump(""+h.default.gameId,"list"),d.default.registerTouchHandler(this.layoutBox.node,this.onTouchNodeBg.bind(this))},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillInfo=function(e){if(e&&0!=e.length&&!this._bFilled){this._bFilled=!0;for(var t=0;t<e.length;t++){var i=new c.default;i.setContentSize(77.5,100),i.parent=this.layoutBox.node,i.fillData(e[t]),this._items.push(i),i.runAction(cc.sequence(cc.hide(),cc.delayTime(.05*t),cc.show()))}this.layoutBox.updateLayout(),this.startRoll()}},t.prototype.startRoll=function(){var e=this;if(this.stopAllActions(),this._bFilled){var t=this.layoutBox.node,i=t.parent.width,n=t.width;if(n!=i){var o=i/2-n/2,r=-o;if(o>0&&(r=-(o=-o)),this._bFirstStroll&&(this._bFirstStroll=!1,n>i?(t.x=r,this._bDirRight=!1):(t.x=o,this._bDirRight=!0)),t.x<o)this._bDirRight=!0,t.runAction(cc.sequence(cc.moveTo(.2,o,0),cc.callFunc(function(){e.startRoll()})));else if(t.x>r)this._bDirRight=!1,t.runAction(cc.sequence(cc.moveTo(.2,r,0),cc.callFunc(function(){e.startRoll()})));else if(this._bDirRight){var a=(r-t.x)/60;t.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(a,r,0),cc.delayTime(.5),cc.callFunc(function(){e._bDirRight=!1,e.startRoll()})))}else a=Math.abs(o-t.x)/60,t.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(a,o,0),cc.delayTime(.5),cc.callFunc(function(){e._bDirRight=!0,e.startRoll()})))}}},t.prototype.stopRoll=function(){this.layoutBox.node.stopAllActions()},t.prototype.onTouchNodeBg=function(e){switch(e.name){case"began":this.stopRoll();break;case"moved":this.layoutBox.node.x+=e.getDeltaX();break;default:this.startRoll()}if(e.isClick())for(var t=e.getLocation(),i=0;i<this._items.length;i++){var n=this._items[i],o=n.getTouchRect();if(o&&o.contains(t)){var r=n.context.info;if(!r)continue;return void u.default.jumpOtherGame(r.index,"list")}}},t.prototype.onMsgSdkOpenJumpResult=function(e){"list"==e.type&&this.fillInfo(e.jumpInfo)},t}(s.default);r.default=p,cc._RF.pop()},{}],vGuideArrow:[function(e,t,i){"use strict";cc._RF.push(t,"059d2vsboRBSqFIQYk8E6SK","vGuideArrow");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ViewBase"),d=cc._decorator,c=d.ccclass,u=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._getResourceName=function(){return"node/vGuideArrow"},t.prototype._getResourceBindingConfig=function(){return{}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},s([c],t)}(l.default));r.default=u,cc._RF.pop()},{}],vGuideMask:[function(e,t,i){"use strict";cc._RF.push(t,"1e813/+31BG6587xEYKG0RQ","vGuideMask");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tools"),l=o("ViewBase"),d=o("Const"),c=o("mgrDirector"),u=o("mgrGuide"),h=o("mgrTip"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeLeftBottom=null,t.spriteBlockBottom=null,t.spriteBlockLeft=null,t.spriteBlockRight=null,t.spriteBlockTop=null,t.spriteHole=null,t.rect=null,t.maskType=u.GuideMaskType.none_passAll,t.bFadeIn=!1,t._mask_click_last_time=0,t._mask_click_count=0,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vGuideMask"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeLeftBottom:[cc.Node],CC_spriteBlockBottom:[cc.Sprite],CC_spriteBlockLeft:[cc.Sprite],CC_spriteBlockRight:[cc.Sprite],CC_spriteBlockTop:[cc.Sprite],CC_spriteHole:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.updateMask(),this.updateListeners()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.setMaskType=function(e){this.maskType=e,this.updateMask(),this.updateListeners()},t.prototype.setRect=function(e){this.rect=e,this.updateMask()},t.prototype.updateListeners=function(){if(this.isResourceLoaded()){var e=this.maskType;this.spriteHole.node.opacity=102,this.spriteBlockLeft.node.opacity=102,this.spriteBlockRight.node.opacity=102,this.spriteBlockTop.node.opacity=102,this.spriteBlockBottom.node.opacity=102,this.spriteHole.node.opacity=102,s.default.unregisterTouchHandler(this.spriteHole.node),s.default.unregisterTouchHandler(this.spriteBlockLeft.node),s.default.unregisterTouchHandler(this.spriteBlockRight.node),s.default.unregisterTouchHandler(this.spriteBlockTop.node),s.default.unregisterTouchHandler(this.spriteBlockBottom.node),e==u.GuideMaskType.mask_passAll||e==u.GuideMaskType.none_passAll||(e==u.GuideMaskType.mask_blockAll||e==u.GuideMaskType.none_blockkAll?(s.default.registerTouchHandler(this.spriteHole.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockLeft.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockRight.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockTop.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockBottom.node,this.onTouchMask.bind(this),!0)):e!=u.GuideMaskType.mask_passHole&&e!=u.GuideMaskType.none_passHole||(s.default.registerTouchHandler(this.spriteBlockLeft.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockRight.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockTop.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockBottom.node,this.onTouchMask.bind(this),!0)))}},t.prototype.updateMask=function(){if(this.isResourceLoaded()){this.nodeResource.setContentSize(c.default.size),this.nodeLeftBottom.getComponent(cc.Widget).updateAlignment();var e,t=this.nodeResource.getContentSize(),i=this.rect,n=this.maskType,o=n==u.GuideMaskType.mask_blockAll||n==u.GuideMaskType.mask_passAll||n==u.GuideMaskType.mask_passHole;i?(this.spriteHole.node.x=i.x,this.spriteHole.node.y=i.y,this.spriteHole.node.setContentSize(i.size),(e=this.spriteBlockLeft.getComponent(cc.Widget)).left=-100,e.right=t.width-i.x,e.top=-100,e.bottom=-100,e.updateAlignment(),(e=this.spriteBlockRight.getComponent(cc.Widget)).left=i.xMax,e.right=-100,e.top=-100,e.bottom=-100,e.updateAlignment(),(e=this.spriteBlockTop.getComponent(cc.Widget)).left=i.x,e.right=t.width-i.xMax,e.top=-100,e.bottom=i.yMax,e.updateAlignment(),this.spriteBlockBottom.enabled=!0,(e=this.spriteBlockBottom.getComponent(cc.Widget)).left=i.x,e.right=t.width-i.xMax,e.top=t.height-i.y,e.bottom=-100,e.updateAlignment()):((e=this.spriteBlockLeft.getComponent(cc.Widget)).left=0,e.right=0,e.top=-100,e.bottom=-100,e.updateAlignment()),o?i?(this.spriteHole.enabled=!0,this.spriteBlockLeft.enabled=!0,this.spriteBlockRight.enabled=!0,this.spriteBlockTop.enabled=!0,this.spriteBlockBottom.enabled=!0):(this.spriteHole.enabled=!1,this.spriteBlockLeft.enabled=!0,this.spriteBlockRight.enabled=!1,this.spriteBlockTop.enabled=!1,this.spriteBlockBottom.enabled=!1):(this.spriteHole.enabled=!1,this.spriteBlockLeft.enabled=!1,this.spriteBlockRight.enabled=!1,this.spriteBlockTop.enabled=!1,this.spriteBlockBottom.enabled=!1)}},t.prototype.fadeIn=function(){if(this.bFadeIn=!0,this.isResourceLoaded()){var e=this.nodeLeftBottom;cc.isValid(e)&&(e.opacity=0,e.stopAllActions(),e.runAction(cc.fadeIn(.3)))}},t.prototype.fadeOut=function(){if(this.bFadeIn=!1,this.isResourceLoaded()){var e=this.nodeLeftBottom;cc.isValid(e)&&(e.stopAllActions(),e.runAction(cc.fadeOut(.3)))}},t.prototype._onClickMaskLeftTop=function(){var e=this._mask_click_last_time||0;s.default.time()-e<.5?this._mask_click_count++:this._mask_click_count=0,cc.log("vGuideMask._onClickMaskLeftTop",this._mask_click_count),this._mask_click_last_time=s.default.time(),this._mask_click_count>=19&&(this._mask_click_count=0,h.default.alertCloseablePrompt("\u63d0\u793a","\u662f\u5426\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc\uff1f","\u53d6\u6d88","\u8df3\u8fc7",function(){u.default._debugCancelDebug()}).parent.zIndex=d.default.GLOBAL_ORDER_DIALOG+1)},t.prototype.onTouchMask=function(e){this.onTouchNodeBg(e),e.isClick()&&this.sendMsg("MSG_GUIDE_POINT",{id:"vGuideMask.click"})},t.prototype.onTouchNodeBg=function(e){if("began"==e.name)this._b_drag_to_right=!0,this._turn_count=0,this._b_poped=!1;else if("moved"==e.name){var t=e.getStartLocation(),i=e.getLocation();this._b_drag_to_right?i.x<t.x-20&&(this._b_drag_to_right=!1,this._turn_count++,cc.log("turn left",this._turn_count)):i.x>t.x+20&&(this._b_drag_to_right=!0,this._turn_count++,cc.log("turn right",this._turn_count)),this._b_poped||this._turn_count>=40&&(u.default._debugCancelDebug(),this._b_poped=!0)}},t}(l.default);r.default=p,cc._RF.pop()},{}],vGuideTip:[function(e,t,i){"use strict";cc._RF.push(t,"54dbe1CSJhPS58JzJXVJ0sg","vGuideTip");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("ViewBase"),d=o("mgrCfg"),c=o("mgrPool"),u=o("mgrPlayer"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonSure=null,t.labelContent=null,t.labelName=null,t.nodeArrow=null,t.nodeBtnSure=null,t.nodeSpine=null,t.spriteNameBg=null,t.spine=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vGuideTip"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonSure:[s.default,"onTouchButtonSure"],CC_labelContent:[cc.Label],CC_labelName:[cc.Label],CC_nodeArrow:[cc.Node],CC_nodeBtnSure:[cc.Node],CC_nodeSpine:[cc.Node],CC_spriteNameBg:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){cc.isValid(this.spine)&&(c.default.put(this.spine),this.spine.removeFromParent()),this.spine=null,e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this.context.guideId,t=this.context.step,i=d.default.get("guide_db",e,t);if(i.tipSpineId){var n=c.default.get("spine",i.tipSpineId);n&&(n.parent=this.nodeSpine,n.play("mov_1",!0),this.spine=n)}i.tipName?(this.spriteNameBg.node.active=!0,this.labelName.string=i.tipName):this.spriteNameBg.node.active=!1;var o=i.tipContent;o=o.replace("PLAYER_NAME",u.default.getName()),this.labelContent.string=o,this.nodeArrow.active=!i.bTipArrowDisabled,this.nodeBtnSure.active=!!i.bShowSureBtn},t.prototype.setAnchorPoint=function(e,t){this.isResourceLoaded()&&this.nodeResource.setAnchorPoint(e,t)},t.prototype.onTouchButtonSure=function(e){e.isClick()&&this.sendMsg("MSG_GUIDE_POINT",{id:"vGuideMask.click"})},t}(l.default);r.default=h,cc._RF.pop()},{}],vGuideView:[function(e,t,i){"use strict";cc._RF.push(t,"38f2bEVSjVPJ6lsbQuojwI3","vGuideView");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("mgrCfg"),l=o("mgrGuide"),d=o("mgrPool"),c=o("vGuideMask"),u=o("vGuideTip"),h=o("vGuideArrow"),p=o("ViewBase"),f=o("mgrSound"),g=o("Timer"),v=o("Tools"),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bHide=!1,t.slideIndex=0,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.updatePos()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.bHide||(cc.warn("vGuideView.onCleanup \u5f15\u5bfc\u5f02\u5e38\u9000\u51fa\uff0c\u5e76\u6ca1\u6709\u8c03\u7528\u8fc7hideAndRemove\u51fd\u6570"),cc.warn("  \u5c1d\u8bd5\u53d6\u6d88\u5f15\u5bfc"),l.default.cancelGuide()),cc.isValid(this.spineClick)&&(this.spineClick.removeFromParent(),d.default.put(this.spineClick),this.spineClick=null)},t.prototype.buildUi=function(){var e=this.context.guideId,t=this.context.step,i=s.default.get("guide_db",e,t);if(cc.isValid(this.mask)&&(this.mask.destroy(),this.mask=null),cc.isValid(this.tip)&&(this.tip.destroy(),this.tip=null),cc.isValid(this.arrow)&&(this.arrow.destroy(),this.arrow=null),this.mask=new c.default,this.mask.parent=this,this.mask.setMaskType(i.maskType),i.tipContent&&(this.tip=new u.default({guideId:e,step:t}),this.tip.parent=this),"click"==i.arrowType){var n=i.bFlipArrow?-1:1,o=new cc.Node;o.parent=this,o.scaleX=n,o.angle=-i.arrowRotate,this.nodeSpine=o;var r=d.default.get("spine","ui_guide_click");r.parent=o,r.play("mov_1",!0),this.spineClick=r}else"slide"==i.arrowType&&(this.arrow=new h.default,this.arrow.parent=this,this.arrow.scaleX=i.bFlipArrow?-1:1,this.playSlideArrowAction())},t.prototype.playSlideArrowAction=function(){var e=this.context.guideId,t=this.context.step,i=s.default.get("guide_db",e,t),n=l.default.getGuideNodes(i.nodeNames);if(n.length<2)return cc.warn("vGuideView.playSlideArrowAction nodes not enough!"),this.arrow.destroy(),void(this.arrow=null);var o=this.slideIndex%n.length,r=n[o],a=v.default.convertRectToNodeSpace(this,v.default.calcNodeBoundingBoxToWorld(r,i.nodeExt));if(0==o)this.arrow.setPosition(a.center),this.arrow.opacity=0,this.arrow.runAction(cc.sequence(cc.fadeIn(.3),cc.callFunc(this.playSlideArrowAction.bind(this))));else if(o==n.length-1){var d=this.arrow.position.sub(a.center).mag()/450;this.arrow.runAction(cc.sequence(cc.moveTo(d,a.center),cc.fadeOut(.3),cc.callFunc(this.playSlideArrowAction.bind(this))))}else d=this.arrow.position.sub(a.center).mag()/450,this.arrow.runAction(cc.sequence(cc.moveTo(d,a.center),cc.callFunc(this.playSlideArrowAction.bind(this))));this.slideIndex++},t.prototype.show=function(){this.buildUi();var e=this.context.guideId,t=this.context.step,i=s.default.get("guide_db",e,t);i.soundId&&f.default.play(i.soundId),this.mask&&this.mask.fadeIn(),this.arrow&&(this.arrow.stopActionByTag(1),this.arrow.opacity=0,this.arrow.runAction(cc.fadeIn(.3)).setTag(1)),this.nodeSpine&&(this.nodeSpine.stopActionByTag(1),this.nodeSpine.opacity=0,this.nodeSpine.runAction(cc.fadeIn(.3)).setTag(1)),this.tip&&(this.tip.stopActionByTag(1),this.tip.opacity=0,this.tip.runAction(cc.fadeIn(.3)).setTag(1))},t.prototype.hideAndRemove=function(){var e=this;this.bHide=!0,cc.isValid(this.mask)&&this.mask.fadeOut(),cc.isValid(this.arrow)&&(this.arrow.stopAllActions(),this.arrow.runAction(cc.fadeOut(.3))),cc.isValid(this.nodeSpine)&&(this.nodeSpine.stopAllActions(),this.nodeSpine.runAction(cc.fadeOut(.3))),cc.isValid(this.tip)&&(this.tip.stopAllActions(),this.tip.runAction(cc.fadeOut(.3))),g.default.callLater(.3,function(){e.destroy()},this)},t.prototype.updatePos=function(){var e=this.context.guideId,t=this.context.step,i=s.default.get("guide_db",e,t),n=this.calcFirstNodeRect(),o=v.default.convertRectToNodeSpace(this,n);if(this.mask&&this.mask.setRect(n),this.tip)if(o){var r=0,a=0,l=0,d=0,c=i.tipDir||"left";"left"==c||"leftTop"==c||"leftBottom"==c?(r=o.x-10,l=1):"right"==c||"rightTop"==c||"rightBottom"==c?(r=o.xMax+10,l=0):(r=o.center.x,l=.5),"top"==c||"leftTop"==c||"rightTop"==c?(a=o.yMax+10,d=0):"bottom"==c||"leftBottom"==c||"rightBottom"==c?(a=o.y-10,d=1):(a=o.center.y,d=.5),this.tip.setAnchorPoint(l,d),this.tip.x=r+(i.tipOffset[0]||0),this.tip.y=a+(i.tipOffset[1]||0)}else this.tip.setAnchorPoint(.5,.5),this.tip.x=i.tipOffset[0]||0,this.tip.y=i.tipOffset[1]||0;this.nodeSpine&&"click"==i.arrowType&&o&&cc.isValid(this.nodeSpine)&&this.nodeSpine.setPosition(o.center)},t.prototype.calcFirstNodeRect=function(){var e=this.context.guideId,t=this.context.step,i=s.default.get("guide_db",e,t),n=i.nodeNames[0];if(!n)return null;var o=l.default.getGuideNode(n);return o?v.default.calcNodeBoundingBoxToWorld(o,i.nodeExt):null},t}(p.default);r.default=_,cc._RF.pop()},{}],vHubScene:[function(e,t,i){"use strict";cc._RF.push(t,"679ac0nJHhLMphRNL5oJc39","vHubScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("FSMSceneBase"),u=o("mgrAd"),h=o("mgrChannel"),p=o("mgrCop"),f=o("mgrDirector"),g=o("mgrFishSkin"),v=o("mgrPlayer"),_=o("mgrSdk"),y=o("mgrSound"),m=o("mgrTip"),S=o("mgrVideoRecorder"),b=o("vJumpOtherGame"),C=1,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pauseFlags={},t.gameMode=C,t.buttonSkin=null,t.nodeLayoutLeft=null,t.nodeLeftTop=null,t.buttonMoreMode=null,t.nodeLayoutRight=null,t.buttonAddToDesk=null,t.buttonBegin=null,t.buttonBegin10=null,t.buttonBegin11=null,t.buttonBegin12=null,t.buttonBegin13=null,t.buttonBegin14=null,t.buttonBegin15=null,t.buttonBegin16=null,t.buttonBegin17=null,t.buttonBegin18=null,t.buttonBegin19=null,t.buttonBegin20=null,t.buttonBegin21=null,t.buttonBegin22=null,t.buttonBegin23=null,t.buttonBegin24=null,t.buttonBegin25=null,t.buttonBegin26=null,t.buttonBegin27=null,t.buttonBegin28=null,t.buttonBegin29=null,t.buttonBegin3=null,t.buttonBegin30=null,t.buttonBegin31=null,t.buttonBegin4=null,t.buttonBegin5=null,t.buttonBegin6=null,t.buttonBegin7=null,t.buttonBegin8=null,t.buttonBegin9=null,t.buttonBeginAd1=null,t.buttonJumpLeisureSubject=null,t.buttonKefu=null,t.buttonShare=null,t.buttonSound=null,t.buttonVideoRecord=null,t.buttonWelfare=null,t.buttonZQ=null,t.labelCount1=null,t.labelCount11=null,t.labelCount12=null,t.labelCount13=null,t.labelCount14=null,t.labelCount15=null,t.labelCount16=null,t.labelCount17=null,t.labelCount18=null,t.labelCount19=null,t.labelCount2=null,t.labelCount20=null,t.labelCount21=null,t.labelCount22=null,t.labelCount23=null,t.labelCount24=null,t.labelCount25=null,t.labelCount26=null,t.labelCount27=null,t.labelCount28=null,t.labelCount29=null,t.labelCount3=null,t.labelCount30=null,t.labelCount31=null,t.labelCount4=null,t.labelCount5=null,t.labelCount6=null,t.labelCount7=null,t.labelCount8=null,t.labelCount9=null,t.labelRankScore=null,t.labelRankTime=null,t.labelTime=null,t.nodeAdvIcon1=null,t.nodeAdvIcon11=null,t.nodeAdvIcon12=null,t.nodeAdvIcon13=null,t.nodeAdvIcon14=null,t.nodeAdvIcon15=null,t.nodeAdvIcon16=null,t.nodeAdvIcon17=null,t.nodeAdvIcon18=null,t.nodeAdvIcon19=null,t.nodeAdvIcon2=null,t.nodeAdvIcon20=null,t.nodeAdvIcon21=null,t.nodeAdvIcon22=null,t.nodeAdvIcon23=null,t.nodeAdvIcon24=null,t.nodeAdvIcon25=null,t.nodeAdvIcon26=null,t.nodeAdvIcon27=null,t.nodeAdvIcon28=null,t.nodeAdvIcon29=null,t.nodeAdvIcon3=null,t.nodeAdvIcon30=null,t.nodeAdvIcon31=null,t.nodeAdvIcon4=null,t.nodeAdvIcon5=null,t.nodeAdvIcon6=null,t.nodeAdvIcon7=null,t.nodeAdvIcon8=null,t.nodeAdvIcon9=null,t.nodeBall1=null,t.nodeBall2=null,t.nodeBall3=null,t.nodeBall4=null,t.nodeBall5=null,t.nodeBall6=null,t.nodeBall7=null,t.nodeBegin1=null,t.nodeBegin11=null,t.nodeBegin12=null,t.nodeBegin13=null,t.nodeBegin14=null,t.nodeBegin15=null,t.nodeBegin16=null,t.nodeBegin17=null,t.nodeBegin18=null,t.nodeBegin19=null,t.nodeBegin2=null,t.nodeBegin20=null,t.nodeBegin21=null,t.nodeBegin22=null,t.nodeBegin23=null,t.nodeBegin24=null,t.nodeBegin25=null,t.nodeBegin26=null,t.nodeBegin27=null,t.nodeBegin28=null,t.nodeBegin29=null,t.nodeBegin3=null,t.nodeBegin30=null,t.nodeBegin31=null,t.nodeBegin4=null,t.nodeBegin5=null,t.nodeBegin6=null,t.nodeBegin7=null,t.nodeBegin8=null,t.nodeBegin9=null,t.nodeBeginBg=null,t.nodeBtnBegin=null,t.nodeBtnSound=null,t.nodeEvent=null,t.nodeGame=null,t.nodeGuide=null,t.nodeGuideRoot=null,t.nodeJumpOtherGame=null,t.nodeLogo1=null,t.nodeLogo2=null,t.nodeLogo3=null,t.nodeLogo4=null,t.nodeLogo5=null,t.nodeLogo6=null,t.nodeLogoRoot=null,t.nodePlayerContainer=null,t.nodePoolRiverContainer=null,t.nodeRank=null,t.nodeRightButtons=null,t.nodeSeven=null,t.nodeSoundClose=null,t.nodeSoundOpen=null,t.nodeSurvival=null,t.nodeVideoShare=null,t.nodeVideoStart=null,t.nodeVideoStop=null,t.progressBarRankTimeDown=null,t.progressBarTimeDown=null,t._hadShare=!1,t.configArr=[{adName:"",nodeAdvIcon:"",labelCount:"",itemId:0,unlockCountCopName:"",btnName:"buttonBegin",bShowBtnCopName:"b_show_btn_1"},{adName:"video_unlock_mode1",nodeAdvIcon:"nodeAdvIcon1",labelCount:"labelCount1",itemId:20,unlockCountCopName:"unlock_mode1_count",btnName:"buttonBegin3",bShowBtnCopName:"b_show_btn_3"},{adName:"video_unlock_mode2",nodeAdvIcon:"nodeAdvIcon2",labelCount:"labelCount2",itemId:21,unlockCountCopName:"unlock_mode2_count",btnName:"buttonBegin4",bShowBtnCopName:"b_show_btn_4"},{adName:"video_unlock_mode3",nodeAdvIcon:"nodeAdvIcon3",labelCount:"labelCount3",itemId:22,unlockCountCopName:"unlock_mode3_count",btnName:"buttonBeginAd1",bShowBtnCopName:"b_show_btn_5"},{adName:"video_unlock_mode4",nodeAdvIcon:"nodeAdvIcon4",labelCount:"labelCount4",itemId:23,unlockCountCopName:"unlock_mode4_count",btnName:"buttonBegin5",bShowBtnCopName:"b_show_btn_6"},{adName:"video_unlock_mode5",nodeAdvIcon:"nodeAdvIcon5",labelCount:"labelCount5",itemId:24,unlockCountCopName:"unlock_mode5_count",btnName:"buttonBegin6",bShowBtnCopName:"b_show_btn_7"},{adName:"video_unlock_mode6",nodeAdvIcon:"nodeAdvIcon6",labelCount:"labelCount6",itemId:25,unlockCountCopName:"unlock_mode6_count",btnName:"buttonBegin7",bShowBtnCopName:"b_show_btn_8"},{adName:"video_unlock_mode7",nodeAdvIcon:"nodeAdvIcon7",labelCount:"labelCount7",itemId:26,unlockCountCopName:"unlock_mode7_count",btnName:"buttonBegin8",bShowBtnCopName:"b_show_btn_2"},{adName:"video_unlock_mode8",nodeAdvIcon:"nodeAdvIcon8",labelCount:"labelCount8",itemId:27,unlockCountCopName:"unlock_mode8_count",btnName:"buttonBegin9",bShowBtnCopName:"b_show_btn_9"},{adName:"video_unlock_mode9",nodeAdvIcon:"nodeAdvIcon9",labelCount:"labelCount9",itemId:28,unlockCountCopName:"unlock_mode9_count",btnName:"buttonBegin10",bShowBtnCopName:"b_show_btn_10"},{adName:"video_unlock_mode11",nodeAdvIcon:"nodeAdvIcon11",labelCount:"labelCount11",itemId:29,unlockCountCopName:"unlock_mode11_count",btnName:"buttonBegin11",bShowBtnCopName:"b_show_btn_11"},{adName:"video_unlock_mode12",nodeAdvIcon:"nodeAdvIcon12",labelCount:"labelCount12",itemId:30,unlockCountCopName:"unlock_mode12_count",btnName:"buttonBegin12",bShowBtnCopName:"b_show_btn_12"},{adName:"video_unlock_mode13",nodeAdvIcon:"nodeAdvIcon13",labelCount:"labelCount13",itemId:31,unlockCountCopName:"unlock_mode13_count",btnName:"buttonBegin13",bShowBtnCopName:"b_show_btn_13"},{adName:"video_unlock_mode14",nodeAdvIcon:"nodeAdvIcon14",labelCount:"labelCount14",itemId:32,unlockCountCopName:"unlock_mode14_count",btnName:"buttonBegin14",bShowBtnCopName:"b_show_btn_14"},{adName:"video_unlock_mode15",nodeAdvIcon:"nodeAdvIcon15",labelCount:"labelCount15",itemId:33,unlockCountCopName:"unlock_mode15_count",btnName:"buttonBegin15",bShowBtnCopName:"b_show_btn_15"},{adName:"video_unlock_mode16",nodeAdvIcon:"nodeAdvIcon16",labelCount:"labelCount16",itemId:34,unlockCountCopName:"unlock_mode16_count",btnName:"buttonBegin16",bShowBtnCopName:"b_show_btn_16"},{adName:"video_unlock_mode17",nodeAdvIcon:"nodeAdvIcon17",labelCount:"labelCount17",itemId:35,unlockCountCopName:"unlock_mode17_count",btnName:"buttonBegin17",bShowBtnCopName:"b_show_btn_17"},{adName:"video_unlock_mode18",nodeAdvIcon:"nodeAdvIcon18",labelCount:"labelCount18",itemId:36,unlockCountCopName:"unlock_mode18_count",btnName:"buttonBegin18",bShowBtnCopName:"b_show_btn_18"},{adName:"video_unlock_mode19",nodeAdvIcon:"nodeAdvIcon19",labelCount:"labelCount19",itemId:37,unlockCountCopName:"unlock_mode19_count",btnName:"buttonBegin19",bShowBtnCopName:"b_show_btn_19"},{adName:"video_unlock_mode20",nodeAdvIcon:"nodeAdvIcon20",labelCount:"labelCount20",itemId:38,unlockCountCopName:"unlock_mode20_count",btnName:"buttonBegin20",bShowBtnCopName:"b_show_btn_20"},{adName:"video_unlock_mode21",nodeAdvIcon:"nodeAdvIcon21",labelCount:"labelCount21",itemId:39,unlockCountCopName:"unlock_mode21_count",btnName:"buttonBegin21",bShowBtnCopName:"b_show_btn_21"},{adName:"video_unlock_mode22",nodeAdvIcon:"nodeAdvIcon22",labelCount:"labelCount22",itemId:40,unlockCountCopName:"unlock_mode22_count",btnName:"buttonBegin22",bShowBtnCopName:"b_show_btn_22"},{adName:"video_unlock_mode23",nodeAdvIcon:"nodeAdvIcon23",labelCount:"labelCount23",itemId:41,unlockCountCopName:"unlock_mode23_count",btnName:"buttonBegin23",bShowBtnCopName:"b_show_btn_23"},{adName:"video_unlock_mode24",nodeAdvIcon:"nodeAdvIcon24",labelCount:"labelCount24",itemId:42,unlockCountCopName:"unlock_mode24_count",btnName:"buttonBegin24",bShowBtnCopName:"b_show_btn_24"},{adName:"video_unlock_mode25",nodeAdvIcon:"nodeAdvIcon25",labelCount:"labelCount25",itemId:43,unlockCountCopName:"unlock_mode25_count",btnName:"buttonBegin25",bShowBtnCopName:"b_show_btn_25"},{adName:"video_unlock_mode26",nodeAdvIcon:"nodeAdvIcon26",labelCount:"labelCount26",itemId:44,unlockCountCopName:"unlock_mode26_count",btnName:"buttonBegin26",bShowBtnCopName:"b_show_btn_26"},{adName:"video_unlock_mode27",nodeAdvIcon:"nodeAdvIcon27",labelCount:"labelCount27",itemId:45,unlockCountCopName:"unlock_mode27_count",btnName:"buttonBegin27",bShowBtnCopName:"b_show_btn_27"},{adName:"video_unlock_mode28",nodeAdvIcon:"nodeAdvIcon28",labelCount:"labelCount28",itemId:46,unlockCountCopName:"unlock_mode28_count",btnName:"buttonBegin28",bShowBtnCopName:"b_show_btn_28"},{adName:"video_unlock_mode29",nodeAdvIcon:"nodeAdvIcon29",labelCount:"labelCount29",itemId:47,unlockCountCopName:"unlock_mode29_count",btnName:"buttonBegin29",bShowBtnCopName:"b_show_btn_29"},{adName:"video_unlock_mode30",nodeAdvIcon:"nodeAdvIcon30",labelCount:"labelCount30",itemId:48,unlockCountCopName:"unlock_mode30_count",btnName:"buttonBegin30",bShowBtnCopName:"b_show_btn_30"},{adName:"video_unlock_mode31",nodeAdvIcon:"nodeAdvIcon31",labelCount:"labelCount31",itemId:49,unlockCountCopName:"unlock_mode31_count",btnName:"buttonBegin31",bShowBtnCopName:"b_show_btn_31"}],t}return a(t,e),t.prototype._getResourceName=function(){return"scene/vHubScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LL_buttonSkin:[s.default,"onTouchButtonSkin"],CC_LR_buttonMoreMode:[s.default,"onTouchButtonMoreMode"],CC_buttonAddToDesk:[s.default,"onTouchButtonAddToDesk"],CC_buttonBegin:[s.default,"onTouchButtonBegin"],CC_buttonBegin10:[s.default,"onTouchButtonBegin10"],CC_buttonBegin11:[s.default,"onTouchButtonBegin11"],CC_buttonBegin12:[s.default,"onTouchButtonBegin12"],CC_buttonBegin13:[s.default,"onTouchButtonBegin13"],CC_buttonBegin14:[s.default,"onTouchButtonBegin14"],CC_buttonBegin15:[s.default,"onTouchButtonBegin15"],CC_buttonBegin16:[s.default,"onTouchButtonBegin16"],CC_buttonBegin17:[s.default,"onTouchButtonBegin17"],CC_buttonBegin18:[s.default,"onTouchButtonBegin18"],CC_buttonBegin19:[s.default,"onTouchButtonBegin19"],CC_buttonBegin20:[s.default,"onTouchButtonBegin20"],CC_buttonBegin21:[s.default,"onTouchButtonBegin21"],CC_buttonBegin22:[s.default,"onTouchButtonBegin22"],CC_buttonBegin23:[s.default,"onTouchButtonBegin23"],CC_buttonBegin24:[s.default,"onTouchButtonBegin24"],CC_buttonBegin25:[s.default,"onTouchButtonBegin25"],CC_buttonBegin26:[s.default,"onTouchButtonBegin26"],CC_buttonBegin27:[s.default,"onTouchButtonBegin27"],CC_buttonBegin28:[s.default,"onTouchButtonBegin28"],CC_buttonBegin29:[s.default,"onTouchButtonBegin29"],CC_buttonBegin3:[s.default,"onTouchButtonBegin3"],CC_buttonBegin30:[s.default,"onTouchButtonBegin30"],CC_buttonBegin31:[s.default,"onTouchButtonBegin31"],CC_buttonBegin4:[s.default,"onTouchButtonBegin4"],CC_buttonBegin5:[s.default,"onTouchButtonBegin5"],CC_buttonBegin6:[s.default,"onTouchButtonBegin6"],CC_buttonBegin7:[s.default,"onTouchButtonBegin7"],CC_buttonBegin8:[s.default,"onTouchButtonBegin8"],CC_buttonBegin9:[s.default,"onTouchButtonBegin9"],CC_buttonBeginAd1:[s.default,"onTouchButtonBeginAd1"],CC_buttonJumpLeisureSubject:[s.default,"onTouchButtonJumpLeisureSubject"],CC_buttonKefu:[s.default,"onTouchButtonKefu"],CC_buttonShare:[s.default,"onTouchButtonShare"],CC_buttonSound:[s.default,"onTouchButtonSound"],CC_buttonVideoRecord:[s.default,"onTouchButtonVideoRecord"],CC_buttonWelfare:[s.default,"onTouchButtonWelfare"],CC_buttonZQ:[s.default,"onTouchButtonZQ"],CC_LL_nodeLayoutLeft:[cc.Node],CC_LL_nodeLeftTop:[cc.Node],CC_LR_nodeLayoutRight:[cc.Node],CC_labelCount1:[cc.Label],CC_labelCount11:[cc.Label],CC_labelCount12:[cc.Label],CC_labelCount13:[cc.Label],CC_labelCount14:[cc.Label],CC_labelCount15:[cc.Label],CC_labelCount16:[cc.Label],CC_labelCount17:[cc.Label],CC_labelCount18:[cc.Label],CC_labelCount19:[cc.Label],CC_labelCount2:[cc.Label],CC_labelCount20:[cc.Label],CC_labelCount21:[cc.Label],CC_labelCount22:[cc.Label],CC_labelCount23:[cc.Label],CC_labelCount24:[cc.Label],CC_labelCount25:[cc.Label],CC_labelCount26:[cc.Label],CC_labelCount27:[cc.Label],CC_labelCount28:[cc.Label],CC_labelCount29:[cc.Label],CC_labelCount3:[cc.Label],CC_labelCount30:[cc.Label],CC_labelCount31:[cc.Label],CC_labelCount4:[cc.Label],CC_labelCount5:[cc.Label],CC_labelCount6:[cc.Label],CC_labelCount7:[cc.Label],CC_labelCount8:[cc.Label],CC_labelCount9:[cc.Label],CC_labelRankScore:[cc.Label],CC_labelRankTime:[cc.Label],CC_labelTime:[cc.Label],CC_nodeAdvIcon1:[cc.Node],CC_nodeAdvIcon11:[cc.Node],CC_nodeAdvIcon12:[cc.Node],CC_nodeAdvIcon13:[cc.Node],CC_nodeAdvIcon14:[cc.Node],CC_nodeAdvIcon15:[cc.Node],CC_nodeAdvIcon16:[cc.Node],CC_nodeAdvIcon17:[cc.Node],CC_nodeAdvIcon18:[cc.Node],CC_nodeAdvIcon19:[cc.Node],CC_nodeAdvIcon2:[cc.Node],CC_nodeAdvIcon20:[cc.Node],CC_nodeAdvIcon21:[cc.Node],CC_nodeAdvIcon22:[cc.Node],CC_nodeAdvIcon23:[cc.Node],CC_nodeAdvIcon24:[cc.Node],CC_nodeAdvIcon25:[cc.Node],CC_nodeAdvIcon26:[cc.Node],CC_nodeAdvIcon27:[cc.Node],CC_nodeAdvIcon28:[cc.Node],CC_nodeAdvIcon29:[cc.Node],CC_nodeAdvIcon3:[cc.Node],CC_nodeAdvIcon30:[cc.Node],CC_nodeAdvIcon31:[cc.Node],CC_nodeAdvIcon4:[cc.Node],CC_nodeAdvIcon5:[cc.Node],CC_nodeAdvIcon6:[cc.Node],CC_nodeAdvIcon7:[cc.Node],CC_nodeAdvIcon8:[cc.Node],CC_nodeAdvIcon9:[cc.Node],CC_nodeBall1:[cc.Node],CC_nodeBall2:[cc.Node],CC_nodeBall3:[cc.Node],CC_nodeBall4:[cc.Node],CC_nodeBall5:[cc.Node],CC_nodeBall6:[cc.Node],CC_nodeBall7:[cc.Node],CC_nodeBegin1:[cc.Node],CC_nodeBegin11:[cc.Node],CC_nodeBegin12:[cc.Node],CC_nodeBegin13:[cc.Node],CC_nodeBegin14:[cc.Node],CC_nodeBegin15:[cc.Node],CC_nodeBegin16:[cc.Node],CC_nodeBegin17:[cc.Node],CC_nodeBegin18:[cc.Node],CC_nodeBegin19:[cc.Node],CC_nodeBegin2:[cc.Node],CC_nodeBegin20:[cc.Node],CC_nodeBegin21:[cc.Node],CC_nodeBegin22:[cc.Node],CC_nodeBegin23:[cc.Node],CC_nodeBegin24:[cc.Node],CC_nodeBegin25:[cc.Node],CC_nodeBegin26:[cc.Node],CC_nodeBegin27:[cc.Node],CC_nodeBegin28:[cc.Node],CC_nodeBegin29:[cc.Node],CC_nodeBegin3:[cc.Node],CC_nodeBegin30:[cc.Node],CC_nodeBegin31:[cc.Node],CC_nodeBegin4:[cc.Node],CC_nodeBegin5:[cc.Node],CC_nodeBegin6:[cc.Node],CC_nodeBegin7:[cc.Node],CC_nodeBegin8:[cc.Node],CC_nodeBegin9:[cc.Node],CC_nodeBeginBg:[cc.Node],CC_nodeBtnBegin:[cc.Node],CC_nodeBtnSound:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGame:[cc.Node],CC_nodeGuide:[cc.Node],CC_nodeGuideRoot:[cc.Node],CC_nodeJumpOtherGame:[cc.Node],CC_nodeLogo1:[cc.Node],CC_nodeLogo2:[cc.Node],CC_nodeLogo3:[cc.Node],CC_nodeLogo4:[cc.Node],CC_nodeLogo5:[cc.Node],CC_nodeLogo6:[cc.Node],CC_nodeLogoRoot:[cc.Node],CC_nodePlayerContainer:[cc.Node],CC_nodePoolRiverContainer:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRightButtons:[cc.Node],CC_nodeSeven:[cc.Node],CC_nodeSoundClose:[cc.Node],CC_nodeSoundOpen:[cc.Node],CC_nodeSurvival:[cc.Node],CC_nodeVideoShare:[cc.Node],CC_nodeVideoStart:[cc.Node],CC_nodeVideoStop:[cc.Node],CC_progressBarRankTimeDown:[cc.ProgressBar],CC_progressBarTimeDown:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.originBeginNodeWidth=this.nodeBtnBegin.width,1==p.default.getNumberValue("b_begin_node_signle_column")&&(this.nodeBtnBegin.width=300),this.refreshVideoRecordState(),this.refreshBtns(),this.registerListeners({MSG_COP_CHANGED:this.onMsgCopChanged,MSG_HUB_SHOW_DIALOG:this.onMsgHubShowDialog,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_AD_EVENT_FAILED:this.onMsgAdEventFailed,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult,MSG_VIDEO_RECORDER_STATE_CHANGE:this.onMsgVideoRecorderStateChange,MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc,MSG_SHORT_CUT_STATE_CHANGED:this.onMsgShortCutStateChanged,MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult,MSG_ON_KEY_DOWN:this.onMsgOnKeyDown.bind(this),MSG_SDK_BASE_CHANNEL_INFO_CHANGED:this.onMsgSdkBaseChannelInfoChanged}),this.refreshLogo(),cc.tween(this.nodeLogoRoot).repeatForever(cc.tween().to(.2,{angle:5}).to(.4,{angle:-5}).to(.2,{angle:0}).delay(2)).start(),this.refreshPoint(),l.default.callLoop(1,this.onTimerLoop.bind(this),this)},t.prototype.onTimerLoop=function(){this.refreshBtns()},t.prototype.refreshLogo=function(){var e=_.default.getLocalConfig();this.nodeLogoRoot.active=!0,console.warn("vLoadingScene.refreshLogo",e),this.nodeLogo1.active=!1,this.nodeLogo2.active=!1,this.nodeLogo3.active=!1,this.nodeLogo4.active=!1,this.nodeLogo5.active=!1,this.nodeLogo6.active=!1,e&&("\u53ec\u5524\u795e\u9f99\u8fdb\u5316"==e.gameName?this.nodeLogo1.active=!0:"\u53ec\u5524\u795e\u9f99\u8fdb\u5316\u7248"==e.gameName?this.nodeLogo2.active=!0:"\u8d85\u7ea7\u795e\u9f99\u8fdb\u5316\u7248"==e.gameName?this.nodeLogo3.active=!0:"\u5929\u5929\u795e\u9f99"==e.gameName?this.nodeLogo4.active=!0:"\u795e\u9f99\u541e\u98df\u8fdb\u5316"==e.gameName?this.nodeLogo5.active=!0:"\u8fdb\u5316\u5408\u6210\u795e\u9f99"==e.gameName&&(this.nodeLogo6.active=!0))},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.refreshBtns=function(){this.nodeJumpOtherGame.active=h.default.canGameInterPush1(1),this.nodeJumpOtherGame.active&&0==this.nodeJumpOtherGame.children.length&&((new b.default).parent=this.nodeJumpOtherGame),this.buttonWelfare.node.active=h.default.canGameWelware(),this.buttonZQ.node.active=1==_.default.getCopNumberValueByKey("b_advanced_setting"),this.buttonVideoRecord.node.active=h.default.canUseVideoRecord(),this.buttonAddToDesk.node.active=h.default._isSupportInstallShortcut&&!h.default.isTakedInstallShortCutReward(),this.buttonJumpLeisureSubject.node.active=h.default._isJumpLeisureEnabled,this.buttonMoreMode.node.active=1==_.default.getCopNumberValueByKey("b_mode_show"),m.default.setBadgeEnabled(this.buttonMoreMode.node,!0,-30,40),this.buttonMoreMode.node.getNumberOfRunningActions()<=0&&this.buttonMoreMode.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.2,1.1,1.1),cc.scaleTo(.2,1),cc.scaleTo(.2,1.1,1.1),cc.scaleTo(.2,1),cc.delayTime(1)))),this.adUnlockCopModeRefresh(),this.buttonSkin.node.active=1==_.default.getCopNumberValueByKey("b_show_select_skin");var e=p.default.get("kefu_text");this.buttonKefu.node.active=e&&"0"!=e,this.buttonShare.node.active=h.default.canShare()&&!this._hadShare;for(var t=this.configArr.length,i=0;i<t;i++){var n=this.configArr[i];this[n.btnName]&&(""!=n.adName&&(this[n.btnName].node.active=!!u.default.preCheckAdNoCd(n.adName)),""!=n.bShowBtnCopName&&p.default.getNumberValue(n.bShowBtnCopName)<=0&&(this[n.btnName].node.active=!1)),this[n.labelCount]&&(this[n.labelCount].string=v.default.getItemAmount(n.itemId)+"/"+p.default.getNumberValue(n.unlockCountCopName))}this.bUnlockButton(),y.default.getMusicVolmue()<=0?(this.nodeSoundClose.active=!0,this.nodeSoundOpen.active=!1):(this.nodeSoundClose.active=!1,this.nodeSoundOpen.active=!0)},t.prototype.refreshPoint=function(){for(var e=this.configArr.length,t=0;t<e;t++){var i=this.configArr[t];i.itemId<=0||v.default.getItemAmount(i.itemId)<p.default.getNumberValue(i.unlockCountCopName)&&_.default.statisVideoPointEvent(i.adName,1)}},t.prototype.adUnlockCopModeRefresh=function(){if(_.default.getCopNumberValueByKey("b_ad_unlock_cop_mode"))for(var e=_.default.getCopNumberValueByKey("mode_unlock_cd"),t=d.default.time(),i=this.configArr.length,n=0;n<i;n++){var o=this.configArr[n];if(null!=this[o.nodeAdvIcon]){var r=u.default.getLastUnlockModeTime(o.adName);!this[o.nodeAdvIcon].active&&r+e<=t&&(v.default._setItemAmount(o.itemId,0),this.refreshPoint())}}},t.prototype.bUnlockButton=function(){for(var e=this.configArr.length,t=0;t<e;t++){var i=this.configArr[t];null!=this[i.nodeAdvIcon]&&null!=this[i.labelCount]&&(v.default.getItemAmount(i.itemId)>=p.default.getNumberValue(i.unlockCountCopName)?(this[i.nodeAdvIcon].active=!1,this[i.labelCount].node.active=!1):(this[i.nodeAdvIcon].active=!0,this[i.labelCount].node.active=!0))}},t.prototype.refreshVideoRecordState=function(){this.nodeVideoStart.active=S.default.recordStatus==S.default.PRE_RECORD,this.nodeVideoStop.active=S.default.recordStatus==S.default.RECORDING,this.nodeVideoShare.active=S.default.recordStatus==S.default.RECORD_FINISH},t.prototype.tryTriggerAdSkinDialog=function(){g.default.isSkinUnlocked(2)&&g.default.isSkinUnlocked(3)||u.default.preCheckCanTriggerAdEvent("video_unlock_skin")&&d.default.random(100)<=p.default.getNumberValue("alert_ad_skin_ratio")&&f.default.openDialog("vAdSkinDialog")},t.prototype.pauseGame=function(e){this.pauseFlags[e]=!0,cc.log("vHubScene.pauseGame",e,this.isPause(),this.pauseFlags)},t.prototype.resumeGame=function(e){delete this.pauseFlags[e],cc.log("vHubScene.resumeGame",e,this.isPause(),this.pauseFlags)},t.prototype.isPause=function(){return d.default.getObjSize(this.pauseFlags)>0},t.prototype.onTouchButtonBegin=function(e){e.isClick()&&f.default.enterScene("vGameScene",{gameMode:C})},t.prototype.onTouchButtonAddToDesk=function(e){e.isClick()&&_.default.installShortcut()},t.prototype.onTouchButtonVideoRecord=function(e){if(e.isClick())switch(S.default.recordStatus){case S.default.PRE_RECORD:S.default.tryStartRecordGameVideo(60,"1");break;case S.default.RECORDING:S.default.stopRecordGameVideo();break;case S.default.RECORD_FINISH:S.default.shareGameVideo(),S.default.setRecordStatus(S.default.PRE_RECORD)}},t.prototype.onTouchButtonZQ=function(e){e.isClick()&&_.default.openAdvancedSetting()},t.prototype.onTouchButtonJumpLeisureSubject=function(e){e.isClick()&&_.default.jumpLeisureSubject()},t.prototype.onTouchButtonShare=function(e){e.isClick()&&_.default.openShare()},t.prototype.onTouchButtonWelfare=function(e){e.isClick()&&f.default.openDialog("vWelfareDialog")},t.prototype.onTouchButtonSound=function(e){e.isClick()&&(this.nodeSoundClose.active=!this.nodeSoundClose.active,this.nodeSoundOpen.active=!this.nodeSoundOpen.active,this.nodeSoundOpen.active?y.default.resumeSound("player_set"):y.default.pauseSound("player_set"))},t.prototype.onTouchButtonBeginAd1=function(e){e.isClick()&&(v.default.getItemAmount(22)>=p.default.getNumberValue("unlock_mode3_count")?(cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().enabledAccumulator=!0,f.default.enterScene("vCombineScene"),_.default.statisOnStageStart("80005","\u5173\u5361\u5f00\u59cb")):u.default.triggerAdEvent("video_unlock_mode3",null,!0))},t.prototype.onTouchButtonBeginAd2=function(e){e.isClick()&&u.default.triggerAdEvent("video_vHubScene_level_start",{fishId:3},!0)},t.prototype.onTouchButtonVideoStopRun=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_stop_run",null,!0))},t.prototype.onTouchButtonBegin3=function(e){e.isClick()&&(console.log("onTouchButtonBegin3"),v.default.getItemAmount(20)>=p.default.getNumberValue("unlock_mode1_count")?f.default.enterScene("vGameScene",{gameMode:2}):u.default.triggerAdEvent("video_unlock_mode1",null,!0))},t.prototype.onTouchButtonBegin4=function(e){e.isClick()&&(v.default.getItemAmount(21)>=p.default.getNumberValue("unlock_mode2_count")?f.default.enterScene("vGameScene",{gameMode:3}):u.default.triggerAdEvent("video_unlock_mode2",null,!0))},t.prototype.onTouchButtonBegin5=function(e){e.isClick()&&(v.default.getItemAmount(23)>=p.default.getNumberValue("unlock_mode4_count")?f.default.enterScene("vGameScene",{gameMode:4}):u.default.triggerAdEvent("video_unlock_mode4",null,!0))},t.prototype.onTouchButtonUseMagnet=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_vHubScene_magnet"))},t.prototype.onTouchButtonUseShield=function(e){e.isClick()&&(this.pauseGame("adv"),u.default.triggerAdEvent("video_trigger_defence2"))},t.prototype.onTouchButtonSkin=function(e){e.isClick()&&f.default.openDialog("vFishSkinDialog")},t.prototype.onTouchButtonBegin6=function(e){e.isClick()&&(v.default.getItemAmount(24)>=p.default.getNumberValue("unlock_mode5_count")?(cc.director.getCollisionManager().enabled=!0,f.default.enterScene("vThroughLoongLineScene"),_.default.statisOnStageStart("80006","\u7a7f\u8d8a\u9f99\u7ebf")):u.default.triggerAdEvent("video_unlock_mode5",null,!0))},t.prototype.onTouchButtonBegin7=function(e){e.isClick()&&(v.default.getItemAmount(25)>=p.default.getNumberValue("unlock_mode6_count")?f.default.enterScene("vGameScene",{gameMode:7}):u.default.triggerAdEvent("video_unlock_mode6",null,!0))},t.prototype.onTouchButtonBegin8=function(e){e.isClick()&&(v.default.getItemAmount(26)>=p.default.getNumberValue("unlock_mode7_count")?f.default.enterScene("vGameScene",{gameMode:8}):u.default.triggerAdEvent("video_unlock_mode7",null,!0))},t.prototype.onTouchButtonBegin9=function(e){e.isClick()&&(v.default.getItemAmount(27)>=p.default.getNumberValue("unlock_mode8_count")?(cc.director.getCollisionManager().enabled=!0,f.default.enterScene("vGameScene141")):u.default.triggerAdEvent("video_unlock_mode8",null,!0))},t.prototype.onTouchButtonBegin10=function(e){e.isClick()&&(v.default.getItemAmount(28)>=p.default.getNumberValue("unlock_mode9_count")?f.default.enterScene("vGameStringScene"):u.default.triggerAdEvent("video_unlock_mode9",null,!0))},t.prototype.onTouchButtonBegin11=function(e){e.isClick()&&(v.default.getItemAmount(29)>=p.default.getNumberValue("unlock_mode11_count")?f.default.openDialog("vBigSkillDialog"):u.default.triggerAdEvent("video_unlock_mode11",null,!0))},t.prototype.onTouchButtonBegin12=function(e){e.isClick()&&(v.default.getItemAmount(30)>=p.default.getNumberValue("unlock_mode12_count")?f.default.enterScene("vGameLifeScene"):u.default.triggerAdEvent("video_unlock_mode12",null,!0))},t.prototype.onTouchButtonBegin13=function(e){e.isClick()&&(v.default.getItemAmount(31)>=p.default.getNumberValue("unlock_mode13_count")?f.default.enterScene("vGameQueenScene"):u.default.triggerAdEvent("video_unlock_mode13",null,!0))},t.prototype.onTouchButtonBegin14=function(e){e.isClick()&&(v.default.getItemAmount(32)>=p.default.getNumberValue("unlock_mode14_count")?f.default.enterScene("vGameGoddessScene"):u.default.triggerAdEvent("video_unlock_mode14",null,!0))},t.prototype.onTouchButtonBegin15=function(e){e.isClick()&&(v.default.getItemAmount(33)>=p.default.getNumberValue("unlock_mode15_count")?f.default.enterScene("vGameAnchorScene"):u.default.triggerAdEvent("video_unlock_mode15",null,!0))},t.prototype.onTouchButtonBegin16=function(e){e.isClick()&&(v.default.getItemAmount(34)>=p.default.getNumberValue("unlock_mode16_count")?f.default.enterScene("vGameDeviceScene"):u.default.triggerAdEvent("video_unlock_mode16",null,!0))},t.prototype.onTouchButtonBegin17=function(e){e.isClick()&&(v.default.getItemAmount(35)>=p.default.getNumberValue("unlock_mode17_count")?f.default.enterScene("vGameGunScene"):u.default.triggerAdEvent("video_unlock_mode17",null,!0))},t.prototype.onTouchButtonKefu=function(e){e.isClick()&&m.default.alertPrompt("\u63d0\u793a",p.default.get("kefu_text"),"\u786e\u5b9a")},t.prototype.onTouchButtonBegin18=function(e){e.isClick()&&(v.default.getItemAmount(36)>=p.default.getNumberValue("unlock_mode18_count")?f.default.enterScene("vGameMotoScene"):u.default.triggerAdEvent("video_unlock_mode18",null,!0))},t.prototype.onTouchButtonBegin19=function(e){e.isClick()&&(v.default.getItemAmount(37)>=p.default.getNumberValue("unlock_mode19_count")?f.default.enterScene("vGameSnacksScene"):u.default.triggerAdEvent("video_unlock_mode19",null,!0))},t.prototype.onTouchButtonMoreMode=function(e){e.isClick()&&f.default.openDialog("vMoreModeDialog",{hubScene:this})},t.prototype.onTouchButtonBegin20=function(e){e.isClick()&&(v.default.getItemAmount(38)>=p.default.getNumberValue("unlock_mode20_count")?f.default.enterScene("vGameDNAScene"):u.default.triggerAdEvent("video_unlock_mode20",null,!0))},t.prototype.onTouchButtonBegin21=function(e){e.isClick()&&(v.default.getItemAmount(39)>=p.default.getNumberValue("unlock_mode21_count")?f.default.openDialog("vXiuxianTypeDialog"):u.default.triggerAdEvent("video_unlock_mode21",null,!0))},t.prototype.onTouchButtonBegin22=function(e){e.isClick()&&(v.default.getItemAmount(40)>=p.default.getNumberValue("unlock_mode22_count")?f.default.enterScene("vGameHouseScene"):u.default.triggerAdEvent("video_unlock_mode22",null,!0))},t.prototype.onTouchButtonBegin23=function(e){e.isClick()&&(v.default.getItemAmount(41)>=p.default.getNumberValue("unlock_mode23_count")?f.default.enterScene("vGameInsectScene"):u.default.triggerAdEvent("video_unlock_mode23",null,!0))},t.prototype.onTouchButtonBegin24=function(e){e.isClick()&&(v.default.getItemAmount(42)>=p.default.getNumberValue("unlock_mode24_count")?f.default.enterScene("vGameQiQiangScene"):u.default.triggerAdEvent("video_unlock_mode24",null,!0))},t.prototype.onTouchButtonBegin25=function(e){e.isClick()&&(v.default.getItemAmount(43)>=p.default.getNumberValue("unlock_mode25_count")?f.default.enterScene("vGameQiQiangLuomuScene"):u.default.triggerAdEvent("video_unlock_mode25",null,!0))},t.prototype.onTouchButtonBegin26=function(e){e.isClick()&&(v.default.getItemAmount(44)>=p.default.getNumberValue("unlock_mode26_count")?f.default.enterScene("vGameBarbecueScene"):u.default.triggerAdEvent("video_unlock_mode26",null,!0))},t.prototype.onTouchButtonBegin27=function(e){e.isClick()&&(v.default.getItemAmount(45)>=p.default.getNumberValue("unlock_mode27_count")?f.default.enterScene("vGame2048Scene"):u.default.triggerAdEvent("video_unlock_mode27",null,!0))},t.prototype.onTouchButtonBegin28=function(e){e.isClick()&&(v.default.getItemAmount(46)>=p.default.getNumberValue("unlock_mode28_count")?f.default.enterScene("vGameFirearmsScene"):u.default.triggerAdEvent("video_unlock_mode28",null,!0))},t.prototype.onTouchButtonBegin29=function(e){e.isClick()&&(v.default.getItemAmount(47)>=p.default.getNumberValue("unlock_mode29_count")?f.default.enterScene("vGameStarScene"):u.default.triggerAdEvent("video_unlock_mode29",null,!0))},t.prototype.onTouchButtonBegin30=function(e){e.isClick()&&(v.default.getItemAmount(48)>=p.default.getNumberValue("unlock_mode30_count")?f.default.enterScene("vGameDaughterScene"):u.default.triggerAdEvent("video_unlock_mode30",null,!0))},t.prototype.onTouchButtonBegin31=function(e){e.isClick()&&(v.default.getItemAmount(49)>=p.default.getNumberValue("unlock_mode31_count")?f.default.enterScene("vGameLuoBoScene"):u.default.triggerAdEvent("video_unlock_mode31",null,!0))},t.prototype.onMsgHubShowDialog=function(){},t.prototype.onMsgCopChanged=function(){},t.prototype.onMsgAdEventFailed=function(){this.resumeGame("adv")},t.prototype.onMsgAdEventSuccessd=function(e){var t=this;this.resumeGame("adv");var i=e,n=i.adEventId;"video_vHubScene_level_start"==n&&i.userData.fishId||"video_vHubScene_stop_run"==n||("video_vHubScene_buffet"==n?(v.default.addItemAmount(17,1,"\u5e7f\u544a\u6b21\u6570"),this.refreshBtns()):"video_unlock_mode1"==n?(v.default.addItemAmount(20,1,"\u89e3\u9501\u6a21\u5f0f1"),this.refreshBtns(),this.nodeAdvIcon1.active||u.default.markUnlockModeTime("video_unlock_mode1")):"video_unlock_mode2"==n?(v.default.addItemAmount(21,1,"\u89e3\u9501\u6a21\u5f0f2"),this.refreshBtns(),this.nodeAdvIcon2.active||u.default.markUnlockModeTime("video_unlock_mode2")):"video_unlock_mode3"==n?(v.default.addItemAmount(22,1,"\u89e3\u9501\u6a21\u5f0f3"),this.refreshBtns(),this.nodeAdvIcon3.active||u.default.markUnlockModeTime("video_unlock_mode3")):"video_unlock_mode4"==n?(v.default.addItemAmount(23,1,"\u89e3\u9501\u6a21\u5f0f4"),this.refreshBtns(),this.nodeAdvIcon4.active||u.default.markUnlockModeTime("video_unlock_mode4")):"video_unlock_mode5"==n?(v.default.addItemAmount(24,1,"\u89e3\u9501\u6a21\u5f0f5"),this.refreshBtns(),this.nodeAdvIcon5.active||u.default.markUnlockModeTime("video_unlock_mode5")):"video_unlock_mode6"==n?(v.default.addItemAmount(25,1,"\u89e3\u9501\u6a21\u5f0f6"),this.refreshBtns(),this.nodeAdvIcon6.active||u.default.markUnlockModeTime("video_unlock_mode6")):"video_unlock_mode7"==n?(v.default.addItemAmount(26,1,"\u89e3\u9501\u6a21\u5f0f7"),this.refreshBtns(),this.nodeAdvIcon7.active||u.default.markUnlockModeTime("video_unlock_mode7")):"video_unlock_mode8"==n?(v.default.addItemAmount(27,1,"\u89e3\u9501\u6a21\u5f0f8"),this.refreshBtns(),this.nodeAdvIcon8.active||u.default.markUnlockModeTime("video_unlock_mode8")):"video_unlock_mode9"==n?(v.default.addItemAmount(28,1,"\u89e3\u9501\u6a21\u5f0f9"),this.refreshBtns(),this.nodeAdvIcon9.active||u.default.markUnlockModeTime("video_unlock_mode9")):"video_unlock_mode11"==n?(v.default.addItemAmount(29,1,"\u89e3\u9501\u6a21\u5f0f11"),this.refreshBtns(),this.nodeAdvIcon11.active||u.default.markUnlockModeTime("video_unlock_mode11")):"video_unlock_mode12"==n?(v.default.addItemAmount(30,1,"\u89e3\u9501\u6a21\u5f0f12"),this.refreshBtns(),this.nodeAdvIcon12.active||u.default.markUnlockModeTime("video_unlock_mode12")):"video_unlock_mode13"==n?(v.default.addItemAmount(31,1,"\u89e3\u9501\u6a21\u5f0f13"),this.refreshBtns(),this.nodeAdvIcon13.active||u.default.markUnlockModeTime("video_unlock_mode13")):"video_unlock_mode14"==n?(v.default.addItemAmount(32,1,"\u89e3\u9501\u6a21\u5f0f14"),this.refreshBtns(),this.nodeAdvIcon14.active||u.default.markUnlockModeTime("video_unlock_mode14")):"video_unlock_mode15"==n?(v.default.addItemAmount(33,1,"\u89e3\u9501\u6a21\u5f0f15"),this.refreshBtns(),this.nodeAdvIcon15.active||u.default.markUnlockModeTime("video_unlock_mode15")):"video_unlock_mode16"==n?(v.default.addItemAmount(34,1,"\u89e3\u9501\u6a21\u5f0f16"),this.refreshBtns(),this.nodeAdvIcon16.active||u.default.markUnlockModeTime("video_unlock_mode16")):"video_unlock_mode17"==n?(v.default.addItemAmount(35,1,"\u89e3\u9501\u6a21\u5f0f17"),this.refreshBtns(),this.nodeAdvIcon17.active||u.default.markUnlockModeTime("video_unlock_mode17")):"video_unlock_mode18"==n?(v.default.addItemAmount(36,1,"\u89e3\u9501\u6a21\u5f0f18"),this.refreshBtns(),this.nodeAdvIcon18.active||u.default.markUnlockModeTime("video_unlock_mode18")):"video_unlock_mode19"==n?(v.default.addItemAmount(37,1,"\u89e3\u9501\u6a21\u5f0f19"),this.refreshBtns(),this.nodeAdvIcon19.active||u.default.markUnlockModeTime("video_unlock_mode19")):"video_unlock_mode20"==n?(v.default.addItemAmount(38,1,"\u89e3\u9501\u6a21\u5f0f20"),this.refreshBtns(),this.nodeAdvIcon20.active||u.default.markUnlockModeTime("video_unlock_mode20")):"video_unlock_mode21"==n?(v.default.addItemAmount(39,1,"\u89e3\u9501\u6a21\u5f0f21"),this.refreshBtns(),this.nodeAdvIcon21.active||u.default.markUnlockModeTime("video_unlock_mode21")):"video_unlock_mode22"==n?(v.default.addItemAmount(40,1,"\u89e3\u9501\u6a21\u5f0f22"),this.refreshBtns(),this.nodeAdvIcon22.active||u.default.markUnlockModeTime("video_unlock_mode22")):"video_unlock_mode23"==n?(v.default.addItemAmount(41,1,"\u89e3\u9501\u6a21\u5f0f23"),this.refreshBtns(),this.nodeAdvIcon23.active||u.default.markUnlockModeTime("video_unlock_mode23")):"video_unlock_mode24"==n?(v.default.addItemAmount(42,1,"\u89e3\u9501\u6a21\u5f0f24"),this.refreshBtns(),this.nodeAdvIcon24.active||u.default.markUnlockModeTime("video_unlock_mode24")):"video_unlock_mode25"==n?(v.default.addItemAmount(43,1,"\u89e3\u9501\u6a21\u5f0f25"),this.refreshBtns(),this.nodeAdvIcon25.active||u.default.markUnlockModeTime("video_unlock_mode25")):"video_unlock_mode26"==n?(v.default.addItemAmount(44,1,"\u89e3\u9501\u6a21\u5f0f26"),this.refreshBtns(),this.nodeAdvIcon26.active||u.default.markUnlockModeTime("video_unlock_mode26")):"video_unlock_mode27"==n?(v.default.addItemAmount(45,1,"\u89e3\u9501\u6a21\u5f0f27"),this.refreshBtns(),this.nodeAdvIcon27.active||u.default.markUnlockModeTime("video_unlock_mode27")):"video_unlock_mode28"==n?(v.default.addItemAmount(46,1,"\u89e3\u9501\u6a21\u5f0f28"),this.refreshBtns(),this.nodeAdvIcon28.active||u.default.markUnlockModeTime("video_unlock_mode28")):"video_unlock_mode29"==n?(v.default.addItemAmount(47,1,"\u89e3\u9501\u6a21\u5f0f29"),this.refreshBtns(),this.nodeAdvIcon29.active||u.default.markUnlockModeTime("video_unlock_mode29")):"video_unlock_mode30"==n?(v.default.addItemAmount(48,1,"\u89e3\u9501\u6a21\u5f0f30"),this.refreshBtns(),this.nodeAdvIcon30.active||u.default.markUnlockModeTime("video_unlock_mode30")):"video_unlock_mode31"==n&&(v.default.addItemAmount(49,1,"\u89e3\u9501\u6a21\u5f0f31"),this.refreshBtns(),this.nodeAdvIcon31.active||u.default.markUnlockModeTime("video_unlock_mode31"))),l.default.callLater(.5,function(){t.refreshBtns()},this)},t.prototype.onMsgShareResult=function(e){e.bSuccessful&&(this._hadShare=!0,this.refreshBtns())},t.prototype.onMsgSdkShareVideoResult=function(){},t.prototype.onMsgVideoRecorderStateChange=function(){this.refreshVideoRecordState()},t.prototype.onMsgShortCutStateChanged=function(){this.refreshBtns()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.refreshBtns()},t.prototype.onMsgChannelInfoResult=function(){this.refreshBtns()},t.prototype.onMsgSdkBaseChannelInfoChanged=function(){this.refreshLogo()},t.prototype.onMsgOnKeyDown=function(e){"m"==e&&this.gameMode},t}(c.default);r.default=I,cc._RF.pop()},{}],vInstallShortCutComfirmDialog:[function(e,t,i){"use strict";cc._RF.push(t,"ca6b3lEvB9HFbYXyEFiBWMs","vInstallShortCutComfirmDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrSdk"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonOK=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vInstallShortCutComfirmDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_buttonOK:[s.default,"onTouchButtonOK"]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonOK=function(e){e.isClick()&&d.default.installShortcut()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.closeDialog()},t}(l.default);r.default=c,cc._RF.pop()},{}],vJumpOtherGameSingle:[function(e,t,i){"use strict";cc._RF.push(t,"8582a+UUJBAVKfFAZ4YagON","vJumpOtherGameSingle");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Tools"),d=o("ViewBase"),c=o("mgrSdk"),u=function(e){function t(t,i){void 0===t&&(t=!0),void 0===i&&(i=0);var n=e.call(this)||this;return n.buttonIcon=null,n.spriteIcon=null,n.gameIndex="",n.bRandomIcon=t,n.iconIndex=i,n}return a(t,e),t.prototype._getResourceName=function(){return"node/vJumpOtherGameSingle"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonIcon:[s.default,"onTouchButtonIcon"],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_SDK_OPEN_JUMP_RESULT:this.onMsgSdkOpenJumpResult}),this.repeatAction()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.repeatAction=function(){this.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1.5),cc.rotateTo(.125,15).easing(cc.easeOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.125,0).easing(cc.easeIn(1.5)),cc.delayTime(2),cc.callFunc(function(){}))))},t.prototype.fillData=function(e){if(e&&0!=e.length){var t=e[l.default.random(0,e.length-1)];t&&(this.gameIndex=t.index,t.url?this.spriteIcon.loadSpriteFrameAndKeepSize(t.url):this.spriteIcon.spriteFrame=null)}},t.prototype.onTouchButtonIcon=function(e){e.isClick()&&this.gameIndex&&c.default.jumpOtherGame(this.gameIndex,"single")},t.prototype.onMsgSdkOpenJumpResult=function(e){"list"==e.type&&this.fillData(e.jumpInfo)},t}(d.default);r.default=u,cc._RF.pop()},{}],vJumpOtherGame:[function(e,t,i){"use strict";cc._RF.push(t,"94ff7qoaPxMy5S5GpaP7ktn","vJumpOtherGame");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("ViewBase"),d=o("Const"),c=o("mgrSdk"),u=function(e){function t(){var t=e.call(this)||this;return t.buttonIcon=null,t.spriteIcon=null,t.gameIndex="",t}return a(t,e),t.prototype._getResourceName=function(){return"node/vJumpOtherGame"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonIcon:[s.default,"onTouchButtonIcon"],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_SDK_OPEN_JUMP_RESULT:this.onMsgSdkOpenJumpResult}),this.changeIndex(),this.repeatAction()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.repeatAction=function(){var e=this;this.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1.5),cc.rotateTo(.125,15).easing(cc.easeOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.125,0).easing(cc.easeIn(1.5)),cc.delayTime(2),cc.callFunc(function(){e.changeIndex()}))))},t.prototype.changeIndex=function(){c.default.openJump(""+d.default.gameId,"single")},t.prototype.fillData=function(e){if(e&&0!=e.length){var t=e[0];t&&(this.gameIndex=t.index,t.url?this.spriteIcon.loadSpriteFrameAndKeepSize(t.url):this.spriteIcon.spriteFrame=null)}},t.prototype.onTouchButtonIcon=function(e){e.isClick()&&this.gameIndex&&c.default.jumpOtherGame(this.gameIndex,"single")},t.prototype.onMsgSdkOpenJumpResult=function(e){"single"==e.type&&this.fillData(e.jumpInfo)},t}(l.default);r.default=u,cc._RF.pop()},{}],vLevelBar:[function(e,t,i){"use strict";cc._RF.push(t,"f87e2eS/4NPPYnhCtVcVVe5","vLevelBar");var n,o=i,r=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,d=(s.property,function(e){function t(){var t=e.call(this)||this;return t.maxLevel=5,t.curLevel=5,t.space=0,t.itemPath="2d/icon/common/flower",t.layoutStyle=cc.Layout.Type.HORIZONTAL,t.levelSprites={},t}return r(t,e),t.prototype.setItemPath=function(e){this.itemPath=e},t.prototype.setLevel=function(e,t){this.maxLevel=e,this.curLevel=t,this.generate()},t.prototype.setLayoutStyle=function(e){this.layoutStyle=e},t.prototype.setSpace=function(e){this.space=e},t.prototype.generate=function(){for(var e=0;e<this.maxLevel;e++)null==(n=this.levelSprites[e])&&((n=new cc.Node).parent=this,this.levelSprites[e]=n,n.addComponent(cc.Sprite).loadSpriteFrame(this.itemPath));var t=this.getComponent(cc.Layout);null==t&&((t=this.addComponent(cc.Layout)).type=this.layoutStyle,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.layoutStyle==cc.Layout.Type.HORIZONTAL?t.spacingX=this.space:t.spacingY=this.space,this.setAnchorPoint(.5,.5));for(var i=this.maxLevel;i>0;i--){var n=this.levelSprites[i-1];i>this.curLevel?n.active=!1:n.active=!0}t.updateLayout()},a([l],t)}(cc.Node));o.default=d,cc._RF.pop()},{}],vLoadingScene:[function(e,t,i){"use strict";cc._RF.push(t,"a4eb2KLAtNH1L/gNfF/rXug","vLoadingScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("Manager"),c=o("UpdaterScript"),u=o("Tools"),h=o("SceneBase"),p=o("ViewBase"),f=o("ULSDK"),g=o("mgrCfg"),v=o("mgrDirector"),_=o("mgrSdk"),y=o("mgrSound"),m=o("mgrTip"),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAgeTip=null,t.labelProgress=null,t.nodeInformation=null,t.nodeLogo1=null,t.nodeLogo2=null,t.nodeLogo3=null,t.nodeLogo4=null,t.nodeLogo5=null,t.nodeLogo6=null,t.nodeLogoRoot=null,t.nodeMask=null,t.nodeProgress=null,t.nodeWordTip=null,t._bH5=!1,t._bStartedGame=!1,t._bEnteredGame=!1,t._bFinishCount=0,t}return a(t,e),t.prototype._getResourceName=function(){return"scene/vLoadingScene"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAgeTip:[l.default,"onTouchButtonAgeTip"],CC_labelProgress:[cc.Label],CC_nodeInformation:[cc.Node],CC_nodeLogo1:[cc.Node],CC_nodeLogo2:[cc.Node],CC_nodeLogo3:[cc.Node],CC_nodeLogo4:[cc.Node],CC_nodeLogo5:[cc.Node],CC_nodeLogo6:[cc.Node],CC_nodeLogoRoot:[cc.Node],CC_nodeMask:[cc.Node],CC_nodeProgress:[cc.Node],CC_nodeWordTip:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult}),this.nodeMask.active=!1,this.nodeInformation.active=!1,this.refreshLogo(),this.refreshInfo(),this.initUiByBaseChannelInfo()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.uiFadeIn=function(e){if(this.nodeProgress.x=-v.default.fullWidth/2-this.nodeProgress.width/2,this.nodeLogoRoot){var t=this.nodeLogoRoot.y;this.nodeLogoRoot.y=t+v.default.fullHeight,cc.tween(this.nodeLogoRoot).to(.3,{y:t},{easing:cc.easing.backOut}).call(function(){e&&e()}).start()}},t.prototype.initUiByBaseChannelInfo=function(){var e=_.default.getLocalConfig();if(e){var t=!!e.ageLevelInfo;this.buttonAgeTip.node.active=t||!1,this.nodeInformation.active=!!e.licenceInfo,this.nodeInformation.getComponent(cc.Label).string=e.licenceInfo}},t.prototype.refreshLogo=function(){var e=this,t=_.default.getLocalConfig();console.warn("vLoadingScene.refreshLogo",t),this.nodeLogo1.active=!1,this.nodeLogo2.active=!1,this.nodeLogo3.active=!1,this.nodeLogo4.active=!1,this.nodeLogo5.active=!1,this.nodeLogo6.active=!1,t&&("\u53ec\u5524\u795e\u9f99\u8fdb\u5316"==t.gameName?this.nodeLogo1.active=!0:"\u53ec\u5524\u795e\u9f99\u8fdb\u5316\u7248"==t.gameName?this.nodeLogo2.active=!0:"\u8d85\u7ea7\u795e\u9f99\u8fdb\u5316\u7248"==t.gameName?this.nodeLogo3.active=!0:"\u5929\u5929\u795e\u9f99"==t.gameName?this.nodeLogo4.active=!0:"\u795e\u9f99\u541e\u98df\u8fdb\u5316"==t.gameName?this.nodeLogo5.active=!0:"\u8fdb\u5316\u5408\u6210\u795e\u9f99"==t.gameName&&(this.nodeLogo6.active=!0),this.uiFadeIn(function(){cc.sys.isNative&&t.platform!=f.Platform.H5?(e.labelProgress.string="",e.labelProgress.node.active=!0,new c.default(e,e.onUiMsg.bind(e)).startUpdate()):(e._bH5=!0,e.labelProgress.node.active=!1,e.beginLoading()),cc.tween(e.nodeProgress).to(.1,{x:v.default.fullWidth/2+e.nodeProgress.width/2}).call(function(){e.tryBegin()}).start()}))},t.prototype.refreshInfo=function(){var e=_.default.getLocalConfig();this.buttonAgeTip.node.active=!!e.ageLevelInfo,this.nodeInformation.active=!!e.licenceInfo,this.nodeInformation.getComponent(cc.Label).string=e.licenceInfo},t.prototype.beginLoading=function(){var e=this;this.context.beginTime=u.default.time();var t=g.default.getLoadUrls();cc.log("loadUrl length ",t.length);for(var i=0,n=function(n){var o=t[n];v.default.loadRes(o,cc.JsonAsset,function(){i++,cc.log("loadUrl url ",o),cc.log("loadUrl count ",i),i>=t.length&&(cc.log("loadUrl finish "),g.default.processDb(),d.default.loadAllManagers(),e.loadOthers())})},o=0;o<t.length;o++)n(o)},t.prototype.loadOthers=function(){var e=this,t=[{path:"2d/animation/defaultDialogOpen",assetType:cc.AnimationClip},{path:"2d/animation/defaultDialogClose",assetType:cc.AnimationClip},{path:"view/node/vNativeBanner",assetType:cc.Prefab},{path:"view/scene/vHubScene",assetType:cc.Prefab},{path:"view/scene/vGameScene",assetType:cc.Prefab},{path:"view/scene/vGameScene141",assetType:cc.Prefab},{path:"view/scene/vGameStringScene",assetType:cc.Prefab},{path:"2d/ui/ad/a01",assetType:cc.SpriteFrame},{path:"2d/ui/ad/a03",assetType:cc.SpriteFrame}];cc.log("loadOthers len ",t.length),v.default.preloadRess(t,function(){e.loadFinish()}),m.default.showLoadingTip("vloadingScene",null,0)},t.prototype.loadFinish=function(){m.default.hideLoadingTip("vloadingScene"),l.default.setSoundPlayHandler(function(){y.default.play(101)});var e=u.default.time()-this.context.beginTime;cc.log("loading finish, \u7528\u65f6 "+1e3*e+" ms"),_.default.onLoadingComplete(),this.tryBegin()},t.prototype.tryBegin=function(){this._bFinishCount++,this._bFinishCount>=2&&this.startGame()},t.prototype.startGame=function(){this._bStartedGame||(this._bStartedGame=!0,this.startSplash())},t.prototype.startSplash=function(){this.labelProgress.node.active=!1,_.default.baseChannelInfo&&_.default.baseChannelInfo.bStartGameByTouch?(this.nodeMask.active=!0,this.nodeWordTip.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1),cc.fadeOut(.5),cc.fadeIn(.5),cc.delayTime(2)))),u.default.registerTouchHandler(this.nodeMask,this.onTouchHandler.bind(this))):this.splashEnterGame()},t.prototype.splashEnterGame=function(){this._bEnteredGame||(this._bEnteredGame=!0,_.default.getShortcutState(),v.default.warpSceneWithEffect("vHubScene"),y.default.play(1))},t.prototype.onTouchHandler=function(e){"ended"==e.name&&(u.default.unregisterTouchHandler(this.nodeMask),this.nodeMask.active=!1,this.splashEnterGame())},t.prototype.onTouchButtonAgeTip=function(e){e.isClick()&&v.default.openDialog("vAgeTipDialog")},t.prototype.onMsgChannelInfoResult=function(){},t.prototype.onSdkBaseChangeInfo=function(){},t.prototype.onUiMsg=function(e,t){if("UPDATER_UI_MSG_GET_VERSION"==e)this.labelProgress.string="\u51c6\u5907\u4e2d...";else if("UPDATER_UI_MSG_DOWNLOAD_PROGRESS"==e){if(!t)return;var i=cc.misc.clampf(t.bytePercent||0,0,1),n=(cc.misc.clampf(t.filePercent||0,0,1),t.patchCount||1),o=t.patchIdx||0;cc.misc.clampf((i+o)/(n||1),0,1),this.labelProgress.string="\u821e\u53f0\u5efa\u8bbe\u4e2d..."}else"UPDATER_UI_MSG_DOWNLOAD_SUCCESS"==e?this.labelProgress.string="\u51c6\u5907\u5b8c\u6210":"UPDATER_UI_MSG_ENTER_NEXT_SCENE"==e?this.beginLoading():"UPDATER_UI_MSG_PLAY_LOGO_BEGIN"==e?this.nodeResource.active=!1:"UPDATER_UI_MSG_PLAY_LOGO_END"==e&&(this.nodeResource.active=!0)},t.prototype.onMsgSdkBaseChannelInfoChanged=function(e){var t=e.baseChannelInfo,i=t.isShowAgeLevelInfo;this.buttonAgeTip.node.active=!!i,this.nodeInformation.active=t.isShowLicenceInfo,this.nodeInformation.getComponent(cc.Label).string=t.licenceInfo,this.refreshLogo()},s([p.default.requireResourceLoaded],t.prototype,"initUiByBaseChannelInfo",null),s([p.default.requireResourceLoaded],t.prototype,"refreshLogo",null),s([p.default.requireResourceLoaded],t.prototype,"refreshInfo",null),t}(h.default);r.default=S,cc._RF.pop()},{}],vLoadingTip:[function(e,t,i){"use strict";cc._RF.push(t,"2d9ddglrD5HyL/b1zLLaLmL","vLoadingTip");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelText=null,t.nodeBg=null,t.nodeMid=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vLoadingTip"},t.prototype._getResourceBindingConfig=function(){return{CC_labelText:[cc.Label],CC_nodeBg:[cc.Node],CC_nodeMid:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){var e=this;this.labelText.string="\u52a0\u8f7d\u4e2d",this.nodeBg.opacity=this.context.opacity,cc.tween(this.labelText.node).call(function(){e.labelText.string="\u52a0\u8f7d\u4e2d"}).delay(.5).call(function(){e.labelText.string="\u52a0\u8f7d\u4e2d."}).delay(.5).call(function(){e.labelText.string="\u52a0\u8f7d\u4e2d.."}).delay(.5).call(function(){e.labelText.string="\u52a0\u8f7d\u4e2d..."}).delay(.5).union().repeatForever().start(),this.nodeMid.runAction(cc.repeatForever(cc.rotateBy(3,360)))},t.prototype.setText=function(){},t}(o("ViewBase").default);r.default=s,cc._RF.pop()},{}],vMark:[function(e,t,i){"use strict";cc._RF.push(t,"fd723UmBTpHV5u37EQQBUDy","vMark");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ViewBase"),d=o("CustomTween"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeRedPoint=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vMark"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeRedPoint:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),d.default.scaleForever(this,.5,.1),this.refreshCount()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.setCount=function(e){this.context.count=e,this.isResourceLoaded()&&this.refreshCount()},t.prototype.refreshCount=function(){},s([u],t)}(l.default));r.default=h,cc._RF.pop()},{}],vMoreModeDialog:[function(e,t,i){"use strict";cc._RF.push(t,"72f0dgLJqBEV7CYkLv7dnBu","vMoreModeDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrAd"),c=o("mgrCop"),u=o("mgrPlayer"),h=o("mgrSdk"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBegin10=null,t.buttonBegin11=null,t.buttonBegin12=null,t.buttonBegin13=null,t.buttonBegin14=null,t.buttonBegin15=null,t.buttonBegin16=null,t.buttonBegin17=null,t.buttonBegin18=null,t.buttonBegin19=null,t.buttonBegin20=null,t.buttonBegin21=null,t.buttonBegin22=null,t.buttonBegin23=null,t.buttonBegin24=null,t.buttonBegin25=null,t.buttonBegin26=null,t.buttonBegin27=null,t.buttonBegin28=null,t.buttonBegin29=null,t.buttonBegin3=null,t.buttonBegin30=null,t.buttonBegin31=null,t.buttonBegin4=null,t.buttonBegin5=null,t.buttonBegin6=null,t.buttonBegin7=null,t.buttonBegin8=null,t.buttonBegin9=null,t.buttonBeginAd1=null,t.buttonClose=null,t.labelCount1=null,t.labelCount11=null,t.labelCount12=null,t.labelCount13=null,t.labelCount14=null,t.labelCount15=null,t.labelCount16=null,t.labelCount17=null,t.labelCount18=null,t.labelCount19=null,t.labelCount2=null,t.labelCount20=null,t.labelCount21=null,t.labelCount22=null,t.labelCount23=null,t.labelCount24=null,t.labelCount25=null,t.labelCount26=null,t.labelCount27=null,t.labelCount28=null,t.labelCount29=null,t.labelCount3=null,t.labelCount30=null,t.labelCount31=null,t.labelCount4=null,t.labelCount5=null,t.labelCount6=null,t.labelCount7=null,t.labelCount8=null,t.labelCount9=null,t.labelTitle=null,t.nodeAdvIcon1=null,t.nodeAdvIcon11=null,t.nodeAdvIcon12=null,t.nodeAdvIcon13=null,t.nodeAdvIcon14=null,t.nodeAdvIcon15=null,t.nodeAdvIcon16=null,t.nodeAdvIcon17=null,t.nodeAdvIcon18=null,t.nodeAdvIcon19=null,t.nodeAdvIcon2=null,t.nodeAdvIcon20=null,t.nodeAdvIcon21=null,t.nodeAdvIcon22=null,t.nodeAdvIcon23=null,t.nodeAdvIcon24=null,t.nodeAdvIcon25=null,t.nodeAdvIcon26=null,t.nodeAdvIcon27=null,t.nodeAdvIcon28=null,t.nodeAdvIcon29=null,t.nodeAdvIcon3=null,t.nodeAdvIcon30=null,t.nodeAdvIcon31=null,t.nodeAdvIcon4=null,t.nodeAdvIcon5=null,t.nodeAdvIcon6=null,t.nodeAdvIcon7=null,t.nodeAdvIcon8=null,t.nodeAdvIcon9=null,t.nodeBegin1=null,t.nodeBegin11=null,t.nodeBegin12=null,t.nodeBegin13=null,t.nodeBegin14=null,t.nodeBegin15=null,t.nodeBegin16=null,t.nodeBegin17=null,t.nodeBegin18=null,t.nodeBegin19=null,t.nodeBegin2=null,t.nodeBegin20=null,t.nodeBegin21=null,t.nodeBegin22=null,t.nodeBegin23=null,t.nodeBegin24=null,t.nodeBegin25=null,t.nodeBegin26=null,t.nodeBegin27=null,t.nodeBegin28=null,t.nodeBegin29=null,t.nodeBegin3=null,t.nodeBegin30=null,t.nodeBegin31=null,t.nodeBegin4=null,t.nodeBegin5=null,t.nodeBegin6=null,t.nodeBegin7=null,t.nodeBegin8=null,t.nodeBegin9=null,t.nodeBtnBegin=null,t.nodeJumpOtherGame=null,t.scrollViewBtn=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vMoreModeDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBegin10:[s.default,"onTouchButtonBegin10"],CC_buttonBegin11:[s.default,"onTouchButtonBegin11"],CC_buttonBegin12:[s.default,"onTouchButtonBegin12"],CC_buttonBegin13:[s.default,"onTouchButtonBegin13"],CC_buttonBegin14:[s.default,"onTouchButtonBegin14"],CC_buttonBegin15:[s.default,"onTouchButtonBegin15"],CC_buttonBegin16:[s.default,"onTouchButtonBegin16"],CC_buttonBegin17:[s.default,"onTouchButtonBegin17"],CC_buttonBegin18:[s.default,"onTouchButtonBegin18"],CC_buttonBegin19:[s.default,"onTouchButtonBegin19"],CC_buttonBegin20:[s.default,"onTouchButtonBegin20"],CC_buttonBegin21:[s.default,"onTouchButtonBegin21"],CC_buttonBegin22:[s.default,"onTouchButtonBegin22"],CC_buttonBegin23:[s.default,"onTouchButtonBegin23"],CC_buttonBegin24:[s.default,"onTouchButtonBegin24"],CC_buttonBegin25:[s.default,"onTouchButtonBegin25"],CC_buttonBegin26:[s.default,"onTouchButtonBegin26"],CC_buttonBegin27:[s.default,"onTouchButtonBegin27"],CC_buttonBegin28:[s.default,"onTouchButtonBegin28"],CC_buttonBegin29:[s.default,"onTouchButtonBegin29"],CC_buttonBegin3:[s.default,"onTouchButtonBegin3"],CC_buttonBegin30:[s.default,"onTouchButtonBegin30"],CC_buttonBegin31:[s.default,"onTouchButtonBegin31"],CC_buttonBegin4:[s.default,"onTouchButtonBegin4"],CC_buttonBegin5:[s.default,"onTouchButtonBegin5"],CC_buttonBegin6:[s.default,"onTouchButtonBegin6"],CC_buttonBegin7:[s.default,"onTouchButtonBegin7"],CC_buttonBegin8:[s.default,"onTouchButtonBegin8"],CC_buttonBegin9:[s.default,"onTouchButtonBegin9"],CC_buttonBeginAd1:[s.default,"onTouchButtonBeginAd1"],CC_buttonClose:[s.default,"onTouchButtonClose"],CC_labelCount1:[cc.Label],CC_labelCount11:[cc.Label],CC_labelCount12:[cc.Label],CC_labelCount13:[cc.Label],CC_labelCount14:[cc.Label],CC_labelCount15:[cc.Label],CC_labelCount16:[cc.Label],CC_labelCount17:[cc.Label],CC_labelCount18:[cc.Label],CC_labelCount19:[cc.Label],CC_labelCount2:[cc.Label],CC_labelCount20:[cc.Label],CC_labelCount21:[cc.Label],CC_labelCount22:[cc.Label],CC_labelCount23:[cc.Label],CC_labelCount24:[cc.Label],CC_labelCount25:[cc.Label],CC_labelCount26:[cc.Label],CC_labelCount27:[cc.Label],CC_labelCount28:[cc.Label],CC_labelCount29:[cc.Label],CC_labelCount3:[cc.Label],CC_labelCount30:[cc.Label],CC_labelCount31:[cc.Label],CC_labelCount4:[cc.Label],CC_labelCount5:[cc.Label],CC_labelCount6:[cc.Label],CC_labelCount7:[cc.Label],CC_labelCount8:[cc.Label],CC_labelCount9:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeAdvIcon1:[cc.Node],CC_nodeAdvIcon11:[cc.Node],CC_nodeAdvIcon12:[cc.Node],CC_nodeAdvIcon13:[cc.Node],CC_nodeAdvIcon14:[cc.Node],CC_nodeAdvIcon15:[cc.Node],CC_nodeAdvIcon16:[cc.Node],CC_nodeAdvIcon17:[cc.Node],CC_nodeAdvIcon18:[cc.Node],CC_nodeAdvIcon19:[cc.Node],CC_nodeAdvIcon2:[cc.Node],CC_nodeAdvIcon20:[cc.Node],CC_nodeAdvIcon21:[cc.Node],CC_nodeAdvIcon22:[cc.Node],CC_nodeAdvIcon23:[cc.Node],CC_nodeAdvIcon24:[cc.Node],CC_nodeAdvIcon25:[cc.Node],CC_nodeAdvIcon26:[cc.Node],CC_nodeAdvIcon27:[cc.Node],CC_nodeAdvIcon28:[cc.Node],CC_nodeAdvIcon29:[cc.Node],CC_nodeAdvIcon3:[cc.Node],CC_nodeAdvIcon30:[cc.Node],CC_nodeAdvIcon31:[cc.Node],CC_nodeAdvIcon4:[cc.Node],CC_nodeAdvIcon5:[cc.Node],CC_nodeAdvIcon6:[cc.Node],CC_nodeAdvIcon7:[cc.Node],CC_nodeAdvIcon8:[cc.Node],CC_nodeAdvIcon9:[cc.Node],CC_nodeBegin1:[cc.Node],CC_nodeBegin11:[cc.Node],CC_nodeBegin12:[cc.Node],CC_nodeBegin13:[cc.Node],CC_nodeBegin14:[cc.Node],CC_nodeBegin15:[cc.Node],CC_nodeBegin16:[cc.Node],CC_nodeBegin17:[cc.Node],CC_nodeBegin18:[cc.Node],CC_nodeBegin19:[cc.Node],CC_nodeBegin2:[cc.Node],CC_nodeBegin20:[cc.Node],CC_nodeBegin21:[cc.Node],CC_nodeBegin22:[cc.Node],CC_nodeBegin23:[cc.Node],CC_nodeBegin24:[cc.Node],CC_nodeBegin25:[cc.Node],CC_nodeBegin26:[cc.Node],CC_nodeBegin27:[cc.Node],CC_nodeBegin28:[cc.Node],CC_nodeBegin29:[cc.Node],CC_nodeBegin3:[cc.Node],CC_nodeBegin30:[cc.Node],CC_nodeBegin31:[cc.Node],CC_nodeBegin4:[cc.Node],CC_nodeBegin5:[cc.Node],CC_nodeBegin6:[cc.Node],CC_nodeBegin7:[cc.Node],CC_nodeBegin8:[cc.Node],CC_nodeBegin9:[cc.Node],CC_nodeBtnBegin:[cc.Node],CC_nodeJumpOtherGame:[cc.Node],CC_scrollViewBtn:[cc.ScrollView]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),this.refreshBtns(),this.refreshPoint(),this.nodeBtnBegin.getComponent(cc.Layout).resizeMode=cc.Layout.ResizeMode.NONE},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.refreshBtns=function(){for(var e=this.context.hubScene.configArr.length,t=0;t<e;t++){var i=this.context.hubScene.configArr[t];this[i.btnName]&&(""!=i.adName&&(this[i.btnName].node.active=!!d.default.preCheckAdNoCd(i.adName)),""!=i.bShowBtnCopName&&c.default.getNumberValue(i.bShowBtnCopName)<=0&&(this[i.btnName].node.active=!1)),this[i.labelCount]&&(this[i.labelCount].string=u.default.getItemAmount(i.itemId)+"/"+c.default.getNumberValue(i.unlockCountCopName))}this.bUnlockButton()},t.prototype.refreshPoint=function(){for(var e=this.context.hubScene.configArr.length,t=0;t<e;t++){var i=this.context.hubScene.configArr[t];i.itemId<=0||u.default.getItemAmount(i.itemId)<c.default.getNumberValue(i.unlockCountCopName)&&h.default.statisVideoPointEvent(i.adName,1)}},t.prototype.bUnlockButton=function(){for(var e=this.context.hubScene.configArr.length,t=0;t<e;t++){var i=this.context.hubScene.configArr[t];null!=this[i.nodeAdvIcon]&&null!=this[i.labelCount]&&(u.default.getItemAmount(i.itemId)>=c.default.getNumberValue(i.unlockCountCopName)?(this[i.nodeAdvIcon].active=!1,this[i.labelCount].node.active=!1):(this[i.nodeAdvIcon].active=!0,this[i.labelCount].node.active=!0))}},t.prototype.onClickBeginBtn=function(e,t){this.context.hubScene[e](t)},t.prototype.onTouchButtonBeginAd1=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBeginAd1",e)},t.prototype.onTouchButtonBeginAd2=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBeginAd2",e)},t.prototype.onTouchButtonBegin3=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin3",e)},t.prototype.onTouchButtonBegin4=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin4",e)},t.prototype.onTouchButtonBegin5=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin5",e)},t.prototype.onTouchButtonBegin6=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin6",e)},t.prototype.onTouchButtonBegin7=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin7",e)},t.prototype.onTouchButtonBegin8=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin8",e)},t.prototype.onTouchButtonBegin9=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin9",e)},t.prototype.onTouchButtonBegin10=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin10",e)},t.prototype.onTouchButtonBegin11=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin11",e)},t.prototype.onTouchButtonBegin12=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin12",e)},t.prototype.onTouchButtonBegin13=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin13",e)},t.prototype.onTouchButtonBegin14=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin14",e)},t.prototype.onTouchButtonBegin15=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin15",e)},t.prototype.onTouchButtonBegin16=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin16",e)},t.prototype.onTouchButtonBegin17=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin17",e)},t.prototype.onTouchButtonBegin18=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin18",e)},t.prototype.onTouchButtonBegin19=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin19",e)},t.prototype.onTouchButtonBegin=function(e){e.isClick()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonBegin20=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin20",e)},t.prototype.onTouchButtonBegin21=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin21",e)},t.prototype.onTouchButtonBegin22=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin22",e)},t.prototype.onTouchButtonBegin23=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin23",e)},t.prototype.onTouchButtonBegin24=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin24",e)},t.prototype.onTouchButtonBegin25=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin25",e)},t.prototype.onTouchButtonBegin26=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin26",e)},t.prototype.onTouchButtonBegin27=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin27",e)},t.prototype.onTouchButtonBegin28=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin28",e)},t.prototype.onTouchButtonBegin29=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin29",e)},t.prototype.onTouchButtonBegin30=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin30",e)},t.prototype.onTouchButtonBegin31=function(e){e.isClick()&&this.onClickBeginBtn("onTouchButtonBegin31",e)},t.prototype.onMsgAdEventSuccessd=function(){this.refreshBtns()},t}(l.default);r.default=p,cc._RF.pop()},{}],vMsgTip:[function(e,t,i){"use strict";cc._RF.push(t,"89714dAk3pNcohO3hCJp5Yp","vMsgTip");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ViewBase"),d=o("mgrTip"),c=o("mgrDirector"),u=cc._decorator,h=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelContent=null,t.nodeBg=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vMsgTip"},t.prototype._getResourceBindingConfig=function(){return{CC_labelContent:[cc.Label],CC_nodeBg:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.nodeBg&&(this.nodeBg.width=this.labelContent.node.width+200)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){},t.prototype.fillData=function(){this.context.text&&this.setText(this.context.text),this.context.textColor&&this.setColorEx(this.context.textColor,this.context.outlineColor)},t.prototype.setText=function(e){this.context.text=e,this.isResourceLoaded()&&(this.labelContent.string=e,this.nodeBg.width=this.labelContent.node.width+200)},t.prototype.setColorEx=function(e,t){if(this.context.textColor=e,this.context.outlineColor=t,this.isResourceLoaded()){this.labelContent.node.color=e;var i=this.labelContent.getComponent(cc.LabelOutline);t?(i.enabled=!0,i.color=t):i.enabled=!1}},t.prototype.play=function(e,t){this.parent=d.default.getTipRootNode(),t=t||80;var i=e||c.default.center,n=cc.v2(i.x,i.y+t);i=this.parent.convertToNodeSpaceAR(i),n=this.parent.convertToNodeSpaceAR(n),this.setPosition(i),this.opacity=0,this.stopAllActions(),this.runAction(cc.spawn(cc.moveTo(1.8,n).easing(cc.easeOut(1.2)),cc.sequence(cc.fadeIn(.15).easing(cc.easeIn(2)),cc.delayTime(1.35),cc.fadeOut(.3),cc.destroySelf())))},s([h],t)}(l.default));r.default=p,cc._RF.pop()},{}],vNativeBanner:[function(e,t,i){"use strict";cc._RF.push(t,"fc263/Al9lIUYeliBi19laJ","vNativeBanner");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("ViewBase"),d=o("mgrAd"),c=o("mgrAdNative"),u=o("mgrBannerInt"),h=o("mgrCfg"),p=o("mgrDirector"),f=o("mgrSdk"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonGo=null,t.labelAdSource=null,t.labelDesc=null,t.labelTargetTitle=null,t.labelTitle=null,t.spriteIcon=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vNativeBanner"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_buttonGo:[s.default,"onTouchButtonGo"],CC_labelAdSource:[cc.Label],CC_labelDesc:[cc.Label],CC_labelTargetTitle:[cc.Label],CC_labelTitle:[cc.Label],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.width=p.default.width;var t=p.default.getBottomSurplusHeight(!0);this.originPos=cc.v2(0,-p.default.size.height/2-t),this.setPosition(this.originPos.x,this.originPos.y+this.getNativeExtraBtnOffsetY()),this.spriteIcon.node._orgSize=this.spriteIcon.node.getContentSize(),this.nodeResource.opacity=0,this.registerListeners({MSG_EXTRA_NATIVE_BANNER_CLICK:this.onMsgExtraNativeBannerClick})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.show=function(e,t){this.targetViewName=t,e&&""!=e?(this.nativeAdEventId=e,d.default.triggerAdEvent(e,null,!0),this.y=this.originPos.y+this.getNativeExtraBtnOffsetY()):(this.nativeAdEventId=null,this.y=-2e3),this.refreshBanner()},t.prototype.getNativeExtraBtnOffsetY=function(){if(!this.targetViewName)return 0;var e=h.default.get_from_ad_banner_int_ui_db(this.targetViewName);return e&&e.nativeExtraBtnCop&&1==f.default.getCopNumberValueByKey(e.nativeExtraBtnCop)?e.nativeExtraBtnOffsetY:0},t.prototype.refreshBanner=function(){this.nativeAdEventId&&(cc.log("------------------------refreshBanner-----------------"),cc.log("------------------------refreshBanner-----------------"),cc.log("------------------------refreshBanner-----------------"),cc.log("------------------------refreshBanner-----------------"),cc.log("------------------------refreshBanner-----------------"),cc.log("------------------------refreshBanner-----------------"),cc.log("------------------------refreshBanner-----------------"),cc.log("------------------------refreshBanner-----------------"),cc.log("------------------------refreshBanner-----------------"),cc.log("------------------------refreshBanner-----------------"),cc.log("------------------------refreshBanner-----------------"),cc.log("------------------------refreshBanner-----------------"),this.nativeDatas=c.default.getNativeDataByAdEventId(this.nativeAdEventId),this.refreBannerUI(this.nativeDatas))},t.prototype.refreBannerUI=function(e){if(e){if(this.labelTitle.string=e.title,this.labelDesc.string=e.desc,this.labelTargetTitle.string=e.targetTitle,this.spriteIcon.setSpriteFrameAndKeepSize(e.spriteFrame),this.spriteIcon.node.opacity=255,this.spriteIcon.node.stopAllActions(),this.spriteIcon.node.angle=0,this.nodeResource.opacity=255,this.labelAdSource.node.active=!0,this.labelAdSource.string=e.adSource||"",this.nodeResource.opacity<=0&&this.nodeResource.runAction(cc.fadeIn(.5)),e.spriteFrame&&e.spriteFrame.getOriginalSize){var t=this.spriteIcon.node._orgSize,i=t.height,n=t.width,o=e.spriteFrame.getOriginalSize(),r=o.width,a=o.height,s=n/r,l=i/a,d=Math.min(s,l);this.spriteIcon.node.setContentSize(cc.size(d*r,d*a))}this.y=this.originPos.y+this.getNativeExtraBtnOffsetY(),this.sendMsg("MSG_NATIVE_BAR_SHOW",{adEventId:this.nativeAdEventId,show:!0})}else this.labelTitle.string="",this.spriteIcon.node.opacity=0,this.labelDesc.string="",this.labelTargetTitle.string="",this.nodeResource.stopAllActions(),this.nodeResource.opacity=0,this.y=-2e3},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.sendMsg("MSG_NATIVE_BAR_SHOW",{adEventId:this.nativeAdEventId,show:!1}),this.sendMsg("MSG_USER_CLOSE_NATIVE_BANNER",{viewName:this.targetViewName}),u.default.closeBannerOnce(!0))},t.prototype.onTouchButtonGo=function(e){e.isClick()&&(c.default.clickNative(this.nativeAdEventId),this.sendMsg("MSG_NATIVE_BAR_SHOW",{adEventId:this.nativeAdEventId,show:!1}))},t.prototype.onMsgExtraNativeBannerClick=function(){c.default.clickNative(this.nativeAdEventId)},t}(l.default);r.default=g,cc._RF.pop()},{}],vNativeDialog:[function(e,t,i){"use strict";cc._RF.push(t,"398ab1/i3VBG7VenmSxf1wu","vNativeDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrAdNative"),c=o("mgrSdk"),u=o("mgrTip"),h=function(e){function t(t){var i=e.call(this,t)||this;return i.buttonClose=null,i.buttonContent=null,i.buttonContentSmall=null,i.buttonFullScreen=null,i.buttonGo=null,i.labelAdSource=null,i.labelDesc=null,i.labelTargetTitle=null,i.labelTitle=null,i.spriteButtonClose=null,i.spriteIcon=null,i.context.bImmediately=!0,i}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vNativeDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_buttonContent:[s.default,"onTouchButtonContent"],CC_buttonContentSmall:[s.default,"onTouchButtonContentSmall"],CC_buttonFullScreen:[s.default,"onTouchButtonFullScreen"],CC_buttonGo:[s.default,"onTouchButtonGo"],CC_labelAdSource:[cc.Label],CC_labelDesc:[cc.Label],CC_labelTargetTitle:[cc.Label],CC_labelTitle:[cc.Label],CC_spriteButtonClose:[cc.Sprite],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.adEventId=this.context.adEventId,this.userData=this.context.userData,this.spriteIcon.node._orgSize=this.spriteIcon.node.getContentSize(),this.nodeResource.active=!1,this.fillData(),this.registerListeners({MSG_NATIVE_AD_SDK_CLICK_SUCCESS:this.onMsgNativeAdSdkClickSuccess})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),d.default.onNativeAdViewClenup(this.context.adEventId)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.fillData=function(){var e=d.default.getNativeDataByAdEventId(this.adEventId);if(e){if(this.nodeResource.active=!0,this.labelTitle.string=e.title,this.labelDesc.string=e.desc,this.labelTargetTitle.string=e.targetTitle,this.labelAdSource.string=e.adSource||"",e.spriteFrame){this.spriteIcon.setSpriteFrameAndKeepSize(e.spriteFrame),this.spriteIcon.node.stopAllActions(),this.spriteIcon.node.angle=0;var t=this.spriteIcon.node._orgSize,i=t.height,n=t.width,o=e.spriteFrame.getOriginalSize(),r=o.width,a=o.height,s=n/r,l=i/a,u=Math.min(s,l);this.spriteIcon.node.setContentSize(cc.size(u*r,u*a))}}else console.log("\u53d1\u751f\u4e86\u4e0d\u53ef\u9884\u77e5\u7684\u9519\u8bef, \u8fd9\u4e2a\u4e0d\u5e94\u8be5\u5f39\u51fa\u7684!!!"),this.closeDialog(!0);var h=c.default.getCopNumberValueByKey("native_insert_mode");this.buttonContent.node.active=2==h,this.buttonFullScreen.node.active=3==h,this.buttonContentSmall.node.active=4==h},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonContent=function(e){e.isClick()&&d.default.clickNative(this.adEventId)},t.prototype.onTouchButtonFullScreen=function(e){e.isClick()&&d.default.clickNative(this.adEventId)},t.prototype.onTouchButtonGo=function(e){e.isClick()&&d.default.clickNative(this.adEventId)},t.prototype.onTouchButtonContentSmall=function(e){e.isClick()&&d.default.clickNative(this.adEventId)},t.prototype.onMsgNativeAdSdkClickSuccess=function(){u.default.showMsgTip("\u8c22\u8c22!"),this.closeDialog()},t}(l.default);r.default=h,cc._RF.pop()},{}],vPreviewGameBoxDialog:[function(e,t,i){"use strict";cc._RF.push(t,"b1afcPlMO1K3r417m7gaH2A","vPreviewGameBoxDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrChannel"),c=o("mgrDirector"),u=o("mgrSdk"),h=o("mgrTip"),p=o("vJumpOtherGameSingle"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.nodeBtnClose=null,t.nodeGird=null,t.nodeLeft=null,t.nodeLeftBanner=null,t.nodeLeftJumpOtherGame=null,t.nodeRight=null,t.nodeRightBanner=null,t.nodeRightJumpOtherGame=null,t.nodeRole=null,t.nodeRoleParent=null,t.spriteBg=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vPreviewGameBoxDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_nodeBtnClose:[cc.Node],CC_nodeGird:[cc.Node],CC_nodeLeft:[cc.Node],CC_nodeLeftBanner:[cc.Node],CC_nodeLeftJumpOtherGame:[cc.Node],CC_nodeRight:[cc.Node],CC_nodeRightBanner:[cc.Node],CC_nodeRightJumpOtherGame:[cc.Node],CC_nodeRole:[cc.Node],CC_nodeRoleParent:[cc.Node],CC_spriteBg:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.init(),h.default.showJumpOtherGameBanner(this,new cc.Vec2(0,50)),d.default.canGameInterPush4()&&(u.default.openGrid(.01,.8,"game_left_box","list"),u.default.openGrid(.8,.8,"game_right_box","list"))},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeGridAd("list"),u.default.closeGridAd("table"),u.default.closeGridAd("list"),this.sendMsg("MSG_HUB_SHOW_DIALOG")},t.prototype.init=function(){this.nodeLeft.x=-c.default.width/2,this.nodeRight.x=c.default.width/2,this.nodeRole.active=!0;var e=d.default.canGameInterPush1();this.nodeLeftJumpOtherGame.active=e,this.nodeRightJumpOtherGame.active=e,e&&0==this.nodeLeftJumpOtherGame.children.length&&((new p.default).parent=this.nodeLeftJumpOtherGame),e&&0==this.nodeRightJumpOtherGame.children.length&&((new p.default).parent=this.nodeRightJumpOtherGame)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t}(l.default);r.default=f,cc._RF.pop()},{}],vPromptDialogWithNativeBannerButton:[function(e,t,i){"use strict";cc._RF.push(t,"b364eaBfphFYLq0pLvPOpaW","vPromptDialogWithNativeBannerButton");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("DialogBase"),c=o("ViewBase"),u=o("mgrBannerInt"),h=o("mgrChannel"),p=o("vJumpOtherGame"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button2GrayPack=null,t.buttonClose=null,t.buttonNative=null,t.labelBtn2GrayPack=null,t.labelContent=null,t.nodeBtnNative=null,t.nodeBtnsGrayPack=null,t.nodeJumpOtherGame=null,t.spriteAdGrayPack=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptDialogWithNativeBannerButton"},t.prototype._getResourceBindingConfig=function(){return{CC_button2GrayPack:[l.default,"onTouchButton2GrayPack"],CC_buttonClose:[l.default,"onTouchButtonClose"],CC_buttonNative:[l.default,"onTouchButtonNative"],CC_labelBtn2GrayPack:[cc.Label],CC_labelContent:[cc.Label],CC_nodeBtnNative:[cc.Node],CC_nodeBtnsGrayPack:[cc.Node],CC_nodeJumpOtherGame:[cc.Node],CC_spriteAdGrayPack:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.nodeBtnNative.active=u.default.isNativeBannerShowing(),this.registerListeners({MSG_NATIVE_BAR_SHOW:this.onMsgNativeBar})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){var e=this.context.content||"\u5185\u5bb9",t=this.context.btnText||"",i=this.button2GrayPack.node;this.labelContent.string=""+e,this.labelBtn2GrayPack.string=""+t,this.spriteAdGrayPack.node.active=this.context.bAd,""==t?(i.active=!1,this.nodeBtnNative.setPosition(0,this.nodeBtnNative.getPosition().y)):i.active=!0,this.nodeJumpOtherGame.active=h.default.canGameInterPush1(12),this.nodeJumpOtherGame.active&&0==this.nodeJumpOtherGame.children.length&&((new p.default).parent=this.nodeJumpOtherGame)},t.prototype.onTouchButton2GrayPack=function(e){if(e.isClick()){var t=this.context.callback;null!=t&&t()||this.closeDialog()}},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonNative=function(e){e.isClick()&&(this.nodeBtnNative.active=!1,this.sendMsg("MSG_EXTRA_NATIVE_BANNER_CLICK"))},t.prototype.onMsgNativeBar=function(e){this.nodeBtnNative.active=e.show},s([c.default.requireResourceLoaded],t.prototype,"fillData",null),t}(d.default);r.default=f,cc._RF.pop()},{}],vPromptDialog:[function(e,t,i){"use strict";cc._RF.push(t,"1ae53LpSWxJTYS5zS3gAoda","vPromptDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrChannel"),c=o("vJumpOtherGame"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.labelBtn2=null,t.labelContent=null,t.labelTitle=null,t.nodeBtns=null,t.nodeJumpOtherGame=null,t.spriteAd=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[s.default,"onTouchButton1"],CC_button2:[s.default,"onTouchButton2"],CC_labelBtn2:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeBtns:[cc.Node],CC_nodeJumpOtherGame:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelContent.string=this.context.content||"\u5185\u5bb9";var t=this.context.btnTexts||[],i=this.button1.node,n=i.getComponentInChildren(cc.Label),o=this.button2.node,r=this.labelBtn2;this.spriteAd.node.active=this.context.bAd;var a=t.length;0==a?(i.active=!1,o.active=!1):1==a?(i.active=!1,o.active=!0,r.string=t[0]):(i.active=!0,n.string=t[0],o.active=!0,r.string=t[1]),this.nodeJumpOtherGame.active=d.default.canGameInterPush1(2),this.nodeJumpOtherGame.active&&0==this.nodeJumpOtherGame.children.length&&((new c.default).parent=this.nodeJumpOtherGame)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return this.context.btnTexts.length<=0},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.triggerCallback=function(e){var t=(this.context.callbacks||[])[e];null!=t&&t()||this.closeDialog()},t.prototype.onTouchButton1=function(e){e.isClick()&&this.triggerCallback(0)},t.prototype.onTouchButton2=function(e){e.isClick()&&((this.context.btnTexts||[]).length>=2?this.triggerCallback(1):this.triggerCallback(0))},t.prototype.onTouchButton3=function(e){e.isClick()&&this.triggerCallback(2)},t}(l.default);r.default=u,cc._RF.pop()},{}],vPromptFishDialog:[function(e,t,i){"use strict";cc._RF.push(t,"e098euCmW5AyofcYA1iEZok","vPromptFishDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("DialogBase"),c=o("ViewBase"),u=o("Const"),h=o("mgrBannerInt"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrSdk"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.buttonNative=null,t.labelBtn2=null,t.labelContent=null,t.labelTitle=null,t.nodeBtnNative=null,t.nodeBtns=null,t.nodeJumpOtherGame=null,t.nodeWhole=null,t.spriteAd=null,t._bToBottom=!1,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptFishDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[l.default,"onTouchButton1"],CC_button2:[l.default,"onTouchButton2"],CC_buttonNative:[l.default,"onTouchButtonNative"],CC_labelBtn2:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeBtnNative:[cc.Node],CC_nodeBtns:[cc.Node],CC_nodeJumpOtherGame:[cc.Node],CC_nodeWhole:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){var t=this,i=g.default.getCopNumberValueByKey("btn_to_banner_recover_delay"),n=f.default.getGameSucToBottomInfo("b_btn_to_banner1"),o=n[0],r=n[1];o?r?i<=0?this._bToBottom=!1:(this._bToBottom=!0,cc.tween(this).delay(i).call(function(){t._bToBottom=!1,h.default.removeCustomDisableBannerViewName("vPromptFishDialog");var e=t.getDialogName();t.sendMsg("MSG_DIALOG_ONLOAD",{viewName:e,dialog:t,customUuid:t.getNodeCustomUuid(),zIndex:t.context.globalDialogzIndex||u.default.GLOBAL_ORDER_DIALOG,bDisableInt:t.context.bDisableInt}),t.refreshWhole()}).start()):this._bToBottom=!0:this._bToBottom=!1,this._bToBottom?h.default.addCustomDisableBannerViewName("vPromptFishDialog"):h.default.removeCustomDisableBannerViewName("vPromptFishDialog"),e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelContent.string=this.context.content||"\u5185\u5bb9";var t=this.context.btnTexts||[],i=this.button1.node,n=i.getComponentInChildren(cc.Label),o=this.button2.node,r=this.labelBtn2;this.spriteAd.node.active=this.context.bAd;var a=t.length;0==a?(i.active=!1,o.active=!1):1==a?(i.active=!1,o.active=!0,r.string=t[0]):(i.active=!0,n.string=t[0],o.active=!0,r.string=t[1]),this.refreshWhole(),this.nodeBtnNative.active=this.isCopNativeBannerOpen()&&h.default.isNativeBannerShowing(),this.registerListeners({MSG_NATIVE_BAR_SHOW:this.onMsgNativeBar})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return this.context.btnTexts.length<=0},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.refreshWhole=function(){this.nodeWhole.y=this._bToBottom?-400-(p.default.fullHeight/2-u.default.RESOLUTION_RANGE_ALLOW.minHeight/2):0},t.prototype.triggerCallback=function(e){var t=(this.context.callbacks||[])[e];null!=t&&t()||this.closeDialog()},t.prototype.onTouchButton1=function(e){e.isClick()&&this.triggerCallback(0)},t.prototype.onTouchButton2=function(e){e.isClick()&&((this.context.btnTexts||[]).length>=2?this.triggerCallback(1):this.triggerCallback(0))},t.prototype.onTouchButtonNative=function(e){e.isClick()&&(this.nodeBtnNative.active=!1,this.sendMsg("MSG_EXTRA_NATIVE_BANNER_CLICK"))},t.prototype.onMsgNativeBar=function(e){this.nodeBtnNative.active=e.show&&this.isCopNativeBannerOpen()},t.prototype.isCopNativeBannerOpen=function(){return 1==g.default.getCopNumberValueByKey("b_native_banner_button_show1")},s([c.default.requireResourceLoaded],t.prototype,"refreshWhole",null),t}(d.default);r.default=v,cc._RF.pop()},{}],vPromptFishXiuxianDialog:[function(e,t,i){"use strict";cc._RF.push(t,"4d5e1OzspdInq7kn6jjWwqb","vPromptFishXiuxianDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("DialogBase"),c=o("ViewBase"),u=o("Const"),h=o("mgrBannerInt"),p=o("mgrDirector"),f=o("mgrGame"),g=o("mgrSdk"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.buttonNative=null,t.labelBtn2=null,t.labelContent=null,t.labelTitle=null,t.nodeBtnNative=null,t.nodeBtns=null,t.nodeJumpOtherGame=null,t.nodeWhole=null,t.spriteAd=null,t._bToBottom=!1,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptFishXiuxianDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[l.default,"onTouchButton1"],CC_button2:[l.default,"onTouchButton2"],CC_buttonNative:[l.default,"onTouchButtonNative"],CC_labelBtn2:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeBtnNative:[cc.Node],CC_nodeBtns:[cc.Node],CC_nodeJumpOtherGame:[cc.Node],CC_nodeWhole:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){var t=this,i=g.default.getCopNumberValueByKey("btn_to_banner_recover_delay"),n=f.default.getGameSucToBottomInfo("b_btn_to_banner1"),o=n[0],r=n[1];o?r?i<=0?this._bToBottom=!1:(this._bToBottom=!0,cc.tween(this).delay(i).call(function(){t._bToBottom=!1,h.default.removeCustomDisableBannerViewName("vPromptFishXiuxianDialog");var e=t.getDialogName();t.sendMsg("MSG_DIALOG_ONLOAD",{viewName:e,dialog:t,customUuid:t.getNodeCustomUuid(),zIndex:t.context.globalDialogzIndex||u.default.GLOBAL_ORDER_DIALOG,bDisableInt:t.context.bDisableInt}),t.refreshWhole()}).start()):this._bToBottom=!0:this._bToBottom=!1,this._bToBottom?h.default.addCustomDisableBannerViewName("vPromptFishXiuxianDialog"):h.default.removeCustomDisableBannerViewName("vPromptFishXiuxianDialog"),e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelContent.string=this.context.content||"\u5185\u5bb9";var t=this.context.btnTexts||[],i=this.button1.node,n=i.getComponentInChildren(cc.Label),o=this.button2.node,r=this.labelBtn2;this.spriteAd.node.active=this.context.bAd;var a=t.length;0==a?(i.active=!1,o.active=!1):1==a?(i.active=!1,o.active=!0,r.string=t[0]):(i.active=!0,n.string=t[0],o.active=!0,r.string=t[1]),this.refreshWhole(),this.nodeBtnNative.active=this.isCopNativeBannerOpen()&&h.default.isNativeBannerShowing(),this.registerListeners({MSG_NATIVE_BAR_SHOW:this.onMsgNativeBar})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return this.context.btnTexts.length<=0},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.refreshWhole=function(){this.nodeWhole.y=this._bToBottom?-400-(p.default.fullHeight/2-u.default.RESOLUTION_RANGE_ALLOW.minHeight/2):0},t.prototype.triggerCallback=function(e){var t=(this.context.callbacks||[])[e];null!=t&&t()||this.closeDialog()},t.prototype.onTouchButton1=function(e){e.isClick()&&this.triggerCallback(0)},t.prototype.onTouchButton2=function(e){e.isClick()&&((this.context.btnTexts||[]).length>=2?this.triggerCallback(1):this.triggerCallback(0))},t.prototype.onTouchButtonNative=function(e){e.isClick()&&(this.nodeBtnNative.active=!1,this.sendMsg("MSG_EXTRA_NATIVE_BANNER_CLICK"))},t.prototype.onMsgNativeBar=function(e){this.nodeBtnNative.active=e.show&&this.isCopNativeBannerOpen()},t.prototype.isCopNativeBannerOpen=function(){return 1==g.default.getCopNumberValueByKey("b_native_banner_button_show1")},s([c.default.requireResourceLoaded],t.prototype,"refreshWhole",null),t}(d.default);r.default=v,cc._RF.pop()},{}],vPromptInputConfirmDialog:[function(e,t,i){"use strict";cc._RF.push(t,"31c1afH8eZK9Yu6kOOY75cX","vPromptInputConfirmDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrTip"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonSure=null,t.editboxInput=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptInputConfirmDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_buttonSure:[s.default,"onTouchButtonSure"],CC_editboxInput:[cc.EditBox]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonSure=function(e){if(e.isClick()){var t=this.editboxInput.string;t.length>0?(this.context.fOnConfirm&&this.context.fOnConfirm(t),this.closeDialog()):d.default.showMsgTip("\u8bf7\u8f93\u5165")}},t}(l.default);r.default=c,cc._RF.pop()},{}],vPropChai:[function(e,t,i){"use strict";cc._RF.push(t,"b519dmgF0ZOe74zGHF0YoaV","vPropChai");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteChai=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vPropChai"},t.prototype._getResourceBindingConfig=function(){return{CC_spriteChai:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.context.propScale&&this.setScale(this.context.propScale)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.getWorldAABBPoints=function(){var e=this.width,t=this.height,i=0-e/2,n=0-t/2;return[this.convertToWorldSpaceAR(cc.v2(i,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n+t)),this.convertToWorldSpaceAR(cc.v2(i,n+t))]},t}(o("ViewBase").default);r.default=s,cc._RF.pop()},{}],vPropDigger:[function(e,t,i){"use strict";cc._RF.push(t,"468068SizlKGp36xeQB29G7","vPropDigger");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteDigger1=null,t.spriteDigger2=null,t.spriteDigger3=null,t.spriteDigger4=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vPropDigger"},t.prototype._getResourceBindingConfig=function(){return{CC_spriteDigger1:[cc.Sprite],CC_spriteDigger2:[cc.Sprite],CC_spriteDigger3:[cc.Sprite],CC_spriteDigger4:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.context.propScale&&this.setScale(this.context.propScale),this.context.diggerIndex&&(this["spriteDigger"+this.context.diggerIndex].node.active=!0,this.width=this["spriteDigger"+this.context.diggerIndex].node.width,this.height=this["spriteDigger"+this.context.diggerIndex].node.height)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.getWorldAABBPoints=function(){var e=this.width,t=this.height,i=0-e/2,n=0-t/2;return[this.convertToWorldSpaceAR(cc.v2(i,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n+t)),this.convertToWorldSpaceAR(cc.v2(i,n+t))]},t}(o("ViewBase").default);r.default=s,cc._RF.pop()},{}],vQueenSuccessDialog:[function(e,t,i){"use strict";cc._RF.push(t,"e6682fWZ8FIIIYAKYmys/D1","vQueenSuccessDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonConfirm=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vQueenSuccessDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonConfirm:[s.default,"onTouchButtonConfirm"]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.onTouchButtonConfirm=function(e){e.isClick()&&this.closeDialog()},t}(o("DialogBase").default);r.default=l,cc._RF.pop()},{}],vSettingDialog:[function(e,t,i){"use strict";cc._RF.push(t,"d291bTjaK9PUL61n9oyFCxa","vSettingDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Tools"),d=o("DialogBase"),c=o("mgrChannel"),u=o("mgrCop"),h=o("mgrDirector"),p=o("mgrSdk"),f=o("mgrSound"),g=o("mgrTip"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAdvancedSetting=null,t.buttonClose=null,t.buttonEffect=null,t.buttonMusic=null,t.buttonVideoRecord=null,t.labelKeFu=null,t.nodeBg=null,t.nodeSwitchCloseEffect=null,t.nodeSwitchCloseMusic=null,t.nodeSwitchCloseVideoRecord=null,t.nodeSwitchOpenEffect=null,t.nodeSwitchOpenMusic=null,t.nodeSwitchOpenVideoRecord=null,t.nodeVideoRecord=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vSettingDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAdvancedSetting:[s.default,"onTouchButtonAdvancedSetting"],CC_buttonClose:[s.default,"onTouchButtonClose"],CC_buttonEffect:[s.default,"onTouchButtonEffect"],CC_buttonMusic:[s.default,"onTouchButtonMusic"],CC_buttonVideoRecord:[s.default,"onTouchButtonVideoRecord"],CC_labelKeFu:[cc.Label],CC_nodeBg:[cc.Node],CC_nodeSwitchCloseEffect:[cc.Node],CC_nodeSwitchCloseMusic:[cc.Node],CC_nodeSwitchCloseVideoRecord:[cc.Node],CC_nodeSwitchOpenEffect:[cc.Node],CC_nodeSwitchOpenMusic:[cc.Node],CC_nodeSwitchOpenVideoRecord:[cc.Node],CC_nodeVideoRecord:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buttonAdvancedSetting.node.active=u.default.getBooleanValue("b_advanced_settting");var t=u.default.get("kefu_text");t&&"0"!=t?this.labelKeFu.string=t:this.labelKeFu.node.active=!1,this.refreshEffect(),this.refreshMusic(),this.refreshVideoRecord(),this.nodeVideoRecord.active=c.default.haveVideoRecord(),l.default.registerTouchHandler(this.nodeBg,this.onTouchNodeBg.bind(this)),g.default.showJumpOtherGameBanner(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.refreshEffect=function(){var e=f.default.getEffectVolume()>0;this.nodeSwitchCloseEffect.active=!e,this.nodeSwitchOpenEffect.active=e},t.prototype.refreshMusic=function(){var e=f.default.getMusicVolmue()>0;this.nodeSwitchCloseMusic.active=!e,this.nodeSwitchOpenMusic.active=e},t.prototype.refreshVideoRecord=function(){var e=c.default.getUserOpenVideoRecord();this.nodeSwitchCloseVideoRecord.active=!e,this.nodeSwitchOpenVideoRecord.active=e},t.prototype.onTouchButtonAdvancedSetting=function(e){e.isClick()&&p.default.openAdvancedSetting()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonEffect=function(e){e.isClick()&&(f.default.getEffectVolume()>0?f.default.setEffectVolume(0):f.default.setEffectVolume(1),this.refreshEffect())},t.prototype.onTouchButtonMusic=function(e){e.isClick()&&(f.default.getMusicVolmue()>0?f.default.setMusicVomue(0):f.default.setMusicVomue(1),this.refreshMusic())},t.prototype.onTouchButtonVideoRecord=function(e){e.isClick()&&(c.default.getUserOpenVideoRecord()?(c.default.setUserOpenVideoRecord(!1),g.default.showMsgTip("\u5173\u95ed\u81ea\u52a8\u5f55\u5236")):(c.default.setUserOpenVideoRecord(!0),g.default.showMsgTip("\u5f00\u542f\u81ea\u52a8\u5f55\u5236")),this.refreshVideoRecord())},t.prototype.onTouchNodeBg=function(e){var t=this;if("began"==e.name)this._b_drag_to_right=!0,this._turn_count=0,this._b_poped=!1;else if("moved"==e.name){var i=e.getStartLocation(),n=e.getLocation();this._b_drag_to_right?n.x<i.x-20&&(this._b_drag_to_right=!1,this._turn_count++,cc.log("turn left",this._turn_count)):n.x>i.x+20&&(this._b_drag_to_right=!0,this._turn_count++,cc.log("turn right",this._turn_count)),!this._b_poped&&this._turn_count>=20&&(this._b_poped=!0,h.default.openDialog("vPromptInputConfirmDialog",{fOnConfirm:function(e){e&&"game131"==e?h.default.openDialog("vDebugInfoDialog"):t._b_poped=!1}}))}},t}(d.default);r.default=v,cc._RF.pop()},{}],vShareDialog:[function(e,t,i){"use strict";cc._RF.push(t,"c31a9DQIEVPvqzwxGDE9DJM","vShareDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonShare=null,t.nodeBg=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vShareDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_buttonShare:[s.default,"onTouchButtonShare"],CC_nodeBg:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){e.isClick()},t.prototype.onTouchButtonShare=function(e){e.isClick()},t}(o("DialogBase").default);r.default=l,cc._RF.pop()},{}],vSnowDialog:[function(e,t,i){"use strict";cc._RF.push(t,"4f0a3j/u4JMW4dUu57vppFM","vSnowDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("mgrAd"),c=o("mgrCfg"),u=o("mgrFishSkin"),h=o("mgrGame"),p=o("mgrSdk"),f=o("Fish"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.labelBtn1=null,t.labelBtn2=null,t.labelDesc=null,t.nodeBtns=null,t.nodeFish=null,t.spriteAd=null,t.spriteTitle=null,t.bIron=!1,t.bBeast=!1,t.bString=!1,t.bLife=!1,t.bQueen=!1,t.bGoddess=!1,t.bAnchor=!1,t.bDevice=!1,t.bGun=!1,t.bMoto=!1,t.bSnacks=!1,t.bDNA=!1,t.bXiuxian=!1,t.bHouse=!1,t.bInsect=!1,t.bQiQiang=!1,t.bQiQiangLuomu=!1,t.bBarbecue=!1,t.bFirearms=!1,t.bStar=!1,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vSnowDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[s.default,"onTouchButton1"],CC_button2:[s.default,"onTouchButton2"],CC_labelBtn1:[cc.Label],CC_labelBtn2:[cc.Label],CC_labelDesc:[cc.Label],CC_nodeBtns:[cc.Node],CC_nodeFish:[cc.Node],CC_spriteAd:[cc.Sprite],CC_spriteTitle:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.bIron=this.context.bIron,this.bBeast=this.context.bBeast,this.bString=this.context.bString,this.bLife=this.context.bLife,this.bQueen=this.context.bQueen,this.bGoddess=this.context.bGoddess,this.bAnchor=this.context.bAnchor,this.bDevice=this.context.bDevice,this.bGun=this.context.bGun,this.bMoto=this.context.bMoto,this.bSnacks=this.context.bSnacks,this.bDNA=this.context.bDNA,this.bXiuxian=this.context.bXiuxian,this.bHouse=this.context.bHouse,this.bInsect=this.context.bInsect,this.bQiQiang=this.context.bQiQiang,this.bQiQiangLuomu=this.context.bQiQiangLuomu,this.bBarbecue=this.context.bBarbecue,this.bFirearms=this.context.bFirearms,this.bStar=this.context.bStar,this.bIron||this.bBeast?(this.spriteTitle.loadSpriteFrame("2d/ui/snow/title_2"),this.labelDesc.string="\u606d\u559c\u4f60\u89e6\u53d1\u4e86\u66b4\u98ce\u96ea\n\u770b\u5e7f\u544a\u51bb\u7ed3\u5168\u5c4f\u654c\u4eba30\u79d2\uff01"):this.bString?this.labelDesc.string="\u606d\u559c\u4f60\u89e6\u53d1\u4e86\u51b7\u51bb\u6548\u679c\n\u89c2\u770b\u5e7f\u544a\u5373\u53ef\u51bb\u7ed3\u5168\u5c4f\u4e32\u4e3230\u79d2":this.bLife?this.labelDesc.string="\u606d\u559c\u4f60\u9047\u5230\u4e86\u8d35\u4eba\n\u89c2\u770b\u5e7f\u544a\u5373\u53ef\u51bb\u7ed3\u5168\u5c4f30\u79d2":this.bQueen?this.labelDesc.string="\u606d\u559c\u4f60\u795e\u9f99\u9644\u4f53\n\u89c2\u770b\u5e7f\u544a\u5373\u53ef\u51bb\u7ed3\u5168\u5c4f30\u79d2":this.bGoddess?this.labelDesc.string="\u606d\u559c\u4f60\u83b7\u5f97\u4f18\u60e0\u5238\n\u89c2\u770b\u5e7f\u544a\u5373\u53ef\u51bb\u7ed3\u5168\u5c4f30\u79d2":this.bAnchor?this.labelDesc.string="\u606d\u559c\u4f60\u83b7\u5f97\u5956\u8d4f\n\u89c2\u770b\u5e7f\u544a\u5373\u53ef\u51bb\u7ed3\u5168\u5c4f30\u79d2":(this.bDevice||this.bGun||this.bMoto||this.bSnacks||this.bDNA||this.bXiuxian||this.bHouse||this.bInsect||this.bQiQiang||this.bQiQiangLuomu||this.bBarbecue||this.bFirearms||this.bStar)&&(this.labelDesc.string="\u606d\u559c\u4f60\u89e6\u53d1\u4e86\u51b7\u51bb\u6548\u679c\n\u89c2\u770b\u5e7f\u544a\u5373\u53ef\u51bb\u7ed3\u5168\u5c4f30\u79d2"),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),p.default.statisVideoPointEvent("video_trigger_snow",1);var t=null;if(this.bBeast){var i=200/(t=this.context.fishNode).width;t.setScale(i),this.nodeFish.addChild(t)}else if(this.bString||this.bLife||this.bQueen||this.bGoddess||this.bAnchor||this.bDevice||this.bGun||this.bMoto||this.bSnacks||this.bDNA||this.bXiuxian||this.bHouse||this.bInsect||this.bQiQiang||this.bQiQiangLuomu||this.bBarbecue||this.bFirearms||this.bStar)i=100/(t=this.context.fishNode).width,t.setScale(i),this.nodeFish.addChild(t);else{var n=c.default.get_from_fish_db(6),o=n.spineId;1==this.context.fishId&&(o=u.default.getPlayerInitFishSpineId());var r=c.default.get_from_spine_db(o);t=new f.default({fishId:n.id,bPlayer:!0,bIron:this.bIron}),this.nodeFish.addChild(t),this.nodeFish.angle=-90,this.nodeFish.scale=1/r.scaleY*.9}},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onMsgAdEventSuccessd=function(e){"video_trigger_snow"==e.adEventId&&(h.default.tryFishStopRun(),this.context.closeCallback&&this.context.closeCallback(),this.closeDialog())},t.prototype.onTouchButton1=function(e){e.isClick()&&(this.closeDialog(),this.context.closeCallback&&this.context.closeCallback())},t.prototype.onTouchButton2=function(e){e.isClick()&&d.default.triggerAdEvent("video_trigger_snow",null,!0)},t}(l.default);r.default=g,cc._RF.pop()},{}],vStatisticsInfo:[function(e,t,i){"use strict";cc._RF.push(t,"c1c7b+UzmdHXJSaqgCN4Xqu","vStatisticsInfo");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ViewBase"),l=o("mgrCfg"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeMid=null,t.labelCurrViewPoints=null,t.labelTriggerPointItem=null,t.labelTriggerPointTimeOver=null,t.labelTriggerPointTimeStart=null,t.labelTriggerVideoAd=null,t.labelViewName=null,t.openedViewCount=0,t.triggeredVideoCount=0,t.stageStartCount=0,t.stageEndCount=0,t.itemChangeCount=0,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vStatisticsInfo"},t.prototype._getResourceBindingConfig=function(){return{CC_LT_nodeMid:[cc.Node],CC_labelCurrViewPoints:[cc.Label],CC_labelTriggerPointItem:[cc.Label],CC_labelTriggerPointTimeOver:[cc.Label],CC_labelTriggerPointTimeStart:[cc.Label],CC_labelTriggerVideoAd:[cc.Label],CC_labelViewName:[cc.Label]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_WARP_SCENE_COMPLETED:this.onMsgWarpSceneCompleted.bind(this),MSG_DIALOG_ONLOAD:this.onMsgDialogOpen.bind(this),MSG_VIDEO_AD_EVENT_START:this.onMsgVideoAdEventStart.bind(this),MSG_STATIS_STAGE_START:this.onMsgStaticStageStart.bind(this),MSG_STATIS_STAGE_END:this.onMsgStaticStageEnd.bind(this),MSG_STATIS_ITEM:this.onMsgStaticItem.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onMsgWarpSceneCompleted=function(e){this.openedViewCount++;var t=this.openedViewCount+"-"+e.viewName;this.cutAndMerge(this.labelViewName,t,8),this.showCurrViewPointContent(e.viewName)},t.prototype.onMsgDialogOpen=function(e){this.onMsgWarpSceneCompleted(e)},t.prototype.showCurrViewPointContent=function(e){var t="\u5f53\u524d\u754c\u9762\u6253\u70b9\n";t+="video\n",l.default.forDb_from_ad_event_db(function(i,n){n.id.startsWith("video_")&&n.id.indexOf(e)>=0&&(t+=n.adTag+"\n")}),t+="\nint\n",l.default.forDb_from_ad_event_db(function(i,n){n.id.startsWith("int_")&&n.id.indexOf(e)>=0&&(t+=n.adTag+"\n")}),t+="\nbanner\n",l.default.forDb_from_ad_event_db(function(i,n){n.id.startsWith("banner_")&&n.id.indexOf(e)>=0&&(t+=n.adTag+"\n")}),t+="\nbutton\n",l.default.forDb_from_ui_button_click_point_event_db(function(i,n){for(var o in n){var r=n[o];for(var a in r){var s=r[a];s.viewName!=e&&s.parentViewName!=e||(t+=s.selfPointEventId+"\n")}}}),this.labelCurrViewPoints.string=t||"Unknow"},t.prototype.onMsgVideoAdEventStart=function(e){if(e&&e.adEventId){var t=e.adEventId,i=l.default.get_from_ad_event_db(t);this.triggeredVideoCount++;var n=this.triggeredVideoCount+"-"+i.adTag;this.cutAndMerge(this.labelTriggerVideoAd,n,8)}},t.prototype.onMsgStaticStageStart=function(e){this.stageStartCount++;var t=this.stageStartCount+"-"+e[1];this.cutAndMerge(this.labelTriggerPointTimeStart,t,8)},t.prototype.onMsgStaticStageEnd=function(e){this.stageEndCount++;var t=this.stageEndCount+"-"+e[1];this.cutAndMerge(this.labelTriggerPointTimeOver,t,8)},t.prototype.onMsgStaticItem=function(e){this.itemChangeCount++;var t=l.default.get_from_item_change_point_event_db(e[4]),i="0"==e[2]?"-"+e[3]:"+"+e[3],n=this.itemChangeCount+"-"+e[1]+" "+i+" "+t.desc;this.cutAndMerge(this.labelTriggerPointItem,n,8)},t.prototype.cutAndMerge=function(e,t,i){var n=[],o=e.string;if(e.string&&(n=e.string.split("\n")).length>=i-1){o="";for(var r=n.length-(i-1);r<n.length;r++)o+=n[r],r!=n.length-1&&(o+="\n")}e.string=o?o+"\n"+t:""+t},t}(s.default);r.default=d,cc._RF.pop()},{}],vThroughLoongLineScene:[function(e,t,i){"use strict";cc._RF.push(t,"866e0BD2DFNE6Q1kQQ0S2o2","vThroughLoongLineScene");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("Timer"),d=o("Tools"),c=o("SceneBase"),u=o("mgrAd"),h=o("mgrDirector"),p=o("mgrSdk"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBack=null,t.nodeLayoutLeft=null,t.nodeEndPos=null,t.nodeEvent=null,t.nodeGameRoot=null,t.nodeLove1=null,t.nodeLove2=null,t.nodeLove3=null,t.nodeObstacle1=null,t.nodeObstacle2=null,t.nodeObstacle3=null,t.nodeOriginPos=null,t.nodeSensor=null,t.nodeTemplate=null,t.nodeTemplate1=null,t.nodeTemplate10=null,t.nodeTemplate11=null,t.nodeTemplate2=null,t.nodeTemplate3=null,t.nodeTemplate4=null,t.nodeTemplate5=null,t.nodeTemplate6=null,t.nodeTemplate7=null,t.nodeTemplate8=null,t.nodeTemplate9=null,t.maxFishId=1,t.speed1=.6,t.speed2=.4,t.speed3=1,t.readyShootLoong=null,t.evolutionNum=3,t.loongInfo={},t.loongNodes={},t.limitLevel=11,t.overFlag=!1,t.maxLoveNum=3,t.curLoveNum=3,t}return a(t,e),t.prototype._getResourceName=function(){return"scene/vThroughLoongLineScene"},t.prototype._getResourceBindingConfig=function(){return{CC_LLT_buttonBack:[s.default,"onTouchButtonBack"],CC_LL_nodeLayoutLeft:[cc.Node],CC_nodeEndPos:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeGameRoot:[cc.Node],CC_nodeLove1:[cc.Node],CC_nodeLove2:[cc.Node],CC_nodeLove3:[cc.Node],CC_nodeObstacle1:[cc.Node],CC_nodeObstacle2:[cc.Node],CC_nodeObstacle3:[cc.Node],CC_nodeOriginPos:[cc.Node],CC_nodeSensor:[cc.Node],CC_nodeTemplate:[cc.Node],CC_nodeTemplate1:[cc.Node],CC_nodeTemplate10:[cc.Node],CC_nodeTemplate11:[cc.Node],CC_nodeTemplate2:[cc.Node],CC_nodeTemplate3:[cc.Node],CC_nodeTemplate4:[cc.Node],CC_nodeTemplate5:[cc.Node],CC_nodeTemplate6:[cc.Node],CC_nodeTemplate7:[cc.Node],CC_nodeTemplate8:[cc.Node],CC_nodeTemplate9:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),d.default.registerTouchHandler(this.nodeEvent,this.onTouchNodeEvent.bind(this)),this.moveLoongLine(),this.initLoong(),u.default.isCanTriggerTemplateAd("single_template_mode5")&&u.default.triggerAdEvent("single_template_mode5"),u.default.isCanTriggerTemplateAd("vertical_template_mode5")&&u.default.triggerAdEvent("vertical_template_mode5")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.default.closeAdv("single_template_mode5"),u.default.closeAdv("vertical_template_mode5")},t.prototype.addFish=function(e,t,i,n){this.maxFishId=Math.max(this.maxFishId,e);var o=this["nodeTemplate"+e];if(o){var r=cc.instantiate(o);return r.active=!0,r.parent=this.nodeGameRoot,r.position=new cc.Vec2(t,i),r.angle=180,r.scale=.9*r.scale,n&&(r.angle=n),r.fishId=e,r}},t.prototype.moveLoongLine=function(){var e=this.nodeObstacle1,t=this.nodeObstacle2,i=this.nodeObstacle3;cc.tween(e).repeatForever(cc.tween().to(3/this.speed1,{x:1400}).call(function(){e.x=0})).start(),cc.tween(t).repeatForever(cc.tween().to(3/this.speed2,{x:-1400}).call(function(){t.x=0})).start(),cc.tween(i).repeatForever(cc.tween().to(3/this.speed3,{x:1400}).call(function(){i.x=0})).start()},t.prototype.initLoong=function(){var e=this.getHighestLevel();this.readyShootLoong=this.addFish(e,this.nodeOriginPos.x,this.nodeOriginPos.y-100),this.readyShootLoong.level=e,cc.tween(this.readyShootLoong).to(.3,{y:this.nodeOriginPos.y}).start()},t.prototype.doShootLoong=function(e){var t=this,i=null;this.readyShootLoong?(i=this.readyShootLoong,e=this.readyShootLoong.level):i=this.addFish(e,this.nodeOriginPos.x,this.nodeOriginPos.y),this.initLoong();var n=l.default.callLoop(1/60,function(e){i||e.stop();var n=i.getComponent(cc.BoxCollider);if(n)for(var o=[t.nodeObstacle1,t.nodeObstacle2,t.nodeObstacle3],r=0;r<o.length;r++){var a=o[r].getComponent(cc.BoxCollider);a&&cc.Intersection.rectRect(n.world.aabb,a.world.aabb)&&!i.passed&&(e.stop(),i.removeFromParent(),i.destroy(),t.curLoveNum--,t.refreshLoveNum(),t.checkOverGame())}},this);i&&cc.tween(i).to(1,{y:this.nodeEndPos.y}).call(function(){t.freeMove(i),t.loongInfo[e]?t.loongInfo[e]++:t.loongInfo[e]=1,t.loongNodes[e]?t.loongNodes[e].push(i):t.loongNodes[e]=[i],n.stop(),t.tryCombine()}).start()},t.prototype.tryCombine=function(){var e=this,t=!1;(function i(){for(var n in e.loongInfo)e.loongInfo[n]>=e.evolutionNum&&(t=!0,e.loongInfo[n]-=e.evolutionNum,e.loongInfo[parseInt(n)+1]?e.loongInfo[parseInt(n)+1]+=1:e.loongInfo[parseInt(n)+1]=1,t&&(t=!1,i()))})();for(var i=1;i<=this.limitLevel;i++){var n=this.loongInfo[i]||0,o=this.loongNodes[i]||[],r=[];if(o.length>n){for(var a=o.length-n,s=0;s<o.length;s++)s<a?(o[s].removeFromParent(),o[s].destroy()):r.push(o[s]);this.loongNodes[i]=r}else if(o.length<n)for(a=n-o.length,s=0;s<a;s++){var l=this.addFish(i,this.nodeEndPos.x,this.nodeEndPos.y);this.freeMove(l),this.loongNodes[i]?this.loongNodes[i].push(l):this.loongNodes[i]=[l]}}this.checkOverGame()},t.prototype.checkOverGame=function(){var e=this;this.overFlag||(this.getHighestLevel()>=this.limitLevel&&(this.clearLoongExceptHighLevelLoong(),d.default.unregisterTouchHandler(this.nodeEvent),this.overFlag=!0,h.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u606d\u559c\u4f60\uff0c\u4f60\u6210\u529f\u53ec\u5524\u4e86\u795e\u9f99\uff01",btnTexts:["\u786e\u5b9a"],callbacks:[function(){p.default.statisOnStageEnd("80006",1,"\u5173\u5361\u7ed3\u675f"),p.default.statisCommonEvent(80001),h.default.enterScene("vHubScene")}]})),this.curLoveNum<=0&&(this.overFlag=!0,h.default.openDialog("vAdPromptDialog",{adEventId:"video_trigger_reborn",btn1Str:"\u53d6\u6d88",btn2Str:"\u786e\u5b9a",content:"\u8981\u590d\u6d3b\u5e76\u8865\u6ee1\u4e09\u6761\u547d\u5417\uff1f",refuse:function(){h.default.openDialog("vPromptFishDialog",{title:"\u63d0\u793a",content:"\u53ec\u5524\u795e\u9f99\u5931\u8d25\u3002",btnTexts:["\u786e\u5b9a"],callbacks:[function(){p.default.statisOnStageEnd("80006",0,"\u5173\u5361\u7ed3\u675f"),p.default.statisCommonEvent(80001),h.default.enterScene("vHubScene")}]})},confirm:function(){e.overFlag=!1,e.curLoveNum=e.maxLoveNum,e.refreshLoveNum()}})))},t.prototype.clearLoongExceptHighLevelLoong=function(){for(var e in this.loongNodes){var t=this.loongNodes[e];parseInt(e)!=this.limitLevel&&t.forEach(function(e){e.removeFromParent(),e.destroy()})}},t.prototype.getHighestLevel=function(){var e=1;for(var t in this.loongInfo)this.loongInfo[t]&&parseInt(t)>e&&(e=parseInt(t));return e},t.prototype.refreshLoveNum=function(){for(var e=[this.nodeLove1,this.nodeLove2,this.nodeLove3],t=0;t<e.length;t++)e[t].active=t<this.curLoveNum},t.prototype.freeMove=function(e){e.passed=!0;var t=[this.nodeEndPos.x,this.nodeEndPos.y],i=[t[0]-300,t[0]+300],n=[t[1]-60,t[1]+60];cc.tween(e).repeatForever(cc.tween().call(function(){var t=[d.default.random(i[0],i[1]),d.default.random(n[0],n[1])],o=d.default.angle(e.x,e.y,t[0],t[1])+90;cc.tween(e).to(1,{angle:o}).to(2,{x:t[0],y:t[1]}).start()}).delay(3.1)).start()},t.prototype.onTouchButtonBack=function(e){if(e.isClick()){var t=[function(){},function(){p.default.statisOnStageEnd("86000",0,"\u5173\u5361\u7ed3\u675f"),h.default.enterScene("vHubScene")}];h.default.openDialog("vPromptDialog",{btnTexts:["\u53d6\u6d88","\u786e\u5b9a"],content:"\u662f\u5426\u8fd4\u56de\u4e3b\u754c\u9762?",callbacks:t})}},t.prototype.onTouchNodeEvent=function(e){if(e.isClick()){var t=this.getHighestLevel();this.doShootLoong(t)}},t}(c.default);r.default=f,cc._RF.pop()},{}],vTitleBar:[function(e,t,i){"use strict";cc._RF.push(t,"8a4a5lfEvlIa6URKnSs5j/B","vTitleBar");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("ViewBase"),d=o("mgrPlayer"),c=o("Tools"),u=o("Const"),h=o("mgrShop"),p=o("mgrGuide"),f=o("Timer"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonDiamond=null,t.buttonEnergy=null,t.buttonGold=null,t.labelAmountDiamond=null,t.labelAmountEnergy=null,t.labelAmountGold=null,t.labelCountDownEnergy=null,t.layoutNode=null,t.nodeDiamond=null,t.nodeEnergy=null,t.nodeGold=null,t.nodeIconDiamond=null,t.nodeIconEnergy=null,t.nodeIconGold=null,t._lastPlayTime=0,t._lastSoundTime=0,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vTitleBar"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonDiamond:[s.default,"onTouchButtonDiamond"],CC_buttonEnergy:[s.default,"onTouchButtonEnergy"],CC_buttonGold:[s.default,"onTouchButtonGold"],CC_labelAmountDiamond:[cc.Label],CC_labelAmountEnergy:[cc.Label],CC_labelAmountGold:[cc.Label],CC_labelCountDownEnergy:[cc.Label],CC_layoutNode:[cc.Layout],CC_nodeDiamond:[cc.Node],CC_nodeEnergy:[cc.Node],CC_nodeGold:[cc.Node],CC_nodeIconDiamond:[cc.Node],CC_nodeIconEnergy:[cc.Node],CC_nodeIconGold:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelCountDownEnergy.node.active=!1,this.refreshData(),this.fillData(),this.refreshBtns(),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged,MSG_GOLD_FLY_END:this.onMsgGoldFlyEnd,MSG_DIAMOND_FLY_END:this.onMsgDiamondFlyEnd}),f.default.callLoop(.2,this.onTimerLoop.bind(this),this),f.default.callLoop(1,this.onRefreshCountDown.bind(this),this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTimerLoop=function(){this.isResourceLoaded()&&this.refreshData()},t.prototype.onRefreshCountDown=function(){d.default.getRecoverRemainTime(u.default.ITEM_ID_ENERGY)>0?(this.labelCountDownEnergy.node.active=!0,this.labelCountDownEnergy.string=c.default.formatTime(d.default.getRecoverRemainTime(u.default.ITEM_ID_ENERGY),"%M:%S")):this.labelCountDownEnergy.node.active=!1},t.prototype.refreshData=function(){this.labelAmountGold.string=c.default.formatNumToStr(d.default.getItemAmount(u.default.ITEM_ID_GOLD)),this.labelAmountDiamond.string=c.default.formatNumToStr(d.default.getItemAmount(u.default.ITEM_ID_DIAMONDS));var e=d.default.getItemAmount(u.default.ITEM_ID_ENERGY),t=d.default.getRecoverMaxAmount(u.default.ITEM_ID_ENERGY);this.labelAmountEnergy.string=ul.format("%d/%d",e,t)},t.prototype.fillData=function(){this.context.bHideDiamond&&(this.nodeDiamond.active=!1),this.context.bHideGold&&(this.nodeGold.active=!1),this.context.bHideEnergy&&(this.nodeEnergy.active=!1),this.context.bVertical||(this.layoutNode.type=cc.Layout.Type.HORIZONTAL,this.layoutNode.spacingX=15,this.nodeGold.y=0,this.nodeDiamond.y=0,this.nodeEnergy.y=0),p.default.registerGuideNode("vHubScene.nodeGoldIcon",this.nodeIconGold),p.default.registerGuideNode("vHubScene.nodeDiamondsIcon",this.nodeIconDiamond),p.default.registerGuideNode("vHubScene.nodeEnergyIcon",this.nodeIconEnergy)},t.prototype.refreshBtns=function(){this.nodeGold.active&&(this.buttonGold.node.active=h.default.canSupplyItem(u.default.ITEM_ID_GOLD)),this.nodeDiamond.active&&(this.buttonDiamond.node.active=h.default.canSupplyItem(u.default.ITEM_ID_DIAMONDS)),this.nodeEnergy.active&&(this.buttonEnergy.node.active=h.default.canSupplyItem(u.default.ITEM_ID_ENERGY))},t.prototype.getNodeIconGold=function(){return this.nodeIconGold},t.prototype.getNodeIconEnergy=function(){return this.nodeIconEnergy},t.prototype.onTouchButtonGold=function(e){e.isClick()&&h.default.tryOpenShop(u.default.ITEM_ID_GOLD)},t.prototype.onTouchButtonDiamond=function(e){e.isClick()&&h.default.tryOpenShop(u.default.ITEM_ID_DIAMONDS)},t.prototype.onTouchButtonEnergy=function(e){e.isClick()&&h.default.tryOpenShop(u.default.ITEM_ID_ENERGY)},t.prototype.onMsgItemAmountChanged=function(){this.refreshData(),this.refreshBtns()},t.prototype.onMsgGoldFlyEnd=function(){this.nodeIconGold.stopAllActions(),this.nodeIconGold.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1)));var e=c.default.time();e-this._lastSoundTime>=.4&&(this._lastSoundTime=e)},t.prototype.onMsgDiamondFlyEnd=function(){this.nodeIconDiamond.stopAllActions(),this.nodeIconDiamond.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1)));var e=c.default.time();e-this._lastSoundTime>=.4&&(this._lastSoundTime=e)},t}(l.default);r.default=g,cc._RF.pop()},{}],vUpdaterSceneBase:[function(e,t,i){"use strict";cc._RF.push(t,"c62363WFOdOTol2y4eu214a","vUpdaterSceneBase");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("SceneBase"),d=o("Timer"),c=o("Const"),u=o("mgrDirector"),h=o("LayerColor"),p=cc._decorator,f=p.ccclass,g=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.patchInfo=null,t.localPid=null,t.patchs=null,t.patchIdx=null,t.TIMEOUT=5,t.requestPatchInfoXhr=null,t.timeoutTimer=null,t.bNeedRestart=!1,t.bGameStarted=!1,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){var t=this;e.prototype.onResourceLoaded.call(this),jsb.fileUtils.isFileExist("src/patch_info.json")?(cc.log("\u53d1\u73b0patch_info.json\uff0c\u51c6\u5907\u66f4\u65b0"),this.needPlayLogo()?this.playLogo(function(){t.prepareUpdate()}):this.prepareUpdate()):(cc.log("patch_info.json\u672a\u627e\u5230\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f"),this.startGame())},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){},t.prototype.sendUiMsg=function(e,t){this.onUiMsg(e,t)},t.prototype.onUiMsg=function(){},t.prototype.needPlayLogo=function(){if("true"==cc.sys.localStorage.getItem("B_SKIP_LOGO_ONCE"))return cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","false"),!1;var e=this.getLogoTextures();return!(!e||0==e.length)},t.prototype.getLogoTextures=function(){var e,t=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(t&&(e=JSON.parse(t)),!e)return null;var i=e.CONF;if(!i)return null;var n=i.LOGO_TEXTURES;return Array.isArray(n)?n:null},t.prototype.playLogo=function(e){var t=this;cc.log("-------------------------"),cc.log("-----   playLogo    -----"),cc.log("-------------------------");for(var i=this.getLogoTextures(),n=i.length-1;n>=0;n--){var o=i[n];cc.resources.get(o)||(cc.warn(ul.format("vUpdaterSceneBase.playLogo logoTexture not found! fileName=[%s]",o)),i.splice(n,1))}if(i.length<=0)e();else{this.nodeResource.active=!1;var r=new h.default(cc.color(0,0,0,255));for(r.parent=this,r.setContentSize(u.default.size),n=0;n<i.length;n++){o=i[n];var a=u.default.createSpriteNode(o);a.parent=this,a.opacity=0;var s=[];n>0&&s.push(cc.delayTime(3*n)),s.push(cc.fadeIn(.6)),s.push(cc.delayTime(1.8)),s.push(cc.fadeOut(.6)),n==i.length-1&&s.push(cc.callFunc(function(){t.nodeResource.active=!0,r.destroy(),e()}));var l=cc.sequence(s);a.runAction(l)}}},t.prototype.startGame=function(e){if(this.bGameStarted)cc.warn("vUpdataerSceneBase.startGame already started!");else{if(this.bGameStarted=!0,e&&this.patchInfo){var t=cc.sys.localStorage.getItem("GAME_VERSION");if(t)c.default.GAME_VERSION=t;else{var i=this.patchInfo.VERSION;i&&(cc.sys.localStorage.setItem("GAME_VERSION",i),c.default.GAME_VERSION=i)}}if(this.releaseAssetsManager(),this.releaseRequestPatchInfoXhr(),this.bNeedRestart)return cc.log("-------------------------"),cc.log("-----  restarting   -----"),cc.log("-------------------------"),cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","true"),cc.audioEngine.stopAll(),void cc.game.restart();cc.log("-------------------------"),cc.log("-----   startGame   -----"),cc.log("-------------------------"),this.sendUiMsg("UPDATER_UI_MSG_ENTER_NEXT_SCENE")}},t.prototype.resetPatch=function(e,t,i,n){cc.log("-------------------------"),cc.log("-----  resetPatch   -----"),cc.log("-------------------------"),cc.log("resetTip",e);var o=this.getPatchPath();jsb.fileUtils.isDirectoryExist(o)&&jsb.fileUtils.removeDirectory(o),cc.sys.localStorage.setItem("PATCH_BID",t.toString()),cc.sys.localStorage.setItem("PATCH_PID",i.toString()),cc.sys.localStorage.setItem("PATCH_PACKAGE_PID",i.toString()),cc.sys.localStorage.setItem("PATCH_CHANNEL",n),cc.sys.localStorage.setItem("GAME_VERSION",""),this.bNeedRestart=!0},t.prototype.prepareUpdate=function(){cc.log("-------------------------"),cc.log("----- prepareUpdate -----"),cc.log("-------------------------");var e,t=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(t&&(e=JSON.parse(t)),!e)return cc.warn("[warn] patch_info.json \u52a0\u8f7d\u5931\u8d25\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f\u3002"),void this.startGame();this.patchInfo=e;var i=cc.sys.localStorage.getItem("GAME_VERSION");i||(i=e.VERSION),c.default.GAME_VERSION=i;var n=e.B_ID,o=e.P_ID,r=e.CHANNEL,a=parseInt(cc.sys.localStorage.getItem("PATCH_BID")),s=parseInt(cc.sys.localStorage.getItem("PATCH_PID")),l=parseInt(cc.sys.localStorage.getItem("PATCH_PACKAGE_PID")),d=cc.sys.localStorage.getItem("PATCH_CHANNEL"),u=null;n!=a?u=ul.format("bid not match! package = %s, record = %d",n,a):r!=d?u=ul.format("channel not match! package = %s, record = %d",r,d):o!=l?u=ul.format("package pid not match! package = %s, record = %d",o,l):o>(isNaN(s)?0:s)&&(u=ul.format("package pid is higher! package = %s, record = %s",o,s)),u&&this.resetPatch(u,n,o,r);var h=null;(s=parseInt(cc.sys.localStorage.getItem("PATCH_PID")))?(h=s,cc.log("use record pid",h)):(h=e.P_ID||0,cc.log("use patch_info pid",h)),this.localPid=h;var p=this.getPatchPath();if(!jsb.fileUtils.createDirectory(p))return cc.log("patchPath create faild!",p),void this.startGame();this.buildUi(),this.checkNewVersion()},t.prototype.checkNewVersion=function(){var e=this;this.sendUiMsg("UPDATER_UI_MSG_GET_VERSION");var t=this.patchInfo,i=ul.format("http://%s/%s/%s/%s/%s",t.HOST,t.PATCH_PATH,t.APP,t.CHANNEL,t.PATCH_INFO_FILENAME),n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(4==n.readyState)if(n.status>=200&&n.status<207){e.stopTimeoutTimer();var t=void 0;try{t=JSON.parse(n.response)}catch(t){cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse except!",n.response),e.startGame()}t?(e.releaseRequestPatchInfoXhr(),e.onPatchInfoDownloadSuccess(t)):(cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse faild!",n.response),e.startGame())}else cc.warn("vUpdateScene.checkNewVersion network faild."),e.startGame()},n.open("GET",i),n.timeout=1e3*this.TIMEOUT,this.requestPatchInfoXhr=n,this.startTimeoutTimer(),n.send()},t.prototype.onPatchInfoDownloadSuccess=function(e){var t=this;cc.log("onPatchInfoDownloadSuccess",e),ul.dump(e);var i=parseInt(e.P_ID)||0,n=this.localPid;cc.log("pid:",n,i),n>i&&(cc.sys.localStorage.setItem("GAME_VERSION",""),cc.warn("local version is higher than remote version"),cc.warn("stop update!"),this.startGame());for(var o=[],r=0;r<e.PATCH_LIST.length;r++){var a=e.PATCH_LIST[r];a.pid>n&&(cc.log("ADD PATCH ->",a.pid,a.version),o.push(a))}this.patchInfo=e,o.length>0?(this.patchs=o,this.patchIdx=0,d.default.callLater(.016,function(){t.downloadPatchByIndexed()})):this.startGame(!0)},t.prototype.downloadPatchByIndexed=function(){this.releaseAssetsManager(),cc.log("downloadPatchByIndexed",this.patchIdx);var e=this.patchInfo,t=this.patchs[this.patchIdx],i=ul.format("http://%s/%s/%s/%s/%s/",e.HOST_CDN||e.HOST,e.PATCH_PATH,e.APP,e.CHANNEL,e.B_ID);cc.log("packageUrl",ul.format("%s%d.zip",i,t.pid));var n={};n[ul.format("%d.zip",t.pid)]={size:0,md5:"",compressed:!0};var o=JSON.stringify({packageUrl:i,version:(this.localPid-1).toString()}),r=new jsb.Manifest(o,this.getPatchPath()),a=JSON.stringify({packageUrl:i,version:t.pid.toString(),assets:n}),s=new jsb.Manifest(a,this.getPatchPath()),l=new jsb.AssetsManager("",this.getPatchPath()),c=new jsb.EventListenerAssetsManager(l,this.onAssetsManagerEvent.bind(this));cc.eventManager.addListener(c,1),this.assetsManager=l,this.assetsManagerListener=c;var u=new d.default(.016,-1,function(){cc.isValid(l)&&l.update()});this.assetsManagerTimer=u,l.loadLocalManifest(r,this.getPatchPath()),l.loadRemoteManifest(s),l.setVersionCompareHandle(function(e,t){return parseFloat(e)-parseFloat(t)}),l.setVerifyCallback(function(){return!0}),u.startAndBindToNode(this)},t.prototype.onPatchDownloadSuccess=function(){var e=this.patchs[this.patchIdx];this.localPid=e.pid,cc.sys.localStorage.setItem("PATCH_PID",this.localPid.toString()),cc.log("save PATCH_PID",this.localPid),e.version&&(cc.sys.localStorage.setItem("GAME_VERSION",e.version),cc.log("save GAME_VERSION",e.version)),this.bNeedRestart=!0,cc.log("check patchIdx",this.patchIdx,this.patchs.length),this.patchIdx<this.patchs.length-1?(this.patchIdx++,this.downloadPatchByIndexed()):(this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_SUCCESS"),this.startGame(!0))},t.prototype.onAssetsManagerEvent=function(e){switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_NO_LOCAL_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_DOWNLOAD_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_PARSE_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:cc.log("onAssetsManagerEvent.NEW_VERSION_FOUND");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:cc.log("onAssetsManagerEvent.ALREADY_UP_TO_DATE"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:cc.log("onAssetsManagerEvent.UPDATE_PROGRESSION"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:e.getPercent()||0,filePercent:e.getPercentByFile()||0});break;case jsb.EventAssetsManager.ASSET_UPDATED:cc.log("onAssetsManagerEvent.ASSET_UPDATED");break;case jsb.EventAssetsManager.ERROR_UPDATING:cc.log("onAssetsManagerEvent.ERROR_UPDATING"),this.startGame();break;case jsb.EventAssetsManager.UPDATE_FINISHED:cc.log("onAssetsManagerEvent.UPDATE_FINISHED"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_FAILED:cc.log("onAssetsManagerEvent.UPDATE_FAILED"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:cc.log("onAssetsManagerEvent.ERROR_DECOMPRESS"),this.startGame();break;default:cc.log("onAssetsManagerEvent.unknown code",e.getEventCode()),this.startGame()}},t.prototype.getPatchPath=function(){var e=jsb.fileUtils.getWritablePath(),t=e.substr(e.length-1,1);return"/"==t||"\\"==t?e+"patch/":e+"/patch/"},t.prototype.onTimeout=function(){this.startGame()},t.prototype.startTimeoutTimer=function(){var e=this,t=new d.default(this.TIMEOUT,1,function(){e.stopTimeoutTimer(),e.onTimeout()});this.timeoutTimer=t,t.startAndBindToNode(this)},t.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t.prototype.releaseRequestPatchInfoXhr=function(){this.requestPatchInfoXhr&&(this.requestPatchInfoXhr.abort(),this.requestPatchInfoXhr=null)},t.prototype.releaseAssetsManager=function(){this.assetsManagerTimer&&(this.assetsManagerTimer.stop(),this.assetsManagerTimer=null),this.assetsManagerListener&&(cc.eventManager.removeListener(this.assetsManagerListener),this.assetsManagerListener=null),this.assetsManager&&(this.assetsManager=null)},s([f],t)}(l.default));r.default=g,cc._RF.pop()},{}],vWarpSceneNode:[function(e,t,i){"use strict";cc._RF.push(t,"42aa7cWE0lLTYKY1QsbQX0B","vWarpSceneNode");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeBg=null,t.nodeCircle=null,t.nodeMid=null,t._bEnterFinish=!1,t._bLoadFinish=!1,t._finishCb=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vWarpSceneNode"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeBg:[cc.Node],CC_nodeCircle:[cc.Node],CC_nodeMid:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.playRunEnter()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.playRunEnter=function(){var e=this;cc.tween(this.nodeBg).set({scale:8,opacity:0}).to(.2,{opacity:255}).to(.5,{scale:1}).delay(.3).call(function(){cc.log("    fOnFadeInCompleted"),e.enterFinish()}).start(),cc.tween(this.nodeMid).set({opacity:0}).delay(.5).call(function(){cc.tween(e.nodeCircle).set({angle:-90}).to(.5,{angle:0}).call(function(){cc.tween(e.nodeCircle).by(6,{angle:360}).union().repeatForever().start()}).start()}).to(.5,{opacity:255}).start()},t.prototype.setEnterCb=function(e){this.context.enterCb=e},t.prototype.enterFinish=function(){this.context.enterCb&&this.context.enterCb(),this._bEnterFinish=!0,this.checkFinish()},t.prototype.loadFinish=function(){this._bLoadFinish=!0,this.checkFinish()},t.prototype.checkFinish=function(){this._bLoadFinish&&this._bEnterFinish&&this.playRunOut()},t.prototype.setFinishCb=function(e){this._finishCb=e},t.prototype.playRunOut=function(){var e=this;cc.tween(this.nodeBg).set({scale:1,opacity:255}).to(.5,{scale:8}).to(.2,{opacity:0}).delay(.01).call(function(){cc.log("    _finishCb"),e._finishCb&&e._finishCb()}).start(),cc.tween(this.nodeMid).to(.2,{opacity:0}).start()},t}(o("ViewBase").default);r.default=s,cc._RF.pop()},{}],vWeapon:[function(e,t,i){"use strict";cc._RF.push(t,"63b2erNCi1J6Lw2kOKgLVS3","vWeapon");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("Tools"),l=o("ViewBase"),d=o("mgrCfg"),c=o("mgrPool"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelFightPower=null,t.labelFightPowerTip=null,t.labelName=null,t.nodeEff=null,t.nodeFightPower=null,t.spriteWeapon=null,t.fightPower=0,t.weaponId=0,t.specialIconIndex=0,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vWeapon"},t.prototype._getResourceBindingConfig=function(){return{CC_labelFightPower:[cc.Label],CC_labelFightPowerTip:[cc.Label],CC_labelName:[cc.Label],CC_nodeEff:[cc.Node],CC_nodeFightPower:[cc.Node],CC_spriteWeapon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype._getPreloadRess=function(){return[{path:"2d/anim_node/56_jiesuan_loop/56_jiesuan_loop",assetType:cc.Prefab},{path:"2d/anim_node/56_jiesuan_loop_white/56_jiesuan_loop_white",assetType:cc.Prefab},{path:"2d/anim_node/56_jiesuan_loop_green/56_jiesuan_loop_green",assetType:cc.Prefab},{path:"2d/anim_node/56_jiesuan_loop_blue/56_jiesuan_loop_blue",assetType:cc.Prefab},{path:"2d/anim_node/56_jiesuan_loop_purple/56_jiesuan_loop_purple",assetType:cc.Prefab}]},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.weaponId=this.context.weaponId,this.specialIconIndex=this.context.specialIconIndex;var t=d.default.get_from_xiuxian_weapon_db(this.weaponId);if(this.fightPower=t.fightPower,t.bSpecialShow&&this.specialIconIndex?this.spriteWeapon.loadSpriteFrame(t["specailIcon"+this.specialIconIndex]):this.spriteWeapon.loadSpriteFrame(t.icon),this.width=this.spriteWeapon.node.width,this.height=this.spriteWeapon.node.height,this.context.weaponScale&&this.setScale(this.context.weaponScale),this.context.bShowEff){var i=c.default.get("animNode",t.showEffId);i.parent=this.nodeEff,i.scale=this.context.effScale,i.play()}this.context.bShowFightPower&&(this.labelFightPower.string=s.default.formatNumToStrWanYi(t.fightPower),this.nodeFightPower.active=!0)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.getWorldAABBPoints=function(){var e=this.width,t=this.height,i=0-e/2,n=0-t/2;return[this.convertToWorldSpaceAR(cc.v2(i,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n)),this.convertToWorldSpaceAR(cc.v2(i+e,n+t)),this.convertToWorldSpaceAR(cc.v2(i,n+t))]},t.prototype.getFightPower=function(){return this.fightPower},t.prototype.getWeaponId=function(){return this.weaponId},t}(l.default);r.default=u,cc._RF.pop()},{}],vWelfareDialog:[function(e,t,i){"use strict";cc._RF.push(t,"900333TCOJKJJPp/Z7/075+","vWelfareDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("DialogBase"),d=o("ReuseLayouterVGrid"),c=o("ReuseList"),u=o("Const"),h=o("mgrSdk"),p=o("vWelfareItem"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.nodeList=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vWelfareDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_nodeList:[cc.Node]}},t.prototype._getPreloadRess=function(){return[{path:"view/node/vWelfareItem",assetType:cc.Prefab}]},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.registerListeners({MSG_SDK_OPEN_JUMP_RESULT:this.onMsgSdkOpenJumpResult,MSG_SDK_JUMP_OTHER_GAME_REWARD_RESULT:this.onMsgSdkJumpOtherGameRewardResult}),h.default.openJump(""+u.default.gameId,"reward")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new c.default;e.setLayouter((new d.default).setCellSize(112,144).setCols(3).setGap(25,20).setPending(15)),e.setCreator(function(e){var t=new p.default;t.parent=e,e.item=t}),e.setSetter(function(e,t){e.item.fillData(t)}),e.parent=this.nodeList,e.setContentSize(this.nodeList.getContentSize()),this.list=e},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgSdkOpenJumpResult=function(e){if("reward"==e.type){var t=e.jumpInfo;this.list.setDatas(t)}},t.prototype.onMsgSdkJumpOtherGameRewardResult=function(e){e.bSuccessful&&h.default.openJump(""+u.default.gameId,"reward")},t}(l.default);r.default=f,cc._RF.pop()},{}],vWelfareItem:[function(e,t,i){"use strict";cc._RF.push(t,"c141baAsN9JOIO8ci/2LlBf","vWelfareItem");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(r,"__esModule",{value:!0});var s=o("ScleableButton"),l=o("ViewBase"),d=o("mgrSdk"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.labelAmount=null,t.nodeReceived=null,t.nodeReward=null,t.spriteIcon=null,t.spriteReward=null,t}return a(t,e),t.prototype._getResourceName=function(){return"node/vWelfareItem"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[s.default,"onTouchButton1"],CC_labelAmount:[cc.Label],CC_nodeReceived:[cc.Node],CC_nodeReward:[cc.Node],CC_spriteIcon:[cc.Sprite],CC_spriteReward:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refresh()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){this.context.jumpInfo=e,this.refresh()},t.prototype.refresh=function(){if(this.isResourceLoaded()){var e=this.context.jumpInfo;e&&(e.url&&this.spriteIcon.loadSpriteFrameAndKeepSize(e.url),e.bReceived||this.nodeReward.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,1),cc.scaleTo(.3,.9),cc.scaleTo(.3,1)))),this.nodeReward.active=!1,this.nodeReceived.active=!1)}},t.prototype.onTouchButton1=function(e){e.isClick()&&this.context.jumpInfo&&this.context.jumpInfo.index&&d.default.jumpOtherGame(this.context.jumpInfo.index,"reward")},t}(l.default);r.default=c,cc._RF.pop()},{}],vXiuxianTypeDialog:[function(e,t,i){"use strict";cc._RF.push(t,"a4159140GlJioMlO4I88KEb","vXiuxianTypeDialog");var n,o=e,r=i,a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(r,"__esModule",{value:!0});var l=o("ScleableButton"),d=o("DialogBase"),c=o("ViewBase"),u=o("mgrAd"),h=o("mgrDirector"),p=o("mgrSdk"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonSkin1=null,t.buttonSkin2=null,t.buttonSkin3=null,t.labelButton1=null,t.labelButton2=null,t.labelButton3=null,t.nodeSkin1=null,t.nodeSkin2=null,t.nodeSkin3=null,t.spriteButtonAdFlag2=null,t.spriteButtonAdFlag3=null,t.spriteSkin1=null,t.spriteSkin2=null,t.spriteSkin3=null,t}return a(t,e),t.prototype._getResourceName=function(){return"dialog/vXiuxianTypeDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[l.default,"onTouchButtonClose"],CC_buttonSkin1:[l.default,"onTouchButtonSkin1"],CC_buttonSkin2:[l.default,"onTouchButtonSkin2"],CC_buttonSkin3:[l.default,"onTouchButtonSkin3"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelButton3:[cc.Label],CC_nodeSkin1:[cc.Node],CC_nodeSkin2:[cc.Node],CC_nodeSkin3:[cc.Node],CC_spriteButtonAdFlag2:[cc.Sprite],CC_spriteButtonAdFlag3:[cc.Sprite],CC_spriteSkin1:[cc.Sprite],CC_spriteSkin2:[cc.Sprite],CC_spriteSkin3:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.fillData(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),u.default.preCheckAdNoCd("video_mode21_ad_type1")&&p.default.statisVideoPointEvent("video_mode21_ad_type1",1),u.default.preCheckAdNoCd("video_mode21_ad_type2")&&p.default.statisVideoPointEvent("video_mode21_ad_type2",1)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(h.default.enterScene("vGameXiuxianScene",{type:1}),this.closeDialog())},t.prototype.onTouchButtonSkin1=function(e){e.isClick()&&(h.default.enterScene("vGameXiuxianScene",{type:1}),this.closeDialog())},t.prototype.onTouchButtonSkin2=function(e){e.isClick()&&u.default.triggerAdEvent("video_mode21_ad_type1")},t.prototype.onTouchButtonSkin3=function(e){e.isClick()&&u.default.triggerAdEvent("video_mode21_ad_type2")},t.prototype.onMsgAdEventSuccessd=function(e){var t=e.adEventId;"video_mode21_ad_type1"==t?(h.default.enterScene("vGameXiuxianScene",{type:2}),this.closeDialog()):"video_mode21_ad_type2"==t&&(h.default.enterScene("vGameXiuxianScene",{type:3}),this.closeDialog())},s([c.default.requireResourceLoaded],t.prototype,"fillData",null),t}(d.default);r.default=f,cc._RF.pop()},{}]},{},["ActionFloat","AnimNode","Base64","CascadeColor","CfgParser","ColorEx","ComponentBase","Const","CryptoJS","CustomTween","DebugGrid","DebugMenu","DebugMouseControlNode","DialogBase","DragonBone","EffectGoneWithWind","EventTouchEx","FSMDialogBase","FSMObject","FSMSceneBase","FSMViewBase","Fish","Fish141","FishString","FishString12","FishString13","FishString2048","FishXiuxian","GameBodyMsg","GameBodyMsgBottom","GameCat","GameClickBalloon","GameClickTimeCount","GameDoorActor","GameDoorEnd","GameDrag","GameDragHorizontal","GameGraphics1","GameHero","GamePassword1","GamePasswordBase","GamePasswordGroup","GamePushForward","GameRope","GameWater","GameWaterMaker","GameWaterMaker1","GoldFish","Grid","IPoolManagerCacheableObject","IReuseLayouter","ISyncMonitor","LabelEx","LayerColor","LifeCycleMonitor","LogWrap","Manager","MsgHandler","NetworkAdapterBase","NetworkAdapterHttp","NetworkAdapterHttpUlServer","NetworkManager","NetworkTask","Particle","PoolManager","Randomizer","ResNode","ReuseLayouterHBox","ReuseLayouterHGrid","ReuseLayouterVBox","ReuseLayouterVGrid","ReuseList","ReusePageView","RichTextEx","SceneBase","ScleableButton","Spine","SpriteBasedClippingNode","SpriteEx","SyncMonitor","TaskManager","TestAnimNode","TestParticle","TestSound","TestSpine","Timer","Tools","UITools","ULAdapter","ULAdapterCreator2x","ULAdapterCreator3x","ULAdapterLaya","ULAdvAD","ULAdvBase","ULAdvDelegate","ULAdvDemo","ULAdvDemoBanner","ULAdvDemoInter","ULAdvDemoVideo","ULAdvEnum","ULAdvExecutor","ULAdvExpManager","ULAdvHeadLine","ULAdvHeadLineBanner","ULAdvHeadLineBannerItem","ULAdvHeadLineInter","ULAdvHeadLineVideo","ULAdvItem","ULAdvObjectBase","ULAdvScheme","ULAdvSlot","ULAdvTemplate","ULAffineTransform","ULApplication","ULBase64","ULBaseExecutor","ULBridge","ULBridgeAdItem","ULBridgeMiddle","ULBridgeRecorderItem","ULBridgeTool","ULButton","ULBuyQuantityExecutor","ULCdkExecutor","ULChainAdvExecutor","ULChannelRankListExecutor","ULCheckManager","ULClipboardExecutor","ULCloudStorageExecutor","ULColor","ULCompositeConstraint","ULConfigExecutor","ULConstraint","ULConstraintMaker","ULControl","ULCopExecutor","ULDebugAccount","ULDebugAdItem","ULDebugAdvManager","ULDebugBanner","ULDebugChannelRank","ULDebugCloudStorage","ULDebugConfig","ULDebugCop","ULDebugGameRecorder","ULDebugHttp","ULDebugManager","ULDebugPay","ULDebugStyle","ULDebugTool","ULDebugUi","ULDebugUid","ULDebugUlRankList","ULDefaultPanelCtx","ULDemoAdvExecutor","ULEncipher","ULError","ULEvalExp","ULEventEnum","ULFont","ULGameExecutor","ULGesture","ULGoldfingerExecutor","ULHttp","ULImage","ULImageView","ULJoinGroupExecutor","ULJoinGroupViewController","ULKit","ULKitAdapter","ULKitEvent","ULKitIndexedMap","ULKitPop","ULKitTool","ULKiwi","ULKiwiConstraint","ULKiwiExpression","ULKiwiPair","ULKiwiSolver","ULKiwiStrength","ULKiwiVariable","ULLabel","ULLayout","ULLayoutBase","ULLayoutConstraint","ULLayoutManager","ULLayoutRect","ULLayoutSolver","ULLoadImageWeb","ULLoadToolCreator2x","ULLoadToolCreator3x","ULLoadToolLaya","ULLog","ULLogExecutor","ULMenuView","ULModalViewController","ULModuleBase","ULModuleHeadLine","ULModuleStatistics","ULMsgExecutor","ULNativeControllerHtml5","ULOfficialAccountExecutor","ULPanelCreator2x","ULPanelCreator3x","ULPanelCtxManager","ULPanelHeadline","ULPanelLaya","ULPanelWeb","ULPanelWeb2d","ULPanelWebGL","ULPanelWeixin","ULPayExecutor","ULPrivacyPolicyExecutor","ULRankListExecutor","ULRecorderExecutor","ULRect","ULRectBase","ULRefreshAd","ULRefreshAdManager","ULRefreshNormalAd","ULResponder","ULSDK","ULScreen","ULScrollView","ULSdkManager","ULSearchViewController","ULSecurityCheckExecutor","ULSettingViewController","ULShareExecutor","ULShortcutExecutor","ULStatckView","ULStatisExecutor","ULStatisLog","ULStatisManager","ULStatisReport","ULStatisStorage","ULStatisTimer","ULStatisTools","ULStorageExecutor","ULSubscribeExecutor","ULSwitch","ULSystemExecutor","ULTableView","ULTableViewStoredTextCell","ULTextField","ULTextView","ULTipsExecutor","ULToastViewcontroller","ULTools","ULTouchExecutor","ULUrl","ULUserExecutor","ULVibrateExecutor","ULView","ULViewAttribute","ULViewConstraint","ULViewController","ULViewEnum","ULWebSocket","ULWindow","ULiOSBridge","UnitTestCase","UpdaterScript","ViewBase","_template","cConfig","init","main","mgrAchievement","mgrAd","mgrAdNative","mgrAlertRouter","mgrAlu","mgrBannerInt","mgrCfg","mgrChannel","mgrCop","mgrDebug","mgrDirector","mgrFishRank","mgrFishSkin","mgrGame","mgrGuide","mgrNative","mgrNativeAdSdk","mgrNetwork","mgrPlayer","mgrPool","mgrRecord","mgrReview","mgrRole","mgrSdk","mgrShader","mgrShop","mgrSound","mgrText","mgrTip","mgrUnitTest","mgrVideoRecorder","mgrWordFilter","pako","sAchievement","singlePageReuseList","ul","vAd2048AddNumDialog","vAdPromptDialog","vAdRevive","vAdReviveXiuxian","vAdSkinDialog","vAdStartDialog","vAddTimeAd2048Dialog","vAgeTipDialog","vAnchorSuccessDialog","vBigSkillDialog","vBigSkillItem","vBigSkillLevleAdDialog","vCdkDialog","vChanelWelfareDialog","vChanelWelfareItem","vCombineScene","vDebugInfoDialog","vDevTestScene","vEditorInputBox","vEditorNodeController","vEditorSaveImg","vFightPowerBean","vFindMeDialog","vFishDujieDialog","vFishRankItem","vFishRankPanel","vFishRankResultDialog","vFishResultDialog","vFishSkinDialog","vFishXiuxianResultDialog","vFollowDialog","vFreeMaxSkillDialog","vGame2048Scene","vGameAnchorScene","vGameBarbecueScene","vGameDNAScene","vGameDaughterScene","vGameDeviceScene","vGameFirearmsScene","vGameGoddessScene","vGameGunScene","vGameHouseScene","vGameInsectScene","vGameLifeScene","vGameLuoBoScene","vGameMotoScene","vGameQiQiangLuomuScene","vGameQiQiangScene","vGameQueenScene","vGameScene","vGameScene141","vGameSkillScene","vGameSnacksScene","vGameStarScene","vGameStringScene","vGameXiuxianScene","vGoddessSuccessDialog","vGotItemDialog","vGuessYouLike","vGuessYouLikeItem","vGuessYouLikeVertical","vGuideArrow","vGuideMask","vGuideTip","vGuideView","vHubScene","vInstallShortCutComfirmDialog","vJumpOtherGame","vJumpOtherGameSingle","vLevelBar","vLoadingScene","vLoadingTip","vMark","vMoreModeDialog","vMsgTip","vNativeBanner","vNativeDialog","vPreviewGameBoxDialog","vPromptDialog","vPromptDialogWithNativeBannerButton","vPromptFishDialog","vPromptFishXiuxianDialog","vPromptInputConfirmDialog","vPropChai","vPropDigger","vQueenSuccessDialog","vSettingDialog","vShareDialog","vSnowDialog","vStatisticsInfo","vThroughLoongLineScene","vTitleBar","vUpdaterSceneBase","vWarpSceneNode","vWeapon","vWelfareDialog","vWelfareItem","vXiuxianTypeDialog"]);