window.__require=function o(n,c,s){function r(t,e){if(!c[t]){if(!n[t]){var i=(i=t.split("/"))[i.length-1];if(!n[i]){var a="function"==typeof __require&&__require;if(!e&&a)return a(i,!0);if(h)return h(i,!0);throw new Error("Cannot find module '"+t+"'")}t=i}e=c[t]={exports:{}};n[t][0].call(e.exports,function(e){return r(n[t][1][e]||e)},e,e.exports,o,n,c,s)}return c[t].exports}for(var h="function"==typeof __require&&__require,e=0;e<s.length;e++)r(s[e]);return r}({AniTools:[function(e,t){cc._RF.push(t,"c1ddcRY/mRHiYxChOjYdF2+","AniTools"),window.AniTools={doLabStrAni:function(e,t,i){e.node.stopAllActions(),e.string="";var a=t.split(""),o=0,t=i/a.length;e.node.runAction(cc.sequence(cc.callFunc(function(){e.string=e.string+a[o],o++}),cc.delayTime(t)).repeat(a.length))},gunNumLabAni:function(e,t,i,a,o){var n,c,s;void 0===i&&(i=30),o=o||parseInt(e.string),t!=o&&(e.node.stopAllActions(),n=0,c=Math.abs(t-o),s=t<o?-1:1,Math.abs(t-o)>i&&(c=i,s*=Math.abs(t-o)/i),e.node.runAction(cc.sequence(cc.callFunc(function(){c-1<=n?e.string=a?ToolsJs.getStrForNum2(t):t:(o+=Math.floor(s),e.string=a?ToolsJs.getStrForNum2(o):Math.floor(o)),n++}),cc.delayTime(.02)).repeat(c)))},openUIAni:function(e,t,i,a){void 0===i&&(i=.3),e.opacity=0,t.scale=0,e.runAction(cc.fadeTo(i,100)),t.runAction(cc.sequence(cc.scaleTo(i,1).easing(cc.easeBackOut()),cc.callFunc(a)))},closeUIAni:function(e,t,i,a){void 0===i&&(i=.2),e.runAction(cc.fadeOut(i)),t.runAction(cc.sequence(cc.scaleTo(i,0).easing(cc.easeBackIn()),cc.callFunc(a),cc.removeSelf(!0)))},sortFadeInArr:function(e,t,i){void 0===t&&(t=.3),void 0===i&&(i=.02);for(var a=0;a<e.length;a++){var o=e[a];o.opacity=0,o.runAction(cc.sequence(cc.delayTime(i*a),cc.fadeIn(t)))}},jumpByDegressAni:function(e,t,i,a,o,n){void 0===i&&(i=0),void 0===n&&(n=0);t=cc.misc.degreesToRadians(t),t=cc.v2(Math.cos(t)*a,Math.sin(t)*a),o=a/o;e.runAction(cc.sequence(cc.delayTime(n),cc.jumpBy(o,cc.v2(1.5*t.x,i),a,1),cc.removeSelf(!0)))},moveDegressAni:function(e,t,i,a,o,n){t=t||this.returnRanNum(-180,180);t=cc.misc.degreesToRadians(t),t=cc.v2(Math.cos(t)*i,Math.sin(t)*i),i/=a,a=o?0:e.scale,o=n?0:e.opacity;e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1+i,a),cc.moveBy(i,t).easing(cc.easeQuadraticActionOut()),cc.fadeTo(.1+i,o)),cc.fadeOut(.1),cc.removeSelf(!0)))},moveByOutInit:function(e,t,i,a){void 0===t&&(t=.5),void 0===a&&(a=0),e.x+=i=void 0===i?0:i,e.y+=a,e.runAction(cc.moveBy(t,cc.v2(-i,-a)).easing(cc.easeBackOut()))},sprRedAni:function(e,t,i,a){var o=0;e.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(e){e.color=cc.Color.RED}),cc.delayTime(t),cc.callFunc(function(e){e.color=cc.Color.WHITE,++o>=i&&null!=a&&a()})).repeat(i))},shakeAni:function(e,t,i,a,o){void 0===i&&(i=10),void 0===a&&(a=.1),void 0===o&&(o=2);a=cc.sequence(cc.rotateBy(a,i),cc.rotateBy(a,-i),cc.rotateBy(a,-i),cc.rotateBy(a,i),cc.rotateBy(a,i),cc.rotateBy(a,-i),cc.delayTime(o));t?e.runAction(a.repeatForever()):e.runAction(a)},playAni:function(e,t){e.getComponent(cc.Animation).play(t)},stopAni:function(e,t){e.getComponent(cc.Animation).stop(t)},addNodeAni:function(e,t,a,i,o,n,c){var s=e.getComponent(cc.Animation),r=(null==s&&(s=e.addComponent(cc.Animation)),[]);if(ToolsJs.SpriteFrameDic[t+i]){for(var h=i;h<=o;h++){var l=ToolsJs.SpriteFrameDic[t+h];r.push(l)}this.addClipForAnimaton(s,r,a,c,n)}else for(var m=this,d=0,g=o-i+1,u=i;u<=o;u++)(i=>{cc.loader.loadRes(t+i,cc.SpriteFrame,function(e,t){t&&(d++,t.index=i,r.push(t)),g<=d&&(ToolsJs.sortArrForObject(r,"index"),m.addClipForAnimaton(s,r,a,c,n))})})(u)},addClipForAnimaton:function(e,t,i,a,o){t=cc.AnimationClip.createWithSpriteFrames(t,t.length);t.name=i,t.speed=a,t.wrapMode=o?cc.WrapMode.Loop:cc.WrapMode.Normal,e.addClip(t)},returnRanNum:function(e,t){return e+Math.floor(Math.random()*(t-e+1))}},cc._RF.pop()},{}],EventData:[function(e,t){cc._RF.push(t,"00f19xAv/JGmKf/MZ/AWHni","EventData"),window.EventData={UPDATE_GLOD:"updateGlod"},cc._RF.pop()},{}],EventManager:[function(e,t){cc._RF.push(t,"94634X4eDVNUoEnqKm3D5/S","EventManager"),window.EventManager={addListener:function(e,t,i){cc.systemEvent.on(e,t,i)},removeListener:function(e,t,i){cc.systemEvent.off(e,t,i)},dispachEvent:function(e,t,i,a,o,n){cc.systemEvent.emit(e,t,i,a,o,n)},removeListenerForTarget:function(e){cc.systemEvent.targetOff(e)}},cc._RF.pop()},{}],GameConfig:[function(e,t){cc._RF.push(t,"f0663sWtfNKCKOL+Hvnt0cI","GameConfig"),t.exports={GameClubButton:null,GameScene:null,launchScene:null,Bros:null,caS:null,MAIN_MENU_NUM:"Classic",gameScore:0,standScore:6,GAME_OVER_BOOL:!0,publicGameBool:!1,ranLinkData:null,recGameData:null,InfoData:null,endShow0:null,endShow1:null,endShow2:null,endShow3:null,infoGameName:null,showText:null,startText:null,moreGameText:null,playAgainText:null,playNum:0,curType:2,noTouchBool:!0,enterGameNum:0,enterGameFlags:!1,returnRanNum:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},getAngle:function(e,t,i,a){var o=Math.abs(e-i),n=Math.abs(t-a),o=n/Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),n=Math.acos(o),o=180/(Math.PI/n);return a<t&&(o=180-o),i<e&&(o*=-1),o},setLocalStorage:function(e,t){cc.sys.localStorage.setItem(e,t)},getLocalStorage:function(e){return cc.sys.localStorage.getItem(e)}},cc._RF.pop()},{}],GameUiTools:[function(e,t){cc._RF.push(t,"b21e8tF461OFalpptyeuAE2","GameUiTools"),e("GameConfig"),t.exports={newSprite:function(e,t){var i=new cc.Node;return t?(e=e.split(".")[0],i.addComponent(cc.Sprite).spriteFrame=GameTools.love2048FrameCache.getSpriteFrame(e)):i.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame("res/raw-assets/resources/"+e),i},setNodeSpriteFrame:function(e,t){e.getComponent(cc.Sprite).spriteFrame=GameTools.love2048FrameCache.getSpriteFrame(t)},setButtonClickEvents:function(e,t,i,a,o){var n=new Array;null==t.length?n[0]=t:n=t;for(var c=0;c<n.length;c++){var s=new cc.Component.EventHandler,r=(s.target=e.node,s.component=e.node.name,s.handler=i,null==t.length?s.customEventData=a:s.customEventData=c,n[c].addComponent(cc.Button));r.clickEvents.push(s),null!=o&&!o||(r.transition=cc.Button.Transition.SCALE,r.duration=.1,r.zoomScale=1.2)}},scheduleOnce:function(e,t,i){e.runAction(cc.sequence(cc.delayTime(i),cc.callFunc(t,e)))},loadingScene:function(i,e){e?cc.loader.loadRes("panel/LoadingLayer",function(e,t){t=cc.instantiate(t);cc.director.getScene().children[0].addChild(t),cc.director.preloadScene(i,function(){cc.director.loadScene(i)})}):cc.director.preloadScene(i,function(){cc.director.loadScene(i)})},loadingLayer:function(e){cc.loader.loadRes(e,function(e,t){e||(e=cc.instantiate(t),cc.director.getScene().children[0].addChild(e,100))})}},cc._RF.pop()},{GameConfig:"GameConfig"}],HttpManagerJs:[function(e,t){cc._RF.push(t,"197e1hfNnxIcJx73V3VhUxY","HttpManagerJs");var a=e("GameConfig");(e={URL:"http://g.vsane.com/Service/Share/index",cacheList:null,isBusy:null,req:null,perform:null,retGameId:0}).cacheList=[],e.ctor=function(){},e.checkHave=function(){this.isBusy||this.sendOne()},e.httpInitUrl=function(e){var t=window.location.href,t=t.substring(0,t.lastIndexOf("//")+2)+window.location.host+"/Service/Share/index";this.URL=t,console.log("data",this.URL),this.retGameId=e},e.send=function(e,t,i,a){this.cacheList.push({type:e,data:t,func:i,target:a}),this.isBusy||this.sendOne()},e.sendOne=function(){var e,t;0!=this.cacheList.length&&(this.isBusy=!0,this.perform=this.cacheList.shift(),this.req=cc.loader.getXMLHttpRequest(),this.req.onreadystatechange=this.onDataHandler.bind(this),this.req.onerror=this.onErrorHandler.bind(this),this.req.ontimeout=this.onTimeoutHandler.bind(this),this.req.timeout=2e3,cc.log("pos",this.URL),this.req.open("POST",this.URL),this.req.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),t=this.returnLanguage(),console.log("gameIdid",this.retGameId),e=this.retGameId,e={type:this.perform.type,gid:e,mid:null,data:this.perform.data,languageType:t},t="send="+JSON.stringify(e),this.req.send(t))},e.onDataHandler=function(){var e,t,i;404!=this.req.status?4==this.req.readyState&&200<=this.req.status&&this.req.status<=207&&this.req.responseText&&(e=JSON.parse(this.req.responseText),this.isBusy=!1,this.perform.target?this.perform.func.call(this.perform.target,e.error,e.data,e.commendGame,e.gameInfo):this.perform.func(e)):(t=a.launchScene,i=a.Bros,a.caS,cc.director.loadScene(t,null,function(){var e;i&&(e=document.getElementById("GameDiv"))&&(e.style.backgroundImage=""),cc.loader.onProgress=null,console.log("Success to load scene: "+t)}))},e.returnLanguage=function(){return(""+window.navigator.language).toLocaleLowerCase()},e.onErrorHandler=function(){cc.log("ç½‘ç»œé”™è¯¯"),this.isBusy=!1,this.perform.target?this.perform.func.call(this.perform.target,-1):this.perform.func(-1)},e.onTimeoutHandler=function(){cc.log("è¯·æ±‚è¶…æ—¶"),this.isBusy=!1,this.perform.target?this.perform.func.call(this.perform.target,-1):this.perform.func(-1)},e.clearAll=function(){for(var e=this.cacheList.length,t=0;t<e;t++){var i=this.cacheList[t];i&&(i.target?i.func.call(i.target,-1):i.func(-1))}this.cacheList.length=0},t.exports=e,cc._RF.pop()},{GameConfig:"GameConfig"}],LanguageSetJs:[function(e,t){cc._RF.push(t,"4754e8KuPZJCqklCNyKpG29","LanguageSetJs"),t.exports={language_1:{game_name:"ã€Œå¬å”¤ç¥žé¾™ã€",game_name1:"å¬å”¤ç¥žé¾™",game_info:"ç‚¹å‡»å±å¹•ä¸²ç å­ï¼Œä¸¤ä¸ªç›¸åŒçº§åˆ«çš„ç å­ä¼šåˆæˆæ›´é«˜çº§çš„ç å­ã€‚",txtStart:"å¼€å§‹",txtMore:"æ›´å¤šæ¸¸æˆ",txtAgain:"å†çŽ©ä¸€æ¬¡",txtShare1:"åœ¨æ¸¸æˆä¸­ ",txtShare2:"å¾—åˆ†äº†ï¼Œå¥½å•Š!ä½ å’Œæˆ‘ä¸€èµ·æ¥æ¯”èµ›!",bgRgb:"#3698C5",gameT1:"å…³æ³¨æˆ‘ä»¬",gameT2:"çº¸ç‰ŒæŽ¥é¾™",gameT3:"é”¦ä¸Šæ·»èŠ±",gameUrl1:"http://g.regogame.com/game/9/",gameUrl2:"http://g.regogame.com/game/3/",gameT11:"å…³æ³¨å¾®ä¿¡",gameT12:"å…³æ³¨Kakao",gameT13:"å…³æ³¨Line",gameEndL:"æ¸¸ æˆ ç»“ æŸ",gameEndL1:"ç¨ å€™ æŸ¥ çœ‹ åˆ† æ•°"},language_2:{game_name:"ã€ŒDragon Mergeã€",game_name1:"Dragon Merge",game_info:"Tap the screen to string beads, and two beads of the same level will synthesize more advanced beads.",txtStart:"Start",txtMore:"More Game",txtAgain:"Play Again",txtShare1:"In Game ",txtShare2:" Let's play together!",bgRgb:"#3698C5",gameT1:"Follow Us",gameT2:"Thousand Flower",gameT3:"Eliminate Star",gameUrl1:"http://g.fromgame.com/game/53",gameUrl2:"http://g.fromgame.com/game/13",gameT11:"Focus WeChat",gameT12:"Focus Kakao",gameT13:"Focus Line",gameEndL:"Game OVer",gameEndL1:"View the score later"}},cc._RF.pop()},{}],LoadSceneJs:[function(e,t){cc._RF.push(t,"3ef908fwfNIwJsOjET8tCh2","LoadSceneJs"),t.exports={goToCover:function(e,t,i,a,o){e=null==e||e;console.log("LoadBoolBeforeLoadS",e),this.needShow=!1,e?(this.needShow=!0,showMyAds()):this.needShow=!1,this.needShow&&(null==preloader&&this.startGoToGame(i,a,o),resCompleteFlag=!0,!adCompleteFlag||!resCompleteFlag)||this.startGoToGame(i,a,o)},startGoToGame:function(){console.log("goToScene"),noAdGoToScene()}},cc._RF.pop()},{}],MainGameJS:[function(e,t){cc._RF.push(t,"0e7a8SkMLxEY7nCB1Bqi8WZ","MainGameJS");var r=e("GameConfig"),h=e("GameUiTools"),l=e("MainManage"),t=(e("mTool_WHQ"),e("../commonJs/GameConfig").gameScore,e("../commonJs/GameUiTools")),S=(t.scheduleOnce,e("../commonJs/mTool_WHQ"));e("../MainManage").endHttpShowInfo,cc.Class({extends:cc.Component,properties:{startBgNode:cc.Node,sceneScore:cc.Label,gameOverT1:cc.Label,gameOverT2:cc.Label,nameLabel:cc.Label,blackLayerPre:cc.Node,enemyNode:cc.Node,playerNode:cc.Node,leafNode:cc.Node,carmeraNode:cc.Node,liziNode:cc.Node,stoneNode:cc.Node,gameOverPre:cc.Prefab,leafPre:cc.Prefab,enemyPreArr:[cc.Prefab],newFishPreArr:[cc.Prefab],BGPre:cc.Prefab,bianjiePre:cc.Prefab,BubblePre:cc.Prefab,PanlongPre:cc.Prefab,bowenPre:cc.Prefab,bloodPre:cc.Prefab,replayButtonPre:cc.Prefab,mainBtnPre:cc.Prefab,ripplePre:cc.Prefab,liziPre:cc.Prefab,starPre:cc.Prefab,lightPre:cc.Prefab,eatMusic:{default:null,type:cc.AudioClip},HurtMusic:{default:null,type:cc.AudioClip},failMusic:{default:null,type:cc.AudioClip}},judgeCurPlatform:function(){console.log(navigator.userAgent);i=navigator.userAgent,e=/(?:Windows Phone)/.test(i),e=/(?:SymbianOS)/.test(i)||e,t=/(?:Android)/.test(i),a=/(?:Firefox)/.test(i),/(?:Chrome|CriOS)/.test(i);var e,t,i,a={isTablet:a=/(?:iPad|PlayBook)/.test(i)||t&&!/(?:Mobile)/.test(i)||a&&/(?:Tablet)/.test(i),isPhone:i=/(?:iPhone)/.test(i)&&!a,isAndroid:t,isPc:!i&&!t&&!e};a.isAndroid||a.isPhone?this.platFromNum=1:a.isTablet?this.platFromNum=2:a.isPc&&(this.platFromNum=3)},adapterScreen:function(){var e=cc.find("Canvas").getComponent(cc.Canvas);2==this.platFromNum||3==this.platFromNum?(e.fitWidth=!0,e.fitHeight=!0):(e.fitWidth=!0,e.fitHeight=!1)},onLoad:function(){r.publicGameBool?l.init():finishLoad(),this.platFromNum=1,this.judgeCurPlatform(),this.adapterScreen(),this.gameOveEndBool=!1,this.gameOverNum=0,this.gameWidth=cc.winSize.width,this.gameHeight=cc.winSize.height,r.curType=this.returnCurrentLanType(),1<=r.playNum&&(this.startBgNode.active=!1),r.playNum++,cc.log(r.playNum),this.addTouchEvents(),h.loadingLayer("panel/LinkIconSpr"),cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!0,this.touchBeginFlags=!0,this.Hscale=1280/this.gameHeight,this.Wscale=720/this.gameWidth,this.SizeScale=0,this.Hscale>=this.Wscale?this.SizeScale=this.Wscale:this.SizeScale=this.Hscale,r.publicGameBool||this.play(),this.canCreateDisX=0,this.canCreateDisY=0,this.OffPos=null,this.speedNum=400/this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,this.speed=this.speedNum,this.BGNum=9,this.kedouArr=[],this.qingwaArr=[],this.haiguiArr=[],this.xiaojinyuArr=[],this.jinliArr=[],this.dianmanArr=[],this.shayuArr=[],this.jingyuArr=[],this.jiaoArr=[],this.longArr=[],this.tempArr=[],this.BGArr=[],this.fishScaleX=[],this.fishScaleY=[],this.myFish=null,this.lightFlags=!1,this.boolFlags=!1,this.gameOverFlags=!1,this.canMoveFlags=!0,this.firstFlags=!0,this.BGNode=cc.find("Canvas/bgLayer"),this.scale=.4*this.SizeScale;for(var e=0;e<this.playerNode.children.length-1;e++)this.changeSize(this.playerNode.children[e]);this.playerNode.typeID=1,this.createMap(),this.maxCameraMovePosX=Math.abs(this.BGArr[0][this.BGNum-1].x)-this.gameWidth,this.maxCameraMovePosY=Math.abs(this.BGArr[0][this.BGNum-1].y)-this.gameHeight/2;for(var t=0;t<this.leafNode.children.length;t++){var i=this.leafNode.children[t].position,a=200*this.SizeScale*this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio;(i.x>this.maxCameraMovePosX-a||i.x<-this.maxCameraMovePosX+a||i.y>this.maxCameraMovePosY-a||i.y<-this.maxCameraMovePosY+a)&&(this.leafNode.children[t].opacity=180)}this.myFish=this.playerNode.getChildByName("kedou"),this.CreateEnemy(60),this.waterCount=0,this.randnum=10,this.angle=0,this.rotSpeed=1500,this.addSpeed=65,this.maxTypeID=1,this.canTouchReplay=!1;for(var o=0;o<9;o++){var n=this.playerNode.children[o].scaleX;this.fishScaleX.push(n)}for(var c=0;c<9;c++){var s=this.playerNode.children[c].scaleY;this.fishScaleY.push(s)}this.jingyuNum=0,this.jiaoNum=0,this.Wu=cc.find("Canvas/Wu"),this.light1=cc.find("Canvas/light1"),this.light2=cc.find("Canvas/light2"),this.Wu.width=this.gameWidth,this.Wu.height=this.gameHeight,this.stoneNode.zIndex=50,this.Wu.setPosition(cc.v2(0,0)),this.Wu.zIndex=1e3,this.light1.zIndex=1200,this.light2.zIndex=1300,this.LightNumCount=0,this.lightjudeTime=0,this.playerNode.zIndex=9999,this.leafNode.zIndex=1e4},start:function(){},play:function(){console.log(1);this.enableButtons()},enableButtons:function(){},returnCurrentLanType:function(){var e=1;switch(cc.sys.language){case cc.sys.LANGUAGE_CHINESE:e="zh-TW"==window.navigator.language||"zh-tw"==window.navigator.language||"zh-HK"==window.navigator.language||"zh-hk"==window.navigator.language?(cc.log("ç¹ä½“"),2):(cc.log("ç®€ä½“"),1);break;case cc.sys.LANGUAGE_KOREAN:e=4;break;default:e=3}return e},changeSize:function(e){e.scaleX=(e.scaleX-.1)*this.SizeScale,e.scaleY=(e.scaleY-.1)*this.SizeScale},CreateBG:function(){for(var e=this.BGNum,t=0;t<e;t++){for(var i=[],a=0;a<e;a++){var o=cc.instantiate(this.BGPre),n=(this.BGNode.addChild(o),o.width=this.gameHeight,o.height=this.gameHeight,o.width),c=o.height,s=(this.canCreateDisX=n*e/2-n,this.canCreateDisY=c*e/2-c,cc.v2(-n*Math.floor(e/2),c*Math.floor(e/2))),n=cc.v2(s.x+n*t,s.y-c*a);o.setPosition(n),i.push(o),0<t&&t<e-1&&0<a&&a<e-1&&(s=S.getRandomNum(0,1,!0),this.CreateLeaf(s,o))}this.BGArr.push(i)}},getCreatePos:function(e,t){void 0===t&&(t=0);var i=e.width,a=e.height,i=S.getRandomNum(-i/4,i/4,!1),a=S.getRandomNum(-a/4,a/4,!1),i=cc.v2(i+e.x,a+e.y),o=this.leafNode.convertToNodeSpaceAR(this.BGNode.convertToWorldSpaceAR(i));if(100<++t)return null;for(var n=0;n<this.leafNode.children.length;n++)if(S.pDistance(o,this.leafNode.children[n].position)<400)return this.getCreatePos(e,t);return o},CreateLeaf:function(e,t){for(var i=0;i<e;i++){var a=cc.instantiate(this.leafPre),o=S.getRandomNum(1,2,!0),n=S.getRandomNum(1,2,!1)*this.SizeScale,n=(a.scaleX=n,a.scaleY=n,a.angle=S.getRandomNum(-30,30,!1),ToolsJs.setTexture(a,"leaf"+o),this.leafNode.addChild(a),this.getCreatePos(t));n?a.setPosition(n):a.destroy()}},CreateBianJie:function(){for(var e,t,i=1;i<this.BGNum-1;i++)i==Math.floor(this.BGNum/2)&&(e=cc.instantiate(this.bianjiePre),ToolsJs.setTexture(e,"bian"),this.BGNode.addChild(e,100),t=this.BGArr[0][i].position,e.width=1.8*this.gameHeight,e.height=1.8*this.gameHeight,e.angle=90,e.setPosition(cc.v2(t.x-this.gameHeight/4,t.y)),ToolsJs.setNodeParent(e,this.node),e.zIndex=100);for(var a,o,n=1;n<this.BGNum-1;n++)n==Math.floor(this.BGNum/2)&&(a=cc.instantiate(this.bianjiePre),ToolsJs.setTexture(a,"bian"),this.BGNode.addChild(a,100),o=this.BGArr[this.BGNum-1][n].position,a.width=1.8*this.gameHeight,a.height=1.8*this.gameHeight,a.angle=-90,a.setPosition(cc.v2(o.x+this.gameHeight/4,o.y)),ToolsJs.setNodeParent(a,this.node),a.zIndex=100);for(var c,s,r=1;r<this.BGNum-1;r++)r==Math.floor(this.BGNum/2)&&(c=cc.instantiate(this.bianjiePre),ToolsJs.setTexture(c,"bian"),this.BGNode.addChild(c,100),s=this.BGArr[r][0].position,c.width=1.8*this.gameHeight,c.height=1.8*this.gameHeight,c.angle=0,c.setPosition(cc.v2(s.x,s.y+this.gameHeight/4)),ToolsJs.setNodeParent(c,this.node),c.zIndex=100);for(var h,l,m=1;m<this.BGNum-1;m++)m==Math.floor(this.BGNum/2)&&(h=cc.instantiate(this.bianjiePre),ToolsJs.setTexture(h,"bian"),this.BGNode.addChild(h,100),l=this.BGArr[m][this.BGNum-1].position,h.width=1.8*this.gameHeight,h.height=1.8*this.gameHeight,h.angle=180,h.setPosition(cc.v2(l.x,l.y-this.gameHeight/4)),ToolsJs.setNodeParent(h,this.node),h.zIndex=100);for(var d=0;d<4;d++){var g,u,p=cc.instantiate(this.bianjiePre);this.BGNode.addChild(p,300+d),p.width=6*this.gameHeight,p.height=6*this.gameHeight,0==d&&(g=this.BGArr[0][0].position,p.angle=0,p.setPosition(cc.v2(g.x+this.gameHeight/3,g.y-this.gameHeight/3))),1==d&&(g=this.BGArr[0][this.BGNum-1].position,p.angle=90,p.setPosition(cc.v2(g.x+this.gameHeight/3,g.y+this.gameHeight/3))),2==d&&(u=this.BGArr[this.BGNum-1][0].position,p.angle=-90,p.setPosition(cc.v2(u.x-this.gameHeight/3,u.y-this.gameHeight/3))),3==d&&(u=this.BGArr[this.BGNum-1][this.BGNum-1].position,p.angle=180,p.setPosition(cc.v2(u.x-this.gameHeight/3,u.y+this.gameHeight/3))),ToolsJs.setNodeParent(p,this.node),p.zIndex=100}},createMap:function(){this.CreateBG(),this.CreateBianJie();var e=cc.instantiate(this.enemyPreArr[0]),t=(this.enemyNode.addChild(e),this.changeSize(e),e.typeID=1,e.speed=100,this.enemyNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.playerNode.position))),i=S.getRandomNum(this.gameWidth/3,3*this.gameWidth/4,!1),a=360*Math.random(),t=S.getCircumferencePos(t,i,a);e.setPosition(t),this.enemyAction(e)},CameraMove:function(e){var t,i,a,o,n;this.gameOverFlags||(a=i=0,(t=this.playerNode).x<=-this.maxCameraMovePosX||t.x>=this.maxCameraMovePosX||t.y<=-this.maxCameraMovePosY||t.y>=this.maxCameraMovePosY?(n=t.x+this.OffPos.x*this.speed*e,o=t.y+this.OffPos.y*this.speed*e,n<-this.maxCameraMovePosX&&o>-this.maxCameraMovePosY&&o<this.maxCameraMovePosY?(a=this.speedNum,i=0,t.x=-this.maxCameraMovePosX):n>=this.maxCameraMovePosX&&o>=-this.maxCameraMovePosY&&o<=this.maxCameraMovePosY?(a=this.speedNum,i=0,t.x=this.maxCameraMovePosX):o>=this.maxCameraMovePosY&&n>=-this.maxCameraMovePosX&&n<=this.maxCameraMovePosX?(i=this.speedNum,a=0,t.y=this.maxCameraMovePosY):o<=-this.maxCameraMovePosY&&n>=-this.maxCameraMovePosX&&n<=this.maxCameraMovePosX?(i=this.speedNum,a=0,t.y=-this.maxCameraMovePosY):n<=-this.maxCameraMovePosX&&o<=-this.maxCameraMovePosY?(a=i=0,t.x=-this.maxCameraMovePosX,t.y=-this.maxCameraMovePosY):n<=-this.maxCameraMovePosX&&o>=this.maxCameraMovePosY?(a=i=0,t.x=-this.maxCameraMovePosX,t.y=this.maxCameraMovePosY):n>=this.maxCameraMovePosX&&o<=-this.maxCameraMovePosY?(a=i=0,t.x=this.maxCameraMovePosX,t.y=-this.maxCameraMovePosY):n>=this.maxCameraMovePosX&&o>=this.maxCameraMovePosY?(a=i=0,t.x=this.maxCameraMovePosX,t.y=this.maxCameraMovePosY):(i=this.speedNum,a=this.speedNum)):(i=this.speedNum,a=this.speedNum),n=cc.misc.degreesToRadians(this.angle),t.x+=Math.floor(-Math.sin(n)*i*e),t.y+=Math.floor(Math.cos(n)*a*e),t.x>=-this.maxCameraMovePosX+this.gameWidth/4&&t.x<=this.maxCameraMovePosX-this.gameWidth/4&&t.y>=-this.maxCameraMovePosY+this.gameHeight/4&&t.y<=this.maxCameraMovePosY-this.gameHeight/4?this.carmeraNode.setPosition(t.position):t.x>-this.maxCameraMovePosX+this.gameWidth/4&&t.x<this.maxCameraMovePosX-this.gameWidth/4&&t.y<-this.maxCameraMovePosY+this.gameHeight/4?this.carmeraNode.setPosition(cc.v2(t.x,-this.maxCameraMovePosY+this.gameHeight/4)):t.x>-this.maxCameraMovePosX+this.gameWidth/4&&t.x<this.maxCameraMovePosX-this.gameWidth/4&&t.y>this.maxCameraMovePosY-this.gameHeight/4?this.carmeraNode.setPosition(cc.v2(t.x,this.maxCameraMovePosY-this.gameHeight/4)):t.y>-this.maxCameraMovePosY+this.gameHeight/4&&t.y<this.maxCameraMovePosY-this.gameHeight/4&&t.x>this.maxCameraMovePosX-this.gameWidth/4?this.carmeraNode.setPosition(cc.v2(this.maxCameraMovePosX-this.gameWidth/4,t.y)):t.y>-this.maxCameraMovePosY+this.gameHeight/4&&t.y<this.maxCameraMovePosY-this.gameHeight/4&&t.x<-this.maxCameraMovePosX+this.gameWidth/4?this.carmeraNode.setPosition(cc.v2(-this.maxCameraMovePosX+this.gameWidth/4,t.y)):t.y>=this.maxCameraMovePosY-this.gameHeight/4&&t.x<-this.maxCameraMovePosY+this.gameWidth/4?this.carmeraNode.setPosition(cc.v2(-this.maxCameraMovePosX+this.gameWidth/4,this.maxCameraMovePosY-this.gameHeight/4)):t.y>this.maxCameraMovePosY-this.gameHeight/4&&t.x>this.maxCameraMovePosY-this.gameWidth/4?this.carmeraNode.setPosition(cc.v2(this.maxCameraMovePosX-this.gameWidth/4,this.maxCameraMovePosY-this.gameHeight/4)):t.y<-this.maxCameraMovePosY+this.gameHeight/4&&t.x>this.maxCameraMovePosY-this.gameWidth/4?this.carmeraNode.setPosition(cc.v2(this.maxCameraMovePosX-this.gameWidth/4,-this.maxCameraMovePosY+this.gameHeight/4)):t.y<-this.maxCameraMovePosY+this.gameHeight/4&&t.x<-this.maxCameraMovePosY+this.gameWidth/4&&this.carmeraNode.setPosition(cc.v2(-this.maxCameraMovePosX+this.gameWidth/4,-this.maxCameraMovePosY+this.gameHeight/4)),this.BubbleAction())},CameraChangeZoomRatio:function(e,t){var i,a;e!=t&&((i=this.carmeraNode.getChildByName("MoveCamera")).stopAllActions(),i.getComponent(cc.Camera).zoomRatio,a=0<t-e?!1:!0,e=Math.abs(t-e),e=Math.floor(e/.01),i.runAction(cc.sequence(cc.callFunc(function(){i.getComponent(cc.Camera).zoomRatio!=t&&(a?i.getComponent(cc.Camera).zoomRatio-=.01:i.getComponent(cc.Camera).zoomRatio+=.01)},this),cc.delayTime(.005)).repeat(e)))},getEnemyPos:function(e,t){if(this.BGNode&&(void 0===t&&(t=0),!this.gameOverFlags)){var i,a=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,o=this.enemyNode.convertToNodeSpaceAR(this.BGNode.convertToWorldSpaceAR(this.BGArr[0][this.BGNum-1].position)),n=Math.abs(o.x)-e.width-400,o=Math.abs(o.y)-e.height-400,n=S.getRandomNum(-n,n,!1),o=S.getRandomNum(-o,o,!1),c=cc.v2();if(this.firstFlags||(c=cc.v2(n,o)),100<++t)return n=this.playerNode.position,o=this.enemyNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.playerNode.position)),i=(i=s=0)<=n.x&&0<=n.y?(s=-this.gameWidth/a,-this.gameHeight/a):n.x<0&&0<=n.y?(s=this.gameWidth/a,-this.gameHeight/a):(s=0<=n.x&&n.y<0?-this.gameWidth/a:this.gameWidth/a,this.gameHeight/a),cc.v2(o.x+s,o.y+i);if(this.firstFlags){var n=S.getRandomNum(2*-this.gameHeight,2*this.gameHeight,!1),s=S.getRandomNum(2*-this.gameHeight,2*this.gameHeight,!1),c=cc.v2(n,s);if(S.pDistance(c,cc.v2(0,0))<200)return this.getEnemyPos(e,t)}o=this.enemyNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.playerNode.position));if(S.pDistance(c,o)<(this.gameHeight+e.width)/a)return this.getEnemyPos(e,t);for(var r=0;r<this.enemyNode.children.length;r++)if(S.pDistance(c,this.enemyNode.children[r].position)<500)return this.getEnemyPos(e,t);return c}},getEnemyID:function(e){var t=S.getRandomNum(0,100,!1),i=0;return 1==e?i=t<50?0:50<t&&t<75?1:2:2==e?i=t<20?0:25<t&&t<50?1:50<t&&t<70?2:3:3==e?i=t<20?0:t<35?1:t<40?2:t<70?3:4:4==e?i=t<20?1:t<35?2:t<40?3:40<t&&t<70?4:5:5==e?t<=15?i=2:t<=30?i=3:t<=35?i=4:t<=60?i=5:t<=90?i=6:this.jingyuNum<1&&(i=7,this.jingyuNum++):6==e?t<=15?i=3:t<=30?i=4:t<=35?i=5:t<=65?i=6:t<=90?this.jingyuNum<3?(i=7,this.jingyuNum++):i=6:this.jiaoNum<2?(i=8,this.jiaoNum++):i=this.jingyuNum<3?7:6:7==e?t<=20?i=3:t<=25?i=4:t<=30?i=5:t<=35?i=6:this.jingyuNum<5?(i=7,this.jingyuNum++):this.jiaoNum<5?(i=8,this.jiaoNum++):i=S.getRandomNum(3,4,!0):8==e?t<40?i=3:t<45?i=4:t<=50?i=5:t<=55?i=6:random<=60?this.jingyuNum<3&&(i=7,this.jingyuNum++):this.jiaoNum<3?(i=8,this.jiaoNum++):i=S.getRandomNum(4,5,!0):i=S.getRandomNum(3,5,!0),4<=e&&i==e-1?this.getEnemyID(e):i},CreateEnemy:function(e){for(var t=0;t<e;t++){var i=t<=.8*e?0:.8*e<t&&t<=.9*e?1:2,a=cc.instantiate(this.enemyPreArr[i]),i=(this.changeSize(a),a.typeID=1+i,this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio),i=(a.speed=(200-15*a.typeID)/i,this.getEnemyPos(a));i?(this.enemyNode.addChild(a,1),a.setPosition(i),a.getComponent("enemyJS").active=!0,this.enemyAction(a)):a.destroy()}this.firstFlags=!1},updateCreate:function(){this.gameOverFlags||this.CreateSingleEnemy(1,this.playerNode.typeID)},CreateSingleEnemy:function(e,t){if(!this.gameOverFlags){var i=this.enemyNode.children.length;if((f=this.playerNode.typeID)<=3){if(60<i)return}else if(4<=f&&f<=5){if(50<i)return}else if(5<f&&f<=7){if(40<i)return}else if(7<f&&20<i)return;for(var a=0;a<e;a++){var o=this.getEnemyID(t),n=cc.instantiate(this.enemyPreArr[o]);this.changeSize(n),n.typeID=o+1,n.isSpecialFish=!0,n.specialScore=[100,200,300,500,800,1e3,1500,2e3,3e3,5e3][o]||999;try{var c,s,r,h=o+1,l=new cc.Node("specialMark"),m=l.addComponent(cc.Graphics),d=h<=3?(c=30,s=new cc.Color(255,255,150,180),r=new cc.Color(255,215,0,255),1):h<=6?(c=45,s=new cc.Color(255,215,0,200),r=new cc.Color(255,140,0,255),2):h<=8?(c=60,s=new cc.Color(255,165,0,220),r=new cc.Color(255,69,0,255),3):(c=80,s=new cc.Color(255,69,0,240),r=new cc.Color(255,0,0,255),4);m.circle(0,0,c+10),m.fillColor=new cc.Color(255,255,255,80),m.fill(),m.circle(0,0,c),m.fillColor=s,m.fill(),m.circle(0,0,c),m.strokeColor=r,m.lineWidth=4,m.stroke(),m.circle(0,0,.6*c),m.strokeColor=new cc.Color(255,255,255,150),m.lineWidth=2,m.stroke(),n.addChild(l,500),l.setPosition(0,0),l.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.8,1.2).easing(cc.easeSineInOut()),cc.scaleTo(.8,1).easing(cc.easeSineInOut()))));for(var g=new cc.Node("starLabel"),u=g.addComponent(cc.Label),p="",f=0;f<d;f++)p+="â­";u.string=p,u.fontSize=25+3*h,g.color=cc.Color.YELLOW,l.addChild(g,1),g.setPosition(0,c+20),g.runAction(cc.repeatForever(cc.rotateBy(3,360))),console.log("âœ¨ ç±»åž‹"+h+"é±¼ | ç§¯åˆ†:"+n.specialScore+" | æ ‡è®°:"+c+"px | "+p)}catch(e){console.error("âŒ æ ‡è®°å¤±è´¥:",e.message)}o=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,o=(n.speed=(200-10*n.typeID)/o,this.getEnemyPos(n));o?(this.enemyNode.addChild(n,1),n.setPosition(o),n.getComponent("enemyJS").active=!0,this.enemyAction(n)):n.destroy()}}},judgeEnemyPos:function(e){var t=this.enemyNode.convertToNodeSpaceAR(this.BGNode.convertToWorldSpaceAR(this.BGArr[0][0].position)),i=Math.abs(t.x),t=Math.abs(t.y);e.x>i-this.gameHeight||e.y>t-this.gameHeight||e.x<-i+this.gameHeight||e.y<-t+this.gameHeight?this.EnemyReturnAction(e):this.enemyAction(e)},enemyAction:function(e){e.stopAllActions();var t=S.getRandomNum(500,1e3,!0),i=e.position,a=S.getRandomNum(-t,t,!0),t=S.getRandomNum(-t,t,!0),a=cc.v2(i.x+a,i.y+t),t=this.enemyNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(a)),a=Math.atan2(t.y-i.y,t.x-i.x),a=cc.misc.radiansToDegrees(a)-90,o=e.speed,i=S.pDistance(i,t)/o;e.runAction(cc.sequence(cc.spawn(cc.moveTo(i,t),cc.rotateTo(.3,a)),cc.callFunc(function(){this.judgeEnemyPos(e)},this)))},EnemyReturnAction:function(e){e.stopAllActions();var t=e.speed,i=S.getRandomNum(1e3,1300,!1),t=i/t,a=Math.atan2(-e.y,-e.x),o=cc.misc.radiansToDegrees(a)-90;e.runAction(cc.sequence(cc.spawn(cc.moveBy(t,i*Math.cos(a),i*Math.sin(a)),cc.rotateTo(.3,o)),cc.callFunc(function(){this.judgeEnemyPos(e)},this)))},ChasePlayer:function(e){e.stopAllActions();var t=e.position,i=this.playerNode.position,i=Math.atan2(i.y-t.y,i.x-t.x),t=e.speed,a=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,a=S.getRandomNum(100/a,200/a,!1),t=a/t,o=cc.misc.radiansToDegrees(i)-90;e.runAction(cc.sequence(cc.spawn(cc.moveBy(t,a*Math.cos(i),a*Math.sin(i)),cc.rotateTo(2*t/3,o)),cc.callFunc(function(){this.ChasePlayer(e)},this)))},EscapePlayer:function(e){e.stopAllActions();var t=e.position,i=this.playerNode.position,t=Math.atan2(t.y-i.y,t.x-i.x),i=e.speed,a=S.getRandomNum(100,200,!1),i=a/i,o=cc.misc.radiansToDegrees(t)-90;e.runAction(cc.sequence(cc.spawn(cc.moveBy(i,a*Math.cos(t),a*Math.sin(t)),cc.rotateTo(.3,o)),cc.callFunc(function(){this.enemyAction(e)},this)))},judgeIsChange:function(e){var i=this;if(2<=this.tempArr.length)if(this.playerNode.typeID<=e){this.playerNode.typeID++,this.playerNode.typeID>this.maxTypeID&&(this.maxTypeID=this.playerNode.typeID);for(var a=this.playerNode.getChildByName("son").convertToNodeSpaceAR(this.playerNode.convertToWorldSpaceAR(this.myFish.position)),t=0;t<this.tempArr.length;t++)(t=>{var e=i.tempArr[t].position,e=S.pDistance(a,e)/2e3;i.tempArr[t].runAction(cc.sequence(cc.spawn(cc.moveTo(e,a).easing(cc.easeQuadraticActionOut()),cc.scaleTo(e,0,0),cc.callFunc(function(){if(t==this.tempArr.length-1){for(var e=0;e<this.tempArr.length;e++)this.tempArr[e].destroy();this.tempArr.splice(0,this.tempArr.length),this.createLizi(this.myFish,!0),this.ChangeBig()}},i)),cc.callFunc(function(){},i)))})(t)}else this.playerNode.typeID>e&&3<=this.tempArr.length&&this.EatSmallAction2()},judgePushArr:function(e,t){1==e?(this.kedouArr.push(t),this.tempArr=this.kedouArr,this.judgeIsChange(e)):2==e?(this.qingwaArr.push(t),this.tempArr=this.qingwaArr,this.judgeIsChange(e)):3==e?(this.haiguiArr.push(t),this.tempArr=this.haiguiArr,this.judgeIsChange(e)):4==e?(this.xiaojinyuArr.push(t),this.tempArr=this.xiaojinyuArr,this.judgeIsChange(e)):5==e?(this.jinliArr.push(t),this.tempArr=this.jinliArr,this.judgeIsChange(e)):6==e?(this.dianmanArr.push(t),this.tempArr=this.dianmanArr,this.judgeIsChange(e)):7==e?(this.shayuArr.push(t),this.tempArr=this.shayuArr,this.judgeIsChange(e)):8==e?(this.jingyuArr.push(t),this.tempArr=this.jingyuArr,this.judgeIsChange(e)):9==e?(this.jiaoArr.push(t),this.tempArr=this.jiaoArr,this.judgeIsChange(e)):10==e&&(this.longArr.push(t),this.tempArr=this.longArr,this.judgeIsChange(e))},ChangeBig:function(){var e,t;this.gameOverFlags||(e=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,this.speedNum+=this.addSpeed/e,t=this.playerNode.typeID,this.removeSmallFish222(),2==t?(this.playerNode.getChildByName("kedou").active=!1,this.playerNode.getChildByName("qingwa").scaleX=0,this.playerNode.getChildByName("qingwa").scaleY=0,this.playerNode.getChildByName("qingwa").active=!0,this.myFish=this.playerNode.getChildByName("qingwa")):3==t?(this.playerNode.getChildByName("qingwa").active=!1,this.playerNode.getChildByName("haigui").scaleX=0,this.playerNode.getChildByName("haigui").scaleY=0,this.playerNode.getChildByName("haigui").active=!0,this.CameraChangeZoomRatio(e,.75),this.myFish=this.playerNode.getChildByName("haigui")):4==t?(this.playerNode.getChildByName("haigui").active=!1,this.playerNode.getChildByName("xiaojinyu").scaleX=0,this.playerNode.getChildByName("xiaojinyu").scaleY=0,this.playerNode.getChildByName("xiaojinyu").active=!0,this.myFish=this.playerNode.getChildByName("xiaojinyu"),this.CameraChangeZoomRatio(e,.65)):5==t?(this.playerNode.getChildByName("xiaojinyu").active=!1,this.playerNode.getChildByName("jinli").scaleX=0,this.playerNode.getChildByName("jinli").scaleY=0,this.playerNode.getChildByName("jinli").active=!0,this.CameraChangeZoomRatio(e,.55),this.myFish=this.playerNode.getChildByName("jinli")):6==t?(this.playerNode.getChildByName("jinli").active=!1,this.playerNode.getChildByName("dianman").scaleX=0,this.playerNode.getChildByName("dianman").scaleY=0,this.playerNode.getChildByName("dianman").active=!0,this.myFish=this.playerNode.getChildByName("dianman"),this.CameraChangeZoomRatio(e,.45)):7==t?(this.playerNode.getChildByName("dianman").active=!1,this.playerNode.getChildByName("shayu").scaleX=0,this.playerNode.getChildByName("shayu").scaleY=0,this.playerNode.getChildByName("shayu").active=!0,this.CameraChangeZoomRatio(e,.4),this.myFish=this.playerNode.getChildByName("shayu")):8==t?(this.playerNode.getChildByName("shayu").active=!1,this.playerNode.getChildByName("jingyu").scaleX=0,this.playerNode.getChildByName("jingyu").scaleY=0,this.playerNode.getChildByName("jingyu").active=!0,this.CameraChangeZoomRatio(e,.3),this.myFish=this.playerNode.getChildByName("jingyu")):9==t?(this.playerNode.getChildByName("jingyu").active=!1,this.playerNode.getChildByName("jiao").scaleX=0,this.playerNode.getChildByName("jiao").scaleY=0,this.playerNode.getChildByName("jiao").active=!0,this.CameraChangeZoomRatio(e,.25),this.myFish=this.playerNode.getChildByName("jiao")):10==t&&(this.playerNode.getChildByName("jiao").active=!1,this.SummonDragonAction()),t<10&&this.myFish.runAction(cc.sequence(cc.scaleTo(.1,this.fishScaleX[t-1],this.fishScaleY[t-1]).easing(cc.easeBackOut()),cc.callFunc(function(){},this))))},EatSmallAction2:function(){var s=this;if(3<=this.tempArr.length){var e=(()=>{var i=s.tempArr[0].typeID;if(9==i)return{v:void 0};var a=cc.instantiate(s.newFishPreArr[i]),o=(a.typeID=i+1,s.changeSize(a),a.scaleX),n=a.scaleY,e=s.playerNode.getChildByName("son"),c=s.getSmallFishPos(a,s.myFish);a.scaleX=0,a.scaleY=0,e.addChild(a,100),a.setPosition(c);for(var t=0;t<s.tempArr.length;t++)(t=>{var e=S.pDistance(c,s.tempArr[t].position)/2e3;s.tempArr[t].runAction(cc.sequence(cc.spawn(cc.moveTo(e,c).easing(cc.easeQuadraticActionOut()),cc.callFunc(function(){if(t==this.tempArr.length-1){for(var e=0;e<this.tempArr.length;e++)this.tempArr[e].destroy();this.tempArr.splice(0,this.tempArr.length),this.createLizi(a,!1),a.runAction(cc.sequence(cc.scaleTo(.1,o,n).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){a.zIndex=50*(10-i-1),this.judgePushArr(a.typeID,a)},this)))}},s)),cc.callFunc(function(){},s)))})(t)})();if("object"==typeof e)return e.v}},getSmallFishPos:function(e,t,i){void 0===i&&(i=0),i++;cc.v2();var a,o=this.playerNode.getChildByName("son"),n=o.convertToNodeSpaceAR(o.parent.convertToWorldSpaceAR(t.position)),c=.5<Math.random()?S.getRandomNum(-t.width/2*t.scaleX-e.width/2*e.scaleX,-t.width/2*t.scaleX-e.width/4*e.scaleX,!1):S.getRandomNum(t.width/2*t.scaleX+e.width/4*e.scaleX,t.width/2*t.scaleX+e.width/2*e.scaleX,!1),s=S.getRandomNum(-t.height*t.scaleY,-e.height/3*e.scaleY,!1),r=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,h=cc.v2(n.x+c*r,n.y+s*r);if(100<i)return a=S.getRandomNum(.8,1.3,!1),cc.v2(cc.v2(n.x+c*a*r,n.y+s*a*r));for(var l=0;l<o.children.length;l++)if(S.pDistance(h,o.children[l].position)<e.width/2*e.scaleX)return this.getSmallFishPos(e,t,i);return h},EatSmallAction:function(e,t){if(!this.gameOverFlags){if(e.isSpecialFish&&e.specialScore){this.specialFishTotalScore+=e.specialScore,this.specialFishCount++,console.log("ðŸ’° åƒåˆ°ç‰¹æ®Šé±¼ï¼+"+e.specialScore+"åˆ† | ç¬¬"+this.specialFishCount+"æ¡ | æ€»åˆ†:"+this.specialFishTotalScore);try{var i=new cc.Node("scoreDisplay"),a=i.addComponent(cc.Label),o=(a.string="+"+e.specialScore,a.fontSize=60+e.specialScore/50,a.lineHeight=a.fontSize,i.color=new cc.Color(255,215,0),new cc.Node("glow")),n=o.addComponent(cc.Graphics),c=(n.circle(0,0,50),n.fillColor=new cc.Color(255,255,0,100),n.fill(),i.addChild(o,-1),this.node.convertToNodeSpaceAR(this.enemyNode.convertToWorldSpaceAR(e.position)));i.setPosition(c),this.node.addChild(i,1e4),i.runAction(cc.sequence(cc.spawn(cc.moveBy(2.5,0,200),cc.scaleTo(.3,1.5).easing(cc.easeBackOut()),cc.sequence(cc.delayTime(.3),cc.scaleTo(2.2,1))),cc.fadeOut(.5),cc.removeSelf())),o.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.5),cc.scaleTo(.3,1))))}catch(e){console.error("ç§¯åˆ†æ˜¾ç¤ºå¤±è´¥:",e.message)}1e4<=this.specialFishTotalScore&&(console.log(""),console.log("ðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠ"),console.log("ðŸŽ‰ æ­å–œè¾¾åˆ° 10000 åˆ†ï¼"),console.log("ðŸŽ° å¯ä»¥è¿›è¡ŒæŠ½å¥–è½¬ç›˜äº†ï¼"),console.log("ðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠðŸŽŠ"),console.log(""))}var s=e.typeID,a=(8==e.type&&this.jingyuNum--,9==e.type&&this.jiaoNum--,this.getSmallFishPos(e,t)),r=(e.destroy(),cc.audioEngine.play(this.eatMusic,!1,1),cc.instantiate(this.newFishPreArr[s-1])),n=(r.typeID=s,this.changeSize(r),r.scaleX),c=r.scaleY;this.playerNode.getChildByName("son").addChild(r,100),r.setPosition(a),r.scaleX=0,r.scaleY=0,r.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,n,c).easing(cc.easeQuadraticActionOut()),cc.callFunc(function(){r.zIndex=50*(10-s),this.judgePushArr(s,r)},this)),cc.callFunc(function(){},this))),this.CreateSingleEnemy(1,this.playerNode.typeID)}},JudgeSmallFish:function(){this.myFish.active=!1,0<this.playerNode.getChildByName("son").children.length?(cc.audioEngine.play(this.HurtMusic,!1,1),this.chooseBiggerFish()):this.DieAction()},chooseBiggerFish:function(){if(!this.gameOverFlags){var e=cc.instantiate(this.bloodPre),t=(this.liziNode.addChild(e,1e3),this.playerNode.typeID),t=(2==t||3==t?ToolsJs.setTexture(e,"blood2"):ToolsJs.setTexture(e,"blood"+t),100+25*t),t=(e.width=t,e.height=t,this.liziNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.playerNode.position)));e.scaleX=0,e.scaleY=0,e.setPosition(t),e.runAction(cc.sequence(cc.scaleTo(.5,1.3,1.3).easing(cc.easeSineOut()),cc.fadeOut(.3),cc.callFunc(function(){},this),cc.removeSelf()));for(var i=this.playerNode.getChildByName("son"),a=this.myFish.angle,o=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,n=i.children[0].typeID,c=this.playerNode.typeID,s=0,r=0;r<i.children.length;r++)i.children[r].typeID>n&&(n=i.children[r].typeID,s=r);t=this.node.convertToNodeSpaceAR(i.convertToWorldSpaceAR(i.children[s].position)),e=(t.x<-this.maxCameraMovePosX?t.x=-this.maxCameraMovePosX:t.x>this.maxCameraMovePosX&&(t.x=this.maxCameraMovePosX),(t.y>this.maxCameraMovePosY||t.y<-this.maxCameraMovePosY)&&(t.y=this.maxCameraMovePosY),this.playerNode.position),e=S.pDistance(t,e)/1e3;this.playerNode.stopAllActions(),this.playerNode.runAction(cc.sequence(cc.spawn(cc.moveTo(e,t),cc.callFunc(function(){var e=this;1==n?(ToolsJs.removeNodeForArr(this.kedouArr,i.children[s]),this.tempArr=this.kedouArr,this.myFish=this.playerNode.getChildByName("kedou"),.05<Math.abs(o-1)&&this.CameraChangeZoomRatio(o,1)):2==n?(ToolsJs.removeNodeForArr(this.qingwaArr,i.children[s]),this.tempArr=this.qingwaArr,this.myFish=this.playerNode.getChildByName("qingwa"),.05<Math.abs(o-1)&&this.CameraChangeZoomRatio(o,1)):3==n?(ToolsJs.removeNodeForArr(this.haiguiArr,i.children[s]),this.tempArr=this.haiguiArr,this.myFish=this.playerNode.getChildByName("haigui"),.05<Math.abs(o-.75)&&this.CameraChangeZoomRatio(o,.75)):4==n?(ToolsJs.removeNodeForArr(this.xiaojinyuArr,i.children[s]),this.tempArr=this.xiaojinyuArr,this.myFish=this.playerNode.getChildByName("xiaojinyu"),.05<Math.abs(o-.65)&&this.CameraChangeZoomRatio(o,.65)):5==n?(ToolsJs.removeNodeForArr(this.jinliArr,i.children[s]),this.tempArr=this.jinliArr,this.myFish=this.playerNode.getChildByName("jinli"),.05<Math.abs(o-.55)&&this.CameraChangeZoomRatio(o,.55)):6==n?(ToolsJs.removeNodeForArr(this.dianmanArr,i.children[s]),this.tempArr=this.dianmanArr,this.myFish=this.playerNode.getChildByName("dianman"),.05<Math.abs(o-.45)&&this.CameraChangeZoomRatio(o,.45)):7==n?(ToolsJs.removeNodeForArr(this.shayuArr,i.children[s]),this.tempArr=this.shayuArr,this.myFish=this.playerNode.getChildByName("shayu"),.05<Math.abs(o-.4)&&this.CameraChangeZoomRatio(o,.4)):8==n&&(ToolsJs.removeNodeForArr(this.jingyuArr,i.children[s]),this.tempArr=this.shayuArr,this.myFish=this.playerNode.getChildByName("jingyu"),.05<Math.abs(o-.3))&&this.CameraChangeZoomRatio(o,.3),this.playerNode.typeID=n,i.removeChild(i.children[s]),this.myFish.active=!0,this.myFish.scaleX=this.fishScaleX[n-1],this.myFish.scaleY=this.fishScaleY[n-1],this.speedNum+=(this.playerNode.typeID-c)*this.addSpeed/2/o,this.myFish.angle=a,this.scheduleOnce(function(){e.gameOverFlags},.1)},this)),cc.callFunc(function(){},this)))}},createSmallFish:function(e){var e=e<8?S.getRandomNum(0,e-1,!0):S.getRandomNum(1,7,!0),t=cc.instantiate(this.enemyPreArr[e]),e=(this.changeSize(t),t.typeID=e+1,this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio),e=(t.speed=100/e,this.getEnemyPos(t));e?(this.enemyNode.addChild(t,1),t.setPosition(e),t.getComponent("enemyJS").active=!0,this.enemyAction(t)):t.destroy()},removeSomeBigFish222:function(){var i=this;if(!(this.gameOverFlags||this.playerNode.typeID<=2)){for(var a=this.enemyNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.playerNode.position)),o=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,n=[],e=0;e<this.enemyNode.children.length;e++)this.enemyNode.children[e].typeID>=this.playerNode.typeID+3&&n.push(this.enemyNode.children[e]);for(var t=0;t<n.length;t++)(e=>{var t=n[e];t.runAction(cc.sequence(cc.delayTime(.05*e),cc.callFunc(function(e){S.pDistance(a,e.position)>(this.gameHeight+t.height/2)/o&&Math.random()<.7&&(this.gameOverFlags||(this.enemyNode.removeChild(t),this.createSmallFish(this.playerNode.typeID)))},i)))})(t)}},removeSomeBigFish:function(){if(!this.gameOverFlags){for(var e=this.enemyNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.playerNode.position)),t=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,i=[],a=0;a<this.enemyNode.children.length;a++)this.enemyNode.children[a].typeID>=this.playerNode.typeID+3&&i.push(this.enemyNode.children[a]);for(var o=0;o<i.length;o++)if(S.pDistance(e,i[o].position)>(this.gameHeight/2+i[o].height/2)/t)return 8==i[o].typeID&&this.jingyuNum--,9==i[o].typeID&&this.jiaoNum--,void this.enemyNode.removeChild(i[o])}},removeSmallFish222:function(){var i=this;if(!this.gameOverFlags){var a=this.enemyNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.playerNode.position)),o=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,n=[];if(!(5<=this.playerNode.typeID)){for(var e=0;e<this.enemyNode.children.length;e++)this.enemyNode.children[e].typeID<=this.playerNode.typeID-3&&n.push(this.enemyNode.children[e]);if(0<n.length)for(var t=0;t<n.length;t++)(e=>{var t=n[e];t.runAction(cc.sequence(cc.delayTime(.05*e),cc.callFunc(function(e){S.pDistance(a,e.position)>(this.gameHeight+t.height/2)/o&&Math.random()<.5&&(this.gameOverFlags||(this.enemyNode.removeChild(t),this.CreateSingleEnemy(1,this.playerNode.typeID)))},i)))})(t)}}},removeSmallFish:function(){if(!this.gameOverFlags){for(var e=this.enemyNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.playerNode.position)),t=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,i=[],a=0;a<this.enemyNode.children.length;a++){var o=this.enemyNode.children[a].typeID;4<=this.playerNode.typeID&&o==this.playerNode.typeID&&i.push(this.enemyNode.children[a])}if(0<i.length)for(var n=0;n<i.length;n++)if(S.pDistance(e,i[n].position)>(this.gameHeight/2+i[n].height/2)/t)return Math.random(),this.enemyNode.removeChild(i[n]),void this.CreateSingleEnemy(1,this.playerNode.typeID)}},createLizi:function(e,t){for(var i=cc.v2(),a=0,o=0,a=(t?(o=this.myFish.height/2*this.myFish.scaleY,i=this.myFish.position,this.playerNode):(o=e.height/2*e.scaleY,i=this.playerNode.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),e)).typeID,n=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,c=S.getRandomNum(15,25,!0),s=S.getRandomNum(0,.05,!1),r=0;r<c;r++){var h=o<100?S.getRandomNum(1,150,!1):S.getRandomNum(1,1.3*o,!1),l=cc.instantiate(this.liziPre),m=(this.playerNode.addChild(l,100),S.getRandomNum(150,250,!1)),m=(l.scaleX=0,l.scaleY=0,l.opacity=m,ToolsJs.setTexture(l,"fishlizi"+a),l.setPosition(i),S.getRandomNum(.4/n,1.3/n)),d=360*Math.random(),h=S.getCircumferencePos(i,h,d),d=S.pDistance(i,h)/S.getRandomNum(300,500,!0);S.getRandomNum(30,180,!0),l.runAction(cc.sequence(cc.delayTime(s),cc.spawn(cc.moveTo(d,h).easing(cc.easeQuarticActionOut()),cc.scaleTo(d,m,m)),cc.fadeOut(.5),cc.callFunc(function(){},this),cc.removeSelf()))}for(var g=S.getRandomNum(10,20,!0),u=0;u<g;u++){var p=o<100?S.getRandomNum(1,200,!1):S.getRandomNum(1,1.5*o,!1),f=cc.instantiate(this.starPre),y=S.getRandomNum(1,2,!0),y=(ToolsJs.setTexture(f,"star"+y),this.playerNode.addChild(f,100),S.getRandomNum(150,250,!1)),y=(f.opacity=y,f.scaleX=0,f.scaleY=0,f.setPosition(i),S.getRandomNum(.8/n,1.5/n)),v=360*Math.random(),p=S.getCircumferencePos(i,p,v),v=S.pDistance(i,p)/S.getRandomNum(300,500,!0),N=S.getRandomNum(180,360,!0);f.runAction(cc.sequence(cc.delayTime(s),cc.spawn(cc.moveTo(v,p).easing(cc.easeQuarticActionOut()),cc.scaleTo(v,y,y)),cc.spawn(cc.rotateBy(.5,N),cc.fadeOut(.5)),cc.callFunc(function(){},this),cc.removeSelf()))}},createMouseRipple:function(e){var t=cc.instantiate(this.ripplePre),e=(this.liziNode.addChild(t,100),t.setPosition(e),t.scaleX=.5,t.scaleY=.375,t.opacity=200,S.getRandomNum(.5,2));t.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,e,3*e/4),cc.fadeOut(.4)),cc.removeSelf()))},EatingEffectAction:function(e){var t=cc.instantiate(this.bloodPre),i=(this.liziNode.addChild(t),e.typeID);2==i||3==i?ToolsJs.setTexture(t,"blood2"):ToolsJs.setTexture(t,"blood"+i),i=e.scaleY*e.height<=e.scaleX*e.width?e.scaleX*e.width:e.scaleY*e.height,t.width=i,t.height=i;i=this.liziNode.convertToNodeSpaceAR(this.enemyNode.convertToWorldSpaceAR(e.position));t.scaleX=0,t.scaleY=0,t.setPosition(i),t.runAction(cc.sequence(cc.scaleTo(.5,1.3,1.3).easing(cc.easeSineOut()),cc.fadeOut(.3),cc.removeSelf()))},EatingEffectAction2:function(e){var t=cc.instantiate(this.bloodPre),i=(this.liziNode.addChild(t),e.typeID),i=(2==i||3==i?ToolsJs.setTexture(t,"blood2"):ToolsJs.setTexture(t,"blood"+i),i=e.scaleY*e.height<=e.scaleX*e.width?e.scaleX*e.width:e.scaleY*e.height,t.width=i,t.height=i,e.position),e=this.playerNode.convertToNodeSpaceAR(this.playerNode.getChildByName("son").convertToWorldSpaceAR(i)),i=this.liziNode.convertToNodeSpaceAR(this.playerNode.convertToWorldSpaceAR(e));t.scaleX=0,t.scaleY=0,t.setPosition(i),t.runAction(cc.sequence(cc.scaleTo(.5,1.3,1.3).easing(cc.easeSineOut()),cc.fadeOut(.3),cc.removeSelf()))},StoneFadeInAction:function(){var e=this.carmeraNode.getChildByName("MoveCamera").getComponent(cc.Camera).zoomRatio,t=this.playerNode.position,i=cc.find("Canvas/RotLiziNode");i.setPosition(this.playerNode.position);for(var a=S.getRandomNum(50,100,!1),o=Math.floor(a/2),n=0;n<a;n++){var c=null,s=(n<o?(c=cc.instantiate(this.starPre),s=S.getRandomNum(1,2,!0),ToolsJs.setTexture(c,"star"+s)):(c=cc.instantiate(this.liziPre),ToolsJs.setTexture(c,"fishlizi10")),i.addChild(c,200),c.scaleX=0,c.scaleY=0,S.getRandomNum(50/e,this.gameWidth/2/e,!1)),r=360*Math.random(),r=S.getCircumferencePos(t,s,r),r=i.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(r)),h=S.getRandomNum(1/e,2/e,!1),l=(S.getRandomNum(50,100,!1),S.getRandomNum(180,360,!1)),m=S.getRandomNum(.3,.6,!1),d=i.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(t)),g=(c.setPosition(d),cc.v2((d.x+r.x)/2,(d.y+r.y)/3*2)),u=S.getRandomNum(.05,.2,!1),p=S.getRandomNum(.4,.8,!1),d=[d,g,r];c.runAction(cc.sequence(cc.delayTime(u),cc.spawn(cc.bezierTo(p,d).easing(cc.easeQuadraticActionOut()),cc.scaleTo(p,h,h).easing(cc.easeBounceOut())),cc.spawn(cc.rotateBy(m,l),cc.fadeOut(m)),cc.callFunc(function(){},this),cc.removeSelf()))}this.myFish.opacity=0,this.stoneNode.scaleX=0,this.stoneNode.scaleY=0,this.stoneNode.active=!0,this.stoneNode.zIndex=50;var f=this.stoneNode.getChildByName("stone1"),y=this.stoneNode.getChildByName("stone2"),v=this.stoneNode.getChildByName("stone3");this.stoneNode.runAction(cc.sequence(cc.delayTime(.15),cc.spawn(cc.scaleTo(.5,.8*this.SizeScale,.8*this.SizeScale).easing(cc.easeCircleActionInOut()),cc.callFunc(function(){this.carmeraNode.runAction(cc.sequence(cc.moveBy(.05,5,5),cc.moveBy(.05,-5,-5)).repeat(10))},this)),cc.delayTime(.1),cc.callFunc(function(){var e=this,t=cc.instantiate(this.blackLayerPre);this.node.addChild(t,10),t.active=!0,t.opacity=200,t.setPosition(cc.v2(0,0)),this.scheduleOnce(function(){e.LightAction(0,.3),e.Wu.getComponent(cc.Animation).play("wu"),e.stoneNode.getChildByName("light0").active=!0},.3),f.runAction(cc.sequence(cc.rotateBy(1.5,360).easing(cc.easeQuadraticActionOut()),cc.delayTime(.2),cc.callFunc(function(){f.getChildByName("light1").active=!0,f.getChildByName("light2").active=!0},this))),y.runAction(cc.sequence(cc.delayTime(1.7),cc.rotateBy(1,-360).easing(cc.easeQuadraticActionOut()),cc.delayTime(.2),cc.callFunc(function(){y.getChildByName("light3").active=!0},this))),v.runAction(cc.sequence(cc.delayTime(2.9),cc.callFunc(function(){var e=this;v.getChildByName("light4").active=!0,this.scheduleOnce(function(){e.CreatePanLong()},.2)},this)))},this)))},SummonDragonAction:function(){var e=this;this.gameOverFlags=!0,this.speed=0,this.speedNum=0,this.enemyNode.removeAllChildren(),this.enemyNode.destroy();for(var t=this.playerNode.getChildByName("son"),i=t.convertToNodeSpaceAR(this.playerNode.convertToWorldSpaceAR(this.myFish.position)),a=0;a<t.children.length;a++){var o=S.getRandomNum(50,100,!1),n=Math.atan2(i.y-t.children[a].y,i.x-t.children[a].x),n=cc.misc.radiansToDegrees(n)+90;t.children[a].runAction(cc.sequence(cc.spawn(cc.jumpTo(.5,i,o,1).easing(cc.easeQuadraticActionOut()),cc.scaleTo(.5,0,0),cc.rotateTo(0,1,n)),cc.callFunc(function(){},this),cc.removeSelf()))}this.scheduleOnce(function(){e.StoneFadeInAction()},1)},CreatePanLong:function(){var a=this,t=(this.setHisSocre(this.maxTypeID),cc.instantiate(this.PanlongPre)),e=(this.node.addChild(t,100),t.opacity=0,t.scaleX=.9*this.SizeScale,t.scaleY=.9*this.SizeScale,this.stoneNode.position),e=cc.v2(-50*this.SizeScale,e.y-400*this.SizeScale),i=cc.v2(-50*this.SizeScale,e.y-this.gameHeight/4),o=(t.setPosition(i),this),n=cc.instantiate(this.lightPre);this.node.addChild(n,30),n.scaleX=0,n.scaleY=0,n.setPosition(this.stoneNode.position),t.runAction(cc.sequence(cc.spawn(cc.moveTo(.5,e),cc.fadeIn(.3),cc.callFunc(function(){this.LightAction(0,.5);var e=t.getChildByName("panlong").getComponent(dragonBones.ArmatureDisplay);e.timeScale=1.5,e.playAnimation("newAnimation",1)},this)),cc.delayTime(.3),cc.callFunc(function(){n.runAction(cc.sequence(cc.scaleTo(.3,1,1),cc.callFunc(function(){},this)))},this),cc.delayTime(.6),cc.callFunc(function(){var e=this,t=cc.instantiate(this.mainBtnPre),i=(t.scaleX=.7*this.SizeScale,t.scaleY=.7*this.SizeScale,this.node.addChild(t,5e3),t.opacity=0,t.setPosition(cc.v2(-this.gameWidth/2+this.gameWidth/8,this.gameHeight/2-this.gameWidth/8)),t.runAction(cc.fadeIn(.3)),t.on(cc.Node.EventType.TOUCH_START,function(){}),t.on(cc.Node.EventType.TOUCH_END,function(){console.log("MoreGame"),window.location.href=l.moreGameUrl}),cc.instantiate(this.replayButtonPre)),t=(this.node.addChild(i,5e3),i.scaleX=0,i.scaleY=0,i.setPosition(cc.v2(0,-this.stoneNode.y-200*this.Hscale)),i.runAction(cc.scaleTo(.5,.6*this.SizeScale,.6*this.SizeScale).easing(cc.easeBackOut()),cc.callFunc(function(){},this)),cc.find("Canvas/nameLabel")),t=(t.zIndex=6001,t.zIndex=6e3,t.setPosition(cc.v2(this.stoneNode.x+150*this.Wscale,this.stoneNode.y-200*this.Hscale)),this.nameLabel.string=renderConfig.getStrForType("name_10"),cc.find("Canvas/winLabel")),a=(t.zIndex=6e3,cc.v2(i.x,i.y+i.height/2*.7*this.Hscale+50*this.Hscale));t.setPosition(cc.v2(a.x,a.y-50*this.SizeScale)),t.runAction(cc.sequence(cc.spawn(cc.fadeIn(.3),cc.moveTo(.3,a)),cc.callFunc(function(){},this))),this.scheduleOnce(function(){o.canTouchReplay=!0,i.runAction(cc.sequence(cc.delayTime(2),cc.scaleTo(.3,.7*e.SizeScale).easing(cc.easeSineInOut()),cc.scaleTo(.3,.6*e.SizeScale).easing(cc.easeSineInOut()),cc.rotateTo(.1,15).easing(cc.easeSineInOut()),cc.rotateTo(.2,-15).easing(cc.easeSineInOut()),cc.rotateTo(.1,15).easing(cc.easeSineInOut()),cc.rotateTo(.2,-15).easing(cc.easeSineInOut()),cc.rotateTo(.1,0).easing(cc.easeSineInOut()))).repeatForever(),i.on(cc.Node.EventType.TOUCH_START,function(){}),i.on(cc.Node.EventType.TOUCH_END,function(){o.canTouchReplay&&(cc.eventManager.removeAllListeners(),r.GAME_OVER_BOOL=!0,r.gameScore=0,r.publicGameBool,console.log("loadScene"),h.loadingScene("MainGameScene"))})},.8)},this))),this.scheduleOnce(function(){a.stoneNode.runAction(cc.sequence(cc.spawn(cc.scaleBy(.5,.8*a.SizeScale,.8*a.SizeScale),cc.moveTo(.5,0,a.gameHeight/6).easing(cc.easeBackOut()),cc.callFunc(function(){n.runAction(cc.sequence(cc.moveTo(.5,0,this.gameHeight/6).easing(cc.easeBackOut()),cc.callFunc(function(){},this)))},a)),cc.callFunc(function(){},a))),a.scheduleOnce(function(){n.runAction(cc.sequence(cc.rotateBy(10,360),cc.callFunc(function(){},a)).repeatForever())},.5),t.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,.9*a.SizeScale,.9*a.SizeScale),cc.moveTo(.5,-50*a.SizeScale,a.gameHeight/6-370*a.SizeScale).easing(cc.easeBackOut())),cc.callFunc(function(){},a)))},1.3),this.scheduleOnce(function(){var e=a.stoneNode.getChildByName("stone1"),t=a.stoneNode.getChildByName("stone2"),i=a.stoneNode.getChildByName("stone3");e.runAction(cc.sequence(cc.rotateBy(2,10),cc.callFunc(function(){},a)).repeatForever()),t.runAction(cc.sequence(cc.rotateBy(1,-10),cc.callFunc(function(){},a)).repeatForever()),i.runAction(cc.sequence(cc.rotateBy(.5,10),cc.callFunc(function(){},a)).repeatForever())},1.8),this.scheduleOnce(function(){var e=S.getRandomNum(0,30,!1);t.runAction(cc.sequence(cc.spawn(cc.sequence(cc.moveBy(1,0,-e),cc.moveBy(1,0,e)),cc.callFunc(function(){var e=t.getChildByName("panlong").getComponent(dragonBones.ArmatureDisplay);e.timeScale=.2,e.playAnimation("newAnimation_å¤åˆ¶1",0)},a)),cc.callFunc(function(){},a)).repeatForever())},1)},LightAction:function(e,t){this.lightFlags=!1,this.light1.scaleX=.9,this.light1.scaleY=.9,this.light2.scaleX=.9,this.light2.scaleY=.9,this.light1.opacity=255,this.light2.opacity=255,this.light1.runAction(cc.sequence(cc.delayTime(e),cc.fadeIn(.1),cc.fadeOut(.3),cc.callFunc(function(){this.lightFlags=!0},this))),this.light2.runAction(cc.sequence(cc.delayTime(t),cc.fadeIn(.1),cc.fadeOut(.3),cc.callFunc(function(){this.lightFlags=!0},this))),this.lightjudeTime=S.getRandomNum(3,6,!1)},BubbleAction:function(){var e,t,i,a,o,n;this.gameOverFlags||(e=cc.instantiate(this.BubblePre),S.getRandomNum(1,3,!0),this.liziNode.addChild(e),t=this.liziNode.convertToNodeSpaceAR(this.playerNode.convertToWorldSpaceAR(this.myFish.position)),e.setPosition(t),e.scaleX=0,e.scaleY=0,t=this.playerNode.angle+90,t=cc.misc.degreesToRadians(t),i=S.getRandomNum(.5,1,!1),a=S.getRandomNum(50,100,!1),o=S.getRandomNum(.2,.5,!1),n=S.getRandomNum(-50,50,!1),e.angle=360*Math.random(),e.runAction(cc.sequence(cc.spawn(cc.moveBy(o,-a*Math.cos(t)+n,-a*Math.sin(t)+n),cc.scaleTo(o,i,i)),cc.fadeOut(.2),cc.removeSelf())))},WaterAction:function(){if(!this.gameOverFlags)for(var e=S.getRandomNum(2,3,!0),t=S.getRandomNum(.2,.5,!1),i=S.getRandomNum(-.3,.3),a=this.carmeraNode.position,o=S.getRandomNum(-this.gameWidth,this.gameWidth,!1),n=S.getRandomNum(-this.gameHeight,this.gameHeight,!1),o=cc.v2(a.x+o,a.y+n),c=this.liziNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(o)),s=0;s<e;s++){var r=cc.instantiate(this.bowenPre),h=(this.liziNode.addChild(r,1),r.setPosition(c),r.scaleX),l=r.scaleY;r.scaleX=0,r.scaleY=0,r.runAction(cc.sequence(cc.delayTime(t*s),cc.scaleTo(1,h+i,l+i),cc.fadeOut(.3),cc.removeSelf()))}},DieAction:function(){this.speed=0,this.gameOverFlags=!0,cc.audioEngine.play(this.failMusic,!1,1),this.playerNode.opacity=0;var e=cc.instantiate(this.bloodPre),t=(this.liziNode.addChild(e,1e3),this.playerNode.typeID),t=(2==t||3==t?ToolsJs.setTexture(e,"blood2"):ToolsJs.setTexture(e,"blood"+t),100+25*t),t=(e.width=t,e.height=t,this.liziNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.playerNode.position)));e.scaleX=0,e.scaleY=0,e.setPosition(t),e.runAction(cc.sequence(cc.scaleTo(.5,1.3,1.3).easing(cc.easeSineOut()),cc.fadeOut(.3),cc.callFunc(function(){this.playerNode.destroy(),this.gameEnd()},this),cc.removeSelf()))},updateFishRotate:function(e,t,i){var a=e.angle%360,a=e.angle<0?360-Math.abs(a):a,o=t<0?360-Math.abs(t):t;Math.abs(a-o)>i&&Math.abs(a-o)<360-i?180<Math.abs(a-o)?180<a-o?e.angle+=i:e.angle-=i:o<=a?e.angle-=i:e.angle+=i:e.angle=t},setHisSocre:function(e){cc.sys.localStorage.setItem("ZhaoHuanShenLong_12WS",e)},addTouchEvents:function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(e){if(r.GAME_OVER_BOOL&&r.noTouchBool&&t.touchBeginFlags)return t.touchBeginFlags=!1,e=e.getLocation(),t.node.convertToNodeSpaceAR(e),!0},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.on_touch_move,this),this.node.on(cc.Node.EventType.TOUCH_END,this.on_touch_end,this)},on_touch_move:function(e){var t;!this.gameOverFlags&&this.canMoveFlags&&(this.speed=this.speedNum,e=e.getLocation(),e=this.node.convertToNodeSpaceAR(e),t=this.carmeraNode.position,e=cc.v2(e.x+t.x,e.y+t.y),t=this.liziNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(e)),this.createMouseRipple(t))},on_touch_end:function(e){this.gameOverFlags||(this.touchBeginFlags=!0,e=e.getLocation(),this.node.convertToNodeSpaceAR(e))},update:function(e){if(this.updateCreate(),this.removeSmallFish(),this.removeSomeBigFish(),this.playerNode.typeID,this.waterCount++,this.waterCount>this.randnum&&(this.WaterAction(),this.waterCount=0,this.randnum=S.getRandomNum(20,40,!0)),this.OffPos){if(this.gameOverFlags)return;var t=cc.v2(0,1).signAngle(this.OffPos),t=cc.misc.radiansToDegrees(t),i=(this.angle=t,this.updateFishRotate(this.myFish,this.angle,this.rotSpeed*e),this.playerNode.getChildByName("son"));if(1<=i.children.length)for(var a=0;a<i.children.length;a++)this.updateFishRotate(i.children[a],this.angle,this.rotSpeed*e);this.CameraMove(e)}var o;this.lightFlags&&(this.LightNumCount+=e,this.LightNumCount>=this.lightjudeTime)&&(this.lightjudeTime=0,t=S.getRandomNum(.5,1.5,!1),o=S.getRandomNum(.5,1.5,!1),this.LightAction(t,o)),this.gameOverGoToOVer(),this.gameEndFlags},gameEnd:function(){r.GAME_OVER_BOOL=!1,l.gameOverShowText(r.gameScore,1),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(this.gameEnd1.bind(this))))},gameEnd1:function(){var e=cc.instantiate(this.blackLayerPre);this.node.addChild(e,2600),e.width=this.gameWidth,e.height=this.gameHeight,e.x=0,e.y=0,e.opacity=0,e.active=!0,e.runAction(cc.fadeTo(.3,140)),this.gameOveEndBool=!0,1==r.curType?(this.gameOverT1.string="æ¸¸ æˆ ç»“ æŸ",this.gameOverT2.string="ç‚¹ å‡» æŸ¥ çœ‹ åˆ† æ•°"):2==r.curType?(this.gameOverT1.string="éŠ æˆ² çµ æŸ",this.gameOverT2.string="é»ž æ“Š æŸ¥ çœ‹ åˆ† æ•¸"):3==r.curType?(this.gameOverT1.string="Game Over",this.gameOverT2.string="Click to view the score"):4==r.curType&&(this.gameOverT1.string="ê²Œìž„ ì¢…ë£Œ",this.gameOverT2.string="í´ë¦­ í•˜ì—¬ ì ìˆ˜ ë³´ê¸°"),this.gameOverT1.node.zIndex=2999,this.gameOverT2.node.zIndex=2999,this.gameOverT1.node.opacity=0,this.gameOverT1.node.x=0,this.gameOverT1.node.y=0,this.gameOverT1.node.runAction(cc.sequence(cc.delayTime(.2),cc.spawn(cc.fadeIn(.5),cc.moveBy(.5,0,-50)),cc.callFunc(function(){},this),cc.callFunc(function(){e.canTouch=!0},this))),this.gameOverT2.node.opacity=0,this.gameOverT2.node.x=0,this.gameOverT2.node.y=100,this.gameOverT2.node.runAction(cc.sequence(cc.delayTime(.2),cc.spawn(cc.fadeIn(.5),cc.moveBy(.5,0,-50)),cc.callFunc(function(e){e.runAction(cc.sequence(cc.delayTime(2),cc.scaleTo(.3,1.2).easing(cc.easeSineInOut()),cc.scaleTo(.3,1).easing(cc.easeSineInOut()))).repeatForever()},this)))},initEndLayer:function(){var e=cc.instantiate(this.gameOverPre);this.node.addChild(e,3e3)},gameOverGoToOVer:function(){this.gameOveEndBool&&(this.gameOverNum++,900<=this.gameOverNum)&&(this.gameOverNum=0,this.gameOveEndBool=!1)}}),cc._RF.pop()},{"../MainManage":"MainManage","../commonJs/GameConfig":"GameConfig","../commonJs/GameUiTools":"GameUiTools","../commonJs/mTool_WHQ":"mTool_WHQ",GameConfig:"GameConfig",GameUiTools:"GameUiTools",MainManage:"MainManage",mTool_WHQ:"mTool_WHQ"}],MainManage:[function(e,t){cc._RF.push(t,"946adGkxvdBmZXnlD952XtK","MainManage");var o=e("HttpManagerJs"),i=e("LanguageSetJs"),n=e("GameConfig"),c=e("LoadSceneJs"),a=e("GameUiTools"),s={gameHttpId:0,subScoreHttp:null,gameNameText:null,gameInfoText:null,txtStartText:null,txtMoreText:null,txtAgainText:null,gameEndLText:null,gameEndL1Text:null,bgLayRgb:null,gameEndName1:null,gameEndName2:null,gameEndUrl1:null,gameEndUrl2:null,langugeType:1,ranLinkData:null,adShowBefore:!1,adShowAfter:!0,endLayCol:null,moreBtnBgCol:null,moreBtnTextCol:null,recGameData:null,recGameUrl:null,recGameDelPau:null,recGameDelPer:null,recGameimg1:null,recGameimg2:null,recGamePos:null,InfoData:null,endShow0:null,endShow1:null,endShow2:null,endShow3:null,infoGameName:null,showText:null,startText:null,moreGameText:null,playAgainText:null,endHttpShowInfo:null,moreGameUrl:null,init:function(e,t,i){if(!n.publicGameBool){if(1<=n.playNum)return;n.playNum++}n.launchScene=e,n.Bros=t,n.caS=i,this.curType=1,console.log("thisg",this.gameHttpId),o.httpInitUrl(this.gameHttpId);var a=this.initLanguage();this.gameNameText=a.game_name,this.gameInfoText=a.game_info,this.txtStartText=a.txtStart,this.txtMoreText=a.txtMore,this.txtAgainText=a.txtAgain,this.gameEndLText=a.gameEndL,this.gameEndL1Text=a.gameEndL1,this.bgLayRgb=a.bgRgb,this.gameEndName1=a.gameT2,this.gameEndName2=a.gameT3,this.gameEndUrl1=a.gameUrl1,this.gameEndUrl2=a.gameUrl2,this.langugeType=this.curType,n.publicGameBool||c.goToCover(this.adShowBefore,this.adShowAfter,e,t,i)},getHttpGameId1:function(){var e=window.location.href,t=e.substring(0,e.lastIndexOf("//")+2),i=window.location.host,t=(this.gameAllHttp=t+i+"/Service/Share/index",cc.log("gameAll",this.gameAllHttp),this.subScoreHttp=t+i+"/Service/Score/index",this.gamePvHttp=t+i+"/Service/GamePv/index",document.URL),i=0,t=t.substring(t.lastIndexOf("/game/")+1,t.length).split("/");2<=t.length&&(i=t[1]),this.gameHttpId=i,cc.log("gameId",i),e.substring(e.lastIndexOf("//")+4,e.lastIndexOf("com")+3),this.moreGameUrl=this.httpHead+this.endHttp},getHttpGameId:function(){var e=window.location.href,t=e.substring(0,e.lastIndexOf("//")+2),i=window.location.host,a=(this.gameAllHttp=t+i+"/Service/Share/index",this.subScoreHttp=t+i+"/Service/Score/index",this.gamePvHttp=t+i+"/Service/GamePv/index",document.URL),o=a.lastIndexOf("/"),a=a.substring(0,o),o=(o=a.lastIndexOf("/"),a.substring(o+1,a.length)),a=(this.gameHttpId=o,console.log("gameIdNew",o),e.substring(e.lastIndexOf("//")+4,e.lastIndexOf("com")+3));-1==e.search("/game/")?this.moreGameUrl=t+i:this.moreGameUrl=t+a,console.log("moreGame",this.moreGameUrl)},gameOverShowText:function(e,t){},gamePV_load:function(){},ajaxOnLogoResult:function(){},ajaxLoad:function(e,t,i){var a=cc.loader.getXMLHttpRequest();a.onreadystatechange=i,a.open("POST",e),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(t)},scoreResult:function(e){null!=e.currentTarget.response&&""!=e.currentTarget.response&&(e=JSON.parse(e.currentTarget.response),cc.log("endshow",e.content),s.endHttpShowInfo=e.content)},initLanguage:function(){return cc.sys.language==cc.sys.LANGUAGE_CHINESE?(this.curType=1,i.language_1):(cc.log("è‹±æ–‡"),this.curType=2,i.language_2)},getLinkGameReturn:function(e,t,i,a){console.log("err0",e),console.log("err1",t),console.log("err2",i),console.log("err3",a),0==e&&(this.ranLinkData=t,this.adShowBefore=this.ranLinkData.gameSet.adShowBefore,this.adShowAfter=this.ranLinkData.gameSet.adShowAfter,this.endLayCol=this.ranLinkData.gameSet.endLayerColor,this.moreBtnBgCol=this.ranLinkData.gameSet.moreBtnBgCol,this.moreBtnTextCol=this.ranLinkData.gameSet.moreBtnTextCol,this.moreGameUrl=this.ranLinkData.gameSet.moreBtnUrl,this.recGameData=i,this.ranRecGameData(),this.InfoData=a,this.endShow0=this.InfoData.endShow0,this.endShow1=this.InfoData.endShow1,this.endShow2=this.InfoData.endShow2,this.endShow3=this.InfoData.endShow3,this.infoGameName=this.InfoData.gameName,this.showText=this.InfoData.showText,this.startText=this.InfoData.startText,this.moreGameText=this.InfoData.moreGame,this.playAgainText=this.InfoData.rePlay,this.gameInfoText=this.InfoData.showText,this.txtStartText=this.InfoData.startText,this.txtMoreText=this.InfoData.moreGame,this.txtAgainText=this.InfoData.rePlay,console.log("LoadMainGameScnee"),e=n.launchScene,t=n.Bros,i=n.caS,c.goToCover(this.adShowBefore,this.adShowAfter,e,t,i))},ranRecGameData:function(){var e;null!=this.recGameData&&""!=this.recGameData&&(this.returnBool=!1,e=this.recGameData.length,e=n.returnRanNum(1,e)-1,cc.log("ranNNN",e),this.recGameUrl=this.recGameData[e].data_link,this.recGameDelPer=this.recGameData[e].delay_per,this.recGameDelPau=this.recGameData[e].delay_pau,this.recGameimg1=this.recGameData[e].img_1,this.recGameimg2=this.recGameData[e].img_2,this.recGamePos=this.recGameData[e].poistion)},ranLinkUrl:function(){var e;return null!=this.ranLinkData&&this.ranLinkData.gameList&&null!=this.ranLinkData.gameList?(e=this.ranLinkData.gameList.length,e=n.returnRanNum(1,e)-1,cc.log("templ",e,this.ranLinkData.gameList),cc.log("url",this.ranLinkData.gameList[0].gameName,this.ranLinkData.gameList[0].gameUrl),e):null},gotoEndLayer:function(){this.showGameEndLayer()},showGameEndLayer:function(){console.log("Gottttttgameend"),a.loadingLayer("panel/GameOverLayer")}};t.exports=s,cc._RF.pop()},{GameConfig:"GameConfig",GameUiTools:"GameUiTools",HttpManagerJs:"HttpManagerJs",LanguageSetJs:"LanguageSetJs",LoadSceneJs:"LoadSceneJs"}],OtherConfig:[function(e,t){cc._RF.push(t,"608a3yCxFxLC6+PTyEzdmgt","OtherConfig"),window.renderConfig={Continue:{CN:"ç‚¹å‡»ç»§ç»­",CHT:"é»žæ“Šç¹¼çºŒ",EN:"Click Continue",KOR:"í´ë¦­ í•˜ì—¬ ê³„ì†"},name_1:{CN:"èŒèšª",CHT:"èŒèšª",EN:"Tadpole",KOR:"ì˜¬ì±™ì´"},name_2:{CN:"é’è›™",CHT:"é’è›™",EN:"Frog",KOR:"ê°œêµ¬ë¦¬"},name_3:{CN:"ä¹Œé¾Ÿ",CHT:"çƒé¾œ",EN:"Tortoise",KOR:"ê±°ë¶ì´"},name_4:{CN:"å°é‡‘é±¼ ",CHT:"å°é‡‘é­š",EN:"Goldfish",KOR:"ìž‘ì€ ê¸ˆë¶•ì–´"},name_5:{CN:"é”¦é²¤é±¼",CHT:"éŒ¦é¯‰é­š",EN:"Koi Fish",KOR:"ìž‰ì–´"},name_6:{CN:"ç”µé³—",CHT:"é›»é°»",EN:"Eel",KOR:"ì „ê¸°ë±€ìž¥ì–´"},name_7:{CN:"é²¨é±¼",CHT:"é¯Šé­š",EN:"Shark",KOR:"ìƒì–´."},name_8:{CN:"å¤§é²¸é±¼",CHT:"å¤§é¯¨é­š",EN:"Whale",KOR:"í° ê³ ëž˜"},name_9:{CN:"è›Ÿ",CHT:"è›Ÿ",EN:"Snake",KOR:"í™œìš©ë‹¨ì–´ì°¸ì¡°"},name_10:{CN:"ç¥žé¾™",CHT:"ç¥žé¾",EN:"Dragon",KOR:"ì‹ ë£¡"},getStrForType:function(e){var t="zh-CN"==window.navigator.language||"zh-cn"==window.navigator.language?"CN":"zh-TW"==window.navigator.language||"zh-HK"==window.navigator.language||"ja-JP"==window.navigator.language?"CHT":cc.sys.language!=cc.sys.LANGUAGE_ENGLISH&&cc.sys.language==cc.sys.LANGUAGE_KOREAN?"KOR":"EN";return null!=this[e]?this[e][t]:(cc.log("æ²¡æœ‰ç¿»è¯‘:"+e),e)}},window.zIndexAll={flower:1},cc._RF.pop()},{}],PoolManager:[function(e,t){cc._RF.push(t,"6ed4diP7FRFIJc3wpj5cOOM","PoolManager"),window.PoolManager={PoolDic:{bulletPool:null},addPoolObj:function(e,t){null==this.PoolDic[e]&&(this.PoolDic[e]=new cc.NodePool(e)),this.PoolDic[e].put(t)},getPoolObj:function(e){return null!=this.PoolDic[e]&&1<this.PoolDic[e].size()?this.PoolDic[e].get():null},clearPool:function(e){if(null!=this.PoolDic[e])return this.PoolDic[e].clear();cc.error("æ²¡æœ‰æ·»åŠ å¯¹è±¡æ± ï¼š",e)}},cc._RF.pop()},{}],ToolsJs:[function(e,t){cc._RF.push(t,"5eeb3uOnbFGtKGg8ygEwPGB","ToolsJs");var o={SpriteFrameDic:{},PrefabDic:{},AudioClipDic:{},storageName:"LILILII",setStorage:function(e,t,i){i&&(t=JSON.stringify(t)),e=this.storageName+e,cc.sys.localStorage.setItem(e,t)},getStorage:function(e,t){e=this.storageName+e;e=cc.sys.localStorage.getItem(e);return"NaN"==(e=isNaN(e)?e:parseInt(e)).toString()&&(e=null),e=t&&null!=e?JSON.parse(e):e},logJsonObject:function(e){console.log(JSON.stringify(e))},addNoArr:function(e,t){return e.indexOf(t)<0&&(e.push(t),!0)},removeNodeForArr:function(e,t){return e.splice(e.indexOf(t),1)},addArrForIndex:function(e,t,i){return e.splice(t,0,i)},newSprite:function(e,t){var i=new cc.Node;return null!=this.SpriteFrameDic[e]?(i.addComponent(cc.Sprite).spriteFrame=this.SpriteFrameDic[e],null!=t&&t(i)):(i.addComponent(cc.Sprite),loadTools.loadNodeSprite(i,e,t)),i},setTexture:function(e,t){this.SpriteFrameDic[t]?e.getComponent(cc.Sprite).spriteFrame=this.SpriteFrameDic[t]:loadTools.loadNodeSprite(e,t)},setBtnClickSpr:function(t,e,i,a){this.SpriteFrameDic[e]?(t.getComponent(cc.Button).normalSprite=this.SpriteFrameDic[e],t.getComponent(cc.Button).hoverSprite=this.SpriteFrameDic[e],t.getComponent(cc.Sprite).pressedSprite=this.SpriteFrameDic[i],null!=a&&a()):(loadTools.getResSpr(e,function(e){t.getComponent(cc.Button).normalSprite=e,t.getComponent(cc.Button).hoverSprite=e}),loadTools.getResSpr(i,function(e){t.getComponent(cc.Button).pressedSprite=e,null!=a&&a()}))},setSpriteState:function(i,e){cc.loader.loadRes("materials/"+(0==e?"2d_sprite":"gray_sprite"),cc.Material,function(e,t){e?cc.error(e):i.getComponent(cc.Sprite).setMaterial(0,t)})},clonePrefab:function(e,t,i,a,o){void 0===o&&(o=0);var n=this.PrefabDic[e],c=null;return null!=n?(c=cc.instantiate(n),t&&t.addChild(c,o),i&&(c.position=i),null!=a&&a(c)):loadTools.loadPrefab(e,t,i,a,o),c},newLabel:function(e,t,i,a,o,n){void 0===i&&(i=20),void 0===a&&(a=.5),void 0===o&&(o=.5),void 0===n&&(n=0);var c=new cc.Node,a=(c.anchorX=a,c.anchorY=o,c.addComponent(cc.Label));return a.string=e,a.fontSize=i,t.addChild(c,n),c},delayTimeCall:function(e,t,i,a){e.runAction(cc.sequence(cc.delayTime(i),cc.callFunc(t,a)))},getDistance:function(e,t){return e.sub(t).mag()},getDiscForNode:function(e,t){e=this.getToWorldPosAR(e),t=this.getToWorldPosAR(t);return this.getDistance(e,t)},getVectorForPos:function(e,t){return t.sub(e)},getStrForNum:function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=2);var a="";return e>=1e3*Math.pow(10,i-1)?(e/=1e3,a="k",1e3<=(e=Math.floor(e*Math.pow(10,t))/Math.pow(10,t))&&(e/=1e3,a="M",e=Math.floor(e*Math.pow(10,t))/Math.pow(10,t)),1e3<=e&&(e/=1e3,a="G",e=Math.floor(e*Math.pow(10,t))/Math.pow(10,t)),e+a):(e=Math.ceil(e))+a},getStrForNum2:function(e){var t="";if((e=(e||0).toString())<=3)return e;for(;3<e.length;)t=","+e.slice(-3)+t,e=e.slice(0,e.length-3);return t=e?e+t:t},insertStrForIndex:function(e,t,i){return e.slice(0,t)+i+e.slice(t)},prefixInteger:function(e,t){return void 0===t&&(t=2),(Array(t).join("0")+e).slice(-t)},getNodePosForWroldPos:function(e,t){return e.convertToNodeSpaceAR(t)},getToNodePos:function(e,t){e=e.parent.convertToWorldSpaceAR(e.position);return t.convertToNodeSpaceAR(e)},getToWorldPosAR:function(e){return e.parent.convertToWorldSpaceAR(e.position)},getToWorldPos:function(e){return e.parent.convertToWorldSpace(e.position)},isBoxContainPos:function(e,t){return e.getBoundingBox().contains(t)},isBoxContainWorldPos:function(e,t){return e.getBoundingBoxToWorld().contains(t)},isRectInterRect:function(e,t){return e.getBoundingBoxToWorld().intersects(t.getBoundingBoxToWorld())},returnRandom:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},setAngleForParent:function(){},setNodeParent:function(e,t,i){void 0===i&&(i=!0);var a=this.getToNodePos(e,t);e.parent=t,e.position=a,i&&e.parent&&(e.angle+=e.parent.angle)},refractionY:function(e){return Math.atan2(Math.sin(e),-Math.cos(e))},refractionX:function(e){return Math.atan2(-Math.sin(e),Math.cos(e))},aginSortArr:function(e){for(var t=0;t<e.length;t++){var i,a=o.returnRandom(0,e.length-1);a!=t&&(i=e[t],e[t]=e[a],e[a]=i)}},returnCurrentLanType:function(){return cc.sys.language==cc.sys.LANGUAGE_CHINESE?-1!=cc.sys.languageCode.toLowerCase().indexOf("zh-cn")||-1!=cc.sys.languageCode.toLowerCase().indexOf("zh_cn")?1:2:cc.sys.language==cc.sys.LANGUAGE_KOREAN?4:3},getBeatItScore:function(e,t,i){var a;return i<e?100:e<=t?0==e?0:(a=e/t*80+this.returnRandom(-3,3),Math.max(Math.floor(a),5)):(a=80+(e-t)/(i-t)*20+this.returnRandom(-3,3),Math.min(Math.floor(a),99))},sortArrForObject:function(e,i,t){(t=void 0===t?!1:t)?e.sort(function(e,t){return t[i]-e[i]}):e.sort(function(e,t){return e[i]-t[i]})},getDiffNumRandom:function(e,t,i){for(var a=[],o=e;o<=t;o++)a.push(o);for(var n=a.length-i,c=0;c<n;c++){var s=this.returnRandom(0,a.length-1);a.splice(s,1)}return a},writeJson:function(e,t){var i;cc.sys.isBrowser&&(console.log("æµè§ˆå™¨"),e=new Blob([e],{type:"application/json"}),(i=document.createElement("a")).download=t,i.innerHTML="Download File",null!=window.webkitURL?i.href=window.webkitURL.createObjectURL(e):(i.href=window.URL.createObjectURL(e),i.onclick=destroyClickedElement,i.style.display="none",document.body.appendChild(i)),i.click())}};window.ToolsJs=o,cc._RF.pop()},{}],UIManager:[function(e,t){cc._RF.push(t,"866bf0oenZKtoq5L6EbRayh","UIManager");window.UIManager={UIDic:{},OpenUI:function(e,t,i){var a;"string"!=typeof e&&(e=e.name),null!=(a=o&&o[e]?o[e]:a)?null==this.UIDic[e]?(1==i&&this.removeAllUI(),this.CreateUI(a,t)):cc.error("å·²ç»æ‰“å¼€è¿‡UI:"+e):cc.error("æœªæ‰¾åˆ°è¯¥UIçš„é…ç½®ä¿¡æ¯:"+e)},CloseUI:function(e,t){var i;"string"!=typeof e&&(e=e.name),null!=(i=this.UIDic[e])?(i.getComponent(i.config.com)&&null!=i.getComponent(i.config.com).closeUI?i.getComponent(i.config.com).closeUI(t):i.destroy(),this.UIDic[e]=null):cc.error("å·²ç»å…³é—­è¿‡UI:"+e)},GetUI:function(e){var t=this.UIDic[e];return null!=t?t:(cc.log("æ²¡æœ‰æ‰“å¼€UI:"+e),null)},GetUIForJs:function(e){var t=this.UIDic[e];return null!=t?t.getComponent(t.config.com):(cc.error("æ²¡æœ‰æ‰“å¼€UI:"+e),null)},CreateUI:function(i,a){var e,o=this;null==this.UIDic[i.name]&&(e=cc.director.getScene().getChildByName("Canvas"),ToolsJs.clonePrefab(i.resUrl,e,null,function(e){e.config=i;var t=e.getComponent(i.com);null!=t&&null!=t.openUI&&t.openUI(a),o.UIDic[i.name]=e},i.zIndex))},removeAllUI:function(){for(var e in this.UIDic)this.CloseUI(e)},openTipUI:function(e,t,i,a,o,n,c,s,r){e={tipStr:e,glodNum:i=void 0===i?0:i,tipType:t=void 0===t?2:t,yesCall:a,noCall:o,isDouble:n=void 0===n?!1:n,glodType:c=void 0===c?1:c,yesStr:s||2==t?renderConfig.getStrForType("yesStr"):renderConfig.getStrForType("sureStr"),noStr:r||renderConfig.getStrForType("noStr")};this.OpenUI("tipUIPanel",e)}};var o={nextPanel:{name:"nextPanel",resUrl:"nextPanel",com:"nextPanel",zIndex:99}};window.UIConfig=o,cc._RF.pop()},{}],audioTools:[function(e,t){cc._RF.push(t,"f0150VbHHtN2qKswCMoDllB","audioTools"),window.audioTools={bgAudio:null,isPlayAudio:!0,isPlayBG:!0,playBG:function(e,t){void 0===t&&(t=.3),this.isPlayBG&&this.isPlayAudio&&(this.stopBG(),null!=ToolsJs.AudioClipDic[e]?this.bgAudio=cc.audioEngine.play(ToolsJs.AudioClipDic[e],!0,t):this.bgAudio=cc.audioEngine.play(cc.url.raw("resources/music/"+e+".mp3"),!0,t))},stopBG:function(){this.stopAudio(this.bgAudio)},playAudio:function(e,t,i){if(void 0===t&&(t=.5),void 0===i&&(i=!1),this.isPlayAudio)return null!=ToolsJs.AudioClipDic[e]?cc.audioEngine.play(ToolsJs.AudioClipDic[e],i,t):cc.audioEngine.play(cc.url.raw("resources/music/"+e+".mp3"),i,t)},stopAudio:function(e){null!=e&&cc.audioEngine.stop(e)},newAduioSource:function(e){var t;if(null!=ToolsJs.AudioClipDic[e])t=ToolsJs.AudioClipDic[e];else{if(null==e)return console.log("clipä¸èƒ½ä¸ºç©ºï¼"),null;t=e}e=new cc.Node;return e.addComponent(cc.AudioSource).clip=t,e.getComponent(cc.AudioSource)}},cc._RF.pop()},{}],endBlackJS:[function(e,t){cc._RF.push(t,"10c1aPfzmNB9qwshKRmLq1A","endBlackJS");var i=e("GameConfig");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.mainSelf=cc.find("Canvas").getComponent("MainGameJS")},clickEnterOverLayer:function(){if(this.node.canTouch&&(this.node.canTouch=!1,i.publicGameBool,this.mainSelf.initEndLayer(),this.mainSelf.gameOverT1.node.destroy(),this.mainSelf.gameOverT2.node.destroy(),0<this.mainSelf.enemyNode.children.length))for(var e=0;e<this.mainSelf.enemyNode.children.length;e++)this.mainSelf.enemyNode.children[e].typeID>=this.mainSelf.maxTypeID&&this.mainSelf.enemyNode.children[e].destroy()},start:function(){},update:function(){}}),cc._RF.pop()},{GameConfig:"GameConfig"}],enemyJS:[function(e,t){cc._RF.push(t,"9bf97/TUWJAtJTYemvyINjL","enemyJS"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.mainSelf=cc.find("Canvas").getComponent("MainGameJS")},start:function(){},onCollisionEnter:function(e,t){var i;this.mainSelf.gameOverFlags||(this.mainSelf.collision=t.node,666!=t.tag)||(1==e.tag&&(i=e.node.typeID,t.node.typeID>i)&&(this.mainSelf.createSmallFish(this.mainSelf.playerNode.typeID),this.mainSelf.EatingEffectAction(e.node),e.node.destroy()),777==e.tag&&t.node.typeID>e.node.typeID&&(cc.audioEngine.play(this.mainSelf.HurtMusic,!1,1),this.mainSelf.EatingEffectAction2(e.node),1==(i=e.node.typeID)?ToolsJs.removeNodeForArr(this.mainSelf.kedouArr,e.node):2==i?ToolsJs.removeNodeForArr(this.mainSelf.qingwaArr,e.node):3==i?ToolsJs.removeNodeForArr(this.mainSelf.haiguiArr,e.node):4==i?ToolsJs.removeNodeForArr(this.mainSelf.xiaojinyuArr,e.node):5==i?ToolsJs.removeNodeForArr(this.mainSelf.jinliArr,e.node):6==i?ToolsJs.removeNodeForArr(this.mainSelf.dianmanArr,e.node):7==i?ToolsJs.removeNodeForArr(this.mainSelf.shayuArr,e.node):8==i&&ToolsJs.removeNodeForArr(this.mainSelf.jingyuArr,e.node),e.node.destroy()))},update:function(){}}),cc._RF.pop()},{}],gameOverJs:[function(e,t){cc._RF.push(t,"3621brbM61BsYFG7fM/74TL","gameOverJs");var i=e("GameUiTools"),a=e("GameConfig"),o=e("MainManage");cc.Class({extends:cc.Component,properties:{bgLayer:cc.Node,overScoreT:cc.Label,overInfoT:cc.Label,moreBtn:cc.Button,leftBtn:cc.Button,maxScoreText:cc.Label,nametext:cc.Label,nowFishNode:cc.Node,maxFishNode:cc.Node,mainNode:cc.Node,replayBtn:cc.Node},onLoad:function(){this.mainSelf=cc.find("Canvas").getComponent("MainGameJS"),this.canTouchReplay=!1,this.standardScore=a.standScore,this.game_max_score=2*this.standardScore,this.endPercent=ToolsJs.getBeatItScore(this.mainSelf.maxTypeID,a.standScore,2*a.standScore),this.rigthBtnGameName=null,this.rightBtnGameUrl=null,this.UIPosChange(),this.addClickBtns(),this.returnCurrentLanType(),this.maxScoreText.string=i,this.maxScoreText._forceUpdateRenderData(),e=this.maxScoreText.node.width;var e,t=this.maxScoreText.node.children[0],t=e+t.width*t.scale*this.maxScoreText.node.scale+8,t=(this.maxScoreText.node.x=t/2-e,this.node.opacity=0,this.node.runAction(cc.sequence(cc.fadeIn(.3),cc.callFunc(function(){this.canTouchReplay=!0,this.replayBtn.runAction(cc.sequence(cc.delayTime(2),cc.scaleTo(.3,.8).easing(cc.easeSineInOut()),cc.scaleTo(.3,.7).easing(cc.easeSineInOut()),cc.rotateTo(.1,15).easing(cc.easeSineInOut()),cc.rotateTo(.2,-15).easing(cc.easeSineInOut()),cc.rotateTo(.1,15).easing(cc.easeSineInOut()),cc.rotateTo(.2,-15).easing(cc.easeSineInOut()),cc.rotateTo(.1,0).easing(cc.easeSineInOut()))).repeatForever()},this))),this.moreBtn.node.y=cc.winSize.height/2-80,this.mainSelf.maxTypeID),i=this.getHighScore();i?i<this.mainSelf.maxTypeID&&(this.setHisSocre(this.mainSelf.maxTypeID),i=this.mainSelf.maxTypeID):(this.setHisSocre(this.mainSelf.maxTypeID),i=t),this.typeID=i,this.endPageDisplay(),this.nametext.string=renderConfig.getStrForType("name_"+this.mainSelf.maxTypeID)},endPageDisplay:function(){var e=this.mainSelf.maxTypeID;this.nowFishNode.getChildByName("fish1").active=!1,this.nowFishNode.getChildByName("fish"+e).active=!0,this.maxFishNode.scaleX=.8,this.maxFishNode.scaleY=.8},returnCurrentLanType:function(){var e=1;switch(cc.sys.language){case cc.sys.LANGUAGE_CHINESE:e="zh-TW"==window.navigator.language||"zh-tw"==window.navigator.language||"zh-HK"==window.navigator.language||"zh-hk"==window.navigator.language?(cc.log("ç¹ä½“"),2):(cc.log("ç®€ä½“"),1);break;case cc.sys.LANGUAGE_KOREAN:e=4;break;default:e=3}return e},setHisSocre:function(e){cc.sys.localStorage.setItem("ZhaoHuanShenLong_12WS",e)},getHighScore:function(){return cc.sys.localStorage.getItem("ZhaoHuanShenLong_12WS")},UIPosChange:function(){this.overScoreT.string=a.gameScore,console.log("lang",o.langugeType);var e=null,t=null;1==a.curType?(e=this.getContentByScore(a.gameScore,o.gameNameText),t=this.getContentByScore1(a.gameScore,o.gameNameText)):2==a.curType?(e=this.getContentByScore2_1(a.gameScore,o.gameNameText),t=this.getContentByScore2(a.gameScore,o.gameNameText)):3==a.curType?(e=this.getContentByScore3_1(a.gameScore,o.gameNameText),t=this.getContentByScore3(a.gameScore,o.gameNameText)):4==a.curType&&(e=this.getContentByScore4_1(a.gameScore,o.gameNameText),t=this.getContentByScore4(a.gameScore,o.gameNameText)),console.log("nihao",o.endHttpShowInfo),this.overInfoT.string=t,document.title=e},addClickBtns:function(){var e=this;e.moreBtn.node.on(cc.Node.EventType.TOUCH_START,function(){}),e.moreBtn.node.on(cc.Node.EventType.TOUCH_END,function(){console.log("MoreGame"),window.location.href=o.moreGameUrl}),e.leftBtn.node.on(cc.Node.EventType.TOUCH_START,function(){}),e.leftBtn.node.on(cc.Node.EventType.TOUCH_END,function(){e.canTouchReplay&&(cc.eventManager.removeAllListeners(),a.GAME_OVER_BOOL=!0,a.gameScore=0,a.publicGameBool,console.log("loadScene"),i.loadingScene("MainGameScene"))})},getPercent:function(e){return e<=0?0:e<=30?1+Math.floor(3*Math.random()):e<=40?5+Math.floor(10*Math.random()):e<=50?10+Math.floor(10*Math.random()):e<=60?20+Math.floor(15*Math.random()):e<=70?30+Math.floor(15*Math.random()):e<=80?40+Math.floor(20*Math.random()):e<=100?50+Math.floor(30*Math.random()):e<=120?60+Math.floor(30*Math.random()):e<=160?70+Math.floor(25*Math.random()):e<=190?80+Math.floor(19*Math.random()):e<=250?91+Math.floor(9*Math.random()):100},getContentByScore:function(e,t){var i="æˆ‘çœŸæ˜¯å¤ªåŽ‰å®³ï¼Œåœ¨"+t+"ä¸­ç«Ÿç„¶å¾—äº†0åˆ†ï¼Œå…¨çƒåªæœ‰1ä¸ªäººå¾—0åˆ†ï¼",a=parseInt(.3*this.standardScore),o=parseInt(.5*this.standardScore),n=parseInt(.7*this.standardScore),c=parseInt(.9*this.standardScore),s=this.endPercent;return 0<e&&e<=a?i="æˆ‘åœ¨"+t+"ä¸­å‡»è´¥äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼ŒçœŸæ˜¯å¤ªæ£’äº†ï¼Œå†ç»ƒç»ƒå°±èƒ½è¾¾åˆ°æ¸¸åˆƒæœ‰ä½™çš„å¢ƒç•Œï¼":a<e&&e<=this.standardScore?i="æˆ‘åœ¨"+t+"ä¸­å¾—å‡»è´¥äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼ŒçœŸæ˜¯å¤ªæ£’äº†ï¼Œå†ç»ƒç»ƒå°±èƒ½è¾¾åˆ°æ¸¸åˆƒæœ‰ä½™çš„å¢ƒç•Œï¼":e>this.standardScore&&e<=o?i="æˆ‘åœ¨"+t+"ä¸­å‡»è´¥äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼Œè¿›å…¥äº†ä¿¡æ‰‹æ‹ˆæ¥çš„å¢ƒç•Œï¼":o<e&&e<=n?i="æˆ‘åœ¨"+t+"ä¸­å‡»è´¥äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼Œè¿›å…¥äº†è¿ç”¨è‡ªå¦‚çš„å¢ƒç•Œï¼":n<e&&e<=c?i="æˆ‘åœ¨"+t+"ä¸­å‡»è´¥äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼Œè¾¾åˆ°äº†è¡Œäº‘æµæ°´çš„å¢ƒç•Œï¼":c<e&&e<this.game_max_score?i="æˆ‘åœ¨"+t+"ä¸­å‡»è´¥äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼Œç‹¬å­¤æ±‚è´¥ï¼":e>=this.game_max_score&&(i="æˆ‘åœ¨"+t+"ä¸­å‡»è´¥äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼Œè¶…è¶Šäº†ç‹¬å­¤æ±‚è´¥ï¼Œå¿ƒæœ‰çµçŠ€ï¼"),i},getContentByScore2_1:function(e,t){var i="æˆ‘çœŸæ˜¯å¤ªåŽ²å®³ï¼Œåœ¨"+t+"ä¸­ç«Ÿç„¶å¾—äº†0åˆ†ï¼Œå…¨çƒåªæœ‰1å€‹äººå¾—0åˆ†ï¼",a=parseInt(.3*this.standardScore),o=parseInt(.5*this.standardScore),n=parseInt(.7*this.standardScore),c=parseInt(.9*this.standardScore),s=this.endPercent;return 0<e&&e<=a?i="æˆ‘åœ¨"+t+"ä¸­æ“Šæ•—äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼ŒçœŸæ˜¯å¤ªæ£’äº†ï¼Œå†ç·´ç·´å°±èƒ½é”åˆ°éŠåˆƒæœ‰é¤˜çš„å¢ƒç•Œï¼":a<e&&e<=this.standardScore?i="æˆ‘åœ¨"+t+"ä¸­æ“Šæ•—äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼ŒçœŸæ˜¯å¤ªæ£’äº†ï¼Œå†ç»ƒç»ƒå°±èƒ½è¾¾åˆ°æ¸¸åˆƒæœ‰ä½™çš„å¢ƒç•Œï¼":e>this.standardScore&&e<=o?i="æˆ‘åœ¨"+t+"ä¸­æ“Šæ•—äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼Œé€²å…¥äº†ä¿¡æ‰‹æ‹ˆä¾†çš„å¢ƒç•Œï¼":o<e&&e<=n?i="æˆ‘åœ¨"+t+"ä¸­æ“Šæ•—äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼Œé€²å…¥äº†é‹ç”¨è‡ªå¦‚çš„å¢ƒç•Œï¼":n<e&&e<=c?i="æˆ‘åœ¨"+t+"ä¸­æ“Šæ•—äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼Œé”åˆ°äº†è¡Œé›²æµæ°´çš„å¢ƒç•Œï¼":c<e&&e<this.game_max_score?i="æˆ‘åœ¨"+t+"ä¸­æ“Šæ•—äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼Œç¨å­¤æ±‚æ•—ï¼":e>=this.game_max_score&&(i="æˆ‘åœ¨"+t+"ä¸­æ“Šæ•—äº†å…¨çƒ"+s+"%çš„çŽ©å®¶ï¼Œè¶…è¶Šäº†ç¨å­¤æ±‚æ•—ï¼Œå¿ƒæœ‰éˆçŠ€ï¼"),i},getContentByScore3_1:function(e,t){var t="I'm awesomeï¼Œin"+t+"get 0 scoreï¼Œonly one person in the world has a 0ï¼",i=parseInt(.3*this.standardScore),a=parseInt(.5*this.standardScore),o=parseInt(.7*this.standardScore),n=parseInt(.9*this.standardScore),c=this.endPercent;return e>=this.game_max_score?t="I got "+e+" points in the game, defeating all players worldwide, waiting for you to fight!":0<e&&e<=i||i<e&&e<=this.standardScore?t="I got "+e+" points in the game, really greatï¼":e>this.standardScore&&e<=a||a<e&&e<=o?t="I got "+e+" points in the game , beating out "+c+"% of global playersï¼":o<e&&e<=n?t="I got "+e+" points in the game , beating out 99% of global playersï¼":n<e&&e<this.game_max_score&&(t="I got "+e+" points in the game, it said to be the world's only 10 people to reach this level! Have you?"),t},getContentByScore4_1:function(e){var t="ë‚œ ì •ë§ ëŒ€ë‹¨ í•´, ê²Œìž„ ì—ì„œ ë¬´ë ¤ 0 ì  ì„ ë°› ì•˜ ìŠµ ë‹ˆ ë‹¤. ì „ ì„¸ê³„ ì—ì„œ 1 ëª… ë§Œ 0 ì  ì„ ë°› ì•˜ ìŠµ ë‹ˆ ë‹¤!",i=parseInt(.3*this.standardScore),a=parseInt(.5*this.standardScore),o=parseInt(.7*this.standardScore),n=parseInt(.9*this.standardScore),c=this.endPercent;return t=0<e&&e<=i||i<e&&e<=this.standardScore||e>this.standardScore&&e<=a||a<e&&e<=o||o<e&&e<=n||n<e&&e<this.game_max_score||e>=this.game_max_score?"ì € ëŠ” ê²Œìž„ ì—ì„œ "+e+" ì  ì„ íšë“ í•˜ì—¬ ì „ ì„¸ê³„ "+c+"% ìœ  ì € ë¥¼ ê²©íŒŒ í•˜ ì˜€ ìŠµ ë‹ˆ ë‹¤!":t},getContentByScore1:function(){return"å‡»è´¥äº†å…¨çƒ"+this.endPercent+"%çš„çŽ©å®¶ï¼"},getContentByScore2:function(){return"æ“Šæ•—äº†å…¨çƒ"+this.endPercent+"%çš„çŽ©å®¶ï¼"},getContentByScore3:function(){return"Beat "+this.endPercent+"% of the world's players!"},getContentByScore4:function(){return"ì „ ì„¸ê³„"+this.endPercent+"%ìœ  ì € ë¥¼ ì²˜ì¹˜ í•˜ ì˜€ ìŠµ ë‹ˆ ë‹¤!"},start:function(){},update:function(){}}),cc._RF.pop()},{GameConfig:"GameConfig",GameUiTools:"GameUiTools",MainManage:"MainManage"}],jianceJS:[function(e,t){cc._RF.push(t,"671d7/ykbxBLKzxFW4yZU5f","jianceJS"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.mainSelf=cc.find("Canvas").getComponent("MainGameJS")},start:function(){},onCollisionEnter:function(e,t){this.mainSelf.gameOverFlags||2!=e.tag||(e=this.mainSelf.playerNode.typeID,t.node.parent.typeID>e&&this.mainSelf.ChasePlayer(t.node.parent),t.node.parent.typeID==e&&this.mainSelf.EscapePlayer(t.node.parent))},onCollisionExit:function(e,t){2==e.tag&&(e=this.mainSelf.playerNode.typeID,t.node.parent.typeID!=e)&&(t.node.parent.stopAllActions(),this.mainSelf.enemyAction(t.node.parent))},update:function(){}}),cc._RF.pop()},{}],leafJS:[function(e,t){cc._RF.push(t,"f0114pL/kNBoLIFzlmVI/1D","leafJS"),e("../commonJs/mTool_WHQ").getRandomNum;var i=e("../commonJs/mTool_WHQ");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.mainSelf=cc.find("Canvas").getComponent("MainGameJS"),this.delay=i.getRandomNum(.5,5,!1),this.startScaleX=this.node.scaleX,this.startScaleY=this.node.scaleY,this.random=i.getRandomNum(1,10),this.random<=3&&this.Action()},start:function(){},Action:function(){this.node.runAction(cc.sequence(cc.scaleBy(.2,1.1,1.1),cc.scaleTo(.2,this.startScaleX,this.startScaleY),cc.scaleBy(.2,1.1,1.1),cc.scaleTo(.2,this.startScaleX,this.startScaleY),cc.callFunc(function(){var e=this;this.scheduleOnce(function(){e.random=i.getRandomNum(1,10),e.random<=3&&e.Action(),e.delay=i.getRandomNum(2,5,!1)},this.delay)},this)))},update:function(){}}),cc._RF.pop()},{"../commonJs/mTool_WHQ":"mTool_WHQ"}],linkHttpIconJs:[function(e,t){cc._RF.push(t,"95474fr0oNDP7SAidILF03q","linkHttpIconJs");var s=e("MainManage");e("GameConfig"),cc.Class({extends:cc.Component,properties:{iconSpr:cc.Node,iconSpr1:cc.Node},onLoad:function(){var i,a,e,t,o,n,c;this._imageArr=[],this.stopUpdateBool=!0,this.gameWidth=cc.winSize.width,this.gameHeight=cc.winSize.height,null!=s.recGameData&&""!=s.recGameData&&null!=s.recGameimg1&&""!=s.recGameimg1&&(i=50-this.gameWidth/2,a=this.gameHeight-50-this.gameHeight/2,null!=s.recGamePos&&""!=s.recGamePos&&(1==s.recGamePos?(i=50-this.gameWidth/2,a=this.gameHeight-50-this.gameHeight/2):2==s.recGamePos?(i=this.gameWidth-50-this.gameWidth/2,a=this.gameHeight-50-this.gameHeight/2):3==s.recGamePos?(i=this.gameWidth-50-this.gameWidth/2,a=50-this.gameHeight/2):4==s.recGamePos&&(i=50-this.gameWidth/2,a=50-this.gameHeight/2)),e=s.recGameimg1,t=s.recGameimg2,o=this.iconSpr,n=this.iconSpr1,c=this,cc.loader.load(e,function(e,t){o.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),c.iconSpr.opacity=0,c.iconSpr.x=i,c.iconSpr.y=a,c._imageArr.push(c.iconSpr)}),cc.loader.load(t,function(e,t){n.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),c.iconSpr1.opacity=0,c.iconSpr1.x=i,c.iconSpr1.y=a,c._imageArr.push(c.iconSpr1)})),this.addTouchEvents()},showLinkPic:function(){var e,t=null!=s.recGameDelPau?s.recGameDelPau:6;cc.log("dMainManager.recGameDelPer",s.recGameDelPer),e=null!=s.recGameDelPer?s.recGameDelPer:.7,this._imageArr[0].opacity=255,this._imageArr[0].runAction(cc.repeatForever(cc.sequence(cc.delayTime(t),cc.rotateBy(e,0,180),cc.callFunc(function(){this._imageArr[0].setRotation(0),this._imageArr[0].opacity=0,this._imageArr[1].opacity=255},this),cc.delayTime(t),cc.callFunc(function(){this.flowerAction(this._imageArr[1],e)},this),cc.delayTime(e),cc.callFunc(function(){this._imageArr[1].opacity=0,this._imageArr[0].opacity=255},this))))},flowerAction:function(e,t){e.runAction(cc.sequence(cc.rotateBy(t,0,180),cc.callFunc(function(){e.setRotation(0)})))},start:function(){},addTouchEvents:function(){cc.EventListener.TOUCH_ONE_BY_ONE},update:function(){this.stopUpdateBool&&2<=this._imageArr.length&&(this.stopUpdateBool=!1,this.showLinkPic())}}),cc._RF.pop()},{GameConfig:"GameConfig",MainManage:"MainManage"}],loadTools:[function(e,t){cc._RF.push(t,"9ea23JPr69LB6K5CalAIXPw","loadTools"),window.loadTools={loadNodeSprite:function(i,e,a){i.getComponent(cc.Sprite)?cc.loader.loadRes(e,cc.SpriteFrame,function(e,t){e?cc.error(e):(i.getComponent(cc.Sprite).spriteFrame=t,null!=a&&a(i))}):cc.error("nodeä¸Šæ²¡æœ‰Spriteç»„ä»¶ï¼š",i)},getResSpr:function(e,i){cc.loader.loadRes(e,cc.SpriteFrame,function(e,t){e?cc.error(e):null!=i&&i(t)})},loadPrefab:function(e,i,a,o,n){void 0===n&&(n=0),cc.loader.loadRes(e,cc.Prefab,function(e,t){e?cc.error(e):(e=cc.instantiate(t),i?i.addChild(e,n):cc.director.getScene().children[0].addChild(e,100),a&&(e.position=a),o&&o(e))})},loadScene:function(e,t){cc.director.preloadScene(e,function(){cc.director.loadScene(e,t)})},loadJson:function(){}},cc._RF.pop()},{}],mTool_WHQ:[function(e,t){cc._RF.push(t,"fe57af2WNxE+67eFxNClrcq","mTool_WHQ"),t.exports={getRandomNum:function(e,t,i){return i?Math.floor(Math.random()*(t-e+1)+e):Math.random()*(t-e)+e},cbPosToWorldPos:function(e,t,i,a,o,n){i+=(e.x-t/2+.5)*o;return cc.v2(i,a+(e.y+.5)*n)},worldPosToCbPos:function(e,t,i,a,o,n){i=(e.x-i)/o-.5+t/2,o=(e.y-a)/n-.5;return i%1==0&&o%1==0||(i=Math.round(i),o=Math.round(o)),cc.v2(i,o)},judgeInArr:function(e,t){for(var i=0;i<t.length;i++)if(t[i]===e)return!0;return!1},getAngleByPos:function(e,t){var i=t.x-e.x;return 360*Math.atan((t.y-e.y)/i)/(2*Math.PI)},judgeIntersect:function(e,t,i,a,o,n,c,s){return Math.min(e,i)<=Math.max(o,c)&&Math.min(n,s)<=Math.max(t,a)&&Math.min(o,c)<=Math.max(e,i)&&Math.min(t,a)<=Math.max(n,s)&&((o-e)*(a-t)-(i-e)*(n-t))*((c-e)*(a-t)-(i-e)*(s-t))<=1e-8&&((e-o)*(s-n)-(c-o)*(t-n))*((i-o)*(s-n)-(c-o)*(a-n))<=1e-8},getNormalizeVector:function(e,t){return t.sub(e).normalize()},judgeItemOverlapping:function(e,t,i,a,o,n,c,s){return!(e+i<o||o+c<e||t+a<n||n+s<t)},getCircumferencePos:function(e,t,i){var a=cc.v2(0,0);return a.x=e.x+Math.sin(2*Math.PI/360*i)*t,a.y=e.y+Math.cos(2*Math.PI/360*i)*t,a},upsetArr:function(e){return e.sort(function(){return.5<Math.random()?-1:1})},getAudio:function(e,t){return cc.sys.os===cc.sys.OS_IOS?e:t},setLocalData:function(e,t){cc.sys.localStorage.setItem(e,t)},getLocalData:function(e){return cc.sys.localStorage.getItem(e)},getNodePos:function(e,t,i){return i?e.convertToNodeSpaceAR(t.convertToWorldSpaceAR(i)):e.convertToNodeSpaceAR(t.convertToWorldSpaceAR())},judgeArrSame:function(e,t){for(var i=0;i<e.length;i++)for(var a=0;a<t.length;a++)if(e[i]!==t[a])return!1;return!0},pDistance:function(e,t){return e.sub(t).mag()},getAngleByVector:function(e){return e.y<0?360-cc.v2(1,0).angle(e)/Math.PI*180:cc.v2(1,0).angle(e)/Math.PI*180},getBoundingBoxToNode:function(e,t){t=t.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.v2(-e.anchorX*e.width*(e.scaleX/Math.abs(e.scaleX)),-e.anchorY*e.height*(e.scaleY/Math.abs(e.scaleY)))));return cc.rect(t.x,t.y,e.width*Math.abs(e.scaleX),e.height*Math.abs(e.scaleY))},degreesToVectors:function(e){e=cc.misc.degreesToRadians(e);return cc.v2(1,0).rotate(-e)},vectorsToDegrees:function(e){var t;return Math.abs(e.x)+Math.abs(e.y)!==0?(t=cc.v2(1,0),e=e.signAngle(t),cc.misc.radiansToDegrees(e)):0}},cc._RF.pop()},{}],player2JS:[function(e,t){cc._RF.push(t,"f41fcJj045KGo2ubgiEeGaA","player2JS"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.mainSelf=cc.find("Canvas").getComponent("MainGameJS")},start:function(){},onCollisionEnter:function(e,t){var i;this.mainSelf.gameOverFlags||1!=e.tag||e.flags||(i=e.node.typeID,t.node.typeID>=i&&(e.tag=9999,this.mainSelf.EatSmallAction(e.node,this.mainSelf.myFish)))},update:function(){}}),cc._RF.pop()},{}],playerJS:[function(e,t){cc._RF.push(t,"ba7b9DpttpMLq9QsKGwuABo","playerJS"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.mainSelf=cc.find("Canvas").getComponent("MainGameJS")},start:function(){},onCollisionEnter:function(e,t){var i;this.mainSelf.gameOverFlags||(this.mainSelf.collision=t.node,t.tag=666,1==e.tag&&(i=e.node.typeID,this.mainSelf.playerNode.typeID>=i)&&(e.tag=999,this.mainSelf.EatSmallAction(e.node,t.node),this.mainSelf.EatingEffectAction(e.node)),t.tag=2,666==e.tag&&(i=e.node.typeID,this.mainSelf.playerNode.typeID<i)&&this.mainSelf.JudgeSmallFish())},update:function(){}}),cc._RF.pop()},{}],resArr:[function(e,t){cc._RF.push(t,"d1951bUsVBEo7LtLLUajDCO","resArr"),cc.Class({extends:cc.Component,properties:{SpriteFrameArr:[cc.SpriteFrame],PrefabArr:[cc.Prefab],audiosArr:{type:cc.AudioClip,default:[]}},onLoad:function(){this.addPrefabs(),this.addSpriteFrame(),this.addAudio()},addAudio:function(){this.audioClipDic={};for(var e,t=0;t<this.audiosArr.length;t++)this.audiosArr[t]&&(e=this.audiosArr[t],this.audioClipDic[e.name]=e);ToolsJs.AudioClipDic=this.audioClipDic},addSpriteFrame:function(){this.spriteArr={};for(var e,t=0;t<this.SpriteFrameArr.length;t++)this.SpriteFrameArr[t]&&(e=this.SpriteFrameArr[t],this.spriteArr[e.name]=e);ToolsJs.SpriteFrameDic=this.spriteArr},addPrefabs:function(){this.prefabsArr={};for(var e,t=0;t<this.PrefabArr.length;t++)this.PrefabArr[t]&&(e=this.PrefabArr[t],this.prefabsArr[e.name]=e);ToolsJs.PrefabDic=this.prefabsArr}}),cc._RF.pop()},{}],rockerJS:[function(e,t){cc._RF.push(t,"132743iYdROWry4PeEjE8Fb","rockerJS"),cc.Class({extends:cc.Component,properties:{buttonNode:cc.Node},onLoad:function(){this.node.opacity=0,this.mainSelf=cc.find("Canvas").getComponent("MainGameJS"),this.max_r=this.node.width/2;var e=cc.v2(0,0);this.dir=cc.v2(0,0),this.buttonNode.setPosition(e),this.mainSelf.node.on(cc.Node.EventType.TOUCH_END,function(){this.buttonNode.setPosition(cc.v2(0,0))},this),this.mainSelf.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){this.buttonNode.setPosition(cc.v2(0,0))},this),this.mainSelf.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var e=e.getLocation(),e=this.node.convertToNodeSpaceAR(e),t=e.mag();this.dir.x=e.x/t,this.dir.y=e.y/t,t>this.max_r&&(e.x=e.x/t*this.max_r,e.y=e.y/t*this.max_r),.5<this.dir.mag()&&0<t&&(this.mainSelf.OffPos=this.dir),this.buttonNode.setPosition(e)},this),this.mainSelf.node.on(cc.Node.EventType.TOUCH_START,function(e){e=e.getLocation(),e=this.mainSelf.node.convertToNodeSpaceAR(e);this.node.setPosition(e)},this)},start:function(){},update:function(){}}),cc._RF.pop()},{}],startGameJs:[function(e,t){cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","startGameJs"),e("GameUiTools"),e("HttpManagerJs");var i=e("MainManage"),a=(e("LoadSceneJs"),e("GameConfig"));cc.Class({extends:cc.Component,properties:{showInfoT:cc.Label,startT:cc.Label},onLoad:function(){a.publicGameBool&&i.init(),this.showInfoT.string=i.gameInfoText,this.startT.string=i.txtStartText,this.node.zIndex=100,this.node.on("touchend",function(){this.node.x=-2e3},this)},update:function(){}}),cc._RF.pop()},{GameConfig:"GameConfig",GameUiTools:"GameUiTools",HttpManagerJs:"HttpManagerJs",LoadSceneJs:"LoadSceneJs",MainManage:"MainManage"}],use_reversed_rotateTo:[function(e,t){cc._RF.push(t,"16142aty4ZFBpA8RBwxcagf","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}]},{},["HttpManagerJs","LanguageSetJs","LoadSceneJs","MainGameJS","resArr","MainManage","AniTools","ToolsJs","audioTools","loadTools","GameConfig","GameUiTools","mTool_WHQ","gameOverJs","linkHttpIconJs","EventManager","PoolManager","UIManager","EventData","OtherConfig","endBlackJS","enemyJS","jianceJS","leafJS","player2JS","playerJS","rockerJS","startGameJs","use_reversed_rotateTo"]);